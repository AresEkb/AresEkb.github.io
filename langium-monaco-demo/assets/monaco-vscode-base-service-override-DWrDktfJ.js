function G(i,e,t,n){var s=arguments.length,r=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(i,e,t,n);else for(var a=i.length-1;a>=0;a--)(o=i[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r}function L(i,e){return function(t,n){e(t,n,i)}}function wR(i,e,t=i.length-1){const n=vR(i,e,t);if(n!==-1)return i[n]}function vR(i,e,t=i.length-1){for(let n=t;n>=0;n--){const s=i[n];if(e(s))return n}return-1}function Ph(i,e){const t=Bh(i,e);return t===-1?void 0:i[t]}function Bh(i,e,t=0,n=i.length){let s=t,r=n;for(;s<r;){const o=Math.floor((s+r)/2);e(i[o])?s=o+1:r=o}return s-1}function yR(i,e){const t=K_(i,e);return t===i.length?void 0:i[t]}function K_(i,e,t=0,n=i.length){let s=t,r=n;for(;s<r;){const o=Math.floor((s+r)/2);e(i[o])?r=o:s=o+1}return s}class _1{static{this.assertInvariants=!1}constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(e){if(_1.assertInvariants){if(this._prevFindLastPredicate){for(const n of this._array)if(this._prevFindLastPredicate(n)&&!e(n))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}const t=Bh(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=t+1,t===-1?void 0:this._array[t]}}function SR(i,e){if(i.length===0)return;let t=i[0];for(let n=1;n<i.length;n++){const s=i[n];e(s,t)>0&&(t=s)}return t}function VY(i,e){if(i.length===0)return;let t=i[0];for(let n=1;n<i.length;n++){const s=i[n];e(s,t)>=0&&(t=s)}return t}function zY(i,e){return SR(i,(t,n)=>-e(t,n))}function $Y(i,e){if(i.length===0)return-1;let t=0;for(let n=1;n<i.length;n++){const s=i[n];e(s,i[t])>0&&(t=n)}return t}function qY(i,e){for(const t of i){const n=e(t);if(n!==void 0)return n}}class kR{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?ec.isErrorNoTelemetry(e)?new ec(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}}const w1=new kR;function KY(i){w1.setUnexpectedErrorHandler(i)}function Mp(i){w1.onUnexpectedError(i)}function pt(i){wc(i)||w1.onUnexpectedError(i)}function GY(i){wc(i)||w1.onUnexpectedExternalError(i)}function G_(i){if(i instanceof Error){const{name:e,message:t,cause:n}=i,s=i.stacktrace||i.stack;return{$isError:!0,name:e,message:t,stack:s,noTelemetry:ec.isErrorNoTelemetry(i),cause:n?G_(n):void 0,code:i.code}}return i}function CR(i){let e;return i.noTelemetry?e=new ec:(e=new Error,e.name=i.name),e.message=i.message,e.stack=i.stack,i.code&&(e.code=i.code),i.cause&&(e.cause=CR(i.cause)),e}const Op="Canceled";function wc(i){return i instanceof Zo?!0:i instanceof Error&&i.name===Op&&i.message===Op}class Zo extends Error{constructor(){super(Op),this.name=this.message}}class ip extends Error{static{this._name="PendingMigrationError"}static is(e){return e instanceof ip||e instanceof Error&&e.name===ip._name}constructor(e){super(e),this.name=ip._name}}function j_(){const i=new Error(Op);return i.name=i.message,i}function Sf(i){return i?new Error(`Illegal argument: ${i}`):new Error("Illegal argument")}function ly(i){return i?new Error(`Illegal state: ${i}`):new Error("Illegal state")}class jY extends TypeError{constructor(e){super(e?`${e} is read-only and cannot be changed`:"Cannot change read-only property")}}function Fp(i){return i?i.message?i.message:i.stack?i.stack.split(`
`)[0]:String(i):"Error"}class YY extends Error{constructor(e){super("NotImplemented"),e&&(this.message=e)}}class ER extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class ec extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof ec)return e;const t=new ec;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}}class De extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,De.prototype)}}function xR(i){if(i.length===0)throw new Error("Invalid tail call");return[i.slice(0,i.length-1),i[i.length-1]]}function wi(i,e,t=(n,s)=>n===s){if(i===e)return!0;if(!i||!e||i.length!==e.length)return!1;for(let n=0,s=i.length;n<s;n++)if(!t(i[n],e[n]))return!1;return!0}function LR(i,e){const t=i.length-1;e<t&&(i[e]=i[t]),i.pop()}function DR(i,e,t){return IR(i.length,n=>t(i[n],e))}function IR(i,e){let t=0,n=i-1;for(;t<=n;){const s=(t+n)/2|0,r=e(s);if(r<0)t=s+1;else if(r>0)n=s-1;else return s}return-(t+1)}function tC(i,e,t){if(i=i|0,i>=e.length)throw new TypeError("invalid index");const n=e[Math.floor(e.length*Math.random())],s=[],r=[],o=[];for(const a of e){const l=t(a,n);l<0?s.push(a):l>0?r.push(a):o.push(a)}return i<s.length?tC(i,s,t):i<s.length+o.length?o[0]:tC(i-(s.length+o.length),r,t)}function XY(i,e){const t=[];let n;for(const s of i.slice(0).sort(e))!n||e(n[0],s)!==0?(n=[s],t.push(n)):n.push(s);return t}function*TR(i,e){let t,n;for(const s of i)n!==void 0&&e(n,s)?t.push(s):(t&&(yield t),t=[s]),n=s;t&&(yield t)}function AR(i,e){for(let t=0;t<=i.length;t++)e(t===0?void 0:i[t-1],t===i.length?void 0:i[t])}function NR(i,e){for(let t=0;t<i.length;t++)e(t===0?void 0:i[t-1],i[t],t+1===i.length?void 0:i[t+1])}function QY(...i){return[].concat(...i)}function RR(i,e,t){const n=[];function s(a,l,c){if(l===0&&c.length===0)return;const h=n[n.length-1];h&&h.start+h.deleteCount===a?(h.deleteCount+=l,h.toInsert.push(...c)):n.push({start:a,deleteCount:l,toInsert:c})}let r=0,o=0;for(;;){if(r===i.length){s(r,0,e.slice(o));break}if(o===e.length){s(r,i.length-r,[]);break}const a=i[r],l=e[o],c=t(a,l);c===0?(r+=1,o+=1):c<0?(s(r,1,[]),r+=1):c>0&&(s(r,0,[l]),o+=1)}return n}function ZY(i,e,t){const n=RR(i,e,t),s=[],r=[];for(const o of n)s.push(...i.slice(o.start,o.start+o.deleteCount)),r.push(...o.toInsert);return{removed:s,added:r}}function ru(i){return i.filter(e=>!!e)}function JY(i){let e=0;for(let t=0;t<i.length;t++)i[t]&&(i[e]=i[t],e+=1);i.length=e}function eX(i,e,t){i.splice(t,0,i.splice(e,1)[0])}function MR(i){return!Array.isArray(i)||i.length===0}function Y_(i){return Array.isArray(i)&&i.length>0}function Mo(i,e=t=>t){const t=new Set;return i.filter(n=>{const s=e(n);return t.has(s)?!1:(t.add(s),!0)})}function tX(i,e,t=(n,s)=>n===s){let n=0;for(let s=0,r=Math.min(i.length,e.length);s<r&&t(i[s],e[s]);s++)n++;return n}function un(i,e){let t=typeof e=="number"?i:0;typeof e=="number"?t=i:(t=0,e=i);const n=[];if(t<=e)for(let s=t;s<e;s++)n.push(s);else for(let s=t;s>e;s--)n.push(s);return n}function iX(i,e,t){return i.reduce((n,s)=>(n[e(s)]=t?t(s):s,n),Object.create(null))}function OR(i,e){return i.push(e),()=>FR(i,e)}function FR(i,e){const t=i.indexOf(e);if(t>-1)return i.splice(t,1),e}function kf(i,e,t){const n=i.slice(0,e),s=i.slice(e);return n.concat(t,s)}function iC(i,e){let t;t=Math.random;for(let n=i.length-1;n>0;n-=1){const s=Math.floor(t()*(n+1)),r=i[n];i[n]=i[s],i[s]=r}}function Db(i,e){const t=i.indexOf(e);t>-1&&(i.splice(t,1),i.unshift(e))}function hg(i,e){const t=i.indexOf(e);t>-1&&(i.splice(t,1),i.push(e))}function X_(i,e){for(const t of e)i.push(t)}function nX(i,e){return Array.isArray(i)?i.map(e):e(i)}function PR(i){return Array.isArray(i)?i:[i]}function cy(i,e,t){const n=pI(i,e),s=i.length,r=t.length;i.length=s+r;for(let o=s-1;o>=n;o--)i[o+r]=i[o];for(let o=0;o<r;o++)i[o+n]=t[o]}function Pp(i,e,t,n){const s=pI(i,e);let r=i.splice(s,t);return r===void 0&&(r=[]),cy(i,s,n),r}function pI(i,e){return e<0?Math.max(e+i.length,0):Math.min(e,i.length)}const sX=i=>e=>e[i];var Ha;(function(i){function e(r){return r<0}i.isLessThan=e;function t(r){return r<=0}i.isLessThanOrEqual=t;function n(r){return r>0}i.isGreaterThan=n;function s(r){return r===0}i.isNeitherLessOrGreaterThan=s,i.greaterThan=1,i.lessThan=-1,i.neitherLessOrGreaterThan=0})(Ha||(Ha={}));function zl(i,e){return(t,n)=>e(i(t),i(n))}function rX(...i){return(e,t)=>{for(const n of i){const s=n(e,t);if(!Ha.isNeitherLessOrGreaterThan(s))return s}return Ha.neitherLessOrGreaterThan}}const $l=(i,e)=>i-e,oX=(i,e)=>$l(i?1:0,e?1:0);function BR(i){return(e,t)=>-i(e,t)}function aX(i){return(e,t)=>e===void 0?t===void 0?Ha.neitherLessOrGreaterThan:Ha.lessThan:t===void 0?Ha.greaterThan:i(e,t)}class Q_{constructor(e){this.firstIdx=0,this.items=e,this.lastIdx=this.items.length-1}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;const n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;const n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){const e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){const e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){const t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}}class Uo{static{this.empty=new Uo(e=>{})}constructor(e){this.iterate=e}forEach(e){this.iterate(t=>(e(t),!0))}toArray(){const e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new Uo(t=>this.iterate(n=>e(n)?t(n):!0))}map(e){return new Uo(t=>this.iterate(n=>t(e(n))))}some(e){let t=!1;return this.iterate(n=>(t=e(n),!t)),t}findFirst(e){let t;return this.iterate(n=>e(n)?(t=n,!1):!0),t}findLast(e){let t;return this.iterate(n=>(e(n)&&(t=n),!0)),t}findLastMaxBy(e){let t,n=!0;return this.iterate(s=>((n||Ha.isGreaterThan(e(s,t)))&&(n=!1,t=s),!0)),t}}class Z_{constructor(e){this._indexMap=e}static createSortPermutation(e,t){const n=Array.from(e.keys()).sort((s,r)=>t(e[s],e[r]));return new Z_(n)}apply(e){return e.map((t,n)=>e[this._indexMap[n]])}inverse(){const e=this._indexMap.slice();for(let t=0;t<this._indexMap.length;t++)e[this._indexMap[t]]=t;return new Z_(e)}}function WR(i,e){return i.reduce((t,n)=>t+e(n),0)}class Fi{constructor(e){this.executor=e,this._didRun=!1}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}var nC;function UR(i,e){const t=Object.create(null);for(const n of i){const s=e(n);let r=t[s];r||(r=t[s]=[]),r.push(n)}return t}function HR(i,e){const t=[],n=[];for(const s of i)e.has(s)||t.push(s);for(const s of e)i.has(s)||n.push(s);return{removed:t,added:n}}function lX(i,e){const t=[],n=[];for(const[s,r]of i)e.has(s)||t.push(r);for(const[s,r]of e)i.has(s)||n.push(r);return{removed:t,added:n}}function cX(i,e){const t=new Set;for(const n of e)i.has(n)&&t.add(n);return t}class mI{static{nC=Symbol.toStringTag}constructor(e,t){this.toKey=t,this._map=new Map,this[nC]="SetWithKey";for(const n of e)this.add(n)}get size(){return this._map.size}add(e){const t=this.toKey(e);return this._map.set(t,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(const e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(const e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,t){this._map.forEach(n=>e.call(t,n,n,this))}[Symbol.iterator](){return this.values()}}var sC,rC,oC;function J_(i,e,t){let n=i.get(e);return n===void 0&&(n=t,i.set(e,n)),n}class VR{constructor(e,t){this.uri=e,this.value=t}}function zR(i){return Array.isArray(i)}class oi{static{this.defaultToKey=e=>e.toString()}constructor(e,t){if(this[sC]="ResourceMap",e instanceof oi)this.map=new Map(e.map),this.toKey=t??oi.defaultToKey;else if(zR(e)){this.map=new Map,this.toKey=t??oi.defaultToKey;for(const[n,s]of e)this.set(n,s)}else this.map=new Map,this.toKey=e??oi.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new VR(e,t)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[n,s]of this.map)e(s.value,s.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(sC=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}}class $R{constructor(e,t){this[rC]="ResourceSet",!e||typeof e=="function"?this._map=new oi(e):(this._map=new oi(t),e.forEach(this.add,this))}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,t){this._map.forEach((n,s)=>e.call(t,s,s,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(rC=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}var dn;(function(i){i[i.None=0]="None",i[i.AsOld=1]="AsOld",i[i.AsNew=2]="AsNew"})(dn||(dn={}));class qR{constructor(){this[oC]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=dn.None){const n=this._map.get(e);if(n)return t!==dn.None&&this.touch(n,t),n.value}set(e,t,n=dn.None){let s=this._map.get(e);if(s)s.value=t,n!==dn.None&&this.touch(s,n);else{switch(s={key:e,value:t,next:void 0,previous:void 0},n){case dn.None:this.addItemLast(s);break;case dn.AsOld:this.addItemFirst(s);break;case dn.AsNew:this.addItemLast(s);break;default:this.addItemLast(s);break}this._map.set(e,s),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const n=this._state;let s=this._head;for(;s;){if(t?e.bind(t)(s.value,s.key,this):e(s.value,s.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");s=s.next}}keys(){const e=this,t=this._state;let n=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:n.key,done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return s}values(){const e=this,t=this._state;let n=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:n.value,done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return s}entries(){const e=this,t=this._state;let n=this._head;const s={[Symbol.iterator](){return s},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){const r={value:[n.key,n.value],done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return s}[(oC=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._tail,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.previous,n--;this._tail=t,this._size=n,t&&(t.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==dn.AsOld&&t!==dn.AsNew)){if(t===dn.AsOld){if(e===this._head)return;const n=e.next,s=e.previous;e===this._tail?(s.next=void 0,this._tail=s):(n.previous=s,s.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===dn.AsNew){if(e===this._tail)return;const n=e.next,s=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=s,s.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(const[t,n]of e)this.set(t,n)}}class bI extends qR{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=dn.AsNew){return super.get(e,t)}peek(e){return super.get(e,dn.None)}set(e,t){return super.set(e,t,dn.AsNew),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}}class v1 extends bI{constructor(e,t=1){super(e,t)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}}class hX extends bI{constructor(e,t=1){super(e,t)}trim(e){this.trimNew(e)}set(e,t){return this._limit<=this.size&&!this.has(e)&&this.trim(Math.round(this._limit*this._ratio)-1),super.set(e,t),this}}class uX{constructor(){this.map=new Map}add(e){return this.map.set(e,(this.map.get(e)||0)+1),this}delete(e){let t=this.map.get(e)||0;return t===0?!1:(t--,t===0?this.map.delete(e):this.map.set(e,t),!0)}has(e){return this.map.has(e)}}class KR{constructor(e){if(this._m1=new Map,this._m2=new Map,e)for(const[t,n]of e)this.set(t,n)}clear(){this._m1.clear(),this._m2.clear()}set(e,t){this._m1.set(e,t),this._m2.set(t,e)}get(e){return this._m1.get(e)}getKey(e){return this._m2.get(e)}delete(e){const t=this._m1.get(e);return t===void 0?!1:(this._m1.delete(e),this._m2.delete(t),!0)}forEach(e,t){this._m1.forEach((n,s)=>{e.call(t,n,s,this)})}keys(){return this._m1.keys()}values(){return this._m1.values()}}class hy{constructor(){this.map=new Map}add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){const n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){const n=this.map.get(e);n&&n.forEach(t)}get(e){const t=this.map.get(e);return t||new Set}}function dX(i,e){if(i===e)return!0;if(i.size!==e.size)return!1;for(const[t,n]of i)if(!e.has(t)||e.get(t)!==n)return!1;for(const[t]of e)if(!i.has(t))return!1;return!0}class fX{constructor(){this._data=new Map}set(e,...t){let n=this._data;for(let s=0;s<t.length-1;s++)n.has(t[s])||n.set(t[s],new Map),n=n.get(t[s]);n.set(t[t.length-1],e)}get(...e){let t=this._data;for(let n=0;n<e.length-1;n++){if(!t.has(e[n]))return;t=t.get(e[n])}return t.get(e[e.length-1])}clear(){this._data.clear()}*values(){function*e(t){for(const n of t.values())n instanceof Map?yield*e(n):yield n}yield*e(this._data)}toString(){const e=(t,n)=>{let s="";for(const[r,o]of t)s+=`${"  ".repeat(n)}${r}: `,o instanceof Map?s+=`
`+e(o,n+1):s+=`${o}
`;return s};return e(this._data,0)}}function y1(i,e){const t=this;let n=!1,s;return function(){if(n)return s;if(n=!0,e)try{s=i.apply(t,arguments)}finally{e()}else s=i.apply(t,arguments);return s}}function Ib(i,e){if(!i)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function _I(i,e="Unreachable"){throw new Error(e)}function Bp(i,e="unexpected state"){if(!i)throw typeof e=="string"?new De(`Assertion Failed: ${e}`):e}function gX(i,e="Soft Assertion Failed"){i||pt(new De(e))}function tc(i){if(!i()){debugger;i(),pt(new De("Assertion Failed"))}}function uy(i,e){let t=0;for(;t<i.length-1;){const n=i[t],s=i[t+1];if(!e(n,s))return!1;t++}return!0}function Bi(i){return typeof i=="string"}function pX(i){return Array.isArray(i)&&i.every(e=>Bi(e))}function xi(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)&&!(i instanceof RegExp)&&!(i instanceof Date)}function GR(i){const e=Object.getPrototypeOf(Uint8Array);return typeof i=="object"&&i instanceof e}function el(i){return typeof i=="number"&&!isNaN(i)}function e0(i){return!!i&&typeof i[Symbol.iterator]=="function"}function mX(i){return i===!0||i===!1}function ih(i){return typeof i>"u"}function _l(i){return!wn(i)}function wn(i){return ih(i)||i===null}function Wp(i,e){if(!i)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function bX(i){return Bp(i!=null,"Argument is `undefined` or `null`."),i}function _X(i,e){if(i==null)throw typeof e=="string"?new Error(e):e}function wX(...i){const e=[];for(let t=0;t<i.length;t++){const n=i[t];if(wn(n))throw new Error(`Assertion Failed: argument at index ${t} is undefined or null`);e.push(n)}return e}const vX=(i,e)=>e.includes(i),jR=Object.prototype.hasOwnProperty;function dy(i){if(!xi(i))return!1;for(const e in i)if(jR.call(i,e))return!1;return!0}function Wh(i){return typeof i=="function"}function yX(...i){return i.length>0&&i.every(Wh)}function YR(i,e){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)XR(i[n],e[n])}function XR(i,e){if(Bi(e)){if(typeof i!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(Wh(e)){try{if(i instanceof e)return}catch{}if(!wn(i)&&i.constructor===e||e.length===1&&e.call(void 0,i)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function SX(i){return i}var Be;(function(i){function e(x){return!!x&&typeof x=="object"&&typeof x[Symbol.iterator]=="function"}i.is=e;const t=Object.freeze([]);function n(){return t}i.empty=n;function*s(x){yield x}i.single=s;function r(x){return e(x)?x:s(x)}i.wrap=r;function o(x){return x||t}i.from=o;function*a(x){for(let D=x.length-1;D>=0;D--)yield x[D]}i.reverse=a;function l(x){return!x||x[Symbol.iterator]().next().done===!0}i.isEmpty=l;function c(x){return x[Symbol.iterator]().next().value}i.first=c;function h(x,D){let F=0;for(const te of x)if(D(te,F++))return!0;return!1}i.some=h;function u(x,D){let F=0;for(const te of x)if(!D(te,F++))return!1;return!0}i.every=u;function f(x,D){for(const F of x)if(D(F))return F}i.find=f;function*g(x,D){for(const F of x)D(F)&&(yield F)}i.filter=g;function*p(x,D){let F=0;for(const te of x)yield D(te,F++)}i.map=p;function*m(x,D){let F=0;for(const te of x)yield*D(te,F++)}i.flatMap=m;function*_(...x){for(const D of x)e0(D)?yield*D:yield D}i.concat=_;function v(x,D,F){let te=F;for(const J of x)te=D(te,J);return te}i.reduce=v;function y(x){let D=0;for(const F of x)D++;return D}i.length=y;function*E(x,D,F=x.length){for(D<-x.length&&(D=0),D<0&&(D+=x.length),F<0?F+=x.length:F>x.length&&(F=x.length);D<F;D++)yield x[D]}i.slice=E;function N(x,D=Number.POSITIVE_INFINITY){const F=[];if(D===0)return[F,x];const te=x[Symbol.iterator]();for(let J=0;J<D;J++){const le=te.next();if(le.done)return[F,i.empty()];F.push(le.value)}return[F,{[Symbol.iterator](){return te}}]}i.consume=N;async function I(x){const D=[];for await(const F of x)D.push(F);return D}i.asyncToArray=I;async function B(x){let D=[];for await(const F of x)D=D.concat(F);return D}i.asyncToArrayFlat=B})(Be||(Be={}));let ic=null;class wI{constructor(){this.livingDisposables=new Map}static{this.idx=0}getDisposableData(e){let t=this.livingDisposables.get(e);return t||(t={parent:null,source:null,isSingleton:!1,value:e,idx:wI.idx++},this.livingDisposables.set(e,t)),t}trackDisposable(e){const t=this.getDisposableData(e);t.source||(t.source=new Error().stack)}setParent(e,t){const n=this.getDisposableData(e);n.parent=t}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,t){const n=t.get(e);if(n)return n;const s=e.parent?this.getRootParent(this.getDisposableData(e.parent),t):e;return t.set(e,s),s}getTrackedDisposables(){const e=new Map;return[...this.livingDisposables.entries()].filter(([,n])=>n.source!==null&&!this.getRootParent(n,e).isSingleton).flatMap(([n])=>n)}computeLeakingDisposables(e=10,t){let n;if(t)n=t;else{const l=new Map,c=[...this.livingDisposables.values()].filter(u=>u.source!==null&&!this.getRootParent(u,l).isSingleton);if(c.length===0)return;const h=new Set(c.map(u=>u.value));if(n=c.filter(u=>!(u.parent&&h.has(u.parent))),n.length===0)throw new Error("There are cyclic diposable chains!")}if(!n)return;function s(l){function c(u,f){for(;u.length>0&&f.some(g=>typeof g=="string"?g===u[0]:u[0].match(g));)u.shift()}const h=l.source.split(`
`).map(u=>u.trim().replace("at ","")).filter(u=>u!=="");return c(h,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),h.reverse()}const r=new hy;for(const l of n){const c=s(l);for(let h=0;h<=c.length;h++)r.add(c.slice(0,h).join(`
`),l)}n.sort(zl(l=>l.idx,$l));let o="",a=0;for(const l of n.slice(0,e)){a++;const c=s(l),h=[];for(let u=0;u<c.length;u++){let f=c[u];f=`(shared with ${r.get(c.slice(0,u+1).join(`
`)).size}/${n.length} leaks) at ${f}`;const p=r.get(c.slice(0,u).join(`
`)),m=UR([...p].map(_=>s(_)[u]),_=>_);delete m[c[u]];for(const[_,v]of Object.entries(m))h.unshift(`    - stacktraces of ${v.length} other leaks continue with ${_}`);h.unshift(f)}o+=`


==================== Leaking disposable ${a}/${n.length}: ${l.value.constructor.name} ====================
${h.join(`
`)}
============================================================

`}return n.length>e&&(o+=`


... and ${n.length-e} more leaking disposables

`),{leaks:n,details:o}}}function kX(i){ic=i}function ou(i){return ic?.trackDisposable(i),i}function au(i){ic?.markAsDisposed(i)}function Od(i,e){ic?.setParent(i,e)}function QR(i,e){if(ic)for(const t of i)ic.setParent(t,e)}function Fd(i){return ic?.markAsSingleton(i),i}function lu(i){return typeof i=="object"&&i!==null&&typeof i.dispose=="function"&&i.dispose.length===0}function ai(i){if(Be.is(i)){const e=[];for(const t of i)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(i)?[]:i}else if(i)return i.dispose(),i}function CX(i){for(const e of i)lu(e)&&e.dispose();return[]}function Kr(...i){const e=fe(()=>ai(i));return QR(i,e),e}function fe(i){const e=ou({dispose:y1(()=>{au(e),i()})});return e}class X{static{this.DISABLE_DISPOSED_WARNING=!1}constructor(){this._toDispose=new Set,this._isDisposed=!1,ou(this)}dispose(){this._isDisposed||(au(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{ai(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return Od(e,this),this._isDisposed?X.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),Od(e,null))}}class ${static{this.None=Object.freeze({dispose(){}})}constructor(){this._store=new X,ou(this),Od(this._store,this)}dispose(){au(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}}class vs{constructor(){this._isDisposed=!1,ou(this)}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value?.dispose(),e&&Od(e,this),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,au(this),this._value?.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e&&Od(e,null),e}}class EX{constructor(e){this._disposable=e,this._counter=1}acquire(){return this._counter++,this}release(){return--this._counter===0&&this._disposable.dispose(),this}}class xX{constructor(){this.references=new Map}acquire(e,...t){let n=this.references.get(e);n||(n={counter:0,object:this.createReferencedObject(e,...t)},this.references.set(e,n));const{object:s}=n,r=y1(()=>{--n.counter===0&&(this.destroyReferencedObject(e,n.object),this.references.delete(e))});return n.counter++,{object:s,dispose:r}}}class LX{constructor(e){this.referenceCollection=e}async acquire(e,...t){const n=this.referenceCollection.acquire(e,...t);try{return{object:await n.object,dispose:()=>n.dispose()}}catch(s){throw n.dispose(),s}}}class ZR{constructor(e){this.object=e}dispose(){}}class Cf{constructor(){this._store=new Map,this._isDisposed=!1,ou(this)}dispose(){au(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{ai(this._store.values())}finally{this._store.clear()}}has(e){return this._store.has(e)}get size(){return this._store.size}get(e){return this._store.get(e)}set(e,t,n=!1){this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),n||this._store.get(e)?.dispose(),this._store.set(e,t)}deleteAndDispose(e){this._store.get(e)?.dispose(),this._store.delete(e)}deleteAndLeak(e){const t=this._store.get(e);return this._store.delete(e),t}keys(){return this._store.keys()}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}}function DX(i,e){let t=!1;return i.then(n=>{t||e(n)}),fe(()=>{t=!0})}function JR(i){const e=i;return e?[e.on,e.pause,e.resume,e.destroy].every(t=>typeof t=="function"):!1}function IX(i){const e=i;return e?JR(e.stream)&&Array.isArray(e.buffer)&&typeof e.ended=="boolean":!1}function fy(i,e){return new e7(i,e)}class e7{constructor(e,t){this.reducer=e,this.options=t,this.state={flowing:!1,ended:!1,destroyed:!1},this.buffer={data:[],error:[]},this.listeners={data:[],error:[],end:[]},this.pendingWritePromises=[]}pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(e){if(!this.state.destroyed){if(this.state.flowing)this.emitData(e);else if(this.buffer.data.push(e),typeof this.options?.highWaterMark=="number"&&this.buffer.data.length>this.options.highWaterMark)return new Promise(t=>this.pendingWritePromises.push(t))}}error(e){this.state.destroyed||(this.state.flowing?this.emitError(e):this.buffer.error.push(e))}end(e){this.state.destroyed||(typeof e<"u"&&this.write(e),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(e){this.listeners.data.slice(0).forEach(t=>t(e))}emitError(e){this.listeners.error.length===0?pt(e):this.listeners.error.slice(0).forEach(t=>t(e))}emitEnd(){this.listeners.end.slice(0).forEach(e=>e())}on(e,t){if(!this.state.destroyed)switch(e){case"data":this.listeners.data.push(t),this.resume();break;case"end":this.listeners.end.push(t),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(t),this.state.flowing&&this.flowErrors();break}}removeListener(e,t){if(this.state.destroyed)return;let n;switch(e){case"data":n=this.listeners.data;break;case"end":n=this.listeners.end;break;case"error":n=this.listeners.error;break}if(n){const s=n.indexOf(t);s>=0&&n.splice(s,1)}}flowData(){if(this.buffer.data.length===0)return;if(typeof this.reducer=="function"){const t=this.reducer(this.buffer.data);this.emitData(t)}else for(const t of this.buffer.data)this.emitData(t);this.buffer.data.length=0;const e=[...this.pendingWritePromises];this.pendingWritePromises.length=0,e.forEach(t=>t())}flowErrors(){if(this.listeners.error.length>0){for(const e of this.buffer.error)this.emitError(e);this.buffer.error.length=0}}flowEnd(){return this.state.ended?(this.emitEnd(),this.listeners.end.length>0):!1}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}}function t7(i,e){const t=[];let n;for(;(n=i.read())!==null;)t.push(n);return e(t)}function TX(i,e,t){const n=[];let s;for(;(s=i.read())!==null&&n.length<t;)n.push(s);return s===null&&n.length>0?e(n):{read:()=>{if(n.length>0)return n.shift();if(typeof s<"u"){const r=s;return s=void 0,r}return i.read()}}}function i7(i,e){return new Promise((t,n)=>{const s=[];gy(i,{onData:r=>{e&&s.push(r)},onError:r=>{e?n(r):t(void 0)},onEnd:()=>{t(e?e(s):void 0)}})})}function gy(i,e,t){i.on("error",n=>{t?.isCancellationRequested||e.onError(n)}),i.on("end",()=>{t?.isCancellationRequested||e.onEnd()}),i.on("data",n=>{t?.isCancellationRequested||e.onData(n)})}function AX(i,e){return new Promise((t,n)=>{const s=new X,r=[],o=c=>{if(r.push(c),r.length>e)return s.dispose(),i.pause(),t({stream:i,buffer:r,ended:!1})},a=c=>(s.dispose(),n(c)),l=()=>(s.dispose(),t({stream:i,buffer:r,ended:!0}));s.add(fe(()=>i.removeListener("error",a))),i.on("error",a),s.add(fe(()=>i.removeListener("end",l))),i.on("end",l),s.add(fe(()=>i.removeListener("data",o))),i.on("data",o)})}function n7(i,e){const t=fy(e);return t.end(i),t}function s7(i){let e=!1;return{read:()=>e?null:(e=!0,i)}}function NX(i,e,t){const n=fy(t);return gy(i,{onData:s=>n.write(e.data(s)),onError:s=>n.error(e.error?e.error(s):s),onEnd:()=>n.end()}),n}const ug=typeof Buffer<"u",r7=new Fi(()=>new Uint8Array(256));let Tb,Ab;class ii{static alloc(e){return ug?new ii(Buffer.allocUnsafe(e)):new ii(new Uint8Array(e))}static wrap(e){return ug&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new ii(e)}static fromString(e,t){return!(t?.dontUseNodeBuffer||!1)&&ug?new ii(Buffer.from(e)):(Tb||(Tb=new TextEncoder),new ii(Tb.encode(e)))}static fromByteArray(e){const t=ii.alloc(e.length);for(let n=0,s=e.length;n<s;n++)t.buffer[n]=e[n];return t}static concat(e,t){if(typeof t>"u"){t=0;for(let r=0,o=e.length;r<o;r++)t+=e[r].byteLength}const n=ii.alloc(t);let s=0;for(let r=0,o=e.length;r<o;r++){const a=e[r];n.set(a,s),s+=a.byteLength}return n}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}clone(){const e=ii.alloc(this.byteLength);return e.set(this),e}toString(){return ug?this.buffer.toString():(Ab||(Ab=new TextDecoder),Ab.decode(this.buffer))}slice(e,t){return new ii(this.buffer.subarray(e,t))}set(e,t){if(e instanceof ii)this.buffer.set(e.buffer,t);else if(e instanceof Uint8Array)this.buffer.set(e,t);else if(e instanceof ArrayBuffer)this.buffer.set(new Uint8Array(e),t);else if(ArrayBuffer.isView(e))this.buffer.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t);else throw new Error("Unknown argument 'array'")}readUInt32BE(e){return fn(this.buffer,e)}writeUInt32BE(e,t){gn(this.buffer,e,t)}readUInt32LE(e){return c7(this.buffer,e)}writeUInt32LE(e,t){h7(this.buffer,e,t)}readUInt8(e){return t0(this.buffer,e)}writeUInt8(e,t){i0(this.buffer,e,t)}indexOf(e,t=0){return o7(this.buffer,e instanceof ii?e.buffer:e,t)}equals(e){return this===e?!0:this.byteLength!==e.byteLength?!1:this.buffer.every((t,n)=>t===e.buffer[n])}}function o7(i,e,t=0){const n=e.byteLength,s=i.byteLength;if(n===0)return 0;if(n===1)return i.indexOf(e[0]);if(n>s-t)return-1;const r=r7.value;r.fill(e.length);for(let c=0;c<e.length;c++)r[e[c]]=e.length-c-1;let o=t+e.length-1,a=o,l=-1;for(;o<s;)if(i[o]===e[a]){if(a===0){l=o;break}o--,a--}else o+=Math.max(e.length-a,r[i[o]]),a=e.length-1;return l}function a7(i,e){return i[e+0]<<0>>>0|i[e+1]<<8>>>0}function l7(i,e,t){i[t+0]=e&255,e=e>>>8,i[t+1]=e&255}function fn(i,e){return i[e]*2**24+i[e+1]*2**16+i[e+2]*2**8+i[e+3]}function gn(i,e,t){i[t+3]=e,e=e>>>8,i[t+2]=e,e=e>>>8,i[t+1]=e,e=e>>>8,i[t]=e}function c7(i,e){return i[e+0]<<0>>>0|i[e+1]<<8>>>0|i[e+2]<<16>>>0|i[e+3]<<24>>>0}function h7(i,e,t){i[t+0]=e&255,e=e>>>8,i[t+1]=e&255,e=e>>>8,i[t+2]=e&255,e=e>>>8,i[t+3]=e&255}function t0(i,e){return i[e]}function i0(i,e,t){i[t]=e}function RX(i){return t7(i,e=>ii.concat(e))}function MX(i){return s7(i)}function py(i){return i7(i,e=>ii.concat(e))}async function OX(i){return i.ended?ii.concat(i.buffer):ii.concat([...i.buffer,await py(i.stream)])}function vI(i){return n7(i,e=>ii.concat(e))}function FX(i){return fy(e=>ii.concat(e),i)}function PX(i){let e=0,t=0,n=0;const s=new Uint8Array(Math.floor(i.length/4*3)),r=a=>{switch(t){case 3:s[n++]=e|a,t=0;break;case 2:s[n++]=e|a>>>2,e=a<<6,t=3;break;case 1:s[n++]=e|a>>>4,e=a<<4,t=2;break;default:e=a<<2,t=1}};for(let a=0;a<i.length;a++){const l=i.charCodeAt(a);if(l>=65&&l<=90)r(l-65);else if(l>=97&&l<=122)r(l-97+26);else if(l>=48&&l<=57)r(l-48+52);else if(l===43||l===45)r(62);else if(l===47||l===95)r(63);else{if(l===61)break;throw new SyntaxError(`Unexpected base64 character ${i[a]}`)}}const o=n;for(;t>0;)r(0);return ii.wrap(s).slice(0,o)}const u7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d7="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function BX({buffer:i},e=!0,t=!1){const n=t?d7:u7;let s="";const r=i.byteLength%3;let o=0;for(;o<i.byteLength-r;o+=3){const a=i[o+0],l=i[o+1],c=i[o+2];s+=n[a>>>2],s+=n[(a<<4|l>>>4)&63],s+=n[(l<<2|c>>>6)&63],s+=n[c&63]}if(r===1){const a=i[o+0];s+=n[a>>>2],s+=n[a<<4&63],e&&(s+="==")}else if(r===2){const a=i[o+0],l=i[o+1];s+=n[a>>>2],s+=n[(a<<4|l>>>4)&63],s+=n[l<<2&63],e&&(s+="=")}return s}const aC="0123456789abcdef";function f7({buffer:i}){let e="";for(let t=0;t<i.length;t++){const n=i[t];e+=aC[n>>>4],e+=aC[n&15]}return e}function WX(i){if(i.length%2!==0)throw new SyntaxError("Hex string must have an even length");const e=new Uint8Array(i.length>>1);for(let t=0;t<i.length;)e[t>>1]=lC(i,t++)<<4|lC(i,t++);return ii.wrap(e)}function lC(i,e){const t=i.charCodeAt(e);if(t>=48&&t<=57)return t-48;if(t>=97&&t<=102)return t-87;if(t>=65&&t<=70)return t-55;throw new SyntaxError(`Invalid hex character at position ${e}`)}var k;(function(i){i[i.Null=0]="Null",i[i.Backspace=8]="Backspace",i[i.Tab=9]="Tab",i[i.LineFeed=10]="LineFeed",i[i.CarriageReturn=13]="CarriageReturn",i[i.Space=32]="Space",i[i.ExclamationMark=33]="ExclamationMark",i[i.DoubleQuote=34]="DoubleQuote",i[i.Hash=35]="Hash",i[i.DollarSign=36]="DollarSign",i[i.PercentSign=37]="PercentSign",i[i.Ampersand=38]="Ampersand",i[i.SingleQuote=39]="SingleQuote",i[i.OpenParen=40]="OpenParen",i[i.CloseParen=41]="CloseParen",i[i.Asterisk=42]="Asterisk",i[i.Plus=43]="Plus",i[i.Comma=44]="Comma",i[i.Dash=45]="Dash",i[i.Period=46]="Period",i[i.Slash=47]="Slash",i[i.Digit0=48]="Digit0",i[i.Digit1=49]="Digit1",i[i.Digit2=50]="Digit2",i[i.Digit3=51]="Digit3",i[i.Digit4=52]="Digit4",i[i.Digit5=53]="Digit5",i[i.Digit6=54]="Digit6",i[i.Digit7=55]="Digit7",i[i.Digit8=56]="Digit8",i[i.Digit9=57]="Digit9",i[i.Colon=58]="Colon",i[i.Semicolon=59]="Semicolon",i[i.LessThan=60]="LessThan",i[i.Equals=61]="Equals",i[i.GreaterThan=62]="GreaterThan",i[i.QuestionMark=63]="QuestionMark",i[i.AtSign=64]="AtSign",i[i.A=65]="A",i[i.B=66]="B",i[i.C=67]="C",i[i.D=68]="D",i[i.E=69]="E",i[i.F=70]="F",i[i.G=71]="G",i[i.H=72]="H",i[i.I=73]="I",i[i.J=74]="J",i[i.K=75]="K",i[i.L=76]="L",i[i.M=77]="M",i[i.N=78]="N",i[i.O=79]="O",i[i.P=80]="P",i[i.Q=81]="Q",i[i.R=82]="R",i[i.S=83]="S",i[i.T=84]="T",i[i.U=85]="U",i[i.V=86]="V",i[i.W=87]="W",i[i.X=88]="X",i[i.Y=89]="Y",i[i.Z=90]="Z",i[i.OpenSquareBracket=91]="OpenSquareBracket",i[i.Backslash=92]="Backslash",i[i.CloseSquareBracket=93]="CloseSquareBracket",i[i.Caret=94]="Caret",i[i.Underline=95]="Underline",i[i.BackTick=96]="BackTick",i[i.a=97]="a",i[i.b=98]="b",i[i.c=99]="c",i[i.d=100]="d",i[i.e=101]="e",i[i.f=102]="f",i[i.g=103]="g",i[i.h=104]="h",i[i.i=105]="i",i[i.j=106]="j",i[i.k=107]="k",i[i.l=108]="l",i[i.m=109]="m",i[i.n=110]="n",i[i.o=111]="o",i[i.p=112]="p",i[i.q=113]="q",i[i.r=114]="r",i[i.s=115]="s",i[i.t=116]="t",i[i.u=117]="u",i[i.v=118]="v",i[i.w=119]="w",i[i.x=120]="x",i[i.y=121]="y",i[i.z=122]="z",i[i.OpenCurlyBrace=123]="OpenCurlyBrace",i[i.Pipe=124]="Pipe",i[i.CloseCurlyBrace=125]="CloseCurlyBrace",i[i.Tilde=126]="Tilde",i[i.NoBreakSpace=160]="NoBreakSpace",i[i.U_Combining_Grave_Accent=768]="U_Combining_Grave_Accent",i[i.U_Combining_Acute_Accent=769]="U_Combining_Acute_Accent",i[i.U_Combining_Circumflex_Accent=770]="U_Combining_Circumflex_Accent",i[i.U_Combining_Tilde=771]="U_Combining_Tilde",i[i.U_Combining_Macron=772]="U_Combining_Macron",i[i.U_Combining_Overline=773]="U_Combining_Overline",i[i.U_Combining_Breve=774]="U_Combining_Breve",i[i.U_Combining_Dot_Above=775]="U_Combining_Dot_Above",i[i.U_Combining_Diaeresis=776]="U_Combining_Diaeresis",i[i.U_Combining_Hook_Above=777]="U_Combining_Hook_Above",i[i.U_Combining_Ring_Above=778]="U_Combining_Ring_Above",i[i.U_Combining_Double_Acute_Accent=779]="U_Combining_Double_Acute_Accent",i[i.U_Combining_Caron=780]="U_Combining_Caron",i[i.U_Combining_Vertical_Line_Above=781]="U_Combining_Vertical_Line_Above",i[i.U_Combining_Double_Vertical_Line_Above=782]="U_Combining_Double_Vertical_Line_Above",i[i.U_Combining_Double_Grave_Accent=783]="U_Combining_Double_Grave_Accent",i[i.U_Combining_Candrabindu=784]="U_Combining_Candrabindu",i[i.U_Combining_Inverted_Breve=785]="U_Combining_Inverted_Breve",i[i.U_Combining_Turned_Comma_Above=786]="U_Combining_Turned_Comma_Above",i[i.U_Combining_Comma_Above=787]="U_Combining_Comma_Above",i[i.U_Combining_Reversed_Comma_Above=788]="U_Combining_Reversed_Comma_Above",i[i.U_Combining_Comma_Above_Right=789]="U_Combining_Comma_Above_Right",i[i.U_Combining_Grave_Accent_Below=790]="U_Combining_Grave_Accent_Below",i[i.U_Combining_Acute_Accent_Below=791]="U_Combining_Acute_Accent_Below",i[i.U_Combining_Left_Tack_Below=792]="U_Combining_Left_Tack_Below",i[i.U_Combining_Right_Tack_Below=793]="U_Combining_Right_Tack_Below",i[i.U_Combining_Left_Angle_Above=794]="U_Combining_Left_Angle_Above",i[i.U_Combining_Horn=795]="U_Combining_Horn",i[i.U_Combining_Left_Half_Ring_Below=796]="U_Combining_Left_Half_Ring_Below",i[i.U_Combining_Up_Tack_Below=797]="U_Combining_Up_Tack_Below",i[i.U_Combining_Down_Tack_Below=798]="U_Combining_Down_Tack_Below",i[i.U_Combining_Plus_Sign_Below=799]="U_Combining_Plus_Sign_Below",i[i.U_Combining_Minus_Sign_Below=800]="U_Combining_Minus_Sign_Below",i[i.U_Combining_Palatalized_Hook_Below=801]="U_Combining_Palatalized_Hook_Below",i[i.U_Combining_Retroflex_Hook_Below=802]="U_Combining_Retroflex_Hook_Below",i[i.U_Combining_Dot_Below=803]="U_Combining_Dot_Below",i[i.U_Combining_Diaeresis_Below=804]="U_Combining_Diaeresis_Below",i[i.U_Combining_Ring_Below=805]="U_Combining_Ring_Below",i[i.U_Combining_Comma_Below=806]="U_Combining_Comma_Below",i[i.U_Combining_Cedilla=807]="U_Combining_Cedilla",i[i.U_Combining_Ogonek=808]="U_Combining_Ogonek",i[i.U_Combining_Vertical_Line_Below=809]="U_Combining_Vertical_Line_Below",i[i.U_Combining_Bridge_Below=810]="U_Combining_Bridge_Below",i[i.U_Combining_Inverted_Double_Arch_Below=811]="U_Combining_Inverted_Double_Arch_Below",i[i.U_Combining_Caron_Below=812]="U_Combining_Caron_Below",i[i.U_Combining_Circumflex_Accent_Below=813]="U_Combining_Circumflex_Accent_Below",i[i.U_Combining_Breve_Below=814]="U_Combining_Breve_Below",i[i.U_Combining_Inverted_Breve_Below=815]="U_Combining_Inverted_Breve_Below",i[i.U_Combining_Tilde_Below=816]="U_Combining_Tilde_Below",i[i.U_Combining_Macron_Below=817]="U_Combining_Macron_Below",i[i.U_Combining_Low_Line=818]="U_Combining_Low_Line",i[i.U_Combining_Double_Low_Line=819]="U_Combining_Double_Low_Line",i[i.U_Combining_Tilde_Overlay=820]="U_Combining_Tilde_Overlay",i[i.U_Combining_Short_Stroke_Overlay=821]="U_Combining_Short_Stroke_Overlay",i[i.U_Combining_Long_Stroke_Overlay=822]="U_Combining_Long_Stroke_Overlay",i[i.U_Combining_Short_Solidus_Overlay=823]="U_Combining_Short_Solidus_Overlay",i[i.U_Combining_Long_Solidus_Overlay=824]="U_Combining_Long_Solidus_Overlay",i[i.U_Combining_Right_Half_Ring_Below=825]="U_Combining_Right_Half_Ring_Below",i[i.U_Combining_Inverted_Bridge_Below=826]="U_Combining_Inverted_Bridge_Below",i[i.U_Combining_Square_Below=827]="U_Combining_Square_Below",i[i.U_Combining_Seagull_Below=828]="U_Combining_Seagull_Below",i[i.U_Combining_X_Above=829]="U_Combining_X_Above",i[i.U_Combining_Vertical_Tilde=830]="U_Combining_Vertical_Tilde",i[i.U_Combining_Double_Overline=831]="U_Combining_Double_Overline",i[i.U_Combining_Grave_Tone_Mark=832]="U_Combining_Grave_Tone_Mark",i[i.U_Combining_Acute_Tone_Mark=833]="U_Combining_Acute_Tone_Mark",i[i.U_Combining_Greek_Perispomeni=834]="U_Combining_Greek_Perispomeni",i[i.U_Combining_Greek_Koronis=835]="U_Combining_Greek_Koronis",i[i.U_Combining_Greek_Dialytika_Tonos=836]="U_Combining_Greek_Dialytika_Tonos",i[i.U_Combining_Greek_Ypogegrammeni=837]="U_Combining_Greek_Ypogegrammeni",i[i.U_Combining_Bridge_Above=838]="U_Combining_Bridge_Above",i[i.U_Combining_Equals_Sign_Below=839]="U_Combining_Equals_Sign_Below",i[i.U_Combining_Double_Vertical_Line_Below=840]="U_Combining_Double_Vertical_Line_Below",i[i.U_Combining_Left_Angle_Below=841]="U_Combining_Left_Angle_Below",i[i.U_Combining_Not_Tilde_Above=842]="U_Combining_Not_Tilde_Above",i[i.U_Combining_Homothetic_Above=843]="U_Combining_Homothetic_Above",i[i.U_Combining_Almost_Equal_To_Above=844]="U_Combining_Almost_Equal_To_Above",i[i.U_Combining_Left_Right_Arrow_Below=845]="U_Combining_Left_Right_Arrow_Below",i[i.U_Combining_Upwards_Arrow_Below=846]="U_Combining_Upwards_Arrow_Below",i[i.U_Combining_Grapheme_Joiner=847]="U_Combining_Grapheme_Joiner",i[i.U_Combining_Right_Arrowhead_Above=848]="U_Combining_Right_Arrowhead_Above",i[i.U_Combining_Left_Half_Ring_Above=849]="U_Combining_Left_Half_Ring_Above",i[i.U_Combining_Fermata=850]="U_Combining_Fermata",i[i.U_Combining_X_Below=851]="U_Combining_X_Below",i[i.U_Combining_Left_Arrowhead_Below=852]="U_Combining_Left_Arrowhead_Below",i[i.U_Combining_Right_Arrowhead_Below=853]="U_Combining_Right_Arrowhead_Below",i[i.U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below=854]="U_Combining_Right_Arrowhead_And_Up_Arrowhead_Below",i[i.U_Combining_Right_Half_Ring_Above=855]="U_Combining_Right_Half_Ring_Above",i[i.U_Combining_Dot_Above_Right=856]="U_Combining_Dot_Above_Right",i[i.U_Combining_Asterisk_Below=857]="U_Combining_Asterisk_Below",i[i.U_Combining_Double_Ring_Below=858]="U_Combining_Double_Ring_Below",i[i.U_Combining_Zigzag_Above=859]="U_Combining_Zigzag_Above",i[i.U_Combining_Double_Breve_Below=860]="U_Combining_Double_Breve_Below",i[i.U_Combining_Double_Breve=861]="U_Combining_Double_Breve",i[i.U_Combining_Double_Macron=862]="U_Combining_Double_Macron",i[i.U_Combining_Double_Macron_Below=863]="U_Combining_Double_Macron_Below",i[i.U_Combining_Double_Tilde=864]="U_Combining_Double_Tilde",i[i.U_Combining_Double_Inverted_Breve=865]="U_Combining_Double_Inverted_Breve",i[i.U_Combining_Double_Rightwards_Arrow_Below=866]="U_Combining_Double_Rightwards_Arrow_Below",i[i.U_Combining_Latin_Small_Letter_A=867]="U_Combining_Latin_Small_Letter_A",i[i.U_Combining_Latin_Small_Letter_E=868]="U_Combining_Latin_Small_Letter_E",i[i.U_Combining_Latin_Small_Letter_I=869]="U_Combining_Latin_Small_Letter_I",i[i.U_Combining_Latin_Small_Letter_O=870]="U_Combining_Latin_Small_Letter_O",i[i.U_Combining_Latin_Small_Letter_U=871]="U_Combining_Latin_Small_Letter_U",i[i.U_Combining_Latin_Small_Letter_C=872]="U_Combining_Latin_Small_Letter_C",i[i.U_Combining_Latin_Small_Letter_D=873]="U_Combining_Latin_Small_Letter_D",i[i.U_Combining_Latin_Small_Letter_H=874]="U_Combining_Latin_Small_Letter_H",i[i.U_Combining_Latin_Small_Letter_M=875]="U_Combining_Latin_Small_Letter_M",i[i.U_Combining_Latin_Small_Letter_R=876]="U_Combining_Latin_Small_Letter_R",i[i.U_Combining_Latin_Small_Letter_T=877]="U_Combining_Latin_Small_Letter_T",i[i.U_Combining_Latin_Small_Letter_V=878]="U_Combining_Latin_Small_Letter_V",i[i.U_Combining_Latin_Small_Letter_X=879]="U_Combining_Latin_Small_Letter_X",i[i.LINE_SEPARATOR=8232]="LINE_SEPARATOR",i[i.PARAGRAPH_SEPARATOR=8233]="PARAGRAPH_SEPARATOR",i[i.NEXT_LINE=133]="NEXT_LINE",i[i.U_CIRCUMFLEX=94]="U_CIRCUMFLEX",i[i.U_GRAVE_ACCENT=96]="U_GRAVE_ACCENT",i[i.U_DIAERESIS=168]="U_DIAERESIS",i[i.U_MACRON=175]="U_MACRON",i[i.U_ACUTE_ACCENT=180]="U_ACUTE_ACCENT",i[i.U_CEDILLA=184]="U_CEDILLA",i[i.U_MODIFIER_LETTER_LEFT_ARROWHEAD=706]="U_MODIFIER_LETTER_LEFT_ARROWHEAD",i[i.U_MODIFIER_LETTER_RIGHT_ARROWHEAD=707]="U_MODIFIER_LETTER_RIGHT_ARROWHEAD",i[i.U_MODIFIER_LETTER_UP_ARROWHEAD=708]="U_MODIFIER_LETTER_UP_ARROWHEAD",i[i.U_MODIFIER_LETTER_DOWN_ARROWHEAD=709]="U_MODIFIER_LETTER_DOWN_ARROWHEAD",i[i.U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING=722]="U_MODIFIER_LETTER_CENTRED_RIGHT_HALF_RING",i[i.U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING=723]="U_MODIFIER_LETTER_CENTRED_LEFT_HALF_RING",i[i.U_MODIFIER_LETTER_UP_TACK=724]="U_MODIFIER_LETTER_UP_TACK",i[i.U_MODIFIER_LETTER_DOWN_TACK=725]="U_MODIFIER_LETTER_DOWN_TACK",i[i.U_MODIFIER_LETTER_PLUS_SIGN=726]="U_MODIFIER_LETTER_PLUS_SIGN",i[i.U_MODIFIER_LETTER_MINUS_SIGN=727]="U_MODIFIER_LETTER_MINUS_SIGN",i[i.U_BREVE=728]="U_BREVE",i[i.U_DOT_ABOVE=729]="U_DOT_ABOVE",i[i.U_RING_ABOVE=730]="U_RING_ABOVE",i[i.U_OGONEK=731]="U_OGONEK",i[i.U_SMALL_TILDE=732]="U_SMALL_TILDE",i[i.U_DOUBLE_ACUTE_ACCENT=733]="U_DOUBLE_ACUTE_ACCENT",i[i.U_MODIFIER_LETTER_RHOTIC_HOOK=734]="U_MODIFIER_LETTER_RHOTIC_HOOK",i[i.U_MODIFIER_LETTER_CROSS_ACCENT=735]="U_MODIFIER_LETTER_CROSS_ACCENT",i[i.U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR=741]="U_MODIFIER_LETTER_EXTRA_HIGH_TONE_BAR",i[i.U_MODIFIER_LETTER_HIGH_TONE_BAR=742]="U_MODIFIER_LETTER_HIGH_TONE_BAR",i[i.U_MODIFIER_LETTER_MID_TONE_BAR=743]="U_MODIFIER_LETTER_MID_TONE_BAR",i[i.U_MODIFIER_LETTER_LOW_TONE_BAR=744]="U_MODIFIER_LETTER_LOW_TONE_BAR",i[i.U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR=745]="U_MODIFIER_LETTER_EXTRA_LOW_TONE_BAR",i[i.U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK=746]="U_MODIFIER_LETTER_YIN_DEPARTING_TONE_MARK",i[i.U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK=747]="U_MODIFIER_LETTER_YANG_DEPARTING_TONE_MARK",i[i.U_MODIFIER_LETTER_UNASPIRATED=749]="U_MODIFIER_LETTER_UNASPIRATED",i[i.U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD=751]="U_MODIFIER_LETTER_LOW_DOWN_ARROWHEAD",i[i.U_MODIFIER_LETTER_LOW_UP_ARROWHEAD=752]="U_MODIFIER_LETTER_LOW_UP_ARROWHEAD",i[i.U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD=753]="U_MODIFIER_LETTER_LOW_LEFT_ARROWHEAD",i[i.U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD=754]="U_MODIFIER_LETTER_LOW_RIGHT_ARROWHEAD",i[i.U_MODIFIER_LETTER_LOW_RING=755]="U_MODIFIER_LETTER_LOW_RING",i[i.U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT=756]="U_MODIFIER_LETTER_MIDDLE_GRAVE_ACCENT",i[i.U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT=757]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_GRAVE_ACCENT",i[i.U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT=758]="U_MODIFIER_LETTER_MIDDLE_DOUBLE_ACUTE_ACCENT",i[i.U_MODIFIER_LETTER_LOW_TILDE=759]="U_MODIFIER_LETTER_LOW_TILDE",i[i.U_MODIFIER_LETTER_RAISED_COLON=760]="U_MODIFIER_LETTER_RAISED_COLON",i[i.U_MODIFIER_LETTER_BEGIN_HIGH_TONE=761]="U_MODIFIER_LETTER_BEGIN_HIGH_TONE",i[i.U_MODIFIER_LETTER_END_HIGH_TONE=762]="U_MODIFIER_LETTER_END_HIGH_TONE",i[i.U_MODIFIER_LETTER_BEGIN_LOW_TONE=763]="U_MODIFIER_LETTER_BEGIN_LOW_TONE",i[i.U_MODIFIER_LETTER_END_LOW_TONE=764]="U_MODIFIER_LETTER_END_LOW_TONE",i[i.U_MODIFIER_LETTER_SHELF=765]="U_MODIFIER_LETTER_SHELF",i[i.U_MODIFIER_LETTER_OPEN_SHELF=766]="U_MODIFIER_LETTER_OPEN_SHELF",i[i.U_MODIFIER_LETTER_LOW_LEFT_ARROW=767]="U_MODIFIER_LETTER_LOW_LEFT_ARROW",i[i.U_GREEK_LOWER_NUMERAL_SIGN=885]="U_GREEK_LOWER_NUMERAL_SIGN",i[i.U_GREEK_TONOS=900]="U_GREEK_TONOS",i[i.U_GREEK_DIALYTIKA_TONOS=901]="U_GREEK_DIALYTIKA_TONOS",i[i.U_GREEK_KORONIS=8125]="U_GREEK_KORONIS",i[i.U_GREEK_PSILI=8127]="U_GREEK_PSILI",i[i.U_GREEK_PERISPOMENI=8128]="U_GREEK_PERISPOMENI",i[i.U_GREEK_DIALYTIKA_AND_PERISPOMENI=8129]="U_GREEK_DIALYTIKA_AND_PERISPOMENI",i[i.U_GREEK_PSILI_AND_VARIA=8141]="U_GREEK_PSILI_AND_VARIA",i[i.U_GREEK_PSILI_AND_OXIA=8142]="U_GREEK_PSILI_AND_OXIA",i[i.U_GREEK_PSILI_AND_PERISPOMENI=8143]="U_GREEK_PSILI_AND_PERISPOMENI",i[i.U_GREEK_DASIA_AND_VARIA=8157]="U_GREEK_DASIA_AND_VARIA",i[i.U_GREEK_DASIA_AND_OXIA=8158]="U_GREEK_DASIA_AND_OXIA",i[i.U_GREEK_DASIA_AND_PERISPOMENI=8159]="U_GREEK_DASIA_AND_PERISPOMENI",i[i.U_GREEK_DIALYTIKA_AND_VARIA=8173]="U_GREEK_DIALYTIKA_AND_VARIA",i[i.U_GREEK_DIALYTIKA_AND_OXIA=8174]="U_GREEK_DIALYTIKA_AND_OXIA",i[i.U_GREEK_VARIA=8175]="U_GREEK_VARIA",i[i.U_GREEK_OXIA=8189]="U_GREEK_OXIA",i[i.U_GREEK_DASIA=8190]="U_GREEK_DASIA",i[i.U_IDEOGRAPHIC_FULL_STOP=12290]="U_IDEOGRAPHIC_FULL_STOP",i[i.U_LEFT_CORNER_BRACKET=12300]="U_LEFT_CORNER_BRACKET",i[i.U_RIGHT_CORNER_BRACKET=12301]="U_RIGHT_CORNER_BRACKET",i[i.U_LEFT_BLACK_LENTICULAR_BRACKET=12304]="U_LEFT_BLACK_LENTICULAR_BRACKET",i[i.U_RIGHT_BLACK_LENTICULAR_BRACKET=12305]="U_RIGHT_BLACK_LENTICULAR_BRACKET",i[i.U_OVERLINE=8254]="U_OVERLINE",i[i.UTF8_BOM=65279]="UTF8_BOM",i[i.U_FULLWIDTH_SEMICOLON=65307]="U_FULLWIDTH_SEMICOLON",i[i.U_FULLWIDTH_COMMA=65292]="U_FULLWIDTH_COMMA"})(k||(k={}));function g7(i){const e=p7(i);if(e&&e.length>0)return new Uint32Array(e)}let Vn=0;const _a=new Uint32Array(10);function p7(i){if(Vn=0,kr(i,Nb,Si.InitialConsonant),Vn>0||(kr(i,Rb,Si.Vowel),Vn>0)||(kr(i,Mb,Si.FinalConsonant),Vn>0)||(kr(i,al,Si.CompatibilityJamo),Vn))return _a.subarray(0,Vn);if(i>=44032&&i<=55203){const e=i-44032,t=e%588,n=Math.floor(e/588),s=Math.floor(t/28),r=t%28-1;if(n<Nb.length?kr(n,Nb,0):Si.InitialConsonant+n-Si.CompatibilityJamo<al.length&&kr(Si.InitialConsonant+n,al,Si.CompatibilityJamo),s<Rb.length?kr(s,Rb,0):Si.Vowel+s-Si.CompatibilityJamo<al.length&&kr(Si.Vowel+s-Si.CompatibilityJamo,al,Si.CompatibilityJamo),r>=0&&(r<Mb.length?kr(r,Mb,0):Si.FinalConsonant+r-Si.CompatibilityJamo<al.length&&kr(Si.FinalConsonant+r-Si.CompatibilityJamo,al,Si.CompatibilityJamo)),Vn>0)return _a.subarray(0,Vn)}}function kr(i,e,t){i>=t&&i<t+e.length&&m7(e[i-t])}function m7(i){i!==ce.NUL&&(_a[Vn++]=i&255,i>>8&&(_a[Vn++]=i>>8&255),i>>16&&(_a[Vn++]=i>>16&255))}var Si;(function(i){i[i.InitialConsonant=4352]="InitialConsonant",i[i.Vowel=4449]="Vowel",i[i.FinalConsonant=4520]="FinalConsonant",i[i.CompatibilityJamo=12593]="CompatibilityJamo"})(Si||(Si={}));var ce;(function(i){i[i.NUL=0]="NUL",i[i.A=65]="A",i[i.B=66]="B",i[i.C=67]="C",i[i.D=68]="D",i[i.E=69]="E",i[i.F=70]="F",i[i.G=71]="G",i[i.H=72]="H",i[i.I=73]="I",i[i.J=74]="J",i[i.K=75]="K",i[i.L=76]="L",i[i.M=77]="M",i[i.N=78]="N",i[i.O=79]="O",i[i.P=80]="P",i[i.Q=81]="Q",i[i.R=82]="R",i[i.S=83]="S",i[i.T=84]="T",i[i.U=85]="U",i[i.V=86]="V",i[i.W=87]="W",i[i.X=88]="X",i[i.Y=89]="Y",i[i.Z=90]="Z",i[i.a=97]="a",i[i.b=98]="b",i[i.c=99]="c",i[i.d=100]="d",i[i.e=101]="e",i[i.f=102]="f",i[i.g=103]="g",i[i.h=104]="h",i[i.i=105]="i",i[i.j=106]="j",i[i.k=107]="k",i[i.l=108]="l",i[i.m=109]="m",i[i.n=110]="n",i[i.o=111]="o",i[i.p=112]="p",i[i.q=113]="q",i[i.r=114]="r",i[i.s=115]="s",i[i.t=116]="t",i[i.u=117]="u",i[i.v=118]="v",i[i.w=119]="w",i[i.x=120]="x",i[i.y=121]="y",i[i.z=122]="z"})(ce||(ce={}));var Ze;(function(i){i[i.fa=24934]="fa",i[i.fg=26470]="fg",i[i.fq=29030]="fq",i[i.fr=29286]="fr",i[i.ft=29798]="ft",i[i.fv=30310]="fv",i[i.fx=30822]="fx",i[i.hk=27496]="hk",i[i.hl=27752]="hl",i[i.ho=28520]="ho",i[i.ml=27757]="ml",i[i.nj=27246]="nj",i[i.nl=27758]="nl",i[i.np=28782]="np",i[i.qt=29809]="qt",i[i.rt=29810]="rt",i[i.sg=26483]="sg",i[i.sw=30579]="sw"})(Ze||(Ze={}));const Nb=new Uint8Array([ce.r,ce.R,ce.s,ce.e,ce.E,ce.f,ce.a,ce.q,ce.Q,ce.t,ce.T,ce.d,ce.w,ce.W,ce.c,ce.z,ce.x,ce.v,ce.g]),Rb=new Uint16Array([ce.k,ce.o,ce.i,ce.O,ce.j,ce.p,ce.u,ce.P,ce.h,Ze.hk,Ze.ho,Ze.hl,ce.y,ce.n,Ze.nj,Ze.np,Ze.nl,ce.b,ce.m,Ze.ml,ce.l]),Mb=new Uint16Array([ce.r,ce.R,Ze.rt,ce.s,Ze.sw,Ze.sg,ce.e,ce.f,Ze.fr,Ze.fa,Ze.fq,Ze.ft,Ze.fx,Ze.fv,Ze.fg,ce.a,ce.q,Ze.qt,ce.t,ce.T,ce.d,ce.w,ce.c,ce.z,ce.x,ce.v,ce.g]),al=new Uint16Array([ce.r,ce.R,Ze.rt,ce.s,Ze.sw,Ze.sg,ce.e,ce.E,ce.f,Ze.fr,Ze.fa,Ze.fq,Ze.ft,Ze.fx,Ze.fv,Ze.fg,ce.a,ce.q,ce.Q,Ze.qt,ce.t,ce.T,ce.d,ce.w,ce.W,ce.c,ce.z,ce.x,ce.v,ce.g,ce.k,ce.o,ce.i,ce.O,ce.j,ce.p,ce.u,ce.P,ce.h,Ze.hk,Ze.ho,Ze.hl,ce.y,ce.n,Ze.nj,Ze.np,Ze.nl,ce.b,ce.m,Ze.ml,ce.l]);let Jt=class np{static{this.Undefined=new np(void 0)}constructor(e){this.element=e,this.next=np.Undefined,this.prev=np.Undefined}};class sn{constructor(){this._first=Jt.Undefined,this._last=Jt.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===Jt.Undefined}clear(){let e=this._first;for(;e!==Jt.Undefined;){const t=e.next;e.prev=Jt.Undefined,e.next=Jt.Undefined,e=t}this._first=Jt.Undefined,this._last=Jt.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const n=new Jt(e);if(this._first===Jt.Undefined)this._first=n,this._last=n;else if(t){const r=this._last;this._last=n,n.prev=r,r.next=n}else{const r=this._first;this._first=n,n.next=r,r.prev=n}this._size+=1;let s=!1;return()=>{s||(s=!0,this._remove(n))}}shift(){if(this._first!==Jt.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Jt.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Jt.Undefined&&e.next!==Jt.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Jt.Undefined&&e.next===Jt.Undefined?(this._first=Jt.Undefined,this._last=Jt.Undefined):e.next===Jt.Undefined?(this._last=this._last.prev,this._last.next=Jt.Undefined):e.prev===Jt.Undefined&&(this._first=this._first.next,this._first.prev=Jt.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Jt.Undefined;)yield e.element,e=e.next}}const b7=globalThis.performance.now.bind(globalThis.performance);class Yo{static create(e){return new Yo(e)}constructor(e){this._now=e===!1?Date.now:b7,this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}}var W;(function(i){i.None=()=>$.None;function e(ee,z){return f(ee,()=>{},0,void 0,!0,void 0,z)}i.defer=e;function t(ee){return(z,Z=null,ne)=>{let ve=!1,Ae;return Ae=ee(Ge=>{if(!ve)return Ae?Ae.dispose():ve=!0,z.call(Z,Ge)},null,ne),ve&&Ae.dispose(),Ae}}i.once=t;function n(ee,z){return i.once(i.filter(ee,z))}i.onceIf=n;function s(ee,z,Z){return h((ne,ve=null,Ae)=>ee(Ge=>ne.call(ve,z(Ge)),null,Ae),Z)}i.map=s;function r(ee,z,Z){return h((ne,ve=null,Ae)=>ee(Ge=>{z(Ge),ne.call(ve,Ge)},null,Ae),Z)}i.forEach=r;function o(ee,z,Z){return h((ne,ve=null,Ae)=>ee(Ge=>z(Ge)&&ne.call(ve,Ge),null,Ae),Z)}i.filter=o;function a(ee){return ee}i.signal=a;function l(...ee){return(z,Z=null,ne)=>{const ve=Kr(...ee.map(Ae=>Ae(Ge=>z.call(Z,Ge))));return u(ve,ne)}}i.any=l;function c(ee,z,Z,ne){let ve=Z;return s(ee,Ae=>(ve=z(ve,Ae),ve),ne)}i.reduce=c;function h(ee,z){let Z;const ne={onWillAddFirstListener(){Z=ee(ve.fire,ve)},onDidRemoveLastListener(){Z?.dispose()}},ve=new A(ne);return z?.add(ve),ve.event}function u(ee,z){return z instanceof Array?z.push(ee):z&&z.add(ee),ee}function f(ee,z,Z=100,ne=!1,ve=!1,Ae,Ge){let Ot,Ke,Hi,Lt=0,ui;const yt={leakWarningThreshold:Ae,onWillAddFirstListener(){Ot=ee(ta=>{Lt++,Ke=z(Ke,ta),ne&&!Hi&&(Vi.fire(Ke),Ke=void 0),ui=()=>{const Tc=Ke;Ke=void 0,Hi=void 0,(!ne||Lt>1)&&Vi.fire(Tc),Lt=0},typeof Z=="number"?(Hi&&clearTimeout(Hi),Hi=setTimeout(ui,Z)):Hi===void 0&&(Hi=null,queueMicrotask(ui))})},onWillRemoveListener(){ve&&Lt>0&&ui?.()},onDidRemoveLastListener(){ui=void 0,Ot.dispose()}},Vi=new A(yt);return Ge?.add(Vi),Vi.event}i.debounce=f;function g(ee,z=0,Z){return i.debounce(ee,(ne,ve)=>ne?(ne.push(ve),ne):[ve],z,void 0,!0,void 0,Z)}i.accumulate=g;function p(ee,z=(ne,ve)=>ne===ve,Z){let ne=!0,ve;return o(ee,Ae=>{const Ge=ne||!z(Ae,ve);return ne=!1,ve=Ae,Ge},Z)}i.latch=p;function m(ee,z,Z){return[i.filter(ee,z,Z),i.filter(ee,ne=>!z(ne),Z)]}i.split=m;function _(ee,z=!1,Z=[],ne){let ve=Z.slice(),Ae=ee(Ke=>{ve?ve.push(Ke):Ot.fire(Ke)});ne&&ne.add(Ae);const Ge=()=>{ve?.forEach(Ke=>Ot.fire(Ke)),ve=null},Ot=new A({onWillAddFirstListener(){Ae||(Ae=ee(Ke=>Ot.fire(Ke)),ne&&ne.add(Ae))},onDidAddFirstListener(){ve&&(z?setTimeout(Ge):Ge())},onDidRemoveLastListener(){Ae&&Ae.dispose(),Ae=null}});return ne&&ne.add(Ot),Ot.event}i.buffer=_;function v(ee,z){return(ne,ve,Ae)=>{const Ge=z(new E);return ee(function(Ot){const Ke=Ge.evaluate(Ot);Ke!==y&&ne.call(ve,Ke)},void 0,Ae)}}i.chain=v;const y=Symbol("HaltChainable");class E{constructor(){this.steps=[]}map(z){return this.steps.push(z),this}forEach(z){return this.steps.push(Z=>(z(Z),Z)),this}filter(z){return this.steps.push(Z=>z(Z)?Z:y),this}reduce(z,Z){let ne=Z;return this.steps.push(ve=>(ne=z(ne,ve),ne)),this}latch(z=(Z,ne)=>Z===ne){let Z=!0,ne;return this.steps.push(ve=>{const Ae=Z||!z(ve,ne);return Z=!1,ne=ve,Ae?ve:y}),this}evaluate(z){for(const Z of this.steps)if(z=Z(z),z===y)break;return z}}function N(ee,z,Z=ne=>ne){const ne=(...Ot)=>Ge.fire(Z(...Ot)),ve=()=>ee.on(z,ne),Ae=()=>ee.removeListener(z,ne),Ge=new A({onWillAddFirstListener:ve,onDidRemoveLastListener:Ae});return Ge.event}i.fromNodeEventEmitter=N;function I(ee,z,Z=ne=>ne){const ne=(...Ot)=>Ge.fire(Z(...Ot)),ve=()=>ee.addEventListener(z,ne),Ae=()=>ee.removeEventListener(z,ne),Ge=new A({onWillAddFirstListener:ve,onDidRemoveLastListener:Ae});return Ge.event}i.fromDOMEventEmitter=I;function B(ee,z){let Z;const ne=new Promise((ve,Ae)=>{const Ge=t(ee)(ve,null,z);Z=()=>Ge.dispose()});return ne.cancel=Z,ne}i.toPromise=B;function x(ee){const z=new A;return ee.then(Z=>{z.fire(Z)},()=>{z.fire(void 0)}).finally(()=>{z.dispose()}),z.event}i.fromPromise=x;function D(ee,z){return ee(Z=>z.fire(Z))}i.forward=D;function F(ee,z,Z){return z(Z),ee(ne=>z(ne))}i.runAndSubscribe=F;class te{constructor(z,Z){this._observable=z,this._counter=0,this._hasChanged=!1;const ne={onWillAddFirstListener:()=>{z.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{z.removeObserver(this)}};this.emitter=new A(ne),Z&&Z.add(this.emitter)}beginUpdate(z){this._counter++}handlePossibleChange(z){}handleChange(z,Z){this._hasChanged=!0}endUpdate(z){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function J(ee,z){return new te(ee,z).emitter.event}i.fromObservable=J;function le(ee){return(z,Z,ne)=>{let ve=0,Ae=!1;const Ge={beginUpdate(){ve++},endUpdate(){ve--,ve===0&&(ee.reportChanges(),Ae&&(Ae=!1,z.call(Z)))},handlePossibleChange(){},handleChange(){Ae=!0}};ee.addObserver(Ge),ee.reportChanges();const Ot={dispose(){ee.removeObserver(Ge)}};return ne instanceof X?ne.add(Ot):Array.isArray(ne)&&ne.push(Ot),Ot}}i.fromObservableLight=le})(W||(W={}));class Up{static{this.all=new Set}static{this._idPool=0}constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${Up._idPool++}`,Up.all.add(this)}start(e){this._stopWatch=new Yo,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}}let td=-1;function UX(i){const e=td;return td=i,{dispose(){td=e}}}class my{static{this._idPool=1}constructor(e,t,n=(my._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e,this.threshold=t,this.name=n,this._warnCountdown=0}dispose(){this._stacks?.clear()}check(e,t){const n=this.threshold;if(n<=0||t<n)return;this._stacks||(this._stacks=new Map);const s=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,s+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;const[r,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(r);const l=new _7(a,r);this._errorHandler(l)}return()=>{const r=this._stacks.get(e.value)||0;this._stacks.set(e.value,r-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(const[n,s]of this._stacks)(!e||t<s)&&(e=[n,s],t=s);return e}}class by{static create(){const e=new Error;return new by(e.stack??"")}constructor(e){this.value=e}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}class _7 extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}}class w7 extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}}let v7=0;class sp{constructor(e){this.value=e,this.id=v7++}}const y7=2,S7=(i,e)=>{if(i instanceof sp)e(i);else for(let t=0;t<i.length;t++){const n=i[t];n&&e(n)}};class A{constructor(e){this._size=0,this._options=e,this._leakageMon=td>0||this._options?.leakWarningThreshold?new my(e?.onListenerError??pt,this._options?.leakWarningThreshold??td):void 0,this._perfMon=this._options?._profName?new Up(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){this._disposed||(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose())}get event(){return this._event??=(e,t,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){const a=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(a);const l=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],c=new w7(`${a}. HINT: Stack shows most frequent listener (${l[1]}-times)`,l[0]);return(this._options?.onListenerError||pt)(c),$.None}if(this._disposed)return $.None;t&&(e=e.bind(t));const s=new sp(e);let r;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(s.stack=by.create(),r=this._leakageMon.check(s.stack,this._size+1)),this._listeners?this._listeners instanceof sp?(this._deliveryQueue??=new yI,this._listeners=[this._listeners,s]):this._listeners.push(s):(this._options?.onWillAddFirstListener?.(this),this._listeners=s,this._options?.onDidAddFirstListener?.(this)),this._options?.onDidAddListener?.(this),this._size++;const o=fe(()=>{r?.(),this._removeListener(s)});return n instanceof X?n.add(o):Array.isArray(n)&&n.push(o),o},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}const t=this._listeners,n=t.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[n]=void 0;const s=this._deliveryQueue.current===this;if(this._size*y7<=t.length){let r=0;for(let o=0;o<t.length;o++)t[o]?t[r++]=t[o]:s&&r<this._deliveryQueue.end&&(this._deliveryQueue.end--,r<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=r}}_deliver(e,t){if(!e)return;const n=this._options?.onListenerError||pt;if(!n){e.value(t);return}try{e.value(t)}catch(s){n(s)}}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof sp)this._deliver(this._listeners,e);else{const t=this._deliveryQueue;t.enqueue(this,e,this._listeners.length),this._deliverQueue(t)}this._perfMon?.stop()}hasListeners(){return this._size>0}}const HX=()=>new yI;class yI{constructor(){this.i=-1,this.end=0}enqueue(e,t,n){this.i=0,this.end=n,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class Ob extends A{async fireAsync(e,t,n){if(this._listeners)for(this._asyncDeliveryQueue||(this._asyncDeliveryQueue=new sn),S7(this._listeners,s=>this._asyncDeliveryQueue.push([s.value,e]));this._asyncDeliveryQueue.size>0&&!t.isCancellationRequested;){const[s,r]=this._asyncDeliveryQueue.shift(),o=[],a={...r,token:t,waitUntil:l=>{if(Object.isFrozen(o))throw new Error("waitUntil can NOT be called asynchronous");n&&(l=n(l,s)),o.push(l)}};try{s(a)}catch(l){pt(l);continue}await Promise.allSettled(o).then(l=>{for(const c of l)c.status==="rejected"&&pt(c.reason)})}}}class Pd extends A{get isPaused(){return this._isPaused!==0}constructor(e){super(e),this._isPaused=0,this._eventQueue=new sn,this._mergeFn=e?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class _y extends Pd{constructor(e){super(e),this._delay=e.delay??100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}class k7 extends A{constructor(e){super(e),this._queuedEvents=[],this._mergeFn=e?.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}}class C7{constructor(){this.hasListeners=!1,this.events=[],this.emitter=new A({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){const t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),fe(y1(()=>{this.hasListeners&&this.unhook(t);const s=this.events.indexOf(t);this.events.splice(s,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(t=>this.emitter.fire(t))}unhook(e){e.listener?.dispose(),e.listener=null}dispose(){this.emitter.dispose();for(const e of this.events)e.listener?.dispose();this.events=[]}}class VX{constructor(e,t,n,s){this._store=new X;const r=this._store.add(new C7),o=this._store.add(new Cf);function a(l){o.set(l,r.add(s(l)))}for(const l of e)a(l);this._store.add(t(l=>{a(l)})),this._store.add(n(l=>{o.deleteAndDispose(l)})),this.event=r.event}dispose(){this._store.dispose()}}class Ef{constructor(){this.data=[]}wrapEvent(e,t,n){return(s,r,o)=>e(a=>{const l=this.data[this.data.length-1];if(!t){l?l.buffers.push(()=>s.call(r,a)):s.call(r,a);return}const c=l;if(!c){s.call(r,t(n,a));return}c.items??=[],c.items.push(a),c.buffers.length===0&&l.buffers.push(()=>{c.reducedResult??=n?c.items.reduce(t,n):c.items.reduce(t),s.call(r,c.reducedResult)})},void 0,o)}bufferEvents(e){const t={buffers:new Array};this.data.push(t);const n=e();return this.data.pop(),t.buffers.forEach(s=>s()),n}}class vu{constructor(){this.listening=!1,this.inputEvent=W.None,this.inputEventListener=$.None,this.emitter=new A({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}}),this.event=this.emitter.event}set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}}class E7{static const(e){return new x7(e)}constructor(e){this._value=e,this._onDidChange=new A,this.onDidChange=this._onDidChange.event}get value(){return this._value}set value(e){e!==this._value&&(this._value=e,this._onDidChange.fire(void 0))}}class x7{constructor(e){this.value=e,this.onDidChange=W.None}}const SI=Object.freeze(function(i,e){const t=setTimeout(i.bind(e),0);return{dispose(){clearTimeout(t)}}});var mi;(function(i){function e(t){return t===i.None||t===i.Cancelled||t instanceof rp?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}i.isCancellationToken=e,i.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:W.None}),i.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:SI})})(mi||(mi={}));class rp{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?SI:(this._emitter||(this._emitter=new A),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class _r{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new rp),this._token}cancel(){this._token?this._token instanceof rp&&this._token.cancel():this._token=mi.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof rp&&this._token.dispose():this._token=mi.None}}function L7(i){const e=new _r;return i.add({dispose(){e.cancel()}}),e.token}function kI(i){return i}class D7{constructor(e,t){this.lastCache=void 0,this.lastArgKey=void 0,typeof e=="function"?(this._fn=e,this._computeKey=kI):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}}class zX{get cachedValues(){return this._map}constructor(e,t){this._map=new Map,this._map2=new Map,typeof e=="function"?(this._fn=e,this._computeKey=kI):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){const t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);const n=this._fn(e);return this._map.set(e,n),this._map2.set(t,n),n}}var si;(function(i){i[i.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",i[i.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",i[i.MAX_UINT_8=255]="MAX_UINT_8",i[i.MAX_UINT_16=65535]="MAX_UINT_16",i[i.MAX_UINT_32=4294967295]="MAX_UINT_32",i[i.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(si||(si={}));function cC(i){return i<0?0:i>si.MAX_UINT_8?si.MAX_UINT_8:i|0}function Bc(i){return i<0?0:i>si.MAX_UINT_32?si.MAX_UINT_32:i|0}function CI(i){return!i||typeof i!="string"?!0:i.trim().length===0}const I7=/{(\d+)}/g;function xo(i,...e){return e.length===0?i:i.replace(I7,function(t,n){const s=parseInt(n,10);return isNaN(s)||s<0||s>=e.length?t:e[s]})}const T7=/{([^}]+)}/g;function $X(i,e){return Object.keys(e).length===0?i:i.replace(T7,(t,n)=>e[n]??t)}function A7(i){return i.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}function Gr(i){return i.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function Ga(i){return i.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function qX(i,e){let t=0,n=i.indexOf(e);for(;n!==-1;)t++,n=i.indexOf(e,n+e.length);return t}function KX(i,e,t=Y7){return i.length<=e?i:`${i.substr(0,e)}${t}`}function GX(i,e=" "){const t=xf(i,e);return wy(t,e)}function xf(i,e){if(!i||!e)return i;const t=e.length;if(t===0||i.length===0)return i;let n=0;for(;i.indexOf(e,n)===n;)n=n+t;return i.substring(n)}function wy(i,e){if(!i||!e)return i;const t=e.length,n=i.length;if(t===0||n===0)return i;let s=n,r=-1;for(;r=i.lastIndexOf(e,s-1),!(r===-1||r+t!==s);){if(r===0)return"";s=r}return i.substring(0,s)}function N7(i){return i.replace(/[\-\\\{\}\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&").replace(/[\*]/g,".*")}function jX(i){return i.replace(/\*/g,"")}function EI(i,e,t={}){if(!i)throw new Error("Cannot create regex from empty string");e||(i=Ga(i)),t.wholeWord&&(/\B/.test(i.charAt(0))||(i="\\b"+i),/\B/.test(i.charAt(i.length-1))||(i=i+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(i,n)}function R7(i){return i.source==="^"||i.source==="^$"||i.source==="$"||i.source==="^\\s*$"?!1:!!(i.exec("")&&i.lastIndex===0)}function YX(i,e){return i.filter(t=>t!=null&&t!==!1).join(e)}function S1(i){return i.split(/\r\n|\r|\n/)}function ql(i){for(let e=0,t=i.length;e<t;e++){const n=i.charCodeAt(e);if(n!==k.Space&&n!==k.Tab)return e}return-1}function XX(i,e=0,t=i.length){for(let n=e;n<t;n++){const s=i.charCodeAt(n);if(s!==k.Space&&s!==k.Tab)return i.substring(e,n)}return i.substring(e,t)}function xI(i,e=i.length-1){for(let t=e;t>=0;t--){const n=i.charCodeAt(t);if(n!==k.Space&&n!==k.Tab)return t}return-1}function QX(i){const e=ql(i);return e===-1?i.length:e}function n0(i,e){return i<e?-1:i>e?1:0}function vy(i,e,t=0,n=i.length,s=0,r=e.length){for(;t<n&&s<r;t++,s++){const l=i.charCodeAt(t),c=e.charCodeAt(s);if(l<c)return-1;if(l>c)return 1}const o=n-t,a=r-s;return o<a?-1:o>a?1:0}function Hp(i,e){return Lf(i,e,0,i.length,0,e.length)}function Lf(i,e,t=0,n=i.length,s=0,r=e.length){for(;t<n&&s<r;t++,s++){let l=i.charCodeAt(t),c=e.charCodeAt(s);if(l===c)continue;if(l>=128||c>=128)return vy(i.toLowerCase(),e.toLowerCase(),t,n,s,r);hC(l)&&(l-=32),hC(c)&&(c-=32);const h=l-c;if(h!==0)return h}const o=n-t,a=r-s;return o<a?-1:o>a?1:0}function ZX(i){return i>=k.Digit0&&i<=k.Digit9}function hC(i){return i>=k.a&&i<=k.z}function LI(i){return i>=k.A&&i<=k.Z}function Ia(i,e){return i.length===e.length&&Lf(i,e)===0}function k1(i,e){const t=e.length;return e.length>i.length?!1:Lf(i,e,0,t)===0}function s0(i,e){const t=Math.min(i.length,e.length);let n;for(n=0;n<t;n++)if(i.charCodeAt(n)!==e.charCodeAt(n))return n;return t}function DI(i,e){const t=Math.min(i.length,e.length);let n;const s=i.length-1,r=e.length-1;for(n=0;n<t;n++)if(i.charCodeAt(s-n)!==e.charCodeAt(r-n))return n;return t}function hs(i){return 55296<=i&&i<=56319}function Bd(i){return 56320<=i&&i<=57343}function yy(i,e){return(i-55296<<10)+(e-56320)+65536}function Vp(i,e,t){const n=i.charCodeAt(t);if(hs(n)&&t+1<e){const s=i.charCodeAt(t+1);if(Bd(s))return yy(n,s)}return n}function M7(i,e){const t=i.charCodeAt(e-1);if(Bd(t)&&e>1){const n=i.charCodeAt(e-2);if(hs(n))return yy(n,t)}return t}class C1{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=M7(this._str,this._offset);return this._offset-=e>=si.UNICODE_SUPPLEMENTARY_PLANE_BEGIN?2:1,e}nextCodePoint(){const e=Vp(this._str,this._len,this._offset);return this._offset+=e>=si.UNICODE_SUPPLEMENTARY_PLANE_BEGIN?2:1,e}eol(){return this._offset>=this._len}}class zp{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new C1(e,t)}nextGraphemeLength(){const e=Ol.getInstance(),t=this._iterator,n=t.offset;let s=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const r=t.offset,o=e.getGraphemeBreakType(t.nextCodePoint());if(uC(s,o)){t.setOffset(r);break}s=o}return t.offset-n}prevGraphemeLength(){const e=Ol.getInstance(),t=this._iterator,n=t.offset;let s=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const r=t.offset,o=e.getGraphemeBreakType(t.prevCodePoint());if(uC(o,s)){t.setOffset(r);break}s=o}return n-t.offset}eol(){return this._iterator.eol()}}function O7(i,e){return new zp(i,e).nextGraphemeLength()}function F7(i,e){return new zp(i,e).prevGraphemeLength()}function JX(i,e){e>0&&Bd(i.charCodeAt(e))&&e--;const t=e+O7(i,e);return[t-F7(i,t),t]}let Fb;function P7(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function II(i){return Fb||(Fb=P7()),Fb.test(i)}const B7=/^[\t\n\r\x20-\x7E]*$/;function TI(i){return B7.test(i)}const AI=/[\u2028\u2029]/;function NI(i){return AI.test(i)}function W7(i){return i>=11904&&i<=55215||i>=63744&&i<=64255||i>=65281&&i<=65374}function Sy(i){return i>=127462&&i<=127487||i===8986||i===8987||i===9200||i===9203||i>=9728&&i<=10175||i===11088||i===11093||i>=127744&&i<=128591||i>=128640&&i<=128764||i>=128992&&i<=129008||i>=129280&&i<=129535||i>=129648&&i<=129782}const U7=/(?:\x1b\[|\x9b)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/,H7=/(?:\x1b\]|\x9d).*?(?:\x1b\\|\x07|\x9c)/,V7=/\x1b(?:[ #%\(\)\*\+\-\.\/]?[a-zA-Z0-9\|}~@])/,z7=new RegExp("(?:"+[U7.source,H7.source,V7.source].join("|")+")","g");function eQ(i){return i&&(i=i.replace(z7,"")),i}const $7=String.fromCharCode(k.UTF8_BOM);function RI(i){return!!(i&&i.length>0&&i.charCodeAt(0)===k.UTF8_BOM)}function tQ(i,e){if(!i||!e||i.length<e.length)return!1;const t=e.length,n=i.toLowerCase();let s=0,r=-1;for(;s<t;){const o=n.indexOf(e[s],r+1);if(o<0)return!1;r=o,s++}return!0}function iQ(i,e=!1){return i?(e&&(i=i.replace(/\\./g,"")),i.toLowerCase()!==i):!1}function nQ(i,e=1){if(e===0)return"";let t=-1;do t=i.indexOf(`
`,t+1),e--;while(e>0&&t>=0);return t===-1?i:(i[t-1]==="\r"&&t--,i.substr(0,t))}function q7(i){const e=k.Z-k.A+1;return i=i%(2*e),i<e?String.fromCharCode(k.a+i):String.fromCharCode(k.A+i-e)}function uC(i,e){return i===Qe.Other?e!==Qe.Extend&&e!==Qe.SpacingMark:i===Qe.CR&&e===Qe.LF?!1:i===Qe.Control||i===Qe.CR||i===Qe.LF||e===Qe.Control||e===Qe.CR||e===Qe.LF?!0:!(i===Qe.L&&(e===Qe.L||e===Qe.V||e===Qe.LV||e===Qe.LVT)||(i===Qe.LV||i===Qe.V)&&(e===Qe.V||e===Qe.T)||(i===Qe.LVT||i===Qe.T)&&e===Qe.T||e===Qe.Extend||e===Qe.ZWJ||e===Qe.SpacingMark||i===Qe.Prepend||i===Qe.ZWJ&&e===Qe.Extended_Pictographic||i===Qe.Regional_Indicator&&e===Qe.Regional_Indicator)}var Qe;(function(i){i[i.Other=0]="Other",i[i.Prepend=1]="Prepend",i[i.CR=2]="CR",i[i.LF=3]="LF",i[i.Control=4]="Control",i[i.Extend=5]="Extend",i[i.Regional_Indicator=6]="Regional_Indicator",i[i.SpacingMark=7]="SpacingMark",i[i.L=8]="L",i[i.V=9]="V",i[i.T=10]="T",i[i.LV=11]="LV",i[i.LVT=12]="LVT",i[i.ZWJ=13]="ZWJ",i[i.Extended_Pictographic=14]="Extended_Pictographic"})(Qe||(Qe={}));class Ol{static{this._INSTANCE=null}static getInstance(){return Ol._INSTANCE||(Ol._INSTANCE=new Ol),Ol._INSTANCE}constructor(){this._data=K7()}getGraphemeBreakType(e){if(e<32)return e===k.LineFeed?Qe.LF:e===k.CarriageReturn?Qe.CR:Qe.Control;if(e<127)return Qe.Other;const t=this._data,n=t.length/3;let s=1;for(;s<=n;)if(e<t[3*s])s=2*s;else if(e>t[3*s+1])s=2*s+1;else return t[3*s+2];return Qe.Other}}function K7(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function sQ(i,e){if(i===0)return 0;const t=G7(i,e);if(t!==void 0)return t;const n=new C1(e,i);return n.prevCodePoint(),n.offset}function G7(i,e){const t=new C1(e,i);let n=t.prevCodePoint();for(;j7(n)||n===vh.emojiVariantSelector||n===vh.enclosingKeyCap;){if(t.offset===0)return;n=t.prevCodePoint()}if(!Sy(n))return;let s=t.offset;return s>0&&t.prevCodePoint()===vh.zwj&&(s=t.offset),s}function j7(i){return 127995<=i&&i<=127999}var vh;(function(i){i[i.zwj=8205]="zwj",i[i.emojiVariantSelector=65039]="emojiVariantSelector",i[i.enclosingKeyCap=8419]="enclosingKeyCap",i[i.space=32]="space"})(vh||(vh={}));const rQ=" ";class Ta{static{this.ambiguousCharacterData=new Fi(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,1523,96,8242,96,1370,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,118002,50,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,118003,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,118004,52,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,118005,53,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,118006,54,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,118007,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,118008,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,118009,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,117974,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,117975,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71913,67,71922,67,65315,67,8557,67,8450,67,8493,67,117976,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,117977,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,117978,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,117979,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,117980,71,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,117981,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,117983,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,117984,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,118001,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,117982,108,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,117985,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,117986,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,117987,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,118000,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,117988,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,117989,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,117990,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,117991,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,117992,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,117993,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,117994,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,117995,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71910,87,71919,87,117996,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,117997,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,117998,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,71909,90,66293,90,65338,90,8484,90,8488,90,117999,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65283,35,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"cs":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"es":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"fr":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"it":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ja":[8211,45,8218,44,65281,33,8216,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65292,44,65297,49,65307,59],"ko":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pt-BR":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ru":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"zh-hans":[160,32,65374,126,8218,44,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65297,49],"zh-hant":[8211,45,65374,126,8218,44,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89]}'))}static{this.cache=new D7({getCacheKey:JSON.stringify},e=>{function t(h){const u=new Map;for(let f=0;f<h.length;f+=2)u.set(h[f],h[f+1]);return u}function n(h,u){const f=new Map(h);for(const[g,p]of u)f.set(g,p);return f}function s(h,u){if(!h)return u;const f=new Map;for(const[g,p]of h)u.has(g)&&f.set(g,p);return f}const r=this.ambiguousCharacterData.value;let o=e.filter(h=>!h.startsWith("_")&&h in r);o.length===0&&(o=["_default"]);let a;for(const h of o){const u=t(r[h]);a=s(a,u)}const l=t(r._common),c=n(l,a);return new Ta(c)})}static getInstance(e){return Ta.cache.get(Array.from(e))}static{this._locales=new Fi(()=>Object.keys(Ta.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return Ta._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let t=0;t<e.length;t++){const n=e.codePointAt(t);if(typeof n=="number"&&this.isAmbiguous(n))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}}class Aa{static getRawData(){return JSON.parse('{"_common":[11,12,13,127,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999],"cs":[173,8203,12288],"de":[173,8203,12288],"es":[8203,12288],"fr":[173,8203,12288],"it":[160,173,12288],"ja":[173],"ko":[173,12288],"pl":[173,8203,12288],"pt-BR":[173,8203,12288],"qps-ploc":[160,173,8203,12288],"ru":[173,12288],"tr":[160,173,8203,12288],"zh-hans":[160,173,8203,12288],"zh-hant":[173,12288]}')}static{this._data=void 0}static getData(){return this._data||(this._data=new Set([...Object.values(Aa.getRawData())].flat())),this._data}static isInvisibleCharacter(e){return Aa.getData().has(e)}static containsInvisibleCharacter(e){for(let t=0;t<e.length;t++){const n=e.codePointAt(t);if(typeof n=="number"&&(Aa.isInvisibleCharacter(n)||n===vh.space))return!0}return!1}static get codePoints(){return Aa.getData()}}const Y7="…";function MI(...i){return function(e,t){for(let n=0,s=i.length;n<s;n++){const r=i[n](e,t);if(r)return r}return null}}OI.bind(void 0,!1);const $p=OI.bind(void 0,!0);function OI(i,e,t){if(!t||t.length<e.length)return null;let n;return i?n=k1(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function X7(i,e){const t=e.toLowerCase().indexOf(i.toLowerCase());return t===-1?null:[{start:t,end:t+i.length}]}function Q7(i,e){return r0(i.toLowerCase(),e.toLowerCase(),0,0)}function r0(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]===e[n]){let s=null;return(s=r0(i,e,t+1,n+1))?Ey({start:n,end:n+1},s):null}return r0(i,e,t,n+1)}function ky(i){return k.a<=i&&i<=k.z}function E1(i){return k.A<=i&&i<=k.Z}function Cy(i){return k.Digit0<=i&&i<=k.Digit9}function FI(i){return i===k.Space||i===k.Tab||i===k.LineFeed||i===k.CarriageReturn}const PI=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(i=>PI.add(i.charCodeAt(0)));function qp(i){return FI(i)||PI.has(i)}function dC(i,e){return i===e||qp(i)&&qp(e)}const Pb=new Map;function fC(i){if(Pb.has(i))return Pb.get(i);let e;const t=g7(i);return t&&(e=t),Pb.set(i,e),e}function BI(i){return ky(i)||E1(i)||Cy(i)}function Ey(i,e){return e.length===0?e=[i]:i.end===e[0].start?e[0].start=i.start:e.unshift(i),e}function WI(i,e){for(let t=e;t<i.length;t++){const n=i.charCodeAt(t);if(E1(n)||Cy(n)||t>0&&!BI(i.charCodeAt(t-1)))return t}return i.length}function o0(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]!==e[n].toLowerCase())return null;{let s=null,r=n+1;for(s=o0(i,e,t+1,n+1);!s&&(r=WI(e,r))<e.length;)s=o0(i,e,t+1,r),r++;return s===null?null:Ey({start:n,end:n+1},s)}}function Z7(i){let e=0,t=0,n=0,s=0,r=0;for(let h=0;h<i.length;h++)r=i.charCodeAt(h),E1(r)&&e++,ky(r)&&t++,BI(r)&&n++,Cy(r)&&s++;const o=e/i.length,a=t/i.length,l=n/i.length,c=s/i.length;return{upperPercent:o,lowerPercent:a,alphaPercent:l,numericPercent:c}}function J7(i){const{upperPercent:e,lowerPercent:t}=i;return t===0&&e>.6}function eM(i){const{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:s}=i;return t>.2&&e<.8&&n>.6&&s<.2}function tM(i){let e=0,t=0,n=0,s=0;for(let r=0;r<i.length;r++)n=i.charCodeAt(r),E1(n)&&e++,ky(n)&&t++,FI(n)&&s++;return(e===0||t===0)&&s===0?i.length<=30:e<=5}function UI(i,e){if(!e||(e=e.trim(),e.length===0)||!tM(i))return null;e.length>60&&(e=e.substring(0,60));const t=Z7(e);if(!eM(t)){if(!J7(t))return null;e=e.toLowerCase()}let n=null,s=0;for(i=i.toLowerCase();s<e.length&&(n=o0(i,e,0,s))===null;)s=WI(e,s+1);return n}function oQ(i,e,t=!1){if(!e||e.length===0)return null;let n=null,s=0;for(i=i.toLowerCase(),e=e.toLowerCase();s<e.length&&(n=a0(i,e,0,s,t),n===null);)s=HI(e,s+1);return n}function a0(i,e,t,n,s){let r=0;if(t===i.length)return[];if(n===e.length)return null;if(!dC(i.charCodeAt(t),e.charCodeAt(n))){const l=fC(i.charCodeAt(t));if(!l)return null;for(let c=0;c<l.length;c++)if(!dC(l[c],e.charCodeAt(n+c)))return null;r+=l.length-1}let o=null,a=n+r+1;if(o=a0(i,e,t+1,a,s),!s)for(;!o&&(a=HI(e,a))<e.length;)o=a0(i,e,t+1,a,s),a++;if(!o)return null;if(i.charCodeAt(t)!==e.charCodeAt(n)){const l=fC(i.charCodeAt(t));if(!l)return o;for(let c=0;c<l.length;c++)if(l[c]!==e.charCodeAt(n+c))return o}return Ey({start:n,end:n+r+1},o)}function HI(i,e){for(let t=e;t<i.length;t++)if(qp(i.charCodeAt(t))||t>0&&qp(i.charCodeAt(t-1)))return t;return i.length}const iM=MI($p,UI,X7),nM=MI($p,UI,Q7),gC=new v1(1e4);function pC(i,e,t=!1){if(typeof i!="string"||typeof e!="string")return null;let n=gC.get(i);n||(n=new RegExp(N7(i),"i"),gC.set(i,n));const s=n.exec(e);return s?[{start:s.index,end:s.index+s[0].length}]:t?nM(i,e):iM(i,e)}function sM(i,e){const t=Wd(i,i.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?rM(t):null}function aQ(i,e,t,n,s,r){const o=Math.min(13,i.length);for(;t<o;t++){const a=Wd(i,e,t,n,s,r,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(a)return a}return[0,r]}function rM(i){if(typeof i>"u")return[];const e=[],t=i[1];for(let n=i.length-1;n>1;n--){const s=i[n]+t,r=e[e.length-1];r&&r.end===s?r.end=s+1:e.push({start:s,end:s+1})}return e}const Na=128;function xy(){const i=[],e=[];for(let t=0;t<=Na;t++)e[t]=0;for(let t=0;t<=Na;t++)i.push(e.slice(0));return i}function VI(i){const e=[];for(let t=0;t<=i;t++)e[t]=0;return e}const zI=VI(2*Na),l0=VI(2*Na),co=xy(),ll=xy(),dg=xy();function fg(i,e){if(e<0||e>=i.length)return!1;const t=i.codePointAt(e);switch(t){case k.Underline:case k.Dash:case k.Period:case k.Space:case k.Slash:case k.Backslash:case k.SingleQuote:case k.DoubleQuote:case k.Colon:case k.DollarSign:case k.LessThan:case k.GreaterThan:case k.OpenParen:case k.CloseParen:case k.OpenSquareBracket:case k.CloseSquareBracket:case k.OpenCurlyBrace:case k.CloseCurlyBrace:return!0;case void 0:return!1;default:return!!Sy(t)}}function mC(i,e){if(e<0||e>=i.length)return!1;switch(i.charCodeAt(e)){case k.Space:case k.Tab:return!0;default:return!1}}function op(i,e,t){return e[i]!==t[i]}function oM(i,e,t,n,s,r,o=!1){for(;e<t&&s<r;)i[e]===n[s]&&(o&&(zI[e]=s),e+=1),s+=1;return e===t}var wl;(function(i){i[i.Diag=1]="Diag",i[i.Left=2]="Left",i[i.LeftLeft=3]="LeftLeft"})(wl||(wl={}));var Va;(function(i){i.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}i.isDefault=e})(Va||(Va={}));class aM{static{this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}}function Wd(i,e,t,n,s,r,o=aM.default){const a=i.length>Na?Na:i.length,l=n.length>Na?Na:n.length;if(t>=a||r>=l||a-t>l-r||!oM(e,t,a,s,r,l,!0))return;lM(a,l,t,r,e,s);let c=1,h=1,u=t,f=r;const g=[!1];for(c=1,u=t;u<a;c++,u++){const y=zI[u],E=l0[u],N=u+1<a?l0[u+1]:l;for(h=y-r+1,f=y;f<N;h++,f++){let I=Number.MIN_SAFE_INTEGER,B=!1;f<=E&&(I=cM(i,e,u,t,n,s,f,l,r,co[c-1][h-1]===0,g));let x=0;I!==Number.MIN_SAFE_INTEGER&&(B=!0,x=I+ll[c-1][h-1]);const D=f>y,F=D?ll[c][h-1]+(co[c][h-1]>0?-5:0):0,te=f>y+1&&co[c][h-1]>0,J=te?ll[c][h-2]+(co[c][h-2]>0?-5:0):0;if(te&&(!D||J>=F)&&(!B||J>=x))ll[c][h]=J,dg[c][h]=wl.LeftLeft,co[c][h]=0;else if(D&&(!B||F>=x))ll[c][h]=F,dg[c][h]=wl.Left,co[c][h]=0;else if(B)ll[c][h]=x,dg[c][h]=wl.Diag,co[c][h]=co[c-1][h-1]+1;else throw new Error("not possible")}}if(!g[0]&&!o.firstMatchCanBeWeak)return;c--,h--;const p=[ll[c][h],r];let m=0,_=0;for(;c>=1;){let y=h;do{const E=dg[c][y];if(E===wl.LeftLeft)y=y-2;else if(E===wl.Left)y=y-1;else break}while(y>=1);m>1&&e[t+c-1]===s[r+h-1]&&!op(y+r-1,n,s)&&m+1>co[c][y]&&(y=h),y===h?m++:m=1,_||(_=y),c--,h=y-1,p.push(h)}l-r===a&&o.boostFullMatch&&(p[0]+=2);const v=_-a;return p[0]-=v,p}function lM(i,e,t,n,s,r){let o=i-1,a=e-1;for(;o>=t&&a>=n;)s[o]===r[a]&&(l0[o]=a,o--),a--}function cM(i,e,t,n,s,r,o,a,l,c,h){if(e[t]!==r[o])return Number.MIN_SAFE_INTEGER;let u=1,f=!1;return o===t-n?u=i[t]===s[o]?7:5:op(o,s,r)&&(o===0||!op(o-1,s,r))?(u=i[t]===s[o]?7:5,f=!0):fg(r,o)&&(o===0||!fg(r,o-1))?u=5:(fg(r,o-1)||mC(r,o-1))&&(u=5,f=!0),u>1&&t===n&&(h[0]=!0),f||(f=op(o,s,r)||fg(r,o-1)||mC(r,o-1)),t===n?o>l&&(u-=f?3:5):c?u+=f?2:0:u+=f?0:1,o+1===a&&(u-=f?3:5),u}function lQ(i,e,t,n,s,r,o){return hM(i,e,t,n,s,r,!0,o)}function hM(i,e,t,n,s,r,o,a){let l=Wd(i,e,t,n,s,r,a);if(i.length>=3){const c=Math.min(7,i.length-1);for(let h=t+1;h<c;h++){const u=uM(i,h);if(u){const f=Wd(u,u.toLowerCase(),t,n,s,r,a);f&&(f[0]-=3,(!l||f[0]>l[0])&&(l=f))}}}return l}function uM(i,e){if(e+1>=i.length)return;const t=i[e],n=i[e+1];if(t!==n)return i.slice(0,e)+n+t+i.slice(e+2)}const c0=Object.create(null);function b(i,e){if(Bi(e)){const t=c0[e];if(t===void 0)throw new Error(`${i} references an unknown codicon: ${e}`);e=t}return c0[i]=e,{id:i}}function $I(){return c0}const dM={add:b("add",6e4),plus:b("plus",6e4),gistNew:b("gist-new",6e4),repoCreate:b("repo-create",6e4),lightbulb:b("lightbulb",60001),lightBulb:b("light-bulb",60001),repo:b("repo",60002),repoDelete:b("repo-delete",60002),gistFork:b("gist-fork",60003),repoForked:b("repo-forked",60003),gitPullRequest:b("git-pull-request",60004),gitPullRequestAbandoned:b("git-pull-request-abandoned",60004),recordKeys:b("record-keys",60005),keyboard:b("keyboard",60005),tag:b("tag",60006),gitPullRequestLabel:b("git-pull-request-label",60006),tagAdd:b("tag-add",60006),tagRemove:b("tag-remove",60006),person:b("person",60007),personFollow:b("person-follow",60007),personOutline:b("person-outline",60007),personFilled:b("person-filled",60007),gitBranch:b("git-branch",60008),gitBranchCreate:b("git-branch-create",60008),gitBranchDelete:b("git-branch-delete",60008),sourceControl:b("source-control",60008),mirror:b("mirror",60009),mirrorPublic:b("mirror-public",60009),star:b("star",60010),starAdd:b("star-add",60010),starDelete:b("star-delete",60010),starEmpty:b("star-empty",60010),comment:b("comment",60011),commentAdd:b("comment-add",60011),alert:b("alert",60012),warning:b("warning",60012),search:b("search",60013),searchSave:b("search-save",60013),logOut:b("log-out",60014),signOut:b("sign-out",60014),logIn:b("log-in",60015),signIn:b("sign-in",60015),eye:b("eye",60016),eyeUnwatch:b("eye-unwatch",60016),eyeWatch:b("eye-watch",60016),circleFilled:b("circle-filled",60017),primitiveDot:b("primitive-dot",60017),closeDirty:b("close-dirty",60017),debugBreakpoint:b("debug-breakpoint",60017),debugBreakpointDisabled:b("debug-breakpoint-disabled",60017),debugHint:b("debug-hint",60017),terminalDecorationSuccess:b("terminal-decoration-success",60017),primitiveSquare:b("primitive-square",60018),edit:b("edit",60019),pencil:b("pencil",60019),info:b("info",60020),issueOpened:b("issue-opened",60020),gistPrivate:b("gist-private",60021),gitForkPrivate:b("git-fork-private",60021),lock:b("lock",60021),mirrorPrivate:b("mirror-private",60021),close:b("close",60022),removeClose:b("remove-close",60022),x:b("x",60022),repoSync:b("repo-sync",60023),sync:b("sync",60023),clone:b("clone",60024),desktopDownload:b("desktop-download",60024),beaker:b("beaker",60025),microscope:b("microscope",60025),vm:b("vm",60026),deviceDesktop:b("device-desktop",60026),file:b("file",60027),fileText:b("file-text",60027),more:b("more",60028),ellipsis:b("ellipsis",60028),kebabHorizontal:b("kebab-horizontal",60028),mailReply:b("mail-reply",60029),reply:b("reply",60029),organization:b("organization",60030),organizationFilled:b("organization-filled",60030),organizationOutline:b("organization-outline",60030),newFile:b("new-file",60031),fileAdd:b("file-add",60031),newFolder:b("new-folder",60032),fileDirectoryCreate:b("file-directory-create",60032),trash:b("trash",60033),trashcan:b("trashcan",60033),history:b("history",60034),clock:b("clock",60034),folder:b("folder",60035),fileDirectory:b("file-directory",60035),symbolFolder:b("symbol-folder",60035),logoGithub:b("logo-github",60036),markGithub:b("mark-github",60036),github:b("github",60036),terminal:b("terminal",60037),console:b("console",60037),repl:b("repl",60037),zap:b("zap",60038),symbolEvent:b("symbol-event",60038),error:b("error",60039),stop:b("stop",60039),variable:b("variable",60040),symbolVariable:b("symbol-variable",60040),array:b("array",60042),symbolArray:b("symbol-array",60042),symbolModule:b("symbol-module",60043),symbolPackage:b("symbol-package",60043),symbolNamespace:b("symbol-namespace",60043),symbolObject:b("symbol-object",60043),symbolMethod:b("symbol-method",60044),symbolFunction:b("symbol-function",60044),symbolConstructor:b("symbol-constructor",60044),symbolBoolean:b("symbol-boolean",60047),symbolNull:b("symbol-null",60047),symbolNumeric:b("symbol-numeric",60048),symbolNumber:b("symbol-number",60048),symbolStructure:b("symbol-structure",60049),symbolStruct:b("symbol-struct",60049),symbolParameter:b("symbol-parameter",60050),symbolTypeParameter:b("symbol-type-parameter",60050),symbolKey:b("symbol-key",60051),symbolText:b("symbol-text",60051),symbolReference:b("symbol-reference",60052),goToFile:b("go-to-file",60052),symbolEnum:b("symbol-enum",60053),symbolValue:b("symbol-value",60053),symbolRuler:b("symbol-ruler",60054),symbolUnit:b("symbol-unit",60054),activateBreakpoints:b("activate-breakpoints",60055),archive:b("archive",60056),arrowBoth:b("arrow-both",60057),arrowDown:b("arrow-down",60058),arrowLeft:b("arrow-left",60059),arrowRight:b("arrow-right",60060),arrowSmallDown:b("arrow-small-down",60061),arrowSmallLeft:b("arrow-small-left",60062),arrowSmallRight:b("arrow-small-right",60063),arrowSmallUp:b("arrow-small-up",60064),arrowUp:b("arrow-up",60065),bell:b("bell",60066),bold:b("bold",60067),book:b("book",60068),bookmark:b("bookmark",60069),debugBreakpointConditionalUnverified:b("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:b("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:b("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:b("debug-breakpoint-data-unverified",60072),debugBreakpointData:b("debug-breakpoint-data",60073),debugBreakpointDataDisabled:b("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:b("debug-breakpoint-log-unverified",60074),debugBreakpointLog:b("debug-breakpoint-log",60075),debugBreakpointLogDisabled:b("debug-breakpoint-log-disabled",60075),briefcase:b("briefcase",60076),broadcast:b("broadcast",60077),browser:b("browser",60078),bug:b("bug",60079),calendar:b("calendar",60080),caseSensitive:b("case-sensitive",60081),check:b("check",60082),checklist:b("checklist",60083),chevronDown:b("chevron-down",60084),chevronLeft:b("chevron-left",60085),chevronRight:b("chevron-right",60086),chevronUp:b("chevron-up",60087),chromeClose:b("chrome-close",60088),chromeMaximize:b("chrome-maximize",60089),chromeMinimize:b("chrome-minimize",60090),chromeRestore:b("chrome-restore",60091),circleOutline:b("circle-outline",60092),circle:b("circle",60092),debugBreakpointUnverified:b("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:b("terminal-decoration-incomplete",60092),circleSlash:b("circle-slash",60093),circuitBoard:b("circuit-board",60094),clearAll:b("clear-all",60095),clippy:b("clippy",60096),closeAll:b("close-all",60097),cloudDownload:b("cloud-download",60098),cloudUpload:b("cloud-upload",60099),code:b("code",60100),collapseAll:b("collapse-all",60101),colorMode:b("color-mode",60102),commentDiscussion:b("comment-discussion",60103),creditCard:b("credit-card",60105),dash:b("dash",60108),dashboard:b("dashboard",60109),database:b("database",60110),debugContinue:b("debug-continue",60111),debugDisconnect:b("debug-disconnect",60112),debugPause:b("debug-pause",60113),debugRestart:b("debug-restart",60114),debugStart:b("debug-start",60115),debugStepInto:b("debug-step-into",60116),debugStepOut:b("debug-step-out",60117),debugStepOver:b("debug-step-over",60118),debugStop:b("debug-stop",60119),debug:b("debug",60120),deviceCameraVideo:b("device-camera-video",60121),deviceCamera:b("device-camera",60122),deviceMobile:b("device-mobile",60123),diffAdded:b("diff-added",60124),diffIgnored:b("diff-ignored",60125),diffModified:b("diff-modified",60126),diffRemoved:b("diff-removed",60127),diffRenamed:b("diff-renamed",60128),diff:b("diff",60129),diffSidebyside:b("diff-sidebyside",60129),discard:b("discard",60130),editorLayout:b("editor-layout",60131),emptyWindow:b("empty-window",60132),exclude:b("exclude",60133),extensions:b("extensions",60134),eyeClosed:b("eye-closed",60135),fileBinary:b("file-binary",60136),fileCode:b("file-code",60137),fileMedia:b("file-media",60138),filePdf:b("file-pdf",60139),fileSubmodule:b("file-submodule",60140),fileSymlinkDirectory:b("file-symlink-directory",60141),fileSymlinkFile:b("file-symlink-file",60142),fileZip:b("file-zip",60143),files:b("files",60144),filter:b("filter",60145),flame:b("flame",60146),foldDown:b("fold-down",60147),foldUp:b("fold-up",60148),fold:b("fold",60149),folderActive:b("folder-active",60150),folderOpened:b("folder-opened",60151),gear:b("gear",60152),gift:b("gift",60153),gistSecret:b("gist-secret",60154),gist:b("gist",60155),gitCommit:b("git-commit",60156),gitCompare:b("git-compare",60157),compareChanges:b("compare-changes",60157),gitMerge:b("git-merge",60158),githubAction:b("github-action",60159),githubAlt:b("github-alt",60160),globe:b("globe",60161),grabber:b("grabber",60162),graph:b("graph",60163),gripper:b("gripper",60164),heart:b("heart",60165),home:b("home",60166),horizontalRule:b("horizontal-rule",60167),hubot:b("hubot",60168),inbox:b("inbox",60169),issueReopened:b("issue-reopened",60171),issues:b("issues",60172),italic:b("italic",60173),jersey:b("jersey",60174),json:b("json",60175),kebabVertical:b("kebab-vertical",60176),key:b("key",60177),law:b("law",60178),lightbulbAutofix:b("lightbulb-autofix",60179),linkExternal:b("link-external",60180),link:b("link",60181),listOrdered:b("list-ordered",60182),listUnordered:b("list-unordered",60183),liveShare:b("live-share",60184),loading:b("loading",60185),location:b("location",60186),mailRead:b("mail-read",60187),mail:b("mail",60188),markdown:b("markdown",60189),megaphone:b("megaphone",60190),mention:b("mention",60191),milestone:b("milestone",60192),gitPullRequestMilestone:b("git-pull-request-milestone",60192),mortarBoard:b("mortar-board",60193),move:b("move",60194),multipleWindows:b("multiple-windows",60195),mute:b("mute",60196),noNewline:b("no-newline",60197),note:b("note",60198),octoface:b("octoface",60199),openPreview:b("open-preview",60200),package:b("package",60201),paintcan:b("paintcan",60202),pin:b("pin",60203),play:b("play",60204),run:b("run",60204),plug:b("plug",60205),preserveCase:b("preserve-case",60206),preview:b("preview",60207),project:b("project",60208),pulse:b("pulse",60209),question:b("question",60210),quote:b("quote",60211),radioTower:b("radio-tower",60212),reactions:b("reactions",60213),references:b("references",60214),refresh:b("refresh",60215),regex:b("regex",60216),remoteExplorer:b("remote-explorer",60217),remote:b("remote",60218),remove:b("remove",60219),replaceAll:b("replace-all",60220),replace:b("replace",60221),repoClone:b("repo-clone",60222),repoForcePush:b("repo-force-push",60223),repoPull:b("repo-pull",60224),repoPush:b("repo-push",60225),report:b("report",60226),requestChanges:b("request-changes",60227),rocket:b("rocket",60228),rootFolderOpened:b("root-folder-opened",60229),rootFolder:b("root-folder",60230),rss:b("rss",60231),ruby:b("ruby",60232),saveAll:b("save-all",60233),saveAs:b("save-as",60234),save:b("save",60235),screenFull:b("screen-full",60236),screenNormal:b("screen-normal",60237),searchStop:b("search-stop",60238),server:b("server",60240),settingsGear:b("settings-gear",60241),settings:b("settings",60242),shield:b("shield",60243),smiley:b("smiley",60244),sortPrecedence:b("sort-precedence",60245),splitHorizontal:b("split-horizontal",60246),splitVertical:b("split-vertical",60247),squirrel:b("squirrel",60248),starFull:b("star-full",60249),starHalf:b("star-half",60250),symbolClass:b("symbol-class",60251),symbolColor:b("symbol-color",60252),symbolConstant:b("symbol-constant",60253),symbolEnumMember:b("symbol-enum-member",60254),symbolField:b("symbol-field",60255),symbolFile:b("symbol-file",60256),symbolInterface:b("symbol-interface",60257),symbolKeyword:b("symbol-keyword",60258),symbolMisc:b("symbol-misc",60259),symbolOperator:b("symbol-operator",60260),symbolProperty:b("symbol-property",60261),wrench:b("wrench",60261),wrenchSubaction:b("wrench-subaction",60261),symbolSnippet:b("symbol-snippet",60262),tasklist:b("tasklist",60263),telescope:b("telescope",60264),textSize:b("text-size",60265),threeBars:b("three-bars",60266),thumbsdown:b("thumbsdown",60267),thumbsup:b("thumbsup",60268),tools:b("tools",60269),triangleDown:b("triangle-down",60270),triangleLeft:b("triangle-left",60271),triangleRight:b("triangle-right",60272),triangleUp:b("triangle-up",60273),twitter:b("twitter",60274),unfold:b("unfold",60275),unlock:b("unlock",60276),unmute:b("unmute",60277),unverified:b("unverified",60278),verified:b("verified",60279),versions:b("versions",60280),vmActive:b("vm-active",60281),vmOutline:b("vm-outline",60282),vmRunning:b("vm-running",60283),watch:b("watch",60284),whitespace:b("whitespace",60285),wholeWord:b("whole-word",60286),window:b("window",60287),wordWrap:b("word-wrap",60288),zoomIn:b("zoom-in",60289),zoomOut:b("zoom-out",60290),listFilter:b("list-filter",60291),listFlat:b("list-flat",60292),listSelection:b("list-selection",60293),selection:b("selection",60293),listTree:b("list-tree",60294),debugBreakpointFunctionUnverified:b("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:b("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:b("debug-breakpoint-function-disabled",60296),debugStackframeActive:b("debug-stackframe-active",60297),circleSmallFilled:b("circle-small-filled",60298),debugStackframeDot:b("debug-stackframe-dot",60298),terminalDecorationMark:b("terminal-decoration-mark",60298),debugStackframe:b("debug-stackframe",60299),debugStackframeFocused:b("debug-stackframe-focused",60299),debugBreakpointUnsupported:b("debug-breakpoint-unsupported",60300),symbolString:b("symbol-string",60301),debugReverseContinue:b("debug-reverse-continue",60302),debugStepBack:b("debug-step-back",60303),debugRestartFrame:b("debug-restart-frame",60304),debugAlt:b("debug-alt",60305),callIncoming:b("call-incoming",60306),callOutgoing:b("call-outgoing",60307),menu:b("menu",60308),expandAll:b("expand-all",60309),feedback:b("feedback",60310),gitPullRequestReviewer:b("git-pull-request-reviewer",60310),groupByRefType:b("group-by-ref-type",60311),ungroupByRefType:b("ungroup-by-ref-type",60312),account:b("account",60313),gitPullRequestAssignee:b("git-pull-request-assignee",60313),bellDot:b("bell-dot",60314),debugConsole:b("debug-console",60315),library:b("library",60316),output:b("output",60317),runAll:b("run-all",60318),syncIgnored:b("sync-ignored",60319),pinned:b("pinned",60320),githubInverted:b("github-inverted",60321),serverProcess:b("server-process",60322),serverEnvironment:b("server-environment",60323),pass:b("pass",60324),issueClosed:b("issue-closed",60324),stopCircle:b("stop-circle",60325),playCircle:b("play-circle",60326),record:b("record",60327),debugAltSmall:b("debug-alt-small",60328),vmConnect:b("vm-connect",60329),cloud:b("cloud",60330),merge:b("merge",60331),export:b("export",60332),graphLeft:b("graph-left",60333),magnet:b("magnet",60334),notebook:b("notebook",60335),redo:b("redo",60336),checkAll:b("check-all",60337),pinnedDirty:b("pinned-dirty",60338),passFilled:b("pass-filled",60339),circleLargeFilled:b("circle-large-filled",60340),circleLarge:b("circle-large",60341),circleLargeOutline:b("circle-large-outline",60341),combine:b("combine",60342),gather:b("gather",60342),table:b("table",60343),variableGroup:b("variable-group",60344),typeHierarchy:b("type-hierarchy",60345),typeHierarchySub:b("type-hierarchy-sub",60346),typeHierarchySuper:b("type-hierarchy-super",60347),gitPullRequestCreate:b("git-pull-request-create",60348),runAbove:b("run-above",60349),runBelow:b("run-below",60350),notebookTemplate:b("notebook-template",60351),debugRerun:b("debug-rerun",60352),workspaceTrusted:b("workspace-trusted",60353),workspaceUntrusted:b("workspace-untrusted",60354),workspaceUnknown:b("workspace-unknown",60355),terminalCmd:b("terminal-cmd",60356),terminalDebian:b("terminal-debian",60357),terminalLinux:b("terminal-linux",60358),terminalPowershell:b("terminal-powershell",60359),terminalTmux:b("terminal-tmux",60360),terminalUbuntu:b("terminal-ubuntu",60361),terminalBash:b("terminal-bash",60362),arrowSwap:b("arrow-swap",60363),copy:b("copy",60364),personAdd:b("person-add",60365),filterFilled:b("filter-filled",60366),wand:b("wand",60367),debugLineByLine:b("debug-line-by-line",60368),inspect:b("inspect",60369),layers:b("layers",60370),layersDot:b("layers-dot",60371),layersActive:b("layers-active",60372),compass:b("compass",60373),compassDot:b("compass-dot",60374),compassActive:b("compass-active",60375),azure:b("azure",60376),issueDraft:b("issue-draft",60377),gitPullRequestClosed:b("git-pull-request-closed",60378),gitPullRequestDraft:b("git-pull-request-draft",60379),debugAll:b("debug-all",60380),debugCoverage:b("debug-coverage",60381),runErrors:b("run-errors",60382),folderLibrary:b("folder-library",60383),debugContinueSmall:b("debug-continue-small",60384),beakerStop:b("beaker-stop",60385),graphLine:b("graph-line",60386),graphScatter:b("graph-scatter",60387),pieChart:b("pie-chart",60388),bracket:b("bracket",60175),bracketDot:b("bracket-dot",60389),bracketError:b("bracket-error",60390),lockSmall:b("lock-small",60391),azureDevops:b("azure-devops",60392),verifiedFilled:b("verified-filled",60393),newline:b("newline",60394),layout:b("layout",60395),layoutActivitybarLeft:b("layout-activitybar-left",60396),layoutActivitybarRight:b("layout-activitybar-right",60397),layoutPanelLeft:b("layout-panel-left",60398),layoutPanelCenter:b("layout-panel-center",60399),layoutPanelJustify:b("layout-panel-justify",60400),layoutPanelRight:b("layout-panel-right",60401),layoutPanel:b("layout-panel",60402),layoutSidebarLeft:b("layout-sidebar-left",60403),layoutSidebarRight:b("layout-sidebar-right",60404),layoutStatusbar:b("layout-statusbar",60405),layoutMenubar:b("layout-menubar",60406),layoutCentered:b("layout-centered",60407),target:b("target",60408),indent:b("indent",60409),recordSmall:b("record-small",60410),errorSmall:b("error-small",60411),terminalDecorationError:b("terminal-decoration-error",60411),arrowCircleDown:b("arrow-circle-down",60412),arrowCircleLeft:b("arrow-circle-left",60413),arrowCircleRight:b("arrow-circle-right",60414),arrowCircleUp:b("arrow-circle-up",60415),layoutSidebarRightOff:b("layout-sidebar-right-off",60416),layoutPanelOff:b("layout-panel-off",60417),layoutSidebarLeftOff:b("layout-sidebar-left-off",60418),blank:b("blank",60419),heartFilled:b("heart-filled",60420),map:b("map",60421),mapHorizontal:b("map-horizontal",60421),foldHorizontal:b("fold-horizontal",60421),mapFilled:b("map-filled",60422),mapHorizontalFilled:b("map-horizontal-filled",60422),foldHorizontalFilled:b("fold-horizontal-filled",60422),circleSmall:b("circle-small",60423),bellSlash:b("bell-slash",60424),bellSlashDot:b("bell-slash-dot",60425),commentUnresolved:b("comment-unresolved",60426),gitPullRequestGoToChanges:b("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:b("git-pull-request-new-changes",60428),searchFuzzy:b("search-fuzzy",60429),commentDraft:b("comment-draft",60430),send:b("send",60431),sparkle:b("sparkle",60432),insert:b("insert",60433),mic:b("mic",60434),thumbsdownFilled:b("thumbsdown-filled",60435),thumbsupFilled:b("thumbsup-filled",60436),coffee:b("coffee",60437),snake:b("snake",60438),game:b("game",60439),vr:b("vr",60440),chip:b("chip",60441),piano:b("piano",60442),music:b("music",60443),micFilled:b("mic-filled",60444),repoFetch:b("repo-fetch",60445),copilot:b("copilot",60446),lightbulbSparkle:b("lightbulb-sparkle",60447),robot:b("robot",60448),sparkleFilled:b("sparkle-filled",60449),diffSingle:b("diff-single",60450),diffMultiple:b("diff-multiple",60451),surroundWith:b("surround-with",60452),share:b("share",60453),gitStash:b("git-stash",60454),gitStashApply:b("git-stash-apply",60455),gitStashPop:b("git-stash-pop",60456),vscode:b("vscode",60457),vscodeInsiders:b("vscode-insiders",60458),codeOss:b("code-oss",60459),runCoverage:b("run-coverage",60460),runAllCoverage:b("run-all-coverage",60461),coverage:b("coverage",60462),githubProject:b("github-project",60463),mapVertical:b("map-vertical",60464),foldVertical:b("fold-vertical",60464),mapVerticalFilled:b("map-vertical-filled",60465),foldVerticalFilled:b("fold-vertical-filled",60465),goToSearch:b("go-to-search",60466),percentage:b("percentage",60467),sortPercentage:b("sort-percentage",60467),attach:b("attach",60468),goToEditingSession:b("go-to-editing-session",60469),editSession:b("edit-session",60470),codeReview:b("code-review",60471),copilotWarning:b("copilot-warning",60472),python:b("python",60473),copilotLarge:b("copilot-large",60474),copilotWarningLarge:b("copilot-warning-large",60475),keyboardTab:b("keyboard-tab",60476),copilotBlocked:b("copilot-blocked",60477),copilotNotConnected:b("copilot-not-connected",60478),flag:b("flag",60479),lightbulbEmpty:b("lightbulb-empty",60480),symbolMethodArrow:b("symbol-method-arrow",60481),copilotUnavailable:b("copilot-unavailable",60482),repoPinned:b("repo-pinned",60483),keyboardTabAbove:b("keyboard-tab-above",60484),keyboardTabBelow:b("keyboard-tab-below",60485),gitPullRequestDone:b("git-pull-request-done",60486),mcp:b("mcp",60487),extensionsLarge:b("extensions-large",60488),layoutPanelDock:b("layout-panel-dock",60489),layoutSidebarLeftDock:b("layout-sidebar-left-dock",60490),layoutSidebarRightDock:b("layout-sidebar-right-dock",60491)},fM={dialogError:b("dialog-error","error"),dialogWarning:b("dialog-warning","warning"),dialogInfo:b("dialog-info","info"),dialogClose:b("dialog-close","close"),treeItemExpanded:b("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:b("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:b("tree-filter-on-type-off","list-selection"),treeFilterClear:b("tree-filter-clear","close"),treeItemLoading:b("tree-item-loading","loading"),menuSelection:b("menu-selection","check"),menuSubmenu:b("menu-submenu","chevron-right"),menuBarMore:b("menubar-more","more"),scrollbarButtonLeft:b("scrollbar-button-left","triangle-left"),scrollbarButtonRight:b("scrollbar-button-right","triangle-right"),scrollbarButtonUp:b("scrollbar-button-up","triangle-up"),scrollbarButtonDown:b("scrollbar-button-down","triangle-down"),toolBarMore:b("toolbar-more","more"),quickInputBack:b("quick-input-back","arrow-left"),dropDownButton:b("drop-down-button",60084),symbolCustomColor:b("symbol-customcolor",60252),exportIcon:b("export",60332),workspaceUnspecified:b("workspace-unspecified",60355),newLine:b("newline",60394),thumbsDownFilled:b("thumbsdown-filled",60435),thumbsUpFilled:b("thumbsup-filled",60436),gitFetch:b("git-fetch",60445),lightbulbSparkleAutofix:b("lightbulb-sparkle-autofix",60447),debugBreakpointPending:b("debug-breakpoint-pending",60377)},re={...dM,...fM};var h0;(function(i){function e(t){return!!t&&typeof t=="object"&&typeof t.id=="string"}i.isThemeColor=e})(h0||(h0={}));var ze;(function(i){i.iconNameSegment="[A-Za-z0-9]+",i.iconNameExpression="[A-Za-z0-9-]+",i.iconModifierExpression="~[A-Za-z]+",i.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${i.iconNameExpression})(${i.iconModifierExpression})?$`);function t(f){const g=e.exec(f.id);if(!g)return t(re.error);const[,p,m]=g,_=["codicon","codicon-"+p];return m&&_.push("codicon-modifier-"+m.substring(1)),_}i.asClassNameArray=t;function n(f){return t(f).join(" ")}i.asClassName=n;function s(f){return"."+t(f).join(".")}i.asCSSSelector=s;function r(f){return!!f&&typeof f=="object"&&typeof f.id=="string"&&(typeof f.color>"u"||h0.isThemeColor(f.color))}i.isThemeIcon=r;const o=new RegExp(`^\\$\\((${i.iconNameExpression}(?:${i.iconModifierExpression})?)\\)$`);function a(f){const g=o.exec(f);if(!g)return;const[,p]=g;return{id:p}}i.fromString=a;function l(f){return{id:f}}i.fromId=l;function c(f,g){let p=f.id;const m=p.lastIndexOf("~");return m!==-1&&(p=p.substring(0,m)),g&&(p=`${p}~${g}`),{id:p}}i.modify=c;function h(f){const g=f.id.lastIndexOf("~");if(g!==-1)return f.id.substring(g+1)}i.getModifier=h;function u(f,g){return f.id===g.id&&f.color?.id===g.color?.id}i.isEqual=u})(ze||(ze={}));const gM="$(",Ly=new RegExp(`\\$\\(${ze.iconNameExpression}(?:${ze.iconModifierExpression})?\\)`,"g"),pM=new RegExp(`(\\\\)?${Ly.source}`,"g");function mM(i){return i.replace(pM,(e,t)=>t?e:`\\${e}`)}const bM=new RegExp(`\\\\${Ly.source}`,"g");function _M(i){return i.replace(bM,e=>`\\${e}`)}const wM=new RegExp(`(\\s)?(\\\\)?${Ly.source}(\\s)?`,"g");function qI(i){return i.indexOf(gM)===-1?i:i.replace(wM,(e,t,n,s)=>n?e:t||s||"")}function vM(i){return i?i.replace(/\$\((.*?)\)/g,(e,t)=>` ${t} `).trim():""}const Bb=new RegExp(`\\$\\(${ze.iconNameCharacter}+\\)`,"g");function zu(i){Bb.lastIndex=0;let e="";const t=[];let n=0;for(;;){const s=Bb.lastIndex,r=Bb.exec(i),o=i.substring(s,r?.index);if(o.length>0){e+=o;for(let a=0;a<o.length;a++)t.push(n)}if(!r)break;n+=r[0].length}return{text:e,iconOffsets:t}}function Wb(i,e,t=!1){const{text:n,iconOffsets:s}=e;if(!s||s.length===0)return pC(i,n,t);const r=xf(n," "),o=n.length-r.length,a=pC(i,r,t);if(a)for(const l of a){const c=s[l.start+o]+o;l.start+=c,l.end+=c}return a}function KI(){return globalThis._VSCODE_NLS_MESSAGES}function Dy(){return globalThis._VSCODE_NLS_LANGUAGE}const yM=Dy()==="pseudo"||typeof document<"u"&&document.location&&typeof document.location.hash=="string"&&document.location.hash.indexOf("pseudo=true")>=0;function Kp(i,e){let t;return e.length===0?t=i:t=i.replace(/\{(\d+)\}/g,(n,s)=>{const r=s[0],o=e[r];let a=n;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),yM&&(t="［"+t.replace(/[aouei]/g,"$&$&")+"］"),t}function d(i,e,...t){return Kp(typeof i=="number"?GI(i,e):e,t)}function GI(i,e){const t=KI()?.[i];if(typeof t!="string"){if(typeof e=="string")return e;throw new Error(`!!! NLS MISSING: ${i} !!!`)}return t}function Iy(i,e,...t){let n;typeof i=="number"?n=GI(i,e):n=e;const s=Kp(n,t);return{value:s,original:e===n?s:Kp(e,t)}}const Fl="en";let Ud=!1,Hd=!1,id=!1,jI=!1,Ty=!1,YI=!1,Ay=!1,XI=!1,QI=!1,$u,ap=Fl,u0=Fl,SM,mo;const Ho=globalThis;let as;typeof Ho.vscode<"u"&&typeof Ho.vscode.process<"u"?as=Ho.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(as=process);const ZI=typeof as?.versions?.electron=="string",kM=ZI&&as?.type==="renderer";if(typeof as=="object"){Ud=as.platform==="win32",Hd=as.platform==="darwin",id=as.platform==="linux",id&&as.env.SNAP&&as.env.SNAP_REVISION,YI=ZI,XI=!!as.env.CI||!!as.env.BUILD_ARTIFACTSTAGINGDIRECTORY,$u=Fl,ap=Fl;const i=as.env.VSCODE_NLS_CONFIG;if(i)try{const e=JSON.parse(i);$u=e.userLocale,u0=e.osLocale,ap=e.resolvedLanguage||Fl,SM=e.languagePack?.translationsConfigFile}catch{}jI=!0}else typeof navigator=="object"&&!kM?(mo=navigator.userAgent,Ud=mo.indexOf("Windows")>=0,Hd=mo.indexOf("Macintosh")>=0,Ay=(mo.indexOf("Macintosh")>=0||mo.indexOf("iPad")>=0||mo.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,id=mo.indexOf("Linux")>=0,QI=mo?.indexOf("Mobi")>=0,Ty=!0,ap=Dy()||Fl,$u=navigator.language.toLowerCase(),u0=$u):console.error("Unable to resolve platform.");var rn;(function(i){i[i.Web=0]="Web",i[i.Mac=1]="Mac",i[i.Linux=2]="Linux",i[i.Windows=3]="Windows"})(rn||(rn={}));function cQ(i){switch(i){case rn.Web:return"Web";case rn.Mac:return"Mac";case rn.Linux:return"Linux";case rn.Windows:return"Windows"}}let lp=rn.Web;Hd?lp=rn.Mac:Ud?lp=rn.Windows:id&&(lp=rn.Linux);const hi=Ud,Me=Hd,rs=id,yh=jI,hQ=YI,zs=Ty,CM=Ty&&typeof Ho.importScripts=="function",EM=CM?Ho.origin:void 0,ja=Ay,xM=QI,uQ=XI,cp=lp,Qr=mo,ia=ap;var bC;(function(i){function e(){return ia}i.value=e;function t(){return ia.length===2?ia==="en":ia.length>=3?ia[0]==="e"&&ia[1]==="n"&&ia[2]==="-":!1}i.isDefaultVariant=t;function n(){return ia==="en"}i.isDefault=n})(bC||(bC={}));const dQ=$u,fQ=u0,LM=typeof Ho.postMessage=="function"&&!Ho.importScripts,x1=(()=>{if(LM){const i=[];Ho.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,s=i.length;n<s;n++){const r=i[n];if(r.id===t.data.vscodeScheduleAsyncWork){i.splice(n,1),r.callback();return}}});let e=0;return t=>{const n=++e;i.push({id:n,callback:t}),Ho.postMessage({vscodeScheduleAsyncWork:n},"*")}}return i=>setTimeout(i)})();var At;(function(i){i[i.Windows=1]="Windows",i[i.Macintosh=2]="Macintosh",i[i.Linux=3]="Linux"})(At||(At={}));const An=Hd||Ay?At.Macintosh:Ud?At.Windows:At.Linux;let _C=!0,wC=!1;function DM(){if(!wC){wC=!0;const i=new Uint8Array(2);i[0]=1,i[1]=2,_C=new Uint16Array(i.buffer)[0]===513}return _C}const Ny=!!(Qr&&Qr.indexOf("Chrome")>=0),IM=!!(Qr&&Qr.indexOf("Firefox")>=0),TM=!!(!Ny&&Qr&&Qr.indexOf("Safari")>=0),JI=!!(Qr&&Qr.indexOf("Edg/")>=0),gQ=!!(Qr&&Qr.indexOf("Android")>=0);var za;(function(i){i[i.Uri=1]="Uri",i[i.Regexp=2]="Regexp",i[i.ScmResource=3]="ScmResource",i[i.ScmResourceGroup=4]="ScmResourceGroup",i[i.ScmProvider=5]="ScmProvider",i[i.CommentController=6]="CommentController",i[i.CommentThread=7]="CommentThread",i[i.CommentThreadInstance=8]="CommentThreadInstance",i[i.CommentThreadReply=9]="CommentThreadReply",i[i.CommentNode=10]="CommentNode",i[i.CommentThreadNode=11]="CommentThreadNode",i[i.TimelineActionContext=12]="TimelineActionContext",i[i.NotebookCellActionContext=13]="NotebookCellActionContext",i[i.NotebookActionContext=14]="NotebookActionContext",i[i.TerminalContext=15]="TerminalContext",i[i.TestItemContext=16]="TestItemContext",i[i.Date=17]="Date",i[i.TestMessageMenuArgs=18]="TestMessageMenuArgs",i[i.ChatViewContext=19]="ChatViewContext",i[i.LanguageModelToolResult=20]="LanguageModelToolResult",i[i.LanguageModelTextPart=21]="LanguageModelTextPart",i[i.LanguageModelPromptTsxPart=22]="LanguageModelPromptTsxPart",i[i.LanguageModelDataPart=23]="LanguageModelDataPart"})(za||(za={}));var vC={};let Kl;const Ub=globalThis.vscode;if(typeof Ub<"u"&&typeof Ub.process<"u"){const i=Ub.process;Kl={get platform(){return i.platform},get arch(){return i.arch},get env(){return i.env},cwd(){return i.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?Kl={get platform(){return process.platform},get arch(){return process.arch},get env(){return vC},cwd(){return vC.VSCODE_CWD||process.cwd()}}:Kl={get platform(){return hi?"win32":Me?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const Gp=Kl.cwd,d0=Kl.env,AM=Kl.platform,NM=Kl.arch,RM=65,MM=97,OM=90,FM=122,Gl=46,qi=47,Wn=92,ho=58,PM=63;class eT extends Error{constructor(e,t,n){let s;typeof t=="string"&&t.indexOf("not ")===0?(s="must not be",t=t.replace(/^not /,"")):s="must be";const r=e.indexOf(".")!==-1?"property":"argument";let o=`The "${e}" ${r} ${s} of type ${t}`;o+=`. Received type ${typeof n}`,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function BM(i,e){if(i===null||typeof i!="object")throw new eT(e,"Object",i)}function ci(i,e){if(typeof i!="string")throw new eT(e,"string",i)}const wr=AM==="win32";function qe(i){return i===qi||i===Wn}function f0(i){return i===qi}function uo(i){return i>=RM&&i<=OM||i>=MM&&i<=FM}function jp(i,e,t,n){let s="",r=0,o=-1,a=0,l=0;for(let c=0;c<=i.length;++c){if(c<i.length)l=i.charCodeAt(c);else{if(n(l))break;l=qi}if(n(l)){if(!(o===c-1||a===1))if(a===2){if(s.length<2||r!==2||s.charCodeAt(s.length-1)!==Gl||s.charCodeAt(s.length-2)!==Gl){if(s.length>2){const h=s.lastIndexOf(t);h===-1?(s="",r=0):(s=s.slice(0,h),r=s.length-1-s.lastIndexOf(t)),o=c,a=0;continue}else if(s.length!==0){s="",r=0,o=c,a=0;continue}}e&&(s+=s.length>0?`${t}..`:"..",r=2)}else s.length>0?s+=`${t}${i.slice(o+1,c)}`:s=i.slice(o+1,c),r=c-o-1;o=c,a=0}else l===Gl&&a!==-1?++a:a=-1}return s}function WM(i){return i?`${i[0]==="."?"":"."}${i}`:""}function tT(i,e){BM(e,"pathObject");const t=e.dir||e.root,n=e.base||`${e.name||""}${WM(e.ext)}`;return t?t===e.root?`${t}${n}`:`${t}${i}${n}`:n}const Xt={resolve(...i){let e="",t="",n=!1;for(let s=i.length-1;s>=-1;s--){let r;if(s>=0){if(r=i[s],ci(r,`paths[${s}]`),r.length===0)continue}else e.length===0?r=Gp():(r=d0[`=${e}`]||Gp(),(r===void 0||r.slice(0,2).toLowerCase()!==e.toLowerCase()&&r.charCodeAt(2)===Wn)&&(r=`${e}\\`));const o=r.length;let a=0,l="",c=!1;const h=r.charCodeAt(0);if(o===1)qe(h)&&(a=1,c=!0);else if(qe(h))if(c=!0,qe(r.charCodeAt(1))){let u=2,f=u;for(;u<o&&!qe(r.charCodeAt(u));)u++;if(u<o&&u!==f){const g=r.slice(f,u);for(f=u;u<o&&qe(r.charCodeAt(u));)u++;if(u<o&&u!==f){for(f=u;u<o&&!qe(r.charCodeAt(u));)u++;(u===o||u!==f)&&(l=`\\\\${g}\\${r.slice(f,u)}`,a=u)}}}else a=1;else uo(h)&&r.charCodeAt(1)===ho&&(l=r.slice(0,2),a=2,o>2&&qe(r.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${r.slice(a)}\\${t}`,n=c,c&&e.length>0)break}return t=jp(t,!n,"\\",qe),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(i){ci(i,"path");const e=i.length;if(e===0)return".";let t=0,n,s=!1;const r=i.charCodeAt(0);if(e===1)return f0(r)?"\\":i;if(qe(r))if(s=!0,qe(i.charCodeAt(1))){let a=2,l=a;for(;a<e&&!qe(i.charCodeAt(a));)a++;if(a<e&&a!==l){const c=i.slice(l,a);for(l=a;a<e&&qe(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!qe(i.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${i.slice(l)}\\`;a!==l&&(n=`\\\\${c}\\${i.slice(l,a)}`,t=a)}}}else t=1;else uo(r)&&i.charCodeAt(1)===ho&&(n=i.slice(0,2),t=2,e>2&&qe(i.charCodeAt(2))&&(s=!0,t=3));let o=t<e?jp(i.slice(t),!s,"\\",qe):"";if(o.length===0&&!s&&(o="."),o.length>0&&qe(i.charCodeAt(e-1))&&(o+="\\"),!s&&n===void 0&&i.includes(":")){if(o.length>=2&&uo(o.charCodeAt(0))&&o.charCodeAt(1)===ho)return`.\\${o}`;let a=i.indexOf(":");do if(a===e-1||qe(i.charCodeAt(a+1)))return`.\\${o}`;while((a=i.indexOf(":",a+1))!==-1)}return n===void 0?s?`\\${o}`:o:s?`${n}\\${o}`:`${n}${o}`},isAbsolute(i){ci(i,"path");const e=i.length;if(e===0)return!1;const t=i.charCodeAt(0);return qe(t)||e>2&&uo(t)&&i.charCodeAt(1)===ho&&qe(i.charCodeAt(2))},join(...i){if(i.length===0)return".";let e,t;for(let r=0;r<i.length;++r){const o=i[r];ci(o,"path"),o.length>0&&(e===void 0?e=t=o:e+=`\\${o}`)}if(e===void 0)return".";let n=!0,s=0;if(typeof t=="string"&&qe(t.charCodeAt(0))){++s;const r=t.length;r>1&&qe(t.charCodeAt(1))&&(++s,r>2&&(qe(t.charCodeAt(2))?++s:n=!1))}if(n){for(;s<e.length&&qe(e.charCodeAt(s));)s++;s>=2&&(e=`\\${e.slice(s)}`)}return Xt.normalize(e)},relative(i,e){if(ci(i,"from"),ci(e,"to"),i===e)return"";const t=Xt.resolve(i),n=Xt.resolve(e);if(t===n||(i=t.toLowerCase(),e=n.toLowerCase(),i===e))return"";if(t.length!==i.length||n.length!==e.length){const p=t.split("\\"),m=n.split("\\");p[p.length-1]===""&&p.pop(),m[m.length-1]===""&&m.pop();const _=p.length,v=m.length,y=_<v?_:v;let E;for(E=0;E<y&&p[E].toLowerCase()===m[E].toLowerCase();E++);return E===0?n:E===y?v>y?m.slice(E).join("\\"):_>y?"..\\".repeat(_-1-E)+"..":"":"..\\".repeat(_-E)+m.slice(E).join("\\")}let s=0;for(;s<i.length&&i.charCodeAt(s)===Wn;)s++;let r=i.length;for(;r-1>s&&i.charCodeAt(r-1)===Wn;)r--;const o=r-s;let a=0;for(;a<e.length&&e.charCodeAt(a)===Wn;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===Wn;)l--;const c=l-a,h=o<c?o:c;let u=-1,f=0;for(;f<h;f++){const p=i.charCodeAt(s+f);if(p!==e.charCodeAt(a+f))break;p===Wn&&(u=f)}if(f!==h){if(u===-1)return n}else{if(c>h){if(e.charCodeAt(a+f)===Wn)return n.slice(a+f+1);if(f===2)return n.slice(a+f)}o>h&&(i.charCodeAt(s+f)===Wn?u=f:f===2&&(u=3)),u===-1&&(u=0)}let g="";for(f=s+u+1;f<=r;++f)(f===r||i.charCodeAt(f)===Wn)&&(g+=g.length===0?"..":"\\..");return a+=u,g.length>0?`${g}${n.slice(a,l)}`:(n.charCodeAt(a)===Wn&&++a,n.slice(a,l))},toNamespacedPath(i){if(typeof i!="string"||i.length===0)return i;const e=Xt.resolve(i);if(e.length<=2)return i;if(e.charCodeAt(0)===Wn){if(e.charCodeAt(1)===Wn){const t=e.charCodeAt(2);if(t!==PM&&t!==Gl)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(uo(e.charCodeAt(0))&&e.charCodeAt(1)===ho&&e.charCodeAt(2)===Wn)return`\\\\?\\${e}`;return e},dirname(i){ci(i,"path");const e=i.length;if(e===0)return".";let t=-1,n=0;const s=i.charCodeAt(0);if(e===1)return qe(s)?i:".";if(qe(s)){if(t=n=1,qe(i.charCodeAt(1))){let a=2,l=a;for(;a<e&&!qe(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&qe(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!qe(i.charCodeAt(a));)a++;if(a===e)return i;a!==l&&(t=n=a+1)}}}}else uo(s)&&i.charCodeAt(1)===ho&&(t=e>2&&qe(i.charCodeAt(2))?3:2,n=t);let r=-1,o=!0;for(let a=e-1;a>=n;--a)if(qe(i.charCodeAt(a))){if(!o){r=a;break}}else o=!1;if(r===-1){if(t===-1)return".";r=t}return i.slice(0,r)},basename(i,e){e!==void 0&&ci(e,"suffix"),ci(i,"path");let t=0,n=-1,s=!0,r;if(i.length>=2&&uo(i.charCodeAt(0))&&i.charCodeAt(1)===ho&&(t=2),e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let o=e.length-1,a=-1;for(r=i.length-1;r>=t;--r){const l=i.charCodeAt(r);if(qe(l)){if(!s){t=r+1;break}}else a===-1&&(s=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=r):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(r=i.length-1;r>=t;--r)if(qe(i.charCodeAt(r))){if(!s){t=r+1;break}}else n===-1&&(s=!1,n=r+1);return n===-1?"":i.slice(t,n)},extname(i){ci(i,"path");let e=0,t=-1,n=0,s=-1,r=!0,o=0;i.length>=2&&i.charCodeAt(1)===ho&&uo(i.charCodeAt(0))&&(e=n=2);for(let a=i.length-1;a>=e;--a){const l=i.charCodeAt(a);if(qe(l)){if(!r){n=a+1;break}continue}s===-1&&(r=!1,s=a+1),l===Gl?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||s===-1||o===0||o===1&&t===s-1&&t===n+1?"":i.slice(t,s)},format:tT.bind(null,"\\"),parse(i){ci(i,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;const t=i.length;let n=0,s=i.charCodeAt(0);if(t===1)return qe(s)?(e.root=e.dir=i,e):(e.base=e.name=i,e);if(qe(s)){if(n=1,qe(i.charCodeAt(1))){let u=2,f=u;for(;u<t&&!qe(i.charCodeAt(u));)u++;if(u<t&&u!==f){for(f=u;u<t&&qe(i.charCodeAt(u));)u++;if(u<t&&u!==f){for(f=u;u<t&&!qe(i.charCodeAt(u));)u++;u===t?n=u:u!==f&&(n=u+1)}}}}else if(uo(s)&&i.charCodeAt(1)===ho){if(t<=2)return e.root=e.dir=i,e;if(n=2,qe(i.charCodeAt(2))){if(t===3)return e.root=e.dir=i,e;n=3}}n>0&&(e.root=i.slice(0,n));let r=-1,o=n,a=-1,l=!0,c=i.length-1,h=0;for(;c>=n;--c){if(s=i.charCodeAt(c),qe(s)){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),s===Gl?r===-1?r=c:h!==1&&(h=1):r!==-1&&(h=-1)}return a!==-1&&(r===-1||h===0||h===1&&r===a-1&&r===o+1?e.base=e.name=i.slice(o,a):(e.name=i.slice(o,r),e.base=i.slice(o,a),e.ext=i.slice(r,a))),o>0&&o!==n?e.dir=i.slice(0,o-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},UM=(()=>{if(wr){const i=/\\/g;return()=>{const e=Gp().replace(i,"/");return e.slice(e.indexOf("/"))}}return()=>Gp()})(),Pe={resolve(...i){let e="",t=!1;for(let n=i.length-1;n>=0&&!t;n--){const s=i[n];ci(s,`paths[${n}]`),s.length!==0&&(e=`${s}/${e}`,t=s.charCodeAt(0)===qi)}if(!t){const n=UM();e=`${n}/${e}`,t=n.charCodeAt(0)===qi}return e=jp(e,!t,"/",f0),t?`/${e}`:e.length>0?e:"."},normalize(i){if(ci(i,"path"),i.length===0)return".";const e=i.charCodeAt(0)===qi,t=i.charCodeAt(i.length-1)===qi;return i=jp(i,!e,"/",f0),i.length===0?e?"/":t?"./":".":(t&&(i+="/"),e?`/${i}`:i)},isAbsolute(i){return ci(i,"path"),i.length>0&&i.charCodeAt(0)===qi},join(...i){if(i.length===0)return".";const e=[];for(let t=0;t<i.length;++t){const n=i[t];ci(n,"path"),n.length>0&&e.push(n)}return e.length===0?".":Pe.normalize(e.join("/"))},relative(i,e){if(ci(i,"from"),ci(e,"to"),i===e||(i=Pe.resolve(i),e=Pe.resolve(e),i===e))return"";const t=1,n=i.length,s=n-t,r=1,o=e.length-r,a=s<o?s:o;let l=-1,c=0;for(;c<a;c++){const u=i.charCodeAt(t+c);if(u!==e.charCodeAt(r+c))break;u===qi&&(l=c)}if(c===a)if(o>a){if(e.charCodeAt(r+c)===qi)return e.slice(r+c+1);if(c===0)return e.slice(r+c)}else s>a&&(i.charCodeAt(t+c)===qi?l=c:c===0&&(l=0));let h="";for(c=t+l+1;c<=n;++c)(c===n||i.charCodeAt(c)===qi)&&(h+=h.length===0?"..":"/..");return`${h}${e.slice(r+l)}`},toNamespacedPath(i){return i},dirname(i){if(ci(i,"path"),i.length===0)return".";const e=i.charCodeAt(0)===qi;let t=-1,n=!0;for(let s=i.length-1;s>=1;--s)if(i.charCodeAt(s)===qi){if(!n){t=s;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":i.slice(0,t)},basename(i,e){e!==void 0&&ci(e,"suffix"),ci(i,"path");let t=0,n=-1,s=!0,r;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let o=e.length-1,a=-1;for(r=i.length-1;r>=0;--r){const l=i.charCodeAt(r);if(l===qi){if(!s){t=r+1;break}}else a===-1&&(s=!1,a=r+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=r):(o=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(r=i.length-1;r>=0;--r)if(i.charCodeAt(r)===qi){if(!s){t=r+1;break}}else n===-1&&(s=!1,n=r+1);return n===-1?"":i.slice(t,n)},extname(i){ci(i,"path");let e=-1,t=0,n=-1,s=!0,r=0;for(let o=i.length-1;o>=0;--o){const a=i[o];if(a==="/"){if(!s){t=o+1;break}continue}n===-1&&(s=!1,n=o+1),a==="."?e===-1?e=o:r!==1&&(r=1):e!==-1&&(r=-1)}return e===-1||n===-1||r===0||r===1&&e===n-1&&e===t+1?"":i.slice(e,n)},format:tT.bind(null,"/"),parse(i){ci(i,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;const t=i.charCodeAt(0)===qi;let n;t?(e.root="/",n=1):n=0;let s=-1,r=0,o=-1,a=!0,l=i.length-1,c=0;for(;l>=n;--l){const h=i.charCodeAt(l);if(h===qi){if(!a){r=l+1;break}continue}o===-1&&(a=!1,o=l+1),h===Gl?s===-1?s=l:c!==1&&(c=1):s!==-1&&(c=-1)}if(o!==-1){const h=r===0&&t?1:r;s===-1||c===0||c===1&&s===o-1&&s===r+1?e.base=e.name=i.slice(h,o):(e.name=i.slice(h,s),e.base=i.slice(h,o),e.ext=i.slice(s,o))}return r>0?e.dir=i.slice(0,r-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Pe.win32=Xt.win32=Xt;Pe.posix=Xt.posix=Pe;const HM=wr?Xt.normalize:Pe.normalize,pQ=wr?Xt.isAbsolute:Pe.isAbsolute,VM=wr?Xt.join:Pe.join,zM=wr?Xt.resolve:Pe.resolve,$M=wr?Xt.relative:Pe.relative,qM=wr?Xt.dirname:Pe.dirname,Ry=wr?Xt.basename:Pe.basename,My=wr?Xt.extname:Pe.extname,mQ=wr?Xt.parse:Pe.parse,Ms=wr?Xt.sep:Pe.sep,KM=/^\w[\w\d+.-]*$/,GM=/^\//,jM=/^\/\//;function YM(i,e){if(!i.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${i.authority}", path: "${i.path}", query: "${i.query}", fragment: "${i.fragment}"}`);if(i.scheme&&!KM.test(i.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(i.path){if(i.authority){if(!GM.test(i.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(jM.test(i.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function XM(i,e){return!i&&!e?"file":i}function QM(i,e){switch(i){case"https":case"http":case"file":e?e[0]!==Js&&(e=Js+e):e=Js;break}return e}const Ft="",Js="/",ZM=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class Y{static isUri(e){return e instanceof Y?!0:!e||typeof e!="object"?!1:typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function"}constructor(e,t,n,s,r,o=!1){typeof e=="object"?(this.scheme=e.scheme||Ft,this.authority=e.authority||Ft,this.path=e.path||Ft,this.query=e.query||Ft,this.fragment=e.fragment||Ft):(this.scheme=XM(e,o),this.authority=t||Ft,this.path=QM(this.scheme,n||Ft),this.query=s||Ft,this.fragment=r||Ft,YM(this,o))}get fsPath(){return Yp(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:s,query:r,fragment:o}=e;return t===void 0?t=this.scheme:t===null&&(t=Ft),n===void 0?n=this.authority:n===null&&(n=Ft),s===void 0?s=this.path:s===null&&(s=Ft),r===void 0?r=this.query:r===null&&(r=Ft),o===void 0?o=this.fragment:o===null&&(o=Ft),t===this.scheme&&n===this.authority&&s===this.path&&r===this.query&&o===this.fragment?this:new Wc(t,n,s,r,o)}static parse(e,t=!1){const n=ZM.exec(e);return n?new Wc(n[2]||Ft,gg(n[4]||Ft),gg(n[5]||Ft),gg(n[7]||Ft),gg(n[9]||Ft),t):new Wc(Ft,Ft,Ft,Ft,Ft)}static file(e){let t=Ft;if(hi&&(e=e.replace(/\\/g,Js)),e[0]===Js&&e[1]===Js){const n=e.indexOf(Js,2);n===-1?(t=e.substring(2),e=Js):(t=e.substring(2,n),e=e.substring(n)||Js)}return new Wc("file",t,e,Ft,Ft)}static from(e,t){return new Wc(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return hi&&e.scheme==="file"?n=Y.file(Xt.join(Yp(e,!0),...t)).path:n=Pe.join(e.path,...t),e.with({path:n})}toString(e=!1){return g0(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof Y)return e;{const t=new Wc(e);return t._formatted=e.external??null,t._fsPath=e._sep===iT?e.fsPath??null:null,t}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}}function bQ(i){return!i||typeof i!="object"?!1:typeof i.scheme=="string"&&(typeof i.authority=="string"||typeof i.authority>"u")&&(typeof i.path=="string"||typeof i.path>"u")&&(typeof i.query=="string"||typeof i.query>"u")&&(typeof i.fragment=="string"||typeof i.fragment>"u")}const iT=hi?1:void 0;class Wc extends Y{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=Yp(this,!1)),this._fsPath}toString(e=!1){return e?g0(this,!0):(this._formatted||(this._formatted=g0(this,!1)),this._formatted)}toJSON(){const e={$mid:za.Uri};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=iT),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const nT={[k.Colon]:"%3A",[k.Slash]:"%2F",[k.QuestionMark]:"%3F",[k.Hash]:"%23",[k.OpenSquareBracket]:"%5B",[k.CloseSquareBracket]:"%5D",[k.AtSign]:"%40",[k.ExclamationMark]:"%21",[k.DollarSign]:"%24",[k.Ampersand]:"%26",[k.SingleQuote]:"%27",[k.OpenParen]:"%28",[k.CloseParen]:"%29",[k.Asterisk]:"%2A",[k.Plus]:"%2B",[k.Comma]:"%2C",[k.Semicolon]:"%3B",[k.Equals]:"%3D",[k.Space]:"%20"};function yC(i,e,t){let n,s=-1;for(let r=0;r<i.length;r++){const o=i.charCodeAt(r);if(o>=k.a&&o<=k.z||o>=k.A&&o<=k.Z||o>=k.Digit0&&o<=k.Digit9||o===k.Dash||o===k.Period||o===k.Underline||o===k.Tilde||e&&o===k.Slash||t&&o===k.OpenSquareBracket||t&&o===k.CloseSquareBracket||t&&o===k.Colon)s!==-1&&(n+=encodeURIComponent(i.substring(s,r)),s=-1),n!==void 0&&(n+=i.charAt(r));else{n===void 0&&(n=i.substr(0,r));const a=nT[o];a!==void 0?(s!==-1&&(n+=encodeURIComponent(i.substring(s,r)),s=-1),n+=a):s===-1&&(s=r)}}return s!==-1&&(n+=encodeURIComponent(i.substring(s))),n!==void 0?n:i}function JM(i){let e;for(let t=0;t<i.length;t++){const n=i.charCodeAt(t);n===k.Hash||n===k.QuestionMark?(e===void 0&&(e=i.substr(0,t)),e+=nT[n]):e!==void 0&&(e+=i[t])}return e!==void 0?e:i}function Yp(i,e){let t;return i.authority&&i.path.length>1&&i.scheme==="file"?t=`//${i.authority}${i.path}`:i.path.charCodeAt(0)===k.Slash&&(i.path.charCodeAt(1)>=k.A&&i.path.charCodeAt(1)<=k.Z||i.path.charCodeAt(1)>=k.a&&i.path.charCodeAt(1)<=k.z)&&i.path.charCodeAt(2)===k.Colon?e?t=i.path.substr(1):t=i.path[1].toLowerCase()+i.path.substr(2):t=i.path,hi&&(t=t.replace(/\//g,"\\")),t}function g0(i,e){const t=e?JM:yC;let n="",{scheme:s,authority:r,path:o,query:a,fragment:l}=i;if(s&&(n+=s,n+=":"),(r||s==="file")&&(n+=Js,n+=Js),r){let c=r.indexOf("@");if(c!==-1){const h=r.substr(0,c);r=r.substr(c+1),c=h.lastIndexOf(":"),c===-1?n+=t(h,!1,!1):(n+=t(h.substr(0,c),!1,!1),n+=":",n+=t(h.substr(c+1),!1,!0)),n+="@"}r=r.toLowerCase(),c=r.lastIndexOf(":"),c===-1?n+=t(r,!1,!0):(n+=t(r.substr(0,c),!1,!0),n+=r.substr(c))}if(o){if(o.length>=3&&o.charCodeAt(0)===k.Slash&&o.charCodeAt(2)===k.Colon){const c=o.charCodeAt(1);c>=k.A&&c<=k.Z&&(o=`/${String.fromCharCode(c+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===k.Colon){const c=o.charCodeAt(0);c>=k.A&&c<=k.Z&&(o=`${String.fromCharCode(c+32)}:${o.substr(2)}`)}n+=t(o,!0,!1)}return a&&(n+="?",n+=t(a,!1,!1)),l&&(n+="#",n+=e?l:yC(l,!1,!1)),n}function sT(i){try{return decodeURIComponent(i)}catch{return i.length>3?i.substr(0,3)+sT(i.substr(3)):i}}const SC=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function gg(i){return i.match(SC)?i.replace(SC,e=>sT(e)):i}var ge;(function(i){i.inMemory="inmemory",i.vscode="vscode",i.internal="private",i.walkThrough="walkThrough",i.walkThroughSnippet="walkThroughSnippet",i.http="http",i.https="https",i.file="file",i.mailto="mailto",i.untitled="untitled",i.data="data",i.command="command",i.vscodeRemote="vscode-remote",i.vscodeRemoteResource="vscode-remote-resource",i.vscodeManagedRemoteResource="vscode-managed-remote-resource",i.vscodeUserData="vscode-userdata",i.vscodeCustomEditor="vscode-custom-editor",i.vscodeNotebookCell="vscode-notebook-cell",i.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",i.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",i.vscodeNotebookCellOutput="vscode-notebook-cell-output",i.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",i.vscodeNotebookMetadata="vscode-notebook-metadata",i.vscodeInteractiveInput="vscode-interactive-input",i.vscodeSettings="vscode-settings",i.vscodeWorkspaceTrust="vscode-workspace-trust",i.vscodeTerminal="vscode-terminal",i.vscodeChatCodeBlock="vscode-chat-code-block",i.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",i.vscodeChatSesssion="vscode-chat-editor",i.webviewPanel="webview-panel",i.vscodeWebview="vscode-webview",i.extension="extension",i.vscodeFileResource="vscode-file",i.tmp="tmp",i.vsls="vsls",i.vscodeSourceControl="vscode-scm",i.commentsInput="comment",i.codeSetting="code-setting",i.outputChannel="output",i.accessibleView="accessible-view"})(ge||(ge={}));function L1(i,e){return Y.isUri(i)?Ia(i.scheme,e):k1(i,e+":")}function kC(i,...e){return e.some(t=>L1(i,t))}const e9="tkn";class t9{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}setPreferredWebSchema(e){this._preferredWebSchema=e}setDelegate(e){this._delegate=e}setServerRootPath(e,t){this._serverRootPath=Pe.join(t??"/",i9(e))}getServerRootPath(){return this._serverRootPath}get _remoteResourcesPath(){return Pe.join(this._serverRootPath,ge.vscodeRemoteResource)}set(e,t,n){this._hosts[e]=t,this._ports[e]=n}setConnectionToken(e,t){this._connectionTokens[e]=t}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return pt(a),e}const t=e.authority;let n=this._hosts[t];n&&n.indexOf(":")!==-1&&n.indexOf("[")===-1&&(n=`[${n}]`);const s=this._ports[t],r=this._connectionTokens[t];let o=`path=${encodeURIComponent(e.path)}`;return typeof r=="string"&&(o+=`&${e9}=${encodeURIComponent(r)}`),Y.from({scheme:zs?this._preferredWebSchema:ge.vscodeRemoteResource,authority:`${n}:${s}`,path:this._remoteResourcesPath,query:o})}}const rT=new t9;function i9(i){return`${i.quality??"oss"}-${i.commit??"dev"}`}const _Q="vs/../../node_modules",n9="vscode-app";class nd{constructor(){this.staticBrowserUris=new oi,this.appResourcePathUrls=new Map}static{this.FALLBACK_AUTHORITY=n9}registerAppResourcePathUrl(e,t){this.appResourcePathUrls.set(e,t)}toUrl(e){let t=this.appResourcePathUrls.get(e);return typeof t=="function"&&(t=t()),new URL(t??e,globalThis.location?.href??import.meta.url).toString()}asBrowserUri(e){const t=this.toUri(e);return this.uriToBrowserUri(t)}uriToBrowserUri(e){return e.scheme===ge.vscodeRemote?rT.rewrite(e):e.scheme===ge.file&&(yh||EM===`${ge.vscodeFileResource}://${nd.FALLBACK_AUTHORITY}`)?e.with({scheme:ge.vscodeFileResource,authority:e.authority||nd.FALLBACK_AUTHORITY,query:null,fragment:null}):this.staticBrowserUris.get(e)??e}asFileUri(e){const t=this.toUri(e);return this.uriToFileUri(t)}uriToFileUri(e){return e.scheme===ge.vscodeFileResource?e.with({scheme:ge.file,authority:e.authority!==nd.FALLBACK_AUTHORITY?e.authority:null,query:null,fragment:null}):e}toUri(e){if(Y.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){const t=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(t))return Y.joinPath(Y.parse(t,!0),e);const n=VM(t,e);return Y.file(n)}return Y.parse(this.toUrl(e))}registerStaticBrowserUri(e,t){return this.staticBrowserUris.set(e,t),fe(()=>{this.staticBrowserUris.get(e)===t&&this.staticBrowserUris.delete(e)})}getRegisteredBrowserUris(){return this.staticBrowserUris.keys()}}const Oy=new nd;var p0;(function(i){const e=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);i.CoopAndCoep=Object.freeze(e.get("3"));const t="vscode-coi";function n(r){let o;typeof r=="string"?o=new URL(r).searchParams:r instanceof URL?o=r.searchParams:Y.isUri(r)&&(o=new URL(r.toString(!0)).searchParams);const a=o?.get(t);if(a)return e.get(a)}i.getHeadersFromQuery=n;function s(r,o,a){if(!globalThis.crossOriginIsolated)return;const l=o&&a?"3":a?"2":"1";r instanceof URLSearchParams?r.set(t,l):r[t]=l}i.addSearchParam=s})(p0||(p0={}));function na(i){return i===k.Slash||i===k.Backslash}function Xp(i){return i.replace(/[\\/]/g,Pe.sep)}function s9(i){return i.indexOf("/")===-1&&(i=Xp(i)),/^[a-zA-Z]:(\/|$)/.test(i)&&(i="/"+i),i}function CC(i,e=Pe.sep){if(!i)return"";const t=i.length,n=i.charCodeAt(0);if(na(n)){if(na(i.charCodeAt(1))&&!na(i.charCodeAt(2))){let r=3;const o=r;for(;r<t&&!na(i.charCodeAt(r));r++);if(o!==r&&!na(i.charCodeAt(r+1))){for(r+=1;r<t;r++)if(na(i.charCodeAt(r)))return i.slice(0,r+1).replace(/[\\/]/g,e)}}return e}else if(oT(n)&&i.charCodeAt(1)===k.Colon)return na(i.charCodeAt(2))?i.slice(0,2)+e:i.slice(0,2);let s=i.indexOf("://");if(s!==-1){for(s+=3;s<t;s++)if(na(i.charCodeAt(s)))return i.slice(0,s+1)}return""}function wQ(i){if(!hi||!i||i.length<5)return!1;let e=i.charCodeAt(0);if(e!==k.Backslash||(e=i.charCodeAt(1),e!==k.Backslash))return!1;let t=2;const n=t;for(;t<i.length&&(e=i.charCodeAt(t),e!==k.Backslash);t++);return!(n===t||(e=i.charCodeAt(t+1),isNaN(e)||e===k.Backslash))}const r9=/[\\/:\*\?"<>\|]/g,o9=/[/]/g,a9=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function l9(i,e=hi){const t=e?r9:o9;return!(!i||i.length===0||/^\s+$/.test(i)||(t.lastIndex=0,t.test(i))||e&&a9.test(i)||i==="."||i===".."||e&&i[i.length-1]==="."||e&&i.length!==i.trim().length||i.length>255)}function vQ(i,e,t){const n=i===e;return!t||n?n:!i||!e?!1:Ia(i,e)}function m0(i,e,t,n=Ms){if(i===e)return!0;if(!i||!e||e.length>i.length)return!1;if(t){if(!k1(i,e))return!1;if(e.length===i.length)return!0;let r=e.length;return e.charAt(e.length-1)===n&&r--,i.charAt(r)===n}return e.charAt(e.length-1)!==n&&(e+=n),i.indexOf(e)===0}function oT(i){return i>=k.A&&i<=k.Z||i>=k.a&&i<=k.z}function aT(i,e=hi){return e?oT(i.charCodeAt(0))&&i.charCodeAt(1)===k.Colon:!1}function yQ(i,e=hi){return aT(i,e)?i[0]:void 0}function SQ(i,e,t){return e.length>i.length?-1:i===e?0:(t&&(i=i.toLowerCase(),e=e.toLowerCase()),i.indexOf(e))}function kQ(i){const e=i.split(":");let t,n,s;for(const r of e){const o=Number(r);el(o)?n===void 0?n=o:s===void 0&&(s=o):t=t?[t,r].join(":"):r}if(!t)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:t,line:n!==void 0?n:void 0,column:s!==void 0?s:n!==void 0?1:void 0}}function fo(i){return Yp(i,!0)}class Fy{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:n0(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,t,n=!1){if(e.scheme===t.scheme){if(e.scheme===ge.file)return m0(fo(e),fo(t),this._ignorePathCasing(e))&&e.query===t.query&&(n||e.fragment===t.fragment);if(xC(e.authority,t.authority))return m0(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}joinPath(e,...t){return Y.joinPath(e,...t)}basenameOrAuthority(e){return nc(e)||e.authority}basename(e){return Pe.basename(e.path)}extname(e){return Pe.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===ge.file?t=Y.file(qM(fo(e))).path:(t=Pe.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==k.Slash&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===ge.file?t=Y.file(HM(fo(e))).path:t=Pe.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!xC(e.authority,t.authority))return;if(e.scheme===ge.file){const r=$M(fo(e),fo(t));return hi?Xp(r):r}let n=e.path||"/";const s=t.path||"/";if(this._ignorePathCasing(e)){let r=0;for(const o=Math.min(n.length,s.length);r<o&&!(n.charCodeAt(r)!==s.charCodeAt(r)&&n.charAt(r).toLowerCase()!==s.charAt(r).toLowerCase());r++);n=s.substr(0,r)+n.substr(r)}return Pe.relative(n,s)}resolvePath(e,t){if(e.scheme===ge.file){const n=Y.file(zM(fo(e),t));return e.with({authority:n.authority,path:n.path})}return t=s9(t),e.with({path:Pe.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&Ia(e,t)}hasTrailingPathSeparator(e,t=Ms){if(e.scheme===ge.file){const n=fo(e);return n.length>CC(n).length&&n[n.length-1]===t}else{const n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===k.Slash&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Ms){return LC(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Ms){let n=!1;if(e.scheme===ge.file){const s=fo(e);n=s!==void 0&&s.length===CC(s).length&&s[s.length-1]===t}else{t="/";const s=e.path;n=s.length===1&&s.charCodeAt(s.length-1)===k.Slash}return!n&&!LC(e,t)?e.with({path:e.path+"/"}):e}}const lt=new Fy(()=>!1),c9=new Fy(i=>i.scheme===ge.file?!rs:!0),h9=new Fy(i=>!0),u9=lt.isEqual.bind(lt),d9=lt.isEqualOrParent.bind(lt);lt.getComparisonKey.bind(lt);const lT=lt.basenameOrAuthority.bind(lt),nc=lt.basename.bind(lt),f9=lt.extname.bind(lt),Py=lt.dirname.bind(lt),zn=lt.joinPath.bind(lt),g9=lt.normalizePath.bind(lt),CQ=lt.relativePath.bind(lt),EC=lt.resolvePath.bind(lt),EQ=lt.isAbsolutePath.bind(lt),xC=lt.isEqualAuthority.bind(lt),LC=lt.hasTrailingPathSeparator.bind(lt),xQ=lt.removeTrailingPathSeparator.bind(lt);lt.addTrailingPathSeparator.bind(lt);function LQ(i,e){const t=[];for(let n=0;n<i.length;n++){const s=e(i[n]);i.some((r,o)=>o===n?!1:d9(s,e(r)))||t.push(i[n])}return t}var Qp;(function(i){i.META_DATA_LABEL="label",i.META_DATA_DESCRIPTION="description",i.META_DATA_SIZE="size",i.META_DATA_MIME="mime";function e(t){const n=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,l]=o.split(":");a&&l&&n.set(a,l)});const r=t.path.substring(0,t.path.indexOf(";"));return r&&n.set(i.META_DATA_MIME,r),n}i.parseMetaData=e})(Qp||(Qp={}));function DQ(i,e,t){if(e){let n=i.path;return n&&n[0]!==Pe.sep&&(n=Pe.sep+n),i.with({scheme:t,authority:e,path:n})}return i.with({scheme:t})}var Zp;(function(i){i[i.Paragraph=0]="Paragraph",i[i.Break=1]="Break"})(Zp||(Zp={}));class By{static lift(e){const t=new By(e.value,e);return t.uris=e.uris,t.baseUri=e.baseUri?Y.revive(e.baseUri):void 0,t}constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw Sf("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=Zp.Paragraph){return this.value+=m9(this.supportThemeIcons?mM(e):e).replace(/([ \t]+)/g,(n,s)=>"&nbsp;".repeat(s.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===Zp.Break?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${b9(t,e)}
`,this}appendLink(e,t,n){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),n&&(this.value+=` "${this._escape(this._escape(n,'"'),")")}"`),this.value+=")",this}_escape(e,t){const n=new RegExp(Ga(t),"g");return e.replace(n,(s,r)=>e.charAt(r-1)!=="\\"?`\\${s}`:s)}}function p9(i){return cr(i)?!i.value:Array.isArray(i)?i.every(p9):!0}function cr(i){return i instanceof By?!0:i&&typeof i=="object"?typeof i.value=="string"&&(typeof i.isTrusted=="boolean"||typeof i.isTrusted=="object"||i.isTrusted===void 0)&&(typeof i.supportThemeIcons=="boolean"||i.supportThemeIcons===void 0):!1}function cT(i,e){return i===e?!0:!i||!e?!1:i.value===e.value&&i.isTrusted===e.isTrusted&&i.supportThemeIcons===e.supportThemeIcons&&i.supportHtml===e.supportHtml&&(i.baseUri===e.baseUri||!!i.baseUri&&!!e.baseUri&&u9(Y.from(i.baseUri),Y.from(e.baseUri)))}function m9(i){return i.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function b9(i,e){const t=i.match(/^`+/gm)?.reduce((s,r)=>s.length>r.length?s:r).length??0,n=t>=3?t+1:3;return[`${"`".repeat(n)}${e}`,i,`${"`".repeat(n)}`].join(`
`)}function pg(i){return i.replace(/"/g,"&quot;")}function Hb(i){return i&&i.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function _9(i){const e=[],t=i.split("|").map(s=>s.trim());i=t[0];const n=t[1];if(n){const s=/height=(\d+)/.exec(n),r=/width=(\d+)/.exec(n),o=s?s[1]:"",a=r?r[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(o));l&&e.push(`width="${a}"`),c&&e.push(`height="${o}"`)}return{href:i,dimensions:e}}const vl=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list",html:"text/html"}),w9={".aac":"audio/x-aac",".avi":"video/x-msvideo",".bmp":"image/bmp",".flv":"video/x-flv",".gif":"image/gif",".ico":"image/x-icon",".jpe":"image/jpg",".jpeg":"image/jpg",".jpg":"image/jpg",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".mid":"audio/midi",".midi":"audio/midi",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".mkv":"video/x-matroska",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4v":"video/mp4",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".opus":"audio/opus",".ogv":"video/ogg",".png":"image/png",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".spx":"audio/ogg",".svg":"image/svg+xml",".tga":"image/x-tga",".tif":"image/tiff",".tiff":"image/tiff",".wav":"audio/x-wav",".webm":"video/webm",".webp":"image/webp",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".woff":"application/font-woff"};function IQ(i){const e=My(i);return w9[e.toLowerCase()]}const v9=/^(.+)\/(.+?)(;.+)?$/;function TQ(i,e){const t=v9.exec(i);return t?`${t[1].toLowerCase()}/${t[2].toLowerCase()}${t[3]??""}`:e?void 0:i}const y9=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function AQ(i){return y9.test(i)}const DC=function(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);const i=new Uint8Array(16),e=[];for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return function(){crypto.getRandomValues(i),i[6]=i[6]&15|64,i[8]=i[8]&63|128;let n=0,s="";return s+=e[i[n++]],s+=e[i[n++]],s+=e[i[n++]],s+=e[i[n++]],s+="-",s+=e[i[n++]],s+=e[i[n++]],s+="-",s+=e[i[n++]],s+=e[i[n++]],s+="-",s+=e[i[n++]],s+=e[i[n++]],s+="-",s+=e[i[n++]],s+=e[i[n++]],s+=e[i[n++]],s+=e[i[n++]],s+=e[i[n++]],s+=e[i[n++]],s}}();function NQ(i){const e=i;return typeof e?.resolve=="function"&&typeof e?.isResolved=="function"}var IC;(function(i){i[i.ACTIVATE=1]="ACTIVATE",i[i.RESTORE=2]="RESTORE",i[i.PRESERVE=3]="PRESERVE"})(IC||(IC={}));var TC;(function(i){i[i.PICK=0]="PICK",i[i.EXCLUSIVE_ONLY=1]="EXCLUSIVE_ONLY"})(TC||(TC={}));var Jp;(function(i){i[i.API=0]="API",i[i.USER=1]="USER"})(Jp||(Jp={}));var AC;(function(i){i[i.Center=0]="Center",i[i.CenterIfOutsideViewport=1]="CenterIfOutsideViewport",i[i.NearTop=2]="NearTop",i[i.NearTopIfOutsideViewport=3]="NearTopIfOutsideViewport"})(AC||(AC={}));var NC;(function(i){i.PROGRAMMATIC="api",i.NAVIGATION="code.navigation",i.JUMP="code.jump"})(NC||(NC={}));function RQ(i,e,t){return e?.documentVersion===t?.documentVersion&&i.extUri.isEqual(e?.original,t?.original)&&i.extUri.isEqual(e?.modified,t?.modified)&&wi(e?.changes,t?.changes,(n,s)=>n[0]===s[0]&&n[1]===s[1]&&n[2]===s[2]&&n[3]===s[3])}function MQ(i){return i.scheme===ge.vscodeRemote?i.authority:void 0}function hT(i){if(!i)return;const e=i.indexOf("+");return e<0?i:i.substr(0,e)}const OQ="extensions.user.cache",FQ="extensions.builtin.cache",S9="undefined_publisher",PQ=["ui","workspace","web"],k9=["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"];var Uh;(function(i){i[i.System=0]="System",i[i.User=1]="User"})(Uh||(Uh={}));var en;(function(i){i.WIN32_X64="win32-x64",i.WIN32_ARM64="win32-arm64",i.LINUX_X64="linux-x64",i.LINUX_ARM64="linux-arm64",i.LINUX_ARMHF="linux-armhf",i.ALPINE_X64="alpine-x64",i.ALPINE_ARM64="alpine-arm64",i.DARWIN_X64="darwin-x64",i.DARWIN_ARM64="darwin-arm64",i.WEB="web",i.UNIVERSAL="universal",i.UNKNOWN="unknown",i.UNDEFINED="undefined"})(en||(en={}));class is{constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(typeof e>"u"||e===null)return typeof t>"u"||t===null;if(typeof t>"u"||t===null)return!1;if(typeof e=="string"||typeof t=="string"){const n=typeof e=="string"?e:e.value,s=typeof t=="string"?t:t.value;return Ia(n,s)}return e._lower===t._lower}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}class qu{get size(){return this._set.size}constructor(e){if(this._set=new Set,e)for(const t of e)this.add(t)}add(e){this._set.add(is.toKey(e))}delete(e){return this._set.delete(is.toKey(e))}has(e){return this._set.has(is.toKey(e))}}class C9{constructor(){this._map=new Map}clear(){this._map.clear()}delete(e){this._map.delete(is.toKey(e))}get(e){return this._map.get(is.toKey(e))}has(e){return this._map.has(is.toKey(e))}set(e,t){this._map.set(is.toKey(e),t)}values(){return this._map.values()}forEach(e){this._map.forEach(e)}[Symbol.iterator](){return this._map[Symbol.iterator]()}}class BQ extends Error{constructor(e,t,n){super(`Error in extension ${is.toKey(e)}: ${n??t.message}`,{cause:t}),this.name="ExtensionError",this.extension=e}}function WQ(i,e){if(e){const t=`onResolveRemoteAuthority:${hT(e)}`;return!!i.activationEvents?.includes(t)}return!1}function UQ(i){return i.map(e=>{const[t,n]=e.split("@");return{proposalName:t,version:n?parseInt(n):void 0}})}function HQ(i){return i.map(e=>e.split("@")[0])}class E9{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}}class x9{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===k.Period)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?vy(e,this._value,0,e.length,this._from,this._to):Lf(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class uT{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const n=this._value.charCodeAt(t);if(!(n===k.Slash||this._splitOnBackslash&&n===k.Backslash))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===k.Slash||this._splitOnBackslash&&t===k.Backslash)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?vy(e,this._value,0,e.length,this._from,this._to):Lf(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}var Ti;(function(i){i[i.Scheme=1]="Scheme",i[i.Authority=2]="Authority",i[i.Path=3]="Path",i[i.Query=4]="Query",i[i.Fragment=5]="Fragment"})(Ti||(Ti={}));class L9{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(Ti.Scheme),this._value.authority&&this._states.push(Ti.Authority),this._value.path&&(this._pathIterator=new uT(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(Ti.Path)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(Ti.Query),this._value.fragment&&this._states.push(Ti.Fragment)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===Ti.Path&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===Ti.Path&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===Ti.Scheme)return Hp(e,this._value.scheme);if(this._states[this._stateIdx]===Ti.Authority)return Hp(e,this._value.authority);if(this._states[this._stateIdx]===Ti.Path)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===Ti.Query)return n0(e,this._value.query);if(this._states[this._stateIdx]===Ti.Fragment)return n0(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===Ti.Scheme)return this._value.scheme;if(this._states[this._stateIdx]===Ti.Authority)return this._value.authority;if(this._states[this._stateIdx]===Ti.Path)return this._pathIterator.value();if(this._states[this._stateIdx]===Ti.Query)return this._value.query;if(this._states[this._stateIdx]===Ti.Fragment)return this._value.fragment;throw new Error}}class Mr{static{this.Val=Symbol("undefined_placeholder")}static wrap(e){return e===void 0?Mr.Val:e}static unwrap(e){return e===Mr.Val?void 0:e}}class mg{constructor(){this.height=1,this.value=void 0,this.key=void 0,this.left=void 0,this.mid=void 0,this.right=void 0}isEmpty(){return!this.left&&!this.mid&&!this.right&&this.value===void 0}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}}var ut;(function(i){i[i.Left=-1]="Left",i[i.Mid=0]="Mid",i[i.Right=1]="Right"})(ut||(ut={}));class ps{static forUris(e=()=>!1,t=()=>!1){return new ps(new L9(e,t))}static forPaths(e=!1){return new ps(new uT(void 0,!e))}static forStrings(){return new ps(new E9)}static forConfigKeys(){return new ps(new x9)}constructor(e){this._iter=e}clear(){this._root=void 0}fill(e,t){if(t){const n=t.slice(0);iC(n);for(const s of n)this.set(s,e)}else{const n=e.slice(0);iC(n);for(const s of n)this.set(s[0],s[1])}}set(e,t){const n=this._iter.reset(e);let s;this._root||(this._root=new mg,this._root.segment=n.value());const r=[];for(s=this._root;;){const a=n.cmp(s.segment);if(a>0)s.left||(s.left=new mg,s.left.segment=n.value()),r.push([ut.Left,s]),s=s.left;else if(a<0)s.right||(s.right=new mg,s.right.segment=n.value()),r.push([ut.Right,s]),s=s.right;else if(n.hasNext())n.next(),s.mid||(s.mid=new mg,s.mid.segment=n.value()),r.push([ut.Mid,s]),s=s.mid;else break}const o=Mr.unwrap(s.value);s.value=Mr.wrap(t),s.key=e;for(let a=r.length-1;a>=0;a--){const l=r[a][1];l.updateHeight();const c=l.balanceFactor();if(c<-1||c>1){const h=r[a][0],u=r[a+1][0];if(h===ut.Right&&u===ut.Right)r[a][1]=l.rotateLeft();else if(h===ut.Left&&u===ut.Left)r[a][1]=l.rotateRight();else if(h===ut.Right&&u===ut.Left)l.right=r[a+1][1]=r[a+1][1].rotateRight(),r[a][1]=l.rotateLeft();else if(h===ut.Left&&u===ut.Right)l.left=r[a+1][1]=r[a+1][1].rotateLeft(),r[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(r[a-1][0]){case ut.Left:r[a-1][1].left=r[a][1];break;case ut.Right:r[a-1][1].right=r[a][1];break;case ut.Mid:r[a-1][1].mid=r[a][1];break}else this._root=r[0][1]}}return o}get(e){return Mr.unwrap(this._getNode(e)?.value)}_getNode(e){const t=this._iter.reset(e);let n=this._root;for(;n;){const s=t.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){const t=this._getNode(e);return!(t?.value===void 0&&t?.mid===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const n=this._iter.reset(e),s=[];let r=this._root;for(;r;){const o=n.cmp(r.segment);if(o>0)s.push([ut.Left,r]),r=r.left;else if(o<0)s.push([ut.Right,r]),r=r.right;else if(n.hasNext())n.next(),s.push([ut.Mid,r]),r=r.mid;else break}if(r){if(t?(r.left=void 0,r.mid=void 0,r.right=void 0,r.height=1):(r.key=void 0,r.value=void 0),!r.mid&&!r.value)if(r.left&&r.right){const o=[[ut.Right,r]],a=this._min(r.right,o);if(a.key){r.key=a.key,r.value=a.value,r.segment=a.segment;const l=a.right;if(o.length>1){const[h,u]=o[o.length-1];switch(h){case ut.Left:u.left=l;break;case ut.Mid:Bp(!1);case ut.Right:Bp(!1)}}else r.right=l;const c=this._balanceByStack(o);if(s.length>0){const[h,u]=s[s.length-1];switch(h){case ut.Left:u.left=c;break;case ut.Mid:u.mid=c;break;case ut.Right:u.right=c;break}}else this._root=c}}else{const o=r.left??r.right;if(s.length>0){const[a,l]=s[s.length-1];switch(a){case ut.Left:l.left=o;break;case ut.Mid:l.mid=o;break;case ut.Right:l.right=o;break}}else this._root=o}this._root=this._balanceByStack(s)??this._root}}_min(e,t){for(;e.left;)t.push([ut.Left,e]),e=e.left;return e}_balanceByStack(e){for(let t=e.length-1;t>=0;t--){const n=e[t][1];n.updateHeight();const s=n.balanceFactor();if(s>1?(n.right.balanceFactor()>=0||(n.right=n.right.rotateRight()),e[t][1]=n.rotateLeft()):s<-1&&(n.left.balanceFactor()<=0||(n.left=n.left.rotateLeft()),e[t][1]=n.rotateRight()),t>0)switch(e[t-1][0]){case ut.Left:e[t-1][1].left=e[t][1];break;case ut.Right:e[t-1][1].right=e[t][1];break;case ut.Mid:e[t-1][1].mid=e[t][1];break}else return e[0][1]}}findSubstr(e){const t=this._iter.reset(e);let n=this._root,s;for(;n;){const r=t.cmp(n.segment);if(r>0)n=n.left;else if(r<0)n=n.right;else if(t.hasNext())t.next(),s=Mr.unwrap(n.value)||s,n=n.mid;else break}return n&&Mr.unwrap(n.value)||s}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const n=this._iter.reset(e);let s=this._root;for(;s;){const r=n.cmp(s.segment);if(r>0)s=s.left;else if(r<0)s=s.right;else if(n.hasNext())n.next(),s=s.mid;else return s.mid?this._entries(s.mid):t?Mr.unwrap(s.value):void 0}}hasElementOrSubtree(e){return this._findSuperstrOrElement(e,!0)!==void 0}forEach(e){for(const[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value!==void 0&&t.push([e.key,Mr.unwrap(e.value)]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}_isBalanced(){const e=t=>{if(!t)return!0;const n=t.balanceFactor();return n<-1||n>1?!1:e(t.left)&&e(t.right)};return e(this._root)}}var RC;(function(i){i[i.Unknown=0]="Unknown",i[i.File=1]="File",i[i.Directory=2]="Directory",i[i.SymbolicLink=64]="SymbolicLink"})(RC||(RC={}));var MC;(function(i){i[i.Readonly=1]="Readonly",i[i.Locked=2]="Locked"})(MC||(MC={}));var OC;(function(i){i[i.UPDATED=2]="UPDATED",i[i.ADDED=4]="ADDED",i[i.DELETED=8]="DELETED"})(OC||(OC={}));var fr;(function(i){i[i.None=0]="None",i[i.FileReadWrite=2]="FileReadWrite",i[i.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",i[i.FileReadStream=16]="FileReadStream",i[i.FileFolderCopy=8]="FileFolderCopy",i[i.PathCaseSensitive=1024]="PathCaseSensitive",i[i.Readonly=2048]="Readonly",i[i.Trash=4096]="Trash",i[i.FileWriteUnlock=8192]="FileWriteUnlock",i[i.FileAtomicRead=16384]="FileAtomicRead",i[i.FileAtomicWrite=32768]="FileAtomicWrite",i[i.FileAtomicDelete=65536]="FileAtomicDelete",i[i.FileClone=131072]="FileClone"})(fr||(fr={}));function dT(i){return!!(i.capabilities&fr.FileReadWrite)}function VQ(i){return!!(i.capabilities&fr.FileFolderCopy)}function zQ(i){return!!(i.capabilities&fr.FileClone)}function $Q(i){return!!(i.capabilities&fr.FileOpenReadWriteClose)}function qQ(i){return!!(i.capabilities&fr.FileReadStream)}function KQ(i){return dT(i)?!!(i.capabilities&fr.FileAtomicRead):!1}function GQ(i){return dT(i)?!!(i.capabilities&fr.FileAtomicWrite):!1}function jQ(i){return!!(i.capabilities&fr.FileAtomicDelete)}function YQ(i){return!!(i.capabilities&fr.Readonly)}var Dt;(function(i){i.FileExists="EntryExists",i.FileNotFound="EntryNotFound",i.FileNotADirectory="EntryNotADirectory",i.FileIsADirectory="EntryIsADirectory",i.FileExceedsStorageQuota="EntryExceedsStorageQuota",i.FileTooLarge="EntryTooLarge",i.FileWriteLocked="EntryWriteLocked",i.NoPermissions="NoPermissions",i.Unavailable="Unavailable",i.Unknown="Unknown"})(Dt||(Dt={}));class D1 extends Error{static create(e,t){const n=new D1(e.toString(),t);return I9(n,t),n}constructor(e,t){super(e),this.code=t}}function D9(i,e){return D1.create(i,e)}function XQ(i){return i||D9(d(1883,"Unknown Error"),Dt.Unknown)}function I9(i,e){return i.name=e?`${e} (FileSystemError)`:"FileSystemError",i}function T9(i){if(!i)return Dt.Unknown;if(i instanceof D1)return i.code;const e=/^(.+) \(FileSystemError\)$/.exec(i.name);if(!e)return Dt.Unknown;switch(e[1]){case Dt.FileExists:return Dt.FileExists;case Dt.FileIsADirectory:return Dt.FileIsADirectory;case Dt.FileNotADirectory:return Dt.FileNotADirectory;case Dt.FileNotFound:return Dt.FileNotFound;case Dt.FileTooLarge:return Dt.FileTooLarge;case Dt.FileWriteLocked:return Dt.FileWriteLocked;case Dt.NoPermissions:return Dt.NoPermissions;case Dt.Unavailable:return Dt.Unavailable}return Dt.Unknown}function A9(i){if(i instanceof Wy)return i.fileOperationResult;switch(T9(i)){case Dt.FileNotFound:return Ls.FILE_NOT_FOUND;case Dt.FileIsADirectory:return Ls.FILE_IS_DIRECTORY;case Dt.FileNotADirectory:return Ls.FILE_NOT_DIRECTORY;case Dt.FileWriteLocked:return Ls.FILE_WRITE_LOCKED;case Dt.NoPermissions:return Ls.FILE_PERMISSION_DENIED;case Dt.FileExists:return Ls.FILE_MOVE_CONFLICT;case Dt.FileTooLarge:return Ls.FILE_TOO_LARGE;default:return Ls.FILE_OTHER_ERROR}}var $n;(function(i){i[i.CREATE=0]="CREATE",i[i.DELETE=1]="DELETE",i[i.MOVE=2]="MOVE",i[i.COPY=3]="COPY",i[i.WRITE=4]="WRITE"})($n||($n={}));class QQ{constructor(e,t,n){this.resource=e,this.operation=t,this.target=n}isOperation(e){return this.operation===e}}var ua;(function(i){i[i.UPDATED=0]="UPDATED",i[i.ADDED=1]="ADDED",i[i.DELETED=2]="DELETED"})(ua||(ua={}));class hp{static{this.MIXED_CORRELATION=null}constructor(e,t){this.ignorePathCasing=t,this.correlationId=void 0,this.added=new Fi(()=>{const n=ps.forUris(()=>this.ignorePathCasing);return n.fill(this.rawAdded.map(s=>[s,!0])),n}),this.updated=new Fi(()=>{const n=ps.forUris(()=>this.ignorePathCasing);return n.fill(this.rawUpdated.map(s=>[s,!0])),n}),this.deleted=new Fi(()=>{const n=ps.forUris(()=>this.ignorePathCasing);return n.fill(this.rawDeleted.map(s=>[s,!0])),n}),this.rawAdded=[],this.rawUpdated=[],this.rawDeleted=[];for(const n of e){switch(n.type){case ua.ADDED:this.rawAdded.push(n.resource);break;case ua.UPDATED:this.rawUpdated.push(n.resource);break;case ua.DELETED:this.rawDeleted.push(n.resource);break}this.correlationId!==hp.MIXED_CORRELATION&&(typeof n.cId=="number"?this.correlationId===void 0?this.correlationId=n.cId:this.correlationId!==n.cId&&(this.correlationId=hp.MIXED_CORRELATION):this.correlationId!==void 0&&(this.correlationId=hp.MIXED_CORRELATION))}}contains(e,...t){return this.doContains(e,{includeChildren:!1},...t)}affects(e,...t){return this.doContains(e,{includeChildren:!0},...t)}doContains(e,t,...n){if(!e)return!1;const s=n.length>0;return!!((!s||n.includes(ua.ADDED))&&(this.added.value.get(e)||t.includeChildren&&this.added.value.findSuperstr(e))||(!s||n.includes(ua.UPDATED))&&(this.updated.value.get(e)||t.includeChildren&&this.updated.value.findSuperstr(e))||(!s||n.includes(ua.DELETED))&&(this.deleted.value.findSubstr(e)||t.includeChildren&&this.deleted.value.findSuperstr(e)))}gotAdded(){return this.rawAdded.length>0}gotDeleted(){return this.rawDeleted.length>0}gotUpdated(){return this.rawUpdated.length>0}correlates(e){return this.correlationId===e}hasCorrelation(){return typeof this.correlationId=="number"}}class Wy extends Error{constructor(e,t,n){super(e),this.fileOperationResult=t,this.options=n}}class ZQ extends Wy{constructor(e,t,n,s){super(e,t,s),this.fileOperationResult=t,this.size=n}}class JQ extends Wy{constructor(e,t,n){super(e,Ls.FILE_NOT_MODIFIED_SINCE,n),this.stat=t}}var Ls;(function(i){i[i.FILE_IS_DIRECTORY=0]="FILE_IS_DIRECTORY",i[i.FILE_NOT_FOUND=1]="FILE_NOT_FOUND",i[i.FILE_NOT_MODIFIED_SINCE=2]="FILE_NOT_MODIFIED_SINCE",i[i.FILE_MODIFIED_SINCE=3]="FILE_MODIFIED_SINCE",i[i.FILE_MOVE_CONFLICT=4]="FILE_MOVE_CONFLICT",i[i.FILE_WRITE_LOCKED=5]="FILE_WRITE_LOCKED",i[i.FILE_PERMISSION_DENIED=6]="FILE_PERMISSION_DENIED",i[i.FILE_TOO_LARGE=7]="FILE_TOO_LARGE",i[i.FILE_INVALID_PATH=8]="FILE_INVALID_PATH",i[i.FILE_NOT_DIRECTORY=9]="FILE_NOT_DIRECTORY",i[i.FILE_OTHER_ERROR=10]="FILE_OTHER_ERROR"})(Ls||(Ls={}));const eZ={OFF:"off",AFTER_DELAY:"afterDelay",ON_FOCUS_CHANGE:"onFocusChange",ON_WINDOW_CHANGE:"onWindowChange"},tZ={OFF:"off",ON_EXIT:"onExit",ON_EXIT_AND_WINDOW_CLOSE:"onExitAndWindowClose"},iZ="files.associations",nZ="files.exclude",sZ="files.readonlyInclude",rZ="files.readonlyExclude",oZ="files.readonlyFromPermissions";var FC;(function(i){i[i.FILE=0]="FILE",i[i.FOLDER=1]="FOLDER",i[i.ROOT_FOLDER=2]="ROOT_FOLDER"})(FC||(FC={}));const aZ="";function lZ(i){if(!(typeof i.size!="number"||typeof i.mtime!="number"))return i.mtime.toString(29)+i.size.toString(31)}async function cZ(i,e){if(!e.hasProvider(Y.from({scheme:i.scheme})))return new Promise(t=>{const n=e.onDidChangeFileSystemProviderRegistrations(s=>{s.scheme===i.scheme&&s.added&&(n.dispose(),t())})})}class Ai{static{this.KB=1024}static{this.MB=Ai.KB*Ai.KB}static{this.GB=Ai.MB*Ai.KB}static{this.TB=Ai.GB*Ai.KB}static formatSize(e){return el(e)||(e=0),e<Ai.KB?d(1884,"{0}B",e.toFixed(0)):e<Ai.MB?d(1885,"{0}KB",(e/Ai.KB).toFixed(2)):e<Ai.GB?d(1886,"{0}MB",(e/Ai.MB).toFixed(2)):e<Ai.TB?d(1887,"{0}GB",(e/Ai.GB).toFixed(2)):d(1888,"{0}TB",(e/Ai.TB).toFixed(2))}}function hZ(i){const e=typeof i=="string"||i?.scheme===ge.vscodeRemote;return typeof i!="string"&&i?.scheme===ge.file?1024*Ai.MB:e?10*Ai.MB:zs?50*Ai.MB:1024*Ai.MB}const fT=Symbol("MicrotaskDelay");function Vd(i){return!!i&&typeof i.then=="function"}function gT(i){const e=new _r,t=i(e.token);let n=!1;const s=new Promise((r,o)=>{const a=e.token.onCancellationRequested(()=>{n=!0,a.dispose(),o(new Zo)});Promise.resolve(t).then(l=>{a.dispose(),e.dispose(),n?lu(l)&&l.dispose():r(l)},l=>{a.dispose(),e.dispose(),o(l)})});return new class{cancel(){e.cancel(),e.dispose()}then(r,o){return s.then(r,o)}catch(r){return this.then(void 0,r)}finally(r){return s.finally(r)}}}function N9(i,e,t){return new Promise((n,s)=>{const r=e.onCancellationRequested(()=>{r.dispose(),n(t)});i.then(n,s).finally(()=>r.dispose())})}function uZ(i,e){return new Promise((t,n)=>{const s=e.onCancellationRequested(()=>{s.dispose(),n(new Zo)});i.then(t,n).finally(()=>s.dispose())})}function dZ(i){return new Promise((e,t)=>{i.then(e,t)})}function fZ(i){let e=-1;const t=i.map((s,r)=>s.then(o=>(e=r,o))),n=Promise.race(t);return n.cancel=()=>{i.forEach((s,r)=>{r!==e&&s.cancel&&s.cancel()})},n.finally(()=>{n.cancel()}),n}function gZ(i,e,t){let n;const s=setTimeout(()=>{n?.(void 0)},e);return Promise.race([i.finally(()=>clearTimeout(s)),new Promise(r=>n=r)])}function pZ(i){return new Promise((e,t)=>{const n=i();Vd(n)?n.then(e,t):e(n)})}function R9(){let i,e;return{promise:new Promise((n,s)=>{i=n,e=s}),resolve:i,reject:e}}let M9=class{constructor(){this.isDisposed=!1,this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){const t=()=>{if(this.queuedPromise=null,this.isDisposed)return;const n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(s=>{this.activePromise=null,t(s)},s=>{this.activePromise=null,n(s)})})}dispose(){this.isDisposed=!0}};class bZ{constructor(){this.current=Promise.resolve(null)}queue(e){return this.current=this.current.then(()=>e(),()=>e())}}class _Z{constructor(){this.promiseMap=new Map}queue(e,t){const s=(this.promiseMap.get(e)??Promise.resolve()).catch(()=>{}).then(t).finally(()=>{this.promiseMap.get(e)===s&&this.promiseMap.delete(e)});return this.promiseMap.set(e,s),s}keys(){return this.promiseMap.keys()}}const O9=(i,e)=>{let t=!0;const n=setTimeout(()=>{t=!1,e()},i);return{isTriggered:()=>t,dispose:()=>{clearTimeout(n),t=!1}}},F9=i=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,i())}),{isTriggered:()=>e,dispose:()=>{e=!1}}};class Df{constructor(e){this.defaultDelay=e,this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((s,r)=>{this.doResolve=s,this.doReject=r}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){const s=this.task;return this.task=null,s()}}));const n=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=t===fT?F9(n):O9(t,n),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new Zo),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}}class Uy{constructor(e){this.delayer=new Df(e),this.throttler=new M9}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}}class wZ{constructor(){this._isOpen=!1,this._promise=new Promise((e,t)=>{this._completePromise=e})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}function sc(i,e){return e?new Promise((t,n)=>{const s=setTimeout(()=>{r.dispose(),t()},i),r=e.onCancellationRequested(()=>{clearTimeout(s),r.dispose(),n(new Zo)})}):gT(t=>sc(i,t))}function em(i,e=0,t){const n=setTimeout(()=>{i(),t&&s.dispose()},e),s=fe(()=>{clearTimeout(n),t?.delete(s)});return t?.add(s),s}function P9(i,e=n=>!!n,t=null){let n=0;const s=i.length,r=()=>{if(n>=s)return Promise.resolve(t);const o=i[n++];return Promise.resolve(o()).then(l=>e(l)?Promise.resolve(l):r())};return r()}class B9{constructor(e){this._size=0,this._isDisposed=!1,this.maxDegreeOfParalellism=e,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new A}whenIdle(){return this.size>0?W.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(e){if(this._isDisposed)throw new Error("Object has been disposed");return this._size++,new Promise((t,n)=>{this.outstandingPromises.push({factory:e,c:t,e:n}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const e=this.outstandingPromises.shift();this.runningPromises++;const t=e.factory();t.then(e.c,e.e),t.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._isDisposed||(this.runningPromises--,--this._size===0&&this._onDrained.fire(),this.outstandingPromises.length>0&&this.consume())}clear(){if(this._isDisposed)throw new Error("Object has been disposed");this.outstandingPromises.length=0,this._size=this.runningPromises}dispose(){this._isDisposed=!0,this.outstandingPromises.length=0,this._size=0,this._onDrained.dispose()}}class pT extends B9{constructor(){super(1)}}class vZ{constructor(){this.queues=new Map,this.drainers=new Set,this.drainListeners=void 0,this.drainListenerCount=0}async whenDrained(){if(this.isDrained())return;const e=new Ya;return this.drainers.add(e),e.p}isDrained(){for(const[,e]of this.queues)if(e.size>0)return!1;return!0}queueSize(e,t=lt){const n=t.getComparisonKey(e);return this.queues.get(n)?.size??0}queueFor(e,t,n=lt){const s=n.getComparisonKey(e);let r=this.queues.get(s);if(!r){r=new pT;const o=this.drainListenerCount++,a=W.once(r.onDrained)(()=>{r?.dispose(),this.queues.delete(s),this.onDidQueueDrain(),this.drainListeners?.deleteAndDispose(o),this.drainListeners?.size===0&&(this.drainListeners.dispose(),this.drainListeners=void 0)});this.drainListeners||(this.drainListeners=new Cf),this.drainListeners.set(o,a),this.queues.set(s,r)}return r.queue(t)}onDidQueueDrain(){this.isDrained()&&this.releaseDrainers()}releaseDrainers(){for(const e of this.drainers)e.complete();this.drainers.clear()}dispose(){for(const[,e]of this.queues)e.dispose();this.queues.clear(),this.releaseDrainers(),this.drainListeners?.dispose()}}class W9{constructor(){this._runningTask=void 0,this._pendingTasks=[]}schedule(e){const t=new Ya;return this._pendingTasks.push({task:e,deferred:t,setUndefinedWhenCleared:!1}),this._runIfNotRunning(),t.p}scheduleSkipIfCleared(e){const t=new Ya;return this._pendingTasks.push({task:e,deferred:t,setUndefinedWhenCleared:!0}),this._runIfNotRunning(),t.p}_runIfNotRunning(){this._runningTask===void 0&&this._processQueue()}async _processQueue(){if(this._pendingTasks.length===0)return;const e=this._pendingTasks.shift();if(e){if(this._runningTask)throw new De;this._runningTask=e.task;try{const t=await e.task();e.deferred.complete(t)}catch(t){e.deferred.error(t)}finally{this._runningTask=void 0,this._processQueue()}}}clearPending(){const e=this._pendingTasks;this._pendingTasks=[];for(const t of e)t.setUndefinedWhenCleared?t.deferred.complete(void 0):t.deferred.error(new Zo)}}class tl{constructor(e,t){this._isDisposed=!1,this._token=void 0,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==void 0&&(clearTimeout(this._token),this._token=void 0)}cancelAndSet(e,t){if(this._isDisposed)throw new De("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=void 0,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new De("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===void 0&&(this._token=setTimeout(()=>{this._token=void 0,e()},t))}}class Hy{constructor(){this.disposable=void 0,this.isDisposed=!1}cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,t,n=globalThis){if(this.isDisposed)throw new De("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const s=n.setInterval(()=>{e()},t);this.disposable=fe(()=>{n.clearInterval(s),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}}class Bs{constructor(e,t){this.timeoutToken=void 0,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=void 0)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==void 0}flush(){this.isScheduled()&&(this.cancel(),this.doRun())}onTimeout(){this.timeoutToken=void 0,this.runner&&this.doRun()}doRun(){this.runner?.()}}class yZ extends Bs{constructor(e,t){super(e,t),this.units=[]}work(e){this.units.push(e),this.isScheduled()||this.schedule()}doRun(){const e=this.units;this.units=[],this.runner?.(e)}dispose(){this.units=[],super.dispose()}}let Hh,sd;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?sd=(i,e,t)=>{x1(()=>{if(n)return;const s=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,s-Date.now())}}))});let n=!1;return{dispose(){n||(n=!0)}}}:sd=(i,e,t)=>{const n=i.requestIdleCallback(e,typeof t=="number"?{timeout:t}:void 0);let s=!1;return{dispose(){s||(s=!0,i.cancelIdleCallback(n))}}},Hh=(i,e)=>sd(globalThis,i,e)})();class mT{constructor(e,t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(n){this._error=n}finally{this._didRun=!0}},this._handle=sd(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class U9 extends mT{constructor(e){super(globalThis,e)}}class SZ{isRunning(e){return typeof e=="number"?this._running?.taskId===e:!!this._running}get running(){return this._running?.promise}cancelRunning(){this._running?.cancel()}run(e,t,n){return this._running={taskId:e,cancel:()=>n?.(),promise:t},t.then(()=>this.doneRunning(e),()=>this.doneRunning(e)),t}doneRunning(e){this._running&&e===this._running.taskId&&(this._running=void 0,this.runQueued())}runQueued(){if(this._queued){const e=this._queued;this._queued=void 0,e.run().then(e.promiseResolve,e.promiseReject)}}queue(e){if(this._queued)this._queued.run=e;else{const{promise:t,resolve:n,reject:s}=R9();this._queued={run:e,promise:t,promiseResolve:n,promiseReject:s}}return this._queued.promise}hasQueued(){return!!this._queued}async join(){return this._queued?.promise??this._running?.promise}}class kZ{constructor(e,t=()=>Date.now()){this.interval=e,this.nowFn=t,this.lastIncrementTime=0,this.value=0}increment(){const e=this.nowFn();return e-this.lastIncrementTime>this.interval&&(this.lastIncrementTime=e,this.value=0),this.value++,this.value}}var yl;(function(i){i[i.Resolved=0]="Resolved",i[i.Rejected=1]="Rejected"})(yl||(yl={}));class Ya{get isRejected(){return this.outcome?.outcome===yl.Rejected}get isResolved(){return this.outcome?.outcome===yl.Resolved}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===yl.Resolved?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:yl.Resolved,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:yl.Rejected,value:e},t()})}settleWith(e){return e.then(t=>this.complete(t),t=>this.error(t))}cancel(){return this.error(new Zo)}}var sr;(function(i){async function e(n){let s;const r=await Promise.all(n.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return r}i.settled=e;function t(n){return new Promise(async(s,r)=>{try{await n(s,r)}catch(o){r(o)}})}i.withAsyncBody=t})(sr||(sr={}));class H9{get value(){return this._value}get error(){return this._error}get isResolved(){return this._isResolved}constructor(e){this._value=void 0,this._error=void 0,this._isResolved=!1,this.promise=e.then(t=>(this._value=t,this._isResolved=!0,t),t=>{throw this._error=t,this._isResolved=!0,t})}requireValue(){if(!this._isResolved)throw new De("Promise is not resolved yet");if(this._error)throw this._error;return this._value}}class CZ{constructor(e){this._compute=e,this._promise=new Fi(()=>new H9(this._compute()))}requireValue(){return this._promise.value.requireValue()}getPromise(){return this._promise.value.promise}get currentValue(){return this._promise.rawValue?.value}}var Ys;(function(i){i[i.Initial=0]="Initial",i[i.DoneOK=1]="DoneOK",i[i.DoneError=2]="DoneError"})(Ys||(Ys={}));class In{static fromArray(e){return new In(t=>{t.emitMany(e)})}static fromPromise(e){return new In(async t=>{t.emitMany(await e)})}static fromPromisesResolveOrder(e){return new In(async t=>{await Promise.all(e.map(async n=>t.emitOne(await n)))})}static merge(e){return new In(async t=>{await Promise.all(e.map(async n=>{for await(const s of n)t.emitOne(s)}))})}static{this.EMPTY=In.fromArray([])}constructor(e,t){this._state=Ys.Initial,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new A,queueMicrotask(async()=>{const n={emitOne:s=>this.emitOne(s),emitMany:s=>this.emitMany(s),reject:s=>this.reject(s)};try{await Promise.resolve(e(n)),this.resolve()}catch(s){this.reject(s)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===Ys.DoneError)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===Ys.DoneOK)return{done:!0,value:void 0};await W.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(e,t){return new In(async n=>{for await(const s of e)n.emitOne(t(s))})}map(e){return In.map(this,e)}static filter(e,t){return new In(async n=>{for await(const s of e)t(s)&&n.emitOne(s)})}filter(e){return In.filter(this,e)}static coalesce(e){return In.filter(e,t=>!!t)}coalesce(){return In.coalesce(this)}static async toPromise(e){const t=[];for await(const n of e)t.push(n);return t}toPromise(){return In.toPromise(this)}emitOne(e){this._state===Ys.Initial&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===Ys.Initial&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===Ys.Initial&&(this._state=Ys.DoneOK,this._onStateChanged.fire())}reject(e){this._state===Ys.Initial&&(this._state=Ys.DoneError,this._error=e,this._onStateChanged.fire())}}class V9 extends In{constructor(e,t){super(t),this._source=e}cancel(){this._source.cancel()}}function EZ(i){const e=new _r,t=i(e.token);return new V9(e,async n=>{const s=e.token.onCancellationRequested(()=>{s.dispose(),e.dispose(),n.reject(new Zo)});try{for await(const r of t){if(e.token.isCancellationRequested)return;n.emitOne(r)}s.dispose(),e.dispose()}catch(r){s.dispose(),e.dispose(),n.reject(r)}})}class xZ{constructor(e){this._deferred=new Ya,this._asyncIterable=new In(s=>{if(t){s.reject(t);return}return n&&s.emitMany(n),this._errorFn=r=>s.reject(r),this._emitOneFn=r=>s.emitOne(r),this._emitManyFn=r=>s.emitMany(r),this._deferred.p},e);let t,n;this._errorFn=s=>{t||(t=s)},this._emitOneFn=s=>{n||(n=[]),n.push(s)},this._emitManyFn=s=>{n?s.forEach(r=>n.push(r)):n=s.slice()}}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitOneFn(e)}emitMany(e){this._emitManyFn(e)}}const bg="**",PC="/",up="[/\\\\]",dp="[^/\\\\]",z9=/\//g;function BC(i,e){switch(i){case 0:return"";case 1:return`${dp}*?`;default:return`(?:${up}|${dp}+${up}${e?`|${up}${dp}+`:""})*?`}}function WC(i,e){if(!i)return[];const t=[];let n=!1,s=!1,r="";for(const o of i){switch(o){case e:if(!n&&!s){t.push(r),r="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":s=!0;break;case"]":s=!1;break}r+=o}return r&&t.push(r),t}function bT(i){if(!i)return"";let e="";const t=WC(i,PC);if(t.every(n=>n===bg))e=".*";else{let n=!1;t.forEach((s,r)=>{if(s===bg){if(n)return;e+=BC(2,r===t.length-1)}else{let o=!1,a="",l=!1,c="";for(const h of s){if(h!=="}"&&o){a+=h;continue}if(l&&(h!=="]"||!c)){let u;h==="-"?u=h:(h==="^"||h==="!")&&!c?u="^":h===PC?u="":u=Ga(h),c+=u;continue}switch(h){case"{":o=!0;continue;case"[":l=!0;continue;case"}":{const f=`(?:${WC(a,",").map(g=>bT(g)).join("|")})`;e+=f,o=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=dp;continue;case"*":e+=BC(1);continue;default:e+=Ga(h)}}r<t.length-1&&(t[r+1]!==bg||r+2<t.length)&&(e+=up)}n=s===bg})}return e}const $9=/^\*\*\/\*\.[\w\.-]+$/,q9=/^\*\*\/([\w\.-]+)\/?$/,K9=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,G9=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,j9=/^\*\*((\/[\w\.-]+)+)\/?$/,Y9=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,UC=new v1(1e4),b0=function(){return!1},hr=function(){return null},LZ=i=>i===b0||i===hr;function Vy(i,e){if(!i)return hr;let t;typeof i!="string"?t=i.pattern:t=i,t=t.trim();const n=`${t}_${!!e.trimForExclusions}`;let s=UC.get(n);if(s)return HC(s,i);let r;return $9.test(t)?s=X9(t.substr(4),t):(r=q9.exec(Vb(t,e)))?s=Q9(r[1],t):(e.trimForExclusions?G9:K9).test(t)?s=Z9(t,e):(r=j9.exec(Vb(t,e)))?s=VC(r[1].substr(1),t,!0):(r=Y9.exec(Vb(t,e)))?s=VC(r[1],t,!1):s=J9(t),UC.set(n,s),HC(s,i)}function HC(i,e){if(typeof e=="string")return i;const t=function(n,s){return m0(n,e.base,!rs)?i(xf(n.substr(e.base.length),Ms),s):null};return t.allBasenames=i.allBasenames,t.allPaths=i.allPaths,t.basenames=i.basenames,t.patterns=i.patterns,t}function Vb(i,e){return e.trimForExclusions&&i.endsWith("/**")?i.substr(0,i.length-2):i}function X9(i,e){return function(t,n){return typeof t=="string"&&t.endsWith(i)?e:null}}function Q9(i,e){const t=`/${i}`,n=`\\${i}`,s=function(o,a){return typeof o!="string"?null:a?a===i?e:null:o===i||o.endsWith(t)||o.endsWith(n)?e:null},r=[i];return s.basenames=r,s.patterns=[e],s.allBasenames=r,s}function Z9(i,e){const t=wT(i.slice(1,-1).split(",").map(a=>Vy(a,e)).filter(a=>a!==hr),i),n=t.length;if(!n)return hr;if(n===1)return t[0];const s=function(a,l){for(let c=0,h=t.length;c<h;c++)if(t[c](a,l))return i;return null},r=t.find(a=>!!a.allBasenames);r&&(s.allBasenames=r.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function VC(i,e,t){const n=Ms===Pe.sep,s=n?i:i.replace(z9,Ms),r=Ms+s,o=Pe.sep+i;let a;return t?a=function(l,c){return typeof l=="string"&&(l===s||l.endsWith(r)||!n&&(l===i||l.endsWith(o)))?e:null}:a=function(l,c){return typeof l=="string"&&(l===s||!n&&l===i)?e:null},a.allPaths=[(t?"*/":"./")+i],a}function J9(i){try{const e=new RegExp(`^${bT(i)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?i:null}}catch{return hr}}function eO(i,e,t){return!i||typeof e!="string"?!1:_T(i)(e,void 0,t)}function _T(i,e={}){if(!i)return b0;if(typeof i=="string"||tO(i)){const t=Vy(i,e);if(t===hr)return b0;const n=function(s,r){return!!t(s,r)};return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return iO(i,e)}function tO(i){const e=i;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function iO(i,e){const t=wT(Object.getOwnPropertyNames(i).map(a=>nO(a,i[a],e)).filter(a=>a!==hr)),n=t.length;if(!n)return hr;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];const a=function(h,u){let f;for(let g=0,p=t.length;g<p;g++){const m=t[g](h,u);if(typeof m=="string")return m;Vd(m)&&(f||(f=[]),f.push(m))}return f?(async()=>{for(const g of f){const p=await g;if(typeof p=="string")return p}return null})():null},l=t.find(h=>!!h.allBasenames);l&&(a.allBasenames=l.allBasenames);const c=t.reduce((h,u)=>u.allPaths?h.concat(u.allPaths):h,[]);return c.length&&(a.allPaths=c),a}const s=function(a,l,c){let h,u;for(let f=0,g=t.length;f<g;f++){const p=t[f];p.requiresSiblings&&c&&(l||(l=Ry(a)),h||(h=l.substr(0,l.length-My(a).length)));const m=p(a,l,h,c);if(typeof m=="string")return m;Vd(m)&&(u||(u=[]),u.push(m))}return u?(async()=>{for(const f of u){const g=await f;if(typeof g=="string")return g}return null})():null},r=t.find(a=>!!a.allBasenames);r&&(s.allBasenames=r.allBasenames);const o=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function nO(i,e,t){if(e===!1)return hr;const n=Vy(i,t);if(n===hr)return hr;if(typeof e=="boolean")return n;if(e){const s=e.when;if(typeof s=="string"){const r=(o,a,l,c)=>{if(!c||!n(o,a))return null;const h=s.replace("$(basename)",()=>l),u=c(h);return Vd(u)?u.then(f=>f?i:null):u?i:null};return r.requiresSiblings=!0,r}}return n}function wT(i,e){const t=i.filter(a=>!!a.basenames);if(t.length<2)return i;const n=t.reduce((a,l)=>{const c=l.basenames;return c?a.concat(c):a},[]);let s;if(e){s=[];for(let a=0,l=n.length;a<l;a++)s.push(e)}else s=t.reduce((a,l)=>{const c=l.patterns;return c?a.concat(c):a},[]);const r=function(a,l){if(typeof a!="string")return null;if(!l){let h;for(h=a.length;h>0;h--){const u=a.charCodeAt(h-1);if(u===k.Slash||u===k.Backslash)break}l=a.substr(h)}const c=n.indexOf(l);return c!==-1?s[c]:null};r.basenames=n,r.patterns=s,r.allBasenames=n;const o=i.filter(a=>!a.basenames);return o.push(r),o}var ae;(function(i){i[i.LParen=0]="LParen",i[i.RParen=1]="RParen",i[i.Neg=2]="Neg",i[i.Eq=3]="Eq",i[i.NotEq=4]="NotEq",i[i.Lt=5]="Lt",i[i.LtEq=6]="LtEq",i[i.Gt=7]="Gt",i[i.GtEq=8]="GtEq",i[i.RegexOp=9]="RegexOp",i[i.RegexStr=10]="RegexStr",i[i.True=11]="True",i[i.False=12]="False",i[i.In=13]="In",i[i.Not=14]="Not",i[i.And=15]="And",i[i.Or=16]="Or",i[i.Str=17]="Str",i[i.QuotedStr=18]="QuotedStr",i[i.Error=19]="Error",i[i.EOF=20]="EOF"})(ae||(ae={}));function zb(...i){switch(i.length){case 1:return d(1742,"Did you mean {0}?",i[0]);case 2:return d(1743,"Did you mean {0} or {1}?",i[0],i[1]);case 3:return d(1744,"Did you mean {0}, {1} or {2}?",i[0],i[1],i[2]);default:return}}const sO=d(1745,"Did you forget to open or close the quote?"),rO=d(1746,"Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'.");class wa{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case ae.LParen:return"(";case ae.RParen:return")";case ae.Neg:return"!";case ae.Eq:return e.isTripleEq?"===":"==";case ae.NotEq:return e.isTripleEq?"!==":"!=";case ae.Lt:return"<";case ae.LtEq:return"<=";case ae.Gt:return">=";case ae.GtEq:return">=";case ae.RegexOp:return"=~";case ae.RegexStr:return e.lexeme;case ae.True:return"true";case ae.False:return"false";case ae.In:return"in";case ae.Not:return"not";case ae.And:return"&&";case ae.Or:return"||";case ae.Str:return e.lexeme;case ae.QuotedStr:return e.lexeme;case ae.Error:return e.lexeme;case ae.EOF:return"EOF";default:throw ly(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}static{this._regexFlags=new Set(["i","g","s","m","y","u"].map(e=>e.charCodeAt(0)))}static{this._keywords=new Map([["not",ae.Not],["in",ae.In],["false",ae.False],["true",ae.True]])}get errors(){return this._errors}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case k.OpenParen:this._addToken(ae.LParen);break;case k.CloseParen:this._addToken(ae.RParen);break;case k.ExclamationMark:if(this._match(k.Equals)){const t=this._match(k.Equals);this._tokens.push({type:ae.NotEq,offset:this._start,isTripleEq:t})}else this._addToken(ae.Neg);break;case k.SingleQuote:this._quotedString();break;case k.Slash:this._regex();break;case k.Equals:if(this._match(k.Equals)){const t=this._match(k.Equals);this._tokens.push({type:ae.Eq,offset:this._start,isTripleEq:t})}else this._match(k.Tilde)?this._addToken(ae.RegexOp):this._error(zb("==","=~"));break;case k.LessThan:this._addToken(this._match(k.Equals)?ae.LtEq:ae.Lt);break;case k.GreaterThan:this._addToken(this._match(k.Equals)?ae.GtEq:ae.Gt);break;case k.Ampersand:this._match(k.Ampersand)?this._addToken(ae.And):this._error(zb("&&"));break;case k.Pipe:this._match(k.Pipe)?this._addToken(ae.Or):this._error(zb("||"));break;case k.Space:case k.CarriageReturn:case k.Tab:case k.LineFeed:case k.NoBreakSpace:break;default:this._string()}return this._start=this._current,this._addToken(ae.EOF),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?k.Null:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,n=this._input.substring(this._start,this._current),s={type:ae.Error,offset:this._start,lexeme:n};this._errors.push({offset:t,lexeme:n,additionalInfo:e}),this._tokens.push(s)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),n=wa._keywords.get(t);n?this._addToken(n):this._tokens.push({type:ae.Str,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==k.SingleQuote&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(sO);return}this._advance(),this._tokens.push({type:ae.QuotedStr,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,n=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(rO);return}const r=this._input.charCodeAt(e);if(t)t=!1;else if(r===k.Slash&&!n){e++;break}else r===k.OpenSquareBracket?n=!0:r===k.Backslash?t=!0:r===k.CloseSquareBracket&&(n=!1);e++}for(;e<this._input.length&&wa._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const s=this._input.substring(this._start,this._current);this._tokens.push({type:ae.RegexStr,lexeme:s,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}}const vi=new Map;vi.set("false",!1);vi.set("true",!0);vi.set("isMac",Me);vi.set("isLinux",rs);vi.set("isWindows",hi);vi.set("isWeb",zs);vi.set("isMacNative",Me&&!zs);vi.set("isEdge",JI);vi.set("isFirefox",IM);vi.set("isChrome",Ny);vi.set("isSafari",TM);function DZ(i,e){if(vi.get(i)!==void 0)throw Sf("contextkey.setConstant(k, v) invoked with already set constant `k`");vi.set(i,e)}const oO=Object.prototype.hasOwnProperty;var it;(function(i){i[i.False=0]="False",i[i.True=1]="True",i[i.Defined=2]="Defined",i[i.Not=3]="Not",i[i.Equals=4]="Equals",i[i.NotEquals=5]="NotEquals",i[i.And=6]="And",i[i.Regex=7]="Regex",i[i.NotRegex=8]="NotRegex",i[i.Or=9]="Or",i[i.In=10]="In",i[i.NotIn=11]="NotIn",i[i.Greater=12]="Greater",i[i.GreaterEquals=13]="GreaterEquals",i[i.Smaller=14]="Smaller",i[i.SmallerEquals=15]="SmallerEquals"})(it||(it={}));const aO={regexParsingWithErrorRecovery:!0},lO=d(1722,"Empty context key expression"),cO=d(1723,"Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),hO=d(1724,"'in' after 'not'."),zC=d(1725,"closing parenthesis ')'"),uO=d(1726,"Unexpected token"),dO=d(1727,"Did you forget to put && or || before the token?"),fO=d(1728,"Unexpected end of expression"),gO=d(1729,"Did you forget to put a context key?");let vT=class Ku{static{this._parseError=new Error}get lexingErrors(){return this._scanner.errors}get parsingErrors(){return this._parsingErrors}constructor(e=aO){this._config=e,this._scanner=new wa,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(e===""){this._parsingErrors.push({message:lO,offset:0,lexeme:"",additionalInfo:cO});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const t=this._expr();if(!this._isAtEnd()){const n=this._peek(),s=n.type===ae.Str?dO:void 0;throw this._parsingErrors.push({message:uO,offset:n.offset,lexeme:wa.getLexeme(n),additionalInfo:s}),Ku._parseError}return t}catch(t){if(t!==Ku._parseError)throw t;return}}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(ae.Or);){const t=this._and();e.push(t)}return e.length===1?e[0]:kt.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(ae.And);){const t=this._term();e.push(t)}return e.length===1?e[0]:kt.and(...e)}_term(){if(this._matchOne(ae.Neg)){const e=this._peek();switch(e.type){case ae.True:return this._advance(),an.INSTANCE;case ae.False:return this._advance(),En.INSTANCE;case ae.LParen:{this._advance();const t=this._expr();return this._consume(ae.RParen,zC),t?.negate()}case ae.Str:return this._advance(),yc.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case ae.True:return this._advance(),kt.true();case ae.False:return this._advance(),kt.false();case ae.LParen:{this._advance();const t=this._expr();return this._consume(ae.RParen,zC),t}case ae.Str:{const t=e.lexeme;if(this._advance(),this._matchOne(ae.RegexOp)){const s=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),s.type!==ae.RegexStr)throw this._errExpectedButGot("REGEX",s);const r=s.lexeme,o=r.lastIndexOf("/"),a=o===r.length-1?void 0:this._removeFlagsGY(r.substring(o+1));let l;try{l=new RegExp(r.substring(1,o),a)}catch{throw this._errExpectedButGot("REGEX",s)}return zd.create(t,l)}switch(s.type){case ae.RegexStr:case ae.Error:{const r=[s.lexeme];this._advance();let o=this._peek(),a=0;for(let f=0;f<s.lexeme.length;f++)s.lexeme.charCodeAt(f)===k.OpenParen?a++:s.lexeme.charCodeAt(f)===k.CloseParen&&a--;for(;!this._isAtEnd()&&o.type!==ae.And&&o.type!==ae.Or;){switch(o.type){case ae.LParen:a++;break;case ae.RParen:a--;break;case ae.RegexStr:case ae.QuotedStr:for(let f=0;f<o.lexeme.length;f++)o.lexeme.charCodeAt(f)===k.OpenParen?a++:s.lexeme.charCodeAt(f)===k.CloseParen&&a--}if(a<0)break;r.push(wa.getLexeme(o)),this._advance(),o=this._peek()}const l=r.join(""),c=l.lastIndexOf("/"),h=c===l.length-1?void 0:this._removeFlagsGY(l.substring(c+1));let u;try{u=new RegExp(l.substring(1,c),h)}catch{throw this._errExpectedButGot("REGEX",s)}return kt.regex(t,u)}case ae.QuotedStr:{const r=s.lexeme;this._advance();let o=null;if(!CI(r)){const a=r.indexOf("/"),l=r.lastIndexOf("/");if(a!==l&&a>=0){const c=r.slice(a+1,l),h=r[l+1]==="i"?"i":"";try{o=new RegExp(c,h)}catch{throw this._errExpectedButGot("REGEX",s)}}}if(o===null)throw this._errExpectedButGot("REGEX",s);return zd.create(t,o)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(ae.Not)){this._consume(ae.In,hO);const s=this._value();return kt.notIn(t,s)}switch(this._peek().type){case ae.Eq:{this._advance();const s=this._value();if(this._previous().type===ae.QuotedStr)return kt.equals(t,s);switch(s){case"true":return kt.has(t);case"false":return kt.not(t);default:return kt.equals(t,s)}}case ae.NotEq:{this._advance();const s=this._value();if(this._previous().type===ae.QuotedStr)return kt.notEquals(t,s);switch(s){case"true":return kt.not(t);case"false":return kt.has(t);default:return kt.notEquals(t,s)}}case ae.Lt:return this._advance(),Nf.create(t,this._value());case ae.LtEq:return this._advance(),Rf.create(t,this._value());case ae.Gt:return this._advance(),cu.create(t,this._value());case ae.GtEq:return this._advance(),Af.create(t,this._value());case ae.In:return this._advance(),kt.in(t,this._value());default:return kt.has(t)}}case ae.EOF:throw this._parsingErrors.push({message:fO,offset:e.offset,lexeme:"",additionalInfo:gO}),Ku._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){const e=this._peek();switch(e.type){case ae.Str:case ae.QuotedStr:return this._advance(),e.lexeme;case ae.True:return this._advance(),"true";case ae.False:return this._advance(),"false";case ae.In:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,n){const s=d(1730,`Expected: {0}
Received: '{1}'.`,e,wa.getLexeme(t)),r=t.offset,o=wa.getLexeme(t);return this._parsingErrors.push({message:s,offset:r,lexeme:o,additionalInfo:n}),Ku._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===ae.EOF}};class kt{static false(){return an.INSTANCE}static true(){return En.INSTANCE}static has(e){return vc.create(e)}static equals(e,t){return If.create(e,t)}static notEquals(e,t){return Tf.create(e,t)}static regex(e,t){return zd.create(e,t)}static in(e,t){return I1.create(e,t)}static notIn(e,t){return T1.create(e,t)}static not(e){return yc.create(e)}static and(...e){return va.create(e,null,!0)}static or(...e){return Pr.create(e,null,!0)}static greater(e,t){return cu.create(e,t)}static greaterEquals(e,t){return Af.create(e,t)}static smaller(e,t){return Nf.create(e,t)}static smallerEquals(e,t){return Rf.create(e,t)}static{this._parser=new vT({regexParsingWithErrorRecovery:!1})}static deserialize(e){return e==null?void 0:this._parser.parse(e)}}function IZ(i){const e=new vT({regexParsingWithErrorRecovery:!1});return i.map(t=>(e.parse(t),e.lexingErrors.length>0?e.lexingErrors.map(n=>({errorMessage:n.additionalInfo?d(1731,"Unexpected token. Hint: {0}",n.additionalInfo):d(1732,"Unexpected token."),offset:n.offset,length:n.lexeme.length})):e.parsingErrors.length>0?e.parsingErrors.map(n=>({errorMessage:n.additionalInfo?`${n.message}. ${n.additionalInfo}`:n.message,offset:n.offset,length:n.lexeme.length})):[]))}function pO(i,e){const t=i?i.substituteConstants():void 0,n=e?e.substituteConstants():void 0;return!t&&!n?!0:!t||!n?!1:t.equals(n)}function rd(i,e){return i.cmp(e)}class an{static{this.INSTANCE=new an}constructor(){this.type=it.False}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return En.INSTANCE}}class En{static{this.INSTANCE=new En}constructor(){this.type=it.True}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return an.INSTANCE}}class vc{static create(e,t=null){const n=vi.get(e);return typeof n=="boolean"?n?En.INSTANCE:an.INSTANCE:new vc(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=it.Defined}cmp(e){return e.type!==this.type?this.type-e.type:ST(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=vi.get(this.key);return typeof e=="boolean"?e?En.INSTANCE:an.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(e){return e.mapDefined(this.key)}negate(){return this.negated||(this.negated=yc.create(this.key,this)),this.negated}}class If{static create(e,t,n=null){if(typeof t=="boolean")return t?vc.create(e,n):yc.create(e,n);const s=vi.get(e);return typeof s=="boolean"?t===(s?"true":"false")?En.INSTANCE:an.INSTANCE:new If(e,t,n)}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=it.Equals}cmp(e){return e.type!==this.type?this.type-e.type:Sc(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=vi.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?En.INSTANCE:an.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(e){return e.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Tf.create(this.key,this.value,this)),this.negated}}class I1{static create(e,t){return new I1(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=it.In,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:Sc(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.includes(n):typeof n=="string"&&typeof t=="object"&&t!==null?oO.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(e){return e.mapIn(this.key,this.valueKey)}negate(){return this.negated||(this.negated=T1.create(this.key,this.valueKey)),this.negated}}class T1{static create(e,t){return new T1(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=it.NotIn,this._negated=I1.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}map(e){return e.mapNotIn(this.key,this.valueKey)}negate(){return this._negated}}class Tf{static create(e,t,n=null){if(typeof t=="boolean")return t?yc.create(e,n):vc.create(e,n);const s=vi.get(e);return typeof s=="boolean"?t===(s?"true":"false")?an.INSTANCE:En.INSTANCE:new Tf(e,t,n)}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=it.NotEquals}cmp(e){return e.type!==this.type?this.type-e.type:Sc(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=vi.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?an.INSTANCE:En.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(e){return e.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=If.create(this.key,this.value,this)),this.negated}}class yc{static create(e,t=null){const n=vi.get(e);return typeof n=="boolean"?n?an.INSTANCE:En.INSTANCE:new yc(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=it.Not}cmp(e){return e.type!==this.type?this.type-e.type:ST(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=vi.get(this.key);return typeof e=="boolean"?e?an.INSTANCE:En.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(e){return e.mapNot(this.key)}negate(){return this.negated||(this.negated=vc.create(this.key,this)),this.negated}}function A1(i,e){if(typeof i=="string"){const t=parseFloat(i);isNaN(t)||(i=t)}return typeof i=="string"||typeof i=="number"?e(i):an.INSTANCE}class cu{static create(e,t,n=null){return A1(t,s=>new cu(e,s,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=it.Greater}cmp(e){return e.type!==this.type?this.type-e.type:Sc(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreater(this.key,this.value)}negate(){return this.negated||(this.negated=Rf.create(this.key,this.value,this)),this.negated}}class Af{static create(e,t,n=null){return A1(t,s=>new Af(e,s,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=it.GreaterEquals}cmp(e){return e.type!==this.type?this.type-e.type:Sc(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreaterEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Nf.create(this.key,this.value,this)),this.negated}}class Nf{static create(e,t,n=null){return A1(t,s=>new Nf(e,s,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=it.Smaller}cmp(e){return e.type!==this.type?this.type-e.type:Sc(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmaller(this.key,this.value)}negate(){return this.negated||(this.negated=Af.create(this.key,this.value,this)),this.negated}}class Rf{static create(e,t,n=null){return A1(t,s=>new Rf(e,s,n))}constructor(e,t,n){this.key=e,this.value=t,this.negated=n,this.type=it.SmallerEquals}cmp(e){return e.type!==this.type?this.type-e.type:Sc(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmallerEquals(this.key,this.value)}negate(){return this.negated||(this.negated=cu.create(this.key,this.value,this)),this.negated}}class zd{static create(e,t){return new zd(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=it.Regex,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}map(e){return e.mapRegex(this.key,this.regexp)}negate(){return this.negated||(this.negated=tm.create(this)),this.negated}}class tm{static create(e){return new tm(e)}constructor(e){this._actual=e,this.type=it.NotRegex}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}map(e){return new tm(this._actual.map(e))}negate(){return this._actual}}function yT(i){let e=null;for(let t=0,n=i.length;t<n;t++){const s=i[t].substituteConstants();if(i[t]!==s&&e===null){e=[];for(let r=0;r<t;r++)e[r]=i[r]}e!==null&&(e[t]=s)}return e===null?i:e}class va{static create(e,t,n){return va._normalizeArr(e,t,n)}constructor(e,t){this.expr=e,this.negated=t,this.type=it.And}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const s=rd(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=yT(this.expr);return e===this.expr?this:va.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,n){const s=[];let r=!1;for(const o of e)if(o){if(o.type===it.True){r=!0;continue}if(o.type===it.False)return an.INSTANCE;if(o.type===it.And){s.push(...o.expr);continue}s.push(o)}if(s.length===0&&r)return En.INSTANCE;if(s.length!==0){if(s.length===1)return s[0];s.sort(rd);for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];for(;s.length>1;){const o=s[s.length-1];if(o.type!==it.Or)break;s.pop();const a=s.pop(),l=s.length===0,c=Pr.create(o.expr.map(h=>va.create([h,a],null,n)),null,l);c&&(s.push(c),s.sort(rd))}if(s.length===1)return s[0];if(n){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return an.INSTANCE;if(s.length===1)return s[0]}return new va(s,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}map(e){return new va(this.expr.map(t=>t.map(e)),null)}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=Pr.create(e,this,!0)}return this.negated}}class Pr{static create(e,t,n){return Pr._normalizeArr(e,t,n)}constructor(e,t){this.expr=e,this.negated=t,this.type=it.Or}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){const s=rd(this.expr[t],e.expr[t]);if(s!==0)return s}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=yT(this.expr);return e===this.expr?this:Pr.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let s=[],r=!1;if(e){for(let o=0,a=e.length;o<a;o++){const l=e[o];if(l){if(l.type===it.False){r=!0;continue}if(l.type===it.True)return En.INSTANCE;if(l.type===it.Or){s=s.concat(l.expr);continue}s.push(l)}}if(s.length===0&&r)return an.INSTANCE;s.sort(rd)}if(s.length!==0){if(s.length===1)return s[0];for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];if(n){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return En.INSTANCE;if(s.length===1)return s[0]}return new Pr(s,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}map(e){return new Pr(this.expr.map(t=>t.map(e)),null)}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),n=e.shift(),s=[];for(const r of qC(t))for(const o of qC(n))s.push(va.create([r,o],null,!1));e.unshift(Pr.create(s,null,!1))}this.negated=Pr.create(e,this,!0)}return this.negated}}class oe extends vc{static{this._info=[]}static all(){return oe._info.values()}constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?oe._info.push({...n,key:e}):n!==!0&&oe._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return If.create(this.key,e)}notEqualsTo(e){return Tf.create(this.key,e)}greater(e){return cu.create(this.key,e)}}function ST(i,e){return i<e?-1:i>e?1:0}function Sc(i,e,t,n){return i<t?-1:i>t?1:e<n?-1:e>n?1:0}function _0(i,e){if(i.type===it.False||e.type===it.True)return!0;if(i.type===it.Or)return e.type===it.Or?$C(i.expr,e.expr):!1;if(e.type===it.Or){for(const t of e.expr)if(_0(i,t))return!0;return!1}if(i.type===it.And){if(e.type===it.And)return $C(e.expr,i.expr);for(const t of i.expr)if(_0(t,e))return!0;return!1}return i.equals(e)}function $C(i,e){let t=0,n=0;for(;t<i.length&&n<e.length;){const s=i[t].cmp(e[n]);if(s<0)return!1;s===0&&t++,n++}return t===i.length}function qC(i){return i.type===it.Or?i.expr:[i]}class ti{constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}}const kT=[];var Xe;(function(i){i[i.Eager=0]="Eager",i[i.Delayed=1]="Delayed"})(Xe||(Xe={}));function st(i,e,t){e instanceof ti||(e=new ti(e,[],!!t)),kT.push([i,e])}function KC(){return kT}var or;(function(i){i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=e})(or||(or={}));const xt=be("instantiationService");function mO(i,e,t){e[or.DI_TARGET]===e?e[or.DI_DEPENDENCIES].push({id:i,index:t}):(e[or.DI_DEPENDENCIES]=[{id:i,index:t}],e[or.DI_TARGET]=e)}function be(i){if(or.serviceIds.has(i))return or.serviceIds.get(i);const e=function(t,n,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");mO(e,t,s)};return e.toString=()=>i,or.serviceIds.set(i,e),e}function TZ(i){return i}var Sh;(function(i){i[i.Null=0]="Null",i[i.PlainText=1]="PlainText"})(Sh||(Sh={}));var ht;(function(i){i[i.NotSet=-1]="NotSet",i[i.None=0]="None",i[i.Italic=1]="Italic",i[i.Bold=2]="Bold",i[i.Underline=4]="Underline",i[i.Strikethrough=8]="Strikethrough"})(ht||(ht={}));var Ws;(function(i){i[i.None=0]="None",i[i.DefaultForeground=1]="DefaultForeground",i[i.DefaultBackground=2]="DefaultBackground"})(Ws||(Ws={}));var Jn;(function(i){i[i.Other=0]="Other",i[i.Comment=1]="Comment",i[i.String=2]="String",i[i.RegEx=3]="RegEx"})(Jn||(Jn={}));var Ce;(function(i){i[i.LANGUAGEID_MASK=255]="LANGUAGEID_MASK",i[i.TOKEN_TYPE_MASK=768]="TOKEN_TYPE_MASK",i[i.BALANCED_BRACKETS_MASK=1024]="BALANCED_BRACKETS_MASK",i[i.FONT_STYLE_MASK=30720]="FONT_STYLE_MASK",i[i.FOREGROUND_MASK=16744448]="FOREGROUND_MASK",i[i.BACKGROUND_MASK=4278190080]="BACKGROUND_MASK",i[i.ITALIC_MASK=2048]="ITALIC_MASK",i[i.BOLD_MASK=4096]="BOLD_MASK",i[i.UNDERLINE_MASK=8192]="UNDERLINE_MASK",i[i.STRIKETHROUGH_MASK=16384]="STRIKETHROUGH_MASK",i[i.SEMANTIC_USE_ITALIC=1]="SEMANTIC_USE_ITALIC",i[i.SEMANTIC_USE_BOLD=2]="SEMANTIC_USE_BOLD",i[i.SEMANTIC_USE_UNDERLINE=4]="SEMANTIC_USE_UNDERLINE",i[i.SEMANTIC_USE_STRIKETHROUGH=8]="SEMANTIC_USE_STRIKETHROUGH",i[i.SEMANTIC_USE_FOREGROUND=16]="SEMANTIC_USE_FOREGROUND",i[i.SEMANTIC_USE_BACKGROUND=32]="SEMANTIC_USE_BACKGROUND",i[i.LANGUAGEID_OFFSET=0]="LANGUAGEID_OFFSET",i[i.TOKEN_TYPE_OFFSET=8]="TOKEN_TYPE_OFFSET",i[i.BALANCED_BRACKETS_OFFSET=10]="BALANCED_BRACKETS_OFFSET",i[i.FONT_STYLE_OFFSET=11]="FONT_STYLE_OFFSET",i[i.FOREGROUND_OFFSET=15]="FOREGROUND_OFFSET",i[i.BACKGROUND_OFFSET=24]="BACKGROUND_OFFSET"})(Ce||(Ce={}));class er{static getLanguageId(e){return(e&Ce.LANGUAGEID_MASK)>>>Ce.LANGUAGEID_OFFSET}static getTokenType(e){return(e&Ce.TOKEN_TYPE_MASK)>>>Ce.TOKEN_TYPE_OFFSET}static containsBalancedBrackets(e){return(e&Ce.BALANCED_BRACKETS_MASK)!==0}static getFontStyle(e){return(e&Ce.FONT_STYLE_MASK)>>>Ce.FONT_STYLE_OFFSET}static getForeground(e){return(e&Ce.FOREGROUND_MASK)>>>Ce.FOREGROUND_OFFSET}static getBackground(e){return(e&Ce.BACKGROUND_MASK)>>>Ce.BACKGROUND_OFFSET}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e);const s=this.getFontStyle(e);return s&ht.Italic&&(n+=" mtki"),s&ht.Bold&&(n+=" mtkb"),s&ht.Underline&&(n+=" mtku"),s&ht.Strikethrough&&(n+=" mtks"),n}static getInlineStyleFromMetadata(e,t){const n=this.getForeground(e),s=this.getFontStyle(e);let r=`color: ${t[n]};`;s&ht.Italic&&(r+="font-style: italic;"),s&ht.Bold&&(r+="font-weight: bold;");let o="";return s&ht.Underline&&(o+=" underline"),s&ht.Strikethrough&&(o+=" line-through"),o&&(r+=`text-decoration:${o};`),r}static getPresentationFromMetadata(e){const t=this.getForeground(e),n=this.getFontStyle(e);return{foreground:t,italic:!!(n&ht.Italic),bold:!!(n&ht.Bold),underline:!!(n&ht.Underline),strikethrough:!!(n&ht.Strikethrough)}}}function da(i){if(!i||typeof i!="object"||i instanceof RegExp)return i;const e=Array.isArray(i)?[]:{};return Object.entries(i).forEach(([t,n])=>{e[t]=n&&typeof n=="object"?da(n):n}),e}function bO(i){if(!i||typeof i!="object")return i;const e=[i];for(;e.length>0;){const t=e.shift();for(const n in t)if(CT.call(t,n)){const s=t[n];typeof s=="object"&&!Object.isFrozen(s)&&!GR(s)&&e.push(s)}}return i}const CT=Object.prototype.hasOwnProperty;function zy(i,e){return w0(i,e,new Set)}function w0(i,e,t){if(wn(i))return i;const n=e(i);if(typeof n<"u")return n;if(Array.isArray(i)){const s=[];for(const r of i)s.push(w0(r,e,t));return s}if(xi(i)){if(t.has(i))throw new Error("Cannot clone recursive data-structure");t.add(i);const s={};for(const r in i)CT.call(i,r)&&(s[r]=w0(i[r],e,t));return t.delete(i),s}return i}function _O(i,e,t=!0){return xi(i)?(xi(e)&&Object.keys(e).forEach(n=>{n in i?t&&(xi(i[n])&&xi(e[n])?_O(i[n],e[n],t):i[n]=e[n]):i[n]=e[n]}),i):e}function Wi(i,e){if(i===e)return!0;if(i==null||e===null||e===void 0||typeof i!=typeof e||typeof i!="object"||Array.isArray(i)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(i)){if(i.length!==e.length)return!1;for(t=0;t<i.length;t++)if(!Wi(i[t],e[t]))return!1}else{const s=[];for(n in i)s.push(n);s.sort();const r=[];for(n in e)r.push(n);if(r.sort(),!Wi(s,r))return!1;for(t=0;t<s.length;t++)if(!Wi(i[s[t]],e[s[t]]))return!1}return!0}function AZ(i){const e=new Set;return JSON.stringify(i,(t,n)=>{if(xi(n)||Array.isArray(n)){if(e.has(n))return"[Circular]";e.add(n)}return typeof n=="bigint"?`[BigInt ${n.toString()}]`:n})}function GC(i,e){const t=Object.create(null);return!i||!e||Object.keys(e).forEach(s=>{const r=i[s],o=e[s];Wi(r,o)||(t[s]=o)}),t}function NZ(i,e){const t=Object.create(null);for(const[n,s]of Object.entries(i))e(n,s)&&(t[n]=s);return t}function RZ(i,e){const t={};for(const[n,s]of Object.entries(i))t[n]=e(s,n);return t}var $d;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full"})($d||($d={}));var v0;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=3]="Right"})(v0||(v0={}));var od;(function(i){i[i.Inline=1]="Inline",i[i.Gutter=2]="Gutter"})(od||(od={}));var jC;(function(i){i[i.Normal=1]="Normal",i[i.Underlined=2]="Underlined"})(jC||(jC={}));var YC;(function(i){i[i.Both=0]="Both",i[i.Right=1]="Right",i[i.Left=2]="Left",i[i.None=3]="None"})(YC||(YC={}));var _n;(function(i){i[i.TextDefined=0]="TextDefined",i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(_n||(_n={}));var Vo;(function(i){i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(Vo||(Vo={}));var ds;(function(i){i[i.LF=0]="LF",i[i.CRLF=1]="CRLF"})(ds||(ds={}));class $b{get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this._textModelResolvedOptionsBrand=void 0,this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&Wi(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}}class im{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}var ms;(function(i){i[i.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",i[i.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",i[i.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",i[i.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(ms||(ms={}));function wO(i){return i&&typeof i.read=="function"}function MZ(i){return!!(i&&i.uri)}var XC;(function(i){i[i.Left=0]="Left",i[i.Right=1]="Right",i[i.None=2]="None",i[i.LeftOfInjectedText=3]="LeftOfInjectedText",i[i.RightOfInjectedText=4]="RightOfInjectedText"})(XC||(XC={}));var QC;(function(i){i[i.FIRST_LINE_DETECTION_LENGTH_LIMIT=1e3]="FIRST_LINE_DETECTION_LENGTH_LIMIT"})(QC||(QC={}));class qb{constructor(e,t,n,s,r,o){this.identifier=e,this.range=t,this.text=n,this.forceMoveMarkers=s,this.isAutoWhitespaceEdit=r,this._isTracked=o}}class vO{constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}}class yO{constructor(e,t,n){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=n}}function OZ(i){return!i.isTooLargeForSyncing()&&!i.isForSimpleWidget}function Kb(i,e){return e&&(i.stack||i.stacktrace)?d(105,"{0}: {1}",JC(i),ZC(i.stack)||ZC(i.stacktrace)):JC(i)}function ZC(i){return Array.isArray(i)?i.join(`
`):i}function JC(i){return i.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${i.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof i.code=="string"&&typeof i.errno=="number"&&typeof i.syscall=="string"?d(106,"A system error occurred ({0})",i.message):i.message||d(107,"An unknown error occurred. Please consult the log for more details.")}function ET(i=null,e=!1){if(!i)return d(107,"An unknown error occurred. Please consult the log for more details.");if(Array.isArray(i)){const t=ru(i),n=ET(t[0],e);return t.length>1?d(108,"{0} ({1} errors in total)",n,t.length):n}if(Bi(i))return i;if(i.detail){const t=i.detail;if(t.error)return Kb(t.error,e);if(t.exception)return Kb(t.exception,e)}return i.stack?Kb(i,e):i.message?i.message:d(107,"An unknown error occurred. Please consult the log for more details.")}function FZ(i){const e=i;return e instanceof Error&&Array.isArray(e.actions)}function PZ(i,e){let t;return typeof i=="string"?t=new Error(i):t=i,t.actions=e,t}function rc(i){return N1(i,0)}function N1(i,e){switch(typeof i){case"object":return i===null?Oo(349,e):Array.isArray(i)?kO(i,e):CO(i,e);case"string":return $y(i,e);case"boolean":return SO(i,e);case"number":return Oo(i,e);case"undefined":return Oo(937,e);default:return Oo(617,e)}}function Oo(i,e){return(e<<5)-e+i|0}function SO(i,e){return Oo(i?433:863,e)}function $y(i,e){e=Oo(149417,e);for(let t=0,n=i.length;t<n;t++)e=Oo(i.charCodeAt(t),e);return e}function kO(i,e){return e=Oo(104579,e),i.reduce((t,n)=>N1(n,t),e)}function CO(i,e){return e=Oo(181387,e),Object.keys(i).sort().reduce((t,n)=>(t=$y(n,t),N1(i[n],t)),e)}var Cs;(function(i){i[i.BLOCK_SIZE=64]="BLOCK_SIZE",i[i.UNICODE_REPLACEMENT=65533]="UNICODE_REPLACEMENT"})(Cs||(Cs={}));function Gb(i,e,t=32){const n=t-e,s=~((1<<n)-1);return(i<<e|(s&i)>>>n)>>>0}function yu(i,e=32){return i instanceof ArrayBuffer?f7(ii.wrap(new Uint8Array(i))):(i>>>0).toString(16).padStart(e/4,"0")}class qy{static{this._bigBlock32=new DataView(new ArrayBuffer(320))}constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(Cs.BLOCK_SIZE+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const n=this._buff;let s=this._buffLen,r=this._leftoverHighSurrogate,o,a;for(r!==0?(o=r,a=-1,r=0):(o=e.charCodeAt(0),a=0);;){let l=o;if(hs(o))if(a+1<t){const c=e.charCodeAt(a+1);Bd(c)?(a++,l=yy(o,c)):l=Cs.UNICODE_REPLACEMENT}else{r=o;break}else Bd(o)&&(l=Cs.UNICODE_REPLACEMENT);if(s=this._push(n,s,l),a++,a<t)o=e.charCodeAt(a);else break}this._buffLen=s,this._leftoverHighSurrogate=r}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=Cs.BLOCK_SIZE&&(this._step(),t-=Cs.BLOCK_SIZE,this._totalLen+=Cs.BLOCK_SIZE,e[0]=e[Cs.BLOCK_SIZE+0],e[1]=e[Cs.BLOCK_SIZE+1],e[2]=e[Cs.BLOCK_SIZE+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,Cs.UNICODE_REPLACEMENT)),this._totalLen+=this._buffLen,this._wrapUp()),yu(this._h0)+yu(this._h1)+yu(this._h2)+yu(this._h3)+yu(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,this._buff.subarray(this._buffLen).fill(0),this._buffLen>56&&(this._step(),this._buff.fill(0));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=qy._bigBlock32,t=this._buffDV;for(let u=0;u<64;u+=4)e.setUint32(u,t.getUint32(u,!1),!1);for(let u=64;u<320;u+=4)e.setUint32(u,Gb(e.getUint32(u-12,!1)^e.getUint32(u-32,!1)^e.getUint32(u-56,!1)^e.getUint32(u-64,!1),1),!1);let n=this._h0,s=this._h1,r=this._h2,o=this._h3,a=this._h4,l,c,h;for(let u=0;u<80;u++)u<20?(l=s&r|~s&o,c=1518500249):u<40?(l=s^r^o,c=1859775393):u<60?(l=s&r|s&o|r&o,c=2400959708):(l=s^r^o,c=3395469782),h=Gb(n,5)+l+a+c+e.getUint32(u*4,!1)&4294967295,a=o,o=r,r=Gb(s,30),s=n,n=h;this._h0=this._h0+n&4294967295,this._h1=this._h1+s&4294967295,this._h2=this._h2+r&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+a&4294967295}}function BZ(i){return el(i)}var Fe;(function(i){i[i.Off=0]="Off",i[i.Trace=1]="Trace",i[i.Debug=2]="Debug",i[i.Info=3]="Info",i[i.Warning=4]="Warning",i[i.Error=5]="Error"})(Fe||(Fe={}));const Ky=Fe.Info;function EO(i,e){return i!==Fe.Off&&i<=e}function WZ(i,e,t){switch(e){case Fe.Trace:i.trace(t);break;case Fe.Debug:i.debug(t);break;case Fe.Info:i.info(t);break;case Fe.Warning:i.warn(t);break;case Fe.Error:i.error(t);break;case Fe.Off:break;default:throw new Error(`Invalid log level ${e}`)}}function Uc(i,e=!1){let t="";for(let n=0;n<i.length;n++){let s=i[n];if(s instanceof Error&&(s=ET(s,e)),typeof s=="object")try{s=JSON.stringify(s)}catch{}t+=(n>0?" ":"")+s}return t}class Gy extends ${constructor(){super(...arguments),this.level=Ky,this._onDidChangeLogLevel=this._register(new A),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return EO(this.level,e)}canLog(e){return this._store.isDisposed?!1:this.checkLogLevel(e)}}class UZ extends Gy{constructor(e){super(),this.logAlways=e}checkLogLevel(e){return this.logAlways||super.checkLogLevel(e)}trace(e,...t){this.canLog(Fe.Trace)&&this.log(Fe.Trace,Uc([e,...t],!0))}debug(e,...t){this.canLog(Fe.Debug)&&this.log(Fe.Debug,Uc([e,...t]))}info(e,...t){this.canLog(Fe.Info)&&this.log(Fe.Info,Uc([e,...t]))}warn(e,...t){this.canLog(Fe.Warning)&&this.log(Fe.Warning,Uc([e,...t]))}error(e,...t){if(this.canLog(Fe.Error))if(e instanceof Error){const n=Array.prototype.slice.call(arguments);n[0]=e.stack,this.log(Fe.Error,Uc(n))}else this.log(Fe.Error,Uc([e,...t]))}flush(){}}let xO=class extends Gy{constructor(e=Ky,t=!0){super(),this.useColors=t,this.setLevel(e)}trace(e,...t){this.canLog(Fe.Trace)&&(this.useColors?console.log("%cTRACE","color: #888",e,...t):console.log(e,...t))}debug(e,...t){this.canLog(Fe.Debug)&&(this.useColors?console.log("%cDEBUG","background: #eee; color: #888",e,...t):console.log(e,...t))}info(e,...t){this.canLog(Fe.Info)&&(this.useColors?console.log("%c INFO","color: #33f",e,...t):console.log(e,...t))}warn(e,...t){this.canLog(Fe.Warning)&&(this.useColors?console.warn("%c WARN","color: #993",e,...t):console.log(e,...t))}error(e,...t){this.canLog(Fe.Error)&&(this.useColors?console.error("%c  ERR","color: #f33",e,...t):console.error(e,...t))}flush(){}};class LO extends Gy{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const n of this.loggers)n.trace(e,...t)}debug(e,...t){for(const n of this.loggers)n.debug(e,...t)}info(e,...t){for(const n of this.loggers)n.info(e,...t)}warn(e,...t){for(const n of this.loggers)n.warn(e,...t)}error(e,...t){for(const n of this.loggers)n.error(e,...t)}flush(){for(const e of this.loggers)e.flush()}dispose(){for(const e of this.loggers)e.dispose();super.dispose()}}class VZ extends ${constructor(e,t,n){if(super(),this.logLevel=e,this.logsHome=t,this._loggers=new oi,this._onDidChangeLoggers=this._register(new A),this.onDidChangeLoggers=this._onDidChangeLoggers.event,this._onDidChangeLogLevel=this._register(new A),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event,this._onDidChangeVisibility=this._register(new A),this.onDidChangeVisibility=this._onDidChangeVisibility.event,n)for(const s of n)this._loggers.set(s.resource,{logger:void 0,info:s})}getLoggerEntry(e){return Bi(e)?[...this._loggers.values()].find(t=>t.info.id===e):this._loggers.get(e)}getLogger(e){return this.getLoggerEntry(e)?.logger}createLogger(e,t){const n=this.toResource(e),s=Bi(e)?e:t?.id??rc(n.toString()).toString(16);let r=this._loggers.get(n)?.logger;const o=t?.logLevel==="always"?Fe.Trace:t?.logLevel;r||(r=this.doCreateLogger(n,o??this.getLogLevel(n)??this.logLevel,{...t,id:s}));const a={logger:r,info:{resource:n,id:s,logLevel:o,name:t?.name,hidden:t?.hidden,group:t?.group,extensionId:t?.extensionId,when:t?.when}};return this.registerLogger(a.info),this._loggers.set(n,a),r}toResource(e){return Bi(e)?zn(this.logsHome,`${e}.log`):e}setLogLevel(e,t){if(Y.isUri(e)){const n=e,s=t,r=this._loggers.get(n);r&&s!==r.info.logLevel&&(r.info.logLevel=s===this.logLevel?void 0:s,r.logger?.setLevel(s),this._loggers.set(r.info.resource,r),this._onDidChangeLogLevel.fire([n,s]))}else{this.logLevel=e;for(const[n,s]of this._loggers.entries())this._loggers.get(n)?.info.logLevel===void 0&&s.logger?.setLevel(this.logLevel);this._onDidChangeLogLevel.fire(this.logLevel)}}setVisibility(e,t){const n=this.getLoggerEntry(e);n&&t!==!n.info.hidden&&(n.info.hidden=!t,this._loggers.set(n.info.resource,n),this._onDidChangeVisibility.fire([n.info.resource,t]))}getLogLevel(e){let t;return e&&(t=this._loggers.get(e)?.info.logLevel),t??this.logLevel}registerLogger(e){const t=this._loggers.get(e.resource);t?t.info.hidden!==e.hidden&&this.setVisibility(e.resource,!e.hidden):(this._loggers.set(e.resource,{info:e,logger:void 0}),this._onDidChangeLoggers.fire({added:[e],removed:[]}))}deregisterLogger(e){const t=this.toResource(e),n=this._loggers.get(t);n&&(n.logger&&n.logger.dispose(),this._loggers.delete(t),this._onDidChangeLoggers.fire({added:[],removed:[n.info]}))}*getRegisteredLoggers(){for(const e of this._loggers.values())yield e.info}getRegisteredLogger(e){return this._loggers.get(e)?.info}dispose(){this._loggers.forEach(e=>e.logger?.dispose()),this._loggers.clear(),super.dispose()}}class DO{constructor(){this.onDidChangeLogLevel=new A().event}setLevel(e){}getLevel(){return Fe.Info}trace(e,...t){}debug(e,...t){}info(e,...t){}warn(e,...t){}error(e,...t){}critical(e,...t){}dispose(){}flush(){}}class IO extends DO{}function zZ(i){if(i.verbose)return Fe.Trace;if(typeof i.logLevel=="string"){const e=AO(i.logLevel.toLowerCase());if(e!==void 0)return e}return Ky}function TO(i){switch(i){case Fe.Trace:return"trace";case Fe.Debug:return"debug";case Fe.Info:return"info";case Fe.Warning:return"warn";case Fe.Error:return"error";case Fe.Off:return"off"}}function $Z(i){switch(i){case Fe.Trace:return{original:"Trace",value:d(1928,"Trace")};case Fe.Debug:return{original:"Debug",value:d(1929,"Debug")};case Fe.Info:return{original:"Info",value:d(1930,"Info")};case Fe.Warning:return{original:"Warning",value:d(1931,"Warning")};case Fe.Error:return{original:"Error",value:d(1932,"Error")};case Fe.Off:return{original:"Off",value:d(1933,"Off")}}}function AO(i){switch(i){case"trace":return Fe.Trace;case"debug":return Fe.Debug;case"info":return Fe.Info;case"warn":return Fe.Warning;case"error":return Fe.Error;case"critical":return Fe.Error;case"off":return Fe.Off}}const qZ=new oe("logLevel",TO(Fe.Info));var Nt;(function(i){i[i.Auto=1]="Auto",i[i.Hidden=2]="Hidden",i[i.Visible=3]="Visible"})(Nt||(Nt={}));class nm{constructor(e,t,n,s,r,o,a){this._forceIntegerValues=e,this._scrollStateBrand=void 0,this._forceIntegerValues&&(t=t|0,n=n|0,s=s|0,r=r|0,o=o|0,a=a|0),this.rawScrollLeft=s,this.rawScrollTop=a,t<0&&(t=0),s+t>n&&(s=n-t),s<0&&(s=0),r<0&&(r=0),a+r>o&&(a=o-r),a<0&&(a=0),this.width=t,this.scrollWidth=n,this.scrollLeft=s,this.height=r,this.scrollHeight=o,this.scrollTop=a}equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new nm(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new nm(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){const n=this.width!==e.width,s=this.scrollWidth!==e.scrollWidth,r=this.scrollLeft!==e.scrollLeft,o=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:s,scrollLeftChanged:r,heightChanged:o,scrollHeightChanged:a,scrollTopChanged:l}}}class R1 extends ${constructor(e){super(),this._scrollableBrand=void 0,this._onScroll=this._register(new A),this.onScroll=this._onScroll.event,this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new nm(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){const n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){const t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};const n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let s;t?s=new qd(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):s=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=s}else{const n=this._state.withScrollPosition(e);this._smoothScrolling=qd.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;const e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){const n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}}class e2{constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}}function jb(i,e){const t=e-i;return function(n){return i+t*MO(n)}}function NO(i,e,t){return function(n){return n<t?i(n/t):e((n-t)/(1-t))}}class qd{constructor(e,t,n,s){this.from=e,this.to=t,this.duration=s,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let r,o;return e<t?(r=e+.75*n,o=t-.75*n):(r=e-.75*n,o=t+.75*n),NO(jb(e,r),jb(o,t),.33)}return jb(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){const t=(e-this.startTime)/this.duration;if(t<1){const n=this.scrollLeft(t),s=this.scrollTop(t);return new e2(n,s,!1)}return new e2(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return qd.start(e,t,n)}static start(e,t,n){n=n+10;const s=Date.now()-10;return new qd(e,t,s,n)}}function RO(i){return Math.pow(i,3)}function MO(i){return 1-RO(1-i)}const Oi={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},xT="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function OO(i=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of xT)i.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const LT=OO();function DT(i){let e=LT;if(i&&i instanceof RegExp)if(i.global)e=i;else{let t="g";i.ignoreCase&&(t+="i"),i.multiline&&(t+="m"),i.unicode&&(t+="u"),e=new RegExp(i.source,t)}return e.lastIndex=0,e}const IT=new sn;IT.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function Kd(i,e,t,n,s){if(e=DT(e),s||(s=Be.first(IT)),t.length>s.maxLen){let c=i-s.maxLen/2;return c<0?c=0:n+=c,t=t.substring(c,i+s.maxLen/2),Kd(i,e,t,n,s)}const r=Date.now(),o=i-1-n;let a=-1,l=null;for(let c=1;!(Date.now()-r>=s.timeBudget);c++){const h=o-s.windowSize*c;e.lastIndex=Math.max(0,h);const u=FO(e,t,o,a);if(!u&&l||(l=u,h<=0))break;a=h}if(l){const c={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function FO(i,e,t,n){let s;for(;s=i.exec(e);){const r=s.index||0;if(r<=t&&i.lastIndex>=t)return s;if(n>0&&r>n)return null}return null}var rr;(function(i){i[i.Unknown=0]="Unknown",i[i.Disabled=1]="Disabled",i[i.Enabled=2]="Enabled"})(rr||(rr={}));const PO=new oe("accessibilityModeEnabled",!1);function KZ(i){return i&&typeof i=="object"&&typeof i.label=="string"&&(typeof i.role>"u"||typeof i.role=="string")}var ya;(function(i){i[i.None=0]="None",i[i.Keep=1]="Keep",i[i.Brackets=2]="Brackets",i[i.Advanced=3]="Advanced",i[i.Full=4]="Full"})(ya||(ya={}));const BO=8;class GZ{constructor(e){this._values=e}hasChanged(e){return this._values[e]}}class WO{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class dt{constructor(e,t,n,s){this.id=e,this.name=t,this.defaultValue=n,this.schema=s}applyUpdate(e,t){return M1(e,t)}compute(e,t,n){return n}}class fp{constructor(e,t){this.newValue=e,this.didChange=t}}function M1(i,e){if(typeof i!="object"||typeof e!="object"||!i||!e)return new fp(e,i!==e);if(Array.isArray(i)||Array.isArray(e)){const n=Array.isArray(i)&&Array.isArray(e)&&wi(i,e);return new fp(e,!n)}let t=!1;for(const n in e)if(e.hasOwnProperty(n)){const s=M1(i[n],e[n]);s.didChange&&(i[n]=s.newValue,t=!0)}return new fp(i,t)}class kc{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return M1(e,t)}validate(e){return this.defaultValue}}class hu{constructor(e,t,n,s){this.id=e,this.name=t,this.defaultValue=n,this.schema=s}applyUpdate(e,t){return M1(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}}function he(i,e){return typeof i>"u"?e:i==="false"?!1:!!i}class Ie extends hu{constructor(e,t,n,s=void 0){typeof s<"u"&&(s.type="boolean",s.default=n),super(e,t,n,s)}validate(e){return he(e,this.defaultValue)}}function UO(i,e,t,n){if(typeof i>"u")return e;let s=parseInt(i,10);return isNaN(s)?e:(s=Math.max(t,s),s=Math.min(n,s),s|0)}class je extends hu{static clampedInt(e,t,n,s){return UO(e,t,n,s)}constructor(e,t,n,s,r,o=void 0){typeof o<"u"&&(o.type="integer",o.default=n,o.minimum=s,o.maximum=r),super(e,t,n,o),this.minimum=s,this.maximum=r}validate(e){return je.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}function jZ(i,e,t,n){if(typeof i>"u")return e;const s=ns.float(i,e);return ns.clamp(s,t,n)}class ns extends hu{static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const n=parseFloat(e);return isNaN(n)?t:n}constructor(e,t,n,s,r){typeof r<"u"&&(r.type="number",r.default=n),super(e,t,n,r),this.validationFn=s}validate(e){return this.validationFn(ns.float(e,this.defaultValue))}}class nn extends hu{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,s=void 0){typeof s<"u"&&(s.type="string",s.default=n),super(e,t,n,s)}validate(e){return nn.string(e,this.defaultValue)}}function _t(i,e,t,n){return typeof i!="string"?e:n&&i in n?n[i]:t.indexOf(i)===-1?e:i}class ft extends hu{constructor(e,t,n,s,r=void 0){typeof r<"u"&&(r.type="string",r.enum=s,r.default=n),super(e,t,n,r),this._allowedValues=s}validate(e){return _t(e,this.defaultValue,this._allowedValues)}}class Su extends dt{constructor(e,t,n,s,r,o,a=void 0){typeof a<"u"&&(a.type="string",a.enum=r,a.default=s),super(e,t,n,a),this._allowedValues=r,this._convert=o}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function HO(i,e){return Array.isArray(i)?i.map(t=>String(t)):e}function VO(i){switch(i){case"none":return ya.None;case"keep":return ya.Keep;case"brackets":return ya.Brackets;case"advanced":return ya.Advanced;case"full":return ya.Full}}class zO extends dt{constructor(){super(O.accessibilitySupport,"accessibilitySupport",rr.Unknown,{type:"string",enum:["auto","on","off"],enumDescriptions:[d(262,"Use platform APIs to detect when a Screen Reader is attached."),d(263,"Optimize for usage with a Screen Reader."),d(264,"Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:d(265,"Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return rr.Unknown;case"off":return rr.Disabled;case"on":return rr.Enabled}return this.defaultValue}compute(e,t,n){return n===rr.Unknown?e.accessibilitySupport:n}}class $O extends dt{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(O.comments,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:d(266,"Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:d(267,"Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:he(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:he(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}var Sa;(function(i){i[i.Hidden=0]="Hidden",i[i.Blink=1]="Blink",i[i.Smooth=2]="Smooth",i[i.Phase=3]="Phase",i[i.Expand=4]="Expand",i[i.Solid=5]="Solid"})(Sa||(Sa={}));function qO(i){switch(i){case"blink":return Sa.Blink;case"smooth":return Sa.Smooth;case"phase":return Sa.Phase;case"expand":return Sa.Expand;case"solid":return Sa.Solid}}var vn;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(vn||(vn={}));function YZ(i){switch(i){case vn.Line:return"line";case vn.Block:return"block";case vn.Underline:return"underline";case vn.LineThin:return"line-thin";case vn.BlockOutline:return"block-outline";case vn.UnderlineThin:return"underline-thin"}}function t2(i){switch(i){case"line":return vn.Line;case"block":return vn.Block;case"underline":return vn.Underline;case"line-thin":return vn.LineThin;case"block-outline":return vn.BlockOutline;case"underline-thin":return vn.UnderlineThin}}class KO extends kc{constructor(){super(O.editorClassName)}compute(e,t,n){const s=["monaco-editor"];return t.get(O.extraEditorClassName)&&s.push(t.get(O.extraEditorClassName)),e.extraEditorClassName&&s.push(e.extraEditorClassName),t.get(O.mouseStyle)==="default"?s.push("mouse-default"):t.get(O.mouseStyle)==="copy"&&s.push("mouse-copy"),t.get(O.showUnused)&&s.push("showUnused"),t.get(O.showDeprecated)&&s.push("showDeprecated"),s.join(" ")}}class GO extends Ie{constructor(){super(O.emptySelectionClipboard,"emptySelectionClipboard",!0,{description:d(268,"Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}}class jO extends dt{constructor(){const e={cursorMoveOnType:!0,findOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0,history:"workspace",replaceHistory:"workspace"};super(O.find,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:d(269,"Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[d(270,"Never seed search string from the editor selection."),d(271,"Always seed search string from the editor selection, including word at cursor position."),d(272,"Only seed search string from the editor selection.")],description:d(273,"Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[d(274,"Never turn on Find in Selection automatically (default)."),d(275,"Always turn on Find in Selection automatically."),d(276,"Turn on Find in Selection automatically when multiple lines of content are selected.")],description:d(277,"Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:d(278,"Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:Me},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:d(279,"Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:d(280,"Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")},"editor.find.history":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[d(281,"Do not store search history from the find widget."),d(282,"Store search history across the active workspace")],description:d(283,"Controls how the find widget history should be stored")},"editor.find.replaceHistory":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[d(284,"Do not store history from the replace widget."),d(285,"Store replace history across the active workspace")],description:d(286,"Controls how the replace widget history should be stored")},"editor.find.findOnType":{type:"boolean",default:e.findOnType,description:d(287,"Controls whether the Find Widget should search as you type.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:he(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),findOnType:he(t.findOnType,this.defaultValue.findOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":_t(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":_t(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:he(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:he(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:he(t.loop,this.defaultValue.loop),history:_t(t.history,this.defaultValue.history,["never","workspace"]),replaceHistory:_t(t.replaceHistory,this.defaultValue.replaceHistory,["never","workspace"])}}}class Sl extends dt{static{this.OFF='"liga" off, "calt" off'}static{this.ON='"liga" on, "calt" on'}constructor(){super(O.fontLigatures,"fontLigatures",Sl.OFF,{anyOf:[{type:"boolean",description:d(288,"Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:d(289,"Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:d(290,"Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"||e.length===0?Sl.OFF:e==="true"?Sl.ON:e:e?Sl.ON:Sl.OFF}}class kl extends dt{static{this.OFF="normal"}static{this.TRANSLATE="translate"}constructor(){super(O.fontVariations,"fontVariations",kl.OFF,{anyOf:[{type:"boolean",description:d(291,"Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:d(292,"Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:d(293,"Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?kl.OFF:e==="true"?kl.TRANSLATE:e:e?kl.TRANSLATE:kl.OFF}compute(e,t,n){return e.fontInfo.fontVariationSettings}}class YO extends kc{constructor(){super(O.fontInfo)}compute(e,t,n){return e.fontInfo}}class XO extends kc{constructor(){super(O.effectiveCursorStyle)}compute(e,t,n){return e.inputMode==="overtype"?t.get(O.overtypeCursorStyle):t.get(O.cursorStyle)}}class QO extends kc{constructor(){super(O.effectiveExperimentalEditContextEnabled)}compute(e,t){return e.editContextSupported&&t.get(O.experimentalEditContextEnabled)}}class ZO extends hu{constructor(){super(O.fontSize,"fontSize",jr.fontSize,{type:"number",minimum:6,maximum:100,default:jr.fontSize,description:d(294,"Controls the font size in pixels.")})}validate(e){const t=ns.float(e,this.defaultValue);return t===0?jr.fontSize:ns.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}}class Cl extends dt{static{this.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"]}static{this.MINIMUM_VALUE=1}static{this.MAXIMUM_VALUE=1e3}constructor(){super(O.fontWeight,"fontWeight",jr.fontWeight,{anyOf:[{type:"number",minimum:Cl.MINIMUM_VALUE,maximum:Cl.MAXIMUM_VALUE,errorMessage:d(295,'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Cl.SUGGESTION_VALUES}],default:jr.fontWeight,description:d(296,'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(je.clampedInt(e,jr.fontWeight,Cl.MINIMUM_VALUE,Cl.MAXIMUM_VALUE))}}class JO extends dt{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[d(297,"Show Peek view of the results (default)"),d(298,"Go to the primary result and show a Peek view"),d(299,"Go to the primary result and enable Peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(O.gotoLocation,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:d(300,"This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:d(301,"Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:d(302,"Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:d(303,"Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:d(304,"Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:d(305,"Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:d(306,"Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:d(307,"Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:d(308,"Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:d(309,"Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:d(310,"Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:_t(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??_t(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??_t(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??_t(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??_t(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??_t(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??_t(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:nn.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:nn.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:nn.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:nn.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:nn.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:nn.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}}class e8 extends dt{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(O.hover,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:d(311,"Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:d(312,"Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:d(313,"Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:d(314,"Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:d(315,"Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:he(t.enabled,this.defaultValue.enabled),delay:je.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:he(t.sticky,this.defaultValue.sticky),hidingDelay:je.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:he(t.above,this.defaultValue.above)}}}var nh;(function(i){i[i.None=0]="None",i[i.Text=1]="Text",i[i.Blocks=2]="Blocks"})(nh||(nh={}));class ad extends kc{constructor(){super(O.layoutInfo)}compute(e,t,n){return ad.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,n=Math.floor(e.paddingTop/e.lineHeight);let s=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(s=Math.max(s,t-1));const r=(n+e.viewLineCount+s)/(e.pixelRatio*e.height),o=Math.floor(e.viewLineCount/r);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:n,extraLinesBeyondLastLine:s,desiredRatio:r,minimapLineCount:o}}static _computeMinimapLayout(e,t){const n=e.outerWidth,s=e.outerHeight,r=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:nh.None,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(r*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const o=t.stableMinimapLayoutInput,a=o&&e.outerHeight===o.outerHeight&&e.lineHeight===o.lineHeight&&e.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&e.pixelRatio===o.pixelRatio&&e.scrollBeyondLastLine===o.scrollBeyondLastLine&&e.paddingTop===o.paddingTop&&e.paddingBottom===o.paddingBottom&&e.minimap.enabled===o.minimap.enabled&&e.minimap.side===o.minimap.side&&e.minimap.size===o.minimap.size&&e.minimap.showSlider===o.minimap.showSlider&&e.minimap.renderCharacters===o.minimap.renderCharacters&&e.minimap.maxColumn===o.minimap.maxColumn&&e.minimap.scale===o.minimap.scale&&e.verticalScrollbarWidth===o.verticalScrollbarWidth&&e.isViewportWrapping===o.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,h=e.scrollBeyondLastLine,u=e.minimap.renderCharacters;let f=r>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const g=e.minimap.maxColumn,p=e.minimap.size,m=e.minimap.side,_=e.verticalScrollbarWidth,v=e.viewLineCount,y=e.remainingWidth,E=e.isViewportWrapping,N=u?2:3;let I=Math.floor(r*s);const B=I/r;let x=!1,D=!1,F=N*f,te=f/r,J=1;if(p==="fill"||p==="fit"){const{typicalViewportLineCount:Ae,extraLinesBeforeFirstLine:Ge,extraLinesBeyondLastLine:Ot,desiredRatio:Ke,minimapLineCount:Hi}=ad.computeContainedMinimapLineCount({viewLineCount:v,scrollBeyondLastLine:h,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:s,lineHeight:l,pixelRatio:r});if(v/Hi>1)x=!0,D=!0,f=1,F=1,te=f/r;else{let ui=!1,yt=f+1;if(p==="fit"){const Vi=Math.ceil((Ge+v+Ot)*F);E&&a&&y<=t.stableFitRemainingWidth?(ui=!0,yt=t.stableFitMaxMinimapScale):ui=Vi>I}if(p==="fill"||ui){x=!0;const Vi=f;F=Math.min(l*r,Math.max(1,Math.floor(1/Ke))),E&&a&&y<=t.stableFitRemainingWidth&&(yt=t.stableFitMaxMinimapScale),f=Math.min(yt,Math.max(1,Math.floor(F/N))),f>Vi&&(J=Math.min(2,f/Vi)),te=f/r/J,I=Math.ceil(Math.max(Ae,Ge+v+Ot)*F),E?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=y,t.stableFitMaxMinimapScale=f):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const le=Math.floor(g*te),ee=Math.min(le,Math.max(0,Math.floor((y-_-2)*te/(c+te)))+BO);let z=Math.floor(r*ee);const Z=z/r;z=Math.floor(z*J);const ne=u?nh.Text:nh.Blocks,ve=m==="left"?0:n-ee-_;return{renderMinimap:ne,minimapLeft:ve,minimapWidth:ee,minimapHeightIsEditorHeight:x,minimapIsSampling:D,minimapScale:f,minimapLineHeight:F,minimapCanvasInnerWidth:z,minimapCanvasInnerHeight:I,minimapCanvasOuterWidth:Z,minimapCanvasOuterHeight:B}}static computeLayout(e,t){const n=t.outerWidth|0,s=t.outerHeight|0,r=t.lineHeight|0,o=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,h=t.viewLineCount,u=e.get(O.wordWrapOverride2),f=u==="inherit"?e.get(O.wordWrapOverride1):u,g=f==="inherit"?e.get(O.wordWrap):f,p=e.get(O.wordWrapColumn),m=t.isDominatedByLongLines,_=e.get(O.glyphMargin),v=e.get(O.lineNumbers).renderType!==Lo.Off,y=e.get(O.lineNumbersMinChars),E=e.get(O.scrollBeyondLastLine),N=e.get(O.padding),I=e.get(O.minimap),B=e.get(O.scrollbar),x=B.verticalScrollbarSize,D=B.verticalHasArrows,F=B.arrowSize,te=B.horizontalScrollbarSize,J=e.get(O.folding),le=e.get(O.showFoldingControls)!=="never";let ee=e.get(O.lineDecorationsWidth);J&&le&&(ee+=16);let z=0;if(v){const Tc=Math.max(o,y);z=Math.round(Tc*l)}let Z=0;_&&(Z=r*t.glyphMarginDecorationLaneCount);let ne=0,ve=ne+Z,Ae=ve+z,Ge=Ae+ee;const Ot=n-Z-z-ee;let Ke=!1,Hi=!1,Lt=-1;f==="inherit"&&m?(Ke=!0,Hi=!0):g==="on"||g==="bounded"?Hi=!0:g==="wordWrapColumn"&&(Lt=p);const ui=ad._computeMinimapLayout({outerWidth:n,outerHeight:s,lineHeight:r,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:E,paddingTop:N.top,paddingBottom:N.bottom,minimap:I,verticalScrollbarWidth:x,viewLineCount:h,remainingWidth:Ot,isViewportWrapping:Hi},t.memory||new WO);ui.renderMinimap!==nh.None&&ui.minimapLeft===0&&(ne+=ui.minimapWidth,ve+=ui.minimapWidth,Ae+=ui.minimapWidth,Ge+=ui.minimapWidth);const yt=Ot-ui.minimapWidth,Vi=Math.max(1,Math.floor((yt-x-2)/a)),ta=D?F:0;return Hi&&(Lt=Math.max(1,Vi),g==="bounded"&&(Lt=Math.min(Lt,p))),{width:n,height:s,glyphMarginLeft:ne,glyphMarginWidth:Z,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:ve,lineNumbersWidth:z,decorationsLeft:Ae,decorationsWidth:ee,contentLeft:Ge,contentWidth:yt,minimap:ui,viewportColumn:Vi,isWordWrapMinified:Ke,isViewportWrapping:Hi,wrappingColumn:Lt,verticalScrollbarWidth:x,horizontalScrollbarHeight:te,overviewRuler:{top:ta,width:x,height:s-2*ta,right:0}}}}class t8 extends dt{constructor(){super(O.wrappingStrategy,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[d(316,"Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),d(317,"Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:d(318,"Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return _t(e,"simple",["simple","advanced"])}compute(e,t,n){return t.get(O.accessibilitySupport)===rr.Enabled?"advanced":n}}var yo;(function(i){i.Off="off",i.OnCode="onCode",i.On="on"})(yo||(yo={}));class i8 extends dt{constructor(){const e={enabled:yo.OnCode};super(O.lightbulb,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",enum:[yo.Off,yo.OnCode,yo.On],default:e.enabled,enumDescriptions:[d(319,"Disable the code action menu."),d(320,"Show the code action menu when the cursor is on lines with code."),d(321,"Show the code action menu when the cursor is on lines with code or on empty lines.")],description:d(322,"Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:_t(e.enabled,this.defaultValue.enabled,[yo.Off,yo.OnCode,yo.On])}}}class n8 extends dt{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(O.stickyScroll,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:d(323,"Shows the nested current scopes during the scroll at the top of the editor.")},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:d(324,"Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:d(325,"Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:d(326,"Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:he(t.enabled,this.defaultValue.enabled),maxLineCount:je.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:_t(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:he(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}class s8 extends dt{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1,maximumLength:43};super(O.inlayHints,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:d(327,"Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[d(328,"Inlay hints are enabled"),d(329,"Inlay hints are showing by default and hide when holding {0}",Me?"Ctrl+Option":"Ctrl+Alt"),d(330,"Inlay hints are hidden by default and show when holding {0}",Me?"Ctrl+Option":"Ctrl+Alt"),d(331,"Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:d(332,"Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:d(333,"Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:d(334,"Enables the padding around the inlay hints in the editor.")},"editor.inlayHints.maximumLength":{type:"number",default:e.maximumLength,markdownDescription:d(335,"Maximum overall length of inlay hints, for a single line, before they get truncated by the editor. Set to `0` to never truncate")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:_t(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:je.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:nn.string(t.fontFamily,this.defaultValue.fontFamily),padding:he(t.padding,this.defaultValue.padding),maximumLength:je.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,Number.MAX_SAFE_INTEGER)}}}class r8 extends dt{constructor(){super(O.lineDecorationsWidth,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):je.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,n){return n<0?je.clampedInt(-n*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):n}}class o8 extends ns{constructor(){super(O.lineHeight,"lineHeight",jr.lineHeight,e=>ns.clamp(e,0,150),{markdownDescription:d(336,`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}}class a8 extends dt{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,markSectionHeaderRegex:"\\bMARK:\\s*(?<separator>-?)\\s*(?<label>.*)$",sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(O.minimap,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:d(337,"Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:d(338,"Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[d(339,"The minimap has the same size as the editor contents (and might scroll)."),d(340,"The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),d(341,"The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:d(342,"Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:d(343,"Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:d(344,"Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:d(345,"Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:d(346,"Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:d(347,"Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:d(348,"Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:d(349,"Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.markSectionHeaderRegex":{type:"string",default:e.markSectionHeaderRegex,description:d(350,"Defines the regular expression used to find section headers in comments. The regex must contain a named match group `label` (written as `(?<label>.+)`) that encapsulates the section header, otherwise it will not work. Optionally you can include another match group named `separator`. Use \\n in the pattern to match multi-line headers.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:d(351,"Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:d(352,"Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;let n=this.defaultValue.markSectionHeaderRegex;const s=e.markSectionHeaderRegex;if(typeof s=="string")try{new RegExp(s,"d"),n=s}catch{}return{enabled:he(t.enabled,this.defaultValue.enabled),autohide:he(t.autohide,this.defaultValue.autohide),size:_t(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:_t(t.side,this.defaultValue.side,["right","left"]),showSlider:_t(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:he(t.renderCharacters,this.defaultValue.renderCharacters),scale:je.clampedInt(t.scale,1,1,3),maxColumn:je.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:he(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:he(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),markSectionHeaderRegex:n,sectionHeaderFontSize:ns.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:ns.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}}function l8(i){return i==="ctrlCmd"?Me?"metaKey":"ctrlKey":"altKey"}class c8 extends dt{constructor(){super(O.padding,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:d(353,"Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:d(354,"Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:je.clampedInt(t.top,0,0,1e3),bottom:je.clampedInt(t.bottom,0,0,1e3)}}}class h8 extends dt{constructor(){const e={enabled:!0,cycle:!0};super(O.parameterHints,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:d(355,"Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:d(356,"Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:he(t.enabled,this.defaultValue.enabled),cycle:he(t.cycle,this.defaultValue.cycle)}}}class u8 extends kc{constructor(){super(O.pixelRatio)}compute(e,t,n){return e.pixelRatio}}class d8 extends dt{constructor(){super(O.placeholder,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}}class f8 extends dt{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[d(357,"Quick suggestions show inside the suggest widget"),d(358,"Quick suggestions show as ghost text"),d(359,"Quick suggestions are disabled")]}];super(O.quickSuggestions,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:d(360,"Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:d(361,"Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:d(362,"Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:d(363,"Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:n,strings:s}=e,r=["on","inline","off"];let o,a,l;return typeof t=="boolean"?o=t?"on":"off":o=_t(t,this.defaultValue.other,r),typeof n=="boolean"?a=n?"on":"off":a=_t(n,this.defaultValue.comments,r),typeof s=="boolean"?l=s?"on":"off":l=_t(s,this.defaultValue.strings,r),{other:o,comments:a,strings:l}}}var Lo;(function(i){i[i.Off=0]="Off",i[i.On=1]="On",i[i.Relative=2]="Relative",i[i.Interval=3]="Interval",i[i.Custom=4]="Custom"})(Lo||(Lo={}));class g8 extends dt{constructor(){super(O.lineNumbers,"lineNumbers",{renderType:Lo.On,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[d(364,"Line numbers are not rendered."),d(365,"Line numbers are rendered as absolute number."),d(366,"Line numbers are rendered as distance in lines to cursor position."),d(367,"Line numbers are rendered every 10 lines.")],default:"on",description:d(368,"Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=Lo.Custom,n=e):e==="interval"?t=Lo.Interval:e==="relative"?t=Lo.Relative:e==="on"?t=Lo.On:t=Lo.Off),{renderType:t,renderFn:n}}}function XZ(i){const e=i.get(O.renderValidationDecorations);return e==="editable"?i.get(O.readOnly):e!=="on"}class p8 extends dt{constructor(){const e=[],t={type:"number",description:d(369,"Number of monospace characters at which this editor ruler will render.")};super(O.rulers,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:d(370,"Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:d(371,"Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const n of e)if(typeof n=="number")t.push({column:je.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){const s=n;t.push({column:je.clampedInt(s.column,0,0,1e4),color:s.color})}return t.sort((n,s)=>n.column-s.column),t}return this.defaultValue}}class m8 extends dt{constructor(){super(O.readOnlyMessage,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}}function i2(i,e){if(typeof i!="string")return e;switch(i){case"hidden":return Nt.Hidden;case"visible":return Nt.Visible;default:return Nt.Auto}}class b8 extends dt{constructor(){const e={vertical:Nt.Auto,horizontal:Nt.Auto,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(O.scrollbar,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[d(372,"The vertical scrollbar will be visible only when necessary."),d(373,"The vertical scrollbar will always be visible."),d(374,"The vertical scrollbar will always be hidden.")],default:"auto",description:d(375,"Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[d(376,"The horizontal scrollbar will be visible only when necessary."),d(377,"The horizontal scrollbar will always be visible."),d(378,"The horizontal scrollbar will always be hidden.")],default:"auto",description:d(379,"Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:d(380,"The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:d(381,"The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:d(382,"Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:d(383,"When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,n=je.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),s=je.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:je.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:i2(t.vertical,this.defaultValue.vertical),horizontal:i2(t.horizontal,this.defaultValue.horizontal),useShadows:he(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:he(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:he(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:he(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:he(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:je.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:s,verticalSliderSize:je.clampedInt(t.verticalSliderSize,s,0,1e3),scrollByPage:he(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:he(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}}const Ks="inUntrustedWorkspace",cl={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class _8 extends dt{constructor(){const e={nonBasicASCII:Ks,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Ks,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(O.unicodeHighlighting,"unicodeHighlight",e,{[cl.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Ks],default:e.nonBasicASCII,description:d(384,"Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[cl.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:d(385,"Controls whether characters that just reserve space or have no width at all are highlighted.")},[cl.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:d(386,"Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[cl.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Ks],default:e.includeComments,description:d(387,"Controls whether characters in comments should also be subject to Unicode highlighting.")},[cl.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Ks],default:e.includeStrings,description:d(388,"Controls whether characters in strings should also be subject to Unicode highlighting.")},[cl.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:d(389,"Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[cl.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:d(390,"Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&e&&(Wi(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},n=!0)),t.allowedLocales&&e&&(Wi(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},n=!0));const s=super.applyUpdate(e,t);return n?new fp(s.newValue,!0):s}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:kh(t.nonBasicASCII,Ks,[!0,!1,Ks]),invisibleCharacters:he(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:he(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:kh(t.includeComments,Ks,[!0,!1,Ks]),includeStrings:kh(t.includeStrings,Ks,[!0,!1,Ks]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const n={};for(const[s,r]of Object.entries(e))r===!0&&(n[s]=!0);return n}}class w8 extends dt{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default",syntaxHighlightingEnabled:!0,edits:{enabled:!0,showCollapsed:!1,renderSideBySide:"auto",allowCodeShifting:"always",useMultiLineGhostText:!0},experimental:{suppressInlineSuggestions:[]}};super(O.inlineSuggest,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:d(391,"Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[d(392,"Show the inline suggestion toolbar whenever an inline suggestion is shown."),d(393,"Show the inline suggestion toolbar when hovering over an inline suggestion."),d(394,"Never show the inline suggestion toolbar.")],description:d(395,"Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:"boolean",default:e.syntaxHighlightingEnabled,description:d(396,"Controls whether to show syntax highlighting for inline suggestions in the editor.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:d(397,"Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.experimental.suppressInlineSuggestions":{type:"array",tags:["experimental","onExp"],items:{type:"string"},description:d(398,"Suppresses inline completions for specified extension IDs.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:d(399,"Controls the font family of the inline suggestions.")},"editor.inlineSuggest.edits.allowCodeShifting":{type:"string",default:e.edits.allowCodeShifting,description:d(400,"Controls whether showing a suggestion will shift the code to make space for the suggestion inline."),enum:["always","horizontal","never"],tags:["nextEditSuggestions"]},"editor.inlineSuggest.edits.renderSideBySide":{type:"string",default:e.edits.renderSideBySide,description:d(401,"Controls whether larger suggestions can be shown side by side."),enum:["auto","never"],enumDescriptions:[d(402,"Larger suggestions will show side by side if there is enough space, otherwise they will be shown below."),d(403,"Larger suggestions are never shown side by side and will always be shown below.")],tags:["nextEditSuggestions"]},"editor.inlineSuggest.edits.showCollapsed":{type:"boolean",default:e.edits.showCollapsed,description:d(404,"Controls whether the suggestion will show as collapsed until jumping to it."),tags:["nextEditSuggestions"]}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:he(t.enabled,this.defaultValue.enabled),mode:_t(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:_t(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:he(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:he(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:nn.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:he(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled),edits:{enabled:he(t.edits?.enabled,this.defaultValue.edits.enabled),showCollapsed:he(t.edits?.showCollapsed,this.defaultValue.edits.showCollapsed),allowCodeShifting:_t(t.edits?.allowCodeShifting,this.defaultValue.edits.allowCodeShifting,["always","horizontal","never"]),renderSideBySide:_t(t.edits?.renderSideBySide,this.defaultValue.edits.renderSideBySide,["never","auto"]),useMultiLineGhostText:he(t.edits?.useMultiLineGhostText,this.defaultValue.edits.useMultiLineGhostText)},experimental:{suppressInlineSuggestions:HO(t.experimental?.suppressInlineSuggestions,this.defaultValue.experimental.suppressInlineSuggestions)}}}}class v8 extends dt{constructor(){const e={enabled:Oi.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Oi.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(O.bracketPairColorization,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(405,"Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:d(406,"Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:he(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:he(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class y8 extends dt{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(O.guides,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[d(407,"Enables bracket pair guides."),d(408,"Enables bracket pair guides only for the active bracket pair."),d(409,"Disables bracket pair guides.")],default:e.bracketPairs,description:d(410,"Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[d(411,"Enables horizontal guides as addition to vertical bracket pair guides."),d(412,"Enables horizontal guides only for the active bracket pair."),d(413,"Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:d(414,"Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:d(415,"Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:d(416,"Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[d(417,"Highlights the active indent guide."),d(418,"Highlights the active indent guide even if bracket guides are highlighted."),d(419,"Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:d(420,"Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:kh(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:kh(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:he(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:he(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:kh(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function kh(i,e,t){const n=t.indexOf(i);return n===-1?e:t[n]}class S8 extends dt{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(O.suggest,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[d(421,"Insert suggestion without overwriting text right of the cursor."),d(422,"Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:d(423,"Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:d(424,"Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:d(425,"Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:d(426,"Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[d(427,"Always select a suggestion when automatically triggering IntelliSense."),d(428,"Never select a suggestion when automatically triggering IntelliSense."),d(429,"Select a suggestion only when triggering IntelliSense from a trigger character."),d(430,"Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:d(431,"Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:d(432,"Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:d(433,"Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:d(434,"Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:d(435,"Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:d(436,"Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:d(437,"This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:d(438,"This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:d(439,"When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:d(440,"When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:d(441,"When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:d(442,"When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:d(443,"When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:d(444,"When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:d(445,"When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:d(446,"When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:d(447,"When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:d(448,"When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:d(449,"When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:d(450,"When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:d(451,"When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:d(452,"When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:d(453,"When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:d(454,"When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:d(455,"When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:d(456,"When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:d(457,"When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:d(458,"When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:d(459,"When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:d(460,"When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:d(461,"When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:d(462,"When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:d(463,"When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:d(464,"When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:d(465,"When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:d(466,"When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:d(467,"When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:d(468,"When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:_t(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:he(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:he(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:he(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:he(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:_t(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:he(t.showIcons,this.defaultValue.showIcons),showStatusBar:he(t.showStatusBar,this.defaultValue.showStatusBar),preview:he(t.preview,this.defaultValue.preview),previewMode:_t(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:he(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:he(t.showMethods,this.defaultValue.showMethods),showFunctions:he(t.showFunctions,this.defaultValue.showFunctions),showConstructors:he(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:he(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:he(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:he(t.showFields,this.defaultValue.showFields),showVariables:he(t.showVariables,this.defaultValue.showVariables),showClasses:he(t.showClasses,this.defaultValue.showClasses),showStructs:he(t.showStructs,this.defaultValue.showStructs),showInterfaces:he(t.showInterfaces,this.defaultValue.showInterfaces),showModules:he(t.showModules,this.defaultValue.showModules),showProperties:he(t.showProperties,this.defaultValue.showProperties),showEvents:he(t.showEvents,this.defaultValue.showEvents),showOperators:he(t.showOperators,this.defaultValue.showOperators),showUnits:he(t.showUnits,this.defaultValue.showUnits),showValues:he(t.showValues,this.defaultValue.showValues),showConstants:he(t.showConstants,this.defaultValue.showConstants),showEnums:he(t.showEnums,this.defaultValue.showEnums),showEnumMembers:he(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:he(t.showKeywords,this.defaultValue.showKeywords),showWords:he(t.showWords,this.defaultValue.showWords),showColors:he(t.showColors,this.defaultValue.showColors),showFiles:he(t.showFiles,this.defaultValue.showFiles),showReferences:he(t.showReferences,this.defaultValue.showReferences),showFolders:he(t.showFolders,this.defaultValue.showFolders),showTypeParameters:he(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:he(t.showSnippets,this.defaultValue.showSnippets),showUsers:he(t.showUsers,this.defaultValue.showUsers),showIssues:he(t.showIssues,this.defaultValue.showIssues)}}}class k8 extends dt{constructor(){super(O.smartSelect,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:d(469,"Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:d(470,"Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:he(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:he(e.selectSubwords,this.defaultValue.selectSubwords)}}}class C8 extends dt{constructor(){const e=[];super(O.wordSegmenterLocales,"wordSegmenterLocales",e,{anyOf:[{description:d(471,"Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:d(471,"Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const n of e)if(typeof n=="string")try{Intl.Segmenter.supportedLocalesOf(n).length>0&&t.push(n)}catch{}return t}return this.defaultValue}}var So;(function(i){i[i.None=0]="None",i[i.Same=1]="Same",i[i.Indent=2]="Indent",i[i.DeepIndent=3]="DeepIndent"})(So||(So={}));class E8 extends dt{constructor(){super(O.wrappingIndent,"wrappingIndent",So.Same,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[d(472,"No indentation. Wrapped lines begin at column 1."),d(473,"Wrapped lines get the same indentation as the parent."),d(474,"Wrapped lines get +1 indentation toward the parent."),d(475,"Wrapped lines get +2 indentation toward the parent.")],description:d(476,"Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return So.None;case"same":return So.Same;case"indent":return So.Indent;case"deepIndent":return So.DeepIndent}return So.Same}compute(e,t,n){return t.get(O.accessibilitySupport)===rr.Enabled?So.None:n}}class x8 extends kc{constructor(){super(O.wrappingInfo)}compute(e,t,n){const s=t.get(O.layoutInfo);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:s.isWordWrapMinified,isViewportWrapping:s.isViewportWrapping,wrappingColumn:s.wrappingColumn}}}class L8 extends dt{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(O.dropIntoEditor,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(477,"Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:d(478,"Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[d(479,"Show the drop selector widget after a file is dropped into the editor."),d(480,"Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:he(t.enabled,this.defaultValue.enabled),showDropSelector:_t(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}class D8 extends dt{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(O.pasteAs,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(481,"Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:d(482,"Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[d(483,"Show the paste selector widget after content is pasted into the editor."),d(484,"Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:he(t.enabled,this.defaultValue.enabled),showPasteSelector:_t(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}const I8="Consolas, 'Courier New', monospace",T8="Menlo, Monaco, 'Courier New', monospace",A8="'Droid Sans Mono', 'monospace', monospace",jr={fontFamily:Me?T8:hi?I8:A8,fontWeight:"normal",fontSize:Me?12:14,lineHeight:0,letterSpacing:0},TT=[];function U(i){return TT[i.id]=i,i}var O;(function(i){i[i.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",i[i.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",i[i.accessibilitySupport=2]="accessibilitySupport",i[i.accessibilityPageSize=3]="accessibilityPageSize",i[i.allowVariableLineHeights=4]="allowVariableLineHeights",i[i.ariaLabel=5]="ariaLabel",i[i.ariaRequired=6]="ariaRequired",i[i.autoClosingBrackets=7]="autoClosingBrackets",i[i.autoClosingComments=8]="autoClosingComments",i[i.screenReaderAnnounceInlineSuggestion=9]="screenReaderAnnounceInlineSuggestion",i[i.autoClosingDelete=10]="autoClosingDelete",i[i.autoClosingOvertype=11]="autoClosingOvertype",i[i.autoClosingQuotes=12]="autoClosingQuotes",i[i.autoIndent=13]="autoIndent",i[i.automaticLayout=14]="automaticLayout",i[i.autoSurround=15]="autoSurround",i[i.bracketPairColorization=16]="bracketPairColorization",i[i.guides=17]="guides",i[i.codeLens=18]="codeLens",i[i.codeLensFontFamily=19]="codeLensFontFamily",i[i.codeLensFontSize=20]="codeLensFontSize",i[i.colorDecorators=21]="colorDecorators",i[i.colorDecoratorsLimit=22]="colorDecoratorsLimit",i[i.columnSelection=23]="columnSelection",i[i.comments=24]="comments",i[i.contextmenu=25]="contextmenu",i[i.copyWithSyntaxHighlighting=26]="copyWithSyntaxHighlighting",i[i.cursorBlinking=27]="cursorBlinking",i[i.cursorSmoothCaretAnimation=28]="cursorSmoothCaretAnimation",i[i.cursorStyle=29]="cursorStyle",i[i.cursorSurroundingLines=30]="cursorSurroundingLines",i[i.cursorSurroundingLinesStyle=31]="cursorSurroundingLinesStyle",i[i.cursorWidth=32]="cursorWidth",i[i.disableLayerHinting=33]="disableLayerHinting",i[i.disableMonospaceOptimizations=34]="disableMonospaceOptimizations",i[i.domReadOnly=35]="domReadOnly",i[i.dragAndDrop=36]="dragAndDrop",i[i.dropIntoEditor=37]="dropIntoEditor",i[i.experimentalEditContextEnabled=38]="experimentalEditContextEnabled",i[i.emptySelectionClipboard=39]="emptySelectionClipboard",i[i.experimentalGpuAcceleration=40]="experimentalGpuAcceleration",i[i.experimentalWhitespaceRendering=41]="experimentalWhitespaceRendering",i[i.extraEditorClassName=42]="extraEditorClassName",i[i.fastScrollSensitivity=43]="fastScrollSensitivity",i[i.find=44]="find",i[i.fixedOverflowWidgets=45]="fixedOverflowWidgets",i[i.folding=46]="folding",i[i.foldingStrategy=47]="foldingStrategy",i[i.foldingHighlight=48]="foldingHighlight",i[i.foldingImportsByDefault=49]="foldingImportsByDefault",i[i.foldingMaximumRegions=50]="foldingMaximumRegions",i[i.unfoldOnClickAfterEndOfLine=51]="unfoldOnClickAfterEndOfLine",i[i.fontFamily=52]="fontFamily",i[i.fontInfo=53]="fontInfo",i[i.fontLigatures=54]="fontLigatures",i[i.fontSize=55]="fontSize",i[i.fontWeight=56]="fontWeight",i[i.fontVariations=57]="fontVariations",i[i.formatOnPaste=58]="formatOnPaste",i[i.formatOnType=59]="formatOnType",i[i.glyphMargin=60]="glyphMargin",i[i.gotoLocation=61]="gotoLocation",i[i.hideCursorInOverviewRuler=62]="hideCursorInOverviewRuler",i[i.hover=63]="hover",i[i.inDiffEditor=64]="inDiffEditor",i[i.inlineSuggest=65]="inlineSuggest",i[i.letterSpacing=66]="letterSpacing",i[i.lightbulb=67]="lightbulb",i[i.lineDecorationsWidth=68]="lineDecorationsWidth",i[i.lineHeight=69]="lineHeight",i[i.lineNumbers=70]="lineNumbers",i[i.lineNumbersMinChars=71]="lineNumbersMinChars",i[i.linkedEditing=72]="linkedEditing",i[i.links=73]="links",i[i.matchBrackets=74]="matchBrackets",i[i.minimap=75]="minimap",i[i.mouseStyle=76]="mouseStyle",i[i.mouseWheelScrollSensitivity=77]="mouseWheelScrollSensitivity",i[i.mouseWheelZoom=78]="mouseWheelZoom",i[i.multiCursorMergeOverlapping=79]="multiCursorMergeOverlapping",i[i.multiCursorModifier=80]="multiCursorModifier",i[i.multiCursorPaste=81]="multiCursorPaste",i[i.multiCursorLimit=82]="multiCursorLimit",i[i.occurrencesHighlight=83]="occurrencesHighlight",i[i.occurrencesHighlightDelay=84]="occurrencesHighlightDelay",i[i.overtypeCursorStyle=85]="overtypeCursorStyle",i[i.overtypeOnPaste=86]="overtypeOnPaste",i[i.overviewRulerBorder=87]="overviewRulerBorder",i[i.overviewRulerLanes=88]="overviewRulerLanes",i[i.padding=89]="padding",i[i.pasteAs=90]="pasteAs",i[i.parameterHints=91]="parameterHints",i[i.peekWidgetDefaultFocus=92]="peekWidgetDefaultFocus",i[i.placeholder=93]="placeholder",i[i.definitionLinkOpensInPeek=94]="definitionLinkOpensInPeek",i[i.quickSuggestions=95]="quickSuggestions",i[i.quickSuggestionsDelay=96]="quickSuggestionsDelay",i[i.readOnly=97]="readOnly",i[i.readOnlyMessage=98]="readOnlyMessage",i[i.renameOnType=99]="renameOnType",i[i.renderControlCharacters=100]="renderControlCharacters",i[i.renderFinalNewline=101]="renderFinalNewline",i[i.renderLineHighlight=102]="renderLineHighlight",i[i.renderLineHighlightOnlyWhenFocus=103]="renderLineHighlightOnlyWhenFocus",i[i.renderValidationDecorations=104]="renderValidationDecorations",i[i.renderWhitespace=105]="renderWhitespace",i[i.revealHorizontalRightPadding=106]="revealHorizontalRightPadding",i[i.roundedSelection=107]="roundedSelection",i[i.rulers=108]="rulers",i[i.scrollbar=109]="scrollbar",i[i.scrollBeyondLastColumn=110]="scrollBeyondLastColumn",i[i.scrollBeyondLastLine=111]="scrollBeyondLastLine",i[i.scrollPredominantAxis=112]="scrollPredominantAxis",i[i.selectionClipboard=113]="selectionClipboard",i[i.selectionHighlight=114]="selectionHighlight",i[i.selectOnLineNumbers=115]="selectOnLineNumbers",i[i.showFoldingControls=116]="showFoldingControls",i[i.showUnused=117]="showUnused",i[i.snippetSuggestions=118]="snippetSuggestions",i[i.smartSelect=119]="smartSelect",i[i.smoothScrolling=120]="smoothScrolling",i[i.stickyScroll=121]="stickyScroll",i[i.stickyTabStops=122]="stickyTabStops",i[i.stopRenderingLineAfter=123]="stopRenderingLineAfter",i[i.suggest=124]="suggest",i[i.suggestFontSize=125]="suggestFontSize",i[i.suggestLineHeight=126]="suggestLineHeight",i[i.suggestOnTriggerCharacters=127]="suggestOnTriggerCharacters",i[i.suggestSelection=128]="suggestSelection",i[i.tabCompletion=129]="tabCompletion",i[i.tabIndex=130]="tabIndex",i[i.unicodeHighlighting=131]="unicodeHighlighting",i[i.unusualLineTerminators=132]="unusualLineTerminators",i[i.useShadowDOM=133]="useShadowDOM",i[i.useTabStops=134]="useTabStops",i[i.wordBreak=135]="wordBreak",i[i.wordSegmenterLocales=136]="wordSegmenterLocales",i[i.wordSeparators=137]="wordSeparators",i[i.wordWrap=138]="wordWrap",i[i.wordWrapBreakAfterCharacters=139]="wordWrapBreakAfterCharacters",i[i.wordWrapBreakBeforeCharacters=140]="wordWrapBreakBeforeCharacters",i[i.wordWrapColumn=141]="wordWrapColumn",i[i.wordWrapOverride1=142]="wordWrapOverride1",i[i.wordWrapOverride2=143]="wordWrapOverride2",i[i.wrappingIndent=144]="wrappingIndent",i[i.wrappingStrategy=145]="wrappingStrategy",i[i.showDeprecated=146]="showDeprecated",i[i.inlayHints=147]="inlayHints",i[i.effectiveCursorStyle=148]="effectiveCursorStyle",i[i.editorClassName=149]="editorClassName",i[i.pixelRatio=150]="pixelRatio",i[i.tabFocusMode=151]="tabFocusMode",i[i.layoutInfo=152]="layoutInfo",i[i.wrappingInfo=153]="wrappingInfo",i[i.defaultColorDecorators=154]="defaultColorDecorators",i[i.colorDecoratorsActivatedOn=155]="colorDecoratorsActivatedOn",i[i.inlineCompletionsAccessibilityVerbose=156]="inlineCompletionsAccessibilityVerbose",i[i.effectiveExperimentalEditContextEnabled=157]="effectiveExperimentalEditContextEnabled"})(O||(O={}));const QZ={acceptSuggestionOnCommitCharacter:U(new Ie(O.acceptSuggestionOnCommitCharacter,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:d(485,"Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:U(new ft(O.acceptSuggestionOnEnter,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",d(486,"Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:d(487,"Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:U(new zO),accessibilityPageSize:U(new je(O.accessibilityPageSize,"accessibilityPageSize",500,1,si.MAX_SAFE_SMALL_INTEGER,{description:d(488,"Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),allowVariableLineHeights:U(new Ie(O.allowVariableLineHeights,"allowVariableLineHeights",!0)),ariaLabel:U(new nn(O.ariaLabel,"ariaLabel",d(489,"Editor content"))),ariaRequired:U(new Ie(O.ariaRequired,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:U(new Ie(O.screenReaderAnnounceInlineSuggestion,"screenReaderAnnounceInlineSuggestion",!0,{description:d(490,"Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:U(new ft(O.autoClosingBrackets,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(491,"Use language configurations to determine when to autoclose brackets."),d(492,"Autoclose brackets only when the cursor is to the left of whitespace."),""],description:d(493,"Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:U(new ft(O.autoClosingComments,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(494,"Use language configurations to determine when to autoclose comments."),d(495,"Autoclose comments only when the cursor is to the left of whitespace."),""],description:d(496,"Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:U(new ft(O.autoClosingDelete,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",d(497,"Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:d(498,"Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:U(new ft(O.autoClosingOvertype,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",d(499,"Type over closing quotes or brackets only if they were automatically inserted."),""],description:d(500,"Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:U(new ft(O.autoClosingQuotes,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(501,"Use language configurations to determine when to autoclose quotes."),d(502,"Autoclose quotes only when the cursor is to the left of whitespace."),""],description:d(503,"Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:U(new Su(O.autoIndent,"autoIndent",ya.Full,"full",["none","keep","brackets","advanced","full"],VO,{enumDescriptions:[d(504,"The editor will not insert indentation automatically."),d(505,"The editor will keep the current line's indentation."),d(506,"The editor will keep the current line's indentation and honor language defined brackets."),d(507,"The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),d(508,"The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:d(509,"Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:U(new Ie(O.automaticLayout,"automaticLayout",!1)),autoSurround:U(new ft(O.autoSurround,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[d(510,"Use language configurations to determine when to automatically surround selections."),d(511,"Surround with quotes but not brackets."),d(512,"Surround with brackets but not quotes."),""],description:d(513,"Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:U(new v8),bracketPairGuides:U(new y8),stickyTabStops:U(new Ie(O.stickyTabStops,"stickyTabStops",!1,{description:d(514,"Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:U(new Ie(O.codeLens,"codeLens",!0,{description:d(515,"Controls whether the editor shows CodeLens.")})),codeLensFontFamily:U(new nn(O.codeLensFontFamily,"codeLensFontFamily","",{description:d(516,"Controls the font family for CodeLens.")})),codeLensFontSize:U(new je(O.codeLensFontSize,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:d(517,"Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:U(new Ie(O.colorDecorators,"colorDecorators",!0,{description:d(518,"Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:U(new ft(O.colorDecoratorsActivatedOn,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[d(519,"Make the color picker appear both on click and hover of the color decorator"),d(520,"Make the color picker appear on hover of the color decorator"),d(521,"Make the color picker appear on click of the color decorator")],description:d(522,"Controls the condition to make a color picker appear from a color decorator.")})),colorDecoratorsLimit:U(new je(O.colorDecoratorsLimit,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:d(523,"Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:U(new Ie(O.columnSelection,"columnSelection",!1,{description:d(524,"Enable that the selection with the mouse and keys is doing column selection.")})),comments:U(new $O),contextmenu:U(new Ie(O.contextmenu,"contextmenu",!0)),copyWithSyntaxHighlighting:U(new Ie(O.copyWithSyntaxHighlighting,"copyWithSyntaxHighlighting",!0,{description:d(525,"Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:U(new Su(O.cursorBlinking,"cursorBlinking",Sa.Blink,"blink",["blink","smooth","phase","expand","solid"],qO,{description:d(526,"Control the cursor animation style.")})),cursorSmoothCaretAnimation:U(new ft(O.cursorSmoothCaretAnimation,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[d(527,"Smooth caret animation is disabled."),d(528,"Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),d(529,"Smooth caret animation is always enabled.")],description:d(530,"Controls whether the smooth caret animation should be enabled.")})),cursorStyle:U(new Su(O.cursorStyle,"cursorStyle",vn.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],t2,{description:d(531,"Controls the cursor style in insert input mode.")})),overtypeCursorStyle:U(new Su(O.overtypeCursorStyle,"overtypeCursorStyle",vn.Block,"block",["line","block","underline","line-thin","block-outline","underline-thin"],t2,{description:d(532,"Controls the cursor style in overtype input mode.")})),cursorSurroundingLines:U(new je(O.cursorSurroundingLines,"cursorSurroundingLines",0,0,si.MAX_SAFE_SMALL_INTEGER,{description:d(533,"Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:U(new ft(O.cursorSurroundingLinesStyle,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[d(534,"`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),d(535,"`cursorSurroundingLines` is enforced always.")],markdownDescription:d(536,"Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:U(new je(O.cursorWidth,"cursorWidth",0,0,si.MAX_SAFE_SMALL_INTEGER,{markdownDescription:d(537,"Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:U(new Ie(O.disableLayerHinting,"disableLayerHinting",!1)),disableMonospaceOptimizations:U(new Ie(O.disableMonospaceOptimizations,"disableMonospaceOptimizations",!1)),domReadOnly:U(new Ie(O.domReadOnly,"domReadOnly",!1)),dragAndDrop:U(new Ie(O.dragAndDrop,"dragAndDrop",!0,{description:d(538,"Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:U(new GO),dropIntoEditor:U(new L8),experimentalEditContextEnabled:U(new Ie(O.experimentalEditContextEnabled,"experimentalEditContextEnabled",!0,{description:d(539,"Sets whether the new experimental edit context should be used instead of the text area."),included:Ny||JI||yh})),stickyScroll:U(new n8),experimentalGpuAcceleration:U(new ft(O.experimentalGpuAcceleration,"experimentalGpuAcceleration","off",["off","on"],{tags:["experimental"],enumDescriptions:[d(540,"Use regular DOM-based rendering."),d(541,"Use GPU acceleration.")],description:d(542,"Controls whether to use the experimental GPU acceleration to render the editor.")})),experimentalWhitespaceRendering:U(new ft(O.experimentalWhitespaceRendering,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[d(543,"Use a new rendering method with svgs."),d(544,"Use a new rendering method with font characters."),d(545,"Use the stable rendering method.")],description:d(546,"Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:U(new nn(O.extraEditorClassName,"extraEditorClassName","")),fastScrollSensitivity:U(new ns(O.fastScrollSensitivity,"fastScrollSensitivity",5,i=>i<=0?5:i,{markdownDescription:d(547,"Scrolling speed multiplier when pressing `Alt`.")})),find:U(new jO),fixedOverflowWidgets:U(new Ie(O.fixedOverflowWidgets,"fixedOverflowWidgets",!1)),folding:U(new Ie(O.folding,"folding",!0,{description:d(548,"Controls whether the editor has code folding enabled.")})),foldingStrategy:U(new ft(O.foldingStrategy,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[d(549,"Use a language-specific folding strategy if available, else the indentation-based one."),d(550,"Use the indentation-based folding strategy.")],description:d(551,"Controls the strategy for computing folding ranges.")})),foldingHighlight:U(new Ie(O.foldingHighlight,"foldingHighlight",!0,{description:d(552,"Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:U(new Ie(O.foldingImportsByDefault,"foldingImportsByDefault",!1,{description:d(553,"Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:U(new je(O.foldingMaximumRegions,"foldingMaximumRegions",5e3,10,65e3,{description:d(554,"The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:U(new Ie(O.unfoldOnClickAfterEndOfLine,"unfoldOnClickAfterEndOfLine",!1,{description:d(555,"Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:U(new nn(O.fontFamily,"fontFamily",jr.fontFamily,{description:d(556,"Controls the font family.")})),fontInfo:U(new YO),fontLigatures2:U(new Sl),fontSize:U(new ZO),fontWeight:U(new Cl),fontVariations:U(new kl),formatOnPaste:U(new Ie(O.formatOnPaste,"formatOnPaste",!1,{description:d(557,"Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:U(new Ie(O.formatOnType,"formatOnType",!1,{description:d(558,"Controls whether the editor should automatically format the line after typing.")})),glyphMargin:U(new Ie(O.glyphMargin,"glyphMargin",!0,{description:d(559,"Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:U(new JO),hideCursorInOverviewRuler:U(new Ie(O.hideCursorInOverviewRuler,"hideCursorInOverviewRuler",!1,{description:d(560,"Controls whether the cursor should be hidden in the overview ruler.")})),hover:U(new e8),inDiffEditor:U(new Ie(O.inDiffEditor,"inDiffEditor",!1)),letterSpacing:U(new ns(O.letterSpacing,"letterSpacing",jr.letterSpacing,i=>ns.clamp(i,-5,20),{description:d(561,"Controls the letter spacing in pixels.")})),lightbulb:U(new i8),lineDecorationsWidth:U(new r8),lineHeight:U(new o8),lineNumbers:U(new g8),lineNumbersMinChars:U(new je(O.lineNumbersMinChars,"lineNumbersMinChars",5,1,300)),linkedEditing:U(new Ie(O.linkedEditing,"linkedEditing",!1,{description:d(562,"Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:U(new Ie(O.links,"links",!0,{description:d(563,"Controls whether the editor should detect links and make them clickable.")})),matchBrackets:U(new ft(O.matchBrackets,"matchBrackets","always",["always","near","never"],{description:d(564,"Highlight matching brackets.")})),minimap:U(new a8),mouseStyle:U(new ft(O.mouseStyle,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:U(new ns(O.mouseWheelScrollSensitivity,"mouseWheelScrollSensitivity",1,i=>i===0?1:i,{markdownDescription:d(565,"A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:U(new Ie(O.mouseWheelZoom,"mouseWheelZoom",!1,{markdownDescription:Me?d(566,"Zoom the font of the editor when using mouse wheel and holding `Cmd`."):d(567,"Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:U(new Ie(O.multiCursorMergeOverlapping,"multiCursorMergeOverlapping",!0,{description:d(568,"Merge multiple cursors when they are overlapping.")})),multiCursorModifier:U(new Su(O.multiCursorModifier,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],l8,{markdownEnumDescriptions:[d(569,"Maps to `Control` on Windows and Linux and to `Command` on macOS."),d(570,"Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:d(571,"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:U(new ft(O.multiCursorPaste,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[d(572,"Each cursor pastes a single line of the text."),d(573,"Each cursor pastes the full text.")],markdownDescription:d(574,"Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:U(new je(O.multiCursorLimit,"multiCursorLimit",1e4,1,1e5,{markdownDescription:d(575,"Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:U(new ft(O.occurrencesHighlight,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[d(576,"Does not highlight occurrences."),d(577,"Highlights occurrences only in the current file."),d(578,"Experimental: Highlights occurrences across all valid open files.")],markdownDescription:d(579,"Controls whether occurrences should be highlighted across open files.")})),occurrencesHighlightDelay:U(new je(O.occurrencesHighlightDelay,"occurrencesHighlightDelay",0,0,2e3,{description:d(580,"Controls the delay in milliseconds after which occurrences are highlighted."),tags:["preview"]})),overtypeOnPaste:U(new Ie(O.overtypeOnPaste,"overtypeOnPaste",!0,{description:d(581,"Controls whether pasting should overtype.")})),overviewRulerBorder:U(new Ie(O.overviewRulerBorder,"overviewRulerBorder",!0,{description:d(582,"Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:U(new je(O.overviewRulerLanes,"overviewRulerLanes",3,0,3)),padding:U(new c8),pasteAs:U(new D8),parameterHints:U(new h8),peekWidgetDefaultFocus:U(new ft(O.peekWidgetDefaultFocus,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[d(583,"Focus the tree when opening peek"),d(584,"Focus the editor when opening peek")],description:d(585,"Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:U(new d8),definitionLinkOpensInPeek:U(new Ie(O.definitionLinkOpensInPeek,"definitionLinkOpensInPeek",!1,{description:d(586,"Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:U(new f8),quickSuggestionsDelay:U(new je(O.quickSuggestionsDelay,"quickSuggestionsDelay",10,0,si.MAX_SAFE_SMALL_INTEGER,{description:d(587,"Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:U(new Ie(O.readOnly,"readOnly",!1)),readOnlyMessage:U(new m8),renameOnType:U(new Ie(O.renameOnType,"renameOnType",!1,{description:d(588,"Controls whether the editor auto renames on type."),markdownDeprecationMessage:d(589,"Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:U(new Ie(O.renderControlCharacters,"renderControlCharacters",!0,{description:d(590,"Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:U(new ft(O.renderFinalNewline,"renderFinalNewline",rs?"dimmed":"on",["off","on","dimmed"],{description:d(591,"Render last line number when the file ends with a newline.")})),renderLineHighlight:U(new ft(O.renderLineHighlight,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",d(592,"Highlights both the gutter and the current line.")],description:d(593,"Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:U(new Ie(O.renderLineHighlightOnlyWhenFocus,"renderLineHighlightOnlyWhenFocus",!1,{description:d(594,"Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:U(new ft(O.renderValidationDecorations,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:U(new ft(O.renderWhitespace,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",d(595,"Render whitespace characters except for single spaces between words."),d(596,"Render whitespace characters only on selected text."),d(597,"Render only trailing whitespace characters."),""],description:d(598,"Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:U(new je(O.revealHorizontalRightPadding,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:U(new Ie(O.roundedSelection,"roundedSelection",!0,{description:d(599,"Controls whether selections should have rounded corners.")})),rulers:U(new p8),scrollbar:U(new b8),scrollBeyondLastColumn:U(new je(O.scrollBeyondLastColumn,"scrollBeyondLastColumn",4,0,si.MAX_SAFE_SMALL_INTEGER,{description:d(600,"Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:U(new Ie(O.scrollBeyondLastLine,"scrollBeyondLastLine",!0,{description:d(601,"Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:U(new Ie(O.scrollPredominantAxis,"scrollPredominantAxis",!0,{description:d(602,"Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:U(new Ie(O.selectionClipboard,"selectionClipboard",!0,{description:d(603,"Controls whether the Linux primary clipboard should be supported."),included:rs})),selectionHighlight:U(new Ie(O.selectionHighlight,"selectionHighlight",!0,{description:d(604,"Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:U(new Ie(O.selectOnLineNumbers,"selectOnLineNumbers",!0)),showFoldingControls:U(new ft(O.showFoldingControls,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[d(605,"Always show the folding controls."),d(606,"Never show the folding controls and reduce the gutter size."),d(607,"Only show the folding controls when the mouse is over the gutter.")],description:d(608,"Controls when the folding controls on the gutter are shown.")})),showUnused:U(new Ie(O.showUnused,"showUnused",!0,{description:d(609,"Controls fading out of unused code.")})),showDeprecated:U(new Ie(O.showDeprecated,"showDeprecated",!0,{description:d(610,"Controls strikethrough deprecated variables.")})),inlayHints:U(new s8),snippetSuggestions:U(new ft(O.snippetSuggestions,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[d(611,"Show snippet suggestions on top of other suggestions."),d(612,"Show snippet suggestions below other suggestions."),d(613,"Show snippets suggestions with other suggestions."),d(614,"Do not show snippet suggestions.")],description:d(615,"Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:U(new k8),smoothScrolling:U(new Ie(O.smoothScrolling,"smoothScrolling",!1,{description:d(616,"Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:U(new je(O.stopRenderingLineAfter,"stopRenderingLineAfter",1e4,-1,si.MAX_SAFE_SMALL_INTEGER)),suggest:U(new S8),inlineSuggest:U(new w8),inlineCompletionsAccessibilityVerbose:U(new Ie(O.inlineCompletionsAccessibilityVerbose,"inlineCompletionsAccessibilityVerbose",!1,{description:d(617,"Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:U(new je(O.suggestFontSize,"suggestFontSize",0,0,1e3,{markdownDescription:d(618,"Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:U(new je(O.suggestLineHeight,"suggestLineHeight",0,0,1e3,{markdownDescription:d(619,"Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:U(new Ie(O.suggestOnTriggerCharacters,"suggestOnTriggerCharacters",!0,{description:d(620,"Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:U(new ft(O.suggestSelection,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[d(621,"Always select the first suggestion."),d(622,"Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),d(623,"Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:d(624,"Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:U(new ft(O.tabCompletion,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[d(625,"Tab complete will insert the best matching suggestion when pressing tab."),d(626,"Disable tab completions."),d(627,"Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:d(628,"Enables tab completions.")})),tabIndex:U(new je(O.tabIndex,"tabIndex",0,-1,si.MAX_SAFE_SMALL_INTEGER)),unicodeHighlight:U(new _8),unusualLineTerminators:U(new ft(O.unusualLineTerminators,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[d(629,"Unusual line terminators are automatically removed."),d(630,"Unusual line terminators are ignored."),d(631,"Unusual line terminators prompt to be removed.")],description:d(632,"Remove unusual line terminators that might cause problems.")})),useShadowDOM:U(new Ie(O.useShadowDOM,"useShadowDOM",!0)),useTabStops:U(new Ie(O.useTabStops,"useTabStops",!0,{description:d(633,"Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:U(new ft(O.wordBreak,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[d(634,"Use the default line break rule."),d(635,"Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:d(636,"Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:U(new C8),wordSeparators:U(new nn(O.wordSeparators,"wordSeparators",xT,{description:d(637,"Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:U(new ft(O.wordWrap,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[d(638,"Lines will never wrap."),d(639,"Lines will wrap at the viewport width."),d(640,"Lines will wrap at `#editor.wordWrapColumn#`."),d(641,"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:d(642,"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:U(new nn(O.wordWrapBreakAfterCharacters,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),wordWrapBreakBeforeCharacters:U(new nn(O.wordWrapBreakBeforeCharacters,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),wordWrapColumn:U(new je(O.wordWrapColumn,"wordWrapColumn",80,1,si.MAX_SAFE_SMALL_INTEGER,{markdownDescription:d(643,"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:U(new ft(O.wordWrapOverride1,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:U(new ft(O.wordWrapOverride2,"wordWrapOverride2","inherit",["off","on","inherit"])),effectiveCursorStyle:U(new XO),editorClassName:U(new KO),defaultColorDecorators:U(new ft(O.defaultColorDecorators,"defaultColorDecorators","auto",["auto","always","never"],{enumDescriptions:[d(644,"Show default color decorators only when no extension provides colors decorators."),d(645,"Always show default color decorators."),d(646,"Never show default color decorators.")],description:d(647,"Controls whether inline color decorations should be shown using the default document color provider.")})),pixelRatio:U(new u8),tabFocusMode:U(new Ie(O.tabFocusMode,"tabFocusMode",!1,{markdownDescription:d(648,"Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:U(new ad),wrappingInfo:U(new x8),wrappingIndent:U(new E8),wrappingStrategy:U(new t8),effectiveExperimentalEditContextEnabled:U(new QO)},N8="telemetry.telemetryLevel",R8="telemetry.enableCrashReporter",M8="telemetry.enableTelemetry";var To;(function(i){i[i.NONE=0]="NONE",i[i.CRASH=1]="CRASH",i[i.ERROR=2]="ERROR",i[i.USAGE=3]="USAGE"})(To||(To={}));var El;(function(i){i.OFF="off",i.CRASH="crash",i.ERROR="error",i.ON="all"})(El||(El={}));class O8{constructor(e){this.value=e,this.isTrustedTelemetryValue=!0}}class F8{constructor(){this.telemetryLevel=To.NONE,this.sessionId="someValue.sessionId",this.machineId="someValue.machineId",this.sqmId="someValue.sqmId",this.devDeviceId="someValue.devDeviceId",this.firstSessionDate="someValue.firstSessionDate",this.sendErrorTelemetry=!1}publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}}new F8;class ZZ{async publicLog(e,t,n){}async publicLogError(e,t,n){}}const P8="telemetry",JZ={id:P8,name:d(2011,"Telemetry")};function eJ(i,e){return!e.isBuilt&&!e.disableTelemetry?!0:!(e.disableTelemetry||!i.enableTelemetry)}function tJ(i,e){return e.extensionTestsLocationURI?!0:!(e.isBuilt||e.disableTelemetry||i.enableTelemetry&&i.aiConfig?.ariaKey)}function iJ(i){const e=i.getValue(N8),t=i.getValue(R8);if(i.getValue(M8)===!1||t===!1)return To.NONE;switch(e??El.ON){case El.ON:return To.USAGE;case El.ERROR:return To.ERROR;case El.CRASH:return To.CRASH;case El.OFF:return To.NONE}}const B8=new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces","amlext"]);function nJ(i){if(!i)return"none";const e=hT(i);return B8.has(e)?e:"other"}function W8(i,e){if(!i||!i.includes("/")&&!i.includes("\\"))return i;let t=i;const n=[];for(const a of e)for(;;){const l=a.exec(i);if(!l)break;n.push([l.index,a.lastIndex])}const s=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,r=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let o=0;for(t="";;){const a=r.exec(i);if(!a)break;const l=n.some(([c,h])=>a.index<h&&c<r.lastIndex);!s.test(a[0])&&!l&&(t+=i.substring(o,a.index)+"<REDACTED: user-file-path>",o=r.lastIndex)}return o<i.length&&(t+=i.substr(o)),t}function U8(i){if(!i)return i;const e=[{label:"Google API Key",regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:"JWT",regex:/eyJ[0eXAiOiJKV1Qi|hbGci|a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+/},{label:"Slack Token",regex:/xox[pbar]\-[A-Za-z0-9]/},{label:"GitHub Token",regex:/(gh[psuro]_[a-zA-Z0-9]{36}|github_pat_[a-zA-Z0-9]{22}_[a-zA-Z0-9]{59})/},{label:"Generic Secret",regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/i},{label:"CLI Credentials",regex:/((login|psexec|(certutil|psexec)\.exe).{1,50}(\s-u(ser(name)?)?\s+.{3,100})?\s-(admin|user|vm|root)?p(ass(word)?)?\s+["']?[^$\-\/\s]|(^|[\s\r\n\\])net(\.exe)?.{1,5}(user\s+|share\s+\/user:| user -? secrets ? set) \s + [^ $\s \/])/},{label:"Microsoft Entra ID",regex:/eyJ(?:0eXAiOiJKV1Qi|hbGci|[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.)/},{label:"Email",regex:/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/}];for(const t of e)if(t.regex.test(i))return`<REDACTED: ${t.label}>`;return i}function sJ(i,e){return zy(i,t=>{if(t instanceof O8||Object.hasOwnProperty.call(t,"isTrustedTelemetryValue"))return t.value;if(typeof t=="string"){let n=t.replaceAll("%20"," ");n=W8(n,e);for(const s of e)n=n.replace(s,"");return n=U8(n),n}})}function H8(i,e){const t=i;typeof t.vscodeWindowId!="number"&&Object.defineProperty(t,"vscodeWindowId",{get:()=>e})}const $e=window;function rJ(i){return i===$e?!1:typeof i?.vscodeWindowId=="number"}const vr=be("codeEditorService"),yr=be("modelService"),V8=be("treeViewsDndService");class Cc{constructor(){this.mapWindowIdToZoomLevel=new Map,this._onDidChangeZoomLevel=new A,this.onDidChangeZoomLevel=this._onDidChangeZoomLevel.event,this.mapWindowIdToZoomFactor=new Map,this._onDidChangeFullscreen=new A,this.onDidChangeFullscreen=this._onDidChangeFullscreen.event,this.mapWindowIdToFullScreen=new Map}static{this.INSTANCE=new Cc}getZoomLevel(e){return this.mapWindowIdToZoomLevel.get(this.getWindowId(e))??0}setZoomLevel(e,t){if(this.getZoomLevel(t)===e)return;const n=this.getWindowId(t);this.mapWindowIdToZoomLevel.set(n,e),this._onDidChangeZoomLevel.fire(n)}getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}setZoomFactor(e,t){this.mapWindowIdToZoomFactor.set(this.getWindowId(t),e)}setFullscreen(e,t){if(this.isFullscreen(t)===e)return;const n=this.getWindowId(t);this.mapWindowIdToFullScreen.set(n,e),this._onDidChangeFullscreen.fire(n)}isFullscreen(e){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(e))}getWindowId(e){return e.vscodeWindowId}}function AT(i,e,t){typeof e=="string"&&(e=i.matchMedia(e)),e.addEventListener("change",t)}function oJ(i){return Cc.INSTANCE.getZoomLevel(i)}function y0(i){return Cc.INSTANCE.getZoomFactor(i)}function aJ(i,e){Cc.INSTANCE.setFullscreen(i,e)}function lJ(i){return Cc.INSTANCE.isFullscreen(i)}const cJ=Cc.INSTANCE.onDidChangeFullscreen,uu=navigator.userAgent,Gd=uu.indexOf("Firefox")>=0,NT=uu.indexOf("AppleWebKit")>=0,O1=uu.indexOf("Chrome")>=0,F1=!O1&&uu.indexOf("Safari")>=0,z8=!O1&&!F1&&NT;uu.indexOf("Electron/")>=0;const hJ=uu.indexOf("Android")>=0;let gp=!1;if(typeof $e.matchMedia=="function"){const i=$e.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=$e.matchMedia("(display-mode: fullscreen)");gp=i.matches,AT($e,i,({matches:t})=>{gp&&e.matches||(gp=t)})}function $8(){return gp}function uJ(){return navigator?.windowControlsOverlay?.visible}function dJ(i){return i.navigator?.windowControlsOverlay?.getTitlebarAreaRect()}var ld;(function(i){i[i.Always=0]="Always",i[i.FullScreen=1]="FullScreen",i[i.None=2]="None"})(ld||(ld={}));const P1={clipboard:{writeText:yh||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:yh||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:yh||$8()?ld.Always:navigator.keyboard||F1?ld.FullScreen:ld.None,pointerEvents:$e.PointerEvent&&("ontouchstart"in $e||navigator.maxTouchPoints>0)};var w;(function(i){i[i.DependsOnKbLayout=-1]="DependsOnKbLayout",i[i.Unknown=0]="Unknown",i[i.Backspace=1]="Backspace",i[i.Tab=2]="Tab",i[i.Enter=3]="Enter",i[i.Shift=4]="Shift",i[i.Ctrl=5]="Ctrl",i[i.Alt=6]="Alt",i[i.PauseBreak=7]="PauseBreak",i[i.CapsLock=8]="CapsLock",i[i.Escape=9]="Escape",i[i.Space=10]="Space",i[i.PageUp=11]="PageUp",i[i.PageDown=12]="PageDown",i[i.End=13]="End",i[i.Home=14]="Home",i[i.LeftArrow=15]="LeftArrow",i[i.UpArrow=16]="UpArrow",i[i.RightArrow=17]="RightArrow",i[i.DownArrow=18]="DownArrow",i[i.Insert=19]="Insert",i[i.Delete=20]="Delete",i[i.Digit0=21]="Digit0",i[i.Digit1=22]="Digit1",i[i.Digit2=23]="Digit2",i[i.Digit3=24]="Digit3",i[i.Digit4=25]="Digit4",i[i.Digit5=26]="Digit5",i[i.Digit6=27]="Digit6",i[i.Digit7=28]="Digit7",i[i.Digit8=29]="Digit8",i[i.Digit9=30]="Digit9",i[i.KeyA=31]="KeyA",i[i.KeyB=32]="KeyB",i[i.KeyC=33]="KeyC",i[i.KeyD=34]="KeyD",i[i.KeyE=35]="KeyE",i[i.KeyF=36]="KeyF",i[i.KeyG=37]="KeyG",i[i.KeyH=38]="KeyH",i[i.KeyI=39]="KeyI",i[i.KeyJ=40]="KeyJ",i[i.KeyK=41]="KeyK",i[i.KeyL=42]="KeyL",i[i.KeyM=43]="KeyM",i[i.KeyN=44]="KeyN",i[i.KeyO=45]="KeyO",i[i.KeyP=46]="KeyP",i[i.KeyQ=47]="KeyQ",i[i.KeyR=48]="KeyR",i[i.KeyS=49]="KeyS",i[i.KeyT=50]="KeyT",i[i.KeyU=51]="KeyU",i[i.KeyV=52]="KeyV",i[i.KeyW=53]="KeyW",i[i.KeyX=54]="KeyX",i[i.KeyY=55]="KeyY",i[i.KeyZ=56]="KeyZ",i[i.Meta=57]="Meta",i[i.ContextMenu=58]="ContextMenu",i[i.F1=59]="F1",i[i.F2=60]="F2",i[i.F3=61]="F3",i[i.F4=62]="F4",i[i.F5=63]="F5",i[i.F6=64]="F6",i[i.F7=65]="F7",i[i.F8=66]="F8",i[i.F9=67]="F9",i[i.F10=68]="F10",i[i.F11=69]="F11",i[i.F12=70]="F12",i[i.F13=71]="F13",i[i.F14=72]="F14",i[i.F15=73]="F15",i[i.F16=74]="F16",i[i.F17=75]="F17",i[i.F18=76]="F18",i[i.F19=77]="F19",i[i.F20=78]="F20",i[i.F21=79]="F21",i[i.F22=80]="F22",i[i.F23=81]="F23",i[i.F24=82]="F24",i[i.NumLock=83]="NumLock",i[i.ScrollLock=84]="ScrollLock",i[i.Semicolon=85]="Semicolon",i[i.Equal=86]="Equal",i[i.Comma=87]="Comma",i[i.Minus=88]="Minus",i[i.Period=89]="Period",i[i.Slash=90]="Slash",i[i.Backquote=91]="Backquote",i[i.BracketLeft=92]="BracketLeft",i[i.Backslash=93]="Backslash",i[i.BracketRight=94]="BracketRight",i[i.Quote=95]="Quote",i[i.OEM_8=96]="OEM_8",i[i.IntlBackslash=97]="IntlBackslash",i[i.Numpad0=98]="Numpad0",i[i.Numpad1=99]="Numpad1",i[i.Numpad2=100]="Numpad2",i[i.Numpad3=101]="Numpad3",i[i.Numpad4=102]="Numpad4",i[i.Numpad5=103]="Numpad5",i[i.Numpad6=104]="Numpad6",i[i.Numpad7=105]="Numpad7",i[i.Numpad8=106]="Numpad8",i[i.Numpad9=107]="Numpad9",i[i.NumpadMultiply=108]="NumpadMultiply",i[i.NumpadAdd=109]="NumpadAdd",i[i.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",i[i.NumpadSubtract=111]="NumpadSubtract",i[i.NumpadDecimal=112]="NumpadDecimal",i[i.NumpadDivide=113]="NumpadDivide",i[i.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",i[i.ABNT_C1=115]="ABNT_C1",i[i.ABNT_C2=116]="ABNT_C2",i[i.AudioVolumeMute=117]="AudioVolumeMute",i[i.AudioVolumeUp=118]="AudioVolumeUp",i[i.AudioVolumeDown=119]="AudioVolumeDown",i[i.BrowserSearch=120]="BrowserSearch",i[i.BrowserHome=121]="BrowserHome",i[i.BrowserBack=122]="BrowserBack",i[i.BrowserForward=123]="BrowserForward",i[i.MediaTrackNext=124]="MediaTrackNext",i[i.MediaTrackPrevious=125]="MediaTrackPrevious",i[i.MediaStop=126]="MediaStop",i[i.MediaPlayPause=127]="MediaPlayPause",i[i.LaunchMediaPlayer=128]="LaunchMediaPlayer",i[i.LaunchMail=129]="LaunchMail",i[i.LaunchApp2=130]="LaunchApp2",i[i.Clear=131]="Clear",i[i.MAX_VALUE=132]="MAX_VALUE"})(w||(w={}));var C;(function(i){i[i.DependsOnKbLayout=-1]="DependsOnKbLayout",i[i.None=0]="None",i[i.Hyper=1]="Hyper",i[i.Super=2]="Super",i[i.Fn=3]="Fn",i[i.FnLock=4]="FnLock",i[i.Suspend=5]="Suspend",i[i.Resume=6]="Resume",i[i.Turbo=7]="Turbo",i[i.Sleep=8]="Sleep",i[i.WakeUp=9]="WakeUp",i[i.KeyA=10]="KeyA",i[i.KeyB=11]="KeyB",i[i.KeyC=12]="KeyC",i[i.KeyD=13]="KeyD",i[i.KeyE=14]="KeyE",i[i.KeyF=15]="KeyF",i[i.KeyG=16]="KeyG",i[i.KeyH=17]="KeyH",i[i.KeyI=18]="KeyI",i[i.KeyJ=19]="KeyJ",i[i.KeyK=20]="KeyK",i[i.KeyL=21]="KeyL",i[i.KeyM=22]="KeyM",i[i.KeyN=23]="KeyN",i[i.KeyO=24]="KeyO",i[i.KeyP=25]="KeyP",i[i.KeyQ=26]="KeyQ",i[i.KeyR=27]="KeyR",i[i.KeyS=28]="KeyS",i[i.KeyT=29]="KeyT",i[i.KeyU=30]="KeyU",i[i.KeyV=31]="KeyV",i[i.KeyW=32]="KeyW",i[i.KeyX=33]="KeyX",i[i.KeyY=34]="KeyY",i[i.KeyZ=35]="KeyZ",i[i.Digit1=36]="Digit1",i[i.Digit2=37]="Digit2",i[i.Digit3=38]="Digit3",i[i.Digit4=39]="Digit4",i[i.Digit5=40]="Digit5",i[i.Digit6=41]="Digit6",i[i.Digit7=42]="Digit7",i[i.Digit8=43]="Digit8",i[i.Digit9=44]="Digit9",i[i.Digit0=45]="Digit0",i[i.Enter=46]="Enter",i[i.Escape=47]="Escape",i[i.Backspace=48]="Backspace",i[i.Tab=49]="Tab",i[i.Space=50]="Space",i[i.Minus=51]="Minus",i[i.Equal=52]="Equal",i[i.BracketLeft=53]="BracketLeft",i[i.BracketRight=54]="BracketRight",i[i.Backslash=55]="Backslash",i[i.IntlHash=56]="IntlHash",i[i.Semicolon=57]="Semicolon",i[i.Quote=58]="Quote",i[i.Backquote=59]="Backquote",i[i.Comma=60]="Comma",i[i.Period=61]="Period",i[i.Slash=62]="Slash",i[i.CapsLock=63]="CapsLock",i[i.F1=64]="F1",i[i.F2=65]="F2",i[i.F3=66]="F3",i[i.F4=67]="F4",i[i.F5=68]="F5",i[i.F6=69]="F6",i[i.F7=70]="F7",i[i.F8=71]="F8",i[i.F9=72]="F9",i[i.F10=73]="F10",i[i.F11=74]="F11",i[i.F12=75]="F12",i[i.PrintScreen=76]="PrintScreen",i[i.ScrollLock=77]="ScrollLock",i[i.Pause=78]="Pause",i[i.Insert=79]="Insert",i[i.Home=80]="Home",i[i.PageUp=81]="PageUp",i[i.Delete=82]="Delete",i[i.End=83]="End",i[i.PageDown=84]="PageDown",i[i.ArrowRight=85]="ArrowRight",i[i.ArrowLeft=86]="ArrowLeft",i[i.ArrowDown=87]="ArrowDown",i[i.ArrowUp=88]="ArrowUp",i[i.NumLock=89]="NumLock",i[i.NumpadDivide=90]="NumpadDivide",i[i.NumpadMultiply=91]="NumpadMultiply",i[i.NumpadSubtract=92]="NumpadSubtract",i[i.NumpadAdd=93]="NumpadAdd",i[i.NumpadEnter=94]="NumpadEnter",i[i.Numpad1=95]="Numpad1",i[i.Numpad2=96]="Numpad2",i[i.Numpad3=97]="Numpad3",i[i.Numpad4=98]="Numpad4",i[i.Numpad5=99]="Numpad5",i[i.Numpad6=100]="Numpad6",i[i.Numpad7=101]="Numpad7",i[i.Numpad8=102]="Numpad8",i[i.Numpad9=103]="Numpad9",i[i.Numpad0=104]="Numpad0",i[i.NumpadDecimal=105]="NumpadDecimal",i[i.IntlBackslash=106]="IntlBackslash",i[i.ContextMenu=107]="ContextMenu",i[i.Power=108]="Power",i[i.NumpadEqual=109]="NumpadEqual",i[i.F13=110]="F13",i[i.F14=111]="F14",i[i.F15=112]="F15",i[i.F16=113]="F16",i[i.F17=114]="F17",i[i.F18=115]="F18",i[i.F19=116]="F19",i[i.F20=117]="F20",i[i.F21=118]="F21",i[i.F22=119]="F22",i[i.F23=120]="F23",i[i.F24=121]="F24",i[i.Open=122]="Open",i[i.Help=123]="Help",i[i.Select=124]="Select",i[i.Again=125]="Again",i[i.Undo=126]="Undo",i[i.Cut=127]="Cut",i[i.Copy=128]="Copy",i[i.Paste=129]="Paste",i[i.Find=130]="Find",i[i.AudioVolumeMute=131]="AudioVolumeMute",i[i.AudioVolumeUp=132]="AudioVolumeUp",i[i.AudioVolumeDown=133]="AudioVolumeDown",i[i.NumpadComma=134]="NumpadComma",i[i.IntlRo=135]="IntlRo",i[i.KanaMode=136]="KanaMode",i[i.IntlYen=137]="IntlYen",i[i.Convert=138]="Convert",i[i.NonConvert=139]="NonConvert",i[i.Lang1=140]="Lang1",i[i.Lang2=141]="Lang2",i[i.Lang3=142]="Lang3",i[i.Lang4=143]="Lang4",i[i.Lang5=144]="Lang5",i[i.Abort=145]="Abort",i[i.Props=146]="Props",i[i.NumpadParenLeft=147]="NumpadParenLeft",i[i.NumpadParenRight=148]="NumpadParenRight",i[i.NumpadBackspace=149]="NumpadBackspace",i[i.NumpadMemoryStore=150]="NumpadMemoryStore",i[i.NumpadMemoryRecall=151]="NumpadMemoryRecall",i[i.NumpadMemoryClear=152]="NumpadMemoryClear",i[i.NumpadMemoryAdd=153]="NumpadMemoryAdd",i[i.NumpadMemorySubtract=154]="NumpadMemorySubtract",i[i.NumpadClear=155]="NumpadClear",i[i.NumpadClearEntry=156]="NumpadClearEntry",i[i.ControlLeft=157]="ControlLeft",i[i.ShiftLeft=158]="ShiftLeft",i[i.AltLeft=159]="AltLeft",i[i.MetaLeft=160]="MetaLeft",i[i.ControlRight=161]="ControlRight",i[i.ShiftRight=162]="ShiftRight",i[i.AltRight=163]="AltRight",i[i.MetaRight=164]="MetaRight",i[i.BrightnessUp=165]="BrightnessUp",i[i.BrightnessDown=166]="BrightnessDown",i[i.MediaPlay=167]="MediaPlay",i[i.MediaRecord=168]="MediaRecord",i[i.MediaFastForward=169]="MediaFastForward",i[i.MediaRewind=170]="MediaRewind",i[i.MediaTrackNext=171]="MediaTrackNext",i[i.MediaTrackPrevious=172]="MediaTrackPrevious",i[i.MediaStop=173]="MediaStop",i[i.Eject=174]="Eject",i[i.MediaPlayPause=175]="MediaPlayPause",i[i.MediaSelect=176]="MediaSelect",i[i.LaunchMail=177]="LaunchMail",i[i.LaunchApp2=178]="LaunchApp2",i[i.LaunchApp1=179]="LaunchApp1",i[i.SelectTask=180]="SelectTask",i[i.LaunchScreenSaver=181]="LaunchScreenSaver",i[i.BrowserSearch=182]="BrowserSearch",i[i.BrowserHome=183]="BrowserHome",i[i.BrowserBack=184]="BrowserBack",i[i.BrowserForward=185]="BrowserForward",i[i.BrowserStop=186]="BrowserStop",i[i.BrowserRefresh=187]="BrowserRefresh",i[i.BrowserFavorites=188]="BrowserFavorites",i[i.ZoomToggle=189]="ZoomToggle",i[i.MailReply=190]="MailReply",i[i.MailForward=191]="MailForward",i[i.MailSend=192]="MailSend",i[i.MAX_VALUE=193]="MAX_VALUE"})(C||(C={}));class jy{constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||w.Unknown}}const pp=new jy,S0=new jy,k0=new jy,RT=new Array(230),q8={},MT=[],OT=Object.create(null),FT=Object.create(null),fJ={lowerCaseToEnum:i=>FT[i]||C.None,toEnum:i=>OT[i]||C.None,toString:i=>MT[i]||"None"},Yy=[],C0=[];for(let i=0;i<=C.MAX_VALUE;i++)Yy[i]=w.DependsOnKbLayout;for(let i=0;i<=w.MAX_VALUE;i++)C0[i]=C.DependsOnKbLayout;(function(){const i="",e=[[1,C.None,"None",w.Unknown,"unknown",0,"VK_UNKNOWN",i,i],[1,C.Hyper,"Hyper",w.Unknown,i,0,i,i,i],[1,C.Super,"Super",w.Unknown,i,0,i,i,i],[1,C.Fn,"Fn",w.Unknown,i,0,i,i,i],[1,C.FnLock,"FnLock",w.Unknown,i,0,i,i,i],[1,C.Suspend,"Suspend",w.Unknown,i,0,i,i,i],[1,C.Resume,"Resume",w.Unknown,i,0,i,i,i],[1,C.Turbo,"Turbo",w.Unknown,i,0,i,i,i],[1,C.Sleep,"Sleep",w.Unknown,i,0,"VK_SLEEP",i,i],[1,C.WakeUp,"WakeUp",w.Unknown,i,0,i,i,i],[0,C.KeyA,"KeyA",w.KeyA,"A",65,"VK_A",i,i],[0,C.KeyB,"KeyB",w.KeyB,"B",66,"VK_B",i,i],[0,C.KeyC,"KeyC",w.KeyC,"C",67,"VK_C",i,i],[0,C.KeyD,"KeyD",w.KeyD,"D",68,"VK_D",i,i],[0,C.KeyE,"KeyE",w.KeyE,"E",69,"VK_E",i,i],[0,C.KeyF,"KeyF",w.KeyF,"F",70,"VK_F",i,i],[0,C.KeyG,"KeyG",w.KeyG,"G",71,"VK_G",i,i],[0,C.KeyH,"KeyH",w.KeyH,"H",72,"VK_H",i,i],[0,C.KeyI,"KeyI",w.KeyI,"I",73,"VK_I",i,i],[0,C.KeyJ,"KeyJ",w.KeyJ,"J",74,"VK_J",i,i],[0,C.KeyK,"KeyK",w.KeyK,"K",75,"VK_K",i,i],[0,C.KeyL,"KeyL",w.KeyL,"L",76,"VK_L",i,i],[0,C.KeyM,"KeyM",w.KeyM,"M",77,"VK_M",i,i],[0,C.KeyN,"KeyN",w.KeyN,"N",78,"VK_N",i,i],[0,C.KeyO,"KeyO",w.KeyO,"O",79,"VK_O",i,i],[0,C.KeyP,"KeyP",w.KeyP,"P",80,"VK_P",i,i],[0,C.KeyQ,"KeyQ",w.KeyQ,"Q",81,"VK_Q",i,i],[0,C.KeyR,"KeyR",w.KeyR,"R",82,"VK_R",i,i],[0,C.KeyS,"KeyS",w.KeyS,"S",83,"VK_S",i,i],[0,C.KeyT,"KeyT",w.KeyT,"T",84,"VK_T",i,i],[0,C.KeyU,"KeyU",w.KeyU,"U",85,"VK_U",i,i],[0,C.KeyV,"KeyV",w.KeyV,"V",86,"VK_V",i,i],[0,C.KeyW,"KeyW",w.KeyW,"W",87,"VK_W",i,i],[0,C.KeyX,"KeyX",w.KeyX,"X",88,"VK_X",i,i],[0,C.KeyY,"KeyY",w.KeyY,"Y",89,"VK_Y",i,i],[0,C.KeyZ,"KeyZ",w.KeyZ,"Z",90,"VK_Z",i,i],[0,C.Digit1,"Digit1",w.Digit1,"1",49,"VK_1",i,i],[0,C.Digit2,"Digit2",w.Digit2,"2",50,"VK_2",i,i],[0,C.Digit3,"Digit3",w.Digit3,"3",51,"VK_3",i,i],[0,C.Digit4,"Digit4",w.Digit4,"4",52,"VK_4",i,i],[0,C.Digit5,"Digit5",w.Digit5,"5",53,"VK_5",i,i],[0,C.Digit6,"Digit6",w.Digit6,"6",54,"VK_6",i,i],[0,C.Digit7,"Digit7",w.Digit7,"7",55,"VK_7",i,i],[0,C.Digit8,"Digit8",w.Digit8,"8",56,"VK_8",i,i],[0,C.Digit9,"Digit9",w.Digit9,"9",57,"VK_9",i,i],[0,C.Digit0,"Digit0",w.Digit0,"0",48,"VK_0",i,i],[1,C.Enter,"Enter",w.Enter,"Enter",13,"VK_RETURN",i,i],[1,C.Escape,"Escape",w.Escape,"Escape",27,"VK_ESCAPE",i,i],[1,C.Backspace,"Backspace",w.Backspace,"Backspace",8,"VK_BACK",i,i],[1,C.Tab,"Tab",w.Tab,"Tab",9,"VK_TAB",i,i],[1,C.Space,"Space",w.Space,"Space",32,"VK_SPACE",i,i],[0,C.Minus,"Minus",w.Minus,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,C.Equal,"Equal",w.Equal,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,C.BracketLeft,"BracketLeft",w.BracketLeft,"[",219,"VK_OEM_4","[","OEM_4"],[0,C.BracketRight,"BracketRight",w.BracketRight,"]",221,"VK_OEM_6","]","OEM_6"],[0,C.Backslash,"Backslash",w.Backslash,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,C.IntlHash,"IntlHash",w.Unknown,i,0,i,i,i],[0,C.Semicolon,"Semicolon",w.Semicolon,";",186,"VK_OEM_1",";","OEM_1"],[0,C.Quote,"Quote",w.Quote,"'",222,"VK_OEM_7","'","OEM_7"],[0,C.Backquote,"Backquote",w.Backquote,"`",192,"VK_OEM_3","`","OEM_3"],[0,C.Comma,"Comma",w.Comma,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,C.Period,"Period",w.Period,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,C.Slash,"Slash",w.Slash,"/",191,"VK_OEM_2","/","OEM_2"],[1,C.CapsLock,"CapsLock",w.CapsLock,"CapsLock",20,"VK_CAPITAL",i,i],[1,C.F1,"F1",w.F1,"F1",112,"VK_F1",i,i],[1,C.F2,"F2",w.F2,"F2",113,"VK_F2",i,i],[1,C.F3,"F3",w.F3,"F3",114,"VK_F3",i,i],[1,C.F4,"F4",w.F4,"F4",115,"VK_F4",i,i],[1,C.F5,"F5",w.F5,"F5",116,"VK_F5",i,i],[1,C.F6,"F6",w.F6,"F6",117,"VK_F6",i,i],[1,C.F7,"F7",w.F7,"F7",118,"VK_F7",i,i],[1,C.F8,"F8",w.F8,"F8",119,"VK_F8",i,i],[1,C.F9,"F9",w.F9,"F9",120,"VK_F9",i,i],[1,C.F10,"F10",w.F10,"F10",121,"VK_F10",i,i],[1,C.F11,"F11",w.F11,"F11",122,"VK_F11",i,i],[1,C.F12,"F12",w.F12,"F12",123,"VK_F12",i,i],[1,C.PrintScreen,"PrintScreen",w.Unknown,i,0,i,i,i],[1,C.ScrollLock,"ScrollLock",w.ScrollLock,"ScrollLock",145,"VK_SCROLL",i,i],[1,C.Pause,"Pause",w.PauseBreak,"PauseBreak",19,"VK_PAUSE",i,i],[1,C.Insert,"Insert",w.Insert,"Insert",45,"VK_INSERT",i,i],[1,C.Home,"Home",w.Home,"Home",36,"VK_HOME",i,i],[1,C.PageUp,"PageUp",w.PageUp,"PageUp",33,"VK_PRIOR",i,i],[1,C.Delete,"Delete",w.Delete,"Delete",46,"VK_DELETE",i,i],[1,C.End,"End",w.End,"End",35,"VK_END",i,i],[1,C.PageDown,"PageDown",w.PageDown,"PageDown",34,"VK_NEXT",i,i],[1,C.ArrowRight,"ArrowRight",w.RightArrow,"RightArrow",39,"VK_RIGHT","Right",i],[1,C.ArrowLeft,"ArrowLeft",w.LeftArrow,"LeftArrow",37,"VK_LEFT","Left",i],[1,C.ArrowDown,"ArrowDown",w.DownArrow,"DownArrow",40,"VK_DOWN","Down",i],[1,C.ArrowUp,"ArrowUp",w.UpArrow,"UpArrow",38,"VK_UP","Up",i],[1,C.NumLock,"NumLock",w.NumLock,"NumLock",144,"VK_NUMLOCK",i,i],[1,C.NumpadDivide,"NumpadDivide",w.NumpadDivide,"NumPad_Divide",111,"VK_DIVIDE",i,i],[1,C.NumpadMultiply,"NumpadMultiply",w.NumpadMultiply,"NumPad_Multiply",106,"VK_MULTIPLY",i,i],[1,C.NumpadSubtract,"NumpadSubtract",w.NumpadSubtract,"NumPad_Subtract",109,"VK_SUBTRACT",i,i],[1,C.NumpadAdd,"NumpadAdd",w.NumpadAdd,"NumPad_Add",107,"VK_ADD",i,i],[1,C.NumpadEnter,"NumpadEnter",w.Enter,i,0,i,i,i],[1,C.Numpad1,"Numpad1",w.Numpad1,"NumPad1",97,"VK_NUMPAD1",i,i],[1,C.Numpad2,"Numpad2",w.Numpad2,"NumPad2",98,"VK_NUMPAD2",i,i],[1,C.Numpad3,"Numpad3",w.Numpad3,"NumPad3",99,"VK_NUMPAD3",i,i],[1,C.Numpad4,"Numpad4",w.Numpad4,"NumPad4",100,"VK_NUMPAD4",i,i],[1,C.Numpad5,"Numpad5",w.Numpad5,"NumPad5",101,"VK_NUMPAD5",i,i],[1,C.Numpad6,"Numpad6",w.Numpad6,"NumPad6",102,"VK_NUMPAD6",i,i],[1,C.Numpad7,"Numpad7",w.Numpad7,"NumPad7",103,"VK_NUMPAD7",i,i],[1,C.Numpad8,"Numpad8",w.Numpad8,"NumPad8",104,"VK_NUMPAD8",i,i],[1,C.Numpad9,"Numpad9",w.Numpad9,"NumPad9",105,"VK_NUMPAD9",i,i],[1,C.Numpad0,"Numpad0",w.Numpad0,"NumPad0",96,"VK_NUMPAD0",i,i],[1,C.NumpadDecimal,"NumpadDecimal",w.NumpadDecimal,"NumPad_Decimal",110,"VK_DECIMAL",i,i],[0,C.IntlBackslash,"IntlBackslash",w.IntlBackslash,"OEM_102",226,"VK_OEM_102",i,i],[1,C.ContextMenu,"ContextMenu",w.ContextMenu,"ContextMenu",93,i,i,i],[1,C.Power,"Power",w.Unknown,i,0,i,i,i],[1,C.NumpadEqual,"NumpadEqual",w.Unknown,i,0,i,i,i],[1,C.F13,"F13",w.F13,"F13",124,"VK_F13",i,i],[1,C.F14,"F14",w.F14,"F14",125,"VK_F14",i,i],[1,C.F15,"F15",w.F15,"F15",126,"VK_F15",i,i],[1,C.F16,"F16",w.F16,"F16",127,"VK_F16",i,i],[1,C.F17,"F17",w.F17,"F17",128,"VK_F17",i,i],[1,C.F18,"F18",w.F18,"F18",129,"VK_F18",i,i],[1,C.F19,"F19",w.F19,"F19",130,"VK_F19",i,i],[1,C.F20,"F20",w.F20,"F20",131,"VK_F20",i,i],[1,C.F21,"F21",w.F21,"F21",132,"VK_F21",i,i],[1,C.F22,"F22",w.F22,"F22",133,"VK_F22",i,i],[1,C.F23,"F23",w.F23,"F23",134,"VK_F23",i,i],[1,C.F24,"F24",w.F24,"F24",135,"VK_F24",i,i],[1,C.Open,"Open",w.Unknown,i,0,i,i,i],[1,C.Help,"Help",w.Unknown,i,0,i,i,i],[1,C.Select,"Select",w.Unknown,i,0,i,i,i],[1,C.Again,"Again",w.Unknown,i,0,i,i,i],[1,C.Undo,"Undo",w.Unknown,i,0,i,i,i],[1,C.Cut,"Cut",w.Unknown,i,0,i,i,i],[1,C.Copy,"Copy",w.Unknown,i,0,i,i,i],[1,C.Paste,"Paste",w.Unknown,i,0,i,i,i],[1,C.Find,"Find",w.Unknown,i,0,i,i,i],[1,C.AudioVolumeMute,"AudioVolumeMute",w.AudioVolumeMute,"AudioVolumeMute",173,"VK_VOLUME_MUTE",i,i],[1,C.AudioVolumeUp,"AudioVolumeUp",w.AudioVolumeUp,"AudioVolumeUp",175,"VK_VOLUME_UP",i,i],[1,C.AudioVolumeDown,"AudioVolumeDown",w.AudioVolumeDown,"AudioVolumeDown",174,"VK_VOLUME_DOWN",i,i],[1,C.NumpadComma,"NumpadComma",w.NUMPAD_SEPARATOR,"NumPad_Separator",108,"VK_SEPARATOR",i,i],[0,C.IntlRo,"IntlRo",w.ABNT_C1,"ABNT_C1",193,"VK_ABNT_C1",i,i],[1,C.KanaMode,"KanaMode",w.Unknown,i,0,i,i,i],[0,C.IntlYen,"IntlYen",w.Unknown,i,0,i,i,i],[1,C.Convert,"Convert",w.Unknown,i,0,i,i,i],[1,C.NonConvert,"NonConvert",w.Unknown,i,0,i,i,i],[1,C.Lang1,"Lang1",w.Unknown,i,0,i,i,i],[1,C.Lang2,"Lang2",w.Unknown,i,0,i,i,i],[1,C.Lang3,"Lang3",w.Unknown,i,0,i,i,i],[1,C.Lang4,"Lang4",w.Unknown,i,0,i,i,i],[1,C.Lang5,"Lang5",w.Unknown,i,0,i,i,i],[1,C.Abort,"Abort",w.Unknown,i,0,i,i,i],[1,C.Props,"Props",w.Unknown,i,0,i,i,i],[1,C.NumpadParenLeft,"NumpadParenLeft",w.Unknown,i,0,i,i,i],[1,C.NumpadParenRight,"NumpadParenRight",w.Unknown,i,0,i,i,i],[1,C.NumpadBackspace,"NumpadBackspace",w.Unknown,i,0,i,i,i],[1,C.NumpadMemoryStore,"NumpadMemoryStore",w.Unknown,i,0,i,i,i],[1,C.NumpadMemoryRecall,"NumpadMemoryRecall",w.Unknown,i,0,i,i,i],[1,C.NumpadMemoryClear,"NumpadMemoryClear",w.Unknown,i,0,i,i,i],[1,C.NumpadMemoryAdd,"NumpadMemoryAdd",w.Unknown,i,0,i,i,i],[1,C.NumpadMemorySubtract,"NumpadMemorySubtract",w.Unknown,i,0,i,i,i],[1,C.NumpadClear,"NumpadClear",w.Clear,"Clear",12,"VK_CLEAR",i,i],[1,C.NumpadClearEntry,"NumpadClearEntry",w.Unknown,i,0,i,i,i],[1,C.None,i,w.Ctrl,"Ctrl",17,"VK_CONTROL",i,i],[1,C.None,i,w.Shift,"Shift",16,"VK_SHIFT",i,i],[1,C.None,i,w.Alt,"Alt",18,"VK_MENU",i,i],[1,C.None,i,w.Meta,"Meta",91,"VK_COMMAND",i,i],[1,C.ControlLeft,"ControlLeft",w.Ctrl,i,0,"VK_LCONTROL",i,i],[1,C.ShiftLeft,"ShiftLeft",w.Shift,i,0,"VK_LSHIFT",i,i],[1,C.AltLeft,"AltLeft",w.Alt,i,0,"VK_LMENU",i,i],[1,C.MetaLeft,"MetaLeft",w.Meta,i,0,"VK_LWIN",i,i],[1,C.ControlRight,"ControlRight",w.Ctrl,i,0,"VK_RCONTROL",i,i],[1,C.ShiftRight,"ShiftRight",w.Shift,i,0,"VK_RSHIFT",i,i],[1,C.AltRight,"AltRight",w.Alt,i,0,"VK_RMENU",i,i],[1,C.MetaRight,"MetaRight",w.Meta,i,0,"VK_RWIN",i,i],[1,C.BrightnessUp,"BrightnessUp",w.Unknown,i,0,i,i,i],[1,C.BrightnessDown,"BrightnessDown",w.Unknown,i,0,i,i,i],[1,C.MediaPlay,"MediaPlay",w.Unknown,i,0,i,i,i],[1,C.MediaRecord,"MediaRecord",w.Unknown,i,0,i,i,i],[1,C.MediaFastForward,"MediaFastForward",w.Unknown,i,0,i,i,i],[1,C.MediaRewind,"MediaRewind",w.Unknown,i,0,i,i,i],[1,C.MediaTrackNext,"MediaTrackNext",w.MediaTrackNext,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",i,i],[1,C.MediaTrackPrevious,"MediaTrackPrevious",w.MediaTrackPrevious,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",i,i],[1,C.MediaStop,"MediaStop",w.MediaStop,"MediaStop",178,"VK_MEDIA_STOP",i,i],[1,C.Eject,"Eject",w.Unknown,i,0,i,i,i],[1,C.MediaPlayPause,"MediaPlayPause",w.MediaPlayPause,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",i,i],[1,C.MediaSelect,"MediaSelect",w.LaunchMediaPlayer,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",i,i],[1,C.LaunchMail,"LaunchMail",w.LaunchMail,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",i,i],[1,C.LaunchApp2,"LaunchApp2",w.LaunchApp2,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",i,i],[1,C.LaunchApp1,"LaunchApp1",w.Unknown,i,0,"VK_MEDIA_LAUNCH_APP1",i,i],[1,C.SelectTask,"SelectTask",w.Unknown,i,0,i,i,i],[1,C.LaunchScreenSaver,"LaunchScreenSaver",w.Unknown,i,0,i,i,i],[1,C.BrowserSearch,"BrowserSearch",w.BrowserSearch,"BrowserSearch",170,"VK_BROWSER_SEARCH",i,i],[1,C.BrowserHome,"BrowserHome",w.BrowserHome,"BrowserHome",172,"VK_BROWSER_HOME",i,i],[1,C.BrowserBack,"BrowserBack",w.BrowserBack,"BrowserBack",166,"VK_BROWSER_BACK",i,i],[1,C.BrowserForward,"BrowserForward",w.BrowserForward,"BrowserForward",167,"VK_BROWSER_FORWARD",i,i],[1,C.BrowserStop,"BrowserStop",w.Unknown,i,0,"VK_BROWSER_STOP",i,i],[1,C.BrowserRefresh,"BrowserRefresh",w.Unknown,i,0,"VK_BROWSER_REFRESH",i,i],[1,C.BrowserFavorites,"BrowserFavorites",w.Unknown,i,0,"VK_BROWSER_FAVORITES",i,i],[1,C.ZoomToggle,"ZoomToggle",w.Unknown,i,0,i,i,i],[1,C.MailReply,"MailReply",w.Unknown,i,0,i,i,i],[1,C.MailForward,"MailForward",w.Unknown,i,0,i,i,i],[1,C.MailSend,"MailSend",w.Unknown,i,0,i,i,i],[1,C.None,i,w.KEY_IN_COMPOSITION,"KeyInComposition",229,i,i,i],[1,C.None,i,w.ABNT_C2,"ABNT_C2",194,"VK_ABNT_C2",i,i],[1,C.None,i,w.OEM_8,"OEM_8",223,"VK_OEM_8",i,i],[1,C.None,i,w.Unknown,i,0,"VK_KANA",i,i],[1,C.None,i,w.Unknown,i,0,"VK_HANGUL",i,i],[1,C.None,i,w.Unknown,i,0,"VK_JUNJA",i,i],[1,C.None,i,w.Unknown,i,0,"VK_FINAL",i,i],[1,C.None,i,w.Unknown,i,0,"VK_HANJA",i,i],[1,C.None,i,w.Unknown,i,0,"VK_KANJI",i,i],[1,C.None,i,w.Unknown,i,0,"VK_CONVERT",i,i],[1,C.None,i,w.Unknown,i,0,"VK_NONCONVERT",i,i],[1,C.None,i,w.Unknown,i,0,"VK_ACCEPT",i,i],[1,C.None,i,w.Unknown,i,0,"VK_MODECHANGE",i,i],[1,C.None,i,w.Unknown,i,0,"VK_SELECT",i,i],[1,C.None,i,w.Unknown,i,0,"VK_PRINT",i,i],[1,C.None,i,w.Unknown,i,0,"VK_EXECUTE",i,i],[1,C.None,i,w.Unknown,i,0,"VK_SNAPSHOT",i,i],[1,C.None,i,w.Unknown,i,0,"VK_HELP",i,i],[1,C.None,i,w.Unknown,i,0,"VK_APPS",i,i],[1,C.None,i,w.Unknown,i,0,"VK_PROCESSKEY",i,i],[1,C.None,i,w.Unknown,i,0,"VK_PACKET",i,i],[1,C.None,i,w.Unknown,i,0,"VK_DBE_SBCSCHAR",i,i],[1,C.None,i,w.Unknown,i,0,"VK_DBE_DBCSCHAR",i,i],[1,C.None,i,w.Unknown,i,0,"VK_ATTN",i,i],[1,C.None,i,w.Unknown,i,0,"VK_CRSEL",i,i],[1,C.None,i,w.Unknown,i,0,"VK_EXSEL",i,i],[1,C.None,i,w.Unknown,i,0,"VK_EREOF",i,i],[1,C.None,i,w.Unknown,i,0,"VK_PLAY",i,i],[1,C.None,i,w.Unknown,i,0,"VK_ZOOM",i,i],[1,C.None,i,w.Unknown,i,0,"VK_NONAME",i,i],[1,C.None,i,w.Unknown,i,0,"VK_PA1",i,i],[1,C.None,i,w.Unknown,i,0,"VK_OEM_CLEAR",i,i]],t=[],n=[];for(const s of e){const[r,o,a,l,c,h,u,f,g]=s;if(n[o]||(n[o]=!0,MT[o]=a,OT[a]=o,FT[a.toLowerCase()]=o,r&&(Yy[o]=l,l!==w.Unknown&&l!==w.Enter&&l!==w.Ctrl&&l!==w.Shift&&l!==w.Alt&&l!==w.Meta&&(C0[l]=o))),!t[l]){if(t[l]=!0,!c)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);pp.define(l,c),S0.define(l,f||c),k0.define(l,g||f||c)}h&&(RT[h]=l),u&&(q8[u]=l)}C0[w.Enter]=C.Enter})();var Wr;(function(i){function e(a){return pp.keyCodeToStr(a)}i.toString=e;function t(a){return pp.strToKeyCode(a)}i.fromString=t;function n(a){return S0.keyCodeToStr(a)}i.toUserSettingsUS=n;function s(a){return k0.keyCodeToStr(a)}i.toUserSettingsGeneral=s;function r(a){return S0.strToKeyCode(a)||k0.strToKeyCode(a)}i.fromUserSettings=r;function o(a){if(a>=w.Numpad0&&a<=w.NumpadDivide)return null;switch(a){case w.UpArrow:return"Up";case w.DownArrow:return"Down";case w.LeftArrow:return"Left";case w.RightArrow:return"Right"}return pp.keyCodeToStr(a)}i.toElectronAccelerator=o})(Wr||(Wr={}));var Ne;(function(i){i[i.CtrlCmd=2048]="CtrlCmd",i[i.Shift=1024]="Shift",i[i.Alt=512]="Alt",i[i.WinCtrl=256]="WinCtrl"})(Ne||(Ne={}));function PT(i,e){const t=(e&65535)<<16>>>0;return(i|t)>>>0}var xl;(function(i){i[i.CtrlCmd=2048]="CtrlCmd",i[i.Shift=1024]="Shift",i[i.Alt=512]="Alt",i[i.WinCtrl=256]="WinCtrl",i[i.KeyCode=255]="KeyCode"})(xl||(xl={}));function E0(i,e){if(typeof i=="number"){if(i===0)return null;const t=(i&65535)>>>0,n=(i&4294901760)>>>16;return n!==0?new mp([_g(t,e),_g(n,e)]):new mp([_g(t,e)])}else{const t=[];for(let n=0;n<i.length;n++)t.push(_g(i[n],e));return new mp(t)}}function _g(i,e){const t=!!(i&xl.CtrlCmd),n=!!(i&xl.WinCtrl),s=e===At.Macintosh?n:t,r=!!(i&xl.Shift),o=!!(i&xl.Alt),a=e===At.Macintosh?t:n,l=i&xl.KeyCode;return new oc(s,r,o,a,l)}class oc{constructor(e,t,n,s,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=s,this.keyCode=r}equals(e){return e instanceof oc&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){const e=this.ctrlKey?"1":"0",t=this.shiftKey?"1":"0",n=this.altKey?"1":"0",s=this.metaKey?"1":"0";return`K${e}${t}${n}${s}${this.keyCode}`}isModifierKey(){return this.keyCode===w.Unknown||this.keyCode===w.Ctrl||this.keyCode===w.Meta||this.keyCode===w.Alt||this.keyCode===w.Shift}toKeybinding(){return new mp([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===w.Ctrl||this.shiftKey&&this.keyCode===w.Shift||this.altKey&&this.keyCode===w.Alt||this.metaKey&&this.keyCode===w.Meta}}class BT{constructor(e,t,n,s,r){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=s,this.scanCode=r}equals(e){return e instanceof BT&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.scanCode===e.scanCode}getHashCode(){const e=this.ctrlKey?"1":"0",t=this.shiftKey?"1":"0",n=this.altKey?"1":"0",s=this.metaKey?"1":"0";return`S${e}${t}${n}${s}${this.scanCode}`}isDuplicateModifierCase(){return this.ctrlKey&&(this.scanCode===C.ControlLeft||this.scanCode===C.ControlRight)||this.shiftKey&&(this.scanCode===C.ShiftLeft||this.scanCode===C.ShiftRight)||this.altKey&&(this.scanCode===C.AltLeft||this.scanCode===C.AltRight)||this.metaKey&&(this.scanCode===C.MetaLeft||this.scanCode===C.MetaRight)}}class mp{constructor(e){if(e.length===0)throw Sf("chords");this.chords=e}getHashCode(){let e="";for(let t=0,n=this.chords.length;t<n;t++)t!==0&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}}class K8{constructor(e,t,n,s,r,o){this.ctrlKey=e,this.shiftKey=t,this.altKey=n,this.metaKey=s,this.keyLabel=r,this.keyAriaLabel=o}}class G8{}function j8(i){if(i.charCode){const t=String.fromCharCode(i.charCode).toUpperCase();return Wr.fromString(t)}const e=i.keyCode;if(e===3)return w.PauseBreak;if(Gd)switch(e){case 59:return w.Semicolon;case 60:if(rs)return w.IntlBackslash;break;case 61:return w.Equal;case 107:return w.NumpadAdd;case 109:return w.NumpadSubtract;case 173:return w.Minus;case 224:if(Me)return w.Meta;break}else if(NT){if(Me&&e===93)return w.Meta;if(!Me&&e===92)return w.Meta}return RT[e]||w.Unknown}const Y8=Me?Ne.WinCtrl:Ne.CtrlCmd,X8=Ne.Alt,Q8=Ne.Shift,Z8=Me?Ne.CtrlCmd:Ne.WinCtrl;function gJ(i){const e=[];return i.ctrlKey&&e.push("ctrl"),i.shiftKey&&e.push("shift"),i.altKey&&e.push("alt"),i.metaKey&&e.push("meta"),`modifiers: [${e.join(",")}], code: ${i.code}, keyCode: ${i.keyCode}, key: ${i.key}`}function pJ(i){const e=[];return i.ctrlKey&&e.push("ctrl"),i.shiftKey&&e.push("shift"),i.altKey&&e.push("alt"),i.metaKey&&e.push("meta"),`modifiers: [${e.join(",")}], code: ${i.code}, keyCode: ${i.keyCode} ('${Wr.toString(i.keyCode)}')`}class at{constructor(e){this._standardKeyboardEventBrand=!0;const t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=t.getModifierState?.("AltGraph"),this.keyCode=j8(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===w.Ctrl,this.altKey=this.altKey||this.keyCode===w.Alt,this.shiftKey=this.shiftKey||this.keyCode===w.Shift,this.metaKey=this.metaKey||this.keyCode===w.Meta,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=w.Unknown;this.keyCode!==w.Ctrl&&this.keyCode!==w.Shift&&this.keyCode!==w.Alt&&this.keyCode!==w.Meta&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=Y8),this.altKey&&(t|=X8),this.shiftKey&&(t|=Q8),this.metaKey&&(t|=Z8),t|=e,t}_computeKeyCodeChord(){let e=w.Unknown;return this.keyCode!==w.Ctrl&&this.keyCode!==w.Shift&&this.keyCode!==w.Alt&&this.keyCode!==w.Meta&&(e=this.keyCode),new oc(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}}const n2=new WeakMap;function J8(i){if(!i.parent||i.parent===i)return null;try{const e=i.location,t=i.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return null}catch{return null}return i.parent}class eF{static getSameOriginWindowChain(e){let t=n2.get(e);if(!t){t=[],n2.set(e,t);let n=e,s;do s=J8(n),s?t.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):t.push({window:new WeakRef(n),iframeElement:null}),n=s;while(n)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,s=0;const r=this.getSameOriginWindowChain(e);for(const o of r){const a=o.window.deref();if(n+=a?.scrollY??0,s+=a?.scrollX??0,a===t||!o.iframeElement)break;const l=o.iframeElement.getBoundingClientRect();n+=l.top,s+=l.left}return{top:n,left:s}}}async function mJ(i,e){if(!crypto.subtle)throw new Error("'crypto.subtle' is not available so webviews will not work. This is likely because the editor is not running in a secure context (https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts).");const t=JSON.stringify({parentOrigin:i,salt:e}),s=new TextEncoder().encode(t),r=await crypto.subtle.digest("sha-256",s);return tF(r)}function tF(i){const t=Array.from(new Uint8Array(i)).map(n=>n.toString(16).padStart(2,"0")).join("");return BigInt(`0x${t}`).toString(32).padStart(52,"0")}class Ns{constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.defaultPrevented=t.defaultPrevented,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);const n=eF.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=n.left,this.posy-=n.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}}class Vh{constructor(e,t=0,n=0){this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t;let s=!1;if(O1){const r=navigator.userAgent.match(/Chrome\/(\d+)/);s=(r?parseInt(r[1]):123)<=122}if(e){const r=e,o=e,a=e.view?.devicePixelRatio||1;if(typeof r.wheelDeltaY<"u")s?this.deltaY=r.wheelDeltaY/(120*a):this.deltaY=r.wheelDeltaY/120;else if(typeof o.VERTICAL_AXIS<"u"&&o.axis===o.VERTICAL_AXIS)this.deltaY=-o.detail/3;else if(e.type==="wheel"){const l=e;l.deltaMode===l.DOM_DELTA_LINE?Gd&&!Me?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof r.wheelDeltaX<"u")F1&&hi?this.deltaX=-(r.wheelDeltaX/120):s?this.deltaX=r.wheelDeltaX/(120*a):this.deltaX=r.wheelDeltaX/120;else if(typeof o.HORIZONTAL_AXIS<"u"&&o.axis===o.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){const l=e;l.deltaMode===l.DOM_DELTA_LINE?Gd&&!Me?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(s?this.deltaY=e.wheelDelta/(120*a):this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}}/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:WT,setPrototypeOf:s2,isFrozen:iF,getPrototypeOf:nF,getOwnPropertyDescriptor:sF}=Object;let{freeze:Rn,seal:Us,create:UT}=Object,{apply:x0,construct:L0}=typeof Reflect<"u"&&Reflect;Rn||(Rn=function(e){return e});Us||(Us=function(e){return e});x0||(x0=function(e,t,n){return e.apply(t,n)});L0||(L0=function(e,t){return new e(...t)});const wg=Mn(Array.prototype.forEach),rF=Mn(Array.prototype.lastIndexOf),r2=Mn(Array.prototype.pop),ku=Mn(Array.prototype.push),oF=Mn(Array.prototype.splice),bp=Mn(String.prototype.toLowerCase),Yb=Mn(String.prototype.toString),o2=Mn(String.prototype.match),Cu=Mn(String.prototype.replace),aF=Mn(String.prototype.indexOf),lF=Mn(String.prototype.trim),Xs=Mn(Object.prototype.hasOwnProperty),xn=Mn(RegExp.prototype.test),Eu=cF(TypeError);function Mn(i){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return x0(i,e,n)}}function cF(i){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return L0(i,t)}}function et(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:bp;s2&&s2(i,null);let n=e.length;for(;n--;){let s=e[n];if(typeof s=="string"){const r=t(s);r!==s&&(iF(e)||(e[n]=r),s=r)}i[s]=!0}return i}function hF(i){for(let e=0;e<i.length;e++)Xs(i,e)||(i[e]=null);return i}function bo(i){const e=UT(null);for(const[t,n]of WT(i))Xs(i,t)&&(Array.isArray(n)?e[t]=hF(n):n&&typeof n=="object"&&n.constructor===Object?e[t]=bo(n):e[t]=n);return e}function xu(i,e){for(;i!==null;){const n=sF(i,e);if(n){if(n.get)return Mn(n.get);if(typeof n.value=="function")return Mn(n.value)}i=nF(i)}function t(){return null}return t}const a2=Rn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Xb=Rn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Qb=Rn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),uF=Rn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Zb=Rn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),dF=Rn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),l2=Rn(["#text"]),c2=Rn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Jb=Rn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),h2=Rn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),vg=Rn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),fF=Us(/\{\{[\w\W]*|[\w\W]*\}\}/gm),gF=Us(/<%[\w\W]*|[\w\W]*%>/gm),pF=Us(/\$\{[\w\W]*/gm),mF=Us(/^data-[\-\w.\u00B7-\uFFFF]+$/),bF=Us(/^aria-[\-\w]+$/),HT=Us(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),_F=Us(/^(?:\w+script|data):/i),wF=Us(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),VT=Us(/^html$/i),vF=Us(/^[a-z][.\w]*(-[.\w]+)+$/i);var u2=Object.freeze({__proto__:null,ARIA_ATTR:bF,ATTR_WHITESPACE:wF,CUSTOM_ELEMENT:vF,DATA_ATTR:mF,DOCTYPE_NAME:VT,ERB_EXPR:gF,IS_ALLOWED_URI:HT,IS_SCRIPT_OR_DATA:_F,MUSTACHE_EXPR:fF,TMPLIT_EXPR:pF});const Lu={element:1,text:3,progressingInstruction:7,comment:8,document:9},yF=function(){return typeof window>"u"?null:window},SF=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const s="data-tt-policy-suffix";t&&t.hasAttribute(s)&&(n=t.getAttribute(s));const r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}},d2=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function zT(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yF();const e=Le=>zT(Le);if(e.version="3.2.6",e.removed=[],!i||!i.document||i.document.nodeType!==Lu.document||!i.Element)return e.isSupported=!1,e;let{document:t}=i;const n=t,s=n.currentScript,{DocumentFragment:r,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:c,NamedNodeMap:h=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:u,DOMParser:f,trustedTypes:g}=i,p=l.prototype,m=xu(p,"cloneNode"),_=xu(p,"remove"),v=xu(p,"nextSibling"),y=xu(p,"childNodes"),E=xu(p,"parentNode");if(typeof o=="function"){const Le=t.createElement("template");Le.content&&Le.content.ownerDocument&&(t=Le.content.ownerDocument)}let N,I="";const{implementation:B,createNodeIterator:x,createDocumentFragment:D,getElementsByTagName:F}=t,{importNode:te}=n;let J=d2();e.isSupported=typeof WT=="function"&&typeof E=="function"&&B&&B.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:le,ERB_EXPR:ee,TMPLIT_EXPR:z,DATA_ATTR:Z,ARIA_ATTR:ne,IS_SCRIPT_OR_DATA:ve,ATTR_WHITESPACE:Ae,CUSTOM_ELEMENT:Ge}=u2;let{IS_ALLOWED_URI:Ot}=u2,Ke=null;const Hi=et({},[...a2,...Xb,...Qb,...Zb,...l2]);let Lt=null;const ui=et({},[...c2,...Jb,...h2,...vg]);let yt=Object.seal(UT(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Vi=null,ta=null,Tc=!0,_b=!0,Ok=!1,Fk=!0,Ac=!1,ng=!0,ol=!1,wb=!1,vb=!1,Nc=!1,sg=!1,rg=!1,Pk=!0,Bk=!1;const uR="user-content-";let yb=!0,bu=!1,Rc={},Mc=null;const Wk=et({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Uk=null;const Hk=et({},["audio","video","img","source","image","track"]);let Sb=null;const Vk=et({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),og="http://www.w3.org/1998/Math/MathML",ag="http://www.w3.org/2000/svg",oo="http://www.w3.org/1999/xhtml";let Oc=oo,kb=!1,Cb=null;const dR=et({},[og,ag,oo],Yb);let lg=et({},["mi","mo","mn","ms","mtext"]),cg=et({},["annotation-xml"]);const fR=et({},["title","style","font","a","script"]);let _u=null;const gR=["application/xhtml+xml","text/html"],pR="text/html";let zi=null,Fc=null;const mR=t.createElement("form"),zk=function(M){return M instanceof RegExp||M instanceof Function},Eb=function(){let M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Fc&&Fc===M)){if((!M||typeof M!="object")&&(M={}),M=bo(M),_u=gR.indexOf(M.PARSER_MEDIA_TYPE)===-1?pR:M.PARSER_MEDIA_TYPE,zi=_u==="application/xhtml+xml"?Yb:bp,Ke=Xs(M,"ALLOWED_TAGS")?et({},M.ALLOWED_TAGS,zi):Hi,Lt=Xs(M,"ALLOWED_ATTR")?et({},M.ALLOWED_ATTR,zi):ui,Cb=Xs(M,"ALLOWED_NAMESPACES")?et({},M.ALLOWED_NAMESPACES,Yb):dR,Sb=Xs(M,"ADD_URI_SAFE_ATTR")?et(bo(Vk),M.ADD_URI_SAFE_ATTR,zi):Vk,Uk=Xs(M,"ADD_DATA_URI_TAGS")?et(bo(Hk),M.ADD_DATA_URI_TAGS,zi):Hk,Mc=Xs(M,"FORBID_CONTENTS")?et({},M.FORBID_CONTENTS,zi):Wk,Vi=Xs(M,"FORBID_TAGS")?et({},M.FORBID_TAGS,zi):bo({}),ta=Xs(M,"FORBID_ATTR")?et({},M.FORBID_ATTR,zi):bo({}),Rc=Xs(M,"USE_PROFILES")?M.USE_PROFILES:!1,Tc=M.ALLOW_ARIA_ATTR!==!1,_b=M.ALLOW_DATA_ATTR!==!1,Ok=M.ALLOW_UNKNOWN_PROTOCOLS||!1,Fk=M.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ac=M.SAFE_FOR_TEMPLATES||!1,ng=M.SAFE_FOR_XML!==!1,ol=M.WHOLE_DOCUMENT||!1,Nc=M.RETURN_DOM||!1,sg=M.RETURN_DOM_FRAGMENT||!1,rg=M.RETURN_TRUSTED_TYPE||!1,vb=M.FORCE_BODY||!1,Pk=M.SANITIZE_DOM!==!1,Bk=M.SANITIZE_NAMED_PROPS||!1,yb=M.KEEP_CONTENT!==!1,bu=M.IN_PLACE||!1,Ot=M.ALLOWED_URI_REGEXP||HT,Oc=M.NAMESPACE||oo,lg=M.MATHML_TEXT_INTEGRATION_POINTS||lg,cg=M.HTML_INTEGRATION_POINTS||cg,yt=M.CUSTOM_ELEMENT_HANDLING||{},M.CUSTOM_ELEMENT_HANDLING&&zk(M.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(yt.tagNameCheck=M.CUSTOM_ELEMENT_HANDLING.tagNameCheck),M.CUSTOM_ELEMENT_HANDLING&&zk(M.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(yt.attributeNameCheck=M.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),M.CUSTOM_ELEMENT_HANDLING&&typeof M.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(yt.allowCustomizedBuiltInElements=M.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ac&&(_b=!1),sg&&(Nc=!0),Rc&&(Ke=et({},l2),Lt=[],Rc.html===!0&&(et(Ke,a2),et(Lt,c2)),Rc.svg===!0&&(et(Ke,Xb),et(Lt,Jb),et(Lt,vg)),Rc.svgFilters===!0&&(et(Ke,Qb),et(Lt,Jb),et(Lt,vg)),Rc.mathMl===!0&&(et(Ke,Zb),et(Lt,h2),et(Lt,vg))),M.ADD_TAGS&&(Ke===Hi&&(Ke=bo(Ke)),et(Ke,M.ADD_TAGS,zi)),M.ADD_ATTR&&(Lt===ui&&(Lt=bo(Lt)),et(Lt,M.ADD_ATTR,zi)),M.ADD_URI_SAFE_ATTR&&et(Sb,M.ADD_URI_SAFE_ATTR,zi),M.FORBID_CONTENTS&&(Mc===Wk&&(Mc=bo(Mc)),et(Mc,M.FORBID_CONTENTS,zi)),yb&&(Ke["#text"]=!0),ol&&et(Ke,["html","head","body"]),Ke.table&&(et(Ke,["tbody"]),delete Vi.tbody),M.TRUSTED_TYPES_POLICY){if(typeof M.TRUSTED_TYPES_POLICY.createHTML!="function")throw Eu('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof M.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Eu('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=M.TRUSTED_TYPES_POLICY,I=N.createHTML("")}else N===void 0&&(N=SF(g,s)),N!==null&&typeof I=="string"&&(I=N.createHTML(""));Rn&&Rn(M),Fc=M}},$k=et({},[...Xb,...Qb,...uF]),qk=et({},[...Zb,...dF]),bR=function(M){let se=E(M);(!se||!se.tagName)&&(se={namespaceURI:Oc,tagName:"template"});const ye=bp(M.tagName),Zt=bp(se.tagName);return Cb[M.namespaceURI]?M.namespaceURI===ag?se.namespaceURI===oo?ye==="svg":se.namespaceURI===og?ye==="svg"&&(Zt==="annotation-xml"||lg[Zt]):!!$k[ye]:M.namespaceURI===og?se.namespaceURI===oo?ye==="math":se.namespaceURI===ag?ye==="math"&&cg[Zt]:!!qk[ye]:M.namespaceURI===oo?se.namespaceURI===ag&&!cg[Zt]||se.namespaceURI===og&&!lg[Zt]?!1:!qk[ye]&&(fR[ye]||!$k[ye]):!!(_u==="application/xhtml+xml"&&Cb[M.namespaceURI]):!1},Sr=function(M){ku(e.removed,{element:M});try{E(M).removeChild(M)}catch{_(M)}},Pc=function(M,se){try{ku(e.removed,{attribute:se.getAttributeNode(M),from:se})}catch{ku(e.removed,{attribute:null,from:se})}if(se.removeAttribute(M),M==="is")if(Nc||sg)try{Sr(se)}catch{}else try{se.setAttribute(M,"")}catch{}},Kk=function(M){let se=null,ye=null;if(vb)M="<remove></remove>"+M;else{const Di=o2(M,/^[\r\n\t ]+/);ye=Di&&Di[0]}_u==="application/xhtml+xml"&&Oc===oo&&(M='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+M+"</body></html>");const Zt=N?N.createHTML(M):M;if(Oc===oo)try{se=new f().parseFromString(Zt,_u)}catch{}if(!se||!se.documentElement){se=B.createDocument(Oc,"template",null);try{se.documentElement.innerHTML=kb?I:Zt}catch{}}const ln=se.body||se.documentElement;return M&&ye&&ln.insertBefore(t.createTextNode(ye),ln.childNodes[0]||null),Oc===oo?F.call(se,ol?"html":"body")[0]:ol?se.documentElement:ln},Gk=function(M){return x.call(M.ownerDocument||M,M,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},xb=function(M){return M instanceof u&&(typeof M.nodeName!="string"||typeof M.textContent!="string"||typeof M.removeChild!="function"||!(M.attributes instanceof h)||typeof M.removeAttribute!="function"||typeof M.setAttribute!="function"||typeof M.namespaceURI!="string"||typeof M.insertBefore!="function"||typeof M.hasChildNodes!="function")},jk=function(M){return typeof a=="function"&&M instanceof a};function ao(Le,M,se){wg(Le,ye=>{ye.call(e,M,se,Fc)})}const Yk=function(M){let se=null;if(ao(J.beforeSanitizeElements,M,null),xb(M))return Sr(M),!0;const ye=zi(M.nodeName);if(ao(J.uponSanitizeElement,M,{tagName:ye,allowedTags:Ke}),ng&&M.hasChildNodes()&&!jk(M.firstElementChild)&&xn(/<[/\w!]/g,M.innerHTML)&&xn(/<[/\w!]/g,M.textContent)||M.nodeType===Lu.progressingInstruction||ng&&M.nodeType===Lu.comment&&xn(/<[/\w]/g,M.data))return Sr(M),!0;if(!Ke[ye]||Vi[ye]){if(!Vi[ye]&&Qk(ye)&&(yt.tagNameCheck instanceof RegExp&&xn(yt.tagNameCheck,ye)||yt.tagNameCheck instanceof Function&&yt.tagNameCheck(ye)))return!1;if(yb&&!Mc[ye]){const Zt=E(M)||M.parentNode,ln=y(M)||M.childNodes;if(ln&&Zt){const Di=ln.length;for(let Fn=Di-1;Fn>=0;--Fn){const lo=m(ln[Fn],!0);lo.__removalCount=(M.__removalCount||0)+1,Zt.insertBefore(lo,v(M))}}}return Sr(M),!0}return M instanceof l&&!bR(M)||(ye==="noscript"||ye==="noembed"||ye==="noframes")&&xn(/<\/no(script|embed|frames)/i,M.innerHTML)?(Sr(M),!0):(Ac&&M.nodeType===Lu.text&&(se=M.textContent,wg([le,ee,z],Zt=>{se=Cu(se,Zt," ")}),M.textContent!==se&&(ku(e.removed,{element:M.cloneNode()}),M.textContent=se)),ao(J.afterSanitizeElements,M,null),!1)},Xk=function(M,se,ye){if(Pk&&(se==="id"||se==="name")&&(ye in t||ye in mR))return!1;if(!(_b&&!ta[se]&&xn(Z,se))){if(!(Tc&&xn(ne,se))){if(!Lt[se]||ta[se]){if(!(Qk(M)&&(yt.tagNameCheck instanceof RegExp&&xn(yt.tagNameCheck,M)||yt.tagNameCheck instanceof Function&&yt.tagNameCheck(M))&&(yt.attributeNameCheck instanceof RegExp&&xn(yt.attributeNameCheck,se)||yt.attributeNameCheck instanceof Function&&yt.attributeNameCheck(se))||se==="is"&&yt.allowCustomizedBuiltInElements&&(yt.tagNameCheck instanceof RegExp&&xn(yt.tagNameCheck,ye)||yt.tagNameCheck instanceof Function&&yt.tagNameCheck(ye))))return!1}else if(!Sb[se]){if(!xn(Ot,Cu(ye,Ae,""))){if(!((se==="src"||se==="xlink:href"||se==="href")&&M!=="script"&&aF(ye,"data:")===0&&Uk[M])){if(!(Ok&&!xn(ve,Cu(ye,Ae,"")))){if(ye)return!1}}}}}}return!0},Qk=function(M){return M!=="annotation-xml"&&o2(M,Ge)},Zk=function(M){ao(J.beforeSanitizeAttributes,M,null);const{attributes:se}=M;if(!se||xb(M))return;const ye={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Lt,forceKeepAttr:void 0};let Zt=se.length;for(;Zt--;){const ln=se[Zt],{name:Di,namespaceURI:Fn,value:lo}=ln,wu=zi(Di),Lb=lo;let cn=Di==="value"?Lb:lF(Lb);if(ye.attrName=wu,ye.attrValue=cn,ye.keepAttr=!0,ye.forceKeepAttr=void 0,ao(J.uponSanitizeAttribute,M,ye),cn=ye.attrValue,Bk&&(wu==="id"||wu==="name")&&(Pc(Di,M),cn=uR+cn),ng&&xn(/((--!?|])>)|<\/(style|title)/i,cn)){Pc(Di,M);continue}if(ye.forceKeepAttr)continue;if(!ye.keepAttr){Pc(Di,M);continue}if(!Fk&&xn(/\/>/i,cn)){Pc(Di,M);continue}Ac&&wg([le,ee,z],eC=>{cn=Cu(cn,eC," ")});const Jk=zi(M.nodeName);if(!Xk(Jk,wu,cn)){Pc(Di,M);continue}if(N&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!Fn)switch(g.getAttributeType(Jk,wu)){case"TrustedHTML":{cn=N.createHTML(cn);break}case"TrustedScriptURL":{cn=N.createScriptURL(cn);break}}if(cn!==Lb)try{Fn?M.setAttributeNS(Fn,Di,cn):M.setAttribute(Di,cn),xb(M)?Sr(M):r2(e.removed)}catch{Pc(Di,M)}}ao(J.afterSanitizeAttributes,M,null)},_R=function Le(M){let se=null;const ye=Gk(M);for(ao(J.beforeSanitizeShadowDOM,M,null);se=ye.nextNode();)ao(J.uponSanitizeShadowNode,se,null),Yk(se),Zk(se),se.content instanceof r&&Le(se.content);ao(J.afterSanitizeShadowDOM,M,null)};return e.sanitize=function(Le){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},se=null,ye=null,Zt=null,ln=null;if(kb=!Le,kb&&(Le="<!-->"),typeof Le!="string"&&!jk(Le))if(typeof Le.toString=="function"){if(Le=Le.toString(),typeof Le!="string")throw Eu("dirty is not a string, aborting")}else throw Eu("toString is not a function");if(!e.isSupported)return Le;if(wb||Eb(M),e.removed=[],typeof Le=="string"&&(bu=!1),bu){if(Le.nodeName){const lo=zi(Le.nodeName);if(!Ke[lo]||Vi[lo])throw Eu("root node is forbidden and cannot be sanitized in-place")}}else if(Le instanceof a)se=Kk("<!---->"),ye=se.ownerDocument.importNode(Le,!0),ye.nodeType===Lu.element&&ye.nodeName==="BODY"||ye.nodeName==="HTML"?se=ye:se.appendChild(ye);else{if(!Nc&&!Ac&&!ol&&Le.indexOf("<")===-1)return N&&rg?N.createHTML(Le):Le;if(se=Kk(Le),!se)return Nc?null:rg?I:""}se&&vb&&Sr(se.firstChild);const Di=Gk(bu?Le:se);for(;Zt=Di.nextNode();)Yk(Zt),Zk(Zt),Zt.content instanceof r&&_R(Zt.content);if(bu)return Le;if(Nc){if(sg)for(ln=D.call(se.ownerDocument);se.firstChild;)ln.appendChild(se.firstChild);else ln=se;return(Lt.shadowroot||Lt.shadowrootmode)&&(ln=te.call(n,ln,!0)),ln}let Fn=ol?se.outerHTML:se.innerHTML;return ol&&Ke["!doctype"]&&se.ownerDocument&&se.ownerDocument.doctype&&se.ownerDocument.doctype.name&&xn(VT,se.ownerDocument.doctype.name)&&(Fn="<!DOCTYPE "+se.ownerDocument.doctype.name+`>
`+Fn),Ac&&wg([le,ee,z],lo=>{Fn=Cu(Fn,lo," ")}),N&&rg?N.createHTML(Fn):Fn},e.setConfig=function(){let Le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Eb(Le),wb=!0},e.clearConfig=function(){Fc=null,wb=!1},e.isValidAttribute=function(Le,M,se){Fc||Eb({});const ye=zi(Le),Zt=zi(M);return Xk(ye,Zt,se)},e.addHook=function(Le,M){typeof M=="function"&&ku(J[Le],M)},e.removeHook=function(Le,M){if(M!==void 0){const se=rF(J[Le],M);return se===-1?void 0:oF(J[Le],se,1)[0]}return r2(J[Le])},e.removeHooks=function(Le){J[Le]=[]},e.removeAllHooks=function(){J=d2()},e}var ac=zT();function pn(i,e,t){return Math.min(Math.max(i,e),t)}function bJ(i,e){return(e+i%e)%e}class _J{constructor(){this._next=0}getNext(){return this._next++}}class $T{constructor(){this._n=1,this._val=0}update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}}class kF{constructor(e){this._n=0,this._val=0,this._values=[],this._index=0,this._sum=0,this._values=new Array(e),this._values.fill(0,0,e)}update(e){const t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}}let gl;function qT(i){gl?gl instanceof f2?gl.loggers.push(i):gl=new f2([gl,i]):gl=i}function _i(){return gl}let D0;function CF(i){D0=i}function EF(i){D0&&D0(i)}class f2{constructor(e){this.loggers=e}handleObservableCreated(e){for(const t of this.loggers)t.handleObservableCreated(e)}handleOnListenerCountChanged(e,t){for(const n of this.loggers)n.handleOnListenerCountChanged(e,t)}handleObservableUpdated(e,t){for(const n of this.loggers)n.handleObservableUpdated(e,t)}handleAutorunCreated(e){for(const t of this.loggers)t.handleAutorunCreated(e)}handleAutorunDisposed(e){for(const t of this.loggers)t.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,t,n){for(const s of this.loggers)s.handleAutorunDependencyChanged(e,t,n)}handleAutorunStarted(e){for(const t of this.loggers)t.handleAutorunStarted(e)}handleAutorunFinished(e){for(const t of this.loggers)t.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,t,n){for(const s of this.loggers)s.handleDerivedDependencyChanged(e,t,n)}handleDerivedCleared(e){for(const t of this.loggers)t.handleDerivedCleared(e)}handleBeginTransaction(e){for(const t of this.loggers)t.handleBeginTransaction(e)}handleEndTransaction(e){for(const t of this.loggers)t.handleEndTransaction(e)}}var Ki;(function(i){i[i.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",i[i.stale=2]="stale",i[i.upToDate=3]="upToDate"})(Ki||(Ki={}));class B1{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,n){this._debugNameData=e,this._runFn=t,this._changeTracker=n,this._state=Ki.stale,this._updateCount=0,this._disposed=!1,this._dependencies=new Set,this._dependenciesToBeRemoved=new Set,this._isRunning=!1,this._store=void 0,this._delayedStore=void 0,this._changeSummary=this._changeTracker?.createChangeSummary(void 0),_i()?.handleAutorunCreated(this),this._run(),ou(this)}dispose(){if(!this._disposed){this._disposed=!0;for(const e of this._dependencies)e.removeObserver(this);this._dependencies.clear(),this._store!==void 0&&this._store.dispose(),this._delayedStore!==void 0&&this._delayedStore.dispose(),_i()?.handleAutorunDisposed(this),au(this)}}_run(){const e=this._dependenciesToBeRemoved;this._dependenciesToBeRemoved=this._dependencies,this._dependencies=e,this._state=Ki.upToDate;try{if(!this._disposed){_i()?.handleAutorunStarted(this);const t=this._changeSummary,n=this._delayedStore;n!==void 0&&(this._delayedStore=void 0);try{this._isRunning=!0,this._changeTracker&&(this._changeTracker.beforeUpdate?.(this,t),this._changeSummary=this._changeTracker.createChangeSummary(t)),this._store!==void 0&&(this._store.dispose(),this._store=void 0),this._runFn(this,t)}catch(s){Mp(s)}finally{this._isRunning=!1,n!==void 0&&n.dispose()}}}finally{this._disposed||_i()?.handleAutorunFinished(this);for(const t of this._dependenciesToBeRemoved)t.removeObserver(this);this._dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this._state===Ki.upToDate&&(this._state=Ki.dependenciesMightHaveChanged),this._updateCount++}endUpdate(e){try{if(this._updateCount===1)do{if(this._state===Ki.dependenciesMightHaveChanged){this._state=Ki.upToDate;for(const t of this._dependencies)if(t.reportChanges(),this._state===Ki.stale)break}this._state!==Ki.upToDate&&this._run()}while(this._state!==Ki.upToDate)}finally{this._updateCount--}tc(()=>this._updateCount>=0)}handlePossibleChange(e){this._state===Ki.upToDate&&this._isDependency(e)&&(this._state=Ki.dependenciesMightHaveChanged)}handleChange(e,t){if(this._isDependency(e)){_i()?.handleAutorunDependencyChanged(this,e,t);try{(this._changeTracker?this._changeTracker.handleChange({changedObservable:e,change:t,didChange:s=>s===e},this._changeSummary):!0)&&(this._state=Ki.stale)}catch(n){Mp(n)}}}_isDependency(e){return this._dependencies.has(e)&&!this._dependenciesToBeRemoved.has(e)}_ensureNoRunning(){if(!this._isRunning)throw new De("The reader object cannot be used outside its compute function!")}readObservable(e){if(this._ensureNoRunning(),this._disposed)return e.get();e.addObserver(this);const t=e.get();return this._dependencies.add(e),this._dependenciesToBeRemoved.delete(e),t}get store(){if(this._ensureNoRunning(),this._disposed)throw new De("Cannot access store after dispose");return this._store===void 0&&(this._store=new X),this._store}get delayedStore(){if(this._ensureNoRunning(),this._disposed)throw new De("Cannot access store after dispose");return this._delayedStore===void 0&&(this._delayedStore=new X),this._delayedStore}debugGetState(){return{isRunning:this._isRunning,updateCount:this._updateCount,dependencies:this._dependencies,state:this._state}}debugRerun(){this._isRunning?this._state=Ki.stale:this._run()}}const ys=(i,e)=>i===e;function xF(i=ys){return(e,t)=>wi(e,t,i)}function LF(){return(i,e)=>i.equals(e)}function DF(i,e,t){if(t!==void 0){const n=i;return n==null||e===void 0||e===null?e===n:t(n,e)}else{const n=i;return(s,r)=>s==null||r===void 0||r===null?r===s:n(s,r)}}function g2(i,e){if(i===e)return!0;if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;for(let t=0;t<i.length;t++)if(!g2(i[t],e[t]))return!1;return!0}if(i&&typeof i=="object"&&e&&typeof e=="object"&&Object.getPrototypeOf(i)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype){const t=i,n=e,s=Object.keys(t),r=Object.keys(n),o=new Set(r);if(s.length!==r.length)return!1;for(const a of s)if(!o.has(a)||!g2(t[a],n[a]))return!1;return!0}return!1}function wJ(i){return JSON.stringify(I0(i))}let IF=0;const p2=new WeakMap;function I0(i){if(Array.isArray(i))return i.map(I0);if(i&&typeof i=="object")if(Object.getPrototypeOf(i)===Object.prototype){const e=i,t=Object.create(null);for(const n of Object.keys(e).sort())t[n]=I0(e[n]);return t}else{let e=p2.get(i);return e===void 0&&(e=IF++,p2.set(i,e)),e+"----2b76a038c20c4bcc"}return i}class Qi{constructor(e,t,n){this.owner=e,this.debugNameSource=t,this.referenceFn=n}getDebugName(e){return TF(e,this)}}const m2=new Map,T0=new WeakMap;function TF(i,e){const t=T0.get(i);if(t)return t;const n=AF(i,e);if(n){let s=m2.get(n)??0;s++,m2.set(n,s);const r=s===1?n:`${n}#${s}`;return T0.set(i,r),r}}function AF(i,e){const t=T0.get(i);if(t)return t;const n=e.owner?RF(e.owner)+".":"";let s;const r=e.debugNameSource;if(r!==void 0)if(typeof r=="function"){if(s=r(),s!==void 0)return n+s}else return n+r;const o=e.referenceFn;if(o!==void 0&&(s=Xy(o),s!==void 0))return n+s;if(e.owner!==void 0){const a=NF(e.owner,i);if(a!==void 0)return n+a}}function NF(i,e){for(const t in i)if(i[t]===e)return t}const b2=new Map,_2=new WeakMap;function RF(i){const e=_2.get(i);if(e)return e;const t=KT(i)??"Object";let n=b2.get(t)??0;n++,b2.set(t,n);const s=n===1?t:`${t}#${n}`;return _2.set(i,s),s}function KT(i){const e=i.constructor;if(e)return e.name==="Object"?void 0:e.name}function Xy(i){const e=i.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}let A0;function MF(i){A0=i}let GT;function OF(i){GT=i}let jT;function FF(i){jT=i}class YT{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const n=t===void 0?void 0:e,s=t===void 0?e:t;return A0({owner:n,debugName:()=>{const r=Xy(s);if(r!==void 0)return r;const a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(s.toString());if(a)return`${this.debugName}.${a[2]}`;if(!n)return`${this.debugName} (mapped)`},debugReferenceFn:s},r=>s(this.read(r),r))}flatten(){return A0({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(GT(this,t)),this}keepObserved(e){return e.add(jT(this)),this}get debugValue(){return this.get()}}class Mf extends YT{constructor(){super(),this._observers=new Set,_i()?.handleObservableCreated(this)}addObserver(e){const t=this._observers.size;this._observers.add(e),t===0&&this.onFirstObserverAdded(),t!==this._observers.size&&_i()?.handleOnListenerCountChanged(this,this._observers.size)}removeObserver(e){const t=this._observers.delete(e);t&&this._observers.size===0&&this.onLastObserverRemoved(),t&&_i()?.handleOnListenerCountChanged(this,this._observers.size)}onFirstObserverAdded(){}onLastObserverRemoved(){}log(){const e=!!_i();return EF(this),e||_i()?.handleObservableCreated(this),this}debugGetObservers(){return this._observers}}var ei;(function(i){i[i.initial=0]="initial",i[i.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",i[i.stale=2]="stale",i[i.upToDate=3]="upToDate"})(ei||(ei={}));class Qn extends Mf{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,n,s=void 0,r){super(),this._debugNameData=e,this._computeFn=t,this._changeTracker=n,this._handleLastObserverRemoved=s,this._equalityComparator=r,this._state=ei.initial,this._value=void 0,this._updateCount=0,this._dependencies=new Set,this._dependenciesToBeRemoved=new Set,this._changeSummary=void 0,this._isUpdating=!1,this._isComputing=!1,this._didReportChange=!1,this._isInBeforeUpdate=!1,this._isReaderValid=!1,this._store=void 0,this._delayedStore=void 0,this._removedObserverToCallEndUpdateOn=null,this._changeSummary=this._changeTracker?.createChangeSummary(void 0)}onLastObserverRemoved(){this._state=ei.initial,this._value=void 0,_i()?.handleDerivedCleared(this);for(const e of this._dependencies)e.removeObserver(this);this._dependencies.clear(),this._store!==void 0&&(this._store.dispose(),this._store=void 0),this._delayedStore!==void 0&&(this._delayedStore.dispose(),this._delayedStore=void 0),this._handleLastObserverRemoved?.()}get(){if(this._observers.size===0){let e;try{this._isReaderValid=!0;let t;this._changeTracker&&(t=this._changeTracker.createChangeSummary(void 0),this._changeTracker.beforeUpdate?.(this,t)),e=this._computeFn(this,t)}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),e}else{do{if(this._state===ei.dependenciesMightHaveChanged){for(const e of this._dependencies)if(e.reportChanges(),this._state===ei.stale)break}this._state===ei.dependenciesMightHaveChanged&&(this._state=ei.upToDate),this._state!==ei.upToDate&&this._recompute()}while(this._state!==ei.upToDate);return this._value}}_recompute(){let e=!1;this._isComputing=!0,this._didReportChange=!1;const t=this._dependenciesToBeRemoved;this._dependenciesToBeRemoved=this._dependencies,this._dependencies=t;try{const n=this._changeSummary;this._isReaderValid=!0,this._changeTracker&&(this._isInBeforeUpdate=!0,this._changeTracker.beforeUpdate?.(this,n),this._isInBeforeUpdate=!1,this._changeSummary=this._changeTracker?.createChangeSummary(n));const s=this._state!==ei.initial,r=this._value;this._state=ei.upToDate;const o=this._delayedStore;o!==void 0&&(this._delayedStore=void 0);try{this._store!==void 0&&(this._store.dispose(),this._store=void 0),this._value=this._computeFn(this,n)}finally{this._isReaderValid=!1;for(const a of this._dependenciesToBeRemoved)a.removeObserver(this);this._dependenciesToBeRemoved.clear(),o!==void 0&&o.dispose()}e=this._didReportChange||s&&!this._equalityComparator(r,this._value),_i()?.handleObservableUpdated(this,{oldValue:r,newValue:this._value,change:void 0,didChange:e,hadValue:s})}catch(n){Mp(n)}if(this._isComputing=!1,!this._didReportChange&&e)for(const n of this._observers)n.handleChange(this,void 0);else this._didReportChange=!1}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){if(this._isUpdating)throw new De("Cyclic deriveds are not supported yet!");this._updateCount++,this._isUpdating=!0;try{const t=this._updateCount===1;if(this._state===ei.upToDate&&(this._state=ei.dependenciesMightHaveChanged,!t))for(const n of this._observers)n.handlePossibleChange(this);if(t)for(const n of this._observers)n.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(e){if(this._updateCount--,this._updateCount===0){const t=[...this._observers];for(const n of t)n.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){const n=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(const s of n)s.endUpdate(this)}}tc(()=>this._updateCount>=0)}handlePossibleChange(e){if(this._state===ei.upToDate&&this._dependencies.has(e)&&!this._dependenciesToBeRemoved.has(e)){this._state=ei.dependenciesMightHaveChanged;for(const t of this._observers)t.handlePossibleChange(this)}}handleChange(e,t){if(this._dependencies.has(e)&&!this._dependenciesToBeRemoved.has(e)||this._isInBeforeUpdate){_i()?.handleDerivedDependencyChanged(this,e,t);let n=!1;try{n=this._changeTracker?this._changeTracker.handleChange({changedObservable:e,change:t,didChange:r=>r===e},this._changeSummary):!0}catch(r){Mp(r)}const s=this._state===ei.upToDate;if(n&&(this._state===ei.dependenciesMightHaveChanged||s)&&(this._state=ei.stale,s))for(const r of this._observers)r.handlePossibleChange(this)}}_ensureReaderValid(){if(!this._isReaderValid)throw new De("The reader object cannot be used outside its compute function!")}readObservable(e){this._ensureReaderValid(),e.addObserver(this);const t=e.get();return this._dependencies.add(e),this._dependenciesToBeRemoved.delete(e),t}reportChange(e){this._ensureReaderValid(),this._didReportChange=!0;for(const t of this._observers)t.handleChange(this,e)}get store(){return this._ensureReaderValid(),this._store===void 0&&(this._store=new X),this._store}get delayedStore(){return this._ensureReaderValid(),this._delayedStore===void 0&&(this._delayedStore=new X),this._delayedStore}addObserver(e){const t=!this._observers.has(e)&&this._updateCount>0;super.addObserver(e),t&&(this._removedObserverToCallEndUpdateOn&&this._removedObserverToCallEndUpdateOn.has(e)?this._removedObserverToCallEndUpdateOn.delete(e):e.beginUpdate(this))}removeObserver(e){this._observers.has(e)&&this._updateCount>0&&(this._removedObserverToCallEndUpdateOn||(this._removedObserverToCallEndUpdateOn=new Set),this._removedObserverToCallEndUpdateOn.add(e)),super.removeObserver(e)}debugGetState(){return{state:this._state,updateCount:this._updateCount,isComputing:this._isComputing,dependencies:this._dependencies,value:this._value}}debugSetValue(e){this._value=e}setValue(e,t,n){this._value=e;const s=this._observers;t.updateObserver(this,this);for(const r of s)r.handleChange(this,n)}}class PF extends Qn{constructor(e,t,n,s=void 0,r,o){super(e,t,n,s,r),this.set=o}}function fs(i,e){return e!==void 0?new Qn(new Qi(i,void 0,e),e,void 0,void 0,ys):new Qn(new Qi(void 0,void 0,i),i,void 0,void 0,ys)}function vJ(i,e,t){return new PF(new Qi(i,void 0,e),e,void 0,void 0,ys,t)}function zh(i,e){return new Qn(new Qi(i.owner,i.debugName,i.debugReferenceFn),e,void 0,i.onLastObserverRemoved,i.equalsFn??ys)}MF(zh);function yJ(i,e){return new Qn(new Qi(i.owner,i.debugName,void 0),e,i.changeTracker,void 0,i.equalityComparer??ys)}function SJ(i,e){let t,n;e===void 0?(t=i,n=void 0):(n=i,t=e);let s;return new Qn(new Qi(n,void 0,t),r=>{s?s.clear():s=new X;const o=t(r);return o&&s.add(o),o},void 0,()=>{s&&(s.dispose(),s=void 0)},ys)}function du(i){return new B1(new Qi(void 0,void 0,i),i,void 0)}function XT(i,e){return new B1(new Qi(i.owner,i.debugName,i.debugReferenceFn??e),e,void 0)}function QT(i,e){return new B1(new Qi(i.owner,i.debugName,i.debugReferenceFn??e),e,i.changeTracker)}function BF(i,e){const t=new X,n=QT({owner:i.owner,debugName:i.debugName,debugReferenceFn:i.debugReferenceFn??e,changeTracker:i.changeTracker},(s,r)=>{t.clear(),e(s,r,t)});return fe(()=>{n.dispose(),t.dispose()})}function kJ(i){const e=new X,t=XT({owner:void 0,debugName:void 0,debugReferenceFn:i},n=>{e.clear(),i(n,e)});return fe(()=>{t.dispose(),e.dispose()})}function CJ(i,e){let t;return XT({debugReferenceFn:e},n=>{const s=i.read(n),r=t;t=s,e({lastValue:r,newValue:s})})}function w2(i){const e=new Error("BugIndicatingErrorRecovery: "+i);pt(e),console.error("recovered from an error that indicates a bug",e)}function lc(i,e){const t=new Of(i,e);try{i(t)}finally{t.finish()}}let yg;function EJ(i){if(yg)i(yg);else{const e=new Of(i,void 0);yg=e;try{i(e)}finally{e.finish(),yg=void 0}}}async function xJ(i,e){const t=new Of(i,e);try{await i(t)}finally{t.finish()}}function WF(i,e,t){i?e(i):lc(e,t)}class Of{constructor(e,t){this._fn=e,this._getDebugName=t,this._updatingObservers=[],_i()?.handleBeginTransaction(this)}getDebugName(){return this._getDebugName?this._getDebugName():Xy(this._fn)}updateObserver(e,t){if(!this._updatingObservers){w2("Transaction already finished!"),lc(n=>{n.updateObserver(e,t)});return}this._updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this._updatingObservers;if(!e){w2("transaction.finish() has already been called!");return}for(let t=0;t<e.length;t++){const{observer:n,observable:s}=e[t];n.endUpdate(s)}this._updatingObservers=null,_i()?.handleEndTransaction(this)}debugGetUpdatingObservers(){return this._updatingObservers}}function Os(i,e){let t;return typeof i=="string"?t=new Qi(void 0,i,void 0):t=new Qi(i,void 0,void 0),new jd(t,e,ys)}class jd extends Mf{get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}constructor(e,t,n){super(),this._debugNameData=e,this._equalityComparator=n,this._value=t,_i()?.handleObservableUpdated(this,{hadValue:!1,newValue:t,change:void 0,didChange:!0,oldValue:void 0})}get(){return this._value}set(e,t,n){if(n===void 0&&this._equalityComparator(this._value,e))return;let s;t||(t=s=new Of(()=>{},()=>`Setting ${this.debugName}`));try{const r=this._value;this._setValue(e),_i()?.handleObservableUpdated(this,{oldValue:r,newValue:e,change:n,didChange:!0,hadValue:!0});for(const o of this._observers)t.updateObserver(o,this),o.handleChange(this,n)}finally{s&&s.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}debugGetState(){return{value:this._value}}debugSetValue(e){this._value=e}}function LJ(i,e){let t;return typeof i=="string"?t=new Qi(void 0,i,void 0):t=new Qi(i,void 0,void 0),new UF(t,e,ys)}class UF extends jd{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){this._value?.dispose()}}function sm(...i){let e,t,n;return i.length===3?[e,t,n]=i:[t,n]=i,new Fo(new Qi(e,void 0,n),t,n,()=>Fo.globalTransaction,ys)}function DJ(i,e,t){return new Fo(new Qi(i.owner,i.debugName,i.debugReferenceFn??t),e,t,()=>Fo.globalTransaction,i.equalsFn??ys)}class Fo extends Mf{constructor(e,t,n,s,r){super(),this._debugNameData=e,this.event=t,this._getValue=n,this._getTransaction=s,this._equalityComparator=r,this._hasValue=!1,this.handleEvent=o=>{const a=this._getValue(o),l=this._value,c=!this._hasValue||!this._equalityComparator(l,a);let h=!1;c&&(this._value=a,this._hasValue&&(h=!0,WF(this._getTransaction(),u=>{_i()?.handleObservableUpdated(this,{oldValue:l,newValue:a,change:void 0,didChange:c,hadValue:this._hasValue});for(const f of this._observers)u.updateObserver(f,this),f.handleChange(this,void 0)},()=>{const u=this.getDebugName();return"Event fired"+(u?`: ${u}`:"")})),this._hasValue=!0),h||_i()?.handleObservableUpdated(this,{oldValue:l,newValue:a,change:void 0,didChange:c,hadValue:this._hasValue})}}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){const e=this.getDebugName();return"From Event"+(e?`: ${e}`:"")}onFirstObserverAdded(){this._subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this._subscription.dispose(),this._subscription=void 0,this._hasValue=!1,this._value=void 0}get(){return this._subscription?(this._hasValue||this.handleEvent(void 0),this._value):this._getValue(void 0)}debugSetValue(e){this._value=e}}(function(i){i.Observer=Fo;function e(t,n){let s=!1;Fo.globalTransaction===void 0&&(Fo.globalTransaction=t,s=!0);try{n()}finally{s&&(Fo.globalTransaction=void 0)}}i.batchEventsGlobally=e})(sm||(sm={}));function ZT(i){return typeof i=="string"?new v2(i):new v2(void 0,i)}class v2 extends Mf{get debugName(){return new Qi(this._owner,this._debugName,void 0).getDebugName(this)??"Observable Signal"}toString(){return this.debugName}constructor(e,t){super(),this._debugName=e,this._owner=t}trigger(e,t){if(!e){lc(n=>{this.trigger(n,t)},()=>`Trigger signal ${this.debugName}`);return}for(const n of this._observers)e.updateObserver(n,this),n.handleChange(this,t)}get(){}}function IJ(i,e){let t=!1,n,s;return sm(r=>{const o=du(a=>{const l=i.read(a);t?(s&&clearTimeout(s),s=setTimeout(()=>{n=l,r()},e)):(t=!0,n=l)});return{dispose(){o.dispose(),t=!1,n=void 0}}},()=>t?n:i.get())}function HF(i){const e=new JT(!1,void 0);return i.addObserver(e),fe(()=>{i.removeObserver(e)})}FF(HF);function VF(i,e){const t=new JT(!0,e);i.addObserver(t);try{t.beginUpdate(i)}finally{t.endUpdate(i)}return fe(()=>{i.removeObserver(t)})}OF(VF);class JT{constructor(e,t){this._forceRecompute=e,this._handleValue=t,this._counter=0}beginUpdate(e){this._counter++}endUpdate(e){this._counter===1&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges()),this._counter--}handlePossibleChange(e){}handleChange(e,t){}}function TJ(i,e){let t;return zh({owner:i,debugReferenceFn:e},s=>(t=e(s,t),t))}function AJ(i,e){let t;const n=ZT("derivedObservableWithWritableCache"),s=fs(i,r=>(n.read(r),t=e(r,t),t));return Object.assign(s,{clearCache:r=>{t=void 0,n.trigger(r)},setCache:(r,o)=>{t=r,n.trigger(o)}})}function NJ(i,e,t,n){let s=new y2(t,n);return zh({debugReferenceFn:t,owner:i,onLastObserverRemoved:()=>{s.dispose(),s=new y2(t)}},o=>(s.setItems(e.read(o)),s.getItems()))}class y2{constructor(e,t){this._map=e,this._keySelector=t,this._cache=new Map,this._items=[]}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){const t=[],n=new Set(this._cache.keys());for(const s of e){const r=this._keySelector?this._keySelector(s):s;let o=this._cache.get(r);if(o)n.delete(r);else{const a=new X;o={out:this._map(s,a),store:a},this._cache.set(r,o)}t.push(o.out)}for(const s of n)this._cache.get(s).store.dispose(),this._cache.delete(s);this._items=t}getItems(){return this._items}}let Sg;function zF(i){Sg||(Sg=new $F,qT(Sg)),Sg.addFilteredObj(i)}class $F{constructor(){this.indentation=0,this.changedObservablesSets=new WeakMap}addFilteredObj(e){this._filteredObjects||(this._filteredObjects=new Set),this._filteredObjects.add(e)}_isIncluded(e){return this._filteredObjects?.has(e)??!0}textToConsoleArgs(e){return qF([Hc(jF("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[Hc(" "),Es(Po(e.oldValue,70),{color:"red",strikeThrough:!0}),Hc(" "),Es(Po(e.newValue,60),{color:"green"})]:[Hc(" (unchanged)")]:[Hc(" "),Es(Po(e.newValue,60),{color:"green"}),Hc(" (initial)")]}handleObservableCreated(e){if(e instanceof Qn){const t=e;this.changedObservablesSets.set(t,new Set)}}handleOnListenerCountChanged(e,t){}handleObservableUpdated(e,t){if(this._isIncluded(e)){if(e instanceof Qn){this._handleDerivedRecomputed(e,t);return}console.log(...this.textToConsoleArgs([Vc("observable value changed"),Es(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t)]))}}formatChanges(e){if(e.size!==0)return Es(" (changed deps: "+[...e].map(t=>t.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,t,n){this._isIncluded(e)&&this.changedObservablesSets.get(e)?.add(t)}_handleDerivedRecomputed(e,t){if(!this._isIncluded(e))return;const n=this.changedObservablesSets.get(e);n&&(console.log(...this.textToConsoleArgs([Vc("derived recomputed"),Es(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear())}handleDerivedCleared(e){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([Vc("derived cleared"),Es(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,t){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([Vc("observable from event triggered"),Es(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this._isIncluded(e)&&this.changedObservablesSets.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,t,n){this._isIncluded(e)&&this.changedObservablesSets.get(e).add(t)}handleAutorunStarted(e){const t=this.changedObservablesSets.get(e);t&&(this._isIncluded(e)&&console.log(...this.textToConsoleArgs([Vc("autorun"),Es(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.indentation++)}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let t=e.getDebugName();t===void 0&&(t=""),this._isIncluded(e)&&console.log(...this.textToConsoleArgs([Vc("transaction"),Es(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}}function qF(i){const e=new Array,t=[];let n="";function s(o){if("length"in o)for(const a of o)a&&s(a);else"text"in o?(n+=`%c${o.text}`,e.push(o.style),o.data&&t.push(...o.data)):"data"in o&&t.push(...o.data)}s(i);const r=[n,...e];return r.push(...t),r}function Hc(i){return Es(i,{color:"black"})}function Vc(i){return Es(YF(`${i}: `,10),{color:"black",bold:!0})}function Es(i,e={color:"black"}){function t(s){return Object.entries(s).reduce((r,[o,a])=>`${r}${o}:${a};`,"")}const n={color:e.color};return e.strikeThrough&&(n["text-decoration"]="line-through"),e.bold&&(n["font-weight"]="bold"),{text:i,style:t(n)}}function Po(i,e){switch(typeof i){case"number":return""+i;case"string":return i.length+2<=e?`"${i}"`:`"${i.substr(0,e-7)}"+...`;case"boolean":return i?"true":"false";case"undefined":return"undefined";case"object":return i===null?"null":Array.isArray(i)?KF(i,e):GF(i,e);case"symbol":return i.toString();case"function":return`[[Function${i.name?" "+i.name:""}]]`;default:return""+i}}function KF(i,e){let t="[ ",n=!0;for(const s of i){if(n||(t+=", "),t.length-5>e){t+="...";break}n=!1,t+=`${Po(s,e-t.length)}`}return t+=" ]",t}function GF(i,e){if(typeof i.toString=="function"&&i.toString!==Object.prototype.toString){const r=i.toString();return r.length<=e?r:r.substring(0,e-3)+"..."}const t=KT(i);let n=t?t+"(":"{ ",s=!0;for(const[r,o]of Object.entries(i)){if(s||(n+=", "),n.length-5>e){n+="...";break}s=!1,n+=`${r}: ${Po(o,e-n.length)}`}return n+=t?")":" }",n}function jF(i,e){let t="";for(let n=1;n<=e;n++)t+=i;return t}function YF(i,e){for(;i.length<e;)i+=" ";return i}class rm{static createHost(e,t){return new rm(e,t)}static createClient(e,t){return new rm(e,t)}constructor(e,t){this._channelFactory=e,this._getHandler=t,this._channel=this._channelFactory({handleNotification:r=>{const o=r,a=this._getHandler().notifications[o[0]];if(!a)throw new Error(`Unknown notification "${o[0]}"!`);a(...o[1])},handleRequest:r=>{const o=r;try{return{type:"result",value:this._getHandler().requests[o[0]](...o[1])}}catch(a){return{type:"error",value:a}}}});const n=new Proxy({},{get:(r,o)=>async(...a)=>{const l=await this._channel.sendRequest([o,a]);if(l.type==="error")throw l.value;return l.value}}),s=new Proxy({},{get:(r,o)=>(...a)=>{this._channel.sendNotification([o,a])}});this.api={notifications:s,requests:n}}}function XF(i,e){const t=globalThis;let n=[],s;const{channel:r,handler:o}=QF({sendNotification:l=>{s?s.sendNotification(l):n.push(l)}});let a;return(t.$$debugValueEditor_debugChannels??(t.$$debugValueEditor_debugChannels={}))[i]=l=>{a=e(),s=l;for(const c of n)l.sendNotification(c);return n=[],o},rm.createClient(r,()=>{if(!a)throw new Error("Not supported");return a})}function QF(i){let e;return{channel:n=>(e=n,{sendNotification:s=>{i.sendNotification(s)},sendRequest:s=>{throw new Error("not supported")}}),handler:{handleRequest:n=>n.type==="notification"?e?.handleNotification(n.data):e?.handleRequest(n.data)}}}function S2(i,e){const t=i.split(`
`);for(const n of t.slice(1)){if(e&&e.test(n))continue;const s=ZF(n);if(s)return s}}function ZF(i){const e=i.match(/\((.*):(\d+):(\d+)\)/);if(e)return{fileName:e[1],line:parseInt(e[2]),column:parseInt(e[3]),id:i};const t=i.match(/at ([^\(\)]*):(\d+):(\d+)/);if(t)return{fileName:t[1],line:parseInt(t[2]),column:parseInt(t[3]),id:i}}class JF{constructor(){this._timeout=void 0}throttle(e,t){this._timeout===void 0&&(this._timeout=setTimeout(()=>{this._timeout=void 0,e()},t))}dispose(){this._timeout!==void 0&&clearTimeout(this._timeout)}}function eA(i,e){for(const t in e)i[t]&&typeof i[t]=="object"&&e[t]&&typeof e[t]=="object"?eA(i[t],e[t]):i[t]=e[t]}function tA(i,e){for(const t in e)e[t]===null?delete i[t]:i[t]&&typeof i[t]=="object"&&e[t]&&typeof e[t]=="object"?tA(i[t],e[t]):i[t]=e[t]}class sh{static{this._instance=void 0}static getInstance(){return sh._instance===void 0&&(sh._instance=new sh),sh._instance}getTransactionState(){const e=[],t=[...this._activeTransactions];if(t.length===0)return;const n=t.flatMap(r=>r.debugGetUpdatingObservers()??[]).map(r=>r.observer),s=new Set;for(;n.length>0;){const r=n.shift();if(s.has(r))continue;s.add(r);const o=this._getInfo(r,a=>{s.has(a)||n.push(a)});o&&e.push(o)}return{names:t.map(r=>r.getDebugName()??"tx"),affected:e}}_getObservableInfo(e){const t=this._instanceInfos.get(e);if(!t){pt(new De("No info found"));return}return t}_getAutorunInfo(e){const t=this._instanceInfos.get(e);if(!t){pt(new De("No info found"));return}return t}_getInfo(e,t){if(e instanceof Qn){const n=[...e.debugGetObservers()];for(const l of n)t(l);const s=this._getObservableInfo(e);if(!s)return;const r=e.debugGetState(),o={name:e.debugName,instanceId:s.instanceId,updateCount:r.updateCount},a=[...s.changedObservables].map(l=>this._instanceInfos.get(l)?.instanceId).filter(_l);if(r.isComputing)return{...o,type:"observable/derived",state:"updating",changedDependencies:a,initialComputation:!1};switch(r.state){case ei.initial:return{...o,type:"observable/derived",state:"noValue"};case ei.upToDate:return{...o,type:"observable/derived",state:"upToDate"};case ei.stale:return{...o,type:"observable/derived",state:"stale",changedDependencies:a};case ei.dependenciesMightHaveChanged:return{...o,type:"observable/derived",state:"possiblyStale"}}}else if(e instanceof B1){const n=this._getAutorunInfo(e);if(!n)return;const s={name:e.debugName,instanceId:n.instanceId,updateCount:n.updateCount},r=[...n.changedObservables].map(o=>this._instanceInfos.get(o).instanceId);if(e.debugGetState().isRunning)return{...s,type:"autorun",state:"updating",changedDependencies:r};switch(e.debugGetState().state){case Ki.upToDate:return{...s,type:"autorun",state:"upToDate"};case Ki.stale:return{...s,type:"autorun",state:"stale",changedDependencies:r};case Ki.dependenciesMightHaveChanged:return{...s,type:"autorun",state:"possiblyStale"}}}}_formatObservable(e){const t=this._getObservableInfo(e);if(t)return{name:e.debugName,instanceId:t.instanceId}}_formatObserver(e){if(e instanceof Qn)return{name:e.toString(),instanceId:this._getObservableInfo(e)?.instanceId};const t=this._getAutorunInfo(e);if(t)return{name:e.toString(),instanceId:t.instanceId}}constructor(){this._declarationId=0,this._instanceId=0,this._declarations=new Map,this._instanceInfos=new WeakMap,this._aliveInstances=new Map,this._activeTransactions=new Set,this._channel=XF("observableDevTools",()=>({notifications:{setDeclarationIdFilter:e=>{},logObservableValue:e=>{console.log("logObservableValue",e)},flushUpdates:()=>{this._flushUpdates()},resetUpdates:()=>{this._pendingChanges=null,this._channel.api.notifications.handleChange(this._fullState,!0)}},requests:{getDeclarations:()=>{const e={};for(const t of this._declarations.values())e[t.id]=t;return{decls:e}},getSummarizedInstances:()=>null,getObservableValueInfo:e=>({observers:[...this._aliveInstances.get(e).debugGetObservers()].map(n=>this._formatObserver(n)).filter(_l)}),getDerivedInfo:e=>{const t=this._aliveInstances.get(e);return{dependencies:[...t.debugGetState().dependencies].map(n=>this._formatObservable(n)).filter(_l),observers:[...t.debugGetObservers()].map(n=>this._formatObserver(n)).filter(_l)}},getAutorunInfo:e=>({dependencies:[...this._aliveInstances.get(e).debugGetState().dependencies].map(n=>this._formatObservable(n)).filter(_l)}),getTransactionState:()=>this.getTransactionState(),setValue:(e,t)=>{const n=this._aliveInstances.get(e);if(n instanceof Qn)n.debugSetValue(t);else if(n instanceof jd)n.debugSetValue(t);else if(n instanceof Fo)n.debugSetValue(t);else throw new De("Observable is not supported");const s=[...n.debugGetObservers()];for(const r of s)r.beginUpdate(n);for(const r of s)r.handleChange(n,void 0);for(const r of s)r.endUpdate(n)},getValue:e=>{const t=this._aliveInstances.get(e);if(t instanceof Qn)return Po(t.debugGetState().value,200);if(t instanceof jd)return Po(t.debugGetState().value,200)}}})),this._pendingChanges=null,this._changeThrottler=new JF,this._fullState={},this._flushUpdates=()=>{this._pendingChanges!==null&&(this._channel.api.notifications.handleChange(this._pendingChanges,!1),this._pendingChanges=null)}}_handleChange(e){tA(this._fullState,e),this._pendingChanges===null?this._pendingChanges=e:eA(this._pendingChanges,e),this._changeThrottler.throttle(this._flushUpdates,10)}_getDeclarationId(e){let t=!0,n;const s=Error;for(;;){const o=s.stackTraceLimit;s.stackTraceLimit=t?6:20;const a=new Error().stack;s.stackTraceLimit=o;let l=S2(a,/[/\\]observableInternal[/\\]|\.observe|[/\\]util(s)?\./);if(!t&&!l&&(l=S2(a,/[/\\]observableInternal[/\\]|\.observe/)),l){n=l;break}if(!t){console.error("Could not find location for declaration",new Error().stack),n={fileName:"unknown",line:0,column:0,id:"unknown"};break}t=!1}let r=this._declarations.get(n.id);return r===void 0&&(r={id:this._declarationId++,type:e,url:n.fileName,line:n.line,column:n.column},this._declarations.set(n.id,r),this._handleChange({decls:{[r.id]:r}})),r.id}handleObservableCreated(e){const n={declarationId:this._getDeclarationId("observable/value"),instanceId:this._instanceId++,listenerCount:0,lastValue:void 0,updateCount:0,changedObservables:new Set};this._instanceInfos.set(e,n)}handleOnListenerCountChanged(e,t){const n=this._getObservableInfo(e);if(n){if(n.listenerCount===0&&t>0){const s=e instanceof Qn?"observable/derived":"observable/value";this._aliveInstances.set(n.instanceId,e),this._handleChange({instances:{[n.instanceId]:{instanceId:n.instanceId,declarationId:n.declarationId,formattedValue:n.lastValue,type:s,name:e.debugName}}})}else n.listenerCount>0&&t===0&&(this._handleChange({instances:{[n.instanceId]:null}}),this._aliveInstances.delete(n.instanceId));n.listenerCount=t}}handleObservableUpdated(e,t){if(e instanceof Qn){this._handleDerivedRecomputed(e,t);return}const n=this._getObservableInfo(e);n&&t.didChange&&(n.lastValue=Po(t.newValue,30),n.listenerCount>0&&this._handleChange({instances:{[n.instanceId]:{formattedValue:n.lastValue}}}))}handleAutorunCreated(e){const n={declarationId:this._getDeclarationId("autorun"),instanceId:this._instanceId++,updateCount:0,changedObservables:new Set};this._instanceInfos.set(e,n),this._aliveInstances.set(n.instanceId,e),n&&this._handleChange({instances:{[n.instanceId]:{instanceId:n.instanceId,declarationId:n.declarationId,runCount:0,type:"autorun",name:e.debugName}}})}handleAutorunDisposed(e){const t=this._getAutorunInfo(e);t&&(this._handleChange({instances:{[t.instanceId]:null}}),this._instanceInfos.delete(e),this._aliveInstances.delete(t.instanceId))}handleAutorunDependencyChanged(e,t,n){const s=this._getAutorunInfo(e);s&&s.changedObservables.add(t)}handleAutorunStarted(e){}handleAutorunFinished(e){const t=this._getAutorunInfo(e);t&&(t.changedObservables.clear(),t.updateCount++,this._handleChange({instances:{[t.instanceId]:{runCount:t.updateCount}}}))}handleDerivedDependencyChanged(e,t,n){const s=this._getObservableInfo(e);s&&s.changedObservables.add(t)}_handleDerivedRecomputed(e,t){const n=this._getObservableInfo(e);if(!n)return;const s=Po(t.newValue,30);n.updateCount++,n.changedObservables.clear(),n.lastValue=s,n.listenerCount>0&&this._handleChange({instances:{[n.instanceId]:{formattedValue:s,recomputationCount:n.updateCount}}})}handleDerivedCleared(e){const t=this._getObservableInfo(e);t&&(t.lastValue=void 0,t.changedObservables.clear(),t.listenerCount>0&&this._handleChange({instances:{[t.instanceId]:{formattedValue:void 0}}}))}handleBeginTransaction(e){this._activeTransactions.add(e)}handleEndTransaction(e){this._activeTransactions.delete(e)}}CF(zF);d0&&d0.VSCODE_DEV_DEBUG&&qT(sh.getInstance());var k2;(function(i){function e(s=void 0){return(r,o,a)=>{const l=o.class;delete o.class;const c=o.ref;delete o.ref;const h=o.obsRef;return delete o.obsRef,new t6(r,c,h,s,l,o,a)}}function t(s,r=void 0){const o=e(r);return(a,l)=>o(s,a,l)}i.div=t("div"),i.elem=e(void 0),i.svg=t("svg","http://www.w3.org/2000/svg"),i.svgElem=e("http://www.w3.org/2000/svg");function n(){let s;const r=function(o){s=o};return Object.defineProperty(r,"element",{get(){if(!s)throw new De("Make sure the ref is set before accessing the element. Maybe wrong initialization order?");return s}}),r}i.ref=n})(k2||(k2={}));class Qy{constructor(e,t,n,s,r,o,a){this._deriveds=[],this._element=s?document.createElementNS(s,e):document.createElement(e),t&&t(this._element),n&&this._deriveds.push(fs(l=>{n(this),l.store.add({dispose:()=>{n(null)}})})),r&&(nA(r)?this._deriveds.push(fs(this,l=>{C2(this._element,E2(r,l))})):C2(this._element,E2(r,void 0)));for(const[l,c]of Object.entries(o))if(l==="style")for(const[h,u]of Object.entries(c)){const f=N0(h);Pl(u)?this._deriveds.push(zh({owner:this,debugName:()=>`set.style.${f}`},g=>{this._element.style.setProperty(f,x2(u.read(g)))})):this._element.style.setProperty(f,x2(u))}else l==="tabIndex"?Pl(c)?this._deriveds.push(fs(this,h=>{this._element.tabIndex=c.read(h)})):this._element.tabIndex=c:l.startsWith("on")?this._element[l]=c:Pl(c)?this._deriveds.push(zh({owner:this,debugName:()=>`set.${l}`},h=>{L2(this._element,l,c.read(h))})):L2(this._element,l,c);if(a){let l=function(h,u){return Pl(u)?l(h,u.read(h)):Array.isArray(u)?u.flatMap(f=>l(h,f)):u instanceof Qy?(h&&u.readEffect(h),[u._element]):u?[u]:[]};const c=fs(this,h=>{this._element.replaceChildren(...l(h,a))});this._deriveds.push(c),sA(a)||c.get()}}readEffect(e){for(const t of this._deriveds)t.read(e)}keepUpdated(e){return fs(t=>{this.readEffect(t)}).recomputeInitiallyAndOnChange(e),this}toDisposableLiveElement(){const e=new X;return this.keepUpdated(e),new e6(this._element,e)}}function C2(i,e){bA(i)?i.setAttribute("class",e):i.className=e}function iA(i,e,t){if(Pl(i)){t(i.read(e));return}if(Array.isArray(i)){for(const n of i)iA(n,e,t);return}t(i)}function E2(i,e){let t="";return iA(i,e,n=>{n&&(t.length===0?t=n:t+=" "+n)}),t}function nA(i){return Pl(i)?!0:Array.isArray(i)?i.some(e=>nA(e)):!1}function x2(i){return typeof i=="number"?i+"px":i}function sA(i){return Pl(i)?!0:Array.isArray(i)?i.some(e=>sA(e)):!1}class e6{constructor(e,t){this.element=e,this._disposable=t}dispose(){this._disposable.dispose()}}class t6 extends Qy{constructor(){super(...arguments),this._isHovered=void 0,this._didMouseMoveDuringHover=void 0}get element(){return this._element}get isHovered(){if(!this._isHovered){const e=Os("hovered",!1);this._element.addEventListener("mouseenter",t=>e.set(!0,void 0)),this._element.addEventListener("mouseleave",t=>e.set(!1,void 0)),this._isHovered=e}return this._isHovered}get didMouseMoveDuringHover(){if(!this._didMouseMoveDuringHover){let e=!1;const t=Os("didMouseMoveDuringHover",!1);this._element.addEventListener("mouseenter",n=>{e=!0}),this._element.addEventListener("mousemove",n=>{e&&t.set(!0,void 0)}),this._element.addEventListener("mouseleave",n=>{e=!1,t.set(!1,void 0)}),this._didMouseMoveDuringHover=t}return this._didMouseMoveDuringHover}}function L2(i,e,t){t==null?i.removeAttribute(N0(e)):i.setAttribute(N0(e),String(t))}function N0(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Pl(i){return!!i&&i.read!==void 0&&i.reportChanges!==void 0}const{registerWindow:RJ,getWindow:ke,getDocument:i6,getWindows:rA,getWindowsCount:n6,getWindowId:D2,getWindowById:MJ,onDidRegisterWindow:W1,onWillUnregisterWindow:s6,onDidUnregisterWindow:OJ}=function(){const i=new Map;H8($e,1);const e={window:$e,disposables:new X};i.set($e.vscodeWindowId,e);const t=new A,n=new A,s=new A;function r(o,a){return(typeof o=="number"?i.get(o):void 0)??(a?e:void 0)}return{onDidRegisterWindow:t.event,onWillUnregisterWindow:s.event,onDidUnregisterWindow:n.event,registerWindow(o){if(i.has(o.vscodeWindowId))return $.None;const a=new X,l={window:o,disposables:a.add(new X)};return i.set(o.vscodeWindowId,l),a.add(fe(()=>{i.delete(o.vscodeWindowId),n.fire(o)})),a.add(V(o,j.BEFORE_UNLOAD,()=>{s.fire(o)})),t.fire(l),a},getWindows(){return i.values()},getWindowsCount(){return i.size},getWindowId(o){return o.vscodeWindowId},hasWindow(o){return i.has(o)},getWindowById:r,getWindow(o){const a=o;if(a?.ownerDocument?.defaultView)return a.ownerDocument.defaultView.window;const l=o;return l?.view?l.view.window:$e},getDocument(o){return ke(o).document}}}();function gr(i){for(;i.firstChild;)i.firstChild.remove()}class r6{constructor(e,t,n,s){this._node=e,this._type=t,this._handler=n,this._options=s||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}}function V(i,e,t,n){return new r6(i,e,t,n)}function oA(i,e){return function(t){return e(new Ns(i,t))}}function o6(i){return function(e){return i(new at(e))}}const Fs=function(e,t,n,s){let r=n;return t==="click"||t==="mousedown"||t==="contextmenu"?r=oA(ke(e),n):(t==="keydown"||t==="keypress"||t==="keyup")&&(r=o6(n)),V(e,t,r,s)},FJ=function(e,t,n){const s=oA(ke(e),t);return aA(e,s,n)};function aA(i,e,t){return V(i,ja&&P1.pointerEvents?j.POINTER_DOWN:j.MOUSE_DOWN,e,t)}function a6(i,e,t){return V(i,ja&&P1.pointerEvents?j.POINTER_MOVE:j.MOUSE_MOVE,e,t)}function I2(i,e,t){return V(i,ja&&P1.pointerEvents?j.POINTER_UP:j.MOUSE_UP,e,t)}function PJ(i,e,t){return sd(i,e,t)}class l6 extends mT{constructor(e,t){super(e,t)}}let c6,Hs;function BJ(i,e,t,n){let s=0;const r=i.setInterval(()=>{s++,(s>=n||e()===!0)&&o.dispose()},t),o=fe(()=>{i.clearInterval(r)});return o}class lA extends Hy{constructor(e){super(),this.defaultTarget=e&&ke(e)}cancelAndSet(e,t,n){return super.cancelAndSet(e,t,n??this.defaultTarget)}}class e_{constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){pt(e)}}static sort(e,t){return t.priority-e.priority}}(function(){const i=new Map,e=new Map,t=new Map,n=new Map,s=r=>{t.set(r,!1);const o=i.get(r)??[];for(e.set(r,o),i.set(r,[]),n.set(r,!0);o.length>0;)o.sort(e_.sort),o.shift().execute();n.set(r,!1)};Hs=(r,o,a=0)=>{const l=D2(r),c=new e_(o,a);let h=i.get(l);return h||(h=[],i.set(l,h)),h.push(c),t.get(l)||(t.set(l,!0),r.requestAnimationFrame(()=>s(l))),c},c6=(r,o,a)=>{const l=D2(r);if(n.get(l)){const c=new e_(o,a);let h=e.get(l);return h||(h=[],e.set(l,h)),h.push(c),c}else return Hs(r,o,a)}})();function WJ(i,e){return Hs(i,e,1e4)}function UJ(i,e){return Hs(i,e,-1e4)}const h6=8,u6=function(i,e){return e};class d6 extends ${constructor(e,t,n,s=u6,r=h6){super();let o=null,a=0;const l=this._register(new tl),c=()=>{a=new Date().getTime(),n(o),o=null};this._register(V(e,t,h=>{o=s(o,h);const u=new Date().getTime()-a;u>=r?(l.cancel(),c()):l.setIfNotSet(c,r-u)}))}}function HJ(i,e,t,n,s){return new d6(i,e,t,n,s)}function Zy(i){return ke(i).getComputedStyle(i,null)}function om(i,e,t){const n=ke(i),s=n.document;if(i!==s.body)return new As(i.clientWidth,i.clientHeight);if(ja&&n?.visualViewport)return new As(n.visualViewport.width,n.visualViewport.height);if(n?.innerWidth&&n.innerHeight)return new As(n.innerWidth,n.innerHeight);if(s.body&&s.body.clientWidth&&s.body.clientHeight)return new As(s.body.clientWidth,s.body.clientHeight);if(s.documentElement&&s.documentElement.clientWidth&&s.documentElement.clientHeight)return new As(s.documentElement.clientWidth,s.documentElement.clientHeight);if(t)return om(t,e);if(e)return e;throw new Error("Unable to figure out browser width and height")}class Ct{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t){const n=Zy(e),s=n?n.getPropertyValue(t):"0";return Ct.convertToPixels(e,s)}static getBorderLeftWidth(e){return Ct.getDimension(e,"border-left-width")}static getBorderRightWidth(e){return Ct.getDimension(e,"border-right-width")}static getBorderTopWidth(e){return Ct.getDimension(e,"border-top-width")}static getBorderBottomWidth(e){return Ct.getDimension(e,"border-bottom-width")}static getPaddingLeft(e){return Ct.getDimension(e,"padding-left")}static getPaddingRight(e){return Ct.getDimension(e,"padding-right")}static getPaddingTop(e){return Ct.getDimension(e,"padding-top")}static getPaddingBottom(e){return Ct.getDimension(e,"padding-bottom")}static getMarginLeft(e){return Ct.getDimension(e,"margin-left")}static getMarginTop(e){return Ct.getDimension(e,"margin-top")}static getMarginRight(e){return Ct.getDimension(e,"margin-right")}static getMarginBottom(e){return Ct.getDimension(e,"margin-bottom")}}class As{static{this.None=new As(0,0)}constructor(e,t){this.width=e,this.height=t}with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new As(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof As?e:new As(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}}function R0(i){let e=i.offsetParent,t=i.offsetTop,n=i.offsetLeft;for(;(i=i.parentNode)!==null&&i!==i.ownerDocument.body&&i!==i.ownerDocument.documentElement;){t-=i.scrollTop;const s=dA(i)?null:Zy(i);s&&(n-=s.direction!=="rtl"?i.scrollLeft:-i.scrollLeft),i===e&&(n+=Ct.getBorderLeftWidth(i),t+=Ct.getBorderTopWidth(i),t+=i.offsetTop,n+=i.offsetLeft,e=i.offsetParent)}return{left:n,top:t}}function VJ(i,e,t){typeof e=="number"&&(i.style.width=`${e}px`),typeof t=="number"&&(i.style.height=`${t}px`)}function zJ(i,e,t,n,s,r="absolute"){i.style.top=`${e}px`,i.style.right=`${t}px`,i.style.bottom=`${n}px`,i.style.left=`${s}px`,i.style.position=r}function Bl(i){const e=i.getBoundingClientRect(),t=ke(i);return{left:e.left+t.scrollX,top:e.top+t.scrollY,width:e.width,height:e.height}}function $J(i,e){const t=Bl(i),n=om(e);return t.left>n.width/2&&t.top>n.height/2}function cA(i){let e=i,t=1;do{const n=Zy(e).zoom;n!=null&&n!=="1"&&(t*=n),e=e.parentElement}while(e!==null&&e!==e.ownerDocument.documentElement);return t}function Yd(i){const e=Ct.getMarginLeft(i)+Ct.getMarginRight(i);return i.offsetWidth+e}function _p(i){const e=Ct.getBorderLeftWidth(i)+Ct.getBorderRightWidth(i),t=Ct.getPaddingLeft(i)+Ct.getPaddingRight(i);return i.offsetWidth-e-t}function f6(i){const e=Ct.getMarginLeft(i)+Ct.getMarginRight(i);return i.scrollWidth+e}function hA(i){const e=Ct.getBorderTopWidth(i)+Ct.getBorderBottomWidth(i),t=Ct.getPaddingTop(i)+Ct.getPaddingBottom(i);return i.offsetHeight-e-t}function M0(i){const e=Ct.getMarginTop(i)+Ct.getMarginBottom(i);return i.offsetHeight+e}function g6(i,e){if(i===null)return 0;const t=R0(i),n=R0(e);return t.left-n.left}function qJ(i,e){const t=e.map(s=>Math.max(f6(s),Yd(s))+g6(s,i)||0);return Math.max(...t)}function Kt(i,e){return!!e?.contains(i)}const uA="parentFlowToElementId";function KJ(i,e){i.dataset[uA]=e.id}function p6(i){const e=i.dataset[uA];return typeof e=="string"?i.ownerDocument.getElementById(e):null}function GJ(i,e){let t=i;for(;t;){if(t===e)return!0;if(Ut(t)){const n=p6(t);if(n){t=n;continue}}t=t.parentNode}return!1}function m6(i,e,t){for(;i&&i.nodeType===i.ELEMENT_NODE;){if(i.classList.contains(e))return i;if(t){if(typeof t=="string"){if(i.classList.contains(t))return null}else if(i===t)return null}i=i.parentNode}return null}function t_(i,e,t){return!!m6(i,e,t)}function dA(i){return i&&!!i.host&&!!i.mode}function am(i){return!!fA(i)}function fA(i){for(;i.parentNode;){if(i===i.ownerDocument?.body)return null;i=i.parentNode}return dA(i)?i:null}function on(){let i=U1().activeElement;for(;i?.shadowRoot;)i=i.shadowRoot.activeElement;return i}function il(i){return on()===i}function gA(i){return Kt(on(),i)}function jJ(i){return i.ownerDocument===U1()}function U1(){return n6()<=1?$e.document:Array.from(rA()).map(({window:e})=>e.document).find(e=>e.hasFocus())??$e.document}function tr(){return U1().defaultView?.window??$e}const pA=new class{constructor(){this.mutationObservers=new Map}observe(i,e,t){let n=this.mutationObservers.get(i);n||(n=new Map,this.mutationObservers.set(i,n));const s=rc(t);let r=n.get(s);if(r)r.users+=1;else{const o=new A,a=new MutationObserver(c=>o.fire(c));a.observe(i,t);const l=r={users:1,observer:a,onDidMutate:o.event};e.add(fe(()=>{l.users-=1,l.users===0&&(o.dispose(),a.disconnect(),n?.delete(s),n?.size===0&&this.mutationObservers.delete(i))})),n.set(s,r)}return r.onDidMutate}};function YJ(i=$e.document.head){return mA("meta",i)}function XJ(i=$e.document.head){return mA("link",i)}function mA(i,e=$e.document.head){const t=document.createElement(i);return e.appendChild(t),t}function Ut(i){return i instanceof HTMLElement||i instanceof ke(i).HTMLElement}function T2(i){return i instanceof HTMLAnchorElement||i instanceof ke(i).HTMLAnchorElement}function QJ(i){return i instanceof HTMLTextAreaElement||i instanceof ke(i).HTMLTextAreaElement}function ZJ(i){return i instanceof HTMLInputElement||i instanceof ke(i).HTMLInputElement}function JJ(i){return i instanceof HTMLDivElement||i instanceof ke(i).HTMLDivElement}function bA(i){return i instanceof SVGElement||i instanceof ke(i).SVGElement}function Jy(i){return i instanceof MouseEvent||i instanceof ke(i).MouseEvent}function fa(i){return i instanceof KeyboardEvent||i instanceof ke(i).KeyboardEvent}function eee(i){return i instanceof DragEvent||i instanceof ke(i).DragEvent}const j={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_UP:"keyup",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PASTE:"paste",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",CHANGE:"change",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend"};function b6(i){const e=i;return!!(e&&typeof e.preventDefault=="function"&&typeof e.stopPropagation=="function")}const Re={stop:(i,e)=>(i.preventDefault(),e&&i.stopPropagation(),i)};function tee(i){const e=[];for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)e[t]=i.scrollTop,i=i.parentNode;return e}function iee(i,e){for(let t=0;i&&i.nodeType===i.ELEMENT_NODE;t++)i.scrollTop!==e[t]&&(i.scrollTop=e[t]),i=i.parentNode}class lm extends ${static hasFocusWithin(e){if(Ut(e)){const t=fA(e),n=t?t.activeElement:e.ownerDocument.activeElement;return Kt(n,e)}else{const t=e;return Kt(t.document.activeElement,t.document)}}constructor(e){super(),this._onDidFocus=this._register(new A),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new A),this.onDidBlur=this._onDidBlur.event;let t=lm.hasFocusWithin(e),n=!1;const s=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},r=()=>{t&&(n=!0,(Ut(e)?ke(e):e).setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{lm.hasFocusWithin(e)!==t&&(t?r():s())},this._register(V(e,j.FOCUS,s,!0)),this._register(V(e,j.BLUR,r,!0)),Ut(e)&&(this._register(V(e,j.FOCUS_IN,()=>this._refreshStateHandler())),this._register(V(e,j.FOCUS_OUT,()=>this._refreshStateHandler())))}refreshState(){this._refreshStateHandler()}}function eS(i){return new lm(i)}function _6(i,e){return i.after(e),e}function ie(i,...e){if(i.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function tS(i,e){return i.insertBefore(e,i.firstChild),e}function Nn(i,...e){i.innerText="",ie(i,...e)}const w6=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;var Xd;(function(i){i.HTML="http://www.w3.org/1999/xhtml",i.SVG="http://www.w3.org/2000/svg"})(Xd||(Xd={}));function _A(i,e,t,...n){const s=w6.exec(e);if(!s)throw new Error("Bad use of emmet");const r=s[1]||"div";let o;return i!==Xd.HTML?o=document.createElementNS(i,r):o=document.createElement(r),s[3]&&(o.id=s[3]),s[4]&&(o.className=s[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?o[a]=l:a==="selected"?l&&o.setAttribute(a,"true"):o.setAttribute(a,l))}),o.append(...n),o}function _e(i,e,...t){return _A(Xd.HTML,i,e,...t)}_e.SVG=function(i,e,...t){return _A(Xd.SVG,i,e,...t)};function nee(i,...e){i?cm(...e):hm(...e)}function cm(...i){for(const e of i)e.style.display="",e.removeAttribute("aria-hidden")}function hm(...i){for(const e of i)e.style.display="none",e.setAttribute("aria-hidden","true")}function see(i,e){const t=i.devicePixelRatio*e;return Math.max(1,Math.floor(t))/i.devicePixelRatio}function wA(i){$e.open(i,"_blank","noopener")}const A2=780,N2=640;function ree(i){const e=Math.floor($e.screenLeft+$e.innerWidth/2-A2/2),t=Math.floor($e.screenTop+$e.innerHeight/2-N2/2);$e.open(i,"_blank",`width=${A2},height=${N2},top=${t},left=${e}`)}function oee(i,e=!0){const t=$e.open();return t?(e&&(t.opener=null),t.location.href=i,!0):!1}function v6(i,e){const t=()=>{e(),n=Hs(i,t)};let n=Hs(i,t);return fe(()=>n.dispose())}rT.setPreferredWebSchema(/^https:/.test($e.location.href)?"https":"http");function aee(i,e){let t;if(Y.isUri(i))t=i.toString(!0);else{const r=new Blob([i]);t=URL.createObjectURL(r),setTimeout(()=>URL.revokeObjectURL(t))}const n=tr(),s=document.createElement("a");n.document.body.appendChild(s),s.download=e,s.href=t,s.click(),setTimeout(()=>s.remove())}function lee(){return new Promise(i=>{const e=tr(),t=document.createElement("input");e.document.body.appendChild(t),t.type="file",t.multiple=!0,W.once(W.fromDOMEventEmitter(t,"input"))(()=>{i(t.files??void 0)}),t.click(),setTimeout(()=>t.remove())})}var cd;(function(i){i[i.DOCUMENT=1]="DOCUMENT",i[i.BROWSER=2]="BROWSER"})(cd||(cd={}));function cee(i){return i.document.fullscreenElement||i.document.webkitFullscreenElement||i.document.webkitIsFullScreen?{mode:cd.DOCUMENT,guess:!1}:i.innerHeight===i.screen.height?{mode:cd.BROWSER,guess:!1}:(Me||rs)&&i.outerHeight===i.screen.height&&i.outerWidth===i.screen.width?{mode:cd.BROWSER,guess:!0}:null}function y6(i,e=!1){const t=document.createElement("a");return ac.addHook("afterSanitizeAttributes",n=>{for(const s of["href","src"])if(n.hasAttribute(s)){const r=n.getAttribute(s);if(s==="href"&&r.startsWith("#"))continue;if(t.href=r,!i.includes(t.protocol.replace(/:$/,""))){if(e&&s==="src"&&t.href.startsWith("data:"))continue;n.removeAttribute(s)}}}),fe(()=>{ac.removeHook("afterSanitizeAttributes")})}ge.http,ge.https,ge.command;const S6=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]);function k6(i){const e=new Uint16Array(i.length);for(let s=0;s<e.length;s++)e[s]=i.charCodeAt(s);let t="";const n=new Uint8Array(e.buffer);for(let s=0;s<n.length;s++)t+=String.fromCharCode(n[s]);return t}function hee(i){return btoa(k6(i))}class Ra extends A{constructor(){super(),this._subscriptions=new X,this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(W.runAndSubscribe(W1,({window:e,disposables:t})=>this.registerListeners(e,t),{window:$e,disposables:this._subscriptions}))}registerListeners(e,t){t.add(V(e,"keydown",n=>{if(n.defaultPrevented)return;const s=new at(n);if(!(s.keyCode===w.Alt&&n.repeat)){if(n.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(n.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(n.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(n.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(s.keyCode!==w.Alt)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=n.altKey,this._keyStatus.ctrlKey=n.ctrlKey,this._keyStatus.metaKey=n.metaKey,this._keyStatus.shiftKey=n.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=n,this.fire(this._keyStatus))}},!0)),t.add(V(e,"keyup",n=>{n.defaultPrevented||(!n.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!n.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!n.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!n.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=n.altKey,this._keyStatus.ctrlKey=n.ctrlKey,this._keyStatus.metaKey=n.metaKey,this._keyStatus.shiftKey=n.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=n,this.fire(this._keyStatus)))},!0)),t.add(V(e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(V(e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(V(e.document.body,"mousemove",n=>{n.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add(V(e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}get isModifierPressed(){return this._keyStatus.altKey||this._keyStatus.ctrlKey||this._keyStatus.metaKey||this._keyStatus.shiftKey}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return Ra.instance||(Ra.instance=new Ra),Ra.instance}dispose(){super.dispose(),this._subscriptions.dispose()}}class uee extends ${constructor(e,t){super(),this.element=e,this.callbacks=t,this.counter=0,this.dragStartTime=0,this.registerListeners()}registerListeners(){this.callbacks.onDragStart&&this._register(V(this.element,j.DRAG_START,e=>{this.callbacks.onDragStart?.(e)})),this.callbacks.onDrag&&this._register(V(this.element,j.DRAG,e=>{this.callbacks.onDrag?.(e)})),this._register(V(this.element,j.DRAG_ENTER,e=>{this.counter++,this.dragStartTime=e.timeStamp,this.callbacks.onDragEnter?.(e)})),this._register(V(this.element,j.DRAG_OVER,e=>{e.preventDefault(),this.callbacks.onDragOver?.(e,e.timeStamp-this.dragStartTime)})),this._register(V(this.element,j.DRAG_LEAVE,e=>{this.counter--,this.counter===0&&(this.dragStartTime=0,this.callbacks.onDragLeave?.(e))})),this._register(V(this.element,j.DRAG_END,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDragEnd?.(e)})),this._register(V(this.element,j.DROP,e=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDrop?.(e)}))}}const C6=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function i_(i,...e){let t,n;Array.isArray(e[0])?(t={},n=e[0]):(t=e[0]||{},n=e[1]);const s=C6.exec(i);if(!s||!s.groups)throw new Error("Bad use of h");const r=s.groups.tag||"div",o=document.createElement(r);s.groups.id&&(o.id=s.groups.id);const a=[];if(s.groups.class)for(const c of s.groups.class.split("."))c!==""&&a.push(c);if(t.className!==void 0)for(const c of t.className.split("."))c!==""&&a.push(c);a.length>0&&(o.className=a.join(" "));const l={};if(s.groups.name&&(l[s.groups.name]=o),n)for(const c of n)Ut(c)?o.appendChild(c):typeof c=="string"?o.append(c):"root"in c&&(Object.assign(l,c),o.appendChild(c.root));for(const[c,h]of Object.entries(t))if(c!=="className")if(c==="style")for(const[u,f]of Object.entries(h))o.style.setProperty(R2(u),typeof f=="number"?f+"px":""+f);else c==="tabIndex"?o.tabIndex=h:o.setAttribute(R2(c),h.toString());return l.root=o,l}function R2(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function E6(i,e,t){for(const{name:n,value:s}of i.attributes)(!t||t.includes(n))&&e.setAttribute(n,s)}function x6(i,e,t){const n=i.getAttribute(t);n?e.setAttribute(t,n):e.removeAttribute(t)}function dee(i,e,t){E6(i,e,t);const n=new X;return n.add(pA.observe(i,n,{attributes:!0,attributeFilter:t})(s=>{for(const r of s)r.type==="attributes"&&r.attributeName&&x6(i,e,r.attributeName)})),n}function zo(i){return i.tagName.toLowerCase()==="input"||i.tagName.toLowerCase()==="textarea"||Ut(i)&&!!i.editContext}const Ff=new Map;function fee(i){return Ff.has(i)}function gee(){return new L6}class L6{constructor(){this._currentCssStyle="",this._styleSheet=void 0}setStyle(e){e!==this._currentCssStyle&&(this._currentCssStyle=e,this._styleSheet?this._styleSheet.innerText=e:this._styleSheet=On($e.document.head,t=>t.innerText=e))}dispose(){this._styleSheet&&(this._styleSheet.remove(),this._styleSheet=void 0)}}let O0;function pee(i){const e=i.getRootNode();e instanceof ShadowRoot&&(O0=e)}function On(i=$e.document.head,e,t){const n=document.createElement("style");if(n.type="text/css",n.media="screen",e?.(n),i.appendChild(n),t&&t.add(fe(()=>n.remove())),i===$e.document.head){const s=new Set;Ff.set(n,s);for(const{window:r,disposables:o}of rA()){if(r===$e)continue;const a=o.add(F0(n,s,r.document.head));t?.add(a)}if(O0!==void 0){const r=F0(n,s,O0);t?.add(r)}}return n}function mee(i){const e=new X;for(const[t,n]of Ff)e.add(F0(t,n,i.document.head));return e}function F0(i,e,t){const n=new X,s=i.cloneNode(!0);t.appendChild(s),n.add(fe(()=>s.remove()));for(const r of yA(i))s.sheet?.insertRule(r.cssText,s.sheet?.cssRules.length);return n.add(pA.observe(i,n,{childList:!0})(()=>{s.textContent=i.textContent})),e.add(s),n.add(fe(()=>e.delete(s))),n}let n_=null;function vA(){return n_||(n_=On()),n_}function yA(i){return i?.sheet?.rules?i.sheet.rules:i?.sheet?.cssRules?i.sheet.cssRules:[]}function ir(i,e,t=vA()){if(!(!t||!e)){t.sheet?.insertRule(`${i} {${e}}`,0);for(const n of Ff.get(t)??[])ir(i,e,n)}}function Wl(i,e=vA()){if(!e)return;const t=yA(e),n=[];for(let s=0;s<t.length;s++){const r=t[s];D6(r)&&r.selectorText.indexOf(i)!==-1&&n.push(s)}for(let s=n.length-1;s>=0;s--)e.sheet?.deleteRule(n[s]);for(const s of Ff.get(e)??[])Wl(i,s)}function D6(i){return typeof i.selectorText=="string"}function $o(i,e){if(i!==void 0){const t=i.match(/^\s*var\((.+)\)$/);if(t){const n=t[1].split(",",2);return n.length===2&&(e=$o(n[1].trim(),e)),`var(${n[0]}, ${e})`}return i}return e}function bee(i){const e=i.replaceAll(/[^\w.%+-]/gi,"");return e!==i&&console.warn(`CSS size ${i} modified to ${e} to be safe for CSS`),e}function _ee(i){const e=i.replaceAll(/[^[0-9a-fA-F#]]/gi,"");return e!==i&&console.warn(`CSS hex color ${i} modified to ${e} to be safe for CSS`),e}function M2(i){const e=i.replaceAll(/[^_\-a-z0-9]/gi,"");return e!==i&&console.warn(`CSS ident value ${i} modified to ${e} to be safe for CSS`),e}function _o(i){return`'${i.replaceAll(/'/g,"\\000027")}'`}function pr(i){return i?Dn`url('${CSS.escape(Oy.uriToBrowserUri(i).toString(!0))}')`:"url('')"}function kg(i,e=!1){const t=CSS.escape(i);return!e&&t!==i&&console.warn(`CSS class name ${i} modified to ${t} to be safe for CSS`),t}function Dn(i,...e){return i.reduce((t,n,s)=>{const r=e[s]||"";return t+n+r},"")}class s_{constructor(){this._parts=[]}push(...e){this._parts.push(...e)}join(e=`
`){return this._parts.join(e)}}var um;(function(i){i[i.Smooth=0]="Smooth",i[i.Immediate=1]="Immediate"})(um||(um={}));function I6(i){return i&&typeof i.id=="string"}const wee={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};var O2;(function(i){i.CompositionStart="compositionStart",i.CompositionEnd="compositionEnd",i.Type="type",i.ReplacePreviousChar="replacePreviousChar",i.CompositionType="compositionType",i.Paste="paste",i.Cut="cut"})(O2||(O2={}));const no=be("themeService");let P0=class extends ${constructor(e){super(),this._themeService=e,this._onWillCreateCodeEditor=this._register(new A),this.onWillCreateCodeEditor=this._onWillCreateCodeEditor.event,this._onCodeEditorAdd=this._register(new A),this.onCodeEditorAdd=this._onCodeEditorAdd.event,this._onCodeEditorRemove=this._register(new A),this.onCodeEditorRemove=this._onCodeEditorRemove.event,this._onWillCreateDiffEditor=this._register(new A),this.onWillCreateDiffEditor=this._onWillCreateDiffEditor.event,this._onDiffEditorAdd=this._register(new A),this.onDiffEditorAdd=this._onDiffEditorAdd.event,this._onDiffEditorRemove=this._register(new A),this.onDiffEditorRemove=this._onDiffEditorRemove.event,this._onDidChangeTransientModelProperty=this._register(new A),this.onDidChangeTransientModelProperty=this._onDidChangeTransientModelProperty.event,this._onDecorationTypeRegistered=this._register(new A),this.onDecorationTypeRegistered=this._onDecorationTypeRegistered.event,this._decorationOptionProviders=new Map,this._editorStyleSheets=new Map,this._codeEditorOpenHandlers=new sn,this._transientWatchers=this._register(new Cf),this._modelProperties=new Map,this._codeEditors=Object.create(null),this._diffEditors=Object.create(null),this._globalStyleSheet=null}willCreateCodeEditor(){this._onWillCreateCodeEditor.fire()}addCodeEditor(e){this._codeEditors[e.getId()]=e,this._onCodeEditorAdd.fire(e)}removeCodeEditor(e){delete this._codeEditors[e.getId()]&&this._onCodeEditorRemove.fire(e)}listCodeEditors(){return Object.keys(this._codeEditors).map(e=>this._codeEditors[e])}willCreateDiffEditor(){this._onWillCreateDiffEditor.fire()}addDiffEditor(e){this._diffEditors[e.getId()]=e,this._onDiffEditorAdd.fire(e)}removeDiffEditor(e){delete this._diffEditors[e.getId()]&&this._onDiffEditorRemove.fire(e)}listDiffEditors(){return Object.keys(this._diffEditors).map(e=>this._diffEditors[e])}getFocusedCodeEditor(){let e=null;const t=this.listCodeEditors();for(const n of t){if(n.hasTextFocus())return n;n.hasWidgetFocus()&&(e=n)}return e}_getOrCreateGlobalStyleSheet(){return this._globalStyleSheet||(this._globalStyleSheet=this._createGlobalStyleSheet()),this._globalStyleSheet}_createGlobalStyleSheet(){return new N6(On())}_getOrCreateStyleSheet(e){if(!e)return this._getOrCreateGlobalStyleSheet();const t=e.getContainerDomNode();if(!am(t))return this._getOrCreateGlobalStyleSheet();const n=e.getId();if(!this._editorStyleSheets.has(n)){const s=new A6(this,n,On(t));this._editorStyleSheets.set(n,s)}return this._editorStyleSheets.get(n)}_removeEditorStyleSheets(e){this._editorStyleSheets.delete(e)}registerDecorationType(e,t,n,s,r){let o=this._decorationOptionProviders.get(t);if(!o){const a=this._getOrCreateStyleSheet(r),l={styleSheet:a,key:t,parentTypeKey:s,options:n||Object.create(null)};s?o=new R6(this._themeService,a,l):o=new M6(e,this._themeService,a,l),this._decorationOptionProviders.set(t,o),this._onDecorationTypeRegistered.fire(t)}return o.refCount++,{dispose:()=>{this.removeDecorationType(t)}}}listDecorationTypes(){return Array.from(this._decorationOptionProviders.keys())}removeDecorationType(e){const t=this._decorationOptionProviders.get(e);t&&(t.refCount--,t.refCount<=0&&(this._decorationOptionProviders.delete(e),t.dispose(),this.listCodeEditors().forEach(n=>n.removeDecorationsByType(e))))}resolveDecorationOptions(e,t){const n=this._decorationOptionProviders.get(e);if(!n)throw new Error("Unknown decoration type key: "+e);return n.getOptions(this,t)}resolveDecorationCSSRules(e){const t=this._decorationOptionProviders.get(e);return t?t.resolveDecorationCSSRules():null}setModelProperty(e,t,n){const s=e.toString();let r;this._modelProperties.has(s)?r=this._modelProperties.get(s):(r=new Map,this._modelProperties.set(s,r)),r.set(t,n)}getModelProperty(e,t){const n=e.toString();if(this._modelProperties.has(n))return this._modelProperties.get(n).get(t)}setTransientModelProperty(e,t,n){const s=e.uri.toString();let r=this._transientWatchers.get(s);r||(r=new T6(s,e,this),this._transientWatchers.set(s,r)),r.get(t)!==n&&(r.set(t,n),this._onDidChangeTransientModelProperty.fire(e))}getTransientModelProperty(e,t){const n=e.uri.toString(),s=this._transientWatchers.get(n);if(s)return s.get(t)}getTransientModelProperties(e){const t=e.uri.toString(),n=this._transientWatchers.get(t);if(n)return n.keys().map(s=>[s,n.get(s)])}_removeWatcher(e){this._transientWatchers.deleteAndDispose(e.uri)}async openCodeEditor(e,t,n){for(const s of this._codeEditorOpenHandlers){const r=await s(e,t,n);if(r!==null)return r}return null}registerCodeEditorOpenHandler(e){const t=this._codeEditorOpenHandlers.unshift(e);return fe(t)}};P0=G([L(0,no)],P0);class T6 extends ${constructor(e,t,n){super(),this.uri=e,this._values={},this._register(t.onWillDispose(()=>n._removeWatcher(this)))}set(e,t){this._values[e]=t}get(e){return this._values[e]}keys(){return Object.keys(this._values)}}class A6{get sheet(){return this._styleSheet.sheet}constructor(e,t,n){this._parent=e,this._editorId=t,this._styleSheet=n,this._refCount=0}ref(){this._refCount++}unref(){this._refCount--,this._refCount===0&&(this._styleSheet.remove(),this._parent._removeEditorStyleSheets(this._editorId))}insertRule(e,t){ir(e,t,this._styleSheet)}removeRulesContainingSelector(e){Wl(e,this._styleSheet)}}class N6{get sheet(){return this._styleSheet.sheet}constructor(e){this._styleSheet=e}ref(){}unref(){}insertRule(e,t){ir(e,t,this._styleSheet)}removeRulesContainingSelector(e){Wl(e,this._styleSheet)}}class R6{constructor(e,t,n){this._styleSheet=t,this._styleSheet.ref(),this._parentTypeKey=n.parentTypeKey,this.refCount=0,this._beforeContentRules=new dm(Ei.BeforeContentClassName,n,e),this._afterContentRules=new dm(Ei.AfterContentClassName,n,e)}getOptions(e,t){const n=e.resolveDecorationOptions(this._parentTypeKey,!0);return this._beforeContentRules&&(n.beforeContentClassName=this._beforeContentRules.className),this._afterContentRules&&(n.afterContentClassName=this._afterContentRules.className),n}resolveDecorationCSSRules(){return this._styleSheet.sheet.cssRules}dispose(){this._beforeContentRules&&(this._beforeContentRules.dispose(),this._beforeContentRules=null),this._afterContentRules&&(this._afterContentRules.dispose(),this._afterContentRules=null),this._styleSheet.unref()}}class M6{constructor(e,t,n,s){this._disposables=new X,this.description=e,this._styleSheet=n,this._styleSheet.ref(),this.refCount=0;const r=u=>{const f=new dm(u,s,t);if(this._disposables.add(f),f.hasContent)return f.className},o=u=>{const f=new dm(u,s,t);return this._disposables.add(f),f.hasContent?{className:f.className,hasLetterSpacing:f.hasLetterSpacing}:null};this.className=r(Ei.ClassName);const a=o(Ei.InlineClassName);if(a&&(this.inlineClassName=a.className,this.inlineClassNameAffectsLetterSpacing=a.hasLetterSpacing),this.beforeContentClassName=r(Ei.BeforeContentClassName),this.afterContentClassName=r(Ei.AfterContentClassName),s.options.beforeInjectedText&&s.options.beforeInjectedText.contentText){const u=o(Ei.BeforeInjectedTextClassName);this.beforeInjectedText={content:s.options.beforeInjectedText.contentText,inlineClassName:u?.className,inlineClassNameAffectsLetterSpacing:u?.hasLetterSpacing||s.options.beforeInjectedText.affectsLetterSpacing}}if(s.options.afterInjectedText&&s.options.afterInjectedText.contentText){const u=o(Ei.AfterInjectedTextClassName);this.afterInjectedText={content:s.options.afterInjectedText.contentText,inlineClassName:u?.className,inlineClassNameAffectsLetterSpacing:u?.hasLetterSpacing||s.options.afterInjectedText.affectsLetterSpacing}}this.glyphMarginClassName=r(Ei.GlyphMarginClassName);const l=s.options;this.isWholeLine=!!l.isWholeLine,this.lineHeight=l.lineHeight,this.stickiness=l.rangeBehavior;const c=l.light&&l.light.overviewRulerColor||l.overviewRulerColor,h=l.dark&&l.dark.overviewRulerColor||l.overviewRulerColor;(typeof c<"u"||typeof h<"u")&&(this.overviewRuler={color:c||h,darkColor:h||c,position:l.overviewRulerLane||$d.Center})}getOptions(e,t){return t?{description:this.description,inlineClassName:this.inlineClassName,beforeContentClassName:this.beforeContentClassName,afterContentClassName:this.afterContentClassName,className:this.className,glyphMarginClassName:this.glyphMarginClassName,isWholeLine:this.isWholeLine,lineHeight:this.lineHeight,overviewRuler:this.overviewRuler,stickiness:this.stickiness,before:this.beforeInjectedText,after:this.afterInjectedText}:this}resolveDecorationCSSRules(){return this._styleSheet.sheet.rules}dispose(){this._disposables.dispose(),this._styleSheet.unref()}}const Du={color:"color:{0} !important;",opacity:"opacity:{0};",backgroundColor:"background-color:{0};",outline:"outline:{0};",outlineColor:"outline-color:{0};",outlineStyle:"outline-style:{0};",outlineWidth:"outline-width:{0};",border:"border:{0};",borderColor:"border-color:{0};",borderRadius:"border-radius:{0};",borderSpacing:"border-spacing:{0};",borderStyle:"border-style:{0};",borderWidth:"border-width:{0};",fontStyle:"font-style:{0};",fontWeight:"font-weight:{0};",fontSize:"font-size:{0};",fontFamily:"font-family:{0};",textDecoration:"text-decoration:{0};",cursor:"cursor:{0};",letterSpacing:"letter-spacing:{0};",gutterIconPath:"background:{0} center center no-repeat;",gutterIconSize:"background-size:{0};",contentText:"content:'{0}';",contentIconPath:"content:{0};",margin:"margin:{0};",padding:"padding:{0};",width:"width:{0};",height:"height:{0};",verticalAlign:"vertical-align:{0};"};class dm{constructor(e,t,n){this._theme=n.getColorTheme(),this._ruleType=e,this._providerArgs=t,this._usesThemeColors=!1,this._hasContent=!1,this._hasLetterSpacing=!1;let s=r_.getClassName(this._providerArgs.key,e);this._providerArgs.parentTypeKey&&(s=s+" "+r_.getClassName(this._providerArgs.parentTypeKey,e)),this._className=s,this._unThemedSelector=r_.getSelector(this._providerArgs.key,this._providerArgs.parentTypeKey,e),this._buildCSS(),this._usesThemeColors?this._themeListener=n.onDidColorThemeChange(r=>{this._theme=n.getColorTheme(),this._removeCSS(),this._buildCSS()}):this._themeListener=null}dispose(){this._hasContent&&(this._removeCSS(),this._hasContent=!1),this._themeListener&&(this._themeListener.dispose(),this._themeListener=null)}get hasContent(){return this._hasContent}get hasLetterSpacing(){return this._hasLetterSpacing}get className(){return this._className}_buildCSS(){const e=this._providerArgs.options;let t,n,s;switch(this._ruleType){case Ei.ClassName:t=this.getCSSTextForModelDecorationClassName(e),n=this.getCSSTextForModelDecorationClassName(e.light),s=this.getCSSTextForModelDecorationClassName(e.dark);break;case Ei.InlineClassName:t=this.getCSSTextForModelDecorationInlineClassName(e),n=this.getCSSTextForModelDecorationInlineClassName(e.light),s=this.getCSSTextForModelDecorationInlineClassName(e.dark);break;case Ei.GlyphMarginClassName:t=this.getCSSTextForModelDecorationGlyphMarginClassName(e),n=this.getCSSTextForModelDecorationGlyphMarginClassName(e.light),s=this.getCSSTextForModelDecorationGlyphMarginClassName(e.dark);break;case Ei.BeforeContentClassName:t=this.getCSSTextForModelDecorationContentClassName(e.before),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.before),s=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.before);break;case Ei.AfterContentClassName:t=this.getCSSTextForModelDecorationContentClassName(e.after),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.after),s=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.after);break;case Ei.BeforeInjectedTextClassName:t=this.getCSSTextForModelDecorationContentClassName(e.beforeInjectedText),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.beforeInjectedText),s=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.beforeInjectedText);break;case Ei.AfterInjectedTextClassName:t=this.getCSSTextForModelDecorationContentClassName(e.afterInjectedText),n=this.getCSSTextForModelDecorationContentClassName(e.light&&e.light.afterInjectedText),s=this.getCSSTextForModelDecorationContentClassName(e.dark&&e.dark.afterInjectedText);break;default:throw new Error("Unknown rule type: "+this._ruleType)}const r=this._providerArgs.styleSheet;let o=!1;t.length>0&&(r.insertRule(this._unThemedSelector,t),o=!0),n.length>0&&(r.insertRule(`.vs${this._unThemedSelector}, .hc-light${this._unThemedSelector}`,n),o=!0),s.length>0&&(r.insertRule(`.vs-dark${this._unThemedSelector}, .hc-black${this._unThemedSelector}`,s),o=!0),this._hasContent=o}_removeCSS(){this._providerArgs.styleSheet.removeRulesContainingSelector(this._unThemedSelector)}getCSSTextForModelDecorationClassName(e){if(!e)return"";const t=[];return this.collectCSSText(e,["backgroundColor"],t),this.collectCSSText(e,["outline","outlineColor","outlineStyle","outlineWidth"],t),this.collectBorderSettingsCSSText(e,t),t.join("")}getCSSTextForModelDecorationInlineClassName(e){if(!e)return"";const t=[];return this.collectCSSText(e,["fontStyle","fontWeight","textDecoration","cursor","color","opacity","letterSpacing"],t),e.letterSpacing&&(this._hasLetterSpacing=!0),t.join("")}getCSSTextForModelDecorationContentClassName(e){if(!e)return"";const t=[];if(typeof e<"u"){if(this.collectBorderSettingsCSSText(e,t),typeof e.contentIconPath<"u"&&t.push(xo(Du.contentIconPath,pr(Y.revive(e.contentIconPath)))),typeof e.contentText=="string"){const s=e.contentText.match(/^.*$/m)[0].replace(/['\\]/g,"\\$&");t.push(xo(Du.contentText,s))}this.collectCSSText(e,["verticalAlign","fontStyle","fontWeight","fontSize","fontFamily","textDecoration","color","opacity","backgroundColor","margin","padding"],t),this.collectCSSText(e,["width","height"],t)&&t.push("display:inline-block;")}return t.join("")}getCSSTextForModelDecorationGlyphMarginClassName(e){if(!e)return"";const t=[];return typeof e.gutterIconPath<"u"&&(t.push(xo(Du.gutterIconPath,pr(Y.revive(e.gutterIconPath)))),typeof e.gutterIconSize<"u"&&t.push(xo(Du.gutterIconSize,e.gutterIconSize))),t.join("")}collectBorderSettingsCSSText(e,t){return this.collectCSSText(e,["border","borderColor","borderRadius","borderSpacing","borderStyle","borderWidth"],t)?(t.push(xo("box-sizing: border-box;")),!0):!1}collectCSSText(e,t,n){const s=n.length;for(const r of t){const o=this.resolveValue(e[r]);typeof o=="string"&&n.push(xo(Du[r],o))}return n.length!==s}resolveValue(e){if(I6(e)){this._usesThemeColors=!0;const t=this._theme.getColor(e.id);return t?t.toString():"transparent"}return e}}var Ei;(function(i){i[i.ClassName=0]="ClassName",i[i.InlineClassName=1]="InlineClassName",i[i.GlyphMarginClassName=2]="GlyphMarginClassName",i[i.BeforeContentClassName=3]="BeforeContentClassName",i[i.AfterContentClassName=4]="AfterContentClassName",i[i.BeforeInjectedTextClassName=5]="BeforeInjectedTextClassName",i[i.AfterInjectedTextClassName=6]="AfterInjectedTextClassName"})(Ei||(Ei={}));class r_{static getClassName(e,t){return"ced-"+e+"-"+t}static getSelector(e,t,n){let s=".monaco-editor ."+this.getClassName(e,n);return t&&(s=s+"."+this.getClassName(t,n)),n===Ei.BeforeContentClassName?s+="::before":n===Ei.AfterContentClassName&&(s+="::after"),s}}const Mt=be("contextKeyService");let B0=class extends P0{constructor(e,t){super(t),this._register(this.onCodeEditorAdd(()=>this._checkContextKey())),this._register(this.onCodeEditorRemove(()=>this._checkContextKey())),this._editorIsOpen=e.createKey("editorIsOpen",!1),this._activeCodeEditor=null,this._register(this.registerCodeEditorOpenHandler(async(n,s,r)=>s?this.doOpenEditor(s,n):null))}_checkContextKey(){let e=!1;for(const t of this.listCodeEditors())if(!t.isSimpleWidget){e=!0;break}this._editorIsOpen.set(e)}setActiveCodeEditor(e){this._activeCodeEditor=e}getActiveCodeEditor(){return this._activeCodeEditor}doOpenEditor(e,t){if(!this.findModel(e,t.resource)){if(t.resource){const r=t.resource.scheme;if(r===ge.http||r===ge.https)return wA(t.resource.toString()),e}return null}const s=t.options?t.options.selection:null;if(s)if(typeof s.endLineNumber=="number"&&typeof s.endColumn=="number")e.setSelection(s),e.revealRangeInCenter(s,um.Immediate);else{const r={lineNumber:s.startLineNumber,column:s.startColumn};e.setPosition(r),e.revealPositionInCenter(r,um.Immediate)}return e}findModel(e,t){const n=e.getModel();return n&&n.uri.toString()!==t.toString()?null:n}};B0=G([L(0,Mt),L(1,no)],B0);st(vr,B0,Xe.Eager);const Jo=be("layoutService");let fm=class{get mainContainer(){return this._codeEditorService.listCodeEditors().at(0)?.getContainerDomNode()??$e.document.body}get activeContainer(){return(this._codeEditorService.getFocusedCodeEditor()??this._codeEditorService.getActiveCodeEditor())?.getContainerDomNode()??this.mainContainer}get mainContainerDimension(){return om(this.mainContainer)}get activeContainerDimension(){return om(this.activeContainer)}get containers(){return ru(this._codeEditorService.listCodeEditors().map(e=>e.getContainerDomNode()))}getContainer(){return this.activeContainer}whenContainerStylesLoaded(){}focus(){this._codeEditorService.getFocusedCodeEditor()?.focus()}constructor(e){this._codeEditorService=e,this.onDidLayoutMainContainer=W.None,this.onDidLayoutActiveContainer=W.None,this.onDidLayoutContainer=W.None,this.onDidChangeActiveContainer=W.None,this.onDidAddContainer=W.None,this.mainContainerOffset={top:0,quickPickTop:0},this.activeContainerOffset={top:0,quickPickTop:0}}};fm=G([L(0,vr)],fm);let W0=class extends fm{get mainContainer(){return this._container}constructor(e,t){super(t),this._container=e}};W0=G([L(1,vr)],W0);st(Jo,fm,Xe.Delayed);var Qd;(function(i){i[i.Ignore=0]="Ignore",i[i.Info=1]="Info",i[i.Warning=2]="Warning",i[i.Error=3]="Error"})(Qd||(Qd={}));(function(i){const e="error",t="warning",n="warn",s="info",r="ignore";function o(l){return l?Ia(e,l)?i.Error:Ia(t,l)||Ia(n,l)?i.Warning:Ia(s,l)?i.Info:i.Ignore:i.Ignore}i.fromValue=o;function a(l){switch(l){case i.Error:return e;case i.Warning:return t;case i.Info:return s;default:return r}}i.toString=a})(Qd||(Qd={}));var bt=Qd;const SA=be("dialogService"),Cee=be("fileDialogService"),Ec=be("notificationService");var Yi;(function(i){i[i.Resource=0]="Resource",i[i.Workspace=1]="Workspace"})(Yi||(Yi={}));class kA{constructor(e,t){this.resource=e,this.elements=t}}class gm{static{this._ID=0}constructor(){this.id=gm._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}static{this.None=new gm}}class ka{static{this._ID=0}constructor(){this.id=ka._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}static{this.None=new ka}}function Cg(i){return i.scheme===ge.file?i.fsPath:i.path}let CA=0;class Eg{constructor(e,t,n,s,r,o,a){this.id=++CA,this.type=Yi.Resource,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabel=t,this.strResource=n,this.resourceLabels=[this.resourceLabel],this.strResources=[this.strResource],this.groupId=s,this.groupOrder=r,this.sourceId=o,this.sourceOrder=a,this.isValid=!0}setValid(e){this.isValid=e}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.isValid?"  VALID":"INVALID"}] ${this.actual.constructor.name} - ${this.actual}`}}var Ao;(function(i){i[i.ExternalRemoval=0]="ExternalRemoval",i[i.NoParallelUniverses=1]="NoParallelUniverses"})(Ao||(Ao={}));class F2{constructor(e,t){this.resourceLabel=e,this.reason=t}}class P2{constructor(){this.elements=new Map}createMessage(){const e=[],t=[];for(const[,s]of this.elements)(s.reason===Ao.ExternalRemoval?e:t).push(s.resourceLabel);const n=[];return e.length>0&&n.push(d(2340,"The following files have been closed and modified on disk: {0}.",e.join(", "))),t.length>0&&n.push(d(2341,"The following files have been modified in an incompatible way: {0}.",t.join(", "))),n.join(`
`)}get size(){return this.elements.size}has(e){return this.elements.has(e)}set(e,t){this.elements.set(e,t)}delete(e){return this.elements.delete(e)}}class O6{constructor(e,t,n,s,r,o,a){this.id=++CA,this.type=Yi.Workspace,this.actual=e,this.label=e.label,this.confirmBeforeUndo=e.confirmBeforeUndo||!1,this.resourceLabels=t,this.strResources=n,this.groupId=s,this.groupOrder=r,this.sourceId=o,this.sourceOrder=a,this.removedResources=null,this.invalidatedResources=null}canSplit(){return typeof this.actual.split=="function"}removeResource(e,t,n){this.removedResources||(this.removedResources=new P2),this.removedResources.has(t)||this.removedResources.set(t,new F2(e,n))}setValid(e,t,n){n?this.invalidatedResources&&(this.invalidatedResources.delete(t),this.invalidatedResources.size===0&&(this.invalidatedResources=null)):(this.invalidatedResources||(this.invalidatedResources=new P2),this.invalidatedResources.has(t)||this.invalidatedResources.set(t,new F2(e,Ao.ExternalRemoval)))}toString(){return`[id:${this.id}] [group:${this.groupId}] [${this.invalidatedResources?"INVALID":"  VALID"}] ${this.actual.constructor.name} - ${this.actual}`}}class EA{constructor(e,t){this.resourceLabel=e,this.strResource=t,this._past=[],this._future=[],this.locked=!1,this.versionId=1}dispose(){for(const e of this._past)e.type===Yi.Workspace&&e.removeResource(this.resourceLabel,this.strResource,Ao.ExternalRemoval);for(const e of this._future)e.type===Yi.Workspace&&e.removeResource(this.resourceLabel,this.strResource,Ao.ExternalRemoval);this.versionId++}toString(){const e=[];e.push(`* ${this.strResource}:`);for(let t=0;t<this._past.length;t++)e.push(`   * [UNDO] ${this._past[t]}`);for(let t=this._future.length-1;t>=0;t--)e.push(`   * [REDO] ${this._future[t]}`);return e.join(`
`)}flushAllElements(){this._past=[],this._future=[],this.versionId++}setElementsIsValid(e){for(const t of this._past)t.type===Yi.Workspace?t.setValid(this.resourceLabel,this.strResource,e):t.setValid(e);for(const t of this._future)t.type===Yi.Workspace?t.setValid(this.resourceLabel,this.strResource,e):t.setValid(e)}_setElementValidFlag(e,t){e.type===Yi.Workspace?e.setValid(this.resourceLabel,this.strResource,t):e.setValid(t)}setElementsValidFlag(e,t){for(const n of this._past)t(n.actual)&&this._setElementValidFlag(n,e);for(const n of this._future)t(n.actual)&&this._setElementValidFlag(n,e)}pushElement(e){for(const t of this._future)t.type===Yi.Workspace&&t.removeResource(this.resourceLabel,this.strResource,Ao.NoParallelUniverses);this._future=[],this._past.push(e),this.versionId++}createSnapshot(e){const t=[];for(let n=0,s=this._past.length;n<s;n++)t.push(this._past[n].id);for(let n=this._future.length-1;n>=0;n--)t.push(this._future[n].id);return new kA(e,t)}restoreSnapshot(e){const t=e.elements.length;let n=!0,s=0,r=-1;for(let a=0,l=this._past.length;a<l;a++,s++){const c=this._past[a];n&&(s>=t||c.id!==e.elements[s])&&(n=!1,r=0),!n&&c.type===Yi.Workspace&&c.removeResource(this.resourceLabel,this.strResource,Ao.ExternalRemoval)}let o=-1;for(let a=this._future.length-1;a>=0;a--,s++){const l=this._future[a];n&&(s>=t||l.id!==e.elements[s])&&(n=!1,o=a),!n&&l.type===Yi.Workspace&&l.removeResource(this.resourceLabel,this.strResource,Ao.ExternalRemoval)}r!==-1&&(this._past=this._past.slice(0,r)),o!==-1&&(this._future=this._future.slice(o+1)),this.versionId++}getElements(){const e=[],t=[];for(const n of this._past)e.push(n.actual);for(const n of this._future)t.push(n.actual);return{past:e,future:t}}getClosestPastElement(){return this._past.length===0?null:this._past[this._past.length-1]}getSecondClosestPastElement(){return this._past.length<2?null:this._past[this._past.length-2]}getClosestFutureElement(){return this._future.length===0?null:this._future[this._future.length-1]}hasPastElements(){return this._past.length>0}hasFutureElements(){return this._future.length>0}splitPastWorkspaceElement(e,t){for(let n=this._past.length-1;n>=0;n--)if(this._past[n]===e){t.has(this.strResource)?this._past[n]=t.get(this.strResource):this._past.splice(n,1);break}this.versionId++}splitFutureWorkspaceElement(e,t){for(let n=this._future.length-1;n>=0;n--)if(this._future[n]===e){t.has(this.strResource)?this._future[n]=t.get(this.strResource):this._future.splice(n,1);break}this.versionId++}moveBackward(e){this._past.pop(),this._future.push(e),this.versionId++}moveForward(e){this._future.pop(),this._past.push(e),this.versionId++}}class o_{constructor(e){this.editStacks=e,this._versionIds=[];for(let t=0,n=this.editStacks.length;t<n;t++)this._versionIds[t]=this.editStacks[t].versionId}isValid(){for(let e=0,t=this.editStacks.length;e<t;e++)if(this._versionIds[e]!==this.editStacks[e].versionId)return!1;return!0}}const xA=new EA("","");xA.locked=!0;let B2=class{constructor(e,t){this._dialogService=e,this._notificationService=t,this._editStacks=new Map,this._uriComparisonKeyComputers=[]}registerUriComparisonKeyComputer(e,t){return this._uriComparisonKeyComputers.push([e,t]),{dispose:()=>{for(let n=0,s=this._uriComparisonKeyComputers.length;n<s;n++)if(this._uriComparisonKeyComputers[n][1]===t){this._uriComparisonKeyComputers.splice(n,1);return}}}}getUriComparisonKey(e){for(const t of this._uriComparisonKeyComputers)if(t[0]===e.scheme)return t[1].getComparisonKey(e);return e.toString()}_print(e){console.log("------------------------------------"),console.log(`AFTER ${e}: `);const t=[];for(const n of this._editStacks)t.push(n[1].toString());console.log(t.join(`
`))}pushElement(e,t=gm.None,n=ka.None){if(e.type===Yi.Resource){const s=Cg(e.resource),r=this.getUriComparisonKey(e.resource);this._pushElement(new Eg(e,s,r,t.id,t.nextOrder(),n.id,n.nextOrder()))}else{const s=new Set,r=[],o=[];for(const a of e.resources){const l=Cg(a),c=this.getUriComparisonKey(a);s.has(c)||(s.add(c),r.push(l),o.push(c))}r.length===1?this._pushElement(new Eg(e,r[0],o[0],t.id,t.nextOrder(),n.id,n.nextOrder())):this._pushElement(new O6(e,r,o,t.id,t.nextOrder(),n.id,n.nextOrder()))}}_pushElement(e){for(let t=0,n=e.strResources.length;t<n;t++){const s=e.resourceLabels[t],r=e.strResources[t];let o;this._editStacks.has(r)?o=this._editStacks.get(r):(o=new EA(s,r),this._editStacks.set(r,o)),o.pushElement(e)}}getLastElement(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const n=this._editStacks.get(t);if(n.hasFutureElements())return null;const s=n.getClosestPastElement();return s?s.actual:null}return null}_splitPastWorkspaceElement(e,t){const n=e.actual.split(),s=new Map;for(const r of n){const o=Cg(r.resource),a=this.getUriComparisonKey(r.resource),l=new Eg(r,o,a,0,0,0,0);s.set(l.strResource,l)}for(const r of e.strResources){if(t&&t.has(r))continue;this._editStacks.get(r).splitPastWorkspaceElement(e,s)}}_splitFutureWorkspaceElement(e,t){const n=e.actual.split(),s=new Map;for(const r of n){const o=Cg(r.resource),a=this.getUriComparisonKey(r.resource),l=new Eg(r,o,a,0,0,0,0);s.set(l.strResource,l)}for(const r of e.strResources){if(t&&t.has(r))continue;this._editStacks.get(r).splitFutureWorkspaceElement(e,s)}}removeElements(e){const t=typeof e=="string"?e:this.getUriComparisonKey(e);this._editStacks.has(t)&&(this._editStacks.get(t).dispose(),this._editStacks.delete(t))}setElementsValidFlag(e,t,n){const s=this.getUriComparisonKey(e);this._editStacks.has(s)&&this._editStacks.get(s).setElementsValidFlag(t,n)}hasElements(e){const t=this.getUriComparisonKey(e);if(this._editStacks.has(t)){const n=this._editStacks.get(t);return n.hasPastElements()||n.hasFutureElements()}return!1}createSnapshot(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).createSnapshot(e):new kA(e,[])}restoreSnapshot(e){const t=this.getUriComparisonKey(e.resource);if(this._editStacks.has(t)){const n=this._editStacks.get(t);n.restoreSnapshot(e),!n.hasPastElements()&&!n.hasFutureElements()&&(n.dispose(),this._editStacks.delete(t))}}getElements(e){const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).getElements():{past:[],future:[]}}_findClosestUndoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestPastElement();o&&o.sourceId===e&&(!t||o.sourceOrder>t.sourceOrder)&&(t=o,n=s)}return[t,n]}canUndo(e){if(e instanceof ka){const[,n]=this._findClosestUndoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasPastElements():!1}_onError(e,t){pt(e);for(const n of t.strResources)this.removeElements(n);this._notificationService.error(e)}_acquireLocks(e){for(const t of e.editStacks)if(t.locked)throw new Error("Cannot acquire edit stack lock");for(const t of e.editStacks)t.locked=!0;return()=>{for(const t of e.editStacks)t.locked=!1}}_safeInvokeWithLocks(e,t,n,s,r){const o=this._acquireLocks(n);let a;try{a=t()}catch(l){return o(),s.dispose(),this._onError(l,e)}return a?a.then(()=>(o(),s.dispose(),r()),l=>(o(),s.dispose(),this._onError(l,e))):(o(),s.dispose(),r())}async _invokeWorkspacePrepare(e){if(typeof e.actual.prepareUndoRedo>"u")return $.None;const t=e.actual.prepareUndoRedo();return typeof t>"u"?$.None:t}_invokeResourcePrepare(e,t){if(e.actual.type!==Yi.Workspace||typeof e.actual.prepareUndoRedo>"u")return t($.None);const n=e.actual.prepareUndoRedo();return n?lu(n)?t(n):n.then(s=>t(s)):t($.None)}_getAffectedEditStacks(e){const t=[];for(const n of e.strResources)t.push(this._editStacks.get(n)||xA);return new o_(t)}_tryToSplitAndUndo(e,t,n,s){if(t.canSplit())return this._splitPastWorkspaceElement(t,n),this._notificationService.warn(s),new xg(this._undo(e,0,!0));for(const r of t.strResources)this.removeElements(r);return this._notificationService.warn(s),new xg}_checkWorkspaceUndo(e,t,n,s){if(t.removedResources)return this._tryToSplitAndUndo(e,t,t.removedResources,d(2342,"Could not undo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndUndo(e,t,t.invalidatedResources,d(2342,"Could not undo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const a of n.editStacks)a.getClosestPastElement()!==t&&r.push(a.resourceLabel);if(r.length>0)return this._tryToSplitAndUndo(e,t,null,d(2343,"Could not undo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const o=[];for(const a of n.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndUndo(e,t,null,d(2344,"Could not undo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):n.isValid()?null:this._tryToSplitAndUndo(e,t,null,d(2345,"Could not undo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceUndo(e,t,n){const s=this._getAffectedEditStacks(t),r=this._checkWorkspaceUndo(e,t,s,!1);return r?r.returnValue:this._confirmAndExecuteWorkspaceUndo(e,t,s,n)}_isPartOfUndoGroup(e){if(!e.groupId)return!1;for(const[,t]of this._editStacks){const n=t.getClosestPastElement();if(n){if(n===e){const s=t.getSecondClosestPastElement();if(s&&s.groupId===e.groupId)return!0}if(n.groupId===e.groupId)return!0}}return!1}async _confirmAndExecuteWorkspaceUndo(e,t,n,s){if(t.canSplit()&&!this._isPartOfUndoGroup(t)){let a;(function(h){h[h.All=0]="All",h[h.This=1]="This",h[h.Cancel=2]="Cancel"})(a||(a={}));const{result:l}=await this._dialogService.prompt({type:bt.Info,message:d(2346,"Would you like to undo '{0}' across all files?",t.label),buttons:[{label:d(2347,"&&Undo in {0} Files",n.editStacks.length),run:()=>a.All},{label:d(2348,"Undo this &&File"),run:()=>a.This}],cancelButton:{run:()=>a.Cancel}});if(l===a.Cancel)return;if(l===a.This)return this._splitPastWorkspaceElement(t,null),this._undo(e,0,!0);const c=this._checkWorkspaceUndo(e,t,n,!1);if(c)return c.returnValue;s=!0}let r;try{r=await this._invokeWorkspacePrepare(t)}catch(a){return this._onError(a,t)}const o=this._checkWorkspaceUndo(e,t,n,!0);if(o)return r.dispose(),o.returnValue;for(const a of n.editStacks)a.moveBackward(t);return this._safeInvokeWithLocks(t,()=>t.actual.undo(),n,r,()=>this._continueUndoInGroup(t.groupId,s))}_resourceUndo(e,t,n){if(!t.isValid){e.flushAllElements();return}if(e.locked){const s=d(2349,"Could not undo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(s);return}return this._invokeResourcePrepare(t,s=>(e.moveBackward(t),this._safeInvokeWithLocks(t,()=>t.actual.undo(),new o_([e]),s,()=>this._continueUndoInGroup(t.groupId,n))))}_findClosestUndoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestPastElement();o&&o.groupId===e&&(!t||o.groupOrder>t.groupOrder)&&(t=o,n=s)}return[t,n]}_continueUndoInGroup(e,t){if(!e)return;const[,n]=this._findClosestUndoElementInGroup(e);if(n)return this._undo(n,0,t)}undo(e){if(e instanceof ka){const[,t]=this._findClosestUndoElementWithSource(e.id);return t?this._undo(t,e.id,!1):void 0}return typeof e=="string"?this._undo(e,0,!1):this._undo(this.getUriComparisonKey(e),0,!1)}_undo(e,t=0,n){if(!this._editStacks.has(e))return;const s=this._editStacks.get(e),r=s.getClosestPastElement();if(!r)return;if(r.groupId){const[a,l]=this._findClosestUndoElementInGroup(r.groupId);if(r!==a&&l)return this._undo(l,t,n)}if((r.sourceId!==t||r.confirmBeforeUndo)&&!n)return this._confirmAndContinueUndo(e,t,r);try{return r.type===Yi.Workspace?this._workspaceUndo(e,r,n):this._resourceUndo(s,r,n)}finally{}}async _confirmAndContinueUndo(e,t,n){if((await this._dialogService.confirm({message:d(2350,"Would you like to undo '{0}'?",n.label),primaryButton:d(2351,"&&Yes"),cancelButton:d(2352,"No")})).confirmed)return this._undo(e,t,!0)}_findClosestRedoElementWithSource(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestFutureElement();o&&o.sourceId===e&&(!t||o.sourceOrder<t.sourceOrder)&&(t=o,n=s)}return[t,n]}canRedo(e){if(e instanceof ka){const[,n]=this._findClosestRedoElementWithSource(e.id);return!!n}const t=this.getUriComparisonKey(e);return this._editStacks.has(t)?this._editStacks.get(t).hasFutureElements():!1}_tryToSplitAndRedo(e,t,n,s){if(t.canSplit())return this._splitFutureWorkspaceElement(t,n),this._notificationService.warn(s),new xg(this._redo(e));for(const r of t.strResources)this.removeElements(r);return this._notificationService.warn(s),new xg}_checkWorkspaceRedo(e,t,n,s){if(t.removedResources)return this._tryToSplitAndRedo(e,t,t.removedResources,d(2353,"Could not redo '{0}' across all files. {1}",t.label,t.removedResources.createMessage()));if(s&&t.invalidatedResources)return this._tryToSplitAndRedo(e,t,t.invalidatedResources,d(2353,"Could not redo '{0}' across all files. {1}",t.label,t.invalidatedResources.createMessage()));const r=[];for(const a of n.editStacks)a.getClosestFutureElement()!==t&&r.push(a.resourceLabel);if(r.length>0)return this._tryToSplitAndRedo(e,t,null,d(2354,"Could not redo '{0}' across all files because changes were made to {1}",t.label,r.join(", ")));const o=[];for(const a of n.editStacks)a.locked&&o.push(a.resourceLabel);return o.length>0?this._tryToSplitAndRedo(e,t,null,d(2355,"Could not redo '{0}' across all files because there is already an undo or redo operation running on {1}",t.label,o.join(", "))):n.isValid()?null:this._tryToSplitAndRedo(e,t,null,d(2356,"Could not redo '{0}' across all files because an undo or redo operation occurred in the meantime",t.label))}_workspaceRedo(e,t){const n=this._getAffectedEditStacks(t),s=this._checkWorkspaceRedo(e,t,n,!1);return s?s.returnValue:this._executeWorkspaceRedo(e,t,n)}async _executeWorkspaceRedo(e,t,n){let s;try{s=await this._invokeWorkspacePrepare(t)}catch(o){return this._onError(o,t)}const r=this._checkWorkspaceRedo(e,t,n,!0);if(r)return s.dispose(),r.returnValue;for(const o of n.editStacks)o.moveForward(t);return this._safeInvokeWithLocks(t,()=>t.actual.redo(),n,s,()=>this._continueRedoInGroup(t.groupId))}_resourceRedo(e,t){if(!t.isValid){e.flushAllElements();return}if(e.locked){const n=d(2357,"Could not redo '{0}' because there is already an undo or redo operation running.",t.label);this._notificationService.warn(n);return}return this._invokeResourcePrepare(t,n=>(e.moveForward(t),this._safeInvokeWithLocks(t,()=>t.actual.redo(),new o_([e]),n,()=>this._continueRedoInGroup(t.groupId))))}_findClosestRedoElementInGroup(e){if(!e)return[null,null];let t=null,n=null;for(const[s,r]of this._editStacks){const o=r.getClosestFutureElement();o&&o.groupId===e&&(!t||o.groupOrder<t.groupOrder)&&(t=o,n=s)}return[t,n]}_continueRedoInGroup(e){if(!e)return;const[,t]=this._findClosestRedoElementInGroup(e);if(t)return this._redo(t)}redo(e){if(e instanceof ka){const[,t]=this._findClosestRedoElementWithSource(e.id);return t?this._redo(t):void 0}return typeof e=="string"?this._redo(e):this._redo(this.getUriComparisonKey(e))}_redo(e){if(!this._editStacks.has(e))return;const t=this._editStacks.get(e),n=t.getClosestFutureElement();if(n){if(n.groupId){const[s,r]=this._findClosestRedoElementInGroup(n.groupId);if(n!==s&&r)return this._redo(r)}try{return n.type===Yi.Workspace?this._workspaceRedo(e,n):this._resourceRedo(t,n)}finally{}}}};B2=G([L(0,SA),L(1,Ec)],B2);class xg{constructor(e){this.returnValue=e}}const fu=be("environmentService"),Zi=be("logService"),F6=be("loggerService");var pm;(function(i){const e=new WeakMap;let t=0;function n(s){let r=e.get(s);return r===void 0&&(r=++t,e.set(s,r)),r}i.of=n})(pm||(pm={}));class P6{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}}class B6{constructor(e,t,n,s,r,o){this._logService=e,this._name=t,this._registry=n,this._default=s,this._min=r,this._max=o,this._cache=new v1(50,.7)}_key(e){return e.id+this._registry.all(e).reduce((t,n)=>N1(pm.of(n),t),0)}get(e){const t=this._key(e),n=this._cache.get(t);return n?pn(n.value,this._min,this._max):this.default()}update(e,t){const n=this._key(e);let s=this._cache.get(n);s||(s=new kF(6),this._cache.set(n,s));const r=pn(s.update(t),this._min,this._max);return L1(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${r}ms`),r}_overall(){const e=new $T;for(const[,t]of this._cache)e.update(t.value);return e.value}default(){const e=this._overall()|0||this._default;return pn(e,this._min,this._max)}}let W2=class{constructor(e,t){this._logService=e,this._data=new Map,this._isDev=t.isExtensionDevelopment||!t.isBuilt}for(e,t,n){const s=n?.min??50,r=n?.max??s**2,o=n?.key??void 0,a=`${pm.of(e)},${s}${o?","+o:""}`;let l=this._data.get(a);return l||(this._isDev?(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),l=new P6(s*1.5)):l=new B6(this._logService,t,e,this._overallAverage()|0||s*1.5,s,r),this._data.set(a,l)),l}_overallAverage(){const e=new $T;for(const t of this._data.values())e.update(t.default());return e.value}};W2=G([L(0,Zi),L(1,fu)],W2);const xc=be("languageService");class pe{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new pe(e,t)}delta(e=0,t=0){return this.with(Math.max(1,this.lineNumber+e),Math.max(1,this.column+t))}equals(e){return pe.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return pe.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return pe.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const n=e.lineNumber|0,s=t.lineNumber|0;if(n===s){const r=e.column|0,o=t.column|0;return r-o}return n-s}clone(){return new pe(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new pe(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}}let H=class di{constructor(e,t,n,s){e>n||e===n&&t>s?(this.startLineNumber=n,this.startColumn=s,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=s)}isEmpty(){return di.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return di.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return di.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return di.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return di.plusRange(this,e)}static plusRange(e,t){let n,s,r,o;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,s=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,s=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,s=e.startColumn),t.endLineNumber>e.endLineNumber?(r=t.endLineNumber,o=t.endColumn):t.endLineNumber===e.endLineNumber?(r=t.endLineNumber,o=Math.max(t.endColumn,e.endColumn)):(r=e.endLineNumber,o=e.endColumn),new di(n,s,r,o)}intersectRanges(e){return di.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn;const a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,h=t.endColumn;return n<a?(n=a,s=l):n===a&&(s=Math.max(s,l)),r>c?(r=c,o=h):r===c&&(o=Math.min(o,h)),n>r||n===r&&s>o?null:new di(n,s,r,o)}equalsRange(e){return di.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return di.getEndPosition(this)}static getEndPosition(e){return new pe(e.endLineNumber,e.endColumn)}getStartPosition(){return di.getStartPosition(this)}static getStartPosition(e){return new pe(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new di(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new di(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return di.collapseToStart(this)}static collapseToStart(e){return new di(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return di.collapseToEnd(this)}static collapseToEnd(e){return new di(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new di(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(e,t=e){return new di(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new di(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static areOnlyIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber-1||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn-1||t.endLineNumber<e.startLineNumber-1||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn-1)}static compareRangesUsingStarts(e,t){if(e&&t){const r=e.startLineNumber|0,o=t.startLineNumber|0;if(r===o){const a=e.startColumn|0,l=t.startColumn|0;if(a===l){const c=e.endLineNumber|0,h=t.endLineNumber|0;if(c===h){const u=e.endColumn|0,f=t.endColumn|0;return u-f}return c-h}return a-l}return r-o}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};var Bo;(function(i){i[i.Unknown=0]="Unknown",i[i.Invalid=3]="Invalid",i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(Bo||(Bo={}));function Yr(i){let e=0,t=0,n=0,s=Bo.Unknown;for(let r=0,o=i.length;r<o;r++){const a=i.charCodeAt(r);a===k.CarriageReturn?(e===0&&(t=r),e++,r+1<o&&i.charCodeAt(r+1)===k.LineFeed?(s|=Bo.CRLF,r++):s|=Bo.Invalid,n=r+1):a===k.LineFeed&&(s|=Bo.LF,e===0&&(t=r),e++,n=r+1)}return e===0&&(t=i.length),[e,t,i.length-n,s]}class W6{constructor(e=5){this.timesPerSecond=e,this._lastRun=0,this._minimumTimeBetweenRuns=1e3/e}runIfNotLimited(e){const t=Date.now();t-this._lastRun>=this._minimumTimeBetweenRuns&&(this._lastRun=t,e())}}class hd{static create(e,t){return new hd(e,new rh(t))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){const e=this._tokens.getRange();return e&&new H(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn)}removeTokens(e){const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber,[s,r,o]=this._tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new hd(this._startLineNumber,s),new hd(this._startLineNumber+o,r)]}applyEdit(e,t){const[n,s,r]=Yr(t);this.acceptEdit(e,n,s,r,t.length>0?t.charCodeAt(0):k.Null)}acceptEdit(e,t,n,s,r){this._acceptDeleteRange(e),this._acceptInsertText(new pe(e.startLineNumber,e.startColumn),t,n,s,r),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){const r=n-t;this._startLineNumber-=r;return}const s=this._tokens.getMaxDeltaLine();if(!(t>=s+1)){if(t<0&&n>=s+1){this._startLineNumber=0,this._tokens.clear();return}if(t<0){const r=-t;this._startLineNumber-=r,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,s,r){if(t===0&&n===0)return;const o=e.lineNumber-this._startLineNumber;if(o<0){this._startLineNumber+=t;return}const a=this._tokens.getMaxDeltaLine();o>=a+1||this._tokens.acceptInsertText(o,e.column-1,t,n,s,r)}reportIfInvalid(e){this._tokens.reportIfInvalid(e,this._startLineNumber)}}class rh{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){const t=[];for(let n=0;n<this._tokenCount;n++)t.push(`(${this._getDeltaLine(n)+e},${this._getStartCharacter(n)}-${this._getEndCharacter(n)})`);return`[${t.join(",")}]`}getMaxDeltaLine(){const e=this._getTokenCount();return e===0?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(e===0)return null;const t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),s=this._getEndCharacter(e-1);return new H(0,t+1,n,s+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return this._getTokenCount()===0}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){const s=t+Math.floor((n-t)/2),r=this._getDeltaLine(s);if(r<e)t=s+1;else if(r>e)n=s-1;else{let o=s;for(;o>t&&this._getDeltaLine(o-1)===e;)o--;let a=s;for(;a<n&&this._getDeltaLine(a+1)===e;)a++;return new U2(this._tokens.subarray(4*o,4*a+4))}}return this._getDeltaLine(t)===e?new U2(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,s){const r=this._tokens,o=this._tokenCount;let a=0,l=!1,c=0;for(let h=0;h<o;h++){const u=4*h,f=r[u],g=r[u+1],p=r[u+2],m=r[u+3];if((f>e||f===e&&p>=t)&&(f<n||f===n&&g<=s))l=!0;else{if(a===0&&(c=f),l){const _=4*a;r[_]=f-c,r[_+1]=g,r[_+2]=p,r[_+3]=m}a++}}return this._tokenCount=a,c}split(e,t,n,s){const r=this._tokens,o=this._tokenCount,a=[],l=[];let c=a,h=0,u=0;for(let f=0;f<o;f++){const g=4*f,p=r[g],m=r[g+1],_=r[g+2],v=r[g+3];if(p>e||p===e&&_>=t){if(p<n||p===n&&m<=s)continue;c!==l&&(c=l,h=0,u=p)}c[h++]=p-u,c[h++]=m,c[h++]=_,c[h++]=v}return[new rh(new Uint32Array(a)),new rh(new Uint32Array(l)),u]}acceptDeleteRange(e,t,n,s,r){const o=this._tokens,a=this._tokenCount,l=s-t;let c=0,h=!1;for(let u=0;u<a;u++){const f=4*u;let g=o[f],p=o[f+1],m=o[f+2];const _=o[f+3];if(g<t||g===t&&m<=n){c++;continue}else if(g===t&&p<n)g===s&&m>r?m-=r-n:m=n;else if(g===t&&p===n)if(g===s&&m>r)m-=r-n;else{h=!0;continue}else if(g<s||g===s&&p<r)if(g===s&&m>r)g=t,p=n,m=p+(m-r);else{h=!0;continue}else if(g>s){if(l===0&&!h){c=a;break}g-=l}else if(g===s&&p>=r)e&&g===0&&(p+=e,m+=e),g-=l,p-=r-n,m-=r-n;else throw new Error("Not possible!");const v=4*c;o[v]=g,o[v+1]=p,o[v+2]=m,o[v+3]=_,c++}this._tokenCount=c}acceptInsertText(e,t,n,s,r,o){const a=n===0&&s===1&&(o>=k.Digit0&&o<=k.Digit9||o>=k.A&&o<=k.Z||o>=k.a&&o<=k.z),l=this._tokens,c=this._tokenCount;for(let h=0;h<c;h++){const u=4*h;let f=l[u],g=l[u+1],p=l[u+2];if(!(f<e||f===e&&p<t)){if(f===e&&p===t)if(a)p+=1;else continue;else if(f===e&&g<t&&t<p)n===0?p+=s:p=t;else{if(f===e&&g===t&&a)continue;if(f===e)if(f+=n,n===0)g+=s,p+=s;else{const m=p-g;g=r+(g-t),p=g+m}else f+=n}l[u]=f,l[u+1]=g,l[u+2]=p}}}static{this._rateLimiter=new W6(10/60)}reportIfInvalid(e,t){for(let n=0;n<this._tokenCount;n++){const s=this._getDeltaLine(n)+t;s>e.getLineCount()&&rh._rateLimiter.runIfNotLimited(()=>{console.error("Invalid Semantic Tokens Data From Extension: lineNumber > model.getLineCount()")}),this._getEndCharacter(n)>e.getLineLength(s)&&rh._rateLimiter.runIfNotLimited(()=>{console.error("Invalid Semantic Tokens Data From Extension: end character > model.getLineLength(lineNumber)")})}}}class U2{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}var Ch;(function(i){i[i.NO_STYLING=2147483647]="NO_STYLING"})(Ch||(Ch={}));let U0=class{constructor(e,t,n,s){this._legend=e,this._themeService=t,this._languageService=n,this._logService=s,this._hasWarnedOverlappingTokens=!1,this._hasWarnedInvalidLengthTokens=!1,this._hasWarnedInvalidEditStart=!1,this._hashTable=new ga}getMetadata(e,t,n){const s=this._languageService.languageIdCodec.encodeLanguageId(n),r=this._hashTable.get(e,t,s);let o;if(r)o=r.metadata;else{let a=this._legend.tokenTypes[e];const l=[];if(a){let c=t;for(let u=0;c>0&&u<this._legend.tokenModifiers.length;u++)c&1&&l.push(this._legend.tokenModifiers[u]),c=c>>1;const h=this._themeService.getColorTheme().getTokenStyleMetadata(a,l,n);if(typeof h>"u")o=Ch.NO_STYLING;else{if(o=0,typeof h.italic<"u"){const u=(h.italic?ht.Italic:0)<<Ce.FONT_STYLE_OFFSET;o|=u|Ce.SEMANTIC_USE_ITALIC}if(typeof h.bold<"u"){const u=(h.bold?ht.Bold:0)<<Ce.FONT_STYLE_OFFSET;o|=u|Ce.SEMANTIC_USE_BOLD}if(typeof h.underline<"u"){const u=(h.underline?ht.Underline:0)<<Ce.FONT_STYLE_OFFSET;o|=u|Ce.SEMANTIC_USE_UNDERLINE}if(typeof h.strikethrough<"u"){const u=(h.strikethrough?ht.Strikethrough:0)<<Ce.FONT_STYLE_OFFSET;o|=u|Ce.SEMANTIC_USE_STRIKETHROUGH}if(h.foreground){const u=h.foreground<<Ce.FOREGROUND_OFFSET;o|=u|Ce.SEMANTIC_USE_FOREGROUND}o===0&&(o=Ch.NO_STYLING)}}else o=Ch.NO_STYLING,a="not-in-legend";this._hashTable.add(e,t,s,o)}return o}warnOverlappingSemanticTokens(e,t){this._hasWarnedOverlappingTokens||(this._hasWarnedOverlappingTokens=!0,this._logService.warn(`Overlapping semantic tokens detected at lineNumber ${e}, column ${t}`))}warnInvalidLengthSemanticTokens(e,t){this._hasWarnedInvalidLengthTokens||(this._hasWarnedInvalidLengthTokens=!0,this._logService.warn(`Semantic token with invalid length detected at lineNumber ${e}, column ${t}`))}warnInvalidEditStart(e,t,n,s,r){this._hasWarnedInvalidEditStart||(this._hasWarnedInvalidEditStart=!0,this._logService.warn(`Invalid semantic tokens edit detected (previousResultId: ${e}, resultId: ${t}) at edit #${n}: The provided start offset ${s} is outside the previous data (length ${r}).`))}};U0=G([L(1,no),L(2,xc),L(3,Zi)],U0);var mm;(function(i){i[i.DesiredTokensPerArea=400]="DesiredTokensPerArea",i[i.DesiredMaxAreas=1024]="DesiredMaxAreas"})(mm||(mm={}));function Dee(i,e,t){const n=i.data,s=i.data.length/5|0,r=Math.max(Math.ceil(s/mm.DesiredMaxAreas),mm.DesiredTokensPerArea),o=[];let a=0,l=1,c=0;for(;a<s;){const h=a;let u=Math.min(h+r,s);if(u<s){let y=u;for(;y-1>h&&n[5*y]===0;)y--;if(y-1===h){let E=u;for(;E+1<s&&n[5*E]===0;)E++;u=E}else u=y}let f=new Uint32Array((u-h)*4),g=0,p=0,m=0,_=0;for(;a<u;){const y=5*a,E=n[y],N=n[y+1],I=l+E|0,B=E===0?c+N|0:N,x=n[y+2],D=B+x|0,F=n[y+3],te=n[y+4];if(D<=B)e.warnInvalidLengthSemanticTokens(I,B+1);else if(m===I&&_>B)e.warnOverlappingSemanticTokens(I,B+1);else{const J=e.getMetadata(F,te,t);J!==Ch.NO_STYLING&&(p===0&&(p=I),f[g]=I-p,f[g+1]=B,f[g+2]=D,f[g+3]=J,g+=4,m=I,_=D)}l=I,c=B,a++}g!==f.length&&(f=f.subarray(0,g));const v=hd.create(p,f);o.push(v)}return o}class U6{constructor(e,t,n,s){this.tokenTypeIndex=e,this.tokenModifierSet=t,this.languageId=n,this.metadata=s,this.next=null}}class ga{static{this._SIZES=[3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143]}constructor(){this._elementsCount=0,this._currentLengthIndex=0,this._currentLength=ga._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<ga._SIZES.length?2/3*this._currentLength:0),this._elements=[],ga._nullOutEntries(this._elements,this._currentLength)}static _nullOutEntries(e,t){for(let n=0;n<t;n++)e[n]=null}_hash2(e,t){return(e<<5)-e+t|0}_hashFunc(e,t,n){return this._hash2(this._hash2(e,t),n)%this._currentLength}get(e,t,n){const s=this._hashFunc(e,t,n);let r=this._elements[s];for(;r;){if(r.tokenTypeIndex===e&&r.tokenModifierSet===t&&r.languageId===n)return r;r=r.next}return null}add(e,t,n,s){if(this._elementsCount++,this._growCount!==0&&this._elementsCount>=this._growCount){const r=this._elements;this._currentLengthIndex++,this._currentLength=ga._SIZES[this._currentLengthIndex],this._growCount=Math.round(this._currentLengthIndex+1<ga._SIZES.length?2/3*this._currentLength:0),this._elements=[],ga._nullOutEntries(this._elements,this._currentLength);for(const o of r){let a=o;for(;a;){const l=a.next;a.next=null,this._add(a),a=l}}}this._add(new U6(e,t,n,s))}_add(e){const t=this._hashFunc(e.tokenTypeIndex,e.tokenModifierSet,e.languageId);e.next=this._elements[t],this._elements[t]=e}}let H2=class extends ${constructor(e,t,n){super(),this._themeService=e,this._logService=t,this._languageService=n,this._caches=new WeakMap,this._register(this._themeService.onDidColorThemeChange(()=>{this._caches=new WeakMap}))}getStyling(e){return this._caches.has(e)||this._caches.set(e,new U0(e.getLegend(),this._themeService,this._languageService,this._logService)),this._caches.get(e)}};H2=G([L(0,no),L(1,Zi),L(2,xc)],H2);const iS=be("ILanguageFeaturesService");class H6{constructor(){this.data=new Map}add(e,t){Ib(Bi(e)),Ib(xi(t)),Ib(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}knows(e){return this.data.has(e)}as(e){return this.data.get(e)||null}dispose(){this.data.forEach(e=>{Wh(e.dispose)&&e.dispose()}),this.data.clear()}}const wt=new H6;var bs;(function(i){i.DARK="dark",i.LIGHT="light",i.HIGH_CONTRAST_DARK="hcDark",i.HIGH_CONTRAST_LIGHT="hcLight"})(bs||(bs={}));var oh;(function(i){i.VS="vs",i.VS_DARK="vs-dark",i.HC_BLACK="hc-black",i.HC_LIGHT="hc-light"})(oh||(oh={}));function V6(i){return i===bs.HIGH_CONTRAST_DARK||i===bs.HIGH_CONTRAST_LIGHT}function H1(i){return i===bs.DARK||i===bs.HIGH_CONTRAST_DARK}function zc(i){return{id:i}}const Tee=re.file,Aee=re.folder;function Nee(i){switch(i){case bs.DARK:return oh.VS_DARK;case bs.HIGH_CONTRAST_DARK:return oh.HC_BLACK;case bs.HIGH_CONTRAST_LIGHT:return oh.HC_LIGHT;default:return oh.VS}}const LA={ThemingContribution:"base.contributions.theming"};class z6 extends ${constructor(){super(),this.themingParticipants=[],this.themingParticipants=[],this.onThemingParticipantAddedEmitter=this._register(new A)}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),fe(()=>{const t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}get onThemingParticipantAdded(){return this.onThemingParticipantAddedEmitter.event}getThemingParticipants(){return this.themingParticipants}}const DA=new z6;wt.add(LA.ThemingContribution,DA);function nS(i){return DA.onColorThemeChange(i)}class $6 extends ${constructor(e){super(),this.themeService=e,this.theme=e.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(t=>this.onThemeChange(t)))}onThemeChange(e){this.theme=e,this.updateStyles()}updateStyles(){}getColor(e,t){let n=this.theme.getColor(e);return n&&t&&(n=t(n,this.theme)),n?n.toString():null}}function $a(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}class R{constructor(e,t,n,s=1){this._rgbaBrand=void 0,this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=$a(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}}class Ts{constructor(e,t,n,s){this._hslaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=$a(Math.max(Math.min(1,t),0),3),this.l=$a(Math.max(Math.min(1,n),0),3),this.a=$a(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,s=e.b/255,r=e.a,o=Math.max(t,n,s),a=Math.min(t,n,s);let l=0,c=0;const h=(a+o)/2,u=o-a;if(u>0){switch(c=Math.min(h<=.5?u/(2*h):u/(2-2*h),1),o){case t:l=(n-s)/u+(n<s?6:0);break;case n:l=(s-t)/u+2;break;case s:l=(t-n)/u+4;break}l*=60,l=Math.round(l)}return new Ts(l,c,h,r)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){const t=e.h/360,{s:n,l:s,a:r}=e;let o,a,l;if(n===0)o=a=l=s;else{const c=s<.5?s*(1+n):s+n-s*n,h=2*s-c;o=Ts._hue2rgb(h,c,t+1/3),a=Ts._hue2rgb(h,c,t),l=Ts._hue2rgb(h,c,t-1/3)}return new R(Math.round(o*255),Math.round(a*255),Math.round(l*255),r)}}class ah{constructor(e,t,n,s){this._hsvaBrand=void 0,this.h=Math.max(Math.min(360,e),0)|0,this.s=$a(Math.max(Math.min(1,t),0),3),this.v=$a(Math.max(Math.min(1,n),0),3),this.a=$a(Math.max(Math.min(1,s),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){const t=e.r/255,n=e.g/255,s=e.b/255,r=Math.max(t,n,s),o=Math.min(t,n,s),a=r-o,l=r===0?0:a/r;let c;return a===0?c=0:r===t?c=((n-s)/a%6+6)%6:r===n?c=(s-t)/a+2:c=(t-n)/a+4,new ah(Math.round(c*60),l,r,e.a)}static toRGBA(e){const{h:t,s:n,v:s,a:r}=e,o=s*n,a=o*(1-Math.abs(t/60%2-1)),l=s-o;let[c,h,u]=[0,0,0];return t<60?(c=o,h=a):t<120?(c=a,h=o):t<180?(h=o,u=a):t<240?(h=a,u=o):t<300?(c=a,u=o):t<=360&&(c=o,u=a),c=Math.round((c+l)*255),h=Math.round((h+l)*255),u=Math.round((u+l)*255),new R(c,h,u,r)}}class P{static fromHex(e){return P.Format.CSS.parseHex(e)||P.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}get hsla(){return this._hsla?this._hsla:Ts.fromRGBA(this.rgba)}get hsva(){return this._hsva?this._hsva:ah.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof R)this.rgba=e;else if(e instanceof Ts)this._hsla=e,this.rgba=Ts.toRGBA(e);else if(e instanceof ah)this._hsva=e,this.rgba=ah.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&R.equals(this.rgba,e.rgba)&&Ts.equals(this.hsla,e.hsla)&&ah.equals(this.hsva,e.hsva)}getRelativeLuminance(){const e=P._relativeLuminanceForComponent(this.rgba.r),t=P._relativeLuminanceForComponent(this.rgba.g),n=P._relativeLuminanceForComponent(this.rgba.b),s=.2126*e+.7152*t+.0722*n;return $a(s,4)}reduceRelativeLuminace(e,t){let{r:n,g:s,b:r}=e.rgba,o=this.getContrastRatio(e);for(;o<t&&(n>0||s>0||r>0);)n-=Math.max(0,Math.ceil(n*.1)),s-=Math.max(0,Math.ceil(s*.1)),r-=Math.max(0,Math.ceil(r*.1)),o=this.getContrastRatio(new P(new R(n,s,r)));return new P(new R(n,s,r))}increaseRelativeLuminace(e,t){let{r:n,g:s,b:r}=e.rgba,o=this.getContrastRatio(e);for(;o<t&&(n<255||s<255||r<255);)n=Math.min(255,n+Math.ceil((255-n)*.1)),s=Math.min(255,s+Math.ceil((255-s)*.1)),r=Math.min(255,r+Math.ceil((255-r)*.1)),o=this.getContrastRatio(new P(new R(n,s,r)));return new P(new R(n,s,r))}static _relativeLuminanceForComponent(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}getContrastRatio(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)}isDarker(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3<128}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){const t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}ensureConstrast(e,t){const n=this.getRelativeLuminance(),s=e.getRelativeLuminance();if(this.getContrastRatio(e)<t){if(s<n){const l=this.reduceRelativeLuminace(e,t),c=this.getContrastRatio(l);if(c<t){const h=this.increaseRelativeLuminace(e,t),u=this.getContrastRatio(h);return c>u?l:h}return l}const o=this.increaseRelativeLuminace(e,t),a=this.getContrastRatio(o);if(a<t){const l=this.reduceRelativeLuminace(e,t),c=this.getContrastRatio(l);return a>c?o:l}return o}return e}lighten(e){return new P(new Ts(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new P(new Ts(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){const{r:t,g:n,b:s,a:r}=this.rgba;return new P(new R(t,n,s,r*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new P(new R(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}blend(e){const t=e.rgba,n=this.rgba.a,s=t.a,r=n+s*(1-n);if(r<1e-6)return P.transparent;const o=this.rgba.r*n/r+t.r*s*(1-n)/r,a=this.rgba.g*n/r+t.g*s*(1-n)/r,l=this.rgba.b*n/r+t.b*s*(1-n)/r;return new P(new R(o,a,l,r))}mix(e,t=.5){const n=Math.min(Math.max(t,0),1),s=this.rgba,r=e.rgba,o=s.r+(r.r-s.r)*n,a=s.g+(r.g-s.g)*n,l=s.b+(r.b-s.b)*n,c=s.a+(r.a-s.a)*n;return new P(new R(o,a,l,c))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;const{r:t,g:n,b:s,a:r}=this.rgba;return new P(new R(e.rgba.r-r*(e.rgba.r-t),e.rgba.g-r*(e.rgba.g-n),e.rgba.b-r*(e.rgba.b-s),1))}flatten(...e){const t=e.reduceRight((n,s)=>P._flatten(s,n));return P._flatten(this,t)}static _flatten(e,t){const n=1-e.rgba.a;return new P(new R(n*t.rgba.r+e.rgba.a*e.rgba.r,n*t.rgba.g+e.rgba.a*e.rgba.g,n*t.rgba.b+e.rgba.a*e.rgba.b))}toString(){return this._toString||(this._toString=P.Format.CSS.format(this)),this._toString}toNumber32Bit(){return this._toNumber32Bit||(this._toNumber32Bit=(this.rgba.r<<24|this.rgba.g<<16|this.rgba.b<<8|this.rgba.a*255<<0)>>>0),this._toNumber32Bit}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;const s=e.getRelativeLuminance(),r=t.getRelativeLuminance();return n=n*(r-s)/r,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;const s=e.getRelativeLuminance(),r=t.getRelativeLuminance();return n=n*(s-r)/s,e.darken(n)}static{this.white=new P(new R(255,255,255,1))}static{this.black=new P(new R(0,0,0,1))}static{this.red=new P(new R(255,0,0,1))}static{this.blue=new P(new R(0,0,255,1))}static{this.green=new P(new R(0,255,0,1))}static{this.cyan=new P(new R(0,255,255,1))}static{this.lightgrey=new P(new R(211,211,211,1))}static{this.transparent=new P(new R(0,0,0,0))}}(function(i){(function(e){(function(t){function n(m){return m.rgba.a===1?`rgb(${m.rgba.r}, ${m.rgba.g}, ${m.rgba.b})`:i.Format.CSS.formatRGBA(m)}t.formatRGB=n;function s(m){return`rgba(${m.rgba.r}, ${m.rgba.g}, ${m.rgba.b}, ${+m.rgba.a.toFixed(2)})`}t.formatRGBA=s;function r(m){return m.hsla.a===1?`hsl(${m.hsla.h}, ${(m.hsla.s*100).toFixed(2)}%, ${(m.hsla.l*100).toFixed(2)}%)`:i.Format.CSS.formatHSLA(m)}t.formatHSL=r;function o(m){return`hsla(${m.hsla.h}, ${(m.hsla.s*100).toFixed(2)}%, ${(m.hsla.l*100).toFixed(2)}%, ${m.hsla.a.toFixed(2)})`}t.formatHSLA=o;function a(m){const _=m.toString(16);return _.length!==2?"0"+_:_}function l(m){return`#${a(m.rgba.r)}${a(m.rgba.g)}${a(m.rgba.b)}`}t.formatHex=l;function c(m,_=!1){return _&&m.rgba.a===1?i.Format.CSS.formatHex(m):`#${a(m.rgba.r)}${a(m.rgba.g)}${a(m.rgba.b)}${a(Math.round(m.rgba.a*255))}`}t.formatHexA=c;function h(m){return m.isOpaque()?i.Format.CSS.formatHex(m):i.Format.CSS.formatRGBA(m)}t.format=h;function u(m){if(m==="transparent")return i.transparent;if(m.startsWith("#"))return g(m);if(m.startsWith("rgba(")){const _=m.match(/rgba\((?<r>(?:\+|-)?\d+), *(?<g>(?:\+|-)?\d+), *(?<b>(?:\+|-)?\d+), *(?<a>(?:\+|-)?\d+(\.\d+)?)\)/);if(!_)throw new Error("Invalid color format "+m);const v=parseInt(_.groups?.r??"0"),y=parseInt(_.groups?.g??"0"),E=parseInt(_.groups?.b??"0"),N=parseFloat(_.groups?.a??"0");return new i(new R(v,y,E,N))}if(m.startsWith("rgb(")){const _=m.match(/rgb\((?<r>(?:\+|-)?\d+), *(?<g>(?:\+|-)?\d+), *(?<b>(?:\+|-)?\d+)\)/);if(!_)throw new Error("Invalid color format "+m);const v=parseInt(_.groups?.r??"0"),y=parseInt(_.groups?.g??"0"),E=parseInt(_.groups?.b??"0");return new i(new R(v,y,E))}return f(m)}t.parse=u;function f(m){switch(m){case"aliceblue":return new i(new R(240,248,255,1));case"antiquewhite":return new i(new R(250,235,215,1));case"aqua":return new i(new R(0,255,255,1));case"aquamarine":return new i(new R(127,255,212,1));case"azure":return new i(new R(240,255,255,1));case"beige":return new i(new R(245,245,220,1));case"bisque":return new i(new R(255,228,196,1));case"black":return new i(new R(0,0,0,1));case"blanchedalmond":return new i(new R(255,235,205,1));case"blue":return new i(new R(0,0,255,1));case"blueviolet":return new i(new R(138,43,226,1));case"brown":return new i(new R(165,42,42,1));case"burlywood":return new i(new R(222,184,135,1));case"cadetblue":return new i(new R(95,158,160,1));case"chartreuse":return new i(new R(127,255,0,1));case"chocolate":return new i(new R(210,105,30,1));case"coral":return new i(new R(255,127,80,1));case"cornflowerblue":return new i(new R(100,149,237,1));case"cornsilk":return new i(new R(255,248,220,1));case"crimson":return new i(new R(220,20,60,1));case"cyan":return new i(new R(0,255,255,1));case"darkblue":return new i(new R(0,0,139,1));case"darkcyan":return new i(new R(0,139,139,1));case"darkgoldenrod":return new i(new R(184,134,11,1));case"darkgray":return new i(new R(169,169,169,1));case"darkgreen":return new i(new R(0,100,0,1));case"darkgrey":return new i(new R(169,169,169,1));case"darkkhaki":return new i(new R(189,183,107,1));case"darkmagenta":return new i(new R(139,0,139,1));case"darkolivegreen":return new i(new R(85,107,47,1));case"darkorange":return new i(new R(255,140,0,1));case"darkorchid":return new i(new R(153,50,204,1));case"darkred":return new i(new R(139,0,0,1));case"darksalmon":return new i(new R(233,150,122,1));case"darkseagreen":return new i(new R(143,188,143,1));case"darkslateblue":return new i(new R(72,61,139,1));case"darkslategray":return new i(new R(47,79,79,1));case"darkslategrey":return new i(new R(47,79,79,1));case"darkturquoise":return new i(new R(0,206,209,1));case"darkviolet":return new i(new R(148,0,211,1));case"deeppink":return new i(new R(255,20,147,1));case"deepskyblue":return new i(new R(0,191,255,1));case"dimgray":return new i(new R(105,105,105,1));case"dimgrey":return new i(new R(105,105,105,1));case"dodgerblue":return new i(new R(30,144,255,1));case"firebrick":return new i(new R(178,34,34,1));case"floralwhite":return new i(new R(255,250,240,1));case"forestgreen":return new i(new R(34,139,34,1));case"fuchsia":return new i(new R(255,0,255,1));case"gainsboro":return new i(new R(220,220,220,1));case"ghostwhite":return new i(new R(248,248,255,1));case"gold":return new i(new R(255,215,0,1));case"goldenrod":return new i(new R(218,165,32,1));case"gray":return new i(new R(128,128,128,1));case"green":return new i(new R(0,128,0,1));case"greenyellow":return new i(new R(173,255,47,1));case"grey":return new i(new R(128,128,128,1));case"honeydew":return new i(new R(240,255,240,1));case"hotpink":return new i(new R(255,105,180,1));case"indianred":return new i(new R(205,92,92,1));case"indigo":return new i(new R(75,0,130,1));case"ivory":return new i(new R(255,255,240,1));case"khaki":return new i(new R(240,230,140,1));case"lavender":return new i(new R(230,230,250,1));case"lavenderblush":return new i(new R(255,240,245,1));case"lawngreen":return new i(new R(124,252,0,1));case"lemonchiffon":return new i(new R(255,250,205,1));case"lightblue":return new i(new R(173,216,230,1));case"lightcoral":return new i(new R(240,128,128,1));case"lightcyan":return new i(new R(224,255,255,1));case"lightgoldenrodyellow":return new i(new R(250,250,210,1));case"lightgray":return new i(new R(211,211,211,1));case"lightgreen":return new i(new R(144,238,144,1));case"lightgrey":return new i(new R(211,211,211,1));case"lightpink":return new i(new R(255,182,193,1));case"lightsalmon":return new i(new R(255,160,122,1));case"lightseagreen":return new i(new R(32,178,170,1));case"lightskyblue":return new i(new R(135,206,250,1));case"lightslategray":return new i(new R(119,136,153,1));case"lightslategrey":return new i(new R(119,136,153,1));case"lightsteelblue":return new i(new R(176,196,222,1));case"lightyellow":return new i(new R(255,255,224,1));case"lime":return new i(new R(0,255,0,1));case"limegreen":return new i(new R(50,205,50,1));case"linen":return new i(new R(250,240,230,1));case"magenta":return new i(new R(255,0,255,1));case"maroon":return new i(new R(128,0,0,1));case"mediumaquamarine":return new i(new R(102,205,170,1));case"mediumblue":return new i(new R(0,0,205,1));case"mediumorchid":return new i(new R(186,85,211,1));case"mediumpurple":return new i(new R(147,112,219,1));case"mediumseagreen":return new i(new R(60,179,113,1));case"mediumslateblue":return new i(new R(123,104,238,1));case"mediumspringgreen":return new i(new R(0,250,154,1));case"mediumturquoise":return new i(new R(72,209,204,1));case"mediumvioletred":return new i(new R(199,21,133,1));case"midnightblue":return new i(new R(25,25,112,1));case"mintcream":return new i(new R(245,255,250,1));case"mistyrose":return new i(new R(255,228,225,1));case"moccasin":return new i(new R(255,228,181,1));case"navajowhite":return new i(new R(255,222,173,1));case"navy":return new i(new R(0,0,128,1));case"oldlace":return new i(new R(253,245,230,1));case"olive":return new i(new R(128,128,0,1));case"olivedrab":return new i(new R(107,142,35,1));case"orange":return new i(new R(255,165,0,1));case"orangered":return new i(new R(255,69,0,1));case"orchid":return new i(new R(218,112,214,1));case"palegoldenrod":return new i(new R(238,232,170,1));case"palegreen":return new i(new R(152,251,152,1));case"paleturquoise":return new i(new R(175,238,238,1));case"palevioletred":return new i(new R(219,112,147,1));case"papayawhip":return new i(new R(255,239,213,1));case"peachpuff":return new i(new R(255,218,185,1));case"peru":return new i(new R(205,133,63,1));case"pink":return new i(new R(255,192,203,1));case"plum":return new i(new R(221,160,221,1));case"powderblue":return new i(new R(176,224,230,1));case"purple":return new i(new R(128,0,128,1));case"rebeccapurple":return new i(new R(102,51,153,1));case"red":return new i(new R(255,0,0,1));case"rosybrown":return new i(new R(188,143,143,1));case"royalblue":return new i(new R(65,105,225,1));case"saddlebrown":return new i(new R(139,69,19,1));case"salmon":return new i(new R(250,128,114,1));case"sandybrown":return new i(new R(244,164,96,1));case"seagreen":return new i(new R(46,139,87,1));case"seashell":return new i(new R(255,245,238,1));case"sienna":return new i(new R(160,82,45,1));case"silver":return new i(new R(192,192,192,1));case"skyblue":return new i(new R(135,206,235,1));case"slateblue":return new i(new R(106,90,205,1));case"slategray":return new i(new R(112,128,144,1));case"slategrey":return new i(new R(112,128,144,1));case"snow":return new i(new R(255,250,250,1));case"springgreen":return new i(new R(0,255,127,1));case"steelblue":return new i(new R(70,130,180,1));case"tan":return new i(new R(210,180,140,1));case"teal":return new i(new R(0,128,128,1));case"thistle":return new i(new R(216,191,216,1));case"tomato":return new i(new R(255,99,71,1));case"turquoise":return new i(new R(64,224,208,1));case"violet":return new i(new R(238,130,238,1));case"wheat":return new i(new R(245,222,179,1));case"white":return new i(new R(255,255,255,1));case"whitesmoke":return new i(new R(245,245,245,1));case"yellow":return new i(new R(255,255,0,1));case"yellowgreen":return new i(new R(154,205,50,1));default:return null}}function g(m){const _=m.length;if(_===0||m.charCodeAt(0)!==k.Hash)return null;if(_===7){const v=16*p(m.charCodeAt(1))+p(m.charCodeAt(2)),y=16*p(m.charCodeAt(3))+p(m.charCodeAt(4)),E=16*p(m.charCodeAt(5))+p(m.charCodeAt(6));return new i(new R(v,y,E,1))}if(_===9){const v=16*p(m.charCodeAt(1))+p(m.charCodeAt(2)),y=16*p(m.charCodeAt(3))+p(m.charCodeAt(4)),E=16*p(m.charCodeAt(5))+p(m.charCodeAt(6)),N=16*p(m.charCodeAt(7))+p(m.charCodeAt(8));return new i(new R(v,y,E,N/255))}if(_===4){const v=p(m.charCodeAt(1)),y=p(m.charCodeAt(2)),E=p(m.charCodeAt(3));return new i(new R(16*v+v,16*y+y,16*E+E))}if(_===5){const v=p(m.charCodeAt(1)),y=p(m.charCodeAt(2)),E=p(m.charCodeAt(3)),N=p(m.charCodeAt(4));return new i(new R(16*v+v,16*y+y,16*E+E,(16*N+N)/255))}return null}t.parseHex=g;function p(m){switch(m){case k.Digit0:return 0;case k.Digit1:return 1;case k.Digit2:return 2;case k.Digit3:return 3;case k.Digit4:return 4;case k.Digit5:return 5;case k.Digit6:return 6;case k.Digit7:return 7;case k.Digit8:return 8;case k.Digit9:return 9;case k.a:return 10;case k.A:return 10;case k.b:return 11;case k.B:return 11;case k.c:return 12;case k.C:return 12;case k.d:return 13;case k.D:return 13;case k.e:return 14;case k.E:return 14;case k.f:return 15;case k.F:return 15}return 0}})(e.CSS||(e.CSS={}))})(i.Format||(i.Format={}))})(P||(P={}));function q6(i){let e=!1;const t=new Map,n=new Map;if(K6(i,h=>{if(i===h)return!0;const u=JSON.stringify(h);if(u.length<30)return!0;const f=t.get(u);if(!f){const g={schemas:[h]};return t.set(u,g),n.set(h,g),!0}return f.schemas.push(h),n.set(h,f),e=!0,!1}),t.clear(),!e)return JSON.stringify(i);let r="$defs";for(;i.hasOwnProperty(r);)r+="_";const o=[];function a(h){return JSON.stringify(h,(u,f)=>{if(f!==h){const g=n.get(f);if(g&&g.schemas.length>1)return g.id||(g.id=`_${o.length}`,o.push(g.schemas[0])),{$ref:`#/${r}/${g.id}`}}return f})}const l=a(i),c=[];for(let h=0;h<o.length;h++)c.push(`"_${h}":${a(o[h])}`);return c.length?`${l.substring(0,l.length-1)},"${r}":{${c.join(",")}}}`:l}function $c(i){return typeof i=="object"&&i!==null}function K6(i,e){if(!i||typeof i!="object")return;const t=(...l)=>{for(const c of l)$c(c)&&o.push(c)},n=(...l)=>{for(const c of l)if($c(c))for(const h in c){const u=c[h];$c(u)&&o.push(u)}},s=(...l)=>{for(const c of l)if(Array.isArray(c))for(const h of c)$c(h)&&o.push(h)},r=l=>{if(Array.isArray(l))for(const c of l)$c(c)&&o.push(c);else $c(l)&&o.push(l)},o=[i];let a=o.pop();for(;a;)e(a)&&(t(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),n(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),s(a.anyOf,a.allOf,a.oneOf,a.prefixItems),r(a.items)),a=o.pop()}const Pf={JSONContribution:"base.contributions.json"};function V2(i){return i.length>0&&i.charAt(i.length-1)==="#"?i.substring(0,i.length-1):i}class G6 extends ${constructor(){super(...arguments),this.schemasById={},this.schemaAssociations={},this._onDidChangeSchema=this._register(new A),this.onDidChangeSchema=this._onDidChangeSchema.event,this._onDidChangeSchemaAssociations=this._register(new A),this.onDidChangeSchemaAssociations=this._onDidChangeSchemaAssociations.event}registerSchema(e,t,n){const s=V2(e);this.schemasById[s]=t,this._onDidChangeSchema.fire(e),n&&n.add(fe(()=>{delete this.schemasById[s],this._onDidChangeSchema.fire(e)}))}registerSchemaAssociation(e,t){const n=V2(e);return this.schemaAssociations[n]||(this.schemaAssociations[n]=[]),this.schemaAssociations[n].includes(t)||(this.schemaAssociations[n].push(t),this._onDidChangeSchemaAssociations.fire()),fe(()=>{const s=this.schemaAssociations[n];if(s){const r=s.indexOf(t);r!==-1&&(s.splice(r,1),s.length===0&&delete this.schemaAssociations[n],this._onDidChangeSchemaAssociations.fire())}})}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}getSchemaContributions(){return{schemas:this.schemasById}}getSchemaContent(e){const t=this.schemasById[e];return t?q6(t):void 0}hasSchemaContent(e){return!!this.schemasById[e]}getSchemaAssociations(){return this.schemaAssociations}}const j6=new G6;wt.add(Pf.JSONContribution,j6);function sS(i){return`--vscode-${i.replace(/\./g,"-")}`}function K(i){return`var(${sS(i)})`}function Y6(i,e){return`var(${sS(i)}, ${e})`}var Mi;(function(i){i[i.Darken=0]="Darken",i[i.Lighten=1]="Lighten",i[i.Transparent=2]="Transparent",i[i.Opaque=3]="Opaque",i[i.OneOf=4]="OneOf",i[i.LessProminent=5]="LessProminent",i[i.IfDefinedThenElse=6]="IfDefinedThenElse",i[i.Mix=7]="Mix"})(Mi||(Mi={}));function X6(i){return i!==null&&typeof i=="object"&&"light"in i&&"dark"in i}const IA={ColorContribution:"base.contributions.colors"},Q6="default";class Z6 extends ${constructor(){super(),this._onDidChangeSchema=this._register(new A),this.onDidChangeSchema=this._onDidChangeSchema.event,this.colorSchema={type:"object",properties:{}},this.colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]},this.colorsById={}}notifyThemeUpdate(e){for(const t of Object.keys(this.colorsById)){const n=e.getColor(t);n&&(this.colorSchema.properties[t].oneOf[0].defaultSnippets[0].body=`\${1:${P.Format.CSS.formatHexA(n,!0)}}`)}this._onDidChangeSchema.fire()}registerColor(e,t,n,s=!1,r){const o={id:e,description:n,defaults:t,needsTransparency:s,deprecationMessage:r};this.colorsById[e]=o;const a={type:"string",format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return r&&(a.deprecationMessage=r),s&&(a.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",a.patternErrorMessage=d(2044,"This color must be transparent or it will obscure content")),this.colorSchema.properties[e]={description:n,oneOf:[a,{type:"string",const:Q6,description:d(2045,"Use the default color.")}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}deregisterColor(e){delete this.colorsById[e],delete this.colorSchema.properties[e];const t=this.colorReferenceSchema.enum.indexOf(e);t!==-1&&(this.colorReferenceSchema.enum.splice(t,1),this.colorReferenceSchema.enumDescriptions.splice(t,1)),this._onDidChangeSchema.fire()}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){const n=this.colorsById[e];if(n?.defaults){const s=X6(n.defaults)?n.defaults[t.type]:n.defaults;return os(s,t)}}getColorSchema(){return this.colorSchema}getColorReferenceSchema(){return this.colorReferenceSchema}toString(){const e=(t,n)=>{const s=t.indexOf(".")===-1?0:1,r=n.indexOf(".")===-1?0:1;return s!==r?s-r:t.localeCompare(n)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}}const Bf=new Z6;wt.add(IA.ColorContribution,Bf);function S(i,e,t,n,s){return Bf.registerColor(i,e,t,n,s)}function Ree(){return Bf}function J6(i,e){switch(i.op){case Mi.Darken:return os(i.value,e)?.darken(i.factor);case Mi.Lighten:return os(i.value,e)?.lighten(i.factor);case Mi.Transparent:return os(i.value,e)?.transparent(i.factor);case Mi.Mix:{const t=os(i.color,e)||P.transparent,n=os(i.with,e)||P.transparent;return t.mix(n,i.ratio)}case Mi.Opaque:{const t=os(i.background,e);return t?os(i.value,e)?.makeOpaque(t):os(i.value,e)}case Mi.OneOf:for(const t of i.values){const n=os(t,e);if(n)return n}return;case Mi.IfDefinedThenElse:return os(e.defines(i.if)?i.then:i.else,e);case Mi.LessProminent:{const t=os(i.value,e);if(!t)return;const n=os(i.background,e);return n?t.isDarkerThan(n)?P.getLighterColor(t,n,i.factor).transparent(i.transparency):P.getDarkerColor(t,n,i.factor).transparent(i.transparency):t.transparent(i.factor*i.transparency)}default:throw _I()}}function Lc(i,e){return{op:Mi.Darken,value:i,factor:e}}function ur(i,e){return{op:Mi.Lighten,value:i,factor:e}}function Te(i,e){return{op:Mi.Transparent,value:i,factor:e}}function Mee(i,e){return{op:Mi.Opaque,value:i,background:e}}function z2(...i){return{op:Mi.OneOf,values:i}}function eP(i,e,t){return{op:Mi.IfDefinedThenElse,if:i,then:e,else:t}}function $2(i,e,t,n){return{op:Mi.LessProminent,value:i,background:e,factor:t,transparency:n}}function os(i,e){if(i!==null){if(typeof i=="string")return i[0]==="#"?P.fromHex(i):e.getColor(i);if(i instanceof P)return i;if(typeof i=="object")return J6(i,e)}}const TA="vscode://schemas/workbench-colors",AA=wt.as(Pf.JSONContribution);AA.registerSchema(TA,Bf.getColorSchema());const q2=new Bs(()=>AA.notifySchemaChanged(TA),200);Bf.onDidChangeSchema(()=>{q2.isScheduled()||q2.schedule()});const nt=S("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},d(2046,"Overall foreground color. This color is only used if not overridden by a component.")),Oee=S("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},d(2047,"Overall foreground for disabled elements. This color is only used if not overridden by a component.")),Fee=S("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},d(2048,"Overall foreground color for error messages. This color is only used if not overridden by a component.")),Pee=S("descriptionForeground",{light:"#717171",dark:Te(nt,.7),hcDark:Te(nt,.7),hcLight:Te(nt,.7)},d(2049,"Foreground color for description text providing additional information, for example for a label.")),H0=S("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},d(2050,"The default color for icons in the workbench.")),Zr=S("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},d(2051,"Overall border color for focused elements. This color is only used if not overridden by a component.")),He=S("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},d(2052,"An extra border around elements to separate them from others for greater contrast.")),Ht=S("contrastActiveBorder",{light:null,dark:null,hcDark:Zr,hcLight:Zr},d(2053,"An extra border around active elements to separate them from others for greater contrast.")),Bee=S("selection.background",null,d(2054,"The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor.")),tP=S("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},d(2055,"Foreground color for links in text.")),Wee=S("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},d(2056,"Foreground color for links in text when clicked on and on mouse hover."));S("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:P.black,hcLight:"#292929"},d(2057,"Color for text separators."));S("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},d(2058,"Foreground color for preformatted text segments."));S("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},d(2059,"Background color for preformatted text segments."));const Uee=S("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},d(2060,"Background color for block quotes in text.")),Hee=S("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:P.white,hcLight:"#292929"},d(2061,"Border color for block quotes in text."));S("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:P.black,hcLight:"#F2F2F2"},d(2062,"Background color for code blocks in text."));S("sash.hoverBorder",Zr,d(2265,"Border color of active sashes."));const wp=S("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:P.black,hcLight:"#0F4A85"},d(2266,"Badge background color. Badges are small information labels, e.g. for search results count.")),iP=S("badge.foreground",{dark:P.white,light:"#333",hcDark:P.white,hcLight:P.white},d(2267,"Badge foreground color. Badges are small information labels, e.g. for search results count."));S("activityWarningBadge.foreground",{dark:P.black.lighten(.2),light:P.white,hcDark:null,hcLight:P.black.lighten(.2)},d(2268,"Foreground color of the warning activity badge"));S("activityWarningBadge.background",{dark:"#CCA700",light:"#BF8803",hcDark:null,hcLight:"#CCA700"},d(2269,"Background color of the warning activity badge"));S("activityErrorBadge.foreground",{dark:P.black.lighten(.2),light:P.white,hcDark:null,hcLight:P.black.lighten(.2)},d(2270,"Foreground color of the error activity badge"));S("activityErrorBadge.background",{dark:"#F14C4C",light:"#E51400",hcDark:null,hcLight:"#F14C4C"},d(2271,"Background color of the error activity badge"));const rS=S("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},d(2272,"Scrollbar shadow to indicate that the view is scrolled.")),NA=S("scrollbarSlider.background",{dark:P.fromHex("#797979").transparent(.4),light:P.fromHex("#646464").transparent(.4),hcDark:Te(He,.6),hcLight:Te(He,.4)},d(2273,"Scrollbar slider background color.")),RA=S("scrollbarSlider.hoverBackground",{dark:P.fromHex("#646464").transparent(.7),light:P.fromHex("#646464").transparent(.7),hcDark:Te(He,.8),hcLight:Te(He,.8)},d(2274,"Scrollbar slider background color when hovering.")),MA=S("scrollbarSlider.activeBackground",{dark:P.fromHex("#BFBFBF").transparent(.4),light:P.fromHex("#000000").transparent(.6),hcDark:He,hcLight:He},d(2275,"Scrollbar slider background color when clicked on.")),nP=S("progressBar.background",{dark:P.fromHex("#0E70C0"),light:P.fromHex("#0E70C0"),hcDark:He,hcLight:He},d(2276,"Background color of the progress bar that can show for long running operations."));S("chart.line",{dark:"#236B8E",light:"#236B8E",hcDark:"#236B8E",hcLight:"#236B8E"},d(2277,"Line color for the chart."));S("chart.axis",{dark:P.fromHex("#BFBFBF").transparent(.4),light:P.fromHex("#000000").transparent(.6),hcDark:He,hcLight:He},d(2278,"Axis color for the chart."));S("chart.guide",{dark:P.fromHex("#BFBFBF").transparent(.2),light:P.fromHex("#000000").transparent(.2),hcDark:He,hcLight:He},d(2279,"Guide line for the chart."));const Jr=S("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:P.black,hcLight:P.white},d(2071,"Editor background color.")),V1=S("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:P.white,hcLight:nt},d(2072,"Editor default foreground color."));S("editorStickyScroll.background",Jr,d(2073,"Background color of sticky scroll in the editor"));S("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:P.fromHex("#0F4A85").transparent(.1)},d(2074,"Background color of sticky scroll on hover in the editor"));S("editorStickyScroll.border",{dark:null,light:null,hcDark:He,hcLight:He},d(2075,"Border color of sticky scroll in the editor"));S("editorStickyScroll.shadow",rS,d(2076," Shadow color of sticky scroll in the editor"));const Rs=S("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:P.white},d(2077,"Background color of editor widgets, such as find/replace.")),z1=S("editorWidget.foreground",nt,d(2078,"Foreground color of editor widgets, such as find/replace.")),OA=S("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:He,hcLight:He},d(2079,"Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget."));S("editorWidget.resizeBorder",null,d(2080,"Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget."));S("editorError.background",null,d(2081,"Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const FA=S("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},d(2082,"Foreground color of error squigglies in the editor.")),Vee=S("editorError.border",{dark:null,light:null,hcDark:P.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},d(2083,"If set, color of double underlines for errors in the editor.")),sP=S("editorWarning.background",null,d(2084,"Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),cc=S("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},d(2085,"Foreground color of warning squigglies in the editor.")),bm=S("editorWarning.border",{dark:null,light:null,hcDark:P.fromHex("#FFCC00").transparent(.8),hcLight:P.fromHex("#FFCC00").transparent(.8)},d(2086,"If set, color of double underlines for warnings in the editor."));S("editorInfo.background",null,d(2087,"Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0);const $h=S("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},d(2088,"Foreground color of info squigglies in the editor.")),_m=S("editorInfo.border",{dark:null,light:null,hcDark:P.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},d(2089,"If set, color of double underlines for infos in the editor.")),zee=S("editorHint.foreground",{dark:P.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},d(2090,"Foreground color of hint squigglies in the editor."));S("editorHint.border",{dark:null,light:null,hcDark:P.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},d(2091,"If set, color of double underlines for hints in the editor."));const $ee=S("editorLink.activeForeground",{dark:"#4E94CE",light:P.blue,hcDark:P.cyan,hcLight:"#292929"},d(2092,"Color of active links.")),lh=S("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},d(2093,"Color of the editor selection.")),qee=S("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:P.white},d(2094,"Color of the selected text for high contrast.")),PA=S("editor.inactiveSelectionBackground",{light:Te(lh,.5),dark:Te(lh,.5),hcDark:Te(lh,.7),hcLight:Te(lh,.5)},d(2095,"Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),BA=S("editor.selectionHighlightBackground",{light:$2(lh,Jr,.3,.6),dark:$2(lh,Jr,.3,.6),hcDark:null,hcLight:null},d(2096,"Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0);S("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:Ht,hcLight:Ht},d(2097,"Border color for regions with the same content as the selection."));S("editor.compositionBorder",{light:"#000000",dark:"#ffffff",hcLight:"#000000",hcDark:"#ffffff"},d(2098,"The border color for an IME composition."));const Kee=S("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},d(2099,"Color of the current search match.")),Gee=S("editor.findMatchForeground",null,d(2100,"Text color of the current search match.")),Ma=S("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},d(2101,"Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),jee=S("editor.findMatchHighlightForeground",null,d(2102,"Foreground color of the other search matches."),!0),Yee=S("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},d(2103,"Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0);S("editor.findMatchBorder",{light:null,dark:null,hcDark:Ht,hcLight:Ht},d(2104,"Border color of the current search match."));const ch=S("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:Ht,hcLight:Ht},d(2105,"Border color of the other search matches.")),Xee=S("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:Te(Ht,.4),hcLight:Te(Ht,.4)},d(2106,"Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),Qee=S("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},d(2107,"Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),K2=S("editorHoverWidget.background",Rs,d(2108,"Background color of the editor hover.")),Zee=S("editorHoverWidget.foreground",z1,d(2109,"Foreground color of the editor hover.")),rP=S("editorHoverWidget.border",OA,d(2110,"Border color of the editor hover."));S("editorHoverWidget.statusBarBackground",{dark:ur(K2,.2),light:Lc(K2,.05),hcDark:Rs,hcLight:Rs},d(2111,"Background color of the editor hover status bar."));const WA=S("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:P.white,hcLight:P.black},d(2112,"Foreground color of inline hints")),UA=S("editorInlayHint.background",{dark:Te(wp,.1),light:Te(wp,.1),hcDark:Te(P.white,.1),hcLight:Te(wp,.1)},d(2113,"Background color of inline hints")),Jee=S("editorInlayHint.typeForeground",WA,d(2114,"Foreground color of inline hints for types")),ete=S("editorInlayHint.typeBackground",UA,d(2115,"Background color of inline hints for types")),tte=S("editorInlayHint.parameterForeground",WA,d(2116,"Foreground color of inline hints for parameters")),ite=S("editorInlayHint.parameterBackground",UA,d(2117,"Background color of inline hints for parameters")),oP=S("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},d(2118,"The color used for the lightbulb actions icon."));S("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},d(2119,"The color used for the lightbulb auto fix actions icon."));S("editorLightBulbAi.foreground",oP,d(2120,"The color used for the lightbulb AI icon."));S("editor.snippetTabstopHighlightBackground",{dark:new P(new R(124,124,124,.3)),light:new P(new R(10,50,100,.2)),hcDark:new P(new R(124,124,124,.3)),hcLight:new P(new R(10,50,100,.2))},d(2121,"Highlight background color of a snippet tabstop."));S("editor.snippetTabstopHighlightBorder",null,d(2122,"Highlight border color of a snippet tabstop."));S("editor.snippetFinalTabstopHighlightBackground",null,d(2123,"Highlight background color of the final tabstop of a snippet."));S("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new P(new R(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},d(2124,"Highlight border color of the final tabstop of a snippet."));const G2=new P(new R(155,185,85,.2)),j2=new P(new R(255,0,0,.2)),nte=S("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},d(2125,"Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),ste=S("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},d(2126,"Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),rte=S("diffEditor.insertedLineBackground",{dark:G2,light:G2,hcDark:null,hcLight:null},d(2127,"Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0);S("diffEditor.removedLineBackground",{dark:j2,light:j2,hcDark:null,hcLight:null},d(2128,"Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0);S("diffEditorGutter.insertedLineBackground",null,d(2129,"Background color for the margin where lines got inserted."));S("diffEditorGutter.removedLineBackground",null,d(2130,"Background color for the margin where lines got removed."));const ote=S("diffEditorOverview.insertedForeground",null,d(2131,"Diff overview ruler foreground for inserted content.")),ate=S("diffEditorOverview.removedForeground",null,d(2132,"Diff overview ruler foreground for removed content."));S("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},d(2133,"Outline color for the text that got inserted."));S("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},d(2134,"Outline color for text that got removed."));S("diffEditor.border",{dark:null,light:null,hcDark:He,hcLight:He},d(2135,"Border color between the two text editors."));S("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},d(2136,"Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views."));S("diffEditor.unchangedRegionBackground","sideBar.background",d(2137,"The background color of unchanged blocks in the diff editor."));S("diffEditor.unchangedRegionForeground","foreground",d(2138,"The foreground color of unchanged blocks in the diff editor."));S("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},d(2139,"The background color of unchanged code in the diff editor."));const Wf=S("widget.shadow",{dark:Te(P.black,.36),light:Te(P.black,.16),hcDark:null,hcLight:null},d(2140,"Shadow color of widgets such as find/replace inside the editor.")),HA=S("widget.border",{dark:null,light:null,hcDark:He,hcLight:He},d(2141,"Border color of widgets such as find/replace inside the editor.")),Y2=S("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},d(2142,"Toolbar background when hovering over actions using the mouse"));S("toolbar.hoverOutline",{dark:null,light:null,hcDark:Ht,hcLight:Ht},d(2143,"Toolbar outline when hovering over actions using the mouse"));S("toolbar.activeBackground",{dark:ur(Y2,.1),light:Lc(Y2,.1),hcDark:null,hcLight:null},d(2144,"Toolbar background when holding the mouse over actions"));const aP=S("breadcrumb.foreground",Te(nt,.8),d(2145,"Color of focused breadcrumb items.")),lP=S("breadcrumb.background",Jr,d(2146,"Background color of breadcrumb items.")),X2=S("breadcrumb.focusForeground",{light:Lc(nt,.2),dark:ur(nt,.1),hcDark:ur(nt,.1),hcLight:ur(nt,.1)},d(2145,"Color of focused breadcrumb items.")),cP=S("breadcrumb.activeSelectionForeground",{light:Lc(nt,.2),dark:ur(nt,.1),hcDark:ur(nt,.1),hcLight:ur(nt,.1)},d(2147,"Color of selected breadcrumb items.")),lte=S("breadcrumbPicker.background",Rs,d(2148,"Background color of breadcrumb item picker.")),VA=.5,Q2=P.fromHex("#40C8AE").transparent(VA),Z2=P.fromHex("#40A6FF").transparent(VA),J2=P.fromHex("#606060").transparent(.4),oS=.4,qh=1,V0=S("merge.currentHeaderBackground",{dark:Q2,light:Q2,hcDark:null,hcLight:null},d(2149,"Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);S("merge.currentContentBackground",Te(V0,oS),d(2150,"Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const z0=S("merge.incomingHeaderBackground",{dark:Z2,light:Z2,hcDark:null,hcLight:null},d(2151,"Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);S("merge.incomingContentBackground",Te(z0,oS),d(2152,"Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const $0=S("merge.commonHeaderBackground",{dark:J2,light:J2,hcDark:null,hcLight:null},d(2153,"Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);S("merge.commonContentBackground",Te($0,oS),d(2154,"Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0);const Kh=S("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},d(2155,"Border color on headers and the splitter in inline merge-conflicts."));S("editorOverviewRuler.currentContentForeground",{dark:Te(V0,qh),light:Te(V0,qh),hcDark:Kh,hcLight:Kh},d(2156,"Current overview ruler foreground for inline merge-conflicts."));S("editorOverviewRuler.incomingContentForeground",{dark:Te(z0,qh),light:Te(z0,qh),hcDark:Kh,hcLight:Kh},d(2157,"Incoming overview ruler foreground for inline merge-conflicts."));S("editorOverviewRuler.commonContentForeground",{dark:Te($0,qh),light:Te($0,qh),hcDark:Kh,hcLight:Kh},d(2158,"Common ancestor overview ruler foreground for inline merge-conflicts."));const cte=S("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},d(2159,"Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),hte=S("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",d(2160,"Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),hP=S("problemsErrorIcon.foreground",FA,d(2161,"The color used for the problems error icon.")),uP=S("problemsWarningIcon.foreground",cc,d(2162,"The color used for the problems warning icon.")),dP=S("problemsInfoIcon.foreground",$h,d(2163,"The color used for the problems info icon.")),fP=S("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},d(2254,"Minimap marker color for find matches."),!0),ute=S("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},d(2255,"Minimap marker color for repeating editor selections."),!0),dte=S("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},d(2256,"Minimap marker color for the editor selection."),!0),gP=S("minimap.infoHighlight",{dark:$h,light:$h,hcDark:_m,hcLight:_m},d(2257,"Minimap marker color for infos.")),pP=S("minimap.warningHighlight",{dark:cc,light:cc,hcDark:bm,hcLight:bm},d(2258,"Minimap marker color for warnings.")),mP=S("minimap.errorHighlight",{dark:new P(new R(255,18,18,.7)),light:new P(new R(255,18,18,.7)),hcDark:new P(new R(255,50,50,1)),hcLight:"#B5200D"},d(2259,"Minimap marker color for errors.")),fte=S("minimap.background",null,d(2260,"Minimap background color.")),gte=S("minimap.foregroundOpacity",P.fromHex("#000f"),d(2261,'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.'));S("minimapSlider.background",Te(NA,.5),d(2262,"Minimap slider background color."));S("minimapSlider.hoverBackground",Te(RA,.5),d(2263,"Minimap slider background color when hovering."));S("minimapSlider.activeBackground",Te(MA,.5),d(2264,"Minimap slider background color when clicked on."));S("charts.foreground",nt,d(2063,"The foreground color used in charts."));S("charts.lines",Te(nt,.5),d(2064,"The color used for horizontal lines in charts."));S("charts.red",FA,d(2065,"The red color used in chart visualizations."));const pte=S("charts.blue",$h,d(2066,"The blue color used in chart visualizations."));S("charts.yellow",cc,d(2067,"The yellow color used in chart visualizations."));S("charts.orange",fP,d(2068,"The orange color used in chart visualizations."));S("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},d(2069,"The green color used in chart visualizations."));const mte=S("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},d(2070,"The purple color used in chart visualizations.")),bP=S("input.background",{dark:"#3C3C3C",light:P.white,hcDark:P.black,hcLight:P.white},d(2164,"Input box background.")),_P=S("input.foreground",nt,d(2165,"Input box foreground.")),wP=S("input.border",{dark:null,light:null,hcDark:He,hcLight:He},d(2166,"Input box border.")),zA=S("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:He,hcLight:He},d(2167,"Border color of activated options in input fields.")),vP=S("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},d(2168,"Background color of activated options in input fields.")),$A=S("inputOption.activeBackground",{dark:Te(Zr,.4),light:Te(Zr,.2),hcDark:P.transparent,hcLight:P.transparent},d(2169,"Background hover color of options in input fields.")),qA=S("inputOption.activeForeground",{dark:P.white,light:P.black,hcDark:nt,hcLight:nt},d(2170,"Foreground color of activated options in input fields."));S("input.placeholderForeground",{light:Te(nt,.5),dark:Te(nt,.5),hcDark:Te(nt,.7),hcLight:Te(nt,.7)},d(2171,"Input box foreground color for placeholder text."));const yP=S("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:P.black,hcLight:P.white},d(2172,"Input validation background color for information severity.")),SP=S("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:nt},d(2173,"Input validation foreground color for information severity.")),kP=S("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:He,hcLight:He},d(2174,"Input validation border color for information severity.")),CP=S("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:P.black,hcLight:P.white},d(2175,"Input validation background color for warning severity.")),EP=S("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:nt},d(2176,"Input validation foreground color for warning severity.")),xP=S("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:He,hcLight:He},d(2177,"Input validation border color for warning severity.")),LP=S("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:P.black,hcLight:P.white},d(2178,"Input validation background color for error severity.")),DP=S("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:nt},d(2179,"Input validation foreground color for error severity.")),IP=S("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:He,hcLight:He},d(2180,"Input validation border color for error severity.")),$1=S("dropdown.background",{dark:"#3C3C3C",light:P.white,hcDark:P.black,hcLight:P.white},d(2181,"Dropdown background.")),TP=S("dropdown.listBackground",{dark:null,light:null,hcDark:P.black,hcLight:P.white},d(2182,"Dropdown list background.")),aS=S("dropdown.foreground",{dark:"#F0F0F0",light:nt,hcDark:P.white,hcLight:nt},d(2183,"Dropdown foreground.")),lS=S("dropdown.border",{dark:$1,light:"#CECECE",hcDark:He,hcLight:He},d(2184,"Dropdown border.")),KA=S("button.foreground",P.white,d(2185,"Button foreground color.")),AP=S("button.separator",Te(KA,.4),d(2186,"Button separator color.")),Gu=S("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},d(2187,"Button background color.")),NP=S("button.hoverBackground",{dark:ur(Gu,.2),light:Lc(Gu,.2),hcDark:Gu,hcLight:Gu},d(2188,"Button background color when hovering.")),RP=S("button.border",He,d(2189,"Button border color.")),MP=S("button.secondaryForeground",{dark:P.white,light:P.white,hcDark:P.white,hcLight:nt},d(2190,"Secondary button foreground color.")),q0=S("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:P.white},d(2191,"Secondary button background color.")),OP=S("button.secondaryHoverBackground",{dark:ur(q0,.2),light:Lc(q0,.2),hcDark:null,hcLight:null},d(2192,"Secondary button background color when hovering.")),ju=S("radio.activeForeground",qA,d(2193,"Foreground color of active radio option.")),FP=S("radio.activeBackground",$A,d(2194,"Background color of active radio option.")),PP=S("radio.activeBorder",zA,d(2195,"Border color of the active radio option.")),BP=S("radio.inactiveForeground",null,d(2196,"Foreground color of inactive radio option.")),WP=S("radio.inactiveBackground",null,d(2197,"Background color of inactive radio option.")),UP=S("radio.inactiveBorder",{light:Te(ju,.2),dark:Te(ju,.2),hcDark:Te(ju,.4),hcLight:Te(ju,.2)},d(2198,"Border color of the inactive radio option.")),HP=S("radio.inactiveHoverBackground",vP,d(2199,"Background color of inactive active radio option when hovering.")),cS=S("checkbox.background",$1,d(2200,"Background color of checkbox widget."));S("checkbox.selectBackground",Rs,d(2201,"Background color of checkbox widget when the element it's in is selected."));const hS=S("checkbox.foreground",aS,d(2202,"Foreground color of checkbox widget.")),VP=S("checkbox.border",lS,d(2203,"Border color of checkbox widget."));S("checkbox.selectBorder",H0,d(2204,"Border color of checkbox widget when the element it's in is selected."));const zP=S("checkbox.disabled.background",{op:Mi.Mix,color:cS,with:hS,ratio:.33},d(2205,"Background of a disabled checkbox.")),$P=S("checkbox.disabled.foreground",{op:Mi.Mix,color:hS,with:cS,ratio:.33},d(2206,"Foreground of a disabled checkbox.")),qP=S("keybindingLabel.background",{dark:new P(new R(128,128,128,.17)),light:new P(new R(221,221,221,.4)),hcDark:P.transparent,hcLight:P.transparent},d(2207,"Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),KP=S("keybindingLabel.foreground",{dark:P.fromHex("#CCCCCC"),light:P.fromHex("#555555"),hcDark:P.white,hcLight:nt},d(2208,"Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),GP=S("keybindingLabel.border",{dark:new P(new R(51,51,51,.6)),light:new P(new R(204,204,204,.4)),hcDark:new P(new R(111,195,223)),hcLight:He},d(2209,"Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),jP=S("keybindingLabel.bottomBorder",{dark:new P(new R(68,68,68,.6)),light:new P(new R(187,187,187,.4)),hcDark:new P(new R(111,195,223)),hcLight:nt},d(2210,"Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut.")),YP=S("list.focusBackground",null,d(2211,"List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),XP=S("list.focusForeground",null,d(2212,"List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),QP=S("list.focusOutline",{dark:Zr,light:Zr,hcDark:Ht,hcLight:Ht},d(2213,"List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),ZP=S("list.focusAndSelectionOutline",null,d(2214,"List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),hc=S("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:P.fromHex("#0F4A85").transparent(.1)},d(2215,"List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Zd=S("list.activeSelectionForeground",{dark:P.white,light:P.white,hcDark:null,hcLight:null},d(2216,"List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),GA=S("list.activeSelectionIconForeground",null,d(2217,"List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),JP=S("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:P.fromHex("#0F4A85").transparent(.1)},d(2218,"List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),e3=S("list.inactiveSelectionForeground",null,d(2219,"List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),t3=S("list.inactiveSelectionIconForeground",null,d(2220,"List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),i3=S("list.inactiveFocusBackground",null,d(2221,"List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),n3=S("list.inactiveFocusOutline",null,d(2222,"List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),jA=S("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:P.white.transparent(.1),hcLight:P.fromHex("#0F4A85").transparent(.1)},d(2223,"List/Tree background when hovering over items using the mouse.")),YA=S("list.hoverForeground",null,d(2224,"List/Tree foreground when hovering over items using the mouse.")),s3=S("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},d(2225,"List/Tree drag and drop background when moving items over other items when using the mouse.")),r3=S("list.dropBetweenBackground",{dark:H0,light:H0,hcDark:null,hcLight:null},d(2226,"List/Tree drag and drop border color when moving items between items when using the mouse.")),Lg=S("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:Zr,hcLight:Zr},d(2227,"List/Tree foreground color of the match highlights when searching inside the list/tree.")),bte=S("list.focusHighlightForeground",{dark:Lg,light:eP(hc,Lg,"#BBE7FF"),hcDark:Lg,hcLight:Lg},d(2228,"List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree.")),_te=S("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},d(2229,"List/Tree foreground color for invalid items, for example an unresolved root in explorer.")),wte=S("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},d(2230,"Foreground color of list items containing errors."));S("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},d(2231,"Foreground color of list items containing warnings."));const o3=S("listFilterWidget.background",{light:Lc(Rs,0),dark:ur(Rs,0),hcDark:Rs,hcLight:Rs},d(2232,"Background color of the type filter widget in lists and trees.")),a3=S("listFilterWidget.outline",{dark:P.transparent,light:P.transparent,hcDark:"#f38518",hcLight:"#007ACC"},d(2233,"Outline color of the type filter widget in lists and trees.")),l3=S("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:He,hcLight:He},d(2234,"Outline color of the type filter widget in lists and trees, when there are no matches.")),c3=S("listFilterWidget.shadow",Wf,d(2235,"Shadow color of the type filter widget in lists and trees.")),vte=S("list.filterMatchBackground",{dark:Ma,light:Ma,hcDark:null,hcLight:null},d(2236,"Background color of the filtered match.")),yte=S("list.filterMatchBorder",{dark:ch,light:ch,hcDark:He,hcLight:Ht},d(2237,"Border color of the filtered match.")),Ste=S("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},d(2238,"List/Tree foreground color for items that are deemphasized.")),XA=S("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},d(2239,"Tree stroke color for the indentation guides.")),h3=S("tree.inactiveIndentGuidesStroke",Te(XA,.4),d(2240,"Tree stroke color for the indentation guides that are not active.")),u3=S("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},d(2241,"Table border color between columns.")),d3=S("tree.tableOddRowsBackground",{dark:Te(nt,.04),light:Te(nt,.04),hcDark:null,hcLight:null},d(2242,"Background color for odd table rows."));S("editorActionList.background",Rs,d(2243,"Action List background color."));const kte=S("editorActionList.foreground",z1,d(2244,"Action List foreground color."));S("editorActionList.focusForeground",Zd,d(2245,"Action List foreground color for the focused item."));S("editorActionList.focusBackground",hc,d(2246,"Action List background color for the focused item."));const f3=S("menu.border",{dark:null,light:null,hcDark:He,hcLight:He},d(2247,"Border color of menus.")),g3=S("menu.foreground",aS,d(2248,"Foreground color of menu items.")),p3=S("menu.background",$1,d(2249,"Background color of menu items.")),m3=S("menu.selectionForeground",Zd,d(2250,"Foreground color of the selected menu item in menus.")),b3=S("menu.selectionBackground",hc,d(2251,"Background color of the selected menu item in menus.")),_3=S("menu.selectionBorder",{dark:null,light:null,hcDark:Ht,hcLight:Ht},d(2252,"Border color of the selected menu item in menus.")),w3=S("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:He,hcLight:He},d(2253,"Color of a separator menu item in menus.")),eE=S("quickInput.background",Rs,d(2280,"Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),v3=S("quickInput.foreground",z1,d(2281,"Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),y3=S("quickInputTitle.background",{dark:new P(new R(255,255,255,.105)),light:new P(new R(0,0,0,.06)),hcDark:"#000000",hcLight:P.white},d(2282,"Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),QA=S("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:P.white,hcLight:"#0F4A85"},d(2283,"Quick picker color for grouping labels.")),S3=S("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:P.white,hcLight:"#0F4A85"},d(2284,"Quick picker color for grouping borders.")),tE=S("quickInput.list.focusBackground",null,"",void 0,d(2285,"Please use quickInputList.focusBackground instead")),K0=S("quickInputList.focusForeground",Zd,d(2286,"Quick picker foreground color for the focused item.")),ZA=S("quickInputList.focusIconForeground",GA,d(2287,"Quick picker icon foreground color for the focused item.")),G0=S("quickInputList.focusBackground",{dark:z2(tE,hc),light:z2(tE,hc),hcDark:null,hcLight:null},d(2288,"Quick picker background color for the focused item."));S("search.resultsInfoForeground",{light:nt,dark:Te(nt,.65),hcDark:nt,hcLight:nt},d(2289,"Color of the text in the search viewlet's completion message."));S("searchEditor.findMatchBackground",{light:Te(Ma,.66),dark:Te(Ma,.66),hcDark:Ma,hcLight:Ma},d(2290,"Color of the Search Editor query matches."));S("searchEditor.findMatchBorder",{light:Te(ch,.66),dark:Te(ch,.66),hcDark:ch,hcLight:ch},d(2291,"Border color of the Search Editor query matches."));const Uf=be("contextViewService"),Hf=be("contextMenuService"),j0=[];function mt(i){const e=i.default;let t;if(typeof e=="string"?(t=new CSSStyleSheet,t.replaceSync(e)):e instanceof CSSStyleSheet&&(t=e),t!=null){const n=Array.from(t.cssRules).filter(s=>s instanceof CSSFontFaceRule).map(s=>s.cssText);if(n.length>0){const s=new CSSStyleSheet;for(const r of n)s.insertRule(r);document.adoptedStyleSheets=[...document.adoptedStyleSheets,s]}j0.push(t)}}function k3(i){const e=i.getRootNode();return e instanceof ShadowRoot?e:document}function Cte(i){const e=k3(i);e instanceof ShadowRoot&&j0.length===0&&console.error("@codingame/monaco-vscode-api was loaded inside a shadow dom, but it's unable to load the css into it because the bundler configuration wasn't applied properly: imported css files should export their content as default"),e.adoptedStyleSheets=[...e.adoptedStyleSheets,...j0]}const C3=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),$s=be("keybindingService"),Vt=be("configurationService");class JA{constructor(e){this.domNode=e,this._maxWidth="",this._width="",this._height="",this._top="",this._left="",this._bottom="",this._right="",this._paddingTop="",this._paddingLeft="",this._paddingBottom="",this._paddingRight="",this._fontFamily="",this._fontWeight="",this._fontSize="",this._fontStyle="",this._fontFeatureSettings="",this._fontVariationSettings="",this._textDecoration="",this._lineHeight="",this._letterSpacing="",this._className="",this._display="",this._position="",this._visibility="",this._color="",this._backgroundColor="",this._layerHint=!1,this._contain="none",this._boxShadow=""}focus(){this.domNode.focus()}setMaxWidth(e){const t=Pn(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){const t=Pn(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){const t=Pn(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){const t=Pn(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){const t=Pn(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){const t=Pn(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){const t=Pn(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingTop(e){const t=Pn(e);this._paddingTop!==t&&(this._paddingTop=t,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(e){const t=Pn(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(e){const t=Pn(e);this._paddingBottom!==t&&(this._paddingBottom=t,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(e){const t=Pn(e);this._paddingRight!==t&&(this._paddingRight=t,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){const t=Pn(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){const t=Pn(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){const t=Pn(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}}function Pn(i){return typeof i=="number"?`${i}px`:i}function ud(i){return new JA(i)}class eN{constructor(){this._hooks=new X,this._pointerMoveCallback=null,this._onStopCallback=null}dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;const n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,n,s,r){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=s,this._onStopCallback=r;let o=e;try{e.setPointerCapture(t),this._hooks.add(fe(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{o=ke(e)}this._hooks.add(V(o,j.POINTER_MOVE,a=>{if(a.buttons!==n){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(V(o,j.POINTER_UP,a=>this.stopMonitoring(!0)))}}var qt;(function(i){i.Tap="-monaco-gesturetap",i.Change="-monaco-gesturechange",i.Start="-monaco-gesturestart",i.End="-monaco-gesturesend",i.Contextmenu="-monaco-gesturecontextmenu"})(qt||(qt={}));class Bt extends ${static{this.SCROLL_FRICTION=-.005}static{this.HOLD_DELAY=700}static{this.CLEAR_TAP_COUNT_TIME=400}constructor(){super(),this.dispatched=!1,this.targets=new sn,this.ignoreTargets=new sn,this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(W.runAndSubscribe(W1,({window:e,disposables:t})=>{t.add(V(e.document,"touchstart",n=>this.onTouchStart(n),{passive:!1})),t.add(V(e.document,"touchend",n=>this.onTouchEnd(e,n))),t.add(V(e.document,"touchmove",n=>this.onTouchMove(n),{passive:!1}))},{window:$e,disposables:this._store}))}static addTarget(e){if(!Bt.isTouchDevice())return $.None;Bt.INSTANCE||(Bt.INSTANCE=Fd(new Bt));const t=Bt.INSTANCE.targets.push(e);return fe(t)}static ignoreTarget(e){if(!Bt.isTouchDevice())return $.None;Bt.INSTANCE||(Bt.INSTANCE=Fd(new Bt));const t=Bt.INSTANCE.ignoreTargets.push(e);return fe(t)}static isTouchDevice(){return"ontouchstart"in $e||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){const t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,s=e.targetTouches.length;n<s;n++){const r=e.targetTouches.item(n);this.activeTouches[r.identifier]={id:r.identifier,initialTarget:r.target,initialTimeStamp:t,initialPageX:r.pageX,initialPageY:r.pageY,rollingTimestamps:[t],rollingPageX:[r.pageX],rollingPageY:[r.pageY]};const o=this.newGestureEvent(qt.Start,r.target);o.pageX=r.pageX,o.pageY=r.pageY,this.dispatchEvent(o)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){const n=Date.now(),s=Object.keys(this.activeTouches).length;for(let r=0,o=t.changedTouches.length;r<o;r++){const a=t.changedTouches.item(r);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("move of an UNKNOWN touch",a);continue}const l=this.activeTouches[a.identifier],c=Date.now()-l.initialTimeStamp;if(c<Bt.HOLD_DELAY&&Math.abs(l.initialPageX-l.rollingPageX.at(-1))<30&&Math.abs(l.initialPageY-l.rollingPageY.at(-1))<30){const h=this.newGestureEvent(qt.Tap,l.initialTarget);h.pageX=l.rollingPageX.at(-1),h.pageY=l.rollingPageY.at(-1),this.dispatchEvent(h)}else if(c>=Bt.HOLD_DELAY&&Math.abs(l.initialPageX-l.rollingPageX.at(-1))<30&&Math.abs(l.initialPageY-l.rollingPageY.at(-1))<30){const h=this.newGestureEvent(qt.Contextmenu,l.initialTarget);h.pageX=l.rollingPageX.at(-1),h.pageY=l.rollingPageY.at(-1),this.dispatchEvent(h)}else if(s===1){const h=l.rollingPageX.at(-1),u=l.rollingPageY.at(-1),f=l.rollingTimestamps.at(-1)-l.rollingTimestamps[0],g=h-l.rollingPageX[0],p=u-l.rollingPageY[0],m=[...this.targets].filter(_=>l.initialTarget instanceof Node&&_.contains(l.initialTarget));this.inertia(e,m,n,Math.abs(g)/f,g>0?1:-1,h,Math.abs(p)/f,p>0?1:-1,u)}this.dispatchEvent(this.newGestureEvent(qt.End,l.initialTarget)),delete this.activeTouches[a.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){const n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===qt.Tap){const t=new Date().getTime();let n=0;t-this._lastSetTapCountTime>Bt.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===qt.Change||e.type===qt.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(const n of this.ignoreTargets)if(n.contains(e.initialTarget))return;const t=[];for(const n of this.targets)if(n.contains(e.initialTarget)){let s=0,r=e.initialTarget;for(;r&&r!==n;)s++,r=r.parentElement;t.push([s,n])}t.sort((n,s)=>n[0]-s[0]);for(const[n,s]of t)s.dispatchEvent(e),this.dispatched=!0}}inertia(e,t,n,s,r,o,a,l,c){this.handle=Hs(e,()=>{const h=Date.now(),u=h-n;let f=0,g=0,p=!0;s+=Bt.SCROLL_FRICTION*u,a+=Bt.SCROLL_FRICTION*u,s>0&&(p=!1,f=r*s*u),a>0&&(p=!1,g=l*a*u);const m=this.newGestureEvent(qt.Change);m.translationX=f,m.translationY=g,t.forEach(_=>_.dispatchEvent(m)),p||this.inertia(e,t,h,s,r,o+f,a,l,c+g)})}onTouchMove(e){const t=Date.now();for(let n=0,s=e.changedTouches.length;n<s;n++){const r=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("end of an UNKNOWN touch",r);continue}const o=this.activeTouches[r.identifier],a=this.newGestureEvent(qt.Change,o.initialTarget);a.translationX=r.pageX-o.rollingPageX.at(-1),a.translationY=r.pageY-o.rollingPageY.at(-1),a.pageX=r.pageX,a.pageY=r.pageY,this.dispatchEvent(a),o.rollingPageX.length>3&&(o.rollingPageX.shift(),o.rollingPageY.shift(),o.rollingTimestamps.shift()),o.rollingPageX.push(r.pageX),o.rollingPageY.push(r.pageY),o.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}}class so extends ${onclick(e,t){this._register(V(e,j.CLICK,n=>t(new Ns(ke(e),n))))}onmousedown(e,t){this._register(V(e,j.MOUSE_DOWN,n=>t(new Ns(ke(e),n))))}onmouseover(e,t){this._register(V(e,j.MOUSE_OVER,n=>t(new Ns(ke(e),n))))}onmouseleave(e,t){this._register(V(e,j.MOUSE_LEAVE,n=>t(new Ns(ke(e),n))))}onkeydown(e,t){this._register(V(e,j.KEY_DOWN,n=>t(new at(n))))}onkeyup(e,t){this._register(V(e,j.KEY_UP,n=>t(new at(n))))}oninput(e,t){this._register(V(e,j.INPUT,t))}onblur(e,t){this._register(V(e,j.BLUR,t))}onfocus(e,t){this._register(V(e,j.FOCUS,t))}onchange(e,t){this._register(V(e,j.CHANGE,t))}ignoreGesture(e){return Bt.ignoreTarget(e)}}const Gh=11;class E3 extends so{constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...ze.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=Gh+"px",this.domNode.style.height=Gh+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new eN),this._register(Fs(this.bgDomNode,j.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(Fs(this.domNode,j.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new lA),this._pointerdownScheduleRepeatTimer=this._register(new tl)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,ke(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}}class x3 extends ${constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new tl)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===Nt.Hidden?!1:this._visibility===Nt.Visible?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){const e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(e?" fade":"")))}}const L3=140;class tN extends so{constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new x3(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new eN),this._shouldRender=!0,this.domNode=ud(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(V(this.domNode.domNode,j.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){const t=this._register(new E3(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,s){this.slider=ud(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof s=="number"&&this.slider.setHeight(s),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(V(this.slider.domNode,j.POINTER_DOWN,r=>{r.button===0&&(r.preventDefault(),this._sliderPointerDown(r))})),this.onclick(this.slider.domNode,r=>{r.leftButton&&r.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){const t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),s=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderPointerPosition(e);n<=r&&r<=s?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,n=e.offsetY;else{const r=Bl(this.domNode.domNode);t=e.pageX-r.left,n=e.pageY-r.top}const s=this._pointerDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(s):this._scrollbarState.getDesiredScrollPositionFromOffset(s)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._sliderPointerPosition(e),n=this._sliderOrthogonalPointerPosition(e),s=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>{const o=this._sliderOrthogonalPointerPosition(r),a=Math.abs(o-n);if(hi&&a>L3){this._setDesiredScrollPositionNow(s.getScrollPosition());return}const c=this._sliderPointerPosition(r)-t;this._setDesiredScrollPositionNow(s.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){const t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}}const D3=20;class Jd{constructor(e,t,n,s,r,o){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=s,this._scrollSize=r,this._scrollPosition=o,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new Jd(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){const t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){const t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){const t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,s,r){const o=Math.max(0,n-e),a=Math.max(0,o-2*t),l=s>0&&s>n;if(!l)return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};const c=Math.round(Math.max(D3,Math.floor(n*a/s))),h=(a-c)/(s-n),u=r*h;return{computedAvailableSize:Math.round(o),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:h,computedSliderPosition:Math.round(u)}}_refreshComputedValues(){const e=Jd._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;const t=e-this._arrowSize;let n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;const t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}}class I3 extends tN{constructor(e,t,n){const s=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new Jd(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===Nt.Hidden?0:t.horizontalScrollbarSize,t.vertical===Nt.Hidden?0:t.verticalScrollbarSize,s.width,s.scrollWidth,r.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){const o=(t.arrowSize-Gh)/2,a=(t.horizontalScrollbarSize-Gh)/2;this._createArrow({className:"scra",icon:re.scrollbarButtonLeft,top:a,left:o,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Vh(null,1,0))}),this._createArrow({className:"scra",icon:re.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:o,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Vh(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===Nt.Hidden?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===Nt.Hidden?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}}class T3 extends tN{constructor(e,t,n){const s=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new Jd(t.verticalHasArrows?t.arrowSize:0,t.vertical===Nt.Hidden?0:t.verticalScrollbarSize,0,s.height,s.scrollHeight,r.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){const o=(t.arrowSize-Gh)/2,a=(t.verticalScrollbarSize-Gh)/2;this._createArrow({className:"scra",icon:re.scrollbarButtonUp,top:o,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Vh(null,0,1))}),this._createArrow({className:"scra",icon:re.scrollbarButtonDown,top:void 0,left:a,bottom:o,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Vh(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===Nt.Hidden?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}}const A3=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));mt(A3);const N3=500,iE=50;class R3{constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}}class uS{static{this.INSTANCE=new uS}constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,s=this._rear;do{const r=s===this._front?e:Math.pow(2,-n);if(e-=r,t+=this._memory[s].score*r,s===this._front)break;s=(this._capacity+s-1)%this._capacity,n++}while(!0);return t<=.5}acceptStandardWheelEvent(e){if(O1){const t=ke(e.browserEvent),n=y0(t);this.accept(Date.now(),e.deltaX*n,e.deltaY*n)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,n){let s=null;const r=new R3(e,t,n);this._front===-1&&this._rear===-1?(this._memory[0]=r,this._front=0,this._rear=0):(s=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=r),r.score=this._computeScore(r,s)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let n=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(n+=.25),t){const s=Math.abs(e.deltaX),r=Math.abs(e.deltaY),o=Math.abs(t.deltaX),a=Math.abs(t.deltaY),l=Math.max(Math.min(s,o),1),c=Math.max(Math.min(r,a),1),h=Math.max(s,o),u=Math.max(r,a);h%l===0&&u%c===0&&(n-=.5)}return Math.min(Math.max(n,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}}class dS extends so{get options(){return this._options}constructor(e,t,n){super(),this._onScroll=this._register(new A),this.onScroll=this._onScroll.event,this._onWillScroll=this._register(new A),this.onWillScroll=this._onWillScroll.event,e.style.overflow="hidden",this._options=O3(t),this._scrollable=n,this._register(this._scrollable.onScroll(r=>{this._onWillScroll.fire(r),this._onDidScroll(r),this._onScroll.fire(r)}));const s={onMouseWheel:r=>this._onMouseWheel(r),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new T3(this._scrollable,this._options,s)),this._horizontalScrollbar=this._register(new I3(this._scrollable,this._options,s)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=ud(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=ud(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=ud(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,r=>this._onMouseOver(r)),this.onmouseleave(this._listenOnDomNode,r=>this._onMouseLeave(r)),this._hideTimeout=this._register(new tl),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=ai(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Me&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new Vh(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=ai(this._mouseWheelToDispose),e)){const n=s=>{this._onMouseWheel(new Vh(s))};this._mouseWheelToDispose.push(V(this._listenOnDomNode,j.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){if(e.browserEvent?.defaultPrevented)return;const t=uS.INSTANCE;t.acceptStandardWheelEvent(e);let n=!1;if(e.deltaY||e.deltaX){let r=e.deltaY*this._options.mouseWheelScrollSensitivity,o=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&o+r===0?o=r=0:Math.abs(r)>=Math.abs(o)?o=0:r=0),this._options.flipAxes&&([r,o]=[o,r]);const a=!Me&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!o&&(o=r,r=0),e.browserEvent&&e.browserEvent.altKey&&(o=o*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);const l=this._scrollable.getFutureScrollPosition();let c={};if(r){const h=iE*r,u=l.scrollTop-(h<0?Math.floor(h):Math.ceil(h));this._verticalScrollbar.writeScrollPosition(c,u)}if(o){const h=iE*o,u=l.scrollLeft-(h<0?Math.floor(h):Math.ceil(h));this._horizontalScrollbar.writeScrollPosition(c,u)}c=this._scrollable.validateScrollPosition(c),(l.scrollLeft!==c.scrollLeft||l.scrollTop!==c.scrollTop)&&(this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(c):this._scrollable.setScrollPositionNow(c),n=!0)}let s=n;!s&&this._options.alwaysConsumeMouseWheel&&(s=!0),!s&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(s=!0),s&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){const e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,s=n?" left":"",r=t?" top":"",o=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${s}`),this._topShadowDomNode.setClassName(`shadow${r}`),this._topLeftShadowDomNode.setClassName(`shadow${o}${r}${s}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),N3)}}class M3 extends dS{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new R1({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:s=>Hs(ke(e),s)});super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class iN extends dS{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}}class nN extends dS{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;const n=new R1({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:s=>Hs(ke(e),s)});super(e,t,n),this._register(n),this._element=e,this._register(this.onScroll(s=>{s.scrollTopChanged&&(this._element.scrollTop=s.scrollTop),s.scrollLeftChanged&&(this._element.scrollLeft=s.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}}function O3(i){const e={lazyRender:typeof i.lazyRender<"u"?i.lazyRender:!1,className:typeof i.className<"u"?i.className:"",useShadows:typeof i.useShadows<"u"?i.useShadows:!0,handleMouseWheel:typeof i.handleMouseWheel<"u"?i.handleMouseWheel:!0,flipAxes:typeof i.flipAxes<"u"?i.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof i.consumeMouseWheelIfScrollbarIsNeeded<"u"?i.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof i.alwaysConsumeMouseWheel<"u"?i.alwaysConsumeMouseWheel:!1,scrollYToX:typeof i.scrollYToX<"u"?i.scrollYToX:!1,mouseWheelScrollSensitivity:typeof i.mouseWheelScrollSensitivity<"u"?i.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof i.fastScrollSensitivity<"u"?i.fastScrollSensitivity:5,scrollPredominantAxis:typeof i.scrollPredominantAxis<"u"?i.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof i.mouseWheelSmoothScroll<"u"?i.mouseWheelSmoothScroll:!0,arrowSize:typeof i.arrowSize<"u"?i.arrowSize:11,listenOnDomNode:typeof i.listenOnDomNode<"u"?i.listenOnDomNode:null,horizontal:typeof i.horizontal<"u"?i.horizontal:Nt.Auto,horizontalScrollbarSize:typeof i.horizontalScrollbarSize<"u"?i.horizontalScrollbarSize:10,horizontalSliderSize:typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:0,horizontalHasArrows:typeof i.horizontalHasArrows<"u"?i.horizontalHasArrows:!1,vertical:typeof i.vertical<"u"?i.vertical:Nt.Auto,verticalScrollbarSize:typeof i.verticalScrollbarSize<"u"?i.verticalScrollbarSize:10,verticalHasArrows:typeof i.verticalHasArrows<"u"?i.verticalHasArrows:!1,verticalSliderSize:typeof i.verticalSliderSize<"u"?i.verticalSliderSize:0,scrollByPage:typeof i.scrollByPage<"u"?i.scrollByPage:!1};return e.horizontalSliderSize=typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof i.verticalSliderSize<"u"?i.verticalSliderSize:e.verticalScrollbarSize,Me&&(e.className+=" mac"),e}const F3=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));mt(F3);const Dg=_e;var rt;(function(i){i[i.LEFT=0]="LEFT",i[i.RIGHT=1]="RIGHT",i[i.BELOW=2]="BELOW",i[i.ABOVE=3]="ABOVE"})(rt||(rt={}));let P3=class extends ${constructor(e){super(),this.containerDomNode=document.createElement("div"),this.containerDomNode.className="monaco-hover",this.containerDomNode.classList.toggle("fade-in",!!e),this.containerDomNode.tabIndex=0,this.containerDomNode.setAttribute("role","tooltip"),this.contentsDomNode=document.createElement("div"),this.contentsDomNode.className="monaco-hover-content",this.scrollbar=this._register(new nN(this.contentsDomNode,{consumeMouseWheelIfScrollbarIsNeeded:!0})),this.containerDomNode.appendChild(this.scrollbar.getDomNode())}onContentsChanged(){this.scrollbar.scanDomNode()}};class fS extends ${static render(e,t,n){return new fS(e,t,n)}constructor(e,t,n){super(),this.actionLabel=t.label,this.actionKeybindingLabel=n,this.actionContainer=ie(e,Dg("div.action-container")),this.actionContainer.setAttribute("tabindex","0"),this.action=ie(this.actionContainer,Dg("a.action")),this.action.setAttribute("role","button"),t.iconClass&&ie(this.action,Dg(`span.icon.${t.iconClass}`)),this.actionRenderedLabel=n?`${t.label} (${n})`:t.label;const s=ie(this.action,Dg("span"));s.textContent=this.actionRenderedLabel,this._store.add(new W3(this.actionContainer,t.run)),this._store.add(new U3(this.actionContainer,t.run,[w.Enter,w.Space])),this.setEnabled(!0)}setEnabled(e){e?(this.actionContainer.classList.remove("disabled"),this.actionContainer.removeAttribute("aria-disabled")):(this.actionContainer.classList.add("disabled"),this.actionContainer.setAttribute("aria-disabled","true"))}}function B3(i,e){return i&&e?d(16,"Inspect this in the accessible view with {0}.",e):i?d(17,"Inspect this in the accessible view via the command Open Accessible View which is currently not triggerable via keybinding."):""}class W3 extends ${constructor(e,t){super(),this._register(V(e,j.CLICK,n=>{n.stopPropagation(),n.preventDefault(),t(e)}))}}class U3 extends ${constructor(e,t,n){super(),this._register(V(e,j.KEY_DOWN,s=>{const r=new at(s);n.some(o=>r.equals(o))&&(s.stopPropagation(),s.preventDefault(),t(e))}))}}var Ni;(function(i){function e(r,o){if(r.start>=o.end||o.start>=r.end)return{start:0,end:0};const a=Math.max(r.start,o.start),l=Math.min(r.end,o.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}i.intersect=e;function t(r){return r.end-r.start<=0}i.isEmpty=t;function n(r,o){return!t(e(r,o))}i.intersects=n;function s(r,o){const a=[],l={start:r.start,end:Math.min(o.start,r.end)},c={start:Math.max(o.end,r.start),end:r.end};return t(l)||a.push(l),t(c)||a.push(c),a}i.relativeComplement=s})(Ni||(Ni={}));const H3=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));mt(H3);var Ur;(function(i){i[i.ABSOLUTE=1]="ABSOLUTE",i[i.FIXED=2]="FIXED",i[i.FIXED_SHADOW=3]="FIXED_SHADOW"})(Ur||(Ur={}));function V3(i){const e=i;return!!e&&typeof e.x=="number"&&typeof e.y=="number"}var Oa;(function(i){i[i.LEFT=0]="LEFT",i[i.RIGHT=1]="RIGHT"})(Oa||(Oa={}));var Zn;(function(i){i[i.BELOW=0]="BELOW",i[i.ABOVE=1]="ABOVE"})(Zn||(Zn={}));var wm;(function(i){i[i.VERTICAL=0]="VERTICAL",i[i.HORIZONTAL=1]="HORIZONTAL"})(wm||(wm={}));var qn;(function(i){i[i.Before=0]="Before",i[i.After=1]="After"})(qn||(qn={}));var Fa;(function(i){i[i.AVOID=0]="AVOID",i[i.ALIGN=1]="ALIGN"})(Fa||(Fa={}));function hh(i,e,t){const n=t.mode===Fa.ALIGN?t.offset:t.offset+t.size,s=t.mode===Fa.ALIGN?t.offset+t.size:t.offset;return t.position===qn.Before?e<=i-n?n:e<=s?s-e:Math.max(i-e,0):e<=s?s-e:e<=i-n?n:0}class vm extends ${static{this.BUBBLE_UP_EVENTS=["click","keydown","focus","blur"]}static{this.BUBBLE_DOWN_EVENTS=["click"]}constructor(e,t){super(),this.container=null,this.useFixedPosition=!1,this.useShadowDOM=!1,this.delegate=null,this.toDisposeOnClean=$.None,this.toDisposeOnSetContainer=$.None,this.shadowRoot=null,this.shadowRootHostElement=null,this.view=_e(".context-view"),hm(this.view),this.setContainer(e,t),this._register(fe(()=>this.setContainer(null,Ur.ABSOLUTE)))}setContainer(e,t){this.useFixedPosition=t!==Ur.ABSOLUTE;const n=this.useShadowDOM;if(this.useShadowDOM=t===Ur.FIXED_SHADOW,!(e===this.container&&n===this.useShadowDOM)&&(this.container&&(this.toDisposeOnSetContainer.dispose(),this.view.remove(),this.shadowRoot&&(this.shadowRoot=null,this.shadowRootHostElement?.remove(),this.shadowRootHostElement=null),this.container=null),e)){if(this.container=e,this.useShadowDOM){this.shadowRootHostElement=_e(".shadow-root-host"),this.container.appendChild(this.shadowRootHostElement),this.shadowRoot=this.shadowRootHostElement.attachShadow({mode:"open"});const r=document.createElement("style");r.textContent=z3,this.shadowRoot.appendChild(r),this.shadowRoot.appendChild(this.view),this.shadowRoot.appendChild(_e("slot"))}else this.container.appendChild(this.view);const s=new X;vm.BUBBLE_UP_EVENTS.forEach(r=>{s.add(Fs(this.container,r,o=>{this.onDOMEvent(o,!1)}))}),vm.BUBBLE_DOWN_EVENTS.forEach(r=>{s.add(Fs(this.container,r,o=>{this.onDOMEvent(o,!0)},!0))}),this.toDisposeOnSetContainer=s}}show(e){this.isVisible()&&this.hide(),gr(this.view),this.view.className="context-view monaco-component",this.view.style.top="0px",this.view.style.left="0px",this.view.style.zIndex=`${2575+(e.layer??0)}`,this.view.style.position=this.useFixedPosition?"fixed":"absolute",cm(this.view),this.toDisposeOnClean=e.render(this.view)||$.None,this.delegate=e,this.doLayout(),this.delegate.focus?.()}getViewElement(){return this.view}layout(){if(this.isVisible()){if(this.delegate.canRelayout===!1&&!(ja&&P1.pointerEvents)){this.hide();return}this.delegate?.layout?.(),this.doLayout()}}doLayout(){if(!this.isVisible())return;const e=this.delegate.getAnchor();let t;if(Ut(e)){const f=Bl(e),g=cA(e);t={top:f.top*g,left:f.left*g,width:f.width*g,height:f.height*g}}else V3(e)?t={top:e.y,left:e.x,width:e.width||1,height:e.height||2}:t={top:e.posy,left:e.posx,width:2,height:2};const n=Yd(this.view),s=M0(this.view),r=this.delegate.anchorPosition??Zn.BELOW,o=this.delegate.anchorAlignment??Oa.LEFT,a=this.delegate.anchorAxisAlignment??wm.VERTICAL;let l,c;const h=tr();if(a===wm.VERTICAL){const f={offset:t.top-h.pageYOffset,size:t.height,position:r===Zn.BELOW?qn.Before:qn.After},g={offset:t.left,size:t.width,position:o===Oa.LEFT?qn.Before:qn.After,mode:Fa.ALIGN};l=hh(h.innerHeight,s,f)+h.pageYOffset,Ni.intersects({start:l,end:l+s},{start:f.offset,end:f.offset+f.size})&&(g.mode=Fa.AVOID),c=hh(h.innerWidth,n,g)}else{const f={offset:t.left,size:t.width,position:o===Oa.LEFT?qn.Before:qn.After},g={offset:t.top,size:t.height,position:r===Zn.BELOW?qn.Before:qn.After,mode:Fa.ALIGN};c=hh(h.innerWidth,n,f),Ni.intersects({start:c,end:c+n},{start:f.offset,end:f.offset+f.size})&&(g.mode=Fa.AVOID),l=hh(h.innerHeight,s,g)+h.pageYOffset}this.view.classList.remove("top","bottom","left","right"),this.view.classList.add(r===Zn.BELOW?"bottom":"top"),this.view.classList.add(o===Oa.LEFT?"left":"right"),this.view.classList.toggle("fixed",this.useFixedPosition);const u=Bl(this.container);this.view.style.top=`${l-(this.useFixedPosition?Bl(this.view).top:u.top)}px`,this.view.style.left=`${c-(this.useFixedPosition?Bl(this.view).left:u.left)}px`,this.view.style.width="initial"}hide(e){const t=this.delegate;this.delegate=null,t?.onHide&&t.onHide(e),this.toDisposeOnClean.dispose(),hm(this.view)}isVisible(){return!!this.delegate}onDOMEvent(e,t){this.delegate&&(this.delegate.onDOMEvent?this.delegate.onDOMEvent(e,ke(e).document.activeElement):t&&!Kt(e.target,this.container)&&this.hide())}dispose(){this.hide(),super.dispose()}}const z3=`
	:host {
		all: initial; /* 1st rule so subsequent properties are reset. */
	}

	.codicon[class*='codicon-'] {
		font: normal normal normal 16px/1 codicon;
		display: inline-block;
		text-decoration: none;
		text-rendering: auto;
		text-align: center;
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}

	:host {
		font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "HelveticaNeue-Light", system-ui, "Ubuntu", "Droid Sans", sans-serif;
	}

	:host-context(.mac) { font-family: -apple-system, BlinkMacSystemFont, sans-serif; }
	:host-context(.mac:lang(zh-Hans)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang SC", "Hiragino Sans GB", sans-serif; }
	:host-context(.mac:lang(zh-Hant)) { font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", sans-serif; }
	:host-context(.mac:lang(ja)) { font-family: -apple-system, BlinkMacSystemFont, "Hiragino Kaku Gothic Pro", sans-serif; }
	:host-context(.mac:lang(ko)) { font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", "Nanum Gothic", "AppleGothic", sans-serif; }

	:host-context(.windows) { font-family: "Segoe WPC", "Segoe UI", sans-serif; }
	:host-context(.windows:lang(zh-Hans)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft YaHei", sans-serif; }
	:host-context(.windows:lang(zh-Hant)) { font-family: "Segoe WPC", "Segoe UI", "Microsoft Jhenghei", sans-serif; }
	:host-context(.windows:lang(ja)) { font-family: "Segoe WPC", "Segoe UI", "Yu Gothic UI", "Meiryo UI", sans-serif; }
	:host-context(.windows:lang(ko)) { font-family: "Segoe WPC", "Segoe UI", "Malgun Gothic", "Dotom", sans-serif; }

	:host-context(.linux) { font-family: system-ui, "Ubuntu", "Droid Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hans)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans SC", "Source Han Sans CN", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(zh-Hant)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans TC", "Source Han Sans TW", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ja)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans J", "Source Han Sans JP", "Source Han Sans", sans-serif; }
	:host-context(.linux:lang(ko)) { font-family: system-ui, "Ubuntu", "Droid Sans", "Source Han Sans K", "Source Han Sans JR", "Source Han Sans", "UnDotum", "FBaekmuk Gulim", sans-serif; }
`,Vf=be("openerService");class sN{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const nE=new sN("id#");function gS(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let nl=gS();function rN(i){nl=i}const oN=/[&<>"']/,$3=new RegExp(oN.source,"g"),aN=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,q3=new RegExp(aN.source,"g"),K3={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},sE=i=>K3[i];function cs(i,e){if(e){if(oN.test(i))return i.replace($3,sE)}else if(aN.test(i))return i.replace(q3,sE);return i}const G3=/(^|[^\[])\^/g;function Rt(i,e){let t=typeof i=="string"?i:i.source;e=e||"";const n={replace:(s,r)=>{let o=typeof r=="string"?r:r.source;return o=o.replace(G3,"$1"),t=t.replace(s,o),n},getRegex:()=>new RegExp(t,e)};return n}function rE(i){try{i=encodeURI(i).replace(/%25/g,"%")}catch{return null}return i}const dd={exec:()=>null};function oE(i,e){const t=i.replace(/\|/g,(r,o,a)=>{let l=!1,c=o;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),n=t.split(/ \|/);let s=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;s<n.length;s++)n[s]=n[s].trim().replace(/\\\|/g,"|");return n}function Iu(i,e,t){const n=i.length;if(n===0)return"";let s=0;for(;s<n&&i.charAt(n-s-1)===e;)s++;return i.slice(0,n-s)}function j3(i,e){if(i.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<i.length;n++)if(i[n]==="\\")n++;else if(i[n]===e[0])t++;else if(i[n]===e[1]&&(t--,t<0))return n;return-1}function aE(i,e,t,n){const s=e.href,r=e.title?cs(e.title):null,o=i[1].replace(/\\([\[\]])/g,"$1");if(i[0].charAt(0)!=="!"){n.state.inLink=!0;const a={type:"link",raw:t,href:s,title:r,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,a}return{type:"image",raw:t,href:s,title:r,text:cs(o)}}function Y3(i,e){const t=i.match(/^(\s+)(?:```)/);if(t===null)return e;const n=t[1];return e.split(`
`).map(s=>{const r=s.match(/^\s+/);if(r===null)return s;const[o]=r;return o.length>=n.length?s.slice(n.length):s}).join(`
`)}class ym{options;rules;lexer;constructor(e){this.options=e||nl}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Iu(n,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],s=Y3(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:s}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(/#$/.test(n)){const s=Iu(n,"#");(this.options.pedantic||!s||/ $/.test(s))&&(n=s.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Iu(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let n=Iu(t[0],`
`).split(`
`),s="",r="";const o=[];for(;n.length>0;){let a=!1;const l=[];let c;for(c=0;c<n.length;c++)if(/^ {0,3}>/.test(n[c]))l.push(n[c]),a=!0;else if(!a)l.push(n[c]);else break;n=n.slice(c);const h=l.join(`
`),u=h.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");s=s?`${s}
${h}`:h,r=r?`${r}
${u}`:u;const f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,o,!0),this.lexer.state.top=f,n.length===0)break;const g=o[o.length-1];if(g?.type==="code")break;if(g?.type==="blockquote"){const p=g,m=p.raw+`
`+n.join(`
`),_=this.blockquote(m);o[o.length-1]=_,s=s.substring(0,s.length-p.raw.length)+_.raw,r=r.substring(0,r.length-p.text.length)+_.text;break}else if(g?.type==="list"){const p=g,m=p.raw+`
`+n.join(`
`),_=this.list(m);o[o.length-1]=_,s=s.substring(0,s.length-g.raw.length)+_.raw,r=r.substring(0,r.length-p.raw.length)+_.raw,n=m.substring(o[o.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:o,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const s=n.length>1,r={type:"list",raw:"",ordered:s,start:s?+n.slice(0,-1):"",loose:!1,items:[]};n=s?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=s?n:"[*+-]");const o=new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`);let a=!1;for(;e;){let l=!1,c="",h="";if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let u=t[2].split(`
`,1)[0].replace(/^\t+/,v=>" ".repeat(3*v.length)),f=e.split(`
`,1)[0],g=!u.trim(),p=0;if(this.options.pedantic?(p=2,h=u.trimStart()):g?p=t[1].length+1:(p=t[2].search(/[^ ]/),p=p>4?1:p,h=u.slice(p),p+=t[1].length),g&&/^ *$/.test(f)&&(c+=f+`
`,e=e.substring(f.length+1),l=!0),!l){const v=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),y=new RegExp(`^ {0,${Math.min(3,p-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),E=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:\`\`\`|~~~)`),N=new RegExp(`^ {0,${Math.min(3,p-1)}}#`);for(;e;){const I=e.split(`
`,1)[0];if(f=I,this.options.pedantic&&(f=f.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),E.test(f)||N.test(f)||v.test(f)||y.test(e))break;if(f.search(/[^ ]/)>=p||!f.trim())h+=`
`+f.slice(p);else{if(g||u.search(/[^ ]/)>=4||E.test(u)||N.test(u)||y.test(u))break;h+=`
`+f}!g&&!f.trim()&&(g=!0),c+=I+`
`,e=e.substring(I.length+1),u=f.slice(p)}}r.loose||(a?r.loose=!0:/\n *\n *$/.test(c)&&(a=!0));let m=null,_;this.options.gfm&&(m=/^\[[ xX]\] /.exec(h),m&&(_=m[0]!=="[ ] ",h=h.replace(/^\[[ xX]\] +/,""))),r.items.push({type:"list_item",raw:c,task:!!m,checked:_,loose:!1,text:h,tokens:[]}),r.raw+=c}r.items[r.items.length-1].raw=r.items[r.items.length-1].raw.trimEnd(),r.items[r.items.length-1].text=r.items[r.items.length-1].text.trimEnd(),r.raw=r.raw.trimEnd();for(let l=0;l<r.items.length;l++)if(this.lexer.state.top=!1,r.items[l].tokens=this.lexer.blockTokens(r.items[l].text,[]),!r.loose){const c=r.items[l].tokens.filter(u=>u.type==="space"),h=c.length>0&&c.some(u=>/\n.*\n/.test(u.raw));r.loose=h}if(r.loose)for(let l=0;l<r.items.length;l++)r.items[l].loose=!0;return r}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(/\s+/g," "),s=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:s,title:r}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const n=oE(t[1]),s=t[2].replace(/^\||\| *$/g,"").split("|"),r=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===s.length){for(const a of s)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(let a=0;a<n.length;a++)o.header.push({text:n[a],tokens:this.lexer.inline(n[a]),header:!0,align:o.align[a]});for(const a of r)o.rows.push(oE(a,o.header.length).map((l,c)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[c]})));return o}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:cs(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const o=Iu(n.slice(0,-1),"\\");if((n.length-o.length)%2===0)return}else{const o=j3(t[2],"()");if(o>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let s=t[2],r="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(s);o&&(s=o[1],r=o[3])}else r=t[3]?t[3].slice(1,-1):"";return s=s.trim(),/^</.test(s)&&(this.options.pedantic&&!/>$/.test(n)?s=s.slice(1):s=s.slice(1,-1)),aE(t,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const s=(n[2]||n[1]).replace(/\s+/g," "),r=t[s.toLowerCase()];if(!r){const o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return aE(n,r,n[0],this.lexer)}}emStrong(e,t,n=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(!s||s[3]&&n.match(/[\p{L}\p{N}]/u))return;if(!(s[1]||s[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const o=[...s[0]].length-1;let a,l,c=o,h=0;const u=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+o);(s=u.exec(t))!=null;){if(a=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!a)continue;if(l=[...a].length,s[3]||s[4]){c+=l;continue}else if((s[5]||s[6])&&o%3&&!((o+l)%3)){h+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+h);const f=[...s[0]][0].length,g=e.slice(0,o+s.index+f+l);if(Math.min(o,l)%2){const m=g.slice(1,-1);return{type:"em",raw:g,text:m,tokens:this.lexer.inlineTokens(m)}}const p=g.slice(2,-2);return{type:"strong",raw:g,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(/\n/g," ");const s=/[^ ]/.test(n),r=/^ /.test(n)&&/ $/.test(n);return s&&r&&(n=n.substring(1,n.length-1)),n=cs(n,!0),{type:"codespan",raw:t[0],text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,s;return t[2]==="@"?(n=cs(t[1]),s="mailto:"+n):(n=cs(t[1]),s=n),{type:"link",raw:t[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let n,s;if(t[2]==="@")n=cs(t[0]),s="mailto:"+n;else{let r;do r=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(r!==t[0]);n=cs(t[0]),t[1]==="www."?s="http://"+t[0]:s=t[0]}return{type:"link",raw:t[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let n;return this.lexer.state.inRawBlock?n=t[0]:n=cs(t[0]),{type:"text",raw:t[0],text:n}}}}const X3=/^(?: *(?:\n|$))+/,Q3=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,Z3=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,zf=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,J3=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,lN=/(?:[*+-]|\d{1,9}[.)])/,cN=Rt(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,lN).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),pS=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,eB=/^[^\n]+/,mS=/(?!\s*\])(?:\\.|[^\[\]\\])+/,tB=Rt(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",mS).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),iB=Rt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,lN).getRegex(),q1="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",bS=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,nB=Rt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",bS).replace("tag",q1).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),hN=Rt(pS).replace("hr",zf).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",q1).getRegex(),sB=Rt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",hN).getRegex(),_S={blockquote:sB,code:Q3,def:tB,fences:Z3,heading:J3,hr:zf,html:nB,lheading:cN,list:iB,newline:X3,paragraph:hN,table:dd,text:eB},lE=Rt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",zf).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",q1).getRegex(),rB={..._S,table:lE,paragraph:Rt(pS).replace("hr",zf).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",lE).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",q1).getRegex()},oB={..._S,html:Rt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",bS).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:dd,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Rt(pS).replace("hr",zf).replace("heading",` *#{1,6} *[^
]`).replace("lheading",cN).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},uN=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,aB=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,dN=/^( {2,}|\\)\n(?!\s*$)/,lB=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,$f="\\p{P}\\p{S}",cB=Rt(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,$f).getRegex(),hB=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,uB=Rt(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,$f).getRegex(),dB=Rt("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,$f).getRegex(),fB=Rt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,$f).getRegex(),gB=Rt(/\\([punct])/,"gu").replace(/punct/g,$f).getRegex(),pB=Rt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),mB=Rt(bS).replace("(?:-->|$)","-->").getRegex(),bB=Rt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",mB).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Sm=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,_B=Rt(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Sm).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),fN=Rt(/^!?\[(label)\]\[(ref)\]/).replace("label",Sm).replace("ref",mS).getRegex(),gN=Rt(/^!?\[(ref)\](?:\[\])?/).replace("ref",mS).getRegex(),wB=Rt("reflink|nolink(?!\\()","g").replace("reflink",fN).replace("nolink",gN).getRegex(),wS={_backpedal:dd,anyPunctuation:gB,autolink:pB,blockSkip:hB,br:dN,code:aB,del:dd,emStrongLDelim:uB,emStrongRDelimAst:dB,emStrongRDelimUnd:fB,escape:uN,link:_B,nolink:gN,punctuation:cB,reflink:fN,reflinkSearch:wB,tag:bB,text:lB,url:dd},vB={...wS,link:Rt(/^!?\[(label)\]\((.*?)\)/).replace("label",Sm).getRegex(),reflink:Rt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Sm).getRegex()},Y0={...wS,escape:Rt(uN).replace("])","~|])").getRegex(),url:Rt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},yB={...Y0,br:Rt(dN).replace("{2,}","*").getRegex(),text:Rt(Y0.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Ig={normal:_S,gfm:rB,pedantic:oB},Tu={normal:wS,gfm:Y0,breaks:yB,pedantic:vB};class zr{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||nl,this.options.tokenizer=this.options.tokenizer||new ym,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Ig.normal,inline:Tu.normal};this.options.pedantic?(t.block=Ig.pedantic,t.inline=Tu.pedantic):this.options.gfm&&(t.block=Ig.gfm,this.options.breaks?t.inline=Tu.breaks:t.inline=Tu.gfm),this.tokenizer.rules=t}static get rules(){return{block:Ig,inline:Tu}}static lex(e,t){return new zr(t).lex(e)}static lexInline(e,t){return new zr(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,l,c)=>l+"    ".repeat(c.length));let s,r,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(s=a.call({lexer:this},e,t))?(e=e.substring(s.raw.length),t.push(s),!0):!1))){if(s=this.tokenizer.space(e)){e=e.substring(s.raw.length),s.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(s);continue}if(s=this.tokenizer.code(e)){e=e.substring(s.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(s);continue}if(s=this.tokenizer.fences(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.heading(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.hr(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.blockquote(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.list(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.html(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.def(e)){e=e.substring(s.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+s.raw,r.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(e)){e=e.substring(s.raw.length),t.push(s);continue}if(s=this.tokenizer.lheading(e)){e=e.substring(s.raw.length),t.push(s);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const l=e.slice(1);let c;this.options.extensions.startBlock.forEach(h=>{c=h.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(o))){r=t[t.length-1],n&&r?.type==="paragraph"?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(s),n=o.length!==e.length,e=e.substring(s.raw.length);continue}if(s=this.tokenizer.text(e)){e=e.substring(s.raw.length),r=t[t.length-1],r&&r.type==="text"?(r.raw+=`
`+s.raw,r.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(s);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,s,r,o=e,a,l,c;if(this.tokens.links){const h=Object.keys(this.tokens.links);if(h.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)h.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(h=>(n=h.call({lexer:this},e,t))?(e=e.substring(n.raw.length),t.push(n),!0):!1))){if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),s=t[t.length-1],s&&n.type==="text"&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):t.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length),s=t[t.length-1],s&&n.type==="text"&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):t.push(n);continue}if(n=this.tokenizer.emStrong(e,o,c)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.autolink(e)){e=e.substring(n.raw.length),t.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e))){e=e.substring(n.raw.length),t.push(n);continue}if(r=e,this.options.extensions&&this.options.extensions.startInline){let h=1/0;const u=e.slice(1);let f;this.options.extensions.startInline.forEach(g=>{f=g.call({lexer:this},u),typeof f=="number"&&f>=0&&(h=Math.min(h,f))}),h<1/0&&h>=0&&(r=e.substring(0,h+1))}if(n=this.tokenizer.inlineText(r)){e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(c=n.raw.slice(-1)),l=!0,s=t[t.length-1],s&&s.type==="text"?(s.raw+=n.raw,s.text+=n.text):t.push(n);continue}if(e){const h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return t}}class ef{options;parser;constructor(e){this.options=e||nl}space(e){return""}code({text:e,lang:t,escaped:n}){const s=(t||"").match(/^\S*/)?.[0],r=e.replace(/\n$/,"")+`
`;return s?'<pre><code class="language-'+cs(s)+'">'+(n?r:cs(r,!0))+`</code></pre>
`:"<pre><code>"+(n?r:cs(r,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,n=e.start;let s="";for(let a=0;a<e.items.length;a++){const l=e.items[a];s+=this.listitem(l)}const r=t?"ol":"ul",o=t&&n!==1?' start="'+n+'"':"";return"<"+r+o+`>
`+s+"</"+r+`>
`}listitem(e){let t="";if(e.task){const n=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=n+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" "}):t+=n+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let r=0;r<e.header.length;r++)n+=this.tablecell(e.header[r]);t+=this.tablerow({text:n});let s="";for(let r=0;r<e.rows.length;r++){const o=e.rows[r];n="";for(let a=0;a<o.length;a++)n+=this.tablecell(o[a]);s+=this.tablerow({text:n})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+s+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){const s=this.parser.parseInline(n),r=rE(e);if(r===null)return s;e=r;let o='<a href="'+e+'"';return t&&(o+=' title="'+t+'"'),o+=">"+s+"</a>",o}image({href:e,title:t,text:n}){const s=rE(e);if(s===null)return n;e=s;let r=`<img src="${e}" alt="${n}"`;return t&&(r+=` title="${t}"`),r+=">",r}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}}class vS{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class $r{options;renderer;textRenderer;constructor(e){this.options=e||nl,this.options.renderer=this.options.renderer||new ef,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new vS}static parse(e,t){return new $r(t).parse(e)}static parseInline(e,t){return new $r(t).parseInline(e)}parse(e,t=!0){let n="";for(let s=0;s<e.length;s++){const r=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const a=r,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){n+=l||"";continue}}const o=r;switch(o.type){case"space":{n+=this.renderer.space(o);continue}case"hr":{n+=this.renderer.hr(o);continue}case"heading":{n+=this.renderer.heading(o);continue}case"code":{n+=this.renderer.code(o);continue}case"table":{n+=this.renderer.table(o);continue}case"blockquote":{n+=this.renderer.blockquote(o);continue}case"list":{n+=this.renderer.list(o);continue}case"html":{n+=this.renderer.html(o);continue}case"paragraph":{n+=this.renderer.paragraph(o);continue}case"text":{let a=o,l=this.renderer.text(a);for(;s+1<e.length&&e[s+1].type==="text";)a=e[++s],l+=`
`+this.renderer.text(a);t?n+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l}]}):n+=l;continue}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let s=0;s<e.length;s++){const r=e[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]){const a=this.options.extensions.renderers[r.type].call({parser:this},r);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type)){n+=a||"";continue}}const o=r;switch(o.type){case"escape":{n+=t.text(o);break}case"html":{n+=t.html(o);break}case"link":{n+=t.link(o);break}case"image":{n+=t.image(o);break}case"strong":{n+=t.strong(o);break}case"em":{n+=t.em(o);break}case"codespan":{n+=t.codespan(o);break}case"br":{n+=t.br(o);break}case"del":{n+=t.del(o);break}case"text":{n+=t.text(o);break}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return n}}class vp{options;constructor(e){this.options=e||nl}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}class pN{defaults=gS();options=this.setOptions;parse=this.parseMarkdown(zr.lex,$r.parse);parseInline=this.parseMarkdown(zr.lexInline,$r.parseInline);Parser=$r;Renderer=ef;TextRenderer=vS;Lexer=zr;Tokenizer=ym;Hooks=vp;constructor(...e){this.use(...e)}walkTokens(e,t){let n=[];for(const s of e)switch(n=n.concat(t.call(this,s)),s.type){case"table":{const r=s;for(const o of r.header)n=n.concat(this.walkTokens(o.tokens,t));for(const o of r.rows)for(const a of o)n=n.concat(this.walkTokens(a.tokens,t));break}case"list":{const r=s;n=n.concat(this.walkTokens(r.items,t));break}default:{const r=s;this.defaults.extensions?.childTokens?.[r.type]?this.defaults.extensions.childTokens[r.type].forEach(o=>{const a=r[o].flat(1/0);n=n.concat(this.walkTokens(a,t))}):r.tokens&&(n=n.concat(this.walkTokens(r.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{const s={...n};if(s.async=this.defaults.async||s.async||!1,n.extensions&&(n.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){const o=t.renderers[r.name];o?t.renderers[r.name]=function(...a){let l=r.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:t.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const o=t[r.level];o?o.unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&(r.level==="block"?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:r.level==="inline"&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(t.childTokens[r.name]=r.childTokens)}),s.extensions=t),n.renderer){const r=this.defaults.renderer||new ef(this.defaults);for(const o in n.renderer){if(!(o in r))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;const a=o,l=n.renderer[a],c=r[a];r[a]=(...h)=>{let u=l.apply(r,h);return u===!1&&(u=c.apply(r,h)),u||""}}s.renderer=r}if(n.tokenizer){const r=this.defaults.tokenizer||new ym(this.defaults);for(const o in n.tokenizer){if(!(o in r))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;const a=o,l=n.tokenizer[a],c=r[a];r[a]=(...h)=>{let u=l.apply(r,h);return u===!1&&(u=c.apply(r,h)),u}}s.tokenizer=r}if(n.hooks){const r=this.defaults.hooks||new vp;for(const o in n.hooks){if(!(o in r))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;const a=o,l=n.hooks[a],c=r[a];vp.passThroughHooks.has(o)?r[a]=h=>{if(this.defaults.async)return Promise.resolve(l.call(r,h)).then(f=>c.call(r,f));const u=l.call(r,h);return c.call(r,u)}:r[a]=(...h)=>{let u=l.apply(r,h);return u===!1&&(u=c.apply(r,h)),u}}s.hooks=r}if(n.walkTokens){const r=this.defaults.walkTokens,o=n.walkTokens;s.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),r&&(l=l.concat(r.call(this,a))),l}}this.defaults={...this.defaults,...s}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return zr.lex(e,t??this.defaults)}parser(e,t){return $r.parse(e,t??this.defaults)}parseMarkdown(e,t){return(s,r)=>{const o={...r},a={...this.defaults,...o},l=this.onError(!!a.silent,!!a.async);if(this.defaults.async===!0&&o.async===!1)return l(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof s>"u"||s===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));if(a.hooks&&(a.hooks.options=a),a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(s):s).then(c=>e(c,a)).then(c=>a.hooks?a.hooks.processAllTokens(c):c).then(c=>a.walkTokens?Promise.all(this.walkTokens(c,a.walkTokens)).then(()=>c):c).then(c=>t(c,a)).then(c=>a.hooks?a.hooks.postprocess(c):c).catch(l);try{a.hooks&&(s=a.hooks.preprocess(s));let c=e(s,a);a.hooks&&(c=a.hooks.processAllTokens(c)),a.walkTokens&&this.walkTokens(c,a.walkTokens);let h=t(c,a);return a.hooks&&(h=a.hooks.postprocess(h)),h}catch(c){return l(c)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const s="<p>An error occurred:</p><pre>"+cs(n.message+"",!0)+"</pre>";return t?Promise.resolve(s):s}if(t)return Promise.reject(n);throw n}}}const uc=new pN;function It(i,e){return uc.parse(i,e)}It.options=It.setOptions=function(i){return uc.setOptions(i),It.defaults=uc.defaults,rN(It.defaults),It};It.getDefaults=gS;It.defaults=nl;It.use=function(...i){return uc.use(...i),It.defaults=uc.defaults,rN(It.defaults),It};It.walkTokens=function(i,e){return uc.walkTokens(i,e)};It.parseInline=uc.parseInline;It.Parser=$r;It.parser=$r.parse;It.Renderer=ef;It.TextRenderer=vS;It.Lexer=zr;It.lexer=zr.lex;It.Tokenizer=ym;It.Hooks=vp;It.parse=It;It.options;It.setOptions;It.use;const xte=It.walkTokens;It.parseInline;const SB=It;$r.parse;const km=zr.lex;function kB(i){return JSON.stringify(i,CB)}function Cm(i){let e=JSON.parse(i);return e=X0(e),e}function CB(i,e){return e instanceof RegExp?{$mid:za.Regexp,source:e.source,flags:e.flags}:e}function X0(i,e=0){if(!i||e>200)return i;if(typeof i=="object"){switch(i.$mid){case za.Uri:return Y.revive(i);case za.Regexp:return new RegExp(i.source,i.flags);case za.Date:return new Date(i.source)}if(i instanceof ii||i instanceof Uint8Array)return i;if(Array.isArray(i))for(let t=0;t<i.length;++t)i[t]=X0(i[t],e+1);else for(const t in i)Object.hasOwnProperty.call(i,t)&&(i[t]=X0(i[t],e+1))}return i}class Ve{get event(){return this.emitter.event}constructor(e,t,n){const s=r=>this.emitter.fire(r);this.emitter=new A({onWillAddFirstListener:()=>e.addEventListener(t,s,n),onDidRemoveLastListener:()=>e.removeEventListener(t,s,n)})}dispose(){this.emitter.dispose()}}function EB(i,e={}){const t=yS(e);return t.textContent=i,t}function xB(i,e={}){const t=yS(e);return mN(t,DB(i,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function yS(i){const e=i.inline?"span":"div",t=document.createElement(e);return i.className&&(t.className=i.className),t}class LB{constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){const e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}}var Tt;(function(i){i[i.Invalid=0]="Invalid",i[i.Root=1]="Root",i[i.Text=2]="Text",i[i.Bold=3]="Bold",i[i.Italics=4]="Italics",i[i.Action=5]="Action",i[i.ActionClose=6]="ActionClose",i[i.Code=7]="Code",i[i.NewLine=8]="NewLine"})(Tt||(Tt={}));function mN(i,e,t,n){let s;if(e.type===Tt.Text)s=document.createTextNode(e.content||"");else if(e.type===Tt.Bold)s=document.createElement("b");else if(e.type===Tt.Italics)s=document.createElement("i");else if(e.type===Tt.Code&&n)s=document.createElement("code");else if(e.type===Tt.Action&&t){const r=document.createElement("a");t.disposables.add(Fs(r,"click",o=>{t.callback(String(e.index),o)})),s=r}else e.type===Tt.NewLine?s=document.createElement("br"):e.type===Tt.Root&&(s=i);s&&i!==s&&i.appendChild(s),s&&Array.isArray(e.children)&&e.children.forEach(r=>{mN(s,r,t,n)})}function DB(i,e){const t={type:Tt.Root,children:[]};let n=0,s=t;const r=[],o=new LB(i);for(;!o.eos();){let a=o.next();const l=a==="\\"&&Q0(o.peek(),e)!==Tt.Invalid;if(l&&(a=o.next()),!l&&IB(a,e)&&a===o.peek()){o.advance(),s.type===Tt.Text&&(s=r.pop());const c=Q0(a,e);if(s.type===c||s.type===Tt.Action&&c===Tt.ActionClose)s=r.pop();else{const h={type:c,children:[]};c===Tt.Action&&(h.index=n,n++),s.children.push(h),r.push(s),s=h}}else if(a===`
`)s.type===Tt.Text&&(s=r.pop()),s.children.push({type:Tt.NewLine});else if(s.type!==Tt.Text){const c={type:Tt.Text,content:a};s.children.push(c),r.push(s),s=c}else s.content+=a}return s.type===Tt.Text&&(s=r.pop()),t}function IB(i,e){return Q0(i,e)!==Tt.Invalid}function Q0(i,e){switch(i){case"*":return Tt.Bold;case"_":return Tt.Italics;case"[":return Tt.Action;case"]":return Tt.ActionClose;case"`":return e?Tt.Code:Tt.Invalid;default:return Tt.Invalid}}const TB=new RegExp(`(\\\\)?\\$\\((${ze.iconNameExpression}(?:${ze.iconModifierExpression})?)\\)`,"g");function jl(i){const e=new Array;let t,n=0,s=0;for(;(t=TB.exec(i))!==null;){s=t.index||0,n<s&&e.push(i.substring(n,s)),n=(t.index||0)+t[0].length;const[,r,o]=t;e.push(r?`$(${o})`:AB({id:o}))}return n<i.length&&e.push(i.substring(n)),e}function AB(i){const e=_e("span");return e.classList.add(...ze.asClassNameArray(i)),e}const a_=Object.freeze({image:({href:i,title:e,text:t})=>{let n=[],s=[];return i&&({href:i,dimensions:n}=_9(i),s.push(`src="${pg(i)}"`)),t&&s.push(`alt="${pg(t)}"`),e&&s.push(`title="${pg(e)}"`),n.length&&(s=s.concat(n)),"<img "+s.join(" ")+">"},paragraph({tokens:i}){return`<p>${this.parser.parseInline(i)}</p>`},link({href:i,title:e,tokens:t}){let n=this.parser.parseInline(t);return typeof i!="string"?"":(i===n&&(n=Hb(n)),e=typeof e=="string"?pg(Hb(e)):"",i=Hb(i),i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${i}" title="${e||i}" draggable="false">${n}</a>`)}});function K1(i,e={},t={}){const n=new X;let s=!1;const r=yS(e),o=new pN(...t.markedExtensions??[]),{renderer:a,codeBlocks:l,syncCodeBlocks:c}=RB(o,e,i),h=MB(i);let u;if(e.fillInIncompleteTokens){const p={...nl,...t,renderer:a},m=o.lexer(h,p),_=GB(m);u=o.parser(_,p)}else u=o.parse(h,{...t,renderer:a,async:!1});i.supportThemeIcons&&(u=jl(u).map(m=>typeof m=="string"?m:m.outerHTML).join(""));const g=new DOMParser().parseFromString(J0({isTrusted:i.isTrusted,...e.sanitizerOptions},u),"text/html");if(NB(i,e,g.body),r.innerHTML=J0({isTrusted:i.isTrusted,...e.sanitizerOptions},g.body.innerHTML),l.length>0)Promise.all(l).then(p=>{if(s)return;const m=new Map(p),_=r.querySelectorAll("div[data-code]");for(const v of _){const y=m.get(v.dataset.code??"");y&&Nn(v,y)}e.asyncRenderCallback?.()});else if(c.length>0){const p=new Map(c),m=r.querySelectorAll("div[data-code]");for(const _ of m){const v=p.get(_.dataset.code??"");v&&Nn(_,v)}}if(e.asyncRenderCallback)for(const p of r.getElementsByTagName("img")){const m=n.add(V(p,"load",()=>{m.dispose(),e.asyncRenderCallback()}))}if(e.actionHandler){const p=e.actionHandler.disposables.add(new Ve(r,"click")),m=e.actionHandler.disposables.add(new Ve(r,"auxclick"));e.actionHandler.disposables.add(W.any(p.event,m.event)(_=>{const v=new Ns(ke(r),_);!v.leftButton&&!v.middleButton||cE(i,e,v)})),e.actionHandler.disposables.add(V(r,"keydown",_=>{const v=new at(_);!v.equals(w.Space)&&!v.equals(w.Enter)||cE(i,e,v)}))}return{element:r,dispose:()=>{s=!0,n.dispose()}}}function NB(i,e,t){for(const n of t.querySelectorAll("img, audio, video, source")){const s=n.getAttribute("src");if(s){let r=s;try{i.baseUri&&(r=Z0(Y.from(i.baseUri),r))}catch{}if(n.setAttribute("src",hE(i,r,!0)),e.remoteImageIsAllowed){const o=Y.parse(r);o.scheme!==ge.file&&o.scheme!==ge.data&&!e.remoteImageIsAllowed(o)&&n.replaceWith(_e("",void 0,n.outerHTML))}}}for(const n of t.querySelectorAll("a")){const s=n.getAttribute("href");if(n.setAttribute("href",""),!s||/^data:|javascript:/i.test(s)||/^command:/i.test(s)&&!i.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(s))n.replaceWith(...n.childNodes);else{let r=hE(i,s,!1);i.baseUri&&(r=Z0(Y.from(i.baseUri),s)),n.dataset.href=r}}}function RB(i,e,t){const n=new i.Renderer;n.image=a_.image,n.link=a_.link,n.paragraph=a_.paragraph;const s=[],r=[];return e.codeBlockRendererSync?n.code=({text:o,lang:a,raw:l})=>{const c=nE.nextId(),h=e.codeBlockRendererSync(uE(a),o,l);return r.push([c,h]),`<div class="code" data-code="${c}">${Gr(o)}</div>`}:e.codeBlockRenderer&&(n.code=({text:o,lang:a})=>{const l=nE.nextId(),c=e.codeBlockRenderer(uE(a),o);return s.push(c.then(h=>[l,h])),`<div class="code" data-code="${l}">${Gr(o)}</div>`}),t.supportHtml||(n.html=({text:o})=>e.sanitizerOptions?.replaceWithPlaintext?Gr(o):(t.isTrusted?o.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?o:""),{renderer:n,codeBlocks:s,syncCodeBlocks:r}}function MB(i){let e=i.value;return e.length>1e5&&(e=`${e.substr(0,1e5)}…`),i.supportThemeIcons&&(e=_M(e)),e}function cE(i,e,t){const n=t.target.closest("a[data-href]");if(Ut(n))try{let s=n.dataset.href;s&&(i.baseUri&&(s=Z0(Y.from(i.baseUri),s)),e.actionHandler.callback(s,t))}catch(s){pt(s)}finally{t.preventDefault()}}function OB(i,e){let t;try{t=Cm(decodeURIComponent(e))}catch{}return t?(t=zy(t,n=>{if(i.uris&&i.uris[n])return Y.revive(i.uris[n])}),encodeURIComponent(JSON.stringify(t))):e}function hE(i,e,t){const n=i.uris&&i.uris[e];let s=Y.revive(n);return t?e.startsWith(ge.data+":")?e:(s||(s=Y.parse(e)),Oy.uriToBrowserUri(s).toString(!0)):!s||Y.parse(e).toString()===s.toString()?e:(s.query&&(s=s.with({query:OB(i,s.query)})),s.toString())}function uE(i){if(!i)return"";const e=i.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:i}function Z0(i,e){return/^\w[\w\d+.-]*:/.test(e)?e:i.path.endsWith("/")?EC(i,e).toString():EC(Py(i),e).toString()}const FB=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function J0(i,e){const{config:t,allowedSchemes:n}=BB(i),s=new X;s.add(dE("uponSanitizeAttribute",(r,o)=>{if(o.attrName==="style"||o.attrName==="class"){if(r.tagName==="SPAN"){if(o.attrName==="style"){o.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z0-9]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z0-9]+)+\));)?(border-radius:[0-9]+px;)?$/.test(o.attrValue);return}else if(o.attrName==="class"){o.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(o.attrValue);return}}o.keepAttr=!1;return}else if(r.tagName==="INPUT"&&r.attributes.getNamedItem("type")?.value==="checkbox"){if(o.attrName==="type"&&o.attrValue==="checkbox"||o.attrName==="disabled"||o.attrName==="checked"){o.keepAttr=!0;return}o.keepAttr=!1}})),s.add(dE("uponSanitizeElement",(r,o)=>{if(o.tagName==="input"&&(r.attributes.getNamedItem("type")?.value==="checkbox"?r.setAttribute("disabled",""):i.replaceWithPlaintext||r.remove()),i.replaceWithPlaintext&&!o.allowedTags[o.tagName]&&o.tagName!=="body"&&r.parentElement){let a,l;if(o.tagName==="#comment")a=`<!--${r.textContent}-->`;else{const f=FB.includes(o.tagName),g=r.attributes.length?" "+Array.from(r.attributes).map(p=>`${p.name}="${p.value}"`).join(" "):"";a=`<${o.tagName}${g}>`,f||(l=`</${o.tagName}>`)}const c=document.createDocumentFragment(),h=r.parentElement.ownerDocument.createTextNode(a);c.appendChild(h);const u=l?r.parentElement.ownerDocument.createTextNode(l):void 0;for(;r.firstChild;)c.appendChild(r.firstChild);u&&c.appendChild(u),r.nodeType===Node.COMMENT_NODE?r.parentElement.insertBefore(c,r):r.parentElement.replaceChild(c,r)}})),s.add(y6(n));try{return ac.sanitize(e,{...t,RETURN_TRUSTED_TYPE:!0})}finally{s.dispose()}}const PB=["align","autoplay","alt","checked","class","colspan","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","rowspan","src","style","target","title","type","width","start"];function BB(i){const e=[ge.http,ge.https,ge.mailto,ge.data,ge.file,ge.vscodeFileResource,ge.vscodeRemote,ge.vscodeRemoteResource,ge.vscodeNotebookCell];return i.isTrusted&&e.push(ge.command),{config:{ALLOWED_TAGS:i.allowedTags??[...S6],ALLOWED_ATTR:PB,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}function SS(i){return cr(i)?WB(i):i}function WB(i,e){let t=i.value??"";t.length>1e5&&(t=`${t.substr(0,1e5)}…`);const n=SB(t,{async:!1,renderer:VB.value});return J0({isTrusted:!1},n).toString().replace(/&(#\d+|[a-zA-Z]+);/g,s=>UB.get(s)??s).trim()}const UB=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);function HB(){const i=new ef;return i.code=({text:e})=>Gr(e),i.blockquote=({text:e})=>e+`
`,i.html=e=>"",i.heading=function({tokens:e}){return this.parser.parseInline(e)+`
`},i.hr=()=>"",i.list=function({items:e}){return e.map(t=>this.listitem(t)).join(`
`)+`
`},i.listitem=({text:e})=>e+`
`,i.paragraph=function({tokens:e}){return this.parser.parseInline(e)+`
`},i.table=function({header:e,rows:t}){return e.map(n=>this.tablecell(n)).join(" ")+`
`+t.map(n=>n.map(s=>this.tablecell(s)).join(" ")).join(`
`)+`
`},i.tablerow=({text:e})=>e,i.tablecell=function({tokens:e}){return this.parser.parseInline(e)},i.strong=({text:e})=>e,i.em=({text:e})=>e,i.codespan=({text:e})=>Gr(e),i.br=e=>`
`,i.del=({text:e})=>e,i.image=e=>"",i.text=({text:e})=>e,i.link=({text:e})=>e,i}const VB=new Fi(HB);function Em(i){let e="";return i.forEach(t=>{e+=t.raw}),e}function bN(i){if(i.tokens)for(let e=i.tokens.length-1;e>=0;e--){const t=i.tokens[e];if(t.type==="text"){const n=t.raw.split(`
`),s=n[n.length-1];if(s.includes("`"))return YB(i);if(s.includes("**"))return tW(i);if(s.match(/\*\w/))return XB(i);if(s.match(/(^|\s)__\w/))return iW(i);if(s.match(/(^|\s)_\w/))return QB(i);if(zB(s)||$B(s)&&i.tokens.slice(0,e).some(r=>r.type==="text"&&r.raw.match(/\[[^\]]*$/))){const r=i.tokens.slice(e+1);return r[0]?.type==="link"&&r[1]?.type==="text"&&r[1].raw.match(/^ *"[^"]*$/)||s.match(/^[^"]* +"[^"]*$/)?JB(i):ZB(i)}else if(s.match(/(^|\s)\[\w*/))return eW(i)}}}function zB(i){return!!i.match(/(^|\s)\[.*\]\(\w*/)}function $B(i){return!!i.match(/^[^\[]*\]\([^\)]*$/)}function qB(i){const e=i.items[i.items.length-1],t=e.tokens?e.tokens[e.tokens.length-1]:void 0,n=c=>{const u=c.items.at(-1)?.tokens.at(-1);return u?.type==="heading"||u?.type==="list"&&n(u)};let s;if(t?.type==="text"&&!("inRawBlock"in e))s=bN(t);else if(n(i)){const c=km(i.raw.trim()+" &nbsp;")[0];return c.type!=="list"?void 0:c}if(!s||s.type!=="paragraph")return;const r=Em(i.items.slice(0,-1)),o=e.raw.match(/^(\s*(-|\d+\.|\*) +)/)?.[0];if(!o)return;const a=o+Em(e.tokens.slice(0,-1))+s.raw,l=km(r+a)[0];if(l.type==="list")return l}const KB=3;function GB(i){for(let e=0;e<KB;e++){const t=jB(i);if(t)i=t;else break}return i}function jB(i){let e,t;for(e=0;e<i.length;e++){const n=i[e];if(n.type==="paragraph"&&n.raw.match(/(\n|^)\|/)){t=nW(i.slice(e));break}if(e===i.length-1&&n.type==="list"){const s=qB(n);if(s){t=[s];break}}if(e===i.length-1&&n.type==="paragraph"){const s=bN(n);if(s){t=[s];break}}}if(t){const n=[...i.slice(0,e),...t];return n.links=i.links,n}return null}function YB(i){return sl(i,"`")}function XB(i){return sl(i,"*")}function QB(i){return sl(i,"_")}function ZB(i){return sl(i,")")}function JB(i){return sl(i,'")')}function eW(i){return sl(i,"](https://microsoft.com)")}function tW(i){return sl(i,"**")}function iW(i){return sl(i,"__")}function sl(i,e){const t=Em(Array.isArray(i)?i:[i]);return km(t+e)[0]}function nW(i){const e=Em(i),t=e.split(`
`);let n,s=!1;for(let r=0;r<t.length;r++){const o=t[r].trim();if(typeof n>"u"&&o.match(/^\s*\|/)){const a=o.match(/(\|[^\|]+)(?=\||$)/g);a&&(n=a.length)}else if(typeof n=="number")if(o.match(/^\s*\|/)){if(r!==t.length-1)return;s=!0}else return}if(typeof n=="number"&&n>0){const r=s?t.slice(0,-1).join(`
`):e,o=!!r.match(/\|\s*$/),a=r+(o?"":"|")+`
|${" --- |".repeat(n)}`;return km(a)}}function dE(i,e){return ac.addHook(i,e),fe(()=>ac.removeHook(i))}function _N(i,e){const t=globalThis.MonacoEnvironment;if(t?.createTrustedTypesPolicy)try{return t.createTrustedTypesPolicy(i,e)}catch(n){pt(n);return}try{return globalThis.trustedTypes?.createPolicy(i,e)}catch(n){pt(n);return}}function Lte(i){return i&&typeof i=="object"&&(!i.overrideIdentifier||typeof i.overrideIdentifier=="string")&&(!i.resource||i.resource instanceof Y)}function Dte(i){return i&&typeof i=="object"&&(!i.overrideIdentifiers||Array.isArray(i.overrideIdentifiers))&&!i.overrideIdentifier&&(!i.resource||i.resource instanceof Y)}var Ds;(function(i){i[i.APPLICATION=1]="APPLICATION",i[i.USER=2]="USER",i[i.USER_LOCAL=3]="USER_LOCAL",i[i.USER_REMOTE=4]="USER_REMOTE",i[i.WORKSPACE=5]="WORKSPACE",i[i.WORKSPACE_FOLDER=6]="WORKSPACE_FOLDER",i[i.DEFAULT=7]="DEFAULT",i[i.MEMORY=8]="MEMORY"})(Ds||(Ds={}));function Ite(i){switch(i){case Ds.APPLICATION:return"APPLICATION";case Ds.USER:return"USER";case Ds.USER_LOCAL:return"USER_LOCAL";case Ds.USER_REMOTE:return"USER_REMOTE";case Ds.WORKSPACE:return"WORKSPACE";case Ds.WORKSPACE_FOLDER:return"WORKSPACE_FOLDER";case Ds.DEFAULT:return"DEFAULT";case Ds.MEMORY:return"MEMORY"}}function Tte(i){return i.applicationValue!==void 0||i.userValue!==void 0||i.userLocalValue!==void 0||i.userRemoteValue!==void 0||i.workspaceValue!==void 0||i.workspaceFolderValue!==void 0}function ew(i,e){const t=Object.create(null);for(const n in i)wN(t,n,i[n],e);return t}function wN(i,e,t,n){const s=e.split("."),r=s.pop();let o=i;for(let a=0;a<s.length;a++){const l=s[a];let c=o[l];switch(typeof c){case"undefined":c=o[l]=Object.create(null);break;case"object":if(c===null){n(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is null`);return}break;default:n(`Ignoring ${e} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(c)}`);return}o=c}if(typeof o=="object"&&o!==null)try{o[r]=t}catch{n(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(o)}`)}else n(`Ignoring ${e} as ${s.join(".")} is ${JSON.stringify(o)}`)}function sW(i,e){const t=e.split(".");vN(i,t)}function vN(i,e){if(!i)return;const t=e.shift();if(e.length===0){delete i[t];return}if(Object.keys(i).indexOf(t)!==-1){const n=i[t];typeof n=="object"&&!Array.isArray(n)&&(vN(n,e),Object.keys(n).length===0&&delete i[t])}}function xm(i,e,t){function n(o,a){let l=o;for(const c of a){if(typeof l!="object"||l===null)return;l=l[c]}return l}const s=e.split("."),r=n(i,s);return typeof r>"u"?t:r}function rW(i){return i.replace(/[\[\]]/g,"")}var fE;(function(i){i.Multiline="multilineText",i.Singleline="singlelineText"})(fE||(fE={}));const Ps={Configuration:"base.contributions.configuration"};var gt;(function(i){i[i.APPLICATION=1]="APPLICATION",i[i.MACHINE=2]="MACHINE",i[i.APPLICATION_MACHINE=3]="APPLICATION_MACHINE",i[i.WINDOW=4]="WINDOW",i[i.RESOURCE=5]="RESOURCE",i[i.LANGUAGE_OVERRIDABLE=6]="LANGUAGE_OVERRIDABLE",i[i.MACHINE_OVERRIDABLE=7]="MACHINE_OVERRIDABLE"})(gt||(gt={}));const Tg={properties:{},patternProperties:{}},Ag={properties:{},patternProperties:{}},Ng={properties:{},patternProperties:{}},Rg={properties:{},patternProperties:{}},Mg={properties:{},patternProperties:{}},Og={properties:{},patternProperties:{}},Au={properties:{},patternProperties:{}},hl="vscode://schemas/settings/resourceLanguage",Ate="vscode://schemas/settings/configurationDefaults",Fg=wt.as(Pf.JSONContribution);class oW extends ${constructor(){super(),this.registeredConfigurationDefaults=[],this.overrideIdentifiers=new Set,this._onDidSchemaChange=this._register(new A),this.onDidSchemaChange=this._onDidSchemaChange.event,this._onDidUpdateConfiguration=this._register(new A),this.onDidUpdateConfiguration=this._onDidUpdateConfiguration.event,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:d(1713,"Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},Fg.registerSchema(hl,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){return this.registerConfigurations([e],t),e}registerConfigurations(e,t=!0){const n=new Set;this.doRegisterConfigurations(e,t,n),Fg.registerSchema(hl,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}deregisterConfigurations(e){const t=new Set;this.doDeregisterConfigurations(e,t),Fg.registerSchema(hl,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t})}updateConfigurations({add:e,remove:t}){const n=new Set;this.doDeregisterConfigurations(t,n),this.doRegisterConfigurations(e,!1,n),Fg.registerSchema(hl,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){this.registeredConfigurationDefaults.push(...e);const n=[];for(const{overrides:s,source:r}of e)for(const o in s){t.add(o);const a=this.configurationDefaultsOverrides.get(o)??this.configurationDefaultsOverrides.set(o,{configurationDefaultOverrides:[]}).get(o),l=s[o];if(a.configurationDefaultOverrides.push({value:l,source:r}),qo.test(o)){const c=this.mergeDefaultConfigurationsForOverrideIdentifier(o,l,r,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c,this.updateDefaultOverrideProperty(o,c,r),n.push(...tf(o))}else{const c=this.mergeDefaultConfigurationsForConfigurationProperty(o,l,r,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c;const h=this.configurationProperties[o];h&&(this.updatePropertyDefaultValue(o,h),this.updateSchema(o,h))}}this.doRegisterOverrideIdentifiers(n)}deregisterDefaultConfigurations(e){const t=new Set;this.doDeregisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doDeregisterDefaultConfigurations(e,t){for(const n of e){const s=this.registeredConfigurationDefaults.indexOf(n);s!==-1&&this.registeredConfigurationDefaults.splice(s,1)}for(const{overrides:n,source:s}of e)for(const r in n){const o=this.configurationDefaultsOverrides.get(r);if(!o)continue;const a=o.configurationDefaultOverrides.findIndex(l=>s?l.source?.id===s.id:l.value===n[r]);if(a!==-1){if(o.configurationDefaultOverrides.splice(a,1),o.configurationDefaultOverrides.length===0&&this.configurationDefaultsOverrides.delete(r),qo.test(r)){let l;for(const c of o.configurationDefaultOverrides)l=this.mergeDefaultConfigurationsForOverrideIdentifier(r,c.value,c.source,l);l&&!dy(l.value)?(o.configurationDefaultOverrideValue=l,this.updateDefaultOverrideProperty(r,l,s)):(this.configurationDefaultsOverrides.delete(r),delete this.configurationProperties[r],delete this.defaultLanguageConfigurationOverridesNode.properties[r])}else{let l;for(const h of o.configurationDefaultOverrides)l=this.mergeDefaultConfigurationsForConfigurationProperty(r,h.value,h.source,l);o.configurationDefaultOverrideValue=l;const c=this.configurationProperties[r];c&&(this.updatePropertyDefaultValue(r,c),this.updateSchema(r,c))}t.add(r)}}this.updateOverridePropertyPatternKey()}updateDefaultOverrideProperty(e,t,n){const s={type:"object",default:t.value,description:d(1714,"Configure settings to be overridden for the {0} language.",rW(e)),$ref:hl,defaultDefaultValue:t.value,source:n,defaultValueSource:n};this.configurationProperties[e]=s,this.defaultLanguageConfigurationOverridesNode.properties[e]=s}mergeDefaultConfigurationsForOverrideIdentifier(e,t,n,s){const r=s?.value||{},o=s?.source??new Map;if(!(o instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const a of Object.keys(t)){const l=t[a];if(xi(l)&&(ih(r[a])||xi(r[a]))){if(r[a]={...r[a]??{},...l},n)for(const h in l)o.set(`${a}.${h}`,n)}else r[a]=l,n?o.set(a,n):o.delete(a)}return{value:r,source:o}}mergeDefaultConfigurationsForConfigurationProperty(e,t,n,s){const r=this.configurationProperties[e],o=s?.value??r?.defaultDefaultValue;let a=n;if(xi(t)&&(r!==void 0&&r.type==="object"||r===void 0&&(ih(o)||xi(o)))){if(a=s?.source??new Map,!(a instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)n&&a.set(`${e}.${c}`,n);t={...xi(o)?o:{},...t}}return{value:t,source:a}}deltaConfiguration(e){let t=!1;const n=new Set;e.removedDefaults&&(this.doDeregisterDefaultConfigurations(e.removedDefaults,n),t=!0),e.addedDefaults&&(this.doRegisterDefaultConfigurations(e.addedDefaults,n),t=!0),e.removedConfigurations&&this.doDeregisterConfigurations(e.removedConfigurations,n),e.addedConfigurations&&this.doRegisterConfigurations(e.addedConfigurations,!1,n),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this._onDidSchemaChange.fire()}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,n){e.forEach(s=>{this.validateAndRegisterProperties(s,t,s.extensionInfo,s.restrictedProperties,void 0,n),this.configurationContributors.push(s),this.registerJSONConfiguration(s)})}doDeregisterConfigurations(e,t){const n=s=>{if(s.properties)for(const r in s.properties){t.add(r);const o=this.configurationProperties[r];o?.policy?.name&&this.policyConfigurations.delete(o.policy.name),delete this.configurationProperties[r],this.removeFromSchema(r,s.properties[r])}s.allOf?.forEach(r=>n(r))};for(const s of e){n(s);const r=this.configurationContributors.indexOf(s);r!==-1&&this.configurationContributors.splice(r,1)}}validateAndRegisterProperties(e,t=!0,n,s,r=gt.WINDOW,o){r=wn(e.scope)?r:e.scope;const a=e.properties;if(a)for(const c in a){const h=a[c];if(t&&lW(c,h)){delete a[c];continue}h.source=n,h.defaultDefaultValue=a[c].default,this.updatePropertyDefaultValue(c,h),qo.test(c)?h.scope=void 0:(h.scope=wn(h.scope)?r:h.scope,h.restricted=wn(h.restricted)?!!s?.includes(c):h.restricted);const u=a[c].hasOwnProperty("included")&&!a[c].included,f=a[c].policy?.name;u?(this.excludedConfigurationProperties[c]=a[c],f&&(this.policyConfigurations.set(f,c),o.add(c)),delete a[c]):(o.add(c),f&&this.policyConfigurations.set(f,c),this.configurationProperties[c]=a[c],!a[c].deprecationMessage&&a[c].markdownDeprecationMessage&&(a[c].deprecationMessage=a[c].markdownDeprecationMessage))}const l=e.allOf;if(l)for(const c of l)this.validateAndRegisterProperties(c,t,n,s,r,o)}getConfigurations(){return this.configurationContributors}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}getRegisteredDefaultConfigurations(){return[...this.registeredConfigurationDefaults]}getConfigurationDefaultsOverrides(){const e=new Map;for(const[t,n]of this.configurationDefaultsOverrides)n.configurationDefaultOverrideValue&&e.set(t,n.configurationDefaultOverrideValue);return e}registerJSONConfiguration(e){const t=n=>{const s=n.properties;if(s)for(const o in s)this.updateSchema(o,s[o]);n.allOf?.forEach(t)};t(e)}updateSchema(e,t){switch(Tg.properties[e]=t,t.scope){case gt.APPLICATION:Ag.properties[e]=t;break;case gt.MACHINE:Rg.properties[e]=t;break;case gt.APPLICATION_MACHINE:Ng.properties[e]=t;break;case gt.MACHINE_OVERRIDABLE:Mg.properties[e]=t;break;case gt.WINDOW:Og.properties[e]=t;break;case gt.RESOURCE:Au.properties[e]=t;break;case gt.LANGUAGE_OVERRIDABLE:Au.properties[e]=t,this.resourceLanguageSettingsSchema.properties[e]=t;break}}removeFromSchema(e,t){switch(delete Tg.properties[e],t.scope){case gt.APPLICATION:delete Ag.properties[e];break;case gt.MACHINE:delete Rg.properties[e];break;case gt.APPLICATION_MACHINE:delete Ng.properties[e];break;case gt.MACHINE_OVERRIDABLE:delete Mg.properties[e];break;case gt.WINDOW:delete Og.properties[e];break;case gt.RESOURCE:case gt.LANGUAGE_OVERRIDABLE:delete Au.properties[e],delete this.resourceLanguageSettingsSchema.properties[e];break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,n={type:"object",description:d(1715,"Configure editor settings to be overridden for a language."),errorMessage:d(1716,"This setting does not support per-language configuration."),$ref:hl};this.updatePropertyDefaultValue(t,n),Tg.properties[t]=n,Ag.properties[t]=n,Ng.properties[t]=n,Rg.properties[t]=n,Mg.properties[t]=n,Og.properties[t]=n,Au.properties[t]=n}}registerOverridePropertyPatternKey(){const e={type:"object",description:d(1715,"Configure editor settings to be overridden for a language."),errorMessage:d(1716,"This setting does not support per-language configuration."),$ref:hl};Tg.patternProperties[aa]=e,Ag.patternProperties[aa]=e,Ng.patternProperties[aa]=e,Rg.patternProperties[aa]=e,Mg.patternProperties[aa]=e,Og.patternProperties[aa]=e,Au.patternProperties[aa]=e,this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const n=this.configurationDefaultsOverrides.get(e)?.configurationDefaultOverrideValue;let s,r;n&&(!t.disallowConfigurationDefault||!n.source)&&(s=n.value,r=n.source),ih(s)&&(s=t.defaultDefaultValue,r=void 0),ih(s)&&(s=aW(t.type)),t.default=s,t.defaultValueSource=r}}const yN="\\[([^\\]]+)\\]",gE=new RegExp(yN,"g"),aa=`^(${yN})+$`,qo=new RegExp(aa);function tf(i){const e=[];if(qo.test(i)){let t=gE.exec(i);for(;t?.length;){const n=t[1].trim();n&&e.push(n),t=gE.exec(i)}}return Mo(e)}function Nte(i){return i.reduce((e,t)=>`${e}[${t}]`,"")}function aW(i){switch(Array.isArray(i)?i[0]:i){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const fd=new oW;wt.add(Ps.Configuration,fd);function lW(i,e){return i.trim()?qo.test(i)?d(1718,"Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",i):fd.getConfigurationProperties()[i]!==void 0?d(1719,"Cannot register '{0}'. This property is already registered.",i):e.policy?.name&&fd.getPolicyConfigurations().get(e.policy?.name)!==void 0?d(1720,"Cannot register '{0}'. The associated policy {1} is already registered with {2}.",i,e.policy?.name,fd.getPolicyConfigurations().get(e.policy?.name)):null:d(1717,"Cannot register an empty property")}function Rte(){const i=[],e=fd.getConfigurationProperties();for(const t of Object.keys(e))i.push([t,e[t].scope]);return i.push(["launch",gt.RESOURCE]),i.push(["task",gt.RESOURCE]),i}function cW(i){const e={};for(const t of i){const n=t.properties;if(xi(n))for(const s in n)e[s]=n[s];t.allOf&&Object.assign(e,cW(t.allOf))}return e}function Mte(i){switch(i){case"application":return gt.APPLICATION;case"machine":return gt.MACHINE;case"resource":return gt.RESOURCE;case"machine-overridable":return gt.MACHINE_OVERRIDABLE;case"language-overridable":return gt.LANGUAGE_OVERRIDABLE;default:return gt.WINDOW}}const hW={ModesRegistry:"editor.modesRegistry"};class uW extends ${constructor(){super(),this._onDidChangeLanguages=this._register(new A),this.onDidChangeLanguages=this._onDidChangeLanguages.event,this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}}const gd=new uW;wt.add(hW.ModesRegistry,gd);const qa="plaintext",dW=".txt";gd.registerLanguage({id:qa,extensions:[dW],aliases:[d(821,"Plain Text"),"text"],mimetypes:[vl.text]});wt.as(Ps.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1},"[go]":{"editor.insertSpaces":!1},"[makefile]":{"editor.insertSpaces":!1},"[shellscript]":{"files.eol":`
`},"[yaml]":{"editor.insertSpaces":!0,"editor.tabSize":2}}}]);class me{static fromTo(e,t){return new me(e,t)}static addRange(e,t){let n=0;for(;n<t.length&&t[n].endExclusive<e.start;)n++;let s=n;for(;s<t.length&&t[s].start<=e.endExclusive;)s++;if(n===s)t.splice(n,0,e);else{const r=Math.min(e.start,t[n].start),o=Math.max(e.endExclusive,t[s-1].endExclusive);t.splice(n,s-n,new me(r,o))}}static tryCreate(e,t){if(!(e>t))return new me(e,t)}static ofLength(e){return new me(0,e)}static ofStartAndLength(e,t){return new me(e,e+t)}static emptyAt(e){return new me(e,e)}constructor(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new De(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new me(this.start+e,this.endExclusive+e)}deltaStart(e){return new me(this.start+e,this.endExclusive)}deltaEnd(e){return new me(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new me(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){const t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(t<=n)return new me(t,n)}intersectionLength(e){const t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,n-t)}intersects(e){const t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return t<n}intersectsOrTouches(e){const t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return t<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new De(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new De(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){const t=[];for(let n=this.start;n<this.endExclusive;n++)t.push(e(n));return t}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}joinRightTouching(e){if(this.endExclusive!==e.start)throw new De(`Invalid join: ${this.toString()} and ${e.toString()}`);return new me(this.start,e.endExclusive)}}class SN{constructor(){this._sortedRanges=[]}get ranges(){return[...this._sortedRanges]}addRange(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<e.start;)t++;let n=t;for(;n<this._sortedRanges.length&&this._sortedRanges[n].start<=e.endExclusive;)n++;if(t===n)this._sortedRanges.splice(t,0,e);else{const s=Math.min(e.start,this._sortedRanges[t].start),r=Math.max(e.endExclusive,this._sortedRanges[n-1].endExclusive);this._sortedRanges.splice(t,n-t,new me(s,r))}}toString(){return this._sortedRanges.map(e=>e.toString()).join(", ")}intersectsStrict(e){let t=0;for(;t<this._sortedRanges.length&&this._sortedRanges[t].endExclusive<=e.start;)t++;return t<this._sortedRanges.length&&this._sortedRanges[t].start<e.endExclusive}intersectWithRange(e){const t=new SN;for(const n of this._sortedRanges){const s=n.intersect(e);s&&t.addRange(s)}return t}intersectWithRangeLength(e){return this.intersectWithRange(e).length}get length(){return this._sortedRanges.reduce((e,t)=>e+t.length,0)}}class uh{static fromLineTokens(e){const t=[];for(let n=0;n<e.getCount();n++)t.push(new tw(e.getEndOffset(n)-e.getStartOffset(n),e.getMetadata(n)));return uh.create(t)}static create(e){return new uh(e)}constructor(e){this._tokenInfo=e}toLineTokens(e,t){return bi.createFromTextAndMetadata(this.map((n,s)=>({text:n.substring(e),metadata:s.metadata})),t)}forEach(e){let t=0;for(const n of this._tokenInfo){const s=new me(t,t+n.length);e(s,n),t+=n.length}}map(e){const t=[];let n=0;for(const s of this._tokenInfo){const r=new me(n,n+s.length);t.push(e(r,s)),n+=s.length}return t}slice(e){const t=[];let n=0;for(const s of this._tokenInfo){const r=n,o=r+s.length;if(o>e.start){if(r>=e.endExclusive)break;const a=Math.max(0,e.start-r),l=Math.max(0,o-e.endExclusive);t.push(new tw(s.length-a-l,s.metadata))}n+=s.length}return uh.create(t)}append(e){const t=this._tokenInfo.concat(e._tokenInfo);return uh.create(t)}}class tw{constructor(e,t){this.length=e,this.metadata=t}}class fW{constructor(){this._tokens=[]}add(e,t){this._tokens.push(new tw(e,t))}build(){return uh.create(this._tokens)}}class bi{static createEmpty(e,t){const n=bi.defaultTokenMetadata,s=new Uint32Array(2);return s[0]=e.length,s[1]=n,new bi(s,e,t)}static createFromTextAndMetadata(e,t){let n=0,s="";const r=new Array;for(const{text:o,metadata:a}of e)r.push(n+o.length,a),n+=o.length,s+=o;return new bi(new Uint32Array(r),s,t)}static convertToEndOffset(e,t){const s=(e.length>>>1)-1;for(let r=0;r<s;r++)e[r<<1]=e[r+1<<1];e[s<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,s=(e.length>>>1)-1;for(;n<s;){const r=n+Math.floor((s-n)/2),o=e[r<<1];if(o===t)return r+1;o<t?n=r+1:o>t&&(s=r)}return n}static{this.defaultTokenMetadata=(ht.None<<Ce.FONT_STYLE_OFFSET|Ws.DefaultForeground<<Ce.FOREGROUND_OFFSET|Ws.DefaultBackground<<Ce.BACKGROUND_OFFSET)>>>0}constructor(e,t,n){this._lineTokensBrand=void 0,(e.length>1?e[e.length-2]:0)!==t.length&&pt(new Error("Token length and text length do not match!")),this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=n}getTextLength(){return this._text.length}equals(e){return e instanceof bi?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;const s=t<<1,r=s+(n<<1);for(let o=s;o<r;o++)if(this._tokens[o]!==e._tokens[o])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){const t=this._tokens[(e<<1)+1],n=er.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){const t=this._tokens[(e<<1)+1];return er.getTokenType(t)}getForeground(e){const t=this._tokens[(e<<1)+1];return er.getForeground(t)}getClassName(e){const t=this._tokens[(e<<1)+1];return er.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[(e<<1)+1];return er.getInlineStyleFromMetadata(n,t)}getPresentation(e){const t=this._tokens[(e<<1)+1];return er.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return bi.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new kS(this,e,t,n)}sliceZeroCopy(e){return this.sliceAndInflate(e.start,e.endExclusive,0)}withInserted(e){if(e.length===0)return this;let t=0,n=0,s="";const r=new Array;let o=0;for(;;){const a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){s+=this._text.substring(o,a);const c=this._tokens[(t<<1)+1];r.push(s.length,c),t++,o=a}else if(l){if(l.offset>o){s+=this._text.substring(o,l.offset);const c=this._tokens[(t<<1)+1];r.push(s.length,c),o=l.offset}s+=l.text,r.push(s.length,l.tokenMetadata),n++}else break}return new bi(new Uint32Array(r),s,this.languageIdCodec)}getTokensInRange(e){const t=new fW,n=this.findTokenIndexAtOffset(e.start),s=this.findTokenIndexAtOffset(e.endExclusive);for(let r=n;r<=s;r++){const a=new me(this.getStartOffset(r),this.getEndOffset(r)).intersectionLength(e);a>0&&t.add(a,this.getMetadata(r))}return t.build()}getTokenText(e){const t=this.getStartOffset(e),n=this.getEndOffset(e);return this._text.substring(t,n)}forEach(e){const t=this.getCount();for(let n=0;n<t;n++)e(n)}toString(){let e="";return this.forEach(t=>{e+=`[${this.getTokenText(t)}]{${this.getClassName(t)}}`}),e}}class kS{constructor(e,t,n,s){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=s,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let r=this._firstTokenIndex,o=e.getCount();r<o&&!(e.getStartOffset(r)>=n);r++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof kS?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){const t=this._firstTokenIndex+e,n=this._source.getStartOffset(t),s=this._source.getEndOffset(t);let r=this._source.getTokenText(t);return n<this._startOffset&&(r=r.substring(this._startOffset-n)),s>this._endOffset&&(r=r.substring(0,r.length-(s-this._endOffset))),r}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}}function Ote(i,e){const t=e.lineNumber;if(!i.tokenization.isCheapToTokenize(t))return;i.tokenization.forceTokenization(t);const n=i.tokenization.getLineTokens(t),s=n.findTokenIndexAtOffset(e.column-1);return n.getStandardTokenType(s)}class jh{static insert(e,t){return{range:new H(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}}let gW=class{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new A,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),fe(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){this._factories.get(e)?.dispose();const n=new pW(this,e,t);return this._factories.set(e,n),fe(()=>{const s=this._factories.get(e);!s||s!==n||(this._factories.delete(e),s.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const n=this._factories.get(e);return!n||n.isResolved?null:(await n.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const n=this._factories.get(e);return!!(!n||n.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>Ws.DefaultBackground?this._colorMap[Ws.DefaultBackground]:null}};class pW extends ${get isResolved(){return this._isResolved}constructor(e,t,n){super(),this._registry=e,this._languageId=t,this._factory=n,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}}let kN=class{constructor(e,t,n){this.offset=e,this.type=t,this.language=n,this._tokenBrand=void 0}toString(){return"("+this.offset+", "+this.type+")"}};class mW{constructor(e,t){this.tokens=e,this.endState=t,this._tokenizationResultBrand=void 0}}class bW{constructor(e,t){this.tokens=e,this.endState=t,this._encodedTokenizationResultBrand=void 0}}var pE;(function(i){i[i.Increase=0]="Increase",i[i.Decrease=1]="Decrease"})(pE||(pE={}));var q;(function(i){i[i.Method=0]="Method",i[i.Function=1]="Function",i[i.Constructor=2]="Constructor",i[i.Field=3]="Field",i[i.Variable=4]="Variable",i[i.Class=5]="Class",i[i.Struct=6]="Struct",i[i.Interface=7]="Interface",i[i.Module=8]="Module",i[i.Property=9]="Property",i[i.Event=10]="Event",i[i.Operator=11]="Operator",i[i.Unit=12]="Unit",i[i.Value=13]="Value",i[i.Constant=14]="Constant",i[i.Enum=15]="Enum",i[i.EnumMember=16]="EnumMember",i[i.Keyword=17]="Keyword",i[i.Text=18]="Text",i[i.Color=19]="Color",i[i.File=20]="File",i[i.Reference=21]="Reference",i[i.Customcolor=22]="Customcolor",i[i.Folder=23]="Folder",i[i.TypeParameter=24]="TypeParameter",i[i.User=25]="User",i[i.Issue=26]="Issue",i[i.Tool=27]="Tool",i[i.Snippet=28]="Snippet"})(q||(q={}));var mE;(function(i){const e=new Map;e.set(q.Method,re.symbolMethod),e.set(q.Function,re.symbolFunction),e.set(q.Constructor,re.symbolConstructor),e.set(q.Field,re.symbolField),e.set(q.Variable,re.symbolVariable),e.set(q.Class,re.symbolClass),e.set(q.Struct,re.symbolStruct),e.set(q.Interface,re.symbolInterface),e.set(q.Module,re.symbolModule),e.set(q.Property,re.symbolProperty),e.set(q.Event,re.symbolEvent),e.set(q.Operator,re.symbolOperator),e.set(q.Unit,re.symbolUnit),e.set(q.Value,re.symbolValue),e.set(q.Enum,re.symbolEnum),e.set(q.Constant,re.symbolConstant),e.set(q.Enum,re.symbolEnum),e.set(q.EnumMember,re.symbolEnumMember),e.set(q.Keyword,re.symbolKeyword),e.set(q.Snippet,re.symbolSnippet),e.set(q.Text,re.symbolText),e.set(q.Color,re.symbolColor),e.set(q.File,re.symbolFile),e.set(q.Reference,re.symbolReference),e.set(q.Customcolor,re.symbolCustomColor),e.set(q.Folder,re.symbolFolder),e.set(q.TypeParameter,re.symbolTypeParameter),e.set(q.User,re.account),e.set(q.Issue,re.issues),e.set(q.Tool,re.tools);function t(o){let a=e.get(o);return a||(console.info("No codicon found for CompletionItemKind "+o),a=re.symbolProperty),a}i.toIcon=t;function n(o){switch(o){case q.Method:return d(765,"Method");case q.Function:return d(766,"Function");case q.Constructor:return d(767,"Constructor");case q.Field:return d(768,"Field");case q.Variable:return d(769,"Variable");case q.Class:return d(770,"Class");case q.Struct:return d(771,"Struct");case q.Interface:return d(772,"Interface");case q.Module:return d(773,"Module");case q.Property:return d(774,"Property");case q.Event:return d(775,"Event");case q.Operator:return d(776,"Operator");case q.Unit:return d(777,"Unit");case q.Value:return d(778,"Value");case q.Constant:return d(779,"Constant");case q.Enum:return d(780,"Enum");case q.EnumMember:return d(781,"Enum Member");case q.Keyword:return d(782,"Keyword");case q.Text:return d(783,"Text");case q.Color:return d(784,"Color");case q.File:return d(785,"File");case q.Reference:return d(786,"Reference");case q.Customcolor:return d(787,"Custom Color");case q.Folder:return d(788,"Folder");case q.TypeParameter:return d(789,"Type Parameter");case q.User:return d(790,"User");case q.Issue:return d(791,"Issue");case q.Tool:return d(792,"Tool");case q.Snippet:return d(793,"Snippet");default:return""}}i.toLabel=n;const s=new Map;s.set("method",q.Method),s.set("function",q.Function),s.set("constructor",q.Constructor),s.set("field",q.Field),s.set("variable",q.Variable),s.set("class",q.Class),s.set("struct",q.Struct),s.set("interface",q.Interface),s.set("module",q.Module),s.set("property",q.Property),s.set("event",q.Event),s.set("operator",q.Operator),s.set("unit",q.Unit),s.set("value",q.Value),s.set("constant",q.Constant),s.set("enum",q.Enum),s.set("enum-member",q.EnumMember),s.set("enumMember",q.EnumMember),s.set("keyword",q.Keyword),s.set("snippet",q.Snippet),s.set("text",q.Text),s.set("color",q.Color),s.set("file",q.File),s.set("reference",q.Reference),s.set("customcolor",q.Customcolor),s.set("folder",q.Folder),s.set("type-parameter",q.TypeParameter),s.set("typeParameter",q.TypeParameter),s.set("account",q.User),s.set("issue",q.Issue),s.set("tool",q.Tool);function r(o,a){let l=s.get(o);return typeof l>"u"&&!a&&(l=q.Property),l}i.fromString=r})(mE||(mE={}));var bE;(function(i){i[i.Deprecated=1]="Deprecated"})(bE||(bE={}));var _E;(function(i){i[i.None=0]="None",i[i.KeepWhitespace=1]="KeepWhitespace",i[i.InsertAsSnippet=4]="InsertAsSnippet"})(_E||(_E={}));var wE;(function(i){i[i.Word=0]="Word",i[i.Line=1]="Line",i[i.Suggest=2]="Suggest"})(wE||(wE={}));var vE;(function(i){i[i.Invoke=0]="Invoke",i[i.TriggerCharacter=1]="TriggerCharacter",i[i.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(vE||(vE={}));var yE;(function(i){i[i.Automatic=0]="Automatic",i[i.Explicit=1]="Explicit"})(yE||(yE={}));class Bte{constructor(e,t,n,s){this.range=e,this.text=t,this.completionKind=n,this.isSnippetText=s}equals(e){return H.lift(this.range).equalsRange(e.range)&&this.text===e.text&&this.completionKind===e.completionKind&&this.isSnippetText===e.isSnippetText}}var SE;(function(i){i[i.Accepted=0]="Accepted",i[i.Rejected=1]="Rejected",i[i.Ignored=2]="Ignored"})(SE||(SE={}));var kE;(function(i){i[i.Invoke=1]="Invoke",i[i.Auto=2]="Auto"})(kE||(kE={}));var CE;(function(i){i[i.Automatic=0]="Automatic",i[i.PasteAs=1]="PasteAs"})(CE||(CE={}));var EE;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})(EE||(EE={}));var xE;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(xE||(xE={}));function Wte(i){return i&&Y.isUri(i.uri)&&H.isIRange(i.range)&&(H.isIRange(i.originSelectionRange)||H.isIRange(i.targetSelectionRange))}function Ute(i){return i&&Y.isUri(i.uri)&&H.isIRange(i.range)}var ue;(function(i){i[i.File=0]="File",i[i.Module=1]="Module",i[i.Namespace=2]="Namespace",i[i.Package=3]="Package",i[i.Class=4]="Class",i[i.Method=5]="Method",i[i.Property=6]="Property",i[i.Field=7]="Field",i[i.Constructor=8]="Constructor",i[i.Enum=9]="Enum",i[i.Interface=10]="Interface",i[i.Function=11]="Function",i[i.Variable=12]="Variable",i[i.Constant=13]="Constant",i[i.String=14]="String",i[i.Number=15]="Number",i[i.Boolean=16]="Boolean",i[i.Array=17]="Array",i[i.Object=18]="Object",i[i.Key=19]="Key",i[i.Null=20]="Null",i[i.EnumMember=21]="EnumMember",i[i.Struct=22]="Struct",i[i.Event=23]="Event",i[i.Operator=24]="Operator",i[i.TypeParameter=25]="TypeParameter"})(ue||(ue={}));const _W={[ue.Array]:d(794,"array"),[ue.Boolean]:d(795,"boolean"),[ue.Class]:d(796,"class"),[ue.Constant]:d(797,"constant"),[ue.Constructor]:d(798,"constructor"),[ue.Enum]:d(799,"enumeration"),[ue.EnumMember]:d(800,"enumeration member"),[ue.Event]:d(801,"event"),[ue.Field]:d(802,"field"),[ue.File]:d(803,"file"),[ue.Function]:d(804,"function"),[ue.Interface]:d(805,"interface"),[ue.Key]:d(806,"key"),[ue.Method]:d(807,"method"),[ue.Module]:d(808,"module"),[ue.Namespace]:d(809,"namespace"),[ue.Null]:d(810,"null"),[ue.Number]:d(811,"number"),[ue.Object]:d(812,"object"),[ue.Operator]:d(813,"operator"),[ue.Package]:d(814,"package"),[ue.Property]:d(815,"property"),[ue.String]:d(816,"string"),[ue.Struct]:d(817,"struct"),[ue.TypeParameter]:d(818,"type parameter"),[ue.Variable]:d(819,"variable")};function Hte(i,e){return d(820,"{0} ({1})",i,_W[e])}var LE;(function(i){i[i.Deprecated=1]="Deprecated"})(LE||(LE={}));var DE;(function(i){const e=new Map;e.set(ue.File,re.symbolFile),e.set(ue.Module,re.symbolModule),e.set(ue.Namespace,re.symbolNamespace),e.set(ue.Package,re.symbolPackage),e.set(ue.Class,re.symbolClass),e.set(ue.Method,re.symbolMethod),e.set(ue.Property,re.symbolProperty),e.set(ue.Field,re.symbolField),e.set(ue.Constructor,re.symbolConstructor),e.set(ue.Enum,re.symbolEnum),e.set(ue.Interface,re.symbolInterface),e.set(ue.Function,re.symbolFunction),e.set(ue.Variable,re.symbolVariable),e.set(ue.Constant,re.symbolConstant),e.set(ue.String,re.symbolString),e.set(ue.Number,re.symbolNumber),e.set(ue.Boolean,re.symbolBoolean),e.set(ue.Array,re.symbolArray),e.set(ue.Object,re.symbolObject),e.set(ue.Key,re.symbolKey),e.set(ue.Null,re.symbolNull),e.set(ue.EnumMember,re.symbolEnumMember),e.set(ue.Struct,re.symbolStruct),e.set(ue.Event,re.symbolEvent),e.set(ue.Operator,re.symbolOperator),e.set(ue.TypeParameter,re.symbolTypeParameter);function t(r){let o=e.get(r);return o||(console.info("No codicon found for SymbolKind "+r),o=re.symbolProperty),o}i.toIcon=t;const n=new Map;n.set(ue.File,q.File),n.set(ue.Module,q.Module),n.set(ue.Namespace,q.Module),n.set(ue.Package,q.Module),n.set(ue.Class,q.Class),n.set(ue.Method,q.Method),n.set(ue.Property,q.Property),n.set(ue.Field,q.Field),n.set(ue.Constructor,q.Constructor),n.set(ue.Enum,q.Enum),n.set(ue.Interface,q.Interface),n.set(ue.Function,q.Function),n.set(ue.Variable,q.Variable),n.set(ue.Constant,q.Constant),n.set(ue.String,q.Text),n.set(ue.Number,q.Value),n.set(ue.Boolean,q.Value),n.set(ue.Array,q.Value),n.set(ue.Object,q.Value),n.set(ue.Key,q.Keyword),n.set(ue.Null,q.Value),n.set(ue.EnumMember,q.EnumMember),n.set(ue.Struct,q.Struct),n.set(ue.Event,q.Event),n.set(ue.Operator,q.Operator),n.set(ue.TypeParameter,q.TypeParameter);function s(r){let o=n.get(r);return o===void 0&&(console.info("No completion kind found for SymbolKind "+r),o=q.File),o}i.toCompletionKind=s})(DE||(DE={}));let Vte=class{static asEditOperation(e){const t=H.lift(e.range);return t.isEmpty()?jh.insert(t.getStartPosition(),e.text):jh.replace(t,e.text)}static isTextEdit(e){const t=e;return typeof t.text=="string"&&H.isIRange(t.range)}};class la{static{this.Comment=new la("comment")}static{this.Imports=new la("imports")}static{this.Region=new la("region")}static fromValue(e){switch(e){case"comment":return la.Comment;case"imports":return la.Imports;case"region":return la.Region}return new la(e)}constructor(e){this.value=e}}var IE;(function(i){i[i.AIGenerated=1]="AIGenerated"})(IE||(IE={}));var TE;(function(i){i[i.Invoke=0]="Invoke",i[i.Automatic=1]="Automatic"})(TE||(TE={}));var AE;(function(i){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}i.is=e})(AE||(AE={}));var NE;(function(i){i[i.Collapsed=0]="Collapsed",i[i.Expanded=1]="Expanded"})(NE||(NE={}));var RE;(function(i){i[i.Unresolved=0]="Unresolved",i[i.Resolved=1]="Resolved"})(RE||(RE={}));var ME;(function(i){i[i.Current=0]="Current",i[i.Outdated=1]="Outdated"})(ME||(ME={}));var OE;(function(i){i[i.Editing=0]="Editing",i[i.Preview=1]="Preview"})(OE||(OE={}));var FE;(function(i){i[i.Published=0]="Published",i[i.Draft=1]="Draft"})(FE||(FE={}));var PE;(function(i){i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(PE||(PE={}));class $te{constructor(e){this.createSupport=e,this._tokenizationSupport=null}dispose(){this._tokenizationSupport&&this._tokenizationSupport.then(e=>{e&&e.dispose()})}get tokenizationSupport(){return this._tokenizationSupport||(this._tokenizationSupport=this.createSupport()),this._tokenizationSupport}}const nf=new gW;var BE;(function(i){i[i.None=0]="None",i[i.Option=1]="Option",i[i.Default=2]="Default",i[i.Preferred=3]="Preferred"})(BE||(BE={}));var WE;(function(i){i[i.Invoke=0]="Invoke",i[i.Automatic=1]="Automatic"})(WE||(WE={}));const CN=new class{clone(){return this}equals(i){return this===i}};function qte(i,e){return new mW([new kN(0,"",i)],e)}function EN(i,e){const t=new Uint32Array(2);return t[0]=0,t[1]=(i<<Ce.LANGUAGEID_OFFSET|Jn.Other<<Ce.TOKEN_TYPE_OFFSET|ht.None<<Ce.FONT_STYLE_OFFSET|Ws.DefaultForeground<<Ce.FOREGROUND_OFFSET|Ws.DefaultBackground<<Ce.BACKGROUND_OFFSET)>>>0,new bW(t,e===null?CN:e)}const UE={getInitialState:()=>CN,tokenizeEncoded:(i,e,t)=>EN(Sh.Null,t)};async function wW(i,e,t){if(!t)return HE(e,i.languageIdCodec,UE);const n=await nf.getOrCreate(t);return HE(e,i.languageIdCodec,n||UE)}function Kte(i,e,t,n,s,r,o){let a="<div>",l=n,c=0,h=!0;for(let u=0,f=e.getCount();u<f;u++){const g=e.getEndOffset(u);if(g<=n)continue;let p="";for(;l<g&&l<s;l++){const m=i.charCodeAt(l);switch(m){case k.Tab:{let _=r-(l+c)%r;for(c+=_-1;_>0;)o&&h?(p+="&#160;",h=!1):(p+=" ",h=!0),_--;break}case k.LessThan:p+="&lt;",h=!1;break;case k.GreaterThan:p+="&gt;",h=!1;break;case k.Ampersand:p+="&amp;",h=!1;break;case k.Null:p+="&#00;",h=!1;break;case k.UTF8_BOM:case k.LINE_SEPARATOR:case k.PARAGRAPH_SEPARATOR:case k.NEXT_LINE:p+="�",h=!1;break;case k.CarriageReturn:p+="&#8203",h=!1;break;case k.Space:o&&h?(p+="&#160;",h=!1):(p+=" ",h=!0);break;default:p+=String.fromCharCode(m),h=!1}}if(a+=`<span style="${e.getInlineStyle(u,t)}">${p}</span>`,g>s||l>=s)break}return a+="</div>",a}function HE(i,e,t){let n='<div class="monaco-tokenized-source">';const s=S1(i);let r=t.getInitialState();for(let o=0,a=s.length;o<a;o++){const l=s[o];o>0&&(n+="<br/>");const c=t.tokenizeEncoded(l,!0,r);bi.convertToEndOffset(c.tokens,l.length);const u=new bi(c.tokens,l,e).inflate();let f=0;for(let g=0,p=u.getCount();g<p;g++){const m=u.getClassName(g),_=u.getEndOffset(g);n+=`<span class="${m}">${Gr(l.substring(f,_))}</span>`,f=_}r=c.endState}return n+="</div>",n}function vW(i,e){i instanceof JA?(i.setFontFamily(e.getMassagedFontFamily()),i.setFontWeight(e.fontWeight),i.setFontSize(e.fontSize),i.setFontFeatureSettings(e.fontFeatureSettings),i.setFontVariationSettings(e.fontVariationSettings),i.setLineHeight(e.lineHeight),i.setLetterSpacing(e.letterSpacing)):(i.style.fontFamily=e.getMassagedFontFamily(),i.style.fontWeight=e.fontWeight,i.style.fontSize=e.fontSize+"px",i.style.fontFeatureSettings=e.fontFeatureSettings,i.style.fontVariationSettings=e.fontVariationSettings,i.style.lineHeight=e.lineHeight+"px",i.style.letterSpacing=e.letterSpacing+"px")}const yW=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var iw;mt(yW);let nw=class{static{iw=this}static{this._ttpTokenizer=_N("tokenizeToString",{createHTML(e){return e}})}constructor(e,t,n){this._options=e,this._languageService=t,this._openerService=n}render(e,t,n){if(!e)return{element:document.createElement("span"),dispose:()=>{}};const s=new X,r=s.add(K1(e,{...this._getRenderOptions(e,s),...t},n));return r.element.classList.add("rendered-markdown"),{element:r.element,dispose:()=>s.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:async(n,s)=>{let r;n?r=this._languageService.getLanguageIdByLanguageName(n):this._options.editor&&(r=this._options.editor.getModel()?.getLanguageId()),r||(r=qa);const o=await wW(this._languageService,s,r),a=document.createElement("span");if(a.innerHTML=iw._ttpTokenizer?.createHTML(o)??o,this._options.editor){const l=this._options.editor.getOption(O.fontInfo);vW(a,l)}else this._options.codeBlockFontFamily&&(a.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(a.style.fontSize=this._options.codeBlockFontSize),a},actionHandler:{callback:n=>this.openMarkdownLink(n,e),disposables:t}}}async openMarkdownLink(e,t){await xN(this._openerService,e,t.isTrusted)}};nw=iw=G([L(1,xc),L(2,Vf)],nw);async function xN(i,e,t,n){try{return await i.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:SW(t),skipValidation:n})}catch(s){return pt(s),!1}}function SW(i){return i===!0?!0:i&&Array.isArray(i.enabledCommands)?i.enabledCommands:!1}const qf=be("accessibilityService"),kW=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));mt(kW);const VE=2e4;let Ll,yp,sw,Sp,rw;function jte(i){Ll=document.createElement("div"),Ll.className="monaco-aria-container";const e=()=>{const n=document.createElement("div");return n.className="monaco-alert",n.setAttribute("role","alert"),n.setAttribute("aria-atomic","true"),Ll.appendChild(n),n};yp=e(),sw=e();const t=()=>{const n=document.createElement("div");return n.className="monaco-status",n.setAttribute("aria-live","polite"),n.setAttribute("aria-atomic","true"),Ll.appendChild(n),n};Sp=t(),rw=t(),i.appendChild(Ll)}function Yh(i){Ll&&(yp.textContent!==i?(gr(sw),Dm(yp,i)):(gr(yp),Dm(sw,i)))}function Lm(i){Ll&&(Sp.textContent!==i?(gr(rw),Dm(Sp,i)):(gr(Sp),Dm(rw,i)))}function Dm(i,e){gr(i),e.length>VE&&(e=e.substr(0,VE)),i.textContent=e,i.style.visibility="hidden",i.style.visibility="visible"}mt(C3);const Cr=_e;var St;(function(i){i[i.PointerSize=3]="PointerSize",i[i.HoverBorderWidth=2]="HoverBorderWidth",i[i.HoverWindowEdgeMargin=2]="HoverWindowEdgeMargin"})(St||(St={}));let ow=class extends so{get _targetWindow(){return ke(this._target.targetElements[0])}get _targetDocumentElement(){return ke(this._target.targetElements[0]).document.documentElement}get isDisposed(){return this._isDisposed}get isMouseIn(){return this._lockMouseTracker.isMouseIn}get domNode(){return this._hover.containerDomNode}get onDispose(){return this._onDispose.event}get onRequestLayout(){return this._onRequestLayout.event}get anchor(){return this._hoverPosition===rt.BELOW?Zn.BELOW:Zn.ABOVE}get x(){return this._x}get y(){return this._y}get isLocked(){return this._isLocked}set isLocked(e){this._isLocked!==e&&(this._isLocked=e,this._hoverContainer.classList.toggle("locked",this._isLocked))}constructor(e,t,n,s,r,o){super(),this._keybindingService=t,this._configurationService=n,this._openerService=s,this._instantiationService=r,this._accessibilityService=o,this._messageListeners=new X,this._isDisposed=!1,this._forcePosition=!1,this._x=0,this._y=0,this._isLocked=!1,this._enableFocusTraps=!1,this._addedFocusTrap=!1,this._maxHeightRatioRelativeToWindow=.5,this._onDispose=this._register(new A),this._onRequestLayout=this._register(new A),this._linkHandler=e.linkHandler||(g=>xN(this._openerService,g,cr(e.content)?e.content.isTrusted:void 0)),this._target="targetElements"in e.target?e.target:new CW(e.target),this._hoverPointer=e.appearance?.showPointer?Cr("div.workbench-hover-pointer"):void 0,this._hover=this._register(new P3(!e.appearance?.skipFadeInAnimation)),this._hover.containerDomNode.classList.add("workbench-hover"),e.appearance?.compact&&this._hover.containerDomNode.classList.add("workbench-hover","compact"),e.additionalClasses&&this._hover.containerDomNode.classList.add(...e.additionalClasses),e.position?.forcePosition&&(this._forcePosition=!0),e.trapFocus&&(this._enableFocusTraps=!0);const a=e.appearance?.maxHeightRatio;a!==void 0&&a>0&&a<=1&&(this._maxHeightRatioRelativeToWindow=a),this._hoverPosition=e.position?.hoverPosition===void 0?rt.ABOVE:el(e.position.hoverPosition)?e.position.hoverPosition:rt.BELOW,this.onmousedown(this._hover.containerDomNode,g=>g.stopPropagation()),this.onkeydown(this._hover.containerDomNode,g=>{g.equals(w.Escape)&&this.dispose()}),this._register(V(this._targetWindow,"blur",()=>this.dispose()));const l=Cr("div.hover-row.markdown-hover"),c=Cr("div.hover-contents");if(typeof e.content=="string")c.textContent=e.content,c.style.whiteSpace="pre-wrap";else if(Ut(e.content))c.appendChild(e.content),c.classList.add("html-hover-contents");else{const g=e.content,p=this._instantiationService.createInstance(nw,{codeBlockFontFamily:this._configurationService.getValue("editor").fontFamily||jr.fontFamily}),{element:m,dispose:_}=p.render(g,{actionHandler:{callback:v=>this._linkHandler(v),disposables:this._messageListeners},asyncRenderCallback:()=>{c.classList.add("code-hover-contents"),this.layout(),this._onRequestLayout.fire()}});c.appendChild(m),this._register(fe(_))}if(l.appendChild(c),this._hover.contentsDomNode.appendChild(l),e.actions&&e.actions.length>0){const g=Cr("div.hover-row.status-bar"),p=Cr("div.actions");e.actions.forEach(m=>{const _=this._keybindingService.lookupKeybinding(m.commandId),v=_?_.getLabel():null;this._register(fS.render(p,{label:m.label,commandId:m.commandId,run:y=>{m.run(y),this.dispose()},iconClass:m.iconClass},v))}),g.appendChild(p),this._hover.containerDomNode.appendChild(g)}this._hoverContainer=Cr("div.workbench-hover-container"),this._hoverPointer&&this._hoverContainer.appendChild(this._hoverPointer),this._hoverContainer.appendChild(this._hover.containerDomNode);let h;if(e.actions&&e.actions.length>0?h=!1:e.persistence?.hideOnHover===void 0?h=typeof e.content=="string"||cr(e.content)&&!e.content.value.includes("](")&&!e.content.value.includes("</a>"):h=e.persistence.hideOnHover,e.appearance?.showHoverHint){const g=Cr("div.hover-row.status-bar"),p=Cr("div.info");p.textContent=d(145,"Hold {0} key to mouse over",Me?"Option":"Alt"),g.appendChild(p),this._hover.containerDomNode.appendChild(g)}const u=[...this._target.targetElements];h||u.push(this._hoverContainer);const f=this._register(new zE(u));if(this._register(f.onMouseOut(()=>{this._isLocked||this.dispose()})),h){const g=[...this._target.targetElements,this._hoverContainer];this._lockMouseTracker=this._register(new zE(g)),this._register(this._lockMouseTracker.onMouseOut(()=>{this._isLocked||this.dispose()}))}else this._lockMouseTracker=f}addFocusTrap(){if(!this._enableFocusTraps||this._addedFocusTrap)return;this._addedFocusTrap=!0;const e=this._hover.containerDomNode,t=this.findLastFocusableChild(this._hover.containerDomNode);if(t){const n=tS(this._hoverContainer,Cr("div")),s=ie(this._hoverContainer,Cr("div"));n.tabIndex=0,s.tabIndex=0,this._register(V(s,"focus",r=>{e.focus(),r.preventDefault()})),this._register(V(n,"focus",r=>{t.focus(),r.preventDefault()}))}}findLastFocusableChild(e){if(e.hasChildNodes())for(let t=0;t<e.childNodes.length;t++){const n=e.childNodes.item(e.childNodes.length-t-1);if(n.nodeType===n.ELEMENT_NODE){const r=n;if(typeof r.tabIndex=="number"&&r.tabIndex>=0)return r}const s=this.findLastFocusableChild(n);if(s)return s}}render(e){e.appendChild(this._hoverContainer);const n=this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement)&&B3(this._configurationService.getValue("accessibility.verbosity.hover")===!0&&this._accessibilityService.isScreenReaderOptimized(),this._keybindingService.lookupKeybinding("editor.action.accessibleView")?.getAriaLabel());n&&Lm(n),this.layout(),this.addFocusTrap()}layout(){this._hover.containerDomNode.classList.remove("right-aligned"),this._hover.contentsDomNode.style.maxHeight="";const e=h=>{const u=cA(h),f=h.getBoundingClientRect();return{top:f.top*u,bottom:f.bottom*u,right:f.right*u,left:f.left*u}},t=this._target.targetElements.map(h=>e(h)),{top:n,right:s,bottom:r,left:o}=t[0],a=s-o,l=r-n,c={top:n,right:s,bottom:r,left:o,width:a,height:l,center:{x:o+a/2,y:n+l/2}};if(this.adjustHorizontalHoverPosition(c),this.adjustVerticalHoverPosition(c),this.adjustHoverMaxHeight(c),this._hoverContainer.style.padding="",this._hoverContainer.style.margin="",this._hoverPointer){switch(this._hoverPosition){case rt.RIGHT:c.left+=St.PointerSize,c.right+=St.PointerSize,this._hoverContainer.style.paddingLeft=`${St.PointerSize}px`,this._hoverContainer.style.marginLeft=`${-St.PointerSize}px`;break;case rt.LEFT:c.left-=St.PointerSize,c.right-=St.PointerSize,this._hoverContainer.style.paddingRight=`${St.PointerSize}px`,this._hoverContainer.style.marginRight=`${-St.PointerSize}px`;break;case rt.BELOW:c.top+=St.PointerSize,c.bottom+=St.PointerSize,this._hoverContainer.style.paddingTop=`${St.PointerSize}px`,this._hoverContainer.style.marginTop=`${-St.PointerSize}px`;break;case rt.ABOVE:c.top-=St.PointerSize,c.bottom-=St.PointerSize,this._hoverContainer.style.paddingBottom=`${St.PointerSize}px`,this._hoverContainer.style.marginBottom=`${-St.PointerSize}px`;break}c.center.x=c.left+a/2,c.center.y=c.top+l/2}this.computeXCordinate(c),this.computeYCordinate(c),this._hoverPointer&&(this._hoverPointer.classList.remove("top"),this._hoverPointer.classList.remove("left"),this._hoverPointer.classList.remove("right"),this._hoverPointer.classList.remove("bottom"),this.setHoverPointerPosition(c)),this._hover.onContentsChanged()}computeXCordinate(e){const t=this._hover.containerDomNode.clientWidth+St.HoverBorderWidth;this._target.x!==void 0?this._x=this._target.x:this._hoverPosition===rt.RIGHT?this._x=e.right:this._hoverPosition===rt.LEFT?this._x=e.left-t:(this._hoverPointer?this._x=e.center.x-this._hover.containerDomNode.clientWidth/2:this._x=e.left,this._x+t>=this._targetDocumentElement.clientWidth&&(this._hover.containerDomNode.classList.add("right-aligned"),this._x=Math.max(this._targetDocumentElement.clientWidth-t-St.HoverWindowEdgeMargin,this._targetDocumentElement.clientLeft))),this._x<this._targetDocumentElement.clientLeft&&(this._x=e.left+St.HoverWindowEdgeMargin)}computeYCordinate(e){this._target.y!==void 0?this._y=this._target.y:this._hoverPosition===rt.ABOVE?this._y=e.top:this._hoverPosition===rt.BELOW?this._y=e.bottom-2:this._hoverPointer?this._y=e.center.y+this._hover.containerDomNode.clientHeight/2:this._y=e.bottom,this._y>this._targetWindow.innerHeight&&(this._y=e.bottom)}adjustHorizontalHoverPosition(e){if(this._target.x!==void 0)return;const t=this._hoverPointer?St.PointerSize:0;if(this._forcePosition){const n=t+St.HoverBorderWidth;this._hoverPosition===rt.RIGHT?this._hover.containerDomNode.style.maxWidth=`${this._targetDocumentElement.clientWidth-e.right-n}px`:this._hoverPosition===rt.LEFT&&(this._hover.containerDomNode.style.maxWidth=`${e.left-n}px`);return}this._hoverPosition===rt.RIGHT?this._targetDocumentElement.clientWidth-e.right<this._hover.containerDomNode.clientWidth+t&&(e.left>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=rt.LEFT:this._hoverPosition=rt.BELOW):this._hoverPosition===rt.LEFT&&(e.left<this._hover.containerDomNode.clientWidth+t&&(this._targetDocumentElement.clientWidth-e.right>=this._hover.containerDomNode.clientWidth+t?this._hoverPosition=rt.RIGHT:this._hoverPosition=rt.BELOW),e.left-this._hover.containerDomNode.clientWidth-t<=this._targetDocumentElement.clientLeft&&(this._hoverPosition=rt.RIGHT))}adjustVerticalHoverPosition(e){if(this._target.y!==void 0||this._forcePosition)return;const t=this._hoverPointer?St.PointerSize:0;this._hoverPosition===rt.ABOVE?e.top-this._hover.containerDomNode.clientHeight-t<0&&(this._hoverPosition=rt.BELOW):this._hoverPosition===rt.BELOW&&e.bottom+this._hover.containerDomNode.clientHeight+t>this._targetWindow.innerHeight&&(this._hoverPosition=rt.ABOVE)}adjustHoverMaxHeight(e){let t=this._targetWindow.innerHeight*this._maxHeightRatioRelativeToWindow;if(this._forcePosition){const n=(this._hoverPointer?St.PointerSize:0)+St.HoverBorderWidth;this._hoverPosition===rt.ABOVE?t=Math.min(t,e.top-n):this._hoverPosition===rt.BELOW&&(t=Math.min(t,this._targetWindow.innerHeight-e.bottom-n))}if(this._hover.containerDomNode.style.maxHeight=`${t}px`,this._hover.contentsDomNode.clientHeight<this._hover.contentsDomNode.scrollHeight){const n=`${this._hover.scrollbar.options.verticalScrollbarSize}px`;this._hover.contentsDomNode.style.paddingRight!==n&&(this._hover.contentsDomNode.style.paddingRight=n)}}setHoverPointerPosition(e){if(this._hoverPointer)switch(this._hoverPosition){case rt.LEFT:case rt.RIGHT:{this._hoverPointer.classList.add(this._hoverPosition===rt.LEFT?"right":"left");const t=this._hover.containerDomNode.clientHeight;t>e.height?this._hoverPointer.style.top=`${e.center.y-(this._y-t)-St.PointerSize}px`:this._hoverPointer.style.top=`${Math.round(t/2)-St.PointerSize}px`;break}case rt.ABOVE:case rt.BELOW:{this._hoverPointer.classList.add(this._hoverPosition===rt.ABOVE?"bottom":"top");const t=this._hover.containerDomNode.clientWidth;let n=Math.round(t/2)-St.PointerSize;const s=this._x+n;(s<e.left||s>e.right)&&(n=e.center.x-this._x-St.PointerSize),this._hoverPointer.style.left=`${n}px`;break}}}focus(){this._hover.containerDomNode.focus()}hide(){this.dispose()}dispose(){this._isDisposed||(this._onDispose.fire(),this._target.dispose?.(),this._hoverContainer.remove(),this._messageListeners.dispose(),super.dispose()),this._isDisposed=!0}};ow=G([L(1,$s),L(2,Vt),L(3,Vf),L(4,xt),L(5,qf)],ow);class zE extends so{get onMouseOut(){return this._onMouseOut.event}get isMouseIn(){return this._isMouseIn}constructor(e,t=200){super(),this._elements=e,this._eventDebounceDelay=t,this._isMouseIn=!0,this._mouseTimer=this._register(new vs),this._onMouseOut=this._register(new A);for(const n of this._elements)this.onmouseover(n,()=>this._onTargetMouseOver()),this.onmouseleave(n,()=>this._onTargetMouseLeave())}_onTargetMouseOver(){this._isMouseIn=!0,this._mouseTimer.clear()}_onTargetMouseLeave(){this._isMouseIn=!1,this._mouseTimer.value=new tl(()=>this._fireIfMouseOutside(),this._eventDebounceDelay)}_fireIfMouseOutside(){this._isMouseIn||this._onMouseOut.fire()}}class CW{constructor(e){this._element=e,this.targetElements=[this._element]}dispose(){}}var dr;(function(i){i[i.NoMatchingKb=0]="NoMatchingKb",i[i.MoreChordsNeeded=1]="MoreChordsNeeded",i[i.KbFound=2]="KbFound"})(dr||(dr={}));const Im={kind:dr.NoMatchingKb},EW={kind:dr.MoreChordsNeeded};function xW(i,e,t){return{kind:dr.KbFound,commandId:i,commandArgs:e,isBubble:t}}class pd{constructor(e,t,n){this._log=n,this._defaultKeybindings=e,this._defaultBoundCommands=new Map;for(const s of e){const r=s.command;r&&r.charAt(0)!=="-"&&this._defaultBoundCommands.set(r,!0)}this._map=new Map,this._lookupMap=new Map,this._keybindings=pd.handleRemovals([].concat(e).concat(t));for(let s=0,r=this._keybindings.length;s<r;s++){const o=this._keybindings[s];if(o.chords.length===0)continue;const a=o.when?.substituteConstants();a&&a.type===it.False||this._addKeyPress(o.chords[0],o)}}static _isTargetedForRemoval(e,t,n){if(t){for(let s=0;s<t.length;s++)if(t[s]!==e.chords[s])return!1}return!(n&&n.type!==it.True&&(!e.when||!pO(n,e.when)))}static handleRemovals(e){const t=new Map;for(let s=0,r=e.length;s<r;s++){const o=e[s];if(o.command&&o.command.charAt(0)==="-"){const a=o.command.substring(1);t.has(a)?t.get(a).push(o):t.set(a,[o])}}if(t.size===0)return e;const n=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];if(!o.command||o.command.length===0){n.push(o);continue}if(o.command.charAt(0)==="-")continue;const a=t.get(o.command);if(!a||!o.isDefault){n.push(o);continue}let l=!1;for(const c of a){const h=c.when;if(this._isTargetedForRemoval(o,c.chords,h)){l=!0;break}}if(!l){n.push(o);continue}}return n}_addKeyPress(e,t){const n=this._map.get(e);if(typeof n>"u"){this._map.set(e,[t]),this._addToLookupMap(t);return}for(let s=n.length-1;s>=0;s--){const r=n[s];if(r.command===t.command)continue;let o=!0;for(let a=1;a<r.chords.length&&a<t.chords.length;a++)if(r.chords[a]!==t.chords[a]){o=!1;break}o&&pd.whenIsEntirelyIncluded(r.when,t.when)&&this._removeFromLookupMap(r)}n.push(t),this._addToLookupMap(t)}_addToLookupMap(e){if(!e.command)return;let t=this._lookupMap.get(e.command);typeof t>"u"?(t=[e],this._lookupMap.set(e.command,t)):t.push(e)}_removeFromLookupMap(e){if(!e.command)return;const t=this._lookupMap.get(e.command);if(!(typeof t>"u")){for(let n=0,s=t.length;n<s;n++)if(t[n]===e){t.splice(n,1);return}}}static whenIsEntirelyIncluded(e,t){return!t||t.type===it.True?!0:!e||e.type===it.True?!1:_0(e,t)}getDefaultBoundCommands(){return this._defaultBoundCommands}getDefaultKeybindings(){return this._defaultKeybindings}getKeybindings(){return this._keybindings}lookupKeybindings(e){const t=this._lookupMap.get(e);if(typeof t>"u"||t.length===0)return[];const n=[];let s=0;for(let r=t.length-1;r>=0;r--)n[s++]=t[r];return n}lookupPrimaryKeybinding(e,t,n=!1){const s=this._lookupMap.get(e);if(typeof s>"u"||s.length===0)return null;if(s.length===1&&!n)return s[0];for(let r=s.length-1;r>=0;r--){const o=s[r];if(t.contextMatchesRules(o.when))return o}return n?null:s[s.length-1]}resolve(e,t,n){const s=[...t,n];this._log(`| Resolving ${s}`);const r=this._map.get(s[0]);if(r===void 0)return this._log("\\ No keybinding entries."),Im;let o=null;if(s.length<2)o=r;else{o=[];for(let l=0,c=r.length;l<c;l++){const h=r[l];if(s.length>h.chords.length)continue;let u=!0;for(let f=1;f<s.length;f++)if(h.chords[f]!==s[f]){u=!1;break}u&&o.push(h)}}const a=this._findCommand(e,o);return a?s.length<a.chords.length?(this._log(`\\ From ${o.length} keybinding entries, awaiting ${a.chords.length-s.length} more chord(s), when: ${$E(a.when)}, source: ${qE(a)}.`),EW):(this._log(`\\ From ${o.length} keybinding entries, matched ${a.command}, when: ${$E(a.when)}, source: ${qE(a)}.`),xW(a.command,a.commandArgs,a.bubble)):(this._log(`\\ From ${o.length} keybinding entries, no when clauses matched the context.`),Im)}_findCommand(e,t){for(let n=t.length-1;n>=0;n--){const s=t[n];if(pd._contextMatchesRules(e,s.when))return s}return null}static _contextMatchesRules(e,t){return t?t.evaluate(e):!0}}function $E(i){return i?`${i.serialize()}`:"no when condition"}function qE(i){return i.extensionId?i.isBuiltinExtension?`built-in extension ${i.extensionId}`:`user extension ${i.extensionId}`:i.isDefault?"built-in":"user"}let Tm=class extends ${constructor(e){super(),this.layoutService=e,this.contextView=this._register(new vm(this.layoutService.mainContainer,Ur.ABSOLUTE)),this.layout(),this._register(e.onDidLayoutContainer(()=>this.layout()))}showContextView(e,t,n){let s;t?t===this.layoutService.getContainer(ke(t))?s=Ur.ABSOLUTE:n?s=Ur.FIXED_SHADOW:s=Ur.FIXED:s=Ur.ABSOLUTE,this.contextView.setContainer(t??this.layoutService.activeContainer,s),this.contextView.show(e);const r={close:()=>{this.openContextView===r&&this.hideContextView()}};return this.openContextView=r,r}layout(){this.contextView.layout()}hideContextView(e){this.contextView.hide(e),this.openContextView=void 0}};Tm=G([L(0,Jo)],Tm);class LW extends Tm{getContextViewElement(){return this.contextView.getViewElement()}}function DW(i){const e=i;return typeof e=="object"&&"markdown"in e&&"markdownNotSupportedFallback"in e}function Qte(i){const e=i;return typeof e=="object"&&"element"in e}class IW{constructor(e,t,n){this.hoverDelegate=e,this.target=t,this.fadeInAnimation=n}async update(e,t,n){if(this._cancellationTokenSource&&(this._cancellationTokenSource.dispose(!0),this._cancellationTokenSource=void 0),this.isDisposed)return;let s;if(Bi(e)||Ut(e)||e===void 0)s=e;else{this._cancellationTokenSource=new _r;const r=this._cancellationTokenSource.token;let o;if(DW(e)?Wh(e.markdown)?o=e.markdown(r).then(a=>a??e.markdownNotSupportedFallback):o=e.markdown??e.markdownNotSupportedFallback:o=e.element(r),o instanceof Promise?(this._hoverWidget||this.show(d(146,"Loading..."),t,n),s=await o):s=o,this.isDisposed||r.isCancellationRequested)return}this.show(s,t,n)}show(e,t,n){const s=this._hoverWidget;if(this.hasContent(e)){const r={content:e,target:this.target,actions:n?.actions,linkHandler:n?.linkHandler,trapFocus:n?.trapFocus,appearance:{showPointer:this.hoverDelegate.placement==="element",skipFadeInAnimation:!this.fadeInAnimation||!!s,showHoverHint:n?.appearance?.showHoverHint},position:{hoverPosition:rt.BELOW}};this._hoverWidget=this.hoverDelegate.showHover(r,t)}s?.dispose()}hasContent(e){return e?cr(e)?!!e.value:!0:!1}get isDisposed(){return this._hoverWidget?.isDisposed}dispose(){this._hoverWidget?.dispose(),this._cancellationTokenSource?.dispose(!0),this._cancellationTokenSource=void 0}}const ea=be("commandService"),Ss=new class{constructor(){this._commands=new Map,this._onDidRegisterCommand=new A,this.onDidRegisterCommand=this._onDidRegisterCommand.event}registerCommand(i,e){if(!i)throw new Error("invalid command");if(typeof i=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:i,handler:e})}if(i.metadata&&Array.isArray(i.metadata.args)){const o=[];for(const l of i.metadata.args)o.push(l.constraint);const a=i.handler;i.handler=function(l,...c){return YR(c,o),a(l,...c)}}const{id:t}=i;let n=this._commands.get(t);n||(n=new sn,this._commands.set(t,n));const s=n.unshift(i),r=fe(()=>{s(),this._commands.get(t)?.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),Fd(r)}registerCommandAlias(i,e){return Ss.registerCommand(i,(t,...n)=>t.get(ea).executeCommand(e,...n))}getCommand(i){const e=this._commands.get(i);if(!(!e||e.isEmpty()))return Be.first(e)}getCommands(){const i=new Map;for(const e of this._commands.keys()){const t=this.getCommand(e);t&&i.set(e,t)}return i}};Ss.registerCommand("noop",()=>{});var Xa;(function(i){i[i.EditorCore=0]="EditorCore",i[i.EditorContrib=100]="EditorContrib",i[i.WorkbenchContrib=200]="WorkbenchContrib",i[i.BuiltinExtension=300]="BuiltinExtension",i[i.ExternalExtension=400]="ExternalExtension"})(Xa||(Xa={}));class CS{constructor(){this._coreKeybindings=new sn,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(An===At.Windows){if(e&&e.win)return e.win}else if(An===At.Macintosh){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){const t=CS.bindToCurrentPlatform(e),n=new X;if(t&&t.primary){const s=E0(t.primary,An);s&&n.add(this._registerDefaultKeybinding(s,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let s=0,r=t.secondary.length;s<r;s++){const o=t.secondary[s],a=E0(o,An);a&&n.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-s-1,e.when))}return n}setExtensionKeybindings(e){const t=[];let n=0;for(const s of e)s.keybinding&&(t[n++]={keybinding:s.keybinding,command:s.id,commandArgs:s.args,when:s.when,weight1:s.weight,weight2:0,extensionId:s.extensionId||null,isBuiltinExtension:s.isBuiltinExtension||!1});this._extensionKeybindings=t,this._cachedMergedKeybindings=null}registerCommandAndKeybindingRule(e){return Kr(this.registerKeybindingRule(e),Ss.registerCommand(e))}_registerDefaultKeybinding(e,t,n,s,r,o){const a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:n,when:o,weight1:s,weight2:r,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,fe(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(AW)),this._cachedMergedKeybindings.slice(0)}}const dc=new CS,TW={EditorModes:"platform.keybindingsRegistry"};wt.add(TW.EditorModes,dc);function AW(i,e){if(i.weight1!==e.weight1)return i.weight1-e.weight1;if(i.command&&e.command){if(i.command<e.command)return-1;if(i.command>e.command)return 1}return i.weight2-e.weight2}var aw;(function(i){i.editorSimpleInput=new oe("editorSimpleInput",!1,!0),i.editorTextFocus=new oe("editorTextFocus",!1,d(719,"Whether the editor text has focus (cursor is blinking)")),i.focus=new oe("editorFocus",!1,d(720,"Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),i.textInputFocus=new oe("textInputFocus",!1,d(721,"Whether an editor or a rich text input has focus (cursor is blinking)")),i.readOnly=new oe("editorReadonly",!1,d(722,"Whether the editor is read-only")),i.inDiffEditor=new oe("inDiffEditor",!1,d(723,"Whether the context is a diff editor")),i.isEmbeddedDiffEditor=new oe("isEmbeddedDiffEditor",!1,d(724,"Whether the context is an embedded diff editor")),i.multiDiffEditorAllCollapsed=new oe("multiDiffEditorAllCollapsed",void 0,d(725,"Whether all files in multi diff editor are collapsed")),i.hasChanges=new oe("diffEditorHasChanges",!1,d(726,"Whether the diff editor has changes")),i.comparingMovedCode=new oe("comparingMovedCode",!1,d(727,"Whether a moved code block is selected for comparison")),i.accessibleDiffViewerVisible=new oe("accessibleDiffViewerVisible",!1,d(728,"Whether the accessible diff viewer is visible")),i.diffEditorRenderSideBySideInlineBreakpointReached=new oe("diffEditorRenderSideBySideInlineBreakpointReached",!1,d(729,"Whether the diff editor render side by side inline breakpoint is reached")),i.diffEditorInlineMode=new oe("diffEditorInlineMode",!1,d(730,"Whether inline mode is active")),i.diffEditorOriginalWritable=new oe("diffEditorOriginalWritable",!1,d(731,"Whether modified is writable in the diff editor")),i.diffEditorModifiedWritable=new oe("diffEditorModifiedWritable",!1,d(732,"Whether modified is writable in the diff editor")),i.diffEditorOriginalUri=new oe("diffEditorOriginalUri","",d(733,"The uri of the original document")),i.diffEditorModifiedUri=new oe("diffEditorModifiedUri","",d(734,"The uri of the modified document")),i.columnSelection=new oe("editorColumnSelection",!1,d(735,"Whether `editor.columnSelection` is enabled")),i.writable=i.readOnly.toNegated(),i.hasNonEmptySelection=new oe("editorHasSelection",!1,d(736,"Whether the editor has text selected")),i.hasOnlyEmptySelection=i.hasNonEmptySelection.toNegated(),i.hasMultipleSelections=new oe("editorHasMultipleSelections",!1,d(737,"Whether the editor has multiple selections")),i.hasSingleSelection=i.hasMultipleSelections.toNegated(),i.tabMovesFocus=new oe("editorTabMovesFocus",!1,d(738,"Whether `Tab` will move focus out of the editor")),i.tabDoesNotMoveFocus=i.tabMovesFocus.toNegated(),i.isInEmbeddedEditor=new oe("isInEmbeddedEditor",!1,!0),i.canUndo=new oe("canUndo",!1,!0),i.canRedo=new oe("canRedo",!1,!0),i.hoverVisible=new oe("editorHoverVisible",!1,d(739,"Whether the editor hover is visible")),i.hoverFocused=new oe("editorHoverFocused",!1,d(740,"Whether the editor hover is focused")),i.stickyScrollFocused=new oe("stickyScrollFocused",!1,d(741,"Whether the sticky scroll is focused")),i.stickyScrollVisible=new oe("stickyScrollVisible",!1,d(742,"Whether the sticky scroll is visible")),i.standaloneColorPickerVisible=new oe("standaloneColorPickerVisible",!1,d(743,"Whether the standalone color picker is visible")),i.standaloneColorPickerFocused=new oe("standaloneColorPickerFocused",!1,d(744,"Whether the standalone color picker is focused")),i.inCompositeEditor=new oe("inCompositeEditor",void 0,d(745,"Whether the editor is part of a larger editor (e.g. notebooks)")),i.notInCompositeEditor=i.inCompositeEditor.toNegated(),i.languageId=new oe("editorLangId","",d(746,"The language identifier of the editor")),i.hasCompletionItemProvider=new oe("editorHasCompletionItemProvider",!1,d(747,"Whether the editor has a completion item provider")),i.hasCodeActionsProvider=new oe("editorHasCodeActionsProvider",!1,d(748,"Whether the editor has a code actions provider")),i.hasCodeLensProvider=new oe("editorHasCodeLensProvider",!1,d(749,"Whether the editor has a code lens provider")),i.hasDefinitionProvider=new oe("editorHasDefinitionProvider",!1,d(750,"Whether the editor has a definition provider")),i.hasDeclarationProvider=new oe("editorHasDeclarationProvider",!1,d(751,"Whether the editor has a declaration provider")),i.hasImplementationProvider=new oe("editorHasImplementationProvider",!1,d(752,"Whether the editor has an implementation provider")),i.hasTypeDefinitionProvider=new oe("editorHasTypeDefinitionProvider",!1,d(753,"Whether the editor has a type definition provider")),i.hasHoverProvider=new oe("editorHasHoverProvider",!1,d(754,"Whether the editor has a hover provider")),i.hasDocumentHighlightProvider=new oe("editorHasDocumentHighlightProvider",!1,d(755,"Whether the editor has a document highlight provider")),i.hasDocumentSymbolProvider=new oe("editorHasDocumentSymbolProvider",!1,d(756,"Whether the editor has a document symbol provider")),i.hasReferenceProvider=new oe("editorHasReferenceProvider",!1,d(757,"Whether the editor has a reference provider")),i.hasRenameProvider=new oe("editorHasRenameProvider",!1,d(758,"Whether the editor has a rename provider")),i.hasSignatureHelpProvider=new oe("editorHasSignatureHelpProvider",!1,d(759,"Whether the editor has a signature help provider")),i.hasInlayHintsProvider=new oe("editorHasInlayHintsProvider",!1,d(760,"Whether the editor has an inline hints provider")),i.hasDocumentFormattingProvider=new oe("editorHasDocumentFormattingProvider",!1,d(761,"Whether the editor has a document formatting provider")),i.hasDocumentSelectionFormattingProvider=new oe("editorHasDocumentSelectionFormattingProvider",!1,d(762,"Whether the editor has a document selection formatting provider")),i.hasMultipleDocumentFormattingProvider=new oe("editorHasMultipleDocumentFormattingProvider",!1,d(763,"Whether the editor has multiple document formatting providers")),i.hasMultipleDocumentSelectionFormattingProvider=new oe("editorHasMultipleDocumentSelectionFormattingProvider",!1,d(764,"Whether the editor has multiple document selection formatting providers"))})(aw||(aw={}));let KE=class extends ${constructor(e,t,n,s,r,o){super(),this._instantiationService=e,this._configurationService=t,this._keybindingService=s,this._layoutService=r,this._accessibilityService=o,this._currentDelayedHoverWasShown=!1,this._delayedHovers=new Map,this._managedHovers=new Map,this._register(n.onDidShowContextMenu(()=>this.hideHover())),this._contextViewHandler=this._register(new Tm(this._layoutService)),this._register(dc.registerCommandAndKeybindingRule({id:"workbench.action.showHover",weight:Xa.WorkbenchContrib-1,when:aw.editorTextFocus.negate(),primary:PT(Ne.CtrlCmd|w.KeyK,Ne.CtrlCmd|w.KeyI),handler:()=>{this._showAndFocusHoverForActiveElement()}}))}showInstantHover(e,t,n,s){const r=this._createHover(e,n);if(r)return this._showHover(r,e,t),r}showDelayedHover(e,t){if(e.id===void 0&&(e.id=GE(e.content)),!this._currentDelayedHover||this._currentDelayedHoverWasShown){if(this._currentHover?.isLocked)return;if(sa(this._currentHoverOptions)===sa(e))return this._currentHover;if(this._currentHover&&!this._currentHover.isDisposed&&this._currentDelayedHoverGroupId!==void 0&&this._currentDelayedHoverGroupId===t?.groupId)return this.showInstantHover({...e,appearance:{...e.appearance,skipFadeInAnimation:!0}})}else if(this._currentDelayedHover&&sa(this._currentHoverOptions)===sa(e))return this._currentDelayedHover;const n=this._createHover(e,void 0);if(!n){this._currentDelayedHover=void 0,this._currentDelayedHoverWasShown=!1,this._currentDelayedHoverGroupId=void 0;return}return this._currentDelayedHover=n,this._currentDelayedHoverWasShown=!1,this._currentDelayedHoverGroupId=t?.groupId,sc(this._configurationService.getValue("workbench.hover.delay")).then(()=>{n&&!n.isDisposed&&(this._currentDelayedHoverWasShown=!0,this._showHover(n,e))}),n}setupDelayedHover(e,t,n){const s=()=>({...typeof t=="function"?t():t,target:e});return this._setupDelayedHover(e,s,n)}setupDelayedHoverAtMouse(e,t,n){const s=r=>({...typeof t=="function"?t():t,target:{targetElements:[e],x:r!==void 0?r.x+10:void 0}});return this._setupDelayedHover(e,s,n)}_setupDelayedHover(e,t,n){const s=new X;return s.add(V(e,j.MOUSE_OVER,r=>{this.showDelayedHover(t(r),{groupId:n?.groupId})})),n?.setupKeyboardEvents&&s.add(V(e,j.KEY_DOWN,r=>{const o=new at(r);(o.equals(w.Space)||o.equals(w.Enter))&&this.showInstantHover(t(),!0)})),this._delayedHovers.set(e,{show:r=>{this.showInstantHover(t(),r)}}),s.add(fe(()=>this._delayedHovers.delete(e))),s}_createHover(e,t){if(this._currentDelayedHover=void 0,this._currentHover?.isLocked||(e.id===void 0&&(e.id=GE(e.content)),sa(this._currentHoverOptions)===sa(e)))return;this._currentHoverOptions=e,this._lastHoverOptions=e;const n=e.trapFocus||this._accessibilityService.isScreenReaderOptimized(),s=on();t||(n&&s?s.classList.contains("monaco-hover")||(this._lastFocusedElementBeforeOpen=s):this._lastFocusedElementBeforeOpen=void 0);const r=new X,o=this._instantiationService.createInstance(ow,e);if(e.persistence?.sticky&&(o.isLocked=!0),e.position?.hoverPosition&&!el(e.position.hoverPosition)&&(e.target={targetElements:Ut(e.target)?[e.target]:e.target.targetElements,x:e.position.hoverPosition.x+10}),o.onDispose(()=>{this._currentHover?.domNode&&gA(this._currentHover.domNode)&&this._lastFocusedElementBeforeOpen?.focus(),sa(this._currentHoverOptions)===sa(e)&&this.doHideHover(),r.dispose()},void 0,r),!e.container){const a=Ut(e.target)?e.target:e.target.targetElements[0];e.container=this._layoutService.getContainer(ke(a))}if(o.onRequestLayout(()=>this._contextViewHandler.layout(),void 0,r),e.persistence?.sticky)r.add(V(ke(e.container).document,j.MOUSE_DOWN,a=>{Kt(a.target,o.domNode)||this.doHideHover()}));else{if("targetElements"in e.target)for(const l of e.target.targetElements)r.add(V(l,j.CLICK,()=>this.hideHover()));else r.add(V(e.target,j.CLICK,()=>this.hideHover()));const a=on();if(a){const l=ke(a).document;r.add(V(a,j.KEY_DOWN,c=>this._keyDown(c,o,!!e.persistence?.hideOnKeyDown))),r.add(V(l,j.KEY_DOWN,c=>this._keyDown(c,o,!!e.persistence?.hideOnKeyDown))),r.add(V(a,j.KEY_UP,c=>this._keyUp(c,o))),r.add(V(l,j.KEY_UP,c=>this._keyUp(c,o)))}}if("IntersectionObserver"in $e){const a=new IntersectionObserver(c=>this._intersectionChange(c,o),{threshold:0}),l="targetElements"in e.target?e.target.targetElements[0]:e.target;a.observe(l),r.add(fe(()=>a.disconnect()))}return this._currentHover=o,o}_showHover(e,t,n){this._contextViewHandler.showContextView(new NW(e,n),t.container)}hideHover(e){!e&&this._currentHover?.isLocked||!this._currentHoverOptions||this.doHideHover()}doHideHover(){this._currentHover=void 0,this._currentHoverOptions=void 0,this._contextViewHandler.hideContextView()}_intersectionChange(e,t){e[e.length-1].isIntersecting||t.dispose()}showAndFocusLastHover(){this._lastHoverOptions&&this.showInstantHover(this._lastHoverOptions,!0,!0)}_showAndFocusHoverForActiveElement(){let e=on();for(;e;){const t=this._delayedHovers.get(e)??this._managedHovers.get(e);if(t){t.show(!0);return}e=e.parentElement}}_keyDown(e,t,n){if(e.key==="Alt"){t.isLocked=!0;return}const s=new at(e);this._keybindingService.resolveKeyboardEvent(s).getSingleModifierDispatchChords().some(o=>!!o)||this._keybindingService.softDispatch(s,s.target).kind!==dr.NoMatchingKb||n&&(!this._currentHoverOptions?.trapFocus||e.key!=="Tab")&&(this.hideHover(),this._lastFocusedElementBeforeOpen?.focus())}_keyUp(e,t){e.key==="Alt"&&(t.isLocked=!1,t.isMouseIn||(this.hideHover(),this._lastFocusedElementBeforeOpen?.focus()))}setupManagedHover(e,t,n,s){t.setAttribute("custom-hover","true"),t.title!==""&&(console.warn("HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute."),console.trace("Stack trace:",t.title),t.title="");let r,o;const a=(g,p)=>{const m=o!==void 0;g&&(o?.dispose(),o=void 0),p&&(r?.dispose(),r=void 0),m&&(e.onDidHideHover?.(),o=void 0)},l=(g,p,m,_)=>new tl(async()=>{(!o||o.isDisposed)&&(o=new IW(e,m||t,g>0),await o.update(typeof n=="function"?n():n,p,{...s,trapFocus:_}))},g),c=new X;let h=!1;c.add(V(t,j.MOUSE_DOWN,()=>{h=!0,a(!0,!0)},!0)),c.add(V(t,j.MOUSE_UP,()=>{h=!1},!0)),c.add(V(t,j.MOUSE_LEAVE,g=>{h=!1,a(!1,g.fromElement===t)},!0)),c.add(V(t,j.MOUSE_OVER,g=>{if(r)return;const p=new X,m={targetElements:[t],dispose:()=>{}};if(e.placement===void 0||e.placement==="mouse"){const _=v=>{m.x=v.x+10,Ut(v.target)&&jE(v.target,t)!==t&&a(!0,!0)};p.add(V(t,j.MOUSE_MOVE,_,!0))}r=p,!(Ut(g.target)&&jE(g.target,t)!==t)&&p.add(l(typeof e.delay=="function"?e.delay(n):e.delay,!1,m))},!0));const u=()=>{if(h||r)return;const g={targetElements:[t],dispose:()=>{}},p=new X,m=()=>a(!0,!0);p.add(V(t,j.BLUR,m,!0)),p.add(l(typeof e.delay=="function"?e.delay(n):e.delay,!1,g)),r=p};zo(t)||c.add(V(t,j.FOCUS,u,!0));const f={show:g=>{a(!1,!0)},hide:()=>{a(!0,!0)},update:async(g,p)=>{n=g,await o?.update(n,void 0,p)},dispose:()=>{this._managedHovers.delete(t),c.dispose(),a(!0,!0)}};return this._managedHovers.set(t,f),f}showManagedHover(e){const t=this._managedHovers.get(e);t&&t.show(!0)}dispose(){this._managedHovers.forEach(e=>e.dispose()),super.dispose()}};KE=G([L(0,xt),L(1,Vt),L(2,Hf),L(3,$s),L(4,Jo),L(5,qf)],KE);function sa(i){if(i!==void 0)return i?.id??i}function GE(i){if(!Ut(i))return typeof i=="string"?i.toString():i.value}class NW{get anchorPosition(){return this._hover.anchor}constructor(e,t=!1){this._hover=e,this._focus=t,this.layer=1}render(e){return this._hover.render(e),this._focus&&this._hover.focus(),this._hover}getAnchor(){return{x:this._hover.x,y:this._hover.y}}layout(){this._hover.layout()}}function jE(i,e){for(e=e??ke(i).document.body;!i.hasAttribute("custom-hover")&&i!==e;)i=i.parentElement;return i}nS((i,e)=>{const t=i.getColor(rP);t&&(e.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${t.transparent(.5)}; }`),e.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${t.transparent(.5)}; }`))});class ES{constructor(e){this.metadata=e}static convert(e){return e.edits.map(t=>{if(Yl.is(t))return Yl.lift(t);if(Eh.is(t))return Eh.lift(t);throw new Error("Unsupported edit")})}}class Yl extends ES{static is(e){return e instanceof Yl?!0:xi(e)&&Y.isUri(e.resource)&&xi(e.textEdit)}static lift(e){return e instanceof Yl?e:new Yl(e.resource,e.textEdit,e.versionId,e.metadata)}constructor(e,t,n=void 0,s){super(s),this.resource=e,this.textEdit=t,this.versionId=n}}class Eh extends ES{static is(e){return e instanceof Eh?!0:xi(e)&&(!!e.newResource||!!e.oldResource)}static lift(e){return e instanceof Eh?e:new Eh(e.oldResource,e.newResource,e.options,e.metadata)}constructor(e,t,n={},s){super(s),this.oldResource=e,this.newResource=t,this.options=n}}const RW=be("IWorkspaceEditService"),Ii={enableSplitViewResizing:!0,renderSideBySide:!0,renderMarginRevertIcon:!0,renderGutterMenu:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit",diffAlgorithm:"advanced",accessibilityVerbose:!1,experimental:{showMoves:!1,showEmptyDecorations:!0,useTrueInlineView:!1},hideUnchangedRegions:{enabled:!1,contextLineCount:3,minimumLineCount:3,revealLineCount:20},isInEmbeddedEditor:!1,onlyShowAccessibleDiffViewer:!1,renderSideBySideInlineBreakpoint:900,useInlineViewWhenSpaceIsLimited:!0,compactMode:!1},MW=Object.freeze({id:"editor",order:5,type:"object",title:d(210,"Editor"),scope:gt.LANGUAGE_OVERRIDABLE}),Xl={...MW,properties:{"editor.tabSize":{type:"number",default:Oi.tabSize,minimum:1,maximum:16,markdownDescription:d(211,"The number of spaces a tab is equal to. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.indentSize":{anyOf:[{type:"string",enum:["tabSize"]},{type:"number",minimum:1}],default:"tabSize",markdownDescription:d(212,'The number of spaces used for indentation or `"tabSize"` to use the value from `#editor.tabSize#`. This setting is overridden based on the file contents when `#editor.detectIndentation#` is on.')},"editor.insertSpaces":{type:"boolean",default:Oi.insertSpaces,markdownDescription:d(213,"Insert spaces when pressing `Tab`. This setting is overridden based on the file contents when {0} is on.","`#editor.detectIndentation#`")},"editor.detectIndentation":{type:"boolean",default:Oi.detectIndentation,markdownDescription:d(214,"Controls whether {0} and {1} will be automatically detected when a file is opened based on the file contents.","`#editor.tabSize#`","`#editor.insertSpaces#`")},"editor.trimAutoWhitespace":{type:"boolean",default:Oi.trimAutoWhitespace,description:d(215,"Remove trailing auto inserted whitespace.")},"editor.largeFileOptimizations":{type:"boolean",default:Oi.largeFileOptimizations,description:d(216,"Special handling for large files to disable certain memory intensive features.")},"editor.wordBasedSuggestions":{enum:["off","currentDocument","matchingDocuments","allDocuments"],default:"matchingDocuments",enumDescriptions:[d(217,"Turn off Word Based Suggestions."),d(218,"Only suggest words from the active document."),d(219,"Suggest words from all open documents of the same language."),d(220,"Suggest words from all open documents.")],description:d(221,"Controls whether completions should be computed based on words in the document and from which documents they are computed.")},"editor.semanticHighlighting.enabled":{enum:[!0,!1,"configuredByTheme"],enumDescriptions:[d(222,"Semantic highlighting enabled for all color themes."),d(223,"Semantic highlighting disabled for all color themes."),d(224,"Semantic highlighting is configured by the current color theme's `semanticHighlighting` setting.")],default:"configuredByTheme",description:d(225,"Controls whether the semanticHighlighting is shown for the languages that support it.")},"editor.stablePeek":{type:"boolean",default:!1,markdownDescription:d(226,"Keep peek editors open even when double-clicking their content or when hitting `Escape`.")},"editor.maxTokenizationLineLength":{type:"integer",default:2e4,description:d(227,"Lines above this length will not be tokenized for performance reasons")},"editor.experimental.asyncTokenization":{type:"boolean",default:!0,description:d(228,"Controls whether the tokenization should happen asynchronously on a web worker."),tags:["experimental"]},"editor.experimental.asyncTokenizationLogging":{type:"boolean",default:!1,description:d(229,"Controls whether async tokenization should be logged. For debugging only.")},"editor.experimental.asyncTokenizationVerification":{type:"boolean",default:!1,description:d(230,"Controls whether async tokenization should be verified against legacy background tokenization. Might slow down tokenization. For debugging only."),tags:["experimental"]},"editor.experimental.treeSitterTelemetry":{type:"boolean",default:!1,markdownDescription:d(231,"Controls whether tree sitter parsing should be turned on and telemetry collected. Setting `editor.experimental.preferTreeSitter` for specific languages will take precedence."),tags:["experimental","onExP"]},"editor.experimental.preferTreeSitter.css":{type:"boolean",default:!1,markdownDescription:d(232,"Controls whether tree sitter parsing should be turned on for css. This will take precedence over `editor.experimental.treeSitterTelemetry` for css."),tags:["experimental","onExP"]},"editor.experimental.preferTreeSitter.typescript":{type:"boolean",default:!1,markdownDescription:d(233,"Controls whether tree sitter parsing should be turned on for typescript. This will take precedence over `editor.experimental.treeSitterTelemetry` for typescript."),tags:["experimental","onExP"]},"editor.experimental.preferTreeSitter.ini":{type:"boolean",default:!1,markdownDescription:d(234,"Controls whether tree sitter parsing should be turned on for ini. This will take precedence over `editor.experimental.treeSitterTelemetry` for ini."),tags:["experimental","onExP"]},"editor.experimental.preferTreeSitter.regex":{type:"boolean",default:!1,markdownDescription:d(235,"Controls whether tree sitter parsing should be turned on for regex. This will take precedence over `editor.experimental.treeSitterTelemetry` for regex."),tags:["experimental","onExP"]},"editor.language.brackets":{type:["array","null"],default:null,description:d(236,"Defines the bracket symbols that increase or decrease the indentation."),items:{type:"array",items:[{type:"string",description:d(237,"The opening bracket character or string sequence.")},{type:"string",description:d(238,"The closing bracket character or string sequence.")}]}},"editor.language.colorizedBracketPairs":{type:["array","null"],default:null,description:d(239,"Defines the bracket pairs that are colorized by their nesting level if bracket pair colorization is enabled."),items:{type:"array",items:[{type:"string",description:d(237,"The opening bracket character or string sequence.")},{type:"string",description:d(238,"The closing bracket character or string sequence.")}]}},"diffEditor.maxComputationTime":{type:"number",default:Ii.maxComputationTime,description:d(240,"Timeout in milliseconds after which diff computation is cancelled. Use 0 for no timeout.")},"diffEditor.maxFileSize":{type:"number",default:Ii.maxFileSize,description:d(241,"Maximum file size in MB for which to compute diffs. Use 0 for no limit.")},"diffEditor.renderSideBySide":{type:"boolean",default:Ii.renderSideBySide,description:d(242,"Controls whether the diff editor shows the diff side by side or inline.")},"diffEditor.renderSideBySideInlineBreakpoint":{type:"number",default:Ii.renderSideBySideInlineBreakpoint,description:d(243,"If the diff editor width is smaller than this value, the inline view is used.")},"diffEditor.useInlineViewWhenSpaceIsLimited":{type:"boolean",default:Ii.useInlineViewWhenSpaceIsLimited,description:d(244,"If enabled and the editor width is too small, the inline view is used.")},"diffEditor.renderMarginRevertIcon":{type:"boolean",default:Ii.renderMarginRevertIcon,description:d(245,"When enabled, the diff editor shows arrows in its glyph margin to revert changes.")},"diffEditor.renderGutterMenu":{type:"boolean",default:Ii.renderGutterMenu,description:d(246,"When enabled, the diff editor shows a special gutter for revert and stage actions.")},"diffEditor.ignoreTrimWhitespace":{type:"boolean",default:Ii.ignoreTrimWhitespace,description:d(247,"When enabled, the diff editor ignores changes in leading or trailing whitespace.")},"diffEditor.renderIndicators":{type:"boolean",default:Ii.renderIndicators,description:d(248,"Controls whether the diff editor shows +/- indicators for added/removed changes.")},"diffEditor.codeLens":{type:"boolean",default:Ii.diffCodeLens,description:d(249,"Controls whether the editor shows CodeLens.")},"diffEditor.wordWrap":{type:"string",enum:["off","on","inherit"],default:Ii.diffWordWrap,markdownEnumDescriptions:[d(250,"Lines will never wrap."),d(251,"Lines will wrap at the viewport width."),d(252,"Lines will wrap according to the {0} setting.","`#editor.wordWrap#`")]},"diffEditor.diffAlgorithm":{type:"string",enum:["legacy","advanced"],default:Ii.diffAlgorithm,markdownEnumDescriptions:[d(253,"Uses the legacy diffing algorithm."),d(254,"Uses the advanced diffing algorithm.")]},"diffEditor.hideUnchangedRegions.enabled":{type:"boolean",default:Ii.hideUnchangedRegions.enabled,markdownDescription:d(255,"Controls whether the diff editor shows unchanged regions.")},"diffEditor.hideUnchangedRegions.revealLineCount":{type:"integer",default:Ii.hideUnchangedRegions.revealLineCount,markdownDescription:d(256,"Controls how many lines are used for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.minimumLineCount":{type:"integer",default:Ii.hideUnchangedRegions.minimumLineCount,markdownDescription:d(257,"Controls how many lines are used as a minimum for unchanged regions."),minimum:1},"diffEditor.hideUnchangedRegions.contextLineCount":{type:"integer",default:Ii.hideUnchangedRegions.contextLineCount,markdownDescription:d(258,"Controls how many lines are used as context when comparing unchanged regions."),minimum:1},"diffEditor.experimental.showMoves":{type:"boolean",default:Ii.experimental.showMoves,markdownDescription:d(259,"Controls whether the diff editor should show detected code moves.")},"diffEditor.experimental.showEmptyDecorations":{type:"boolean",default:Ii.experimental.showEmptyDecorations,description:d(260,"Controls whether the diff editor shows empty decorations to see where characters got inserted or deleted.")},"diffEditor.experimental.useTrueInlineView":{type:"boolean",default:Ii.experimental.useTrueInlineView,description:d(261,"If enabled and the editor uses the inline view, word changes are rendered inline.")}}};function OW(i){return typeof i.type<"u"||typeof i.anyOf<"u"}for(const i of TT){const e=i.schema;if(typeof e<"u")if(OW(e))Xl.properties[`editor.${i.name}`]=e;else for(const t in e)Object.hasOwnProperty.call(e,t)&&(Xl.properties[t]=e[t])}let Pg=null;function LN(){return Pg===null&&(Pg=Object.create(null),Object.keys(Xl.properties).forEach(i=>{Pg[i]=!0})),Pg}function FW(i){return LN()[`editor.${i}`]||!1}function PW(i){return LN()[`diffEditor.${i}`]||!1}const BW=wt.as(Ps.Configuration);BW.registerConfiguration(Xl);async function Jte(i){const e=["editor.fontFamily"],t=await i();for(const n of e)Xl.properties&&Xl.properties[n]&&(Xl.properties[n].defaultSnippets=t)}const xS=be("textModelService"),G1=be("textResourceConfigurationService"),DN=be("textResourcePropertiesService");var gi;(function(i){i[i.None=0]="None",i[i.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",i[i.UnexpectedEndOfString=2]="UnexpectedEndOfString",i[i.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",i[i.InvalidUnicode=4]="InvalidUnicode",i[i.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",i[i.InvalidCharacter=6]="InvalidCharacter"})(gi||(gi={}));var Q;(function(i){i[i.OpenBraceToken=1]="OpenBraceToken",i[i.CloseBraceToken=2]="CloseBraceToken",i[i.OpenBracketToken=3]="OpenBracketToken",i[i.CloseBracketToken=4]="CloseBracketToken",i[i.CommaToken=5]="CommaToken",i[i.ColonToken=6]="ColonToken",i[i.NullKeyword=7]="NullKeyword",i[i.TrueKeyword=8]="TrueKeyword",i[i.FalseKeyword=9]="FalseKeyword",i[i.StringLiteral=10]="StringLiteral",i[i.NumericLiteral=11]="NumericLiteral",i[i.LineCommentTrivia=12]="LineCommentTrivia",i[i.BlockCommentTrivia=13]="BlockCommentTrivia",i[i.LineBreakTrivia=14]="LineBreakTrivia",i[i.Trivia=15]="Trivia",i[i.Unknown=16]="Unknown",i[i.EOF=17]="EOF"})(Q||(Q={}));var zt;(function(i){i[i.InvalidSymbol=1]="InvalidSymbol",i[i.InvalidNumberFormat=2]="InvalidNumberFormat",i[i.PropertyNameExpected=3]="PropertyNameExpected",i[i.ValueExpected=4]="ValueExpected",i[i.ColonExpected=5]="ColonExpected",i[i.CommaExpected=6]="CommaExpected",i[i.CloseBraceExpected=7]="CloseBraceExpected",i[i.CloseBracketExpected=8]="CloseBracketExpected",i[i.EndOfFileExpected=9]="EndOfFileExpected",i[i.InvalidCommentToken=10]="InvalidCommentToken",i[i.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",i[i.UnexpectedEndOfString=12]="UnexpectedEndOfString",i[i.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",i[i.InvalidUnicode=14]="InvalidUnicode",i[i.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",i[i.InvalidCharacter=16]="InvalidCharacter"})(zt||(zt={}));var sf;(function(i){i.DEFAULT={allowTrailingComma:!0}})(sf||(sf={}));function IN(i,e=!1){let t=0;const n=i.length;let s="",r=0,o=Q.Unknown,a=gi.None;function l(m){let _=0,v=0;for(;_<m;){const y=i.charCodeAt(t);if(y>=de._0&&y<=de._9)v=v*16+y-de._0;else if(y>=de.A&&y<=de.F)v=v*16+y-de.A+10;else if(y>=de.a&&y<=de.f)v=v*16+y-de.a+10;else break;t++,_++}return _<m&&(v=-1),v}function c(m){t=m,s="",r=0,o=Q.Unknown,a=gi.None}function h(){const m=t;if(i.charCodeAt(t)===de._0)t++;else for(t++;t<i.length&&qc(i.charCodeAt(t));)t++;if(t<i.length&&i.charCodeAt(t)===de.dot)if(t++,t<i.length&&qc(i.charCodeAt(t)))for(t++;t<i.length&&qc(i.charCodeAt(t));)t++;else return a=gi.UnexpectedEndOfNumber,i.substring(m,t);let _=t;if(t<i.length&&(i.charCodeAt(t)===de.E||i.charCodeAt(t)===de.e))if(t++,(t<i.length&&i.charCodeAt(t)===de.plus||i.charCodeAt(t)===de.minus)&&t++,t<i.length&&qc(i.charCodeAt(t))){for(t++;t<i.length&&qc(i.charCodeAt(t));)t++;_=t}else a=gi.UnexpectedEndOfNumber;return i.substring(m,_)}function u(){let m="",_=t;for(;;){if(t>=n){m+=i.substring(_,t),a=gi.UnexpectedEndOfString;break}const v=i.charCodeAt(t);if(v===de.doubleQuote){m+=i.substring(_,t),t++;break}if(v===de.backslash){if(m+=i.substring(_,t),t++,t>=n){a=gi.UnexpectedEndOfString;break}switch(i.charCodeAt(t++)){case de.doubleQuote:m+='"';break;case de.backslash:m+="\\";break;case de.slash:m+="/";break;case de.b:m+="\b";break;case de.f:m+="\f";break;case de.n:m+=`
`;break;case de.r:m+="\r";break;case de.t:m+="	";break;case de.u:{const E=l(4);E>=0?m+=String.fromCharCode(E):a=gi.InvalidUnicode;break}default:a=gi.InvalidEscapeCharacter}_=t;continue}if(v>=0&&v<=31)if(Bg(v)){m+=i.substring(_,t),a=gi.UnexpectedEndOfString;break}else a=gi.InvalidCharacter;t++}return m}function f(){if(s="",a=gi.None,r=t,t>=n)return r=n,o=Q.EOF;let m=i.charCodeAt(t);if(l_(m)){do t++,s+=String.fromCharCode(m),m=i.charCodeAt(t);while(l_(m));return o=Q.Trivia}if(Bg(m))return t++,s+=String.fromCharCode(m),m===de.carriageReturn&&i.charCodeAt(t)===de.lineFeed&&(t++,s+=`
`),o=Q.LineBreakTrivia;switch(m){case de.openBrace:return t++,o=Q.OpenBraceToken;case de.closeBrace:return t++,o=Q.CloseBraceToken;case de.openBracket:return t++,o=Q.OpenBracketToken;case de.closeBracket:return t++,o=Q.CloseBracketToken;case de.colon:return t++,o=Q.ColonToken;case de.comma:return t++,o=Q.CommaToken;case de.doubleQuote:return t++,s=u(),o=Q.StringLiteral;case de.slash:{const _=t-1;if(i.charCodeAt(t+1)===de.slash){for(t+=2;t<n&&!Bg(i.charCodeAt(t));)t++;return s=i.substring(_,t),o=Q.LineCommentTrivia}if(i.charCodeAt(t+1)===de.asterisk){t+=2;const v=n-1;let y=!1;for(;t<v;){if(i.charCodeAt(t)===de.asterisk&&i.charCodeAt(t+1)===de.slash){t+=2,y=!0;break}t++}return y||(t++,a=gi.UnexpectedEndOfComment),s=i.substring(_,t),o=Q.BlockCommentTrivia}return s+=String.fromCharCode(m),t++,o=Q.Unknown}case de.minus:if(s+=String.fromCharCode(m),t++,t===n||!qc(i.charCodeAt(t)))return o=Q.Unknown;case de._0:case de._1:case de._2:case de._3:case de._4:case de._5:case de._6:case de._7:case de._8:case de._9:return s+=h(),o=Q.NumericLiteral;default:for(;t<n&&g(m);)t++,m=i.charCodeAt(t);if(r!==t){switch(s=i.substring(r,t),s){case"true":return o=Q.TrueKeyword;case"false":return o=Q.FalseKeyword;case"null":return o=Q.NullKeyword}return o=Q.Unknown}return s+=String.fromCharCode(m),t++,o=Q.Unknown}}function g(m){if(l_(m)||Bg(m))return!1;switch(m){case de.closeBrace:case de.closeBracket:case de.openBrace:case de.openBracket:case de.doubleQuote:case de.colon:case de.comma:case de.slash:return!1}return!0}function p(){let m;do m=f();while(m>=Q.LineCommentTrivia&&m<=Q.Trivia);return m}return{setPosition:c,getPosition:()=>t,scan:e?p:f,getToken:()=>o,getTokenValue:()=>s,getTokenOffset:()=>r,getTokenLength:()=>t-r,getTokenError:()=>a}}function l_(i){return i===de.space||i===de.tab||i===de.verticalTab||i===de.formFeed||i===de.nonBreakingSpace||i===de.ogham||i>=de.enQuad&&i<=de.zeroWidthSpace||i===de.narrowNoBreakSpace||i===de.mathematicalSpace||i===de.ideographicSpace||i===de.byteOrderMark}function Bg(i){return i===de.lineFeed||i===de.carriageReturn||i===de.lineSeparator||i===de.paragraphSeparator}function qc(i){return i>=de._0&&i<=de._9}var de;(function(i){i[i.nullCharacter=0]="nullCharacter",i[i.maxAsciiCharacter=127]="maxAsciiCharacter",i[i.lineFeed=10]="lineFeed",i[i.carriageReturn=13]="carriageReturn",i[i.lineSeparator=8232]="lineSeparator",i[i.paragraphSeparator=8233]="paragraphSeparator",i[i.nextLine=133]="nextLine",i[i.space=32]="space",i[i.nonBreakingSpace=160]="nonBreakingSpace",i[i.enQuad=8192]="enQuad",i[i.emQuad=8193]="emQuad",i[i.enSpace=8194]="enSpace",i[i.emSpace=8195]="emSpace",i[i.threePerEmSpace=8196]="threePerEmSpace",i[i.fourPerEmSpace=8197]="fourPerEmSpace",i[i.sixPerEmSpace=8198]="sixPerEmSpace",i[i.figureSpace=8199]="figureSpace",i[i.punctuationSpace=8200]="punctuationSpace",i[i.thinSpace=8201]="thinSpace",i[i.hairSpace=8202]="hairSpace",i[i.zeroWidthSpace=8203]="zeroWidthSpace",i[i.narrowNoBreakSpace=8239]="narrowNoBreakSpace",i[i.ideographicSpace=12288]="ideographicSpace",i[i.mathematicalSpace=8287]="mathematicalSpace",i[i.ogham=5760]="ogham",i[i._=95]="_",i[i.$=36]="$",i[i._0=48]="_0",i[i._1=49]="_1",i[i._2=50]="_2",i[i._3=51]="_3",i[i._4=52]="_4",i[i._5=53]="_5",i[i._6=54]="_6",i[i._7=55]="_7",i[i._8=56]="_8",i[i._9=57]="_9",i[i.a=97]="a",i[i.b=98]="b",i[i.c=99]="c",i[i.d=100]="d",i[i.e=101]="e",i[i.f=102]="f",i[i.g=103]="g",i[i.h=104]="h",i[i.i=105]="i",i[i.j=106]="j",i[i.k=107]="k",i[i.l=108]="l",i[i.m=109]="m",i[i.n=110]="n",i[i.o=111]="o",i[i.p=112]="p",i[i.q=113]="q",i[i.r=114]="r",i[i.s=115]="s",i[i.t=116]="t",i[i.u=117]="u",i[i.v=118]="v",i[i.w=119]="w",i[i.x=120]="x",i[i.y=121]="y",i[i.z=122]="z",i[i.A=65]="A",i[i.B=66]="B",i[i.C=67]="C",i[i.D=68]="D",i[i.E=69]="E",i[i.F=70]="F",i[i.G=71]="G",i[i.H=72]="H",i[i.I=73]="I",i[i.J=74]="J",i[i.K=75]="K",i[i.L=76]="L",i[i.M=77]="M",i[i.N=78]="N",i[i.O=79]="O",i[i.P=80]="P",i[i.Q=81]="Q",i[i.R=82]="R",i[i.S=83]="S",i[i.T=84]="T",i[i.U=85]="U",i[i.V=86]="V",i[i.W=87]="W",i[i.X=88]="X",i[i.Y=89]="Y",i[i.Z=90]="Z",i[i.ampersand=38]="ampersand",i[i.asterisk=42]="asterisk",i[i.at=64]="at",i[i.backslash=92]="backslash",i[i.bar=124]="bar",i[i.caret=94]="caret",i[i.closeBrace=125]="closeBrace",i[i.closeBracket=93]="closeBracket",i[i.closeParen=41]="closeParen",i[i.colon=58]="colon",i[i.comma=44]="comma",i[i.dot=46]="dot",i[i.doubleQuote=34]="doubleQuote",i[i.equals=61]="equals",i[i.exclamation=33]="exclamation",i[i.greaterThan=62]="greaterThan",i[i.lessThan=60]="lessThan",i[i.minus=45]="minus",i[i.openBrace=123]="openBrace",i[i.openBracket=91]="openBracket",i[i.openParen=40]="openParen",i[i.percent=37]="percent",i[i.plus=43]="plus",i[i.question=63]="question",i[i.semicolon=59]="semicolon",i[i.singleQuote=39]="singleQuote",i[i.slash=47]="slash",i[i.tilde=126]="tilde",i[i.backspace=8]="backspace",i[i.formFeed=12]="formFeed",i[i.byteOrderMark=65279]="byteOrderMark",i[i.tab=9]="tab",i[i.verticalTab=11]="verticalTab"})(de||(de={}));function WW(i,e=[],t=sf.DEFAULT){let n=null,s=[];const r=[];function o(l){Array.isArray(s)?s.push(l):n!==null&&(s[n]=l)}return j1(i,{onObjectBegin:()=>{const l={};o(l),r.push(s),s=l,n=null},onObjectProperty:l=>{n=l},onObjectEnd:()=>{s=r.pop()},onArrayBegin:()=>{const l=[];o(l),r.push(s),s=l,n=null},onArrayEnd:()=>{s=r.pop()},onLiteralValue:o,onError:(l,c,h)=>{e.push({error:l,offset:c,length:h})}},t),s[0]}function UW(i,e=[],t=sf.DEFAULT){let n={type:"array",offset:-1,length:-1,children:[],parent:void 0};function s(l){n.type==="property"&&(n.length=l-n.offset,n=n.parent)}function r(l){return n.children.push(l),l}j1(i,{onObjectBegin:l=>{n=r({type:"object",offset:l,length:-1,parent:n,children:[]})},onObjectProperty:(l,c,h)=>{n=r({type:"property",offset:c,length:-1,parent:n,children:[]}),n.children.push({type:"string",value:l,offset:c,length:h,parent:n})},onObjectEnd:(l,c)=>{n.length=l+c-n.offset,n=n.parent,s(l+c)},onArrayBegin:(l,c)=>{n=r({type:"array",offset:l,length:-1,parent:n,children:[]})},onArrayEnd:(l,c)=>{n.length=l+c-n.offset,n=n.parent,s(l+c)},onLiteralValue:(l,c,h)=>{r({type:HW(l),offset:c,length:h,parent:n,value:l}),s(c+h)},onSeparator:(l,c,h)=>{n.type==="property"&&(l===":"?n.colonOffset=c:l===","&&s(c))},onError:(l,c,h)=>{e.push({error:l,offset:c,length:h})}},t);const a=n.children[0];return a&&delete a.parent,a}function YE(i,e){if(!i)return;let t=i;for(const n of e)if(typeof n=="string"){if(t.type!=="object"||!Array.isArray(t.children))return;let s=!1;for(const r of t.children)if(Array.isArray(r.children)&&r.children[0].value===n){t=r.children[1],s=!0;break}if(!s)return}else{const s=n;if(t.type!=="array"||s<0||!Array.isArray(t.children)||s>=t.children.length)return;t=t.children[s]}return t}function j1(i,e,t=sf.DEFAULT){const n=IN(i,!1);function s(F){return F?()=>F(n.getTokenOffset(),n.getTokenLength()):()=>!0}function r(F){return F?te=>F(te,n.getTokenOffset(),n.getTokenLength()):()=>!0}const o=s(e.onObjectBegin),a=r(e.onObjectProperty),l=s(e.onObjectEnd),c=s(e.onArrayBegin),h=s(e.onArrayEnd),u=r(e.onLiteralValue),f=r(e.onSeparator),g=s(e.onComment),p=r(e.onError),m=t&&t.disallowComments,_=t&&t.allowTrailingComma;function v(){for(;;){const F=n.scan();switch(n.getTokenError()){case gi.InvalidUnicode:y(zt.InvalidUnicode);break;case gi.InvalidEscapeCharacter:y(zt.InvalidEscapeCharacter);break;case gi.UnexpectedEndOfNumber:y(zt.UnexpectedEndOfNumber);break;case gi.UnexpectedEndOfComment:m||y(zt.UnexpectedEndOfComment);break;case gi.UnexpectedEndOfString:y(zt.UnexpectedEndOfString);break;case gi.InvalidCharacter:y(zt.InvalidCharacter);break}switch(F){case Q.LineCommentTrivia:case Q.BlockCommentTrivia:m?y(zt.InvalidCommentToken):g();break;case Q.Unknown:y(zt.InvalidSymbol);break;case Q.Trivia:case Q.LineBreakTrivia:break;default:return F}}}function y(F,te=[],J=[]){if(p(F),te.length+J.length>0){let le=n.getToken();for(;le!==Q.EOF;){if(te.indexOf(le)!==-1){v();break}else if(J.indexOf(le)!==-1)break;le=v()}}}function E(F){const te=n.getTokenValue();return F?u(te):a(te),v(),!0}function N(){switch(n.getToken()){case Q.NumericLiteral:{let F=0;try{F=JSON.parse(n.getTokenValue()),typeof F!="number"&&(y(zt.InvalidNumberFormat),F=0)}catch{y(zt.InvalidNumberFormat)}u(F);break}case Q.NullKeyword:u(null);break;case Q.TrueKeyword:u(!0);break;case Q.FalseKeyword:u(!1);break;default:return!1}return v(),!0}function I(){return n.getToken()!==Q.StringLiteral?(y(zt.PropertyNameExpected,[],[Q.CloseBraceToken,Q.CommaToken]),!1):(E(!1),n.getToken()===Q.ColonToken?(f(":"),v(),D()||y(zt.ValueExpected,[],[Q.CloseBraceToken,Q.CommaToken])):y(zt.ColonExpected,[],[Q.CloseBraceToken,Q.CommaToken]),!0)}function B(){o(),v();let F=!1;for(;n.getToken()!==Q.CloseBraceToken&&n.getToken()!==Q.EOF;){if(n.getToken()===Q.CommaToken){if(F||y(zt.ValueExpected,[],[]),f(","),v(),n.getToken()===Q.CloseBraceToken&&_)break}else F&&y(zt.CommaExpected,[],[]);I()||y(zt.ValueExpected,[],[Q.CloseBraceToken,Q.CommaToken]),F=!0}return l(),n.getToken()!==Q.CloseBraceToken?y(zt.CloseBraceExpected,[Q.CloseBraceToken],[]):v(),!0}function x(){c(),v();let F=!1;for(;n.getToken()!==Q.CloseBracketToken&&n.getToken()!==Q.EOF;){if(n.getToken()===Q.CommaToken){if(F||y(zt.ValueExpected,[],[]),f(","),v(),n.getToken()===Q.CloseBracketToken&&_)break}else F&&y(zt.CommaExpected,[],[]);D()||y(zt.ValueExpected,[],[Q.CloseBracketToken,Q.CommaToken]),F=!0}return h(),n.getToken()!==Q.CloseBracketToken?y(zt.CloseBracketExpected,[Q.CloseBracketToken],[]):v(),!0}function D(){switch(n.getToken()){case Q.OpenBracketToken:return x();case Q.OpenBraceToken:return B();case Q.StringLiteral:return E(!0);default:return N()}}return v(),n.getToken()===Q.EOF?t.allowEmptyContent?!0:(y(zt.ValueExpected,[],[]),!1):D()?(n.getToken()!==Q.EOF&&y(zt.EndOfFileExpected,[],[]),!0):(y(zt.ValueExpected,[],[]),!1)}function HW(i){switch(typeof i){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(i){if(Array.isArray(i))return"array"}else return"null";return"object"}default:return"null"}}function Yu(i){return Object.isFrozen(i)?i:bO(i)}class Yt{static createEmptyModel(e){return new Yt({},[],[],void 0,e)}constructor(e,t,n,s,r){this._contents=e,this._keys=t,this._overrides=n,this.raw=s,this.logService=r,this.overrideConfigurations=new Map}get rawConfiguration(){if(!this._rawConfiguration)if(this.raw){const e=(Array.isArray(this.raw)?this.raw:[this.raw]).map(t=>{if(t instanceof Yt)return t;const n=new TN("",this.logService);return n.parseRaw(t),n.configurationModel});this._rawConfiguration=e.reduce((t,n)=>n===t?n:t.merge(n),e[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?xm(this.contents,e):this.contents}inspect(e,t){const n=this;return{get value(){return Yu(n.rawConfiguration.getValue(e))},get override(){return t?Yu(n.rawConfiguration.getOverrideValue(e,t)):void 0},get merged(){return Yu(t?n.rawConfiguration.override(t).getValue(e):n.rawConfiguration.getValue(e))},get overrides(){const s=[];for(const{contents:r,identifiers:o,keys:a}of n.rawConfiguration.overrides){const l=new Yt(r,a,[],void 0,n.logService).getValue(e);l!==void 0&&s.push({identifiers:o,value:l})}return s.length?Yu(s):void 0}}}getOverrideValue(e,t){const n=this.getContentsForOverrideIdentifer(t);return n?e?xm(n,e):n:void 0}getKeysForOverrideIdentifier(e){const t=[];for(const n of this.overrides)n.identifiers.includes(e)&&t.push(...n.keys);return Mo(t)}getAllOverrideIdentifiers(){const e=[];for(const t of this.overrides)e.push(...t.identifiers);return Mo(e)}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){const t=da(this.contents),n=da(this.overrides),s=[...this.keys],r=this.raw?Array.isArray(this.raw)?[...this.raw]:[this.raw]:[this];for(const o of e)if(r.push(...o.raw?Array.isArray(o.raw)?o.raw:[o.raw]:[o]),!o.isEmpty()){this.mergeContents(t,o.contents);for(const a of o.overrides){const[l]=n.filter(c=>wi(c.identifiers,a.identifiers));l?(this.mergeContents(l.contents,a.contents),l.keys.push(...a.keys),l.keys=Mo(l.keys)):n.push(da(a))}for(const a of o.keys)s.indexOf(a)===-1&&s.push(a)}return new Yt(t,s,n,!r.length||r.every(o=>o instanceof Yt)?void 0:r,this.logService)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const n={};for(const s of Mo([...Object.keys(this.contents),...Object.keys(t)])){let r=this.contents[s];const o=t[s];o&&(typeof r=="object"&&typeof o=="object"?(r=da(r),this.mergeContents(r,o)):r=o),n[s]=r}return new Yt(n,this.keys,this.overrides,void 0,this.logService)}mergeContents(e,t){for(const n of Object.keys(t)){if(n in e&&xi(e[n])&&xi(t[n])){this.mergeContents(e[n],t[n]);continue}e[n]=da(t[n])}}getContentsForOverrideIdentifer(e){let t=null,n=null;const s=r=>{r&&(n?this.mergeContents(n,r):n=da(r))};for(const r of this.overrides)r.identifiers.length===1&&r.identifiers[0]===e?t=r.contents:r.identifiers.includes(e)&&s(r.contents);return s(t),n}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(e,t){this.updateValue(e,t,!0)}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);t!==-1&&(this.keys.splice(t,1),sW(this.contents,e),qo.test(e)&&this.overrides.splice(this.overrides.findIndex(n=>wi(n.identifiers,tf(e))),1))}updateValue(e,t,n){if(wN(this.contents,e,t,s=>this.logService.error(s)),n=n||this.keys.indexOf(e)===-1,n&&this.keys.push(e),qo.test(e)){const s=tf(e),r={identifiers:s,keys:Object.keys(this.contents[e]),contents:ew(this.contents[e],a=>this.logService.error(a))},o=this.overrides.findIndex(a=>wi(a.identifiers,s));o!==-1?this.overrides[o]=r:this.overrides.push(r)}}}class TN{constructor(e,t){this._name=e,this.logService=t,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[],this._parseErrors=[]}get configurationModel(){return this._configurationModel||Yt.createEmptyModel(this.logService)}get restrictedConfigurations(){return this._restrictedConfigurations}get errors(){return this._parseErrors}parse(e,t){if(!wn(e)){const n=this.doParseContent(e);this.parseRaw(n,t)}}reparse(e){this._raw&&this.parseRaw(this._raw,e)}parseRaw(e,t){this._raw=e;const{contents:n,keys:s,overrides:r,restricted:o,hasExcludedProperties:a}=this.doParseRaw(e,t);this._configurationModel=new Yt(n,s,r,a?[e]:void 0,this.logService),this._restrictedConfigurations=o||[]}doParseContent(e){let t={},n=null,s=[];const r=[];function o(l){Array.isArray(s)?s.push(l):n!==null&&(s[n]=l)}const a={onObjectBegin:()=>{const l={};o(l),r.push(s),s=l,n=null},onObjectProperty:l=>{n=l},onObjectEnd:()=>{s=r.pop()},onArrayBegin:()=>{const l=[];o(l),r.push(s),s=l,n=null},onArrayEnd:()=>{s=r.pop()},onLiteralValue:o,onError:(l,c,h)=>{}};if(e)try{j1(e,a),t=s[0]||{}}catch(l){this.logService.error(`Error while parsing settings file ${this._name}: ${l}`),this._parseErrors=[l]}return t}doParseRaw(e,t){const n=wt.as(Ps.Configuration).getConfigurationProperties(),s=this.filter(e,n,!0,t);e=s.raw;const r=ew(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`)),o=Object.keys(e),a=this.toOverrides(e,l=>this.logService.error(`Conflict in settings file ${this._name}: ${l}`));return{contents:r,keys:o,overrides:a,restricted:s.restricted,hasExcludedProperties:s.hasExcludedProperties}}filter(e,t,n,s){let r=!1;if(!s?.scopes&&!s?.skipRestricted&&!s?.exclude?.length)return{raw:e,restricted:[],hasExcludedProperties:r};const o={},a=[];for(const l in e)if(qo.test(l)&&n){const c=this.filter(e[l],t,!1,s);o[l]=c.raw,r=r||c.hasExcludedProperties,a.push(...c.restricted)}else{const c=t[l];c?.restricted&&a.push(l),this.shouldInclude(l,c,s)?o[l]=e[l]:r=!0}return{raw:o,restricted:a,hasExcludedProperties:r}}shouldInclude(e,t,n){if(n.exclude?.includes(e))return!1;if(n.include?.includes(e))return!0;if(n.skipRestricted&&t?.restricted||n.skipUnregistered&&!t)return!1;const s=t?typeof t.scope<"u"?t.scope:gt.WINDOW:void 0;return s===void 0||n.scopes===void 0?!0:n.scopes.includes(s)}toOverrides(e,t){const n=[];for(const s of Object.keys(e))if(qo.test(s)){const r={};for(const o in e[s])r[o]=e[s][o];n.push({identifiers:tf(s),keys:Object.keys(r),contents:ew(r,t)})}return n}}class eie extends ${constructor(e,t,n,s,r){super(),this.userSettingsResource=e,this.parseOptions=t,this.fileService=s,this.logService=r,this._onDidChange=this._register(new A),this.onDidChange=this._onDidChange.event,this.parser=new TN(this.userSettingsResource.toString(),r),this._register(this.fileService.watch(n.dirname(this.userSettingsResource))),this._register(this.fileService.watch(this.userSettingsResource)),this._register(W.any(W.filter(this.fileService.onDidFilesChange,o=>o.contains(this.userSettingsResource)),W.filter(this.fileService.onDidRunOperation,o=>(o.isOperation($n.CREATE)||o.isOperation($n.COPY)||o.isOperation($n.DELETE)||o.isOperation($n.WRITE))&&n.isEqual(o.resource,e)))(()=>this._onDidChange.fire()))}async loadConfiguration(){try{const e=await this.fileService.readFile(this.userSettingsResource);return this.parser.parse(e.value.toString()||"{}",this.parseOptions),this.parser.configurationModel}catch{return Yt.createEmptyModel(this.logService)}}reparse(e){return e&&(this.parseOptions=e),this.parser.reparse(this.parseOptions),this.parser.configurationModel}getRestrictedSettings(){return this.parser.restrictedConfigurations}}class VW{constructor(e,t,n,s,r,o,a,l,c,h,u,f,g){this.key=e,this.overrides=t,this._value=n,this.overrideIdentifiers=s,this.defaultConfiguration=r,this.policyConfiguration=o,this.applicationConfiguration=a,this.userConfiguration=l,this.localUserConfiguration=c,this.remoteUserConfiguration=h,this.workspaceConfiguration=u,this.folderConfigurationModel=f,this.memoryConfigurationModel=g}get value(){return Yu(this._value)}toInspectValue(e){return e?.value!==void 0||e?.override!==void 0||e?.overrides!==void 0?e:void 0}get defaultInspectValue(){return this._defaultInspectValue||(this._defaultInspectValue=this.defaultConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._defaultInspectValue}get defaultValue(){return this.defaultInspectValue.merged}get default(){return this.toInspectValue(this.defaultInspectValue)}get policyInspectValue(){return this._policyInspectValue===void 0&&(this._policyInspectValue=this.policyConfiguration?this.policyConfiguration.inspect(this.key):null),this._policyInspectValue}get policyValue(){return this.policyInspectValue?.merged}get policy(){return this.policyInspectValue?.value!==void 0?{value:this.policyInspectValue.value}:void 0}get applicationInspectValue(){return this._applicationInspectValue===void 0&&(this._applicationInspectValue=this.applicationConfiguration?this.applicationConfiguration.inspect(this.key):null),this._applicationInspectValue}get applicationValue(){return this.applicationInspectValue?.merged}get application(){return this.toInspectValue(this.applicationInspectValue)}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get userValue(){return this.userInspectValue.merged}get user(){return this.toInspectValue(this.userInspectValue)}get userLocalInspectValue(){return this._userLocalInspectValue||(this._userLocalInspectValue=this.localUserConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userLocalInspectValue}get userLocalValue(){return this.userLocalInspectValue.merged}get userLocal(){return this.toInspectValue(this.userLocalInspectValue)}get userRemoteInspectValue(){return this._userRemoteInspectValue||(this._userRemoteInspectValue=this.remoteUserConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userRemoteInspectValue}get userRemoteValue(){return this.userRemoteInspectValue.merged}get userRemote(){return this.toInspectValue(this.userRemoteInspectValue)}get workspaceInspectValue(){return this._workspaceInspectValue===void 0&&(this._workspaceInspectValue=this.workspaceConfiguration?this.workspaceConfiguration.inspect(this.key,this.overrides.overrideIdentifier):null),this._workspaceInspectValue}get workspaceValue(){return this.workspaceInspectValue?.merged}get workspace(){return this.toInspectValue(this.workspaceInspectValue)}get workspaceFolderInspectValue(){return this._workspaceFolderInspectValue===void 0&&(this._workspaceFolderInspectValue=this.folderConfigurationModel?this.folderConfigurationModel.inspect(this.key,this.overrides.overrideIdentifier):null),this._workspaceFolderInspectValue}get workspaceFolderValue(){return this.workspaceFolderInspectValue?.merged}get workspaceFolder(){return this.toInspectValue(this.workspaceFolderInspectValue)}get memoryInspectValue(){return this._memoryInspectValue===void 0&&(this._memoryInspectValue=this.memoryConfigurationModel.inspect(this.key,this.overrides.overrideIdentifier)),this._memoryInspectValue}get memoryValue(){return this.memoryInspectValue.merged}get memory(){return this.toInspectValue(this.memoryInspectValue)}}let AN=class NN{constructor(e,t,n,s,r,o,a,l,c,h){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=n,this._localUserConfiguration=s,this._remoteUserConfiguration=r,this._workspaceConfiguration=o,this._folderConfigurations=a,this._memoryConfiguration=l,this._memoryConfigurationByResource=c,this.logService=h,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new oi,this._userConfiguration=null}getValue(e,t,n){return this.getConsolidatedConfigurationModel(e,t,n).getValue(e)}updateValue(e,t,n={}){let s;n.resource?(s=this._memoryConfigurationByResource.get(n.resource),s||(s=Yt.createEmptyModel(this.logService),this._memoryConfigurationByResource.set(n.resource,s))):s=this._memoryConfiguration,t===void 0?s.removeValue(e):s.setValue(e,t),n.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,n){const s=this.getConsolidatedConfigurationModel(e,t,n),r=this.getFolderConfigurationModelForResource(t.resource,n),o=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=new Set;for(const l of s.overrides)for(const c of l.identifiers)s.getOverrideValue(e,c)!==void 0&&a.add(c);return new VW(e,t,s.getValue(e),a.size?[...a]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,n?this._workspaceConfiguration:void 0,r||void 0,o)}keys(e){const t=this.getFolderConfigurationModelForResource(void 0,e);return{default:this._defaultConfiguration.keys.slice(0),user:this.userConfiguration.keys.slice(0),workspace:this._workspaceConfiguration.keys.slice(0),workspaceFolder:t?t.keys.slice(0):[]}}updateDefaultConfiguration(e){this._defaultConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updatePolicyConfiguration(e){this._policyConfiguration=e}updateApplicationConfiguration(e){this._applicationConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateLocalUserConfiguration(e){this._localUserConfiguration=e,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateRemoteUserConfiguration(e){this._remoteUserConfiguration=e,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateWorkspaceConfiguration(e){this._workspaceConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateFolderConfiguration(e,t){this._folderConfigurations.set(e,t),this._foldersConsolidatedConfigurations.delete(e)}deleteFolderConfiguration(e){this.folderConfigurations.delete(e),this._foldersConsolidatedConfigurations.delete(e)}compareAndUpdateDefaultConfiguration(e,t){const n=[];if(!t){const{added:s,updated:r,removed:o}=ra(this._defaultConfiguration,e);t=[...s,...r,...o]}for(const s of t)for(const r of tf(s)){const o=this._defaultConfiguration.getKeysForOverrideIdentifier(r),a=e.getKeysForOverrideIdentifier(r),l=[...a.filter(c=>o.indexOf(c)===-1),...o.filter(c=>a.indexOf(c)===-1),...o.filter(c=>!Wi(this._defaultConfiguration.override(r).getValue(c),e.override(r).getValue(c)))];n.push([r,l])}return this.updateDefaultConfiguration(e),{keys:t,overrides:n}}compareAndUpdatePolicyConfiguration(e){const{added:t,updated:n,removed:s}=ra(this._policyConfiguration,e),r=[...t,...n,...s];return r.length&&this.updatePolicyConfiguration(e),{keys:r,overrides:[]}}compareAndUpdateApplicationConfiguration(e){const{added:t,updated:n,removed:s,overrides:r}=ra(this.applicationConfiguration,e),o=[...t,...n,...s];return o.length&&this.updateApplicationConfiguration(e),{keys:o,overrides:r}}compareAndUpdateLocalUserConfiguration(e){const{added:t,updated:n,removed:s,overrides:r}=ra(this.localUserConfiguration,e),o=[...t,...n,...s];return o.length&&this.updateLocalUserConfiguration(e),{keys:o,overrides:r}}compareAndUpdateRemoteUserConfiguration(e){const{added:t,updated:n,removed:s,overrides:r}=ra(this.remoteUserConfiguration,e),o=[...t,...n,...s];return o.length&&this.updateRemoteUserConfiguration(e),{keys:o,overrides:r}}compareAndUpdateWorkspaceConfiguration(e){const{added:t,updated:n,removed:s,overrides:r}=ra(this.workspaceConfiguration,e),o=[...t,...n,...s];return o.length&&this.updateWorkspaceConfiguration(e),{keys:o,overrides:r}}compareAndUpdateFolderConfiguration(e,t){const n=this.folderConfigurations.get(e),{added:s,updated:r,removed:o,overrides:a}=ra(n,t),l=[...s,...r,...o];return(l.length||!n)&&this.updateFolderConfiguration(e,t),{keys:l,overrides:a}}compareAndDeleteFolderConfiguration(e){const t=this.folderConfigurations.get(e);if(!t)throw new Error("Unknown folder");this.deleteFolderConfiguration(e);const{added:n,updated:s,removed:r,overrides:o}=ra(t,void 0);return{keys:[...n,...s,...r],overrides:o}}get defaults(){return this._defaultConfiguration}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){if(!this._userConfiguration)if(this._remoteUserConfiguration.isEmpty())this._userConfiguration=this._localUserConfiguration;else{const e=this._localUserConfiguration.merge(this._remoteUserConfiguration);this._userConfiguration=new Yt(e.contents,e.keys,e.overrides,void 0,this.logService)}return this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}get workspaceConfiguration(){return this._workspaceConfiguration}get folderConfigurations(){return this._folderConfigurations}getConsolidatedConfigurationModel(e,t,n){let s=this.getConsolidatedConfigurationModelForResource(t,n);if(t.overrideIdentifier&&(s=s.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0){s=s.merge();for(const r of this._policyConfiguration.keys)s.setValue(r,this._policyConfiguration.getValue(r))}return s}getConsolidatedConfigurationModelForResource({resource:e},t){let n=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const s=t.getFolder(e);s&&(n=this.getFolderConsolidatedConfiguration(s.uri)||n);const r=this._memoryConfigurationByResource.get(e);r&&(n=n.merge(r))}return n}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const n=this.getWorkspaceConsolidatedConfiguration(),s=this._folderConfigurations.get(e);s?(t=n.merge(s),this._foldersConsolidatedConfigurations.set(e,t)):t=n}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const n=t.getFolder(e);if(n)return this._folderConfigurations.get(n.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys,raw:Array.isArray(this.applicationConfiguration.raw)?void 0:this.applicationConfiguration.raw},userLocal:{contents:this.localUserConfiguration.contents,overrides:this.localUserConfiguration.overrides,keys:this.localUserConfiguration.keys,raw:Array.isArray(this.localUserConfiguration.raw)?void 0:this.localUserConfiguration.raw},userRemote:{contents:this.remoteUserConfiguration.contents,overrides:this.remoteUserConfiguration.overrides,keys:this.remoteUserConfiguration.keys,raw:Array.isArray(this.remoteUserConfiguration.raw)?void 0:this.remoteUserConfiguration.raw},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:n,overrides:s,keys:r}=this._folderConfigurations.get(t);return e.push([t,{contents:n,overrides:s,keys:r}]),e},[])}}allKeys(){const e=new Set;return this._defaultConfiguration.keys.forEach(t=>e.add(t)),this.userConfiguration.keys.forEach(t=>e.add(t)),this._workspaceConfiguration.keys.forEach(t=>e.add(t)),this._folderConfigurations.forEach(t=>t.keys.forEach(n=>e.add(n))),[...e.values()]}allOverrideIdentifiers(){const e=new Set;return this._defaultConfiguration.getAllOverrideIdentifiers().forEach(t=>e.add(t)),this.userConfiguration.getAllOverrideIdentifiers().forEach(t=>e.add(t)),this._workspaceConfiguration.getAllOverrideIdentifiers().forEach(t=>e.add(t)),this._folderConfigurations.forEach(t=>t.getAllOverrideIdentifiers().forEach(n=>e.add(n))),[...e.values()]}getAllKeysForOverrideIdentifier(e){const t=new Set;return this._defaultConfiguration.getKeysForOverrideIdentifier(e).forEach(n=>t.add(n)),this.userConfiguration.getKeysForOverrideIdentifier(e).forEach(n=>t.add(n)),this._workspaceConfiguration.getKeysForOverrideIdentifier(e).forEach(n=>t.add(n)),this._folderConfigurations.forEach(n=>n.getKeysForOverrideIdentifier(e).forEach(s=>t.add(s))),[...t.values()]}static parse(e,t){const n=this.parseConfigurationModel(e.defaults,t),s=this.parseConfigurationModel(e.policy,t),r=this.parseConfigurationModel(e.application,t),o=this.parseConfigurationModel(e.userLocal,t),a=this.parseConfigurationModel(e.userRemote,t),l=this.parseConfigurationModel(e.workspace,t),c=e.folders.reduce((h,u)=>(h.set(Y.revive(u[0]),this.parseConfigurationModel(u[1],t)),h),new oi);return new NN(n,s,r,o,a,l,c,Yt.createEmptyModel(t),new oi,t)}static parseConfigurationModel(e,t){return new Yt(e.contents,e.keys,e.overrides,e.raw,t)}};function tie(...i){if(i.length===0)return{keys:[],overrides:[]};if(i.length===1)return i[0];const e=new Set,t=new Map;for(const s of i)s.keys.forEach(r=>e.add(r)),s.overrides.forEach(([r,o])=>{const a=J_(t,r,new Set);o.forEach(l=>a.add(l))});const n=[];return t.forEach((s,r)=>n.push([r,[...s.values()]])),{keys:[...e.values()],overrides:n}}class zW{constructor(e,t,n,s,r){this.change=e,this.previous=t,this.currentConfiguraiton=n,this.currentWorkspace=s,this.logService=r,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=46,this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const o of e.keys)this.affectedKeys.add(o);for(const[,o]of e.overrides)for(const a of o)this.affectedKeys.add(a);this._affectsConfigStr=this._marker;for(const o of this.affectedKeys)this._affectsConfigStr+=o+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=AN.parse(this.previous.data,this.logService)),this._previousConfiguration}affectsConfiguration(e,t){const n=this._marker+e,s=this._affectsConfigStr.indexOf(n);if(s<0)return!1;const r=s+n.length;if(r>=this._affectsConfigStr.length)return!1;const o=this._affectsConfigStr.charCodeAt(r);if(o!==this._markerCode1&&o!==this._markerCode2)return!1;if(t){const a=this.previousConfiguration?this.previousConfiguration.getValue(e,t,this.previous?.workspace):void 0,l=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!Wi(a,l)}return!0}}function ra(i,e){const{added:t,removed:n,updated:s}=XE(e?.rawConfiguration,i?.rawConfiguration),r=[],o=i?.getAllOverrideIdentifiers()||[],a=e?.getAllOverrideIdentifiers()||[];if(e){const l=a.filter(c=>!o.includes(c));for(const c of l)r.push([c,e.getKeysForOverrideIdentifier(c)])}if(i){const l=o.filter(c=>!a.includes(c));for(const c of l)r.push([c,i.getKeysForOverrideIdentifier(c)])}if(e&&i){for(const l of o)if(a.includes(l)){const c=XE({contents:i.getOverrideValue(void 0,l)||{},keys:i.getKeysForOverrideIdentifier(l)},{contents:e.getOverrideValue(void 0,l)||{},keys:e.getKeysForOverrideIdentifier(l)});r.push([l,[...c.added,...c.removed,...c.updated]])}}return{added:t,removed:n,updated:s,overrides:r}}function XE(i,e){const t=i?e?i.keys.filter(r=>e.keys.indexOf(r)===-1):[...i.keys]:[],n=e?i?e.keys.filter(r=>i.keys.indexOf(r)===-1):[...e.keys]:[],s=[];if(i&&e){for(const r of e.keys)if(i.keys.indexOf(r)!==-1){const o=xm(e.contents,r),a=xm(i.contents,r);Wi(o,a)||s.push(r)}}return{added:t,removed:n,updated:s}}class $W{constructor(){this._onDidChange=new A,this.onDidChange=this._onDidChange.event,this._enabled=!0}get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}}const c_=new $W,qW=/^(cursor|delete|undo|redo|tab|editor\.action\.clipboard)/;class KW extends ${get onDidUpdateKeybindings(){return this._onDidUpdateKeybindings?this._onDidUpdateKeybindings.event:W.None}get inChordMode(){return this._currentChords.length>0}constructor(e,t,n,s,r){super(),this._contextKeyService=e,this._commandService=t,this._telemetryService=n,this._notificationService=s,this._logService=r,this._onDidUpdateKeybindings=this._register(new A),this._currentChords=[],this._currentChordChecker=new Hy,this._currentChordStatusMessage=null,this._ignoreSingleModifiers=dh.EMPTY,this._currentSingleModifier=null,this._currentSingleModifierClearTimeout=new tl,this._currentlyDispatchingCommandId=null,this._logging=!1}dispose(){super.dispose()}getDefaultKeybindingsContent(){return""}toggleLogging(){return this._logging=!this._logging,this._logging}_log(e){this._logging&&this._logService.info(`[KeybindingService]: ${e}`)}getDefaultKeybindings(){return this._getResolver().getDefaultKeybindings()}getKeybindings(){return this._getResolver().getKeybindings()}customKeybindingsCount(){return 0}lookupKeybindings(e){return ru(this._getResolver().lookupKeybindings(e).map(t=>t.resolvedKeybinding))}lookupKeybinding(e,t,n=!1){const s=this._getResolver().lookupPrimaryKeybinding(e,t||this._contextKeyService,n);if(s)return s.resolvedKeybinding}dispatchEvent(e,t){return this._dispatch(e,t)}softDispatch(e,t){this._log("/ Soft dispatching keyboard event");const n=this.resolveKeyboardEvent(e);if(n.hasMultipleChords())return console.warn("keyboard event should not be mapped to multiple chords"),Im;const[s]=n.getDispatchChords();if(s===null)return this._log("\\ Keyboard event cannot be dispatched"),Im;const r=this._contextKeyService.getContext(t),o=this._currentChords.map(({keypress:a})=>a);return this._getResolver().resolve(r,o,s)}_scheduleLeaveChordMode(){const e=Date.now();this._currentChordChecker.cancelAndSet(()=>{if(!this._documentHasFocus()){this._leaveChordMode();return}Date.now()-e>5e3&&this._leaveChordMode()},500)}_expectAnotherChord(e,t){switch(this._currentChords.push({keypress:e,label:t}),this._currentChords.length){case 0:throw ly("impossible");case 1:this._currentChordStatusMessage=this._notificationService.status(d(1891,"({0}) was pressed. Waiting for second key of chord...",t));break;default:{const n=this._currentChords.map(({label:s})=>s).join(", ");this._currentChordStatusMessage=this._notificationService.status(d(1892,"({0}) was pressed. Waiting for next key of chord...",n))}}this._scheduleLeaveChordMode(),c_.enabled&&c_.disable()}_leaveChordMode(){this._currentChordStatusMessage&&(this._currentChordStatusMessage.close(),this._currentChordStatusMessage=null),this._currentChordChecker.cancel(),this._currentChords=[],c_.enable()}dispatchByUserSettingsLabel(e,t){this._log(`/ Dispatching keybinding triggered via menu entry accelerator - ${e}`);const n=this.resolveUserBinding(e);n.length===0?this._log(`\\ Could not resolve - ${e}`):this._doDispatch(n[0],t,!1)}_dispatch(e,t){return this._doDispatch(this.resolveKeyboardEvent(e),t,!1)}_singleModifierDispatch(e,t){const n=this.resolveKeyboardEvent(e),[s]=n.getSingleModifierDispatchChords();if(s)return this._ignoreSingleModifiers.has(s)?(this._log(`+ Ignoring single modifier ${s} due to it being pressed together with other keys.`),this._ignoreSingleModifiers=dh.EMPTY,this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1):(this._ignoreSingleModifiers=dh.EMPTY,this._currentSingleModifier===null?(this._log(`+ Storing single modifier for possible chord ${s}.`),this._currentSingleModifier=s,this._currentSingleModifierClearTimeout.cancelAndSet(()=>{this._log("+ Clearing single modifier due to 300ms elapsed."),this._currentSingleModifier=null},300),!1):s===this._currentSingleModifier?(this._log(`/ Dispatching single modifier chord ${s} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,this._doDispatch(n,t,!0)):(this._log(`+ Clearing single modifier due to modifier mismatch: ${this._currentSingleModifier} ${s}`),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1));const[r]=n.getChords();return this._ignoreSingleModifiers=new dh(r),this._currentSingleModifier!==null&&this._log("+ Clearing single modifier due to other key up."),this._currentSingleModifierClearTimeout.cancel(),this._currentSingleModifier=null,!1}_doDispatch(e,t,n=!1){let s=!1;if(e.hasMultipleChords())return console.warn("Unexpected keyboard event mapped to multiple chords"),!1;let r=null,o=null;if(n){const[h]=e.getSingleModifierDispatchChords();r=h,o=h?[h]:[]}else[r]=e.getDispatchChords(),o=this._currentChords.map(({keypress:h})=>h);if(r===null)return this._log("\\ Keyboard event cannot be dispatched in keydown phase."),s;const a=this._contextKeyService.getContext(t),l=e.getLabel(),c=this._getResolver().resolve(a,o,r);switch(c.kind){case dr.NoMatchingKb:{if(this._logService.trace("KeybindingService#dispatch",l,"[ No matching keybinding ]"),this.inChordMode){const h=this._currentChords.map(({label:u})=>u).join(", ");this._log(`+ Leaving multi-chord mode: Nothing bound to "${h}, ${l}".`),this._notificationService.status(d(1893,"The key combination ({0}, {1}) is not a command.",h,l),{hideAfter:10*1e3}),this._leaveChordMode(),s=!0}return s}case dr.MoreChordsNeeded:return this._logService.trace("KeybindingService#dispatch",l,"[ Several keybindings match - more chords needed ]"),s=!0,this._expectAnotherChord(r,l),this._log(this._currentChords.length===1?"+ Entering multi-chord mode...":"+ Continuing multi-chord mode..."),s;case dr.KbFound:{if(this._logService.trace("KeybindingService#dispatch",l,`[ Will dispatch command ${c.commandId} ]`),c.commandId===null||c.commandId===""){if(this.inChordMode){const h=this._currentChords.map(({label:u})=>u).join(", ");this._log(`+ Leaving chord mode: Nothing bound to "${h}, ${l}".`),this._notificationService.status(d(1893,"The key combination ({0}, {1}) is not a command.",h,l),{hideAfter:10*1e3}),this._leaveChordMode(),s=!0}}else{this.inChordMode&&this._leaveChordMode(),c.isBubble||(s=!0),this._log(`+ Invoking command ${c.commandId}.`),this._currentlyDispatchingCommandId=c.commandId;try{typeof c.commandArgs>"u"?this._commandService.executeCommand(c.commandId).then(void 0,h=>this._notificationService.warn(h)):this._commandService.executeCommand(c.commandId,c.commandArgs).then(void 0,h=>this._notificationService.warn(h))}finally{this._currentlyDispatchingCommandId=null}qW.test(c.commandId)||this._telemetryService.publicLog2("workbenchActionExecuted",{id:c.commandId,from:"keybinding",detail:e.getUserSettingsLabel()??void 0})}return s}}}mightProducePrintableCharacter(e){return e.ctrlKey||e.metaKey?!1:e.keyCode>=w.KeyA&&e.keyCode<=w.KeyZ||e.keyCode>=w.Digit0&&e.keyCode<=w.Digit9}}class dh{static{this.EMPTY=new dh(null)}constructor(e){this._ctrlKey=e?e.ctrlKey:!1,this._shiftKey=e?e.shiftKey:!1,this._altKey=e?e.altKey:!1,this._metaKey=e?e.metaKey:!1}has(e){switch(e){case"ctrl":return this._ctrlKey;case"shift":return this._shiftKey;case"alt":return this._altKey;case"meta":return this._metaKey}}}class QE{constructor(e,t,n,s,r,o,a){this._resolvedKeybindingItemBrand=void 0,this.resolvedKeybinding=e,this.chords=e?lw(e.getDispatchChords()):[],e&&this.chords.length===0&&(this.chords=lw(e.getSingleModifierDispatchChords())),this.bubble=t?t.charCodeAt(0)===k.Caret:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=s,this.isDefault=r,this.extensionId=o,this.isBuiltinExtension=a}}function lw(i){const e=[];for(let t=0,n=i.length;t<n;t++){const s=i[t];if(!s)return[];e.push(s)}return e}class Y1{constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[At.Macintosh]=e,this.modifierLabels[At.Windows]=t,this.modifierLabels[At.Linux]=n}toLabel(e,t,n){if(t.length===0)return null;const s=[];for(let r=0,o=t.length;r<o;r++){const a=t[r],l=n(a);if(l===null)return null;s[r]=XW(a,l,this.modifierLabels[e])}return s.join(" ")}}const LS=new Y1({ctrlKey:"⌃",shiftKey:"⇧",altKey:"⌥",metaKey:"⌘",separator:""},{ctrlKey:d(118,"Ctrl"),shiftKey:d(119,"Shift"),altKey:d(120,"Alt"),metaKey:d(121,"Windows"),separator:"+"},{ctrlKey:d(118,"Ctrl"),shiftKey:d(119,"Shift"),altKey:d(120,"Alt"),metaKey:d(122,"Super"),separator:"+"}),GW=new Y1({ctrlKey:d(123,"Control"),shiftKey:d(124,"Shift"),altKey:d(125,"Option"),metaKey:d(126,"Command"),separator:"+"},{ctrlKey:d(123,"Control"),shiftKey:d(124,"Shift"),altKey:d(127,"Alt"),metaKey:d(128,"Windows"),separator:"+"},{ctrlKey:d(123,"Control"),shiftKey:d(124,"Shift"),altKey:d(127,"Alt"),metaKey:d(129,"Super"),separator:"+"}),jW=new Y1({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),YW=new Y1({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function XW(i,e,t){if(e===null)return"";const n=[];return i.ctrlKey&&n.push(t.ctrlKey),i.shiftKey&&n.push(t.shiftKey),i.altKey&&n.push(t.altKey),i.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}class QW extends G8{constructor(e,t){if(super(),t.length===0)throw Sf("chords");this._os=e,this._chords=t}getLabel(){return LS.toLabel(this._os,this._chords,e=>this._getLabel(e))}getAriaLabel(){return GW.toLabel(this._os,this._chords,e=>this._getAriaLabel(e))}getElectronAccelerator(){return this._chords.length>1||this._chords[0].isDuplicateModifierCase()?null:jW.toLabel(this._os,this._chords,e=>this._getElectronAccelerator(e))}getUserSettingsLabel(){return YW.toLabel(this._os,this._chords,e=>this._getUserSettingsLabel(e))}isWYSIWYG(){return this._chords.every(e=>this._isWYSIWYG(e))}hasMultipleChords(){return this._chords.length>1}getChords(){return this._chords.map(e=>this._getChord(e))}_getChord(e){return new K8(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,this._getLabel(e),this._getAriaLabel(e))}getDispatchChords(){return this._chords.map(e=>this._getChordDispatch(e))}getSingleModifierDispatchChords(){return this._chords.map(e=>this._getSingleModifierChordDispatch(e))}}class rf extends QW{constructor(e,t){super(t,e)}_keyCodeToUILabel(e){if(this._os===At.Macintosh)switch(e){case w.LeftArrow:return"←";case w.UpArrow:return"↑";case w.RightArrow:return"→";case w.DownArrow:return"↓"}return Wr.toString(e)}_getLabel(e){return e.isDuplicateModifierCase()?"":this._keyCodeToUILabel(e.keyCode)}_getAriaLabel(e){return e.isDuplicateModifierCase()?"":Wr.toString(e.keyCode)}_getElectronAccelerator(e){return Wr.toElectronAccelerator(e.keyCode)}_getUserSettingsLabel(e){if(e.isDuplicateModifierCase())return"";const t=Wr.toUserSettingsUS(e.keyCode);return t&&t.toLowerCase()}_isWYSIWYG(){return!0}_getChordDispatch(e){return rf.getDispatchStr(e)}static getDispatchStr(e){if(e.isModifierKey())return null;let t="";return e.ctrlKey&&(t+="ctrl+"),e.shiftKey&&(t+="shift+"),e.altKey&&(t+="alt+"),e.metaKey&&(t+="meta+"),t+=Wr.toString(e.keyCode),t}_getSingleModifierChordDispatch(e){return e.keyCode===w.Ctrl&&!e.shiftKey&&!e.altKey&&!e.metaKey?"ctrl":e.keyCode===w.Shift&&!e.ctrlKey&&!e.altKey&&!e.metaKey?"shift":e.keyCode===w.Alt&&!e.ctrlKey&&!e.shiftKey&&!e.metaKey?"alt":e.keyCode===w.Meta&&!e.ctrlKey&&!e.shiftKey&&!e.altKey?"meta":null}static _scanCodeToKeyCode(e){const t=Yy[e];if(t!==w.DependsOnKbLayout)return t;switch(e){case C.KeyA:return w.KeyA;case C.KeyB:return w.KeyB;case C.KeyC:return w.KeyC;case C.KeyD:return w.KeyD;case C.KeyE:return w.KeyE;case C.KeyF:return w.KeyF;case C.KeyG:return w.KeyG;case C.KeyH:return w.KeyH;case C.KeyI:return w.KeyI;case C.KeyJ:return w.KeyJ;case C.KeyK:return w.KeyK;case C.KeyL:return w.KeyL;case C.KeyM:return w.KeyM;case C.KeyN:return w.KeyN;case C.KeyO:return w.KeyO;case C.KeyP:return w.KeyP;case C.KeyQ:return w.KeyQ;case C.KeyR:return w.KeyR;case C.KeyS:return w.KeyS;case C.KeyT:return w.KeyT;case C.KeyU:return w.KeyU;case C.KeyV:return w.KeyV;case C.KeyW:return w.KeyW;case C.KeyX:return w.KeyX;case C.KeyY:return w.KeyY;case C.KeyZ:return w.KeyZ;case C.Digit1:return w.Digit1;case C.Digit2:return w.Digit2;case C.Digit3:return w.Digit3;case C.Digit4:return w.Digit4;case C.Digit5:return w.Digit5;case C.Digit6:return w.Digit6;case C.Digit7:return w.Digit7;case C.Digit8:return w.Digit8;case C.Digit9:return w.Digit9;case C.Digit0:return w.Digit0;case C.Minus:return w.Minus;case C.Equal:return w.Equal;case C.BracketLeft:return w.BracketLeft;case C.BracketRight:return w.BracketRight;case C.Backslash:return w.Backslash;case C.IntlHash:return w.Unknown;case C.Semicolon:return w.Semicolon;case C.Quote:return w.Quote;case C.Backquote:return w.Backquote;case C.Comma:return w.Comma;case C.Period:return w.Period;case C.Slash:return w.Slash;case C.IntlBackslash:return w.IntlBackslash}return w.Unknown}static _toKeyCodeChord(e){if(!e)return null;if(e instanceof oc)return e;const t=this._scanCodeToKeyCode(e.scanCode);return t===w.Unknown?null:new oc(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,t)}static resolveKeybinding(e,t){const n=lw(e.chords.map(s=>this._toKeyCodeChord(s)));return n.length>0?[new rf(n,t)]:[]}}const DS=be("labelService");var cw;(function(i){i[i.DEFAULT=0]="DEFAULT",i[i.OPTIONAL=1]="OPTIONAL",i[i.SILENT=2]="SILENT",i[i.URGENT=3]="URGENT"})(cw||(cw={}));var ZE;(function(i){i[i.WORKSPACE=0]="WORKSPACE",i[i.PROFILE=1]="PROFILE",i[i.APPLICATION=2]="APPLICATION"})(ZE||(ZE={}));function iie(i){if(i){const e=i;return typeof e.id=="string"&&typeof e.label=="string"}return!1}var hw;(function(i){i[i.OFF=0]="OFF",i[i.ERROR=1]="ERROR"})(hw||(hw={}));class ZW{constructor(){this.progress=new JW,this.onDidClose=W.None,this.onDidChangeVisibility=W.None}updateSeverity(e){}updateMessage(e){}updateActions(e){}close(){}}class JW{infinite(){}done(){}total(e){}worked(e){}}const IS=be("progressService"),eU=be("editorProgressService"),gu=be("telemetryService"),nie=be("customEndpointTelemetryService");function Am(i){const e=i;return typeof e?.id=="string"&&Y.isUri(e.uri)}function sie(i){return typeof i?.id=="string"&&!Am(i)&&!Nm(i)}const TS={id:"empty-window"};function tU(i,e){if(typeof i=="string"||typeof i>"u")return typeof i=="string"?{id:Ry(i)}:TS;const t=i;return t.configuration?{id:t.id,configPath:t.configuration}:t.folders.length===1?{id:t.id,uri:t.folders[0].uri}:{id:t.id}}function Nm(i){const e=i;return typeof e?.id=="string"&&Y.isUri(e.configPath)}var md;(function(i){i[i.EMPTY=1]="EMPTY",i[i.FOLDER=2]="FOLDER",i[i.WORKSPACE=3]="WORKSPACE"})(md||(md={}));function iU(i){const e=i;return!!(e&&typeof e=="object"&&typeof e.id=="string"&&Array.isArray(e.folders))}function rie(i){const e=i;return!!(e&&typeof e=="object"&&Y.isUri(e.uri)&&typeof e.name=="string"&&typeof e.toResource=="function")}let oie=class{get folders(){return this._folders}set folders(e){this._folders=e,this.updateFoldersMap()}constructor(e,t,n,s,r){this._id=e,this._transient=n,this._configuration=s,this.ignorePathCasing=r,this.foldersMap=ps.forUris(this.ignorePathCasing,()=>!0),this.folders=t}update(e){this._id=e.id,this._configuration=e.configuration,this._transient=e.transient,this.ignorePathCasing=e.ignorePathCasing,this.folders=e.folders}get id(){return this._id}get transient(){return this._transient}get configuration(){return this._configuration}set configuration(e){this._configuration=e}getFolder(e){return e&&this.foldersMap.findSubstr(e)||null}updateFoldersMap(){this.foldersMap=ps.forUris(this.ignorePathCasing,()=>!0);for(const e of this.folders)this.foldersMap.set(e.uri,e)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}};class RN{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return zn(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}function lie(i){return new RN({uri:i,index:0,name:lT(i)},{uri:i.toString()})}const Rm="code-workspace",nU=`.${Rm}`,cie=[{name:d(2386,"Code Workspace"),extensions:[Rm]}],hie="workspace.json";function MN(i,e){return c9.isEqualOrParent(i,e.untitledWorkspacesHome)}function ON(i){let e;return Y.isUri(i)?e=i:e=i.configuration,e?.scheme===ge.tmp}const FN="4064f6ec-cb38-4ad0-af64-ee6467e63c82";function uie(i){return i.id===FN}function die(i,e){return!MN(i,e)&&!ON(i)}function fie(i){return(typeof i=="string"?My(i):f9(i))===nU}const X1=be("contextService");var JE;(function(i){i.accessibilityHelpTitle=d(823,"Accessibility Help"),i.openingDocs=d(824,"Opening the Accessibility documentation page."),i.readonlyDiffEditor=d(825,"You are in a read-only pane of a diff editor."),i.editableDiffEditor=d(826,"You are in a pane of a diff editor."),i.readonlyEditor=d(827,"You are in a read-only code editor."),i.editableEditor=d(828,"You are in a code editor."),i.defaultWindowTitleIncludesEditorState=d(829,"activeEditorState - such as modified, problems, and more, is included as a part of the window.title setting by default. Disable it with accessibility.windowTitleOptimized."),i.defaultWindowTitleExcludingEditorState=d(830,"activeEditorState - such as modified, problems, and more, is currently not included as a part of the window.title setting by default. Enable it with accessibility.windowTitleOptimized."),i.toolbar=d(831,"Around the workbench, when the screen reader announces you've landed in a toolbar, use narrow keys to navigate between the toolbar's actions."),i.changeConfigToOnMac=d(832,"Configure the application to be optimized for usage with a Screen Reader (Command+E)."),i.changeConfigToOnWinLinux=d(833,"Configure the application to be optimized for usage with a Screen Reader (Control+E)."),i.auto_on=d(834,"The application is configured to be optimized for usage with a Screen Reader."),i.auto_off=d(835,"The application is configured to never be optimized for usage with a Screen Reader."),i.screenReaderModeEnabled=d(836,"Screen Reader Optimized Mode enabled."),i.screenReaderModeDisabled=d(837,"Screen Reader Optimized Mode disabled."),i.tabFocusModeOnMsg=d(838,"Pressing Tab in the current editor will move focus to the next focusable element. Toggle this behavior{0}.","<keybinding:editor.action.toggleTabFocusMode>"),i.tabFocusModeOffMsg=d(839,"Pressing Tab in the current editor will insert the tab character. Toggle this behavior{0}.","<keybinding:editor.action.toggleTabFocusMode>"),i.stickScroll=d(840,"Focus Sticky Scroll{0} to focus the currently nested scopes.","<keybinding:editor.action.focusStickyDebugConsole>"),i.suggestActions=d(841,"Trigger the suggest widget{0} to show possible code completions.","<keybinding:editor.action.triggerSuggest>"),i.acceptSuggestAction=d(842,"Accept suggestion{0} to accept the currently selected suggestion.","<keybinding:acceptSelectedSuggestion>"),i.toggleSuggestionFocus=d(843,"Toggle focus between the suggest widget and the editor{0} and toggle details focus with{1} to learn more about the suggestion.","<keybinding:focusSuggestion>","<keybinding:toggleSuggestionFocus>"),i.codeFolding=d(844,"Use code folding to collapse blocks of code and focus on the code you're interested in via the Toggle Folding Command{0}.","<keybinding:editor.toggleFold>"),i.intellisense=d(845,"Use Intellisense to improve coding efficiency and reduce errors. Trigger suggestions{0}.","<keybinding:editor.action.triggerSuggest>"),i.showOrFocusHover=d(846,"Show or focus the hover{0} to read information about the current symbol.","<keybinding:editor.action.showHover>"),i.goToSymbol=d(847,"Go to Symbol{0} to quickly navigate between symbols in the current file.","<keybinding:workbench.action.gotoSymbol>"),i.showAccessibilityHelpAction=d(848,"Show Accessibility Help"),i.listSignalSounds=d(849,"Run the command: List Signal Sounds for an overview of all sounds and their current status."),i.listAlerts=d(850,"Run the command: List Signal Announcements for an overview of announcements and their current status."),i.quickChat=d(851,"Toggle quick chat{0} to open or close a chat session.","<keybinding:workbench.action.quickchat.toggle>"),i.startInlineChat=d(852,"Start inline chat{0} to create an in editor chat session.","<keybinding:inlineChat.start>"),i.startDebugging=d(853,"The Debug: Start Debugging command{0} will start a debug session.","<keybinding:workbench.action.debug.start>"),i.setBreakpoint=d(854,"The Debug: Inline Breakpoint command{0} will set or unset a breakpoint at the current cursor position in the active editor.","<keybinding:editor.debug.action.toggleInlineBreakpoint>"),i.addToWatch=d(855,"The Debug: Add to Watch command{0} will add the selected text to the watch view.","<keybinding:editor.debug.action.selectionToWatch>"),i.debugExecuteSelection=d(856,"The Debug: Execute Selection command{0} will execute the selected text in the debug console.","<keybinding:editor.debug.action.selectionToRepl>"),i.chatEditorModification=d(857,"The editor contains pending modifications that have been made by chat."),i.chatEditorRequestInProgress=d(858,"The editor is currently waiting for modifications to be made by chat."),i.chatEditActions=d(859,"Navigate between edits in the editor with navigate previous{0} and next{1} and accept{2}, reject{3} or view the diff{4} for the current change.","<keybinding:chatEditor.action.navigatePrevious>","<keybinding:chatEditor.action.navigateNext>","<keybinding:chatEditor.action.acceptHunk>","<keybinding:chatEditor.action.undoHunk>","<keybinding:chatEditor.action.toggleDiff>")})(JE||(JE={}));var ex;(function(i){i.inspectTokensAction=d(860,"Developer: Inspect Tokens")})(ex||(ex={}));var tx;(function(i){i.gotoLineActionLabel=d(861,"Go to Line/Column...")})(tx||(tx={}));var ix;(function(i){i.helpQuickAccessActionLabel=d(862,"Show all Quick Access Providers")})(ix||(ix={}));var nx;(function(i){i.quickCommandActionLabel=d(863,"Command Palette"),i.quickCommandHelp=d(864,"Show And Run Commands")})(nx||(nx={}));var sx;(function(i){i.quickOutlineActionLabel=d(865,"Go to Symbol..."),i.quickOutlineByCategoryActionLabel=d(866,"Go to Symbol by Category...")})(sx||(sx={}));var rx;(function(i){i.editorViewAccessibleLabel=d(867,"Editor content")})(rx||(rx={}));var ox;(function(i){i.toggleHighContrast=d(868,"Toggle High Contrast Theme")})(ox||(ox={}));var uw;(function(i){i.bulkEditServiceSummary=d(869,"Made {0} edits in {1} files")})(uw||(uw={}));const gie=be("workspaceTrustEnablementService"),sU=be("workspaceTrustManagementService"),pie=be("workspaceTrustRequestService");let Qa=[],AS=[],NS=[];function Wg(i,e=!1){PN(i,!1,e)}function mie(i){PN(i,!0,!1)}function PN(i,e,t){const n=rU(i,e);Qa.push(n),n.userConfigured?NS.push(n):AS.push(n),t&&!n.userConfigured&&Qa.forEach(s=>{s.mime===n.mime||s.userConfigured||(n.extension&&s.extension===n.extension&&console.warn(`Overwriting extension <<${n.extension}>> to now point to mime <<${n.mime}>>`),n.filename&&s.filename===n.filename&&console.warn(`Overwriting filename <<${n.filename}>> to now point to mime <<${n.mime}>>`),n.filepattern&&s.filepattern===n.filepattern&&console.warn(`Overwriting filepattern <<${n.filepattern}>> to now point to mime <<${n.mime}>>`),n.firstline&&s.firstline===n.firstline&&console.warn(`Overwriting firstline <<${n.firstline}>> to now point to mime <<${n.mime}>>`))})}function rU(i,e){return{id:i.id,mime:i.mime,filename:i.filename,extension:i.extension,filepattern:i.filepattern,firstline:i.firstline,userConfigured:e,filenameLowercase:i.filename?i.filename.toLowerCase():void 0,extensionLowercase:i.extension?i.extension.toLowerCase():void 0,filepatternLowercase:i.filepattern?_T(i.filepattern.toLowerCase()):void 0,filepatternOnPath:i.filepattern?i.filepattern.indexOf(Pe.sep)>=0:!1}}function oU(){Qa=Qa.filter(i=>i.userConfigured),AS=[]}function bie(){Qa=Qa.filter(i=>!i.userConfigured),NS=[]}function _ie(i,e){return BN(i,e).map(t=>t.mime)}function aU(i,e){return BN(i,e).map(t=>t.id)}function BN(i,e){let t;if(i)switch(i.scheme){case ge.file:t=i.fsPath;break;case ge.data:{t=Qp.parseMetaData(i).get(Qp.META_DATA_LABEL);break}case ge.vscodeNotebookCell:t=void 0;break;default:t=i.path}if(!t)return[{id:"unknown",mime:vl.unknown}];t=t.toLowerCase();const n=Ry(t),s=ax(t,n,NS);if(s)return[s,{id:qa,mime:vl.text}];const r=ax(t,n,AS);if(r)return[r,{id:qa,mime:vl.text}];if(e){const o=lU(e);if(o)return[o,{id:qa,mime:vl.text}]}return[{id:"unknown",mime:vl.unknown}]}function ax(i,e,t){let n,s,r;for(let o=t.length-1;o>=0;o--){const a=t[o];if(e===a.filenameLowercase){n=a;break}if(a.filepattern&&(!s||a.filepattern.length>s.filepattern.length)){const l=a.filepatternOnPath?i:e;a.filepatternLowercase?.(l)&&(s=a)}a.extension&&(!r||a.extension.length>r.extension.length)&&e.endsWith(a.extensionLowercase)&&(r=a)}if(n)return n;if(s)return s;if(r)return r}function lU(i){if(RI(i)&&(i=i.substr(1)),i.length>0)for(let e=Qa.length-1;e>=0;e--){const t=Qa[e];if(!t.firstline)continue;const n=i.match(t.firstline);if(n&&n.length>0)return t}}const Gs=Object.prototype.hasOwnProperty,lx="vs.editor.nullLanguage";class cU{constructor(){this._languageIdToLanguage=[],this._languageToLanguageId=new Map,this._register(lx,Sh.Null),this._register(qa,Sh.PlainText),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;const t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||Sh.Null}decodeLanguageId(e){return this._languageIdToLanguage[e]||lx}}class Mm extends ${static{this.instanceCount=0}constructor(e=!0,t=!1){super(),this._onDidChange=this._register(new A),this.onDidChange=this._onDidChange.event,Mm.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new cU,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(gd.onDidChangeLanguages(n=>{this._initializeFromRegistry()})))}dispose(){Mm.instanceCount--,super.dispose()}setDynamicLanguages(e){this._dynamicLanguages=e,this._initializeFromRegistry()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},oU();const e=[].concat(gd.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}registerLanguage(e){return gd.registerLanguage(e)}_registerLanguages(e){for(const t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{const n=this._languages[t];n.name&&(this._nameMap[n.name]=n.identifier),n.aliases.forEach(s=>{this._lowercaseNameMap[s.toLowerCase()]=n.identifier}),n.mimetypes.forEach(s=>{this._mimeTypesMap[s]=n.identifier})}),wt.as(Ps.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){const t=e.id;let n;Gs.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){const n=t.id;let s=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),s=t.mimetypes[0]),s||(s=`text/x-${n}`,e.mimetypes.push(s)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(const a of t.extensions)Wg({id:n,mime:s,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(const a of t.filenames)Wg({id:n,mime:s,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(const a of t.filenamePatterns)Wg({id:n,mime:s,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{const l=new RegExp(a);R7(l)||Wg({id:n,mime:s,firstline:l},this._warnOnOverwrite)}catch(l){console.warn(`[${t.id}]: Invalid regular expression \`${a}\`: `,l)}}e.aliases.push(n);let r=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?r=[null]:r=t.aliases),r!==null)for(const a of r)!a||a.length===0||e.aliases.push(a);const o=r!==null&&r.length>0;if(!(o&&r[0]===null)){const a=(o?r[0]:null)||n;(o||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?Gs.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getSortedRegisteredLanguageNames(){const e=[];for(const t in this._nameMap)Gs.call(this._nameMap,t)&&e.push({languageName:t,languageId:this._nameMap[t]});return e.sort((t,n)=>Hp(t.languageName,n.languageName)),e}getLanguageName(e){return Gs.call(this._languages,e)?this._languages[e].name:null}getMimeType(e){return Gs.call(this._languages,e)&&this._languages[e].mimetypes[0]||null}getExtensions(e){return Gs.call(this._languages,e)?this._languages[e].extensions:[]}getFilenames(e){return Gs.call(this._languages,e)?this._languages[e].filenames:[]}getIcon(e){return Gs.call(this._languages,e)&&this._languages[e].icons[0]||null}getConfigurationFiles(e){return Gs.call(this._languages,e)?this._languages[e].configurationFiles||[]:[]}getLanguageIdByLanguageName(e){const t=e.toLowerCase();return Gs.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&Gs.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:aU(e,t)}}class Om extends ${static{this.instanceCount=0}constructor(e=!1){super(),this._onDidRequestBasicLanguageFeatures=this._register(new A),this.onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event,this._onDidRequestRichLanguageFeatures=this._register(new A),this.onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event,this._onDidChange=this._register(new A({leakWarningThreshold:200})),this.onDidChange=this._onDidChange.event,this._requestedBasicLanguages=new Set,this._requestedRichLanguages=new Set,Om.instanceCount++,this._registry=this._register(new Mm(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){Om.instanceCount--,super.dispose()}registerLanguage(e){return this._registry.registerLanguage(e)}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getRegisteredLanguageIds(){return this._registry.getRegisteredLanguageIds()}getSortedRegisteredLanguageNames(){return this._registry.getSortedRegisteredLanguageNames()}getLanguageName(e){return this._registry.getLanguageName(e)}getMimeType(e){return this._registry.getMimeType(e)}getIcon(e){return this._registry.getIcon(e)}getExtensions(e){return this._registry.getExtensions(e)}getFilenames(e){return this._registry.getFilenames(e)}getConfigurationFiles(e){return this._registry.getConfigurationFiles(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){return this._registry.guessLanguageIdByFilepathOrFirstLine(e,t).at(0)??null}createById(e){return new h_(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByMimeType(e){return new h_(this.onDidChange,()=>{const t=this.getLanguageIdByMimeType(e);return this._createAndGetLanguageIdentifier(t)})}createByFilepathOrFirstLine(e,t){return new h_(this.onDidChange,()=>{const n=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(n)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=qa),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),nf.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}}class h_{constructor(e,t){this._value=sm(this,e,()=>t()),this.onDidChange=W.fromObservable(this._value)}get languageId(){return this._value.get()}}class Q1 extends ${constructor(e,t="",n="",s=!0,r){super(),this._onDidChange=this._register(new A),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=n,this._enabled=s,this._actionCallback=r}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}}class Xh extends ${constructor(){super(...arguments),this._onWillRun=this._register(new A),this.onWillRun=this._onWillRun.event,this._onDidRun=this._register(new A),this.onDidRun=this._onDidRun.event}async run(e,t){if(!e.enabled)return;this._onWillRun.fire({action:e});let n;try{await this.runAction(e,t)}catch(s){n=s}this._onDidRun.fire({action:e,error:n})}async runAction(e,t){await e.run(t)}}class Ui{constructor(){this.id=Ui.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...e){let t=[];for(const n of e)n.length&&(t.length?t=[...t,new Ui,...n]:t=n);return t}static{this.ID="vs.actions.separator"}async run(){}}class RS{get actions(){return this._actions}constructor(e,t,n,s){this.tooltip="",this.enabled=!0,this.checked=void 0,this.id=e,this.label=t,this.class=s,this._actions=n}async run(){}}class MS extends Q1{static{this.ID="vs.actions.empty"}constructor(){super(MS.ID,d(43,"(empty)"),void 0,!1)}}function dw(i){return{id:i.id,label:i.label,tooltip:i.tooltip??i.label,class:i.class,enabled:i.enabled??!0,checked:i.checked,run:async(...e)=>i.run(...e)}}class wie extends ${constructor(e,t){super(),this.timeout=void 0,this._register(V(e,"dragover",n=>{n.preventDefault(),this.timeout||(this.timeout=setTimeout(()=>{t(),this.timeout=void 0},800))})),["dragleave","drop","dragend"].forEach(n=>{this._register(V(e,n,()=>{this.clearDragTimeout()}))})}clearDragTimeout(){this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0)}dispose(){super.dispose(),this.clearDragTimeout()}}const WN={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:vl.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"},hU=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}});let Z1=hU;const uU=new Fi(()=>Z1("mouse",!1)),dU=new Fi(()=>Z1("element",!1));function vie(i){Z1=i}function ks(i){return i==="element"?dU.value:uU.value}function J1(){return Z1("element",!0)}class fU{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(s=>s.splice(e,t,n))}}function UN(i){return(e,t,n)=>{let s=null,r=null;if(typeof n.value=="function"?(s="value",r=n.value):typeof n.get=="function"&&(s="get",r=n.get),!r||typeof t=="symbol")throw new Error("not supported");n[s]=i(r,t)}}function vt(i,e,t){let n=null,s=null;if(typeof t.value=="function"?(n="value",s=t.value,s.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",s=t.get),!s)throw new Error("not supported");const r=`$memoize$${e}`;t[n]=function(...o){return this.hasOwnProperty(r)||Object.defineProperty(this,r,{configurable:!1,enumerable:!1,writable:!1,value:s.apply(this,o)}),this[r]}}function yie(i,e,t){return UN((n,s)=>{const r=`$debounce$${s}`,o=`$debounce$result$${s}`;return function(...a){this[o]||(this[o]=void 0),clearTimeout(this[r]),this[r]=setTimeout(()=>{n.apply(this,a),this[o]=void 0},i)}})}function Sie(i,e,t){return UN((n,s)=>{const r=`$throttle$timer$${s}`,o=`$throttle$result$${s}`,a=`$throttle$lastRun$${s}`,l=`$throttle$pending$${s}`;return function(...c){if(this[o]||(this[o]=t?t():void 0),(this[a]===null||this[a]===void 0)&&(this[a]=-Number.MAX_VALUE),e&&(this[o]=e(this[o],...c)),this[l])return;const h=this[a]+i;h<=Date.now()?(this[a]=Date.now(),n.apply(this,[this[o]]),this[o]=t?t():void 0):(this[l]=!0,this[r]=setTimeout(()=>{this[l]=!1,this[a]=Date.now(),n.apply(this,[this[o]]),this[o]=t?t():void 0},h-Date.now()))}})}const HN=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var fw;(function(i){i[i.Copy=0]="Copy",i[i.Move=1]="Move"})(fw||(fw={}));var fh;(function(i){i.Over="drop-target",i.Before="drop-target-before",i.After="drop-target-after"})(fh||(fh={}));class ul extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}function cx(i,e){const t=[];for(const n of e){if(i.start>=n.range.end)continue;if(i.end<n.range.start)break;const s=Ni.intersect(i,n.range);Ni.isEmpty(s)||t.push({range:s,size:n.size})}return t}function gw({start:i,end:e},t){return{start:i+t,end:e+t}}function gU(i){const e=[];let t=null;for(const n of i){const s=n.range.start,r=n.range.end,o=n.size;if(t&&o===t.size){t.range.end=r;continue}t={range:{start:s,end:r},size:o},e.push(t)}return e}function pU(...i){return gU(i.reduce((e,t)=>e.concat(t),[]))}class mU{get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this.groups=[],this._size=0,this._paddingTop=0,this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,n=[]){const s=n.length-t,r=cx({start:0,end:e},this.groups),o=cx({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:gw(l.range,s),size:l.size})),a=n.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=pU(r,a,o),this._size=this._paddingTop+this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,n=this._paddingTop;for(const s of this.groups){const r=s.range.end-s.range.start,o=n+r*s.size;if(e<o)return t+Math.floor((e-n)/s.size);t+=r,n=o}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(const s of this.groups){const r=s.range.end-s.range.start,o=n+r;if(e<o)return this._paddingTop+t+(e-n)*s.size;t+=r*s.size,n=o}return-1}}class bU{constructor(e){this.renderers=e,this.cache=new Map,this.transactionNodesPendingRemoval=new Set,this.inTransaction=!1}alloc(e){let t=this.getTemplateCache(e).pop(),n=!1;if(t)n=this.transactionNodesPendingRemoval.has(t.domNode),n&&this.transactionNodesPendingRemoval.delete(t.domNode);else{const s=_e(".monaco-list-row"),o=this.getRenderer(e).renderTemplate(s);t={domNode:s,templateId:e,templateData:o}}return{row:t,isReusingConnectedDomNode:n}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(const t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){const{domNode:t,templateId:n}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(n).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),e.remove()}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(const n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}const _U=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));mt(_U);function wU(i,e,t,n=[]){if(!i.dataTransfer)return;const s=_e(".monaco-drag-image");s.textContent=t,s.classList.add(...n),(a=>{for(;a&&!a.classList.contains("monaco-workbench");)a=a.parentElement;return a||e.ownerDocument.body})(e).appendChild(s),i.dataTransfer.setDragImage(s,-10,-10),setTimeout(()=>s.remove(),0)}const dl={CurrentDragAndDropData:void 0};var hx;(function(i){i[i.TOP=0]="TOP",i[i.CENTER_TOP=1]="CENTER_TOP",i[i.CENTER_BOTTOM=2]="CENTER_BOTTOM",i[i.BOTTOM=3]="BOTTOM"})(hx||(hx={}));const Er={useShadows:!0,verticalScrollMode:Nt.Auto,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(i){return[i]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class Kf{get context(){return this._context}set context(e){this._context=e}constructor(e){this.elements=e}update(){}getData(){return this.elements}}class vU{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class yU{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}}function SU(i,e){return Array.isArray(i)&&Array.isArray(e)?wi(i,e):i===e}class kU{constructor(e){e?.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,s)=>s,e?.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e?.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e?.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}}class Qt{static{this.InstanceCount=0}get contentHeight(){return this.rangeMap.size}get contentWidth(){return this.scrollWidth??0}get onDidScroll(){return this.scrollableElement.onScroll}get onWillScroll(){return this.scrollableElement.onWillScroll}get containerDomNode(){return this.rowsContainer}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:_p(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}constructor(e,t,n,s=Er){if(this.virtualDelegate=t,this.domId=`list_id_${++Qt.InstanceCount}`,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new Df(50),this.splicing=!1,this.dragOverAnimationStopDisposable=$.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=$.None,this.onDragLeaveTimeout=$.None,this.currentSelectionDisposable=$.None,this.disposables=new X,this._onDidChangeContentHeight=new A,this._onDidChangeContentWidth=new A,this.onDidChangeContentHeight=W.latch(this._onDidChangeContentHeight.event,void 0,this.disposables),this.onDidChangeContentWidth=W.latch(this._onDidChangeContentWidth.event,void 0,this.disposables),this._horizontalScrolling=!1,s.horizontalScrolling&&s.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(s.paddingTop??0);for(const o of n)this.renderers.set(o.templateId,o);if(this.cache=this.disposables.add(new bU(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof s.mouseSupport=="boolean"?s.mouseSupport:!0),this._horizontalScrolling=s.horizontalScrolling??Er.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof s.paddingBottom>"u"?0:s.paddingBottom,this.accessibilityProvider=new kU(s.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(s.transformOptimization??Er.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(Bt.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new R1({forceIntegerValues:!0,smoothScrollDuration:s.smoothScrolling??!1?125:0,scheduleAtNextAnimationFrame:o=>Hs(ke(this.domNode),o)})),this.scrollableElement=this.disposables.add(new iN(this.rowsContainer,{alwaysConsumeMouseWheel:s.alwaysConsumeMouseWheel??Er.alwaysConsumeMouseWheel,horizontal:Nt.Auto,vertical:s.verticalScrollMode??Er.verticalScrollMode,useShadows:s.useShadows??Er.useShadows,mouseWheelScrollSensitivity:s.mouseWheelScrollSensitivity,fastScrollSensitivity:s.fastScrollSensitivity,scrollByPage:s.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(V(this.rowsContainer,qt.Change,o=>this.onTouchChange(o))),this.disposables.add(V(this.scrollableElement.getDomNode(),"scroll",o=>{const a=o.target,l=a.scrollTop;a.scrollTop=0,s.scrollToActiveElement&&this.setScrollTop(this.scrollTop+l)})),this.disposables.add(V(this.domNode,"dragover",o=>this.onDragOver(this.toDragEvent(o)))),this.disposables.add(V(this.domNode,"drop",o=>this.onDrop(this.toDragEvent(o)))),this.disposables.add(V(this.domNode,"dragleave",o=>this.onDragLeave(this.toDragEvent(o)))),this.disposables.add(V(this.domNode,"dragend",o=>this.onDragEnd(o))),s.userSelection){if(s.dnd)throw new Error("DND and user selection cannot be used simultaneously");this.disposables.add(V(this.domNode,"mousedown",o=>this.onPotentialSelectionStart(o)))}this.setRowLineHeight=s.setRowLineHeight??Er.setRowLineHeight,this.setRowHeight=s.setRowHeight??Er.setRowHeight,this.supportDynamicHeights=s.supportDynamicHeights??Er.supportDynamicHeights,this.dnd=s.dnd??this.disposables.add(Er.dnd),this.layout(s.initialSize?.height,s.initialSize?.width),s.scrollToActiveElement&&this._setupFocusObserver(e)}_setupFocusObserver(e){this.disposables.add(V(e,"focus",()=>{const t=on();this.activeElement!==t&&t!==null&&(this.activeElement=t,this._scrollToActiveElement(this.activeElement,e))},!0))}_scrollToActiveElement(e,t){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect().top-n.top;r<0&&this.setScrollTop(this.scrollTop+r)}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t={...t??{},scrollByPage:e.scrollByPage}),e.mouseWheelScrollSensitivity!==void 0&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){const n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(n,Math.max(0,this.lastRenderTop+s),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}delegateScrollFromMouseWheelEvent(e){this.scrollableElement.delegateScrollFromMouseWheelEvent(e)}delegateVerticalScrollbarPointerDown(e){this.scrollableElement.delegateVerticalScrollbarPointerDown(e)}updateElementHeight(e,t,n){if(e<0||e>=this.items.length)return;const s=this.items[e].size;if(typeof t>"u"){if(!this.supportDynamicHeights){console.warn("Dynamic heights not supported",new Error().stack);return}this.items[e].lastDynamicHeightWidth=void 0,t=s+this.probeDynamicHeight(e)}if(s===t)return;const r=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);let o=0;e<r.start||n!==null&&n>e&&n<r.end?o=t-s:o=0,this.rangeMap.splice(e,1,[{size:t}]),this.items[e].size=t,this.render(r,Math.max(0,this.lastRenderTop+o),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights?this._rerender(this.lastRenderTop,this.lastRenderHeight):this._onDidChangeContentHeight.fire(this.contentHeight)}createRangeMap(e){return new mU(e)}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){const s=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),r={start:e,end:e+t},o=Ni.intersect(s,r),a=new Map;for(let I=o.end-1;I>=o.start;I--){const B=this.items[I];if(B.dragStartDisposable.dispose(),B.checkedDisposable.dispose(),B.row){let x=a.get(B.templateId);x||(x=[],a.set(B.templateId,x));const D=this.renderers.get(B.templateId);D&&D.disposeElement&&D.disposeElement(B.element,I,B.row.templateData,{height:B.size}),x.unshift(B.row)}B.row=null,B.stale=!0}const l={start:e+t,end:this.items.length},c=Ni.intersect(l,s),h=Ni.relativeComplement(l,s),u=n.map(I=>({id:String(this.itemId++),element:I,templateId:this.virtualDelegate.getTemplateId(I),size:this.virtualDelegate.getHeight(I),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(I),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:$.None,checkedDisposable:$.None,stale:!1}));let f;e===0&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,u),f=this.items,this.items=u):(this.rangeMap.splice(e,t,u),f=Pp(this.items,e,t,u));const g=n.length-t,p=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),m=gw(c,g),_=Ni.intersect(p,m);for(let I=_.start;I<_.end;I++)this.updateItemInDOM(this.items[I],I);const v=Ni.relativeComplement(m,p);for(const I of v)for(let B=I.start;B<I.end;B++)this.removeItemFromDOM(B);const y=h.map(I=>gw(I,g)),N=[{start:e,end:e+n.length},...y].map(I=>Ni.intersect(p,I)).reverse();for(const I of N)for(let B=I.end-1;B>=I.start;B--){const x=this.items[B],F=a.get(x.templateId)?.pop();this.insertItemInDOM(B,F)}for(const I of a.values())for(const B of I)this.cache.release(B);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),f.map(I=>I.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=Hs(ke(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}updateWidth(e){if(!this.horizontalScrolling||typeof this.scrollWidth>"u")return;const t=this.items[e];this.measureItemWidth(t),typeof t.width<"u"&&t.width>this.scrollWidth&&(this.scrollWidth=t.width,this.scrollableElement.setScrollDimensions({scrollWidth:this.scrollWidth+10}),this._onDidChangeContentWidth.fire(this.scrollWidth))}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getVisibleRange(this.lastRenderTop,this.lastRenderHeight).start}get firstMostlyVisibleIndex(){const e=this.firstVisibleIndex,t=this.rangeMap.positionAt(e),n=this.rangeMap.positionAt(e+1);return n!==-1&&(n-t)/2+t<this.scrollTop?e+1:e}get lastVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).end-1}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const n={height:typeof e=="number"?e:hA(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:_p(this.domNode)})}render(e,t,n,s,r,o=!1){const a=this.getRenderRange(t,n),l=Ni.relativeComplement(a,e).reverse(),c=Ni.relativeComplement(e,a);if(o){const h=Ni.intersect(e,a);for(let u=h.start;u<h.end;u++)this.updateItemInDOM(this.items[u],u)}this.cache.transact(()=>{for(const h of c)for(let u=h.start;u<h.end;u++)this.removeItemFromDOM(u);for(const h of l)for(let u=h.end-1;u>=h.start;u--)this.insertItemInDOM(u)}),s!==void 0&&(this.rowsContainer.style.left=`-${s}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&r!==void 0&&(this.rowsContainer.style.width=`${Math.max(r,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t){const n=this.items[e];if(!n.row)if(t)n.row=t,n.stale=!0;else{const l=this.cache.alloc(n.templateId);n.row=l.row,n.stale||=l.isReusingConnectedDomNode}const s=this.accessibilityProvider.getRole(n.element)||"listitem";n.row.domNode.setAttribute("role",s);const r=this.accessibilityProvider.isChecked(n.element);if(typeof r=="boolean")n.row.domNode.setAttribute("aria-checked",String(!!r));else if(r){const l=c=>n.row.domNode.setAttribute("aria-checked",String(!!c));l(r.value),n.checkedDisposable=r.onDidChange(()=>l(r.value))}if(n.stale||!n.row.domNode.parentElement){const l=this.items.at(e+1)?.row?.domNode??null;(n.row.domNode.parentElement!==this.rowsContainer||n.row.domNode.nextElementSibling!==l)&&this.rowsContainer.insertBefore(n.row.domNode,l),n.stale=!1}this.updateItemInDOM(n,e);const o=this.renderers.get(n.templateId);if(!o)throw new Error(`No renderer found for template id ${n.templateId}`);o?.renderElement(n.element,e,n.row.templateData,{height:n.size});const a=this.dnd.getDragURI(n.element);n.dragStartDisposable.dispose(),n.row.domNode.draggable=!!a,a&&(n.dragStartDisposable=V(n.row.domNode,"dragstart",l=>this.onDragStart(n.element,a,l))),this.horizontalScrolling&&(this.measureItemWidth(n),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=_p(e.row.domNode);const t=ke(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,{height:t.size}),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}getScrollLeft(){return this.scrollableElement.getScrollPosition().scrollLeft}setScrollLeft(e){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollWidth:this.scrollWidth})),this.scrollableElement.setScrollPosition({scrollLeft:e})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return W.map(this.disposables.add(new Ve(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return W.map(this.disposables.add(new Ve(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return W.filter(W.map(this.disposables.add(new Ve(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseUp(){return W.map(this.disposables.add(new Ve(this.domNode,"mouseup")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDown(){return W.map(this.disposables.add(new Ve(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return W.map(this.disposables.add(new Ve(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMove(){return W.map(this.disposables.add(new Ve(this.domNode,"mousemove")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return W.map(this.disposables.add(new Ve(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return W.any(W.map(this.disposables.add(new Ve(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),W.map(this.disposables.add(new Ve(this.domNode,qt.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return W.map(this.disposables.add(new Ve(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return W.map(this.disposables.add(new Ve(this.rowsContainer,qt.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element;return{browserEvent:e,index:t,element:s}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],s=n&&n.element,r=this.getTargetSector(e,t);return{browserEvent:e,index:t,element:s,sector:r}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){if(!n.dataTransfer)return;const s=this.dnd.getDragElements(e);n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(WN.TEXT,t);let r;this.dnd.getDragLabel&&(r=this.dnd.getDragLabel(s,n)),typeof r>"u"&&(r=String(s.length)),wU(n,this.domNode,r,[this.domId]),this.domNode.classList.add("dragging"),this.currentDragData=new Kf(s),dl.CurrentDragAndDropData=new vU(s),this.dnd.onDragStart?.(this.currentDragData,n)}onPotentialSelectionStart(e){this.currentSelectionDisposable.dispose();const t=i6(this.domNode),n=this.currentSelectionDisposable=new X,s=n.add(new X);s.add(V(this.domNode,"selectstart",()=>{s.add(V(t,"mousemove",r=>{t.getSelection()?.isCollapsed===!1&&this.setupDragAndDropScrollTopAnimation(r)})),n.add(fe(()=>{const r=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.currentSelectionBounds=void 0,this.render(r,this.lastRenderTop,this.lastRenderHeight,void 0,void 0)})),n.add(V(t,"selectionchange",()=>{const r=t.getSelection();if(!r||r.isCollapsed){s.isDisposed&&n.dispose();return}let o=this.getIndexOfListElement(r.anchorNode),a=this.getIndexOfListElement(r.focusNode);o!==void 0&&a!==void 0&&(a<o&&([o,a]=[a,o]),this.currentSelectionBounds={start:o,end:a})}))})),s.add(V(t,"mouseup",()=>{s.dispose(),this.teardownDragAndDropScrollTopAnimation(),t.getSelection()?.isCollapsed!==!1&&n.dispose()}))}getIndexOfListElement(e){if(!(!e||!this.domNode.contains(e)))for(;e&&e!==this.domNode;){if(e.dataset?.index)return Number(e.dataset.index);e=e.parentElement}}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),dl.CurrentDragAndDropData&&dl.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(dl.CurrentDragAndDropData)this.currentDragData=dl.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new yU}const t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&t.effect?.type===fw.Copy?"copy":"move";let n;typeof t!="boolean"&&t.feedback?n=t.feedback:typeof e.index>"u"?n=[-1]:n=[e.index],n=Mo(n).filter(r=>r>=-1&&r<this.length).sort((r,o)=>r-o),n=n[0]===-1?[-1]:n;let s=typeof t!="boolean"&&t.effect&&t.effect.position?t.effect.position:fh.Over;if(SU(this.currentDragFeedback,n)&&this.currentDragFeedbackPosition===s)return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackPosition=s,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add(s),this.rowsContainer.classList.add(s),this.currentDragFeedbackDisposable=fe(()=>{this.domNode.classList.remove(s),this.rowsContainer.classList.remove(s)});else{if(n.length>1&&s!==fh.Over)throw new Error("Can't use multiple feedbacks with position different than 'over'");s===fh.After&&n[0]<this.length-1&&(n[0]+=1,s=fh.Before);for(const r of n){const o=this.items[r];o.dropTarget=!0,o.row?.domNode.classList.add(s)}this.currentDragFeedbackDisposable=fe(()=>{for(const r of n){const o=this.items[r];o.dropTarget=!1,o.row?.domNode.classList.remove(s)}})}return!0}onDragLeave(e){this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=em(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&this.dnd.onDragLeave?.(this.currentDragData,e.element,e.index,e.browserEvent)}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,dl.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,dl.CurrentDragAndDropData=void 0,this.dnd.onDragEnd?.(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=$.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const t=R0(this.domNode).top;this.dragOverAnimationDisposable=v6(ke(this.domNode),this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=em(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;const t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(t===void 0)return;const n=e.offsetY/this.items[t].size,s=Math.floor(n/.25);return pn(s,0,3)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let n=e;for(;(Ut(n)||bA(n))&&n!==this.rowsContainer&&t.contains(n);){const s=n.getAttribute("data-index");if(s){const r=Number(s);if(!isNaN(r))return r}n=n.parentElement}}getVisibleRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}getRenderRange(e,t){const n=this.getVisibleRange(e,t);if(this.currentSelectionBounds){const s=this.rangeMap.count;n.start=Math.min(n.start,this.currentSelectionBounds.start,s),n.end=Math.min(Math.max(n.end,this.currentSelectionBounds.end+1),s)}return n}_rerender(e,t,n){const s=this.getRenderRange(e,t);let r,o;e===this.elementTop(s.start)?(r=s.start,o=0):s.end-s.start>1&&(r=s.start+1,o=this.elementTop(r)-e);let a=0;for(;;){const l=this.getRenderRange(e,t);let c=!1;for(let h=l.start;h<l.end;h++){const u=this.probeDynamicHeight(h);u!==0&&this.rangeMap.splice(h,1,[this.items[h]]),a+=u,c=c||u!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();const h=Ni.relativeComplement(s,l);for(const f of h)for(let g=f.start;g<f.end;g++)this.items[g].row&&this.removeItemFromDOM(g);const u=Ni.relativeComplement(l,s).reverse();for(const f of u)for(let g=f.end-1;g>=f.start;g--)this.insertItemInDOM(g);for(let f=l.start;f<l.end;f++)this.items[f].row&&this.updateItemInDOM(this.items[f],f);if(typeof r=="number"){const f=this.scrollable.getFutureScrollPosition().scrollTop-e,g=this.elementTop(r)-o+f;this.setScrollTop(g,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){const t=this.items[e];if(this.virtualDelegate.getDynamicHeight){const o=this.virtualDelegate.getDynamicHeight(t.element);if(o!==null){const a=t.size;return t.size=o,t.lastDynamicHeightWidth=this.renderWidth,o-a}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;const n=t.size;if(t.row)return t.row.domNode.style.height="",t.size=t.row.domNode.offsetHeight,t.size===0&&!Kt(t.row.domNode,ke(t.row.domNode).document.body)&&console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!",new Error().stack),t.lastDynamicHeightWidth=this.renderWidth,t.size-n;const{row:s}=this.cache.alloc(t.templateId);s.domNode.style.height="",this.rowsContainer.appendChild(s.domNode);const r=this.renderers.get(t.templateId);if(!r)throw new De("Missing renderer for templateId: "+t.templateId);return r.renderElement(t.element,e,s.templateData),t.size=s.domNode.offsetHeight,r.disposeElement?.(t.element,e,s.templateData),this.virtualDelegate.setDynamicHeight?.(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,s.domNode.remove(),this.cache.release(s),t.size-n}getElementDomId(e){return`${this.domId}_${e}`}dispose(){for(const e of this.items)if(e.dragStartDisposable.dispose(),e.checkedDisposable.dispose(),e.row){const t=this.renderers.get(e.row.templateId);t&&(t.disposeElement?.(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[],this.domNode?.remove(),this.dragOverAnimationDisposable?.dispose(),this.disposables.dispose()}}Qt.__decorator=G([vt],Qt.prototype,"onMouseClick",null);Qt.__decorator=G([vt],Qt.prototype,"onMouseDblClick",null);Qt.__decorator=G([vt],Qt.prototype,"onMouseMiddleClick",null);Qt.__decorator=G([vt],Qt.prototype,"onMouseUp",null);Qt.__decorator=G([vt],Qt.prototype,"onMouseDown",null);Qt.__decorator=G([vt],Qt.prototype,"onMouseOver",null);Qt.__decorator=G([vt],Qt.prototype,"onMouseMove",null);Qt.__decorator=G([vt],Qt.prototype,"onMouseOut",null);Qt.__decorator=G([vt],Qt.prototype,"onContextMenu",null);Qt.__decorator=G([vt],Qt.prototype,"onTouchStart",null);Qt.__decorator=G([vt],Qt.prototype,"onTap",null);function VN(i){return new CU(i)}class CU extends YT{constructor(e){super(),this.value=e}get debugName(){return this.toString()}get(){return this.value}addObserver(e){}removeObserver(e){}log(){return this}toString(){return`Const: ${this.value}`}}mt(HN);class EU{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,n){const s=this.renderedElements.findIndex(r=>r.templateData===n);if(s>=0){const r=this.renderedElements[s];this.trait.unrender(n),r.index=t}else{const r={index:t,templateData:n};this.renderedElements.push(r)}this.trait.renderIndex(t,n)}splice(e,t,n){const s=[];for(const r of this.renderedElements)r.index<e?s.push(r):r.index>=e+t&&s.push({index:r.index+n-t,templateData:r.templateData});this.renderedElements=s}renderIndexes(e){for(const{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){const t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}}let of=class{get name(){return this._trait}get renderer(){return new EU(this)}constructor(e){this._trait=e,this.indexes=[],this.sortedIndexes=[],this._onChange=new A,this.onChange=this._onChange.event}splice(e,t,n){const s=n.length-t,r=e+t,o=[];let a=0;for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]<e;)o.push(this.sortedIndexes[a++]);for(let l=0;l<n.length;l++)n[l]&&o.push(l+e);for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]>=r;)o.push(this.sortedIndexes[a++]+s);this.renderer.splice(e,t,n.length),this._set(o,o)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(dx),t)}_set(e,t,n){const s=this.indexes,r=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const o=mw(r,e);return this.renderer.renderIndexes(o),this._onChange.fire({indexes:e,browserEvent:n}),s}get(){return this.indexes}contains(e){return DR(this.sortedIndexes,e,dx)>=0}dispose(){ai(this._onChange)}};of.__decorator=G([vt],of.prototype,"renderer",null);class xU extends of{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class u_{constructor(e,t,n){this.trait=e,this.view=t,this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,new Array(n.length).fill(!1));const s=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(s.length===0)return this.trait.splice(e,t,new Array(n.length).fill(!1));const r=new Set(s),o=n.map(a=>r.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,o)}}function Gf(i,e){return i.classList.contains(e)?!0:i.classList.contains("monaco-list")||!i.parentElement?!1:Gf(i.parentElement,e)}function Xu(i){return Gf(i,"monaco-editor")}function LU(i){return Gf(i,"monaco-custom-toggle")}function DU(i){return Gf(i,"action-item")}function bd(i){return Gf(i,"monaco-tree-sticky-row")}function af(i){return i.classList.contains("monaco-tree-sticky-container")}function zN(i){return i.tagName==="A"&&i.classList.contains("monaco-button")||i.tagName==="DIV"&&i.classList.contains("monaco-button-dropdown")?!0:i.classList.contains("monaco-list")||!i.parentElement?!1:zN(i.parentElement)}class pw{get onKeyDown(){return W.chain(this.disposables.add(new Ve(this.view.domNode,"keydown")).event,e=>e.filter(t=>!zo(t.target)).map(t=>new at(t)))}constructor(e,t,n){this.list=e,this.view=t,this.disposables=new X,this.multipleSelectionDisposables=new X,this.multipleSelectionSupport=n.multipleSelectionSupport,this.disposables.add(this.onKeyDown(s=>{switch(s.keyCode){case w.Enter:return this.onEnter(s);case w.UpArrow:return this.onUpArrow(s);case w.DownArrow:return this.onDownArrow(s);case w.PageUp:return this.onPageUpArrow(s);case w.PageDown:return this.onPageDownArrow(s);case w.Escape:return this.onEscape(s);case w.KeyA:this.multipleSelectionSupport&&(Me?s.metaKey:s.ctrlKey)&&this.onCtrlA(s)}}))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(un(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}pw.__decorator=G([vt],pw.prototype,"onKeyDown",null);var Hr;(function(i){i[i.Automatic=0]="Automatic",i[i.Trigger=1]="Trigger"})(Hr||(Hr={}));var gh;(function(i){i[i.Idle=0]="Idle",i[i.Typing=1]="Typing"})(gh||(gh={}));const IU=new class{mightProducePrintableCharacter(i){return i.ctrlKey||i.metaKey||i.altKey?!1:i.keyCode>=w.KeyA&&i.keyCode<=w.KeyZ||i.keyCode>=w.Digit0&&i.keyCode<=w.Digit9||i.keyCode>=w.Numpad0&&i.keyCode<=w.Numpad9||i.keyCode>=w.Semicolon&&i.keyCode<=w.Quote}};class TU{constructor(e,t,n,s,r){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=n,this.keyboardNavigationEventFilter=s,this.delegate=r,this.enabled=!1,this.state=gh.Idle,this.mode=Hr.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new X,this.disposables=new X,this.updateOptions(e.options)}updateOptions(e){e.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=e.typeNavigationMode??Hr.Automatic}trigger(){this.triggered=!this.triggered}enable(){if(this.enabled)return;let e=!1;const t=W.chain(this.enabledDisposables.add(new Ve(this.view.domNode,"keydown")).event,r=>r.filter(o=>!zo(o.target)).filter(()=>this.mode===Hr.Automatic||this.triggered).map(o=>new at(o)).filter(o=>e||this.keyboardNavigationEventFilter(o)).filter(o=>this.delegate.mightProducePrintableCharacter(o)).forEach(o=>Re.stop(o,!0)).map(o=>o.browserEvent.key)),n=W.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);W.reduce(W.any(t,n),(r,o)=>o===null?null:(r||"")+o,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),n(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),n(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){const e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){const t=this.list.options.accessibilityProvider?.getAriaLabel(this.list.element(e[0]));typeof t=="string"?Yh(t):t&&Yh(t.get())}this.previouslyFocused=-1}onInput(e){if(!e){this.state=gh.Idle,this.triggered=!1;return}const t=this.list.getFocus(),n=t.length>0?t[0]:0,s=this.state===gh.Idle?1:0;this.state=gh.Typing;for(let r=0;r<this.list.length;r++){const o=(n+r+s)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){if($p(e,l)){this.previouslyFocused=n,this.list.setFocus([o]),this.list.reveal(o);return}const c=sM(e,l);if(c&&c[0].end-c[0].start>1&&c.length===1){this.previouslyFocused=n,this.list.setFocus([o]),this.list.reveal(o);return}}}else if(typeof l>"u"||$p(e,l)){this.previouslyFocused=n,this.list.setFocus([o]),this.list.reveal(o);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class AU{constructor(e,t){this.list=e,this.view=t,this.disposables=new X;const n=W.chain(this.disposables.add(new Ve(t.domNode,"keydown")).event,r=>r.filter(o=>!zo(o.target)).map(o=>new at(o)));W.chain(n,r=>r.filter(o=>o.keyCode===w.Tab&&!o.ctrlKey&&!o.metaKey&&!o.shiftKey&&!o.altKey))(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(t.length===0)return;const n=this.view.domElement(t[0]);if(!n)return;const s=n.querySelector("[tabIndex]");if(!s||!Ut(s)||s.tabIndex===-1)return;const r=ke(s).getComputedStyle(s);r.visibility==="hidden"||r.display==="none"||(e.preventDefault(),e.stopPropagation(),s.focus())}dispose(){this.disposables.dispose()}}function $N(i){return Me?i.browserEvent.metaKey:i.browserEvent.ctrlKey}function qN(i){return i.browserEvent.shiftKey}function NU(i){return Jy(i)&&i.button===2}const ux={isSelectionSingleChangeEvent:$N,isSelectionRangeChangeEvent:qN};class KN{constructor(e){this.list=e,this.disposables=new X,this._onPointer=new A,this.onPointer=this._onPointer.event,e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||ux),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Bt.addTarget(e.getHTMLElement()))),W.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||ux))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){Xu(e.browserEvent.target)||on()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(zo(e.browserEvent.target)||Xu(e.browserEvent.target))return;const t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||zo(e.browserEvent.target)||Xu(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),NU(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(zo(e.browserEvent.target)||Xu(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){typeof n>"u"&&(n=this.list.getFocus()[0]??t,this.list.setAnchor(n));const s=Math.min(n,t),r=Math.max(n,t),o=un(s,r+1),a=this.list.getSelection(),l=FU(mw(a,[n]),n);if(l.length===0)return;const c=mw(o,PU(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const s=this.list.getSelection(),r=s.filter(o=>o!==t);this.list.setFocus([t]),this.list.setAnchor(t),s.length===r.length?this.list.setSelection([...r,t],e.browserEvent):this.list.setSelection(r,e.browserEvent)}}dispose(){this.disposables.dispose()}}class RU{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image${t},
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image${t},
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);const s=$o(e.listFocusAndSelectionOutline,$o(e.listSelectionOutline,e.listFocusOutline??""));s&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused.selected { outline: 1px solid ${s}; outline-offset: -1px;}`),e.listFocusOutline&&n.push(`
				.monaco-drag-image${t},
				.monaco-list${t}:focus .monaco-list-row.focused,
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);const r=$o(e.listSelectionOutline,e.listInactiveFocusOutline??"");r&&n.push(`.monaco-list${t} .monaco-list-row.focused.selected { outline: 1px dotted ${r}; outline-offset: -1px; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }
			`),e.listDropBetweenBackground&&(n.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${t} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`),n.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${t} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`)),e.tableColumnsBorder&&n.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&n.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=n.join(`
`)}}const MU={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:P.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:P.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:P.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},OU={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function FU(i,e){const t=i.indexOf(e);if(t===-1)return[];const n=[];let s=t-1;for(;s>=0&&i[s]===e-(t-s);)n.push(i[s--]);for(n.reverse(),s=t;s<i.length&&i[s]===e+(s-t);)n.push(i[s++]);return n}function mw(i,e){const t=[];let n=0,s=0;for(;n<i.length||s<e.length;)if(n>=i.length)t.push(e[s++]);else if(s>=e.length)t.push(i[n++]);else if(i[n]===e[s]){t.push(i[n]),n++,s++;continue}else i[n]<e[s]?t.push(i[n++]):t.push(e[s++]);return t}function PU(i,e){const t=[];let n=0,s=0;for(;n<i.length||s<e.length;)if(n>=i.length)t.push(e[s++]);else if(s>=e.length)t.push(i[n++]);else if(i[n]===e[s]){n++,s++;continue}else i[n]<e[s]?t.push(i[n++]):s++;return t}const dx=(i,e)=>i-e;class BU{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,s){let r=0;for(const o of this.renderers)o.renderElement(e,t,n[r++],s)}disposeElement(e,t,n,s){let r=0;for(const o of this.renderers)o.disposeElement?.(e,t,n[r],s),r+=1}disposeTemplate(e){let t=0;for(const n of this.renderers)n.disposeTemplate(e[t++])}}class WU{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return{container:e,disposables:new X}}renderElement(e,t,n){const s=this.accessibilityProvider.getAriaLabel(e),r=s&&typeof s!="string"?s:VN(s);n.disposables.add(du(a=>{this.setAriaLabel(a.readObservable(r),n.container)}));const o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof o=="number"?n.container.setAttribute("aria-level",`${o}`):n.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,n){n.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}}class UU{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart?.(e,t)}onDragOver(e,t,n,s,r){return this.dnd.onDragOver(e,t,n,s,r)}onDragLeave(e,t,n,s){this.dnd.onDragLeave?.(e,t,n,s)}onDragEnd(e){this.dnd.onDragEnd?.(e)}drop(e,t,n,s,r){this.dnd.drop(e,t,n,s,r)}dispose(){this.dnd.dispose()}}class yi{get onDidChangeFocus(){return W.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return W.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseUp(){return this.view.onMouseUp}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseMove(){return this.view.onMouseMove}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=W.chain(this.disposables.add(new Ve(this.view.domNode,"keydown")).event,r=>r.map(o=>new at(o)).filter(o=>e=o.keyCode===w.ContextMenu||o.shiftKey&&o.keyCode===w.F10).map(o=>Re.stop(o,!0)).filter(()=>!1)),n=W.chain(this.disposables.add(new Ve(this.view.domNode,"keyup")).event,r=>r.forEach(()=>e=!1).map(o=>new at(o)).filter(o=>o.keyCode===w.ContextMenu||o.shiftKey&&o.keyCode===w.F10).map(o=>Re.stop(o,!0)).map(({browserEvent:o})=>{const a=this.getFocus(),l=a.length?a[0]:void 0,c=typeof l<"u"?this.view.element(l):void 0,h=typeof l<"u"?this.view.domElement(l):this.view.domNode;return{index:l,element:c,anchor:h,browserEvent:o}})),s=W.chain(this.view.onContextMenu,r=>r.filter(o=>!e).map(({element:o,index:a,browserEvent:l})=>({element:o,index:a,anchor:new Ns(ke(this.view.domNode),l),browserEvent:l})));return W.any(t,n,s)}get onKeyDown(){return this.disposables.add(new Ve(this.view.domNode,"keydown")).event}get onKeyUp(){return this.disposables.add(new Ve(this.view.domNode,"keyup")).event}get onKeyPress(){return this.disposables.add(new Ve(this.view.domNode,"keypress")).event}get onDidFocus(){return W.signal(this.disposables.add(new Ve(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return W.signal(this.disposables.add(new Ve(this.view.domNode,"blur",!0)).event)}constructor(e,t,n,s,r=OU){this.user=e,this._options=r,this.focus=new of("focused"),this.anchor=new of("anchor"),this.eventBufferer=new Ef,this._ariaLabel="",this.disposables=new X,this._onDidDispose=new A,this.onDidDispose=this._onDidDispose.event;const o=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?this._options.accessibilityProvider?.getWidgetRole():"list";this.selection=new xU(o!=="listbox");const a=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=r.accessibilityProvider,this.accessibilityProvider&&(a.push(new WU(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant?.(this.onDidChangeActiveDescendant,this,this.disposables)),s=s.map(c=>new BU(c.templateId,[...a,c]));const l={...r,dnd:r.dnd&&new UU(this,r.dnd)};if(this.view=this.createListView(t,n,s,l),this.view.domNode.setAttribute("role",o),r.styleController)this.styleController=r.styleController(this.view.domId);else{const c=On(this.view.domNode);this.styleController=new RU(c,this.view.domId)}if(this.spliceable=new fU([new u_(this.focus,this.view,r.identityProvider),new u_(this.selection,this.view,r.identityProvider),new u_(this.anchor,this.view,r.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new AU(this,this.view)),(typeof r.keyboardSupport!="boolean"||r.keyboardSupport)&&(this.keyboardController=new pw(this,this.view,r),this.disposables.add(this.keyboardController)),r.keyboardNavigationLabelProvider){const c=r.keyboardNavigationDelegate||IU;this.typeNavigationController=new TU(this,this.view,r.keyboardNavigationLabelProvider,r.keyboardNavigationEventFilter??(()=>!0),c),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(r),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}createListView(e,t,n,s){return new Qt(e,t,n,s)}createMouseController(e){return new KN(this)}updateOptions(e={}){this._options={...this._options,...e},this.typeNavigationController?.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),this.keyboardController?.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new ul(this.user,`Invalid start index: ${e}`);if(t<0)throw new ul(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}updateWidth(e){this.view.updateWidth(e)}updateElementHeight(e,t){this.view.updateElementHeight(e,t,null)}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get contentWidth(){return this.view.contentWidth}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.view.onDidChangeContentWidth}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollLeft(){return this.view.getScrollLeft()}set scrollLeft(e){this.view.setScrollLeft(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get firstMostlyVisibleIndex(){return this.view.firstMostlyVisibleIndex}get lastVisibleIndex(){return this.view.lastVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}triggerTypeNavigation(){this.typeNavigationController?.trigger()}setSelection(e,t){for(const n of e)if(n<0||n>=this.length)throw new ul(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new ul(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return this.anchor.get().at(0)}getAnchorElement(){const e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(const n of e)if(n<0||n>=this.length)throw new ul(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,s){if(this.length===0)return;const r=this.focus.get(),o=this.findNextIndex(r.length>0?r[0]+e:0,t,s);o>-1&&this.setFocus([o],n)}focusPrevious(e=1,t=!1,n,s){if(this.length===0)return;const r=this.focus.get(),o=this.findPreviousIndex(r.length>0?r[0]-e:0,t,s);o>-1&&this.setFocus([o],n)}async focusNextPage(e,t){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;const s=this.getFocus()[0];if(s!==n&&(s===void 0||n>s)){const r=this.findPreviousIndex(n,!1,t);r>-1&&s!==r?this.setFocus([r],e):this.setFocus([n],e)}else{const r=this.view.getScrollTop();let o=r+this.view.renderHeight;n>s&&(o-=this.view.elementHeight(n)),this.view.setScrollTop(o),this.view.getScrollTop()!==r&&(this.setFocus([]),await sc(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,n=()=>0){let s;const r=n(),o=this.view.getScrollTop()+r;o===0?s=this.view.indexAt(o):s=this.view.indexAfter(o-1);const a=this.getFocus()[0];if(a!==s&&(a===void 0||a>=s)){const l=this.findNextIndex(s,!1,t);l>-1&&a!==l?this.setFocus([l],e):this.setFocus([s],e)}else{const l=o;this.view.setScrollTop(o-this.view.renderHeight-r),this.view.getScrollTop()+n()!==l&&(this.setFocus([]),await sc(0),await this.focusPreviousPage(e,t,n))}}focusLast(e,t){if(this.length===0)return;const n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;const s=this.findNextIndex(e,!1,n);s>-1&&this.setFocus([s],t)}findNextIndex(e,t=!1,n){for(let s=0;s<this.length;s++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let s=0;s<this.length;s++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t,n=0){if(e<0||e>=this.length)throw new ul(this.user,`Invalid index ${e}`);const s=this.view.getScrollTop(),r=this.view.elementTop(e),o=this.view.elementHeight(e);if(el(t)){const a=o-this.view.renderHeight+n;this.view.setScrollTop(a*pn(t,0,1)+r-n)}else{const a=r+o,l=s+this.view.renderHeight;r<s+n&&a>=l||(r<s+n||a>=l&&o>=this.view.renderHeight?this.view.setScrollTop(r-n):a>=l&&this.view.setScrollTop(a-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new ul(this.user,`Invalid index ${e}`);const n=this.view.getScrollTop(),s=this.view.elementTop(e),r=this.view.elementHeight(e);if(s<n+t||s+r>n+this.view.renderHeight)return null;const o=r-this.view.renderHeight+t;return Math.abs((n+t-s)/o)}isDOMFocused(){return il(this.view.domNode)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){const e=this.focus.get();if(e.length>0){let t;this.accessibilityProvider?.getActiveDescendantId&&(t=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",t||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}yi.__decorator=G([vt],yi.prototype,"onDidChangeFocus",null);yi.__decorator=G([vt],yi.prototype,"onDidChangeSelection",null);yi.__decorator=G([vt],yi.prototype,"onContextMenu",null);yi.__decorator=G([vt],yi.prototype,"onKeyDown",null);yi.__decorator=G([vt],yi.prototype,"onKeyUp",null);yi.__decorator=G([vt],yi.prototype,"onKeyPress",null);yi.__decorator=G([vt],yi.prototype,"onDidFocus",null);yi.__decorator=G([vt],yi.prototype,"onDidBlur",null);let GN={showInstantHover:()=>{},showDelayedHover:()=>{},setupDelayedHover:()=>$.None,setupDelayedHoverAtMouse:()=>$.None,hideHover:()=>{},showAndFocusLastHover:()=>{},setupManagedHover:()=>({dispose:()=>{},show:()=>{},hide:()=>{},update:()=>{}}),showManagedHover:()=>{}};function Cie(i){GN=i}function qs(){return GN}const HU=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));mt(HU);const Ul=_e,jN="selectOption.entry.template";class VU{get templateId(){return jN}renderTemplate(e){const t=Object.create(null);return t.root=e,t.text=ie(e,Ul(".option-text")),t.detail=ie(e,Ul(".option-detail")),t.decoratorRight=ie(e,Ul(".option-decorator-right")),t}renderElement(e,t,n){const s=n,r=e.text,o=e.detail,a=e.decoratorRight,l=e.isDisabled;s.text.textContent=r,s.detail.textContent=o||"",s.decoratorRight.innerText=a||"",l?s.root.classList.add("option-disabled"):s.root.classList.remove("option-disabled")}disposeTemplate(e){}}class Dl extends ${static{this.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32}static{this.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2}static{this.DEFAULT_MINIMUM_VISIBLE_OPTIONS=3}constructor(e,t,n,s,r){super(),this.options=[],this._currentSelection=0,this._hasDetails=!1,this._skipLayout=!1,this._sticky=!1,this._isVisible=!1,this.styles=s,this.selectBoxOptions=r||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=Dl.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new A,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(n),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}setTitle(e){!this._hover&&e?this._hover=this._register(qs().setupManagedHover(ks("mouse"),this.selectElement,e)):this._hover&&this._hover.update(e)}getHeight(){return 22}getTemplateId(){return jN}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=_e(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=ie(this.selectDropDownContainer,Ul(".select-box-details-pane"));const t=ie(this.selectDropDownContainer,Ul(".select-box-dropdown-container-width-control")),n=ie(t,Ul(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",ie(n,this.widthControlElement),this._dropDownPosition=Zn.BELOW,this.styleElement=On(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(V(this.selectDropDownContainer,j.DRAG_START,s=>{Re.stop(s,!0)}))}registerListeners(){this._register(Fs(this.selectElement,"change",t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)})),this._register(V(this.selectElement,j.CLICK,t=>{Re.stop(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(V(this.selectElement,j.MOUSE_DOWN,t=>{Re.stop(t)}));let e;this._register(V(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register(V(this.selectElement,"touchend",t=>{Re.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(V(this.selectElement,j.KEY_DOWN,t=>{const n=new at(t);let s=!1;Me?(n.keyCode===w.DownArrow||n.keyCode===w.UpArrow||n.keyCode===w.Space||n.keyCode===w.Enter)&&(s=!0):(n.keyCode===w.DownArrow&&n.altKey||n.keyCode===w.UpArrow&&n.altKey||n.keyCode===w.Space||n.keyCode===w.Enter)&&(s=!0),s&&(this.showSelectDropDown(),Re.stop(t,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){wi(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((n,s)=>{this.selectElement.add(this.createOption(n.text,s,n.isDisabled)),typeof n.description=="string"&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setEnabled(e){this.selectElement.disabled=!e}setOptionsList(){this.selectList?.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}setAriaLabel(e){this.selectBoxOptions.ariaLabel=e,this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){const e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){const e=this.styles.selectBackground??"",t=this.styles.selectForeground??"",n=this.styles.selectBorder??"";this.selectElement.style.backgroundColor=e,this.selectElement.style.color=t,this.selectElement.style.borderColor=n}styleList(){const e=this.styles.selectBackground??"",t=$o(this.styles.selectListBackground,e);this.selectDropDownListContainer.style.backgroundColor=t,this.selectionDetailsPane.style.backgroundColor=t;const n=this.styles.focusBorder??"";this.selectDropDownContainer.style.outlineColor=n,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,n){const s=document.createElement("option");return s.value=e,s.text=e,s.disabled=!!n,s}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{this.selectDropDownContainer.remove()}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,n)=>{this.updateDetail(n),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");const t=ke(this.selectElement),n=Bl(this.selectElement),s=ke(this.selectElement).getComputedStyle(this.selectElement),r=parseFloat(s.getPropertyValue("--dropdown-padding-top"))+parseFloat(s.getPropertyValue("--dropdown-padding-bottom")),o=t.innerHeight-n.top-n.height-(this.selectBoxOptions.minBottomMargin||0),a=n.top-Dl.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,l=this.selectElement.offsetWidth,c=this.setWidthControlElement(this.widthControlElement),h=Math.max(c,Math.round(l)).toString()+"px";this.selectDropDownContainer.style.width=h,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let u=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());const f=this._hasDetails?this._cachedMaxDetailsHeight:0,g=u+r+f,p=Math.floor((o-r-f)/this.getHeight()),m=Math.floor((a-r-f)/this.getHeight());if(e)return n.top+n.height>t.innerHeight-22||n.top<Dl.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||p<1&&m<1?!1:(p<Dl.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&m>p&&this.options.length>p?(this._dropDownPosition=Zn.ABOVE,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=Zn.BELOW,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(n.top+n.height>t.innerHeight-22||n.top<Dl.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===Zn.BELOW&&p<1||this._dropDownPosition===Zn.ABOVE&&m<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===Zn.BELOW){if(this._isVisible&&p+m<1)return this.hideSelectDropDown(!0),!1;g>o&&(u=p*this.getHeight())}else g>a&&(u=m*this.getHeight());return this.selectList.layout(u),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=u+r+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=u+r+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=h,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let n=0,s=0;this.options.forEach((r,o)=>{const a=r.detail?r.detail.length:0,l=r.decoratorRight?r.decoratorRight.length:0,c=r.text.length+a+l;c>s&&(n=o,s=c)}),e.textContent=this.options[n].text+(this.options[n].decoratorRight?this.options[n].decoratorRight+" ":""),t=Yd(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=ie(e,Ul(".select-box-dropdown-list-container")),this.listRenderer=new VU,this.selectList=this._register(new yi("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:Nt.Visible,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:s=>{let r=s.text;return s.detail&&(r+=`. ${s.detail}`),s.decoratorRight&&(r+=`. ${s.decoratorRight}`),s.description&&(r+=`. ${s.description}`),r},getWidgetAriaLabel:()=>d(29,"Select Box"),getRole:()=>Me?"":"option",getWidgetRole:()=>"listbox"}})),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);const t=this._register(new Ve(this.selectDropDownListContainer,"keydown")),n=W.chain(t.event,s=>s.filter(()=>this.selectList.length>0).map(r=>new at(r)));this._register(W.chain(n,s=>s.filter(r=>r.keyCode===w.Enter))(this.onEnter,this)),this._register(W.chain(n,s=>s.filter(r=>r.keyCode===w.Tab))(this.onEnter,this)),this._register(W.chain(n,s=>s.filter(r=>r.keyCode===w.Escape))(this.onEscape,this)),this._register(W.chain(n,s=>s.filter(r=>r.keyCode===w.UpArrow))(this.onUpArrow,this)),this._register(W.chain(n,s=>s.filter(r=>r.keyCode===w.DownArrow))(this.onDownArrow,this)),this._register(W.chain(n,s=>s.filter(r=>r.keyCode===w.PageDown))(this.onPageDown,this)),this._register(W.chain(n,s=>s.filter(r=>r.keyCode===w.PageUp))(this.onPageUp,this)),this._register(W.chain(n,s=>s.filter(r=>r.keyCode===w.Home))(this.onHome,this)),this._register(W.chain(n,s=>s.filter(r=>r.keyCode===w.End))(this.onEnd,this)),this._register(W.chain(n,s=>s.filter(r=>r.keyCode>=w.Digit0&&r.keyCode<=w.KeyZ||r.keyCode>=w.Semicolon&&r.keyCode<=w.NumpadDivide))(this.onCharacter,this)),this._register(V(this.selectList.getHTMLElement(),j.POINTER_UP,s=>this.onPointerUp(s))),this._register(this.selectList.onMouseOver(s=>typeof s.index<"u"&&this.selectList.setFocus([s.index]))),this._register(this.selectList.onDidChangeFocus(s=>this.onListFocus(s))),this._register(V(this.selectDropDownContainer,j.FOCUS_OUT,s=>{!this._isVisible||Kt(s.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;Re.stop(e);const t=e.target;if(!t||t.classList.contains("slider"))return;const n=t.closest(".monaco-list-row");if(!n)return;const s=Number(n.getAttribute("data-index")),r=n.classList.contains("option-disabled");s>=0&&s<this.options.length&&!r&&(this.selected=s,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){const n=r=>{for(let o=0;o<r.childNodes.length;o++){const a=r.childNodes.item(o);(a.tagName&&a.tagName.toLowerCase())==="img"?a.remove():n(a)}},s=K1({value:e,supportThemeIcons:!0},{actionHandler:t});return s.element.classList.add("select-box-description-markdown"),n(s.element),s.element}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){this.selectionDetailsPane.innerText="";const t=this.options[e],n=t?.description??"",s=t?.descriptionIsMarkdown??!1;if(n){if(s){const r=t.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(n,r))}else this.selectionDetailsPane.innerText=n;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){Re.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){Re.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){Re.stop(e,!0);const t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&(Re.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){Re.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){Re.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){Re.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){Re.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){const t=Wr.toString(e.keyCode);let n=-1;for(let s=0;s<this.options.length-1;s++)if(n=(s+this.selected+1)%this.options.length,this.options[n].text.charAt(0).toUpperCase()===t&&!this.options[n].isDisabled){this.select(n),this.selectList.setFocus([n]),this.selectList.reveal(this.selectList.getFocus()[0]),Re.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}}class zU extends ${constructor(e,t,n,s){super(),this.selected=0,this.selectBoxOptions=s||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new A),this.styles=n,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(Bt.addTarget(this.selectElement)),[qt.Tap].forEach(e=>{this._register(V(this.selectElement,e,t=>{this.selectElement.focus()}))}),this._register(Fs(this.selectElement,"click",e=>{Re.stop(e,!0)})),this._register(Fs(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(Fs(this.selectElement,"keydown",e=>{let t=!1;Me?(e.keyCode===w.DownArrow||e.keyCode===w.UpArrow||e.keyCode===w.Space)&&(t=!0):(e.keyCode===w.DownArrow&&e.altKey||e.keyCode===w.Space||e.keyCode===w.Enter)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!wi(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((n,s)=>{this.selectElement.add(this.createOption(n.text,s,n.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}setAriaLabel(e){this.selectBoxOptions.ariaLabel=e,this.selectElement.setAttribute("aria-label",e)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setEnabled(e){this.selectElement.disabled=!e}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}style(e){this.styles=e,this.applyStyles()}applyStyles(){this.selectElement&&(this.selectElement.style.backgroundColor=this.styles.selectBackground??"",this.selectElement.style.color=this.styles.selectForeground??"",this.selectElement.style.borderColor=this.styles.selectBorder??"")}createOption(e,t,n){const s=document.createElement("option");return s.value=e,s.text=e,s.disabled=!!n,s}}const $U=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));mt($U);class qU extends so{constructor(e,t,n,s,r){super(),Me&&!r?.useCustomDrawn?this.selectBoxDelegate=new zU(e,t,s,r):this.selectBoxDelegate=new Dl(e,t,n,s,r),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}setAriaLabel(e){this.selectBoxDelegate.setAriaLabel(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}setEnabled(e){this.selectBoxDelegate.setEnabled(e)}render(e){this.selectBoxDelegate.render(e)}}const YN=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));mt(YN);class nr extends ${get action(){return this._action}constructor(e,t,n={}){super(),this.options=n,this._context=e||this,this._action=t,t instanceof Q1&&this._register(t.onDidChange(s=>{this.element&&this.handleActionChangeEvent(s)}))}handleActionChangeEvent(e){e.enabled!==void 0&&this.updateEnabled(),e.checked!==void 0&&this.updateChecked(),e.class!==void 0&&this.updateClass(),e.label!==void 0&&(this.updateLabel(),this.updateTooltip()),e.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new Xh)),this._actionRunner}set actionRunner(e){this._actionRunner=e}isEnabled(){return this._action.enabled}setActionContext(e){this._context=e}render(e){const t=this.element=e;this._register(Bt.addTarget(e));const n=this.options&&this.options.draggable;n&&(e.draggable=!0,Gd&&this._register(V(e,j.DRAG_START,s=>s.dataTransfer?.setData(WN.TEXT,this._action.label)))),this._register(V(t,qt.Tap,s=>this.onClick(s,!0))),this._register(V(t,j.MOUSE_DOWN,s=>{n||Re.stop(s,!0),this._action.enabled&&s.button===0&&t.classList.add("active")})),Me&&this._register(V(t,j.CONTEXT_MENU,s=>{s.button===0&&s.ctrlKey===!0&&this.onClick(s)})),this._register(V(t,j.CLICK,s=>{Re.stop(s,!0),this.options&&this.options.isMenu||this.onClick(s)})),this._register(V(t,j.DBLCLICK,s=>{Re.stop(s,!0)})),[j.MOUSE_UP,j.MOUSE_OUT].forEach(s=>{this._register(V(t,s,r=>{Re.stop(r),t.classList.remove("active")}))})}onClick(e,t=!1){Re.stop(e,!0);const n=wn(this._context)?this.options?.useEventAsContext?e:{preserveFocus:t}:this._context;this.actionRunner.run(this._action,n)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}isFocused(){return!!this.element?.classList.contains("focused")}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(e){this.element&&(this.element.tabIndex=e?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){if(!this.element)return;const e=this.getTooltip()??"";if(this.updateAriaLabel(),this.options.hoverDelegate?.showNativeHover)this.element.title=e;else if(!this.customHover&&e!==""){const t=this.options.hoverDelegate??ks("element");this.customHover=this._store.add(qs().setupManagedHover(t,this.element,e))}else this.customHover&&this.customHover.update(e)}updateAriaLabel(){if(this.element){const e=this.getTooltip()??"";this.element.setAttribute("aria-label",e)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}}class OS extends nr{constructor(e,t,n){super(e,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),Wp(this.element);const t=document.createElement("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding&&!this.options.keybindingNotRenderedWithLabel){const n=document.createElement("span");n.classList.add("keybinding"),n.textContent=this.options.keybinding,this.element.appendChild(n)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===Ui.ID?"presentation":this.options.isMenu?"menuitem":this.options.isTabList?"tab":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}isFocused(){return!!this.label&&this.label?.tabIndex===0}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label,this.options.keybinding&&(e=d(1,"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label?.classList.remove("codicon")}updateEnabled(){this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element?.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element?.classList.add("disabled"))}updateAriaLabel(){if(this.label){const e=this.getTooltip()??"";this.label.setAttribute("aria-label",e)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.options.isTabList?this.label.setAttribute("aria-selected",this.action.checked?"true":"false"):(this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox"))):(this.label.classList.remove("checked"),this.label.removeAttribute(this.options.isTabList?"aria-selected":"aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}}class KU extends nr{constructor(e,t,n,s,r,o,a){super(e,t),this.selectBox=new qU(n,s,r,o,a),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}setOptions(e,t){this.selectBox.setOptions(e,t)}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){this.selectBox?.focus()}blur(){this.selectBox?.blur()}render(e){this.selectBox.render(e)}}const XN=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));mt(XN);class GU extends Xh{constructor(e,t){super(),this._onDidChangeVisibility=this._register(new A),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._element=ie(e,_e(".monaco-dropdown")),this._label=ie(this._element,_e(".dropdown-label"));let n=t.labelRenderer;n||(n=r=>(r.textContent=t.label||"",null));for(const r of[j.CLICK,j.MOUSE_DOWN,qt.Tap])this._register(V(this.element,r,o=>Re.stop(o,!0)));for(const r of[j.MOUSE_DOWN,qt.Tap])this._register(V(this._label,r,o=>{Jy(o)&&(o.detail>1||o.button!==0)||(this.visible?this.hide():this.show())}));this._register(V(this._label,j.KEY_DOWN,r=>{const o=new at(r);(o.equals(w.Enter)||o.equals(w.Space))&&(Re.stop(r,!0),this.visible?this.hide():this.show())}));const s=n(this._label);s&&this._register(s),this._register(Bt.addTarget(this._label))}get element(){return this._element}get label(){return this._label}set tooltip(e){this._label&&(!this.hover&&e!==""?this.hover=this._register(qs().setupManagedHover(ks("mouse"),this._label,e)):this.hover&&this.hover.update(e))}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}isVisible(){return!!this.visible}onEvent(e,t){this.hide()}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}}function Eie(i){return typeof i?.getActions=="function"}class jU extends GU{constructor(e,t){super(e,t),this._options=t,this._actions=[],this.actions=t.actions||[]}set menuOptions(e){this._menuOptions=e}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(e){this._actions=e}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(e,t)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(e,t):void 0,getKeyBinding:e=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(e):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:Oa.LEFT,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}}mt(XN);class QN extends nr{constructor(e,t,n,s=Object.create(null)){super(null,e,s),this.actionItem=null,this._onDidChangeVisibility=this._register(new A),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=s,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;const t=r=>(this.element=ie(r,_e("a.action-label")),this.renderLabel(this.element)),n=Array.isArray(this.menuActionsOrProvider),s={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new jU(e,s)),this._register(this.dropdownMenu.onDidChangeVisibility(r=>{this.element?.setAttribute("aria-expanded",`${r}`),this._onDidChangeVisibility.fire(r)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){const r=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return r.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}renderLabel(e){let t=[];return typeof this.options.classNames=="string"?t=this.options.classNames.split(/\s+/g).filter(n=>!!n):this.options.classNames&&(t=this.options.classNames),t.find(n=>n==="icon")||t.push("codicon"),e.classList.add(...t),this._action.label&&this._register(qs().setupManagedHover(this.options.hoverDelegate??ks("mouse"),e,this._action.label)),null}setAriaLabelAttributes(e){e.setAttribute("role","button"),e.setAttribute("aria-haspopup","true"),e.setAttribute("aria-expanded","false"),e.ariaLabel=this._action.label||""}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){this.dropdownMenu?.show()}updateEnabled(){const e=!this.action.enabled;this.actionItem?.classList.toggle("disabled",e),this.element?.classList.toggle("disabled",e)}}function xie(i){return i&&typeof i=="object"&&typeof i.original=="string"&&typeof i.value=="string"}function YU(i){return i?i.condition!==void 0:!1}function d_(i){const e=[];typeof i=="number"&&e.push("code/timeOrigin",i);function t(s,r){e.push(s,r?.startTime??Date.now())}function n(){const s=[];for(let r=0;r<e.length;r+=2)s.push({name:e[r],startTime:e[r+1]});return s}return{mark:t,getMarks:n}}function XU(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?d_():{mark(i,e){performance.mark(i,e)},getMarks(){let i=performance.timeOrigin;typeof i!="number"&&(i=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);const e=[{name:"code/timeOrigin",startTime:Math.round(i)}];for(const t of performance.getEntriesByType("mark"))e.push({name:t.name,startTime:Math.round(i+t.startTime)});return e}};if(typeof process=="object"){const i=performance?.timeOrigin;return d_(i)}else return console.trace("perf-util loaded in UNKNOWN environment"),d_()}function QU(i){return i.MonacoPerformanceMarks||(i.MonacoPerformanceMarks=XU()),i.MonacoPerformanceMarks}const ZN=QU(globalThis),pa=ZN.mark,Lie=ZN.getMarks;var Ka;(function(i){i[i.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",i[i.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(Ka||(Ka={}));var Qs;(function(i){i[i.None=0]="None",i[i.Initialized=1]="Initialized",i[i.Closed=2]="Closed"})(Qs||(Qs={}));class _d extends ${static{this.DEFAULT_FLUSH_DELAY=100}constructor(e,t=Object.create(null)){super(),this.database=e,this.options=t,this._onDidChangeStorage=this._register(new Pd),this.onDidChangeStorage=this._onDidChangeStorage.event,this.state=Qs.None,this.cache=new Map,this.flushDelayer=this._register(new Uy(_d.DEFAULT_FLUSH_DELAY)),this.pendingDeletes=new Set,this.pendingInserts=new Map,this.pendingClose=void 0,this.whenFlushedCallbacks=[],this.registerListeners()}registerListeners(){this._register(this.database.onDidChangeItemsExternal(e=>this.onDidChangeItemsExternal(e)))}onDidChangeItemsExternal(e){this._onDidChangeStorage.pause();try{e.changed?.forEach((t,n)=>this.acceptExternal(n,t)),e.deleted?.forEach(t=>this.acceptExternal(t,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(e,t){if(this.state===Qs.Closed)return;let n=!1;wn(t)?n=this.cache.delete(e):this.cache.get(e)!==t&&(this.cache.set(e,t),n=!0),n&&this._onDidChangeStorage.fire({key:e,external:!0})}get items(){return this.cache}get size(){return this.cache.size}async init(){this.state===Qs.None&&(this.state=Qs.Initialized,this.options.hint!==Ka.STORAGE_DOES_NOT_EXIST&&(this.cache=await this.database.getItems()))}get(e,t){const n=this.cache.get(e);return wn(n)?t:n}getBoolean(e,t){const n=this.get(e);return wn(n)?t:n==="true"}getNumber(e,t){const n=this.get(e);return wn(n)?t:parseInt(n,10)}getObject(e,t){const n=this.get(e);return wn(n)?t:Cm(n)}async set(e,t,n=!1){if(this.state===Qs.Closed)return;if(wn(t))return this.delete(e,n);const s=xi(t)||Array.isArray(t)?kB(t):String(t);if(this.cache.get(e)!==s)return this.cache.set(e,s),this.pendingInserts.set(e,s),this.pendingDeletes.delete(e),this._onDidChangeStorage.fire({key:e,external:n}),this.doFlush()}async delete(e,t=!1){if(!(this.state===Qs.Closed||!this.cache.delete(e)))return this.pendingDeletes.has(e)||this.pendingDeletes.add(e),this.pendingInserts.delete(e),this._onDidChangeStorage.fire({key:e,external:t}),this.doFlush()}async optimize(){if(this.state!==Qs.Closed)return await this.flush(0),this.database.optimize()}async close(){return this.pendingClose||(this.pendingClose=this.doClose()),this.pendingClose}async doClose(){this.state=Qs.Closed;try{await this.doFlush(0)}catch{}await this.database.close(()=>this.cache)}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;const e={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(e).finally(()=>{if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)this.whenFlushedCallbacks.pop()?.()})}async flush(e){if(!(this.state===Qs.Closed||this.pendingClose))return this.doFlush(e)}async doFlush(e){return this.options.hint===Ka.STORAGE_IN_MEMORY?this.flushPending():this.flushDelayer.trigger(()=>this.flushPending(),e)}async whenFlushed(){if(this.hasPending)return new Promise(e=>this.whenFlushedCallbacks.push(e))}isInMemory(){return this.options.hint===Ka.STORAGE_IN_MEMORY}}class f_{constructor(){this.onDidChangeItemsExternal=W.None,this.items=new Map}async getItems(){return this.items}async updateItems(e){e.insert?.forEach((t,n)=>this.items.set(n,t)),e.delete?.forEach(t=>this.items.delete(t))}async optimize(){}async close(){}}const eb=be("fileService"),FS=be("IUriIdentityService");var fx;(function(i){i.Settings="settings",i.Keybindings="keybindings",i.Snippets="snippets",i.Prompts="prompts",i.Tasks="tasks",i.Extensions="extensions",i.GlobalState="globalState"})(fx||(fx={}));function ZU(i){const e=i;return!!(e&&typeof e=="object"&&typeof e.id=="string"&&typeof e.isDefault=="boolean"&&typeof e.name=="string"&&Y.isUri(e.location)&&Y.isUri(e.globalStorageHome)&&Y.isUri(e.settingsResource)&&Y.isUri(e.keybindingsResource)&&Y.isUri(e.tasksResource)&&Y.isUri(e.snippetsHome)&&Y.isUri(e.promptsHome)&&Y.isUri(e.extensionsResource))}function Ug(i,e,t,n,s,r){return{id:i,name:e,location:t,isDefault:!1,icon:s?.icon,globalStorageHome:r&&s?.useDefaultFlags?.globalState?r.globalStorageHome:zn(t,"globalStorage"),settingsResource:r&&s?.useDefaultFlags?.settings?r.settingsResource:zn(t,"settings.json"),keybindingsResource:r&&s?.useDefaultFlags?.keybindings?r.keybindingsResource:zn(t,"keybindings.json"),tasksResource:r&&s?.useDefaultFlags?.tasks?r.tasksResource:zn(t,"tasks.json"),snippetsHome:r&&s?.useDefaultFlags?.snippets?r.snippetsHome:zn(t,"snippets"),promptsHome:r&&s?.useDefaultFlags?.prompts?r.promptsHome:zn(t,"prompts"),extensionsResource:r&&s?.useDefaultFlags?.extensions?r.extensionsResource:zn(t,"extensions.json"),cacheHome:zn(n,i),useDefaultFlags:s?.useDefaultFlags,isTransient:s?.transient,workspaces:s?.workspaces}}let gx=class extends ${static{this.PROFILES_KEY="userDataProfiles"}static{this.PROFILE_ASSOCIATIONS_KEY="profileAssociations"}get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.profilesObject.profiles,...this.transientProfilesObject.profiles]}constructor(e,t,n,s){super(),this.environmentService=e,this.fileService=t,this.uriIdentityService=n,this.logService=s,this._onDidChangeProfiles=this._register(new A),this.onDidChangeProfiles=this._onDidChangeProfiles.event,this._onWillCreateProfile=this._register(new A),this.onWillCreateProfile=this._onWillCreateProfile.event,this._onWillRemoveProfile=this._register(new A),this.onWillRemoveProfile=this._onWillRemoveProfile.event,this._onDidResetWorkspaces=this._register(new A),this.onDidResetWorkspaces=this._onDidResetWorkspaces.event,this.profileCreationPromises=new Map,this.transientProfilesObject={profiles:[],emptyWindows:new Map},this.profilesHome=zn(this.environmentService.userRoamingDataHome,"profiles"),this.profilesCacheHome=zn(this.environmentService.cacheHome,"CachedProfilesData")}init(){this._profilesObject=void 0}get profilesObject(){if(!this._profilesObject){const e=this.createDefaultProfile(),t=[e];try{for(const s of this.getStoredProfiles()){if(!s.name||!Bi(s.name)||!s.location){this.logService.warn("Skipping the invalid stored profile",s.location||s.name);continue}t.push(Ug(nc(s.location),s.name,s.location,this.profilesCacheHome,{icon:s.icon,useDefaultFlags:s.useDefaultFlags},e))}}catch(s){this.logService.error(s)}const n=new Map;if(t.length)try{const s=this.getStoredProfileAssociations();if(s.workspaces)for(const[r,o]of Object.entries(s.workspaces)){const a=Y.parse(r),l=t.find(c=>c.id===o);if(l){const c=l.workspaces?l.workspaces.slice(0):[];c.push(a),l.workspaces=c}}if(s.emptyWindows)for(const[r,o]of Object.entries(s.emptyWindows)){const a=t.find(l=>l.id===o);a&&n.set(r,a)}}catch(s){this.logService.error(s)}this._profilesObject={profiles:t,emptyWindows:n}}return this._profilesObject}createDefaultProfile(){const e=Ug("__default__profile__",d(2368,"Default"),this.environmentService.userRoamingDataHome,this.profilesCacheHome);return{...e,extensionsResource:this.getDefaultProfileExtensionsLocation()??e.extensionsResource,isDefault:!0}}async createTransientProfile(e){const t="Temp",n=new RegExp(`${Ga(t)}\\s(\\d+)`);let s=0;for(const o of this.profiles){const a=n.exec(o.name),l=a?parseInt(a[1]):0;s=l>s?l:s}const r=`${t} ${s+1}`;return this.createProfile(rc(DC()).toString(16),r,{transient:!0},e)}async createNamedProfile(e,t,n){return this.createProfile(rc(DC()).toString(16),e,t,n)}async createProfile(e,t,n,s){return await this.doCreateProfile(e,t,n,s)}async doCreateProfile(e,t,n,s){if(!Bi(t)||!t)throw new Error("Name of the profile is mandatory and must be of type `string`");let r=this.profileCreationPromises.get(t);return r||(r=(async()=>{try{if(this.profiles.find(h=>h.id===e||!h.isTransient&&!n?.transient&&h.name===t))throw new Error(`Profile with ${t} name already exists`);const a=s?this.getWorkspace(s):void 0;Y.isUri(a)&&(n={...n,workspaces:[a]});const l=Ug(e,t,zn(this.profilesHome,e),this.profilesCacheHome,n,this.defaultProfile);await this.fileService.createFolder(l.location);const c=[];return this._onWillCreateProfile.fire({profile:l,join(h){c.push(h)}}),await sr.settled(c),a&&!Y.isUri(a)&&this.updateEmptyWindowAssociation(a,l,!!l.isTransient),this.updateProfiles([l],[],[]),l}finally{this.profileCreationPromises.delete(t)}})(),this.profileCreationPromises.set(t,r)),r}async updateProfile(e,t){const n=[];for(const r of this.profiles){let o;if(e.id===r.id)r.isDefault?t.workspaces&&(o=r,o.workspaces=t.workspaces):o=Ug(r.id,t.name??r.name,r.location,this.profilesCacheHome,{icon:t.icon===null?void 0:t.icon??r.icon,transient:t.transient??r.isTransient,useDefaultFlags:t.useDefaultFlags??r.useDefaultFlags,workspaces:t.workspaces??r.workspaces},this.defaultProfile);else if(t.workspaces){const a=r.workspaces?.filter(l=>!t.workspaces?.some(c=>this.uriIdentityService.extUri.isEqual(l,c)));r.workspaces?.length!==a?.length&&(o=r,o.workspaces=a)}o&&n.push(o)}if(!n.length)throw e.isDefault?new Error("Cannot update default profile"):new Error(`Profile '${e.name}' does not exist`);this.updateProfiles([],[],n);const s=this.profiles.find(r=>r.id===e.id);if(!s)throw new Error(`Profile '${e.name}' was not updated`);return s}async removeProfile(e){if(e.isDefault)throw new Error("Cannot remove default profile");const t=this.profiles.find(s=>s.id===e.id);if(!t)throw new Error(`Profile '${e.name}' does not exist`);const n=[];this._onWillRemoveProfile.fire({profile:t,join(s){n.push(s)}});try{await Promise.allSettled(n)}catch(s){this.logService.error(s)}this.updateProfiles([],[t],[]);try{await this.fileService.del(t.cacheHome,{recursive:!0})}catch(s){A9(s)!==Ls.FILE_NOT_FOUND&&this.logService.error(s)}}async setProfileForWorkspace(e,t){const n=this.profiles.find(r=>r.id===t.id);if(!n)throw new Error(`Profile '${t.name}' does not exist`);const s=this.getWorkspace(e);if(Y.isUri(s)){const r=n.workspaces?[...n.workspaces]:[];r.some(o=>this.uriIdentityService.extUri.isEqual(o,s))||(r.push(s),await this.updateProfile(n,{workspaces:r}))}else this.updateEmptyWindowAssociation(s,n,!1),this.updateStoredProfiles(this.profiles)}unsetWorkspace(e,t=!1){const n=this.getWorkspace(e);if(Y.isUri(n)){const s=this.getProfileForWorkspace(e);s&&this.updateProfile(s,{workspaces:s.workspaces?.filter(r=>!this.uriIdentityService.extUri.isEqual(r,n))})}else this.updateEmptyWindowAssociation(n,void 0,t),this.updateStoredProfiles(this.profiles)}async resetWorkspaces(){this.transientProfilesObject.emptyWindows.clear(),this.profilesObject.emptyWindows.clear();for(const e of this.profiles)e.workspaces=void 0;this.updateProfiles([],[],this.profiles),this._onDidResetWorkspaces.fire()}async cleanUp(){if(await this.fileService.exists(this.profilesHome)){const e=await this.fileService.resolve(this.profilesHome);await Promise.all((e.children||[]).filter(t=>t.isDirectory&&this.profiles.every(n=>!this.uriIdentityService.extUri.isEqual(n.location,t.resource))).map(t=>this.fileService.del(t.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){const e=this.transientProfilesObject.profiles.filter(t=>!this.isProfileAssociatedToWorkspace(t));await Promise.allSettled(e.map(t=>this.removeProfile(t)))}getProfileForWorkspace(e){const t=this.getWorkspace(e);return Y.isUri(t)?this.profiles.find(n=>n.workspaces?.some(s=>this.uriIdentityService.extUri.isEqual(s,t))):this.profilesObject.emptyWindows.get(t)??this.transientProfilesObject.emptyWindows.get(t)}getWorkspace(e){return Am(e)?e.uri:Nm(e)?e.configPath:e.id}isProfileAssociatedToWorkspace(e){return!!(e.workspaces?.length||[...this.profilesObject.emptyWindows.values()].some(t=>this.uriIdentityService.extUri.isEqual(t.location,e.location))||[...this.transientProfilesObject.emptyWindows.values()].some(t=>this.uriIdentityService.extUri.isEqual(t.location,e.location)))}updateProfiles(e,t,n){const s=[...this.profiles,...e],r=this.transientProfilesObject.profiles;this.transientProfilesObject.profiles=[];const o=[];for(let a of s){if(t.some(l=>a.id===l.id)){for(const l of[...this.profilesObject.emptyWindows.keys()])a.id===this.profilesObject.emptyWindows.get(l)?.id&&this.profilesObject.emptyWindows.delete(l);continue}if(!a.isDefault){a=n.find(c=>a.id===c.id)??a;const l=r.find(c=>a.id===c.id);if(a.isTransient)this.transientProfilesObject.profiles.push(a);else if(l){for(const[c,h]of this.transientProfilesObject.emptyWindows.entries())if(a.id===h.id){this.transientProfilesObject.emptyWindows.delete(c),this.profilesObject.emptyWindows.set(c,a);break}}}a.workspaces?.length===0&&(a.workspaces=void 0),o.push(a)}this.updateStoredProfiles(o),this.triggerProfilesChanges(e,t,n)}triggerProfilesChanges(e,t,n){this._onDidChangeProfiles.fire({added:e,removed:t,updated:n,all:this.profiles})}updateEmptyWindowAssociation(e,t,n){n=t?.isTransient?!0:n,n?t?this.transientProfilesObject.emptyWindows.set(e,t):this.transientProfilesObject.emptyWindows.delete(e):(this.transientProfilesObject.emptyWindows.delete(e),t?this.profilesObject.emptyWindows.set(e,t):this.profilesObject.emptyWindows.delete(e))}updateStoredProfiles(e){const t=[],n={},s={};for(const r of e)if(!r.isTransient&&(r.isDefault||t.push({location:r.location,name:r.name,icon:r.icon,useDefaultFlags:r.useDefaultFlags}),r.workspaces))for(const o of r.workspaces)n[o.toString()]=r.id;for(const[r,o]of this.profilesObject.emptyWindows.entries())s[r.toString()]=o.id;this.saveStoredProfileAssociations({workspaces:n,emptyWindows:s}),this.saveStoredProfiles(t),this._profilesObject=void 0}getStoredProfiles(){return[]}saveStoredProfiles(e){throw new Error("not implemented")}getStoredProfileAssociations(){return{}}saveStoredProfileAssociations(e){throw new Error("not implemented")}getDefaultProfileExtensionsLocation(){}};gx=G([L(0,fu),L(1,eb),L(2,FS),L(3,Zi)],gx);const JU="__$__isNewStorageMarker",kp="__$__targetStorageMarker";var ph;(function(i){i[i.NONE=0]="NONE",i[i.SHUTDOWN=1]="SHUTDOWN"})(ph||(ph={}));var Oe;(function(i){i[i.APPLICATION=-1]="APPLICATION",i[i.PROFILE=0]="PROFILE",i[i.WORKSPACE=1]="WORKSPACE"})(Oe||(Oe={}));var fc;(function(i){i[i.USER=0]="USER",i[i.MACHINE=1]="MACHINE"})(fc||(fc={}));function eH(i){const e=i.get(kp);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}class PS extends ${static{this.DEFAULT_FLUSH_INTERVAL=60*1e3}constructor(e={flushInterval:PS.DEFAULT_FLUSH_INTERVAL}){super(),this._onDidChangeValue=this._register(new Pd),this._onDidChangeTarget=this._register(new Pd),this.onDidChangeTarget=this._onDidChangeTarget.event,this._onWillSaveState=this._register(new A),this.onWillSaveState=this._onWillSaveState.event,this.runFlushWhenIdle=this._register(new vs),this._workspaceKeyTargets=void 0,this._profileKeyTargets=void 0,this._applicationKeyTargets=void 0,this.flushWhenIdleScheduler=this._register(new Bs(()=>this.doFlushWhenIdle(),e.flushInterval))}onDidChangeValue(e,t,n){return W.filter(this._onDidChangeValue.event,s=>s.scope===e&&(t===void 0||s.key===t),n)}doFlushWhenIdle(){this.runFlushWhenIdle.value=Hh(()=>{this.shouldFlushWhenIdle()&&this.flush(),this.flushWhenIdleScheduler.schedule()})}shouldFlushWhenIdle(){return!0}stopFlushWhenIdle(){ai([this.runFlushWhenIdle,this.flushWhenIdleScheduler])}initialize(){return this.initializationPromise||(this.initializationPromise=(async()=>{pa("code/willInitStorage");try{await this.doInitialize()}finally{pa("code/didInitStorage")}this.flushWhenIdleScheduler.schedule()})()),this.initializationPromise}emitDidChangeValue(e,t){const{key:n,external:s}=t;if(n===kp){switch(e){case Oe.APPLICATION:this._applicationKeyTargets=void 0;break;case Oe.PROFILE:this._profileKeyTargets=void 0;break;case Oe.WORKSPACE:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:e})}else this._onDidChangeValue.fire({scope:e,key:n,target:this.getKeyTargets(e)[n],external:s})}emitWillSaveState(e){this._onWillSaveState.fire({reason:e})}get(e,t,n){return this.getStorage(t)?.get(e,n)}getBoolean(e,t,n){return this.getStorage(t)?.getBoolean(e,n)}getNumber(e,t,n){return this.getStorage(t)?.getNumber(e,n)}getObject(e,t,n){return this.getStorage(t)?.getObject(e,n)}storeAll(e,t){this.withPausedEmitters(()=>{for(const n of e)this.store(n.key,n.value,n.scope,n.target,t)})}store(e,t,n,s,r=!1){if(wn(t)){this.remove(e,n,r);return}this.withPausedEmitters(()=>{this.updateKeyTarget(e,n,s),this.getStorage(n)?.set(e,t,r)})}remove(e,t,n=!1){this.withPausedEmitters(()=>{this.updateKeyTarget(e,t,void 0),this.getStorage(t)?.delete(e,n)})}withPausedEmitters(e){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{e()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}keys(e,t){const n=[],s=this.getKeyTargets(e);for(const r of Object.keys(s))s[r]===t&&n.push(r);return n}updateKeyTarget(e,t,n,s=!1){const r=this.getKeyTargets(t);typeof n=="number"?r[e]!==n&&(r[e]=n,this.getStorage(t)?.set(kp,JSON.stringify(r),s)):typeof r[e]=="number"&&(delete r[e],this.getStorage(t)?.set(kp,JSON.stringify(r),s))}get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(Oe.WORKSPACE)),this._workspaceKeyTargets}get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(Oe.PROFILE)),this._profileKeyTargets}get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(Oe.APPLICATION)),this._applicationKeyTargets}getKeyTargets(e){switch(e){case Oe.APPLICATION:return this.applicationKeyTargets;case Oe.PROFILE:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(e){const t=this.getStorage(e);return t?eH(t):Object.create(null)}isNew(e){return this.getBoolean(JU,e)===!0}async flush(e=ph.NONE){this._onWillSaveState.fire({reason:e});const t=this.getStorage(Oe.APPLICATION),n=this.getStorage(Oe.PROFILE),s=this.getStorage(Oe.WORKSPACE);switch(e){case ph.NONE:await sr.settled([t?.whenFlushed()??Promise.resolve(),n?.whenFlushed()??Promise.resolve(),s?.whenFlushed()??Promise.resolve()]);break;case ph.SHUTDOWN:await sr.settled([t?.flush(0)??Promise.resolve(),n?.flush(0)??Promise.resolve(),s?.flush(0)??Promise.resolve()]);break}}async log(){const e=this.getStorage(Oe.APPLICATION)?.items??new Map,t=this.getStorage(Oe.PROFILE)?.items??new Map,n=this.getStorage(Oe.WORKSPACE)?.items??new Map;return iH(e,t,n,this.getLogDetails(Oe.APPLICATION)??"",this.getLogDetails(Oe.PROFILE)??"",this.getLogDetails(Oe.WORKSPACE)??"")}async optimize(e){return await this.flush(),this.getStorage(e)?.optimize()}async switch(e,t){return this.emitWillSaveState(ph.NONE),ZU(e)?this.switchToProfile(e,t):this.switchToWorkspace(e,t)}canSwitchProfile(e,t){return!(e.id===t.id||px(t)&&px(e))}switchData(e,t,n){this.withPausedEmitters(()=>{const s=new Set;for(const[r,o]of e)s.add(r),t.get(r)!==o&&this.emitDidChangeValue(n,{key:r,external:!0});for(const[r]of t.items)s.has(r)||this.emitDidChangeValue(n,{key:r,external:!0})})}}function px(i){return i.isDefault||!!i.useDefaultFlags?.globalState}class tH extends PS{constructor(){super(),this.applicationStorage=this._register(new _d(new f_,{hint:Ka.STORAGE_IN_MEMORY})),this.profileStorage=this._register(new _d(new f_,{hint:Ka.STORAGE_IN_MEMORY})),this.workspaceStorage=this._register(new _d(new f_,{hint:Ka.STORAGE_IN_MEMORY})),this._register(this.workspaceStorage.onDidChangeStorage(e=>this.emitDidChangeValue(Oe.WORKSPACE,e))),this._register(this.profileStorage.onDidChangeStorage(e=>this.emitDidChangeValue(Oe.PROFILE,e))),this._register(this.applicationStorage.onDidChangeStorage(e=>this.emitDidChangeValue(Oe.APPLICATION,e)))}getStorage(e){switch(e){case Oe.APPLICATION:return this.applicationStorage;case Oe.PROFILE:return this.profileStorage;default:return this.workspaceStorage}}getLogDetails(e){switch(e){case Oe.APPLICATION:return"inMemory (application)";case Oe.PROFILE:return"inMemory (profile)";default:return"inMemory (workspace)"}}async doInitialize(){}async switchToProfile(){}async switchToWorkspace(){}shouldFlushWhenIdle(){return!1}hasScope(e){return!1}}async function iH(i,e,t,n,s,r){const o=m=>{try{return JSON.parse(m)}catch{return m}},a=new Map,l=new Map;i.forEach((m,_)=>{a.set(_,m),l.set(_,o(m))});const c=new Map,h=new Map;e.forEach((m,_)=>{c.set(_,m),h.set(_,o(m))});const u=new Map,f=new Map;t.forEach((m,_)=>{u.set(_,m),f.set(_,o(m))}),console.group(n!==s?`Storage: Application (path: ${n})`:`Storage: Application & Profile (path: ${n}, default profile)`);const g=[];if(a.forEach((m,_)=>{g.push({key:_,value:m})}),console.table(g),console.groupEnd(),console.log(l),n!==s){console.group(`Storage: Profile (path: ${s}, profile specific)`);const m=[];c.forEach((_,v)=>{m.push({key:v,value:_})}),console.table(m),console.groupEnd(),console.log(h)}console.group(`Storage: Workspace (path: ${r})`);const p=[];u.forEach((m,_)=>{p.push({key:_,value:m})}),console.table(p),console.groupEnd(),console.log(f)}const rl=be("storageService");function nH(i,e){const t={...e};for(const n in i){const s=i[n];t[n]=s!==void 0?K(s):void 0}return t}const sH={keybindingLabelBackground:K(qP),keybindingLabelForeground:K(KP),keybindingLabelBorder:K(GP),keybindingLabelBottomBorder:K(jP),keybindingLabelShadow:K(Wf)},rH={buttonForeground:K(KA),buttonSeparator:K(AP),buttonBackground:K(Gu),buttonHoverBackground:K(NP),buttonSecondaryForeground:K(MP),buttonSecondaryBackground:K(q0),buttonSecondaryHoverBackground:K(OP),buttonBorder:K(RP)},oH={progressBarBackground:K(nP)},JN={inputActiveOptionBorder:K(zA),inputActiveOptionForeground:K(qA),inputActiveOptionBackground:K($A)};K(ju),K(FP),K(PP),K(BP),K(WP),K(UP),K(HP);const e4={checkboxBackground:K(cS),checkboxBorder:K(VP),checkboxForeground:K(hS),checkboxDisabledBackground:K(zP),checkboxDisabledForeground:K($P)},Iie={dialogBackground:K(Rs),dialogForeground:K(z1),dialogShadow:K(Wf),dialogBorder:K(HA),errorIconForeground:K(hP),warningIconForeground:K(uP),infoIconForeground:K(dP),textLinkForeground:K(tP)},t4={inputBackground:K(bP),inputForeground:K(_P),inputBorder:K(wP),inputValidationInfoBorder:K(kP),inputValidationInfoBackground:K(yP),inputValidationInfoForeground:K(SP),inputValidationWarningBorder:K(xP),inputValidationWarningBackground:K(CP),inputValidationWarningForeground:K(EP),inputValidationErrorBorder:K(IP),inputValidationErrorBackground:K(LP),inputValidationErrorForeground:K(DP)},aH={listFilterWidgetBackground:K(o3),listFilterWidgetOutline:K(a3),listFilterWidgetNoMatchesOutline:K(l3),listFilterWidgetShadow:K(c3),inputBoxStyles:t4,toggleStyles:JN},lH={badgeBackground:K(wp),badgeForeground:K(iP),badgeBorder:K(He)},Tie={breadcrumbsBackground:K(lP),breadcrumbsForeground:K(aP),breadcrumbsHoverForeground:K(X2),breadcrumbsFocusForeground:K(X2),breadcrumbsFocusAndSelectionForeground:K(cP)},jf={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:K(YP),listFocusForeground:K(XP),listFocusOutline:K(QP),listActiveSelectionBackground:K(hc),listActiveSelectionForeground:K(Zd),listActiveSelectionIconForeground:K(GA),listFocusAndSelectionOutline:K(ZP),listFocusAndSelectionBackground:K(hc),listFocusAndSelectionForeground:K(Zd),listInactiveSelectionBackground:K(JP),listInactiveSelectionIconForeground:K(t3),listInactiveSelectionForeground:K(e3),listInactiveFocusBackground:K(i3),listInactiveFocusOutline:K(n3),listHoverBackground:K(jA),listHoverForeground:K(YA),listDropOverBackground:K(s3),listDropBetweenBackground:K(r3),listSelectionOutline:K(Ht),listHoverOutline:K(Ht),treeIndentGuidesStroke:K(XA),treeInactiveIndentGuidesStroke:K(h3),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:K(rS),tableColumnsBorder:K(u3),tableOddRowsBackgroundColor:K(d3)};function Yf(i){return nH(i,jf)}const cH={selectBackground:K($1),selectListBackground:K(TP),selectForeground:K(aS),decoratorRightForeground:K(QA),selectBorder:K(lS),focusBorder:K(Zr),listFocusBackground:K(G0),listInactiveSelectionIconForeground:K(ZA),listFocusForeground:K(K0),listFocusOutline:Y6(Ht,P.transparent.toString()),listHoverBackground:K(jA),listHoverForeground:K(YA),listHoverOutline:K(Ht),selectListBorder:K(OA),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},hH={shadowColor:K(Wf),borderColor:K(f3),foregroundColor:K(g3),backgroundColor:K(p3),selectionForegroundColor:K(m3),selectionBackgroundColor:K(b3),selectionBorderColor:K(_3),separatorColor:K(w3),scrollbarShadow:K(rS),scrollbarSliderBackground:K(NA),scrollbarSliderHoverBackground:K(RA),scrollbarSliderActiveBackground:K(MA)},Aie={WIDTH:400,HEIGHT:270};function uH(i){return!!i.workspaceUri}function dH(i){return!!i.folderUri}function Nie(i){return!!i.fileUri}var bw;(function(i){i.MenuStyle="window.menuStyle",i.MenuBarVisibility="window.menuBarVisibility"})(bw||(bw={}));var Fm;(function(i){i.CUSTOM="custom",i.NATIVE="native",i.INHERIT="inherit"})(Fm||(Fm={}));function i4(i,e){if(zs)return!1;const t=n4(i,e),n=i.getValue("window");return n?.menuStyle===Fm.NATIVE?!(!Me&&!t):n?.menuStyle===Fm.CUSTOM?!1:t}function fH(i,e){return zs?!1:Me?!0:i4(i,e)}function Rie(i){const e=i.getValue(bw.MenuBarVisibility);return e==="default"||e==="compact"&&fH(i)||Me&&yh?"classic":e}var mx;(function(i){i.TITLE_BAR_STYLE="window.titleBarStyle",i.CUSTOM_TITLE_BAR_VISIBILITY="window.customTitleBarVisibility"})(mx||(mx={}));var Br;(function(i){i.NATIVE="native",i.CUSTOM="custom"})(Br||(Br={}));var Wo;(function(i){i.NATIVE="native",i.CUSTOM="custom",i.HIDDEN="hidden"})(Wo||(Wo={}));var bx;(function(i){i.AUTO="auto",i.WINDOWED="windowed",i.NEVER="never"})(bx||(bx={}));function Mie(i,e){return!0}function n4(i,e){return e||(e=s4(i)),e===Br.NATIVE}function s4(i){if(zs)return Br.CUSTOM;const e=i.getValue("window");if(e){if(Me&&e.nativeTabs===!0||Me&&e.nativeFullScreen===!1)return Br.NATIVE;const s=e.titleBarStyle;if(s===Br.NATIVE||s===Br.CUSTOM)return s}return Br.CUSTOM}function r4(i){if(zs||Me||s4(i)===Br.NATIVE)return Wo.NATIVE;const t=i.getValue("window")?.controlsStyle;return t===Wo.CUSTOM||t===Wo.HIDDEN?t:Wo.NATIVE}const Oie=35;function Fie(i){if(zs||n4(i))return!1;if(!Me){const e=r4(i);if(e===Wo.CUSTOM||e===Wo.HIDDEN)return!1}return!0}const Pie={width:1200,height:800},Bie={width:1024,height:768};var Cp;function wd(i){return i.command!==void 0}function gH(i){return i.submenu!==void 0}class T{static{this._instances=new Map}static{this.CommandPalette=new T("CommandPalette")}static{this.DebugBreakpointsContext=new T("DebugBreakpointsContext")}static{this.DebugCallStackContext=new T("DebugCallStackContext")}static{this.DebugConsoleContext=new T("DebugConsoleContext")}static{this.DebugVariablesContext=new T("DebugVariablesContext")}static{this.NotebookVariablesContext=new T("NotebookVariablesContext")}static{this.DebugHoverContext=new T("DebugHoverContext")}static{this.DebugWatchContext=new T("DebugWatchContext")}static{this.DebugToolBar=new T("DebugToolBar")}static{this.DebugToolBarStop=new T("DebugToolBarStop")}static{this.DebugDisassemblyContext=new T("DebugDisassemblyContext")}static{this.DebugCallStackToolbar=new T("DebugCallStackToolbar")}static{this.DebugCreateConfiguration=new T("DebugCreateConfiguration")}static{this.EditorContext=new T("EditorContext")}static{this.SimpleEditorContext=new T("SimpleEditorContext")}static{this.EditorContent=new T("EditorContent")}static{this.EditorLineNumberContext=new T("EditorLineNumberContext")}static{this.EditorContextCopy=new T("EditorContextCopy")}static{this.EditorContextPeek=new T("EditorContextPeek")}static{this.EditorContextShare=new T("EditorContextShare")}static{this.EditorTitle=new T("EditorTitle")}static{this.CompactWindowEditorTitle=new T("CompactWindowEditorTitle")}static{this.EditorTitleRun=new T("EditorTitleRun")}static{this.EditorTitleContext=new T("EditorTitleContext")}static{this.EditorTitleContextShare=new T("EditorTitleContextShare")}static{this.EmptyEditorGroup=new T("EmptyEditorGroup")}static{this.EmptyEditorGroupContext=new T("EmptyEditorGroupContext")}static{this.EditorTabsBarContext=new T("EditorTabsBarContext")}static{this.EditorTabsBarShowTabsSubmenu=new T("EditorTabsBarShowTabsSubmenu")}static{this.EditorTabsBarShowTabsZenModeSubmenu=new T("EditorTabsBarShowTabsZenModeSubmenu")}static{this.EditorActionsPositionSubmenu=new T("EditorActionsPositionSubmenu")}static{this.ExplorerContext=new T("ExplorerContext")}static{this.ExplorerContextShare=new T("ExplorerContextShare")}static{this.ExtensionContext=new T("ExtensionContext")}static{this.ExtensionEditorContextMenu=new T("ExtensionEditorContextMenu")}static{this.GlobalActivity=new T("GlobalActivity")}static{this.CommandCenter=new T("CommandCenter")}static{this.CommandCenterCenter=new T("CommandCenterCenter")}static{this.LayoutControlMenuSubmenu=new T("LayoutControlMenuSubmenu")}static{this.LayoutControlMenu=new T("LayoutControlMenu")}static{this.MenubarMainMenu=new T("MenubarMainMenu")}static{this.MenubarAppearanceMenu=new T("MenubarAppearanceMenu")}static{this.MenubarDebugMenu=new T("MenubarDebugMenu")}static{this.MenubarEditMenu=new T("MenubarEditMenu")}static{this.MenubarCopy=new T("MenubarCopy")}static{this.MenubarFileMenu=new T("MenubarFileMenu")}static{this.MenubarGoMenu=new T("MenubarGoMenu")}static{this.MenubarHelpMenu=new T("MenubarHelpMenu")}static{this.MenubarLayoutMenu=new T("MenubarLayoutMenu")}static{this.MenubarNewBreakpointMenu=new T("MenubarNewBreakpointMenu")}static{this.PanelAlignmentMenu=new T("PanelAlignmentMenu")}static{this.PanelPositionMenu=new T("PanelPositionMenu")}static{this.ActivityBarPositionMenu=new T("ActivityBarPositionMenu")}static{this.MenubarPreferencesMenu=new T("MenubarPreferencesMenu")}static{this.MenubarRecentMenu=new T("MenubarRecentMenu")}static{this.MenubarSelectionMenu=new T("MenubarSelectionMenu")}static{this.MenubarShare=new T("MenubarShare")}static{this.MenubarSwitchEditorMenu=new T("MenubarSwitchEditorMenu")}static{this.MenubarSwitchGroupMenu=new T("MenubarSwitchGroupMenu")}static{this.MenubarTerminalMenu=new T("MenubarTerminalMenu")}static{this.MenubarTerminalSuggestStatusMenu=new T("MenubarTerminalSuggestStatusMenu")}static{this.MenubarViewMenu=new T("MenubarViewMenu")}static{this.MenubarHomeMenu=new T("MenubarHomeMenu")}static{this.OpenEditorsContext=new T("OpenEditorsContext")}static{this.OpenEditorsContextShare=new T("OpenEditorsContextShare")}static{this.ProblemsPanelContext=new T("ProblemsPanelContext")}static{this.SCMInputBox=new T("SCMInputBox")}static{this.SCMChangeContext=new T("SCMChangeContext")}static{this.SCMResourceContext=new T("SCMResourceContext")}static{this.SCMResourceContextShare=new T("SCMResourceContextShare")}static{this.SCMResourceFolderContext=new T("SCMResourceFolderContext")}static{this.SCMResourceGroupContext=new T("SCMResourceGroupContext")}static{this.SCMSourceControl=new T("SCMSourceControl")}static{this.SCMSourceControlInline=new T("SCMSourceControlInline")}static{this.SCMSourceControlTitle=new T("SCMSourceControlTitle")}static{this.SCMHistoryTitle=new T("SCMHistoryTitle")}static{this.SCMHistoryItemContext=new T("SCMHistoryItemContext")}static{this.SCMHistoryItemChatContext=new T("SCMHistoryItemChatContext")}static{this.SCMHistoryItemChangeContext=new T("SCMHistoryItemChangeContext")}static{this.SCMHistoryItemHover=new T("SCMHistoryItemHover")}static{this.SCMHistoryItemRefContext=new T("SCMHistoryItemRefContext")}static{this.SCMQuickDiffDecorations=new T("SCMQuickDiffDecorations")}static{this.SCMTitle=new T("SCMTitle")}static{this.SearchContext=new T("SearchContext")}static{this.SearchActionMenu=new T("SearchActionContext")}static{this.StatusBarWindowIndicatorMenu=new T("StatusBarWindowIndicatorMenu")}static{this.StatusBarRemoteIndicatorMenu=new T("StatusBarRemoteIndicatorMenu")}static{this.StickyScrollContext=new T("StickyScrollContext")}static{this.TestItem=new T("TestItem")}static{this.TestItemGutter=new T("TestItemGutter")}static{this.TestProfilesContext=new T("TestProfilesContext")}static{this.TestMessageContext=new T("TestMessageContext")}static{this.TestMessageContent=new T("TestMessageContent")}static{this.TestPeekElement=new T("TestPeekElement")}static{this.TestPeekTitle=new T("TestPeekTitle")}static{this.TestCallStack=new T("TestCallStack")}static{this.TestCoverageFilterItem=new T("TestCoverageFilterItem")}static{this.TouchBarContext=new T("TouchBarContext")}static{this.TitleBar=new T("TitleBar")}static{this.TitleBarContext=new T("TitleBarContext")}static{this.TitleBarTitleContext=new T("TitleBarTitleContext")}static{this.TunnelContext=new T("TunnelContext")}static{this.TunnelPrivacy=new T("TunnelPrivacy")}static{this.TunnelProtocol=new T("TunnelProtocol")}static{this.TunnelPortInline=new T("TunnelInline")}static{this.TunnelTitle=new T("TunnelTitle")}static{this.TunnelLocalAddressInline=new T("TunnelLocalAddressInline")}static{this.TunnelOriginInline=new T("TunnelOriginInline")}static{this.ViewItemContext=new T("ViewItemContext")}static{this.ViewContainerTitle=new T("ViewContainerTitle")}static{this.ViewContainerTitleContext=new T("ViewContainerTitleContext")}static{this.ViewTitle=new T("ViewTitle")}static{this.ViewTitleContext=new T("ViewTitleContext")}static{this.CommentEditorActions=new T("CommentEditorActions")}static{this.CommentThreadTitle=new T("CommentThreadTitle")}static{this.CommentThreadActions=new T("CommentThreadActions")}static{this.CommentThreadAdditionalActions=new T("CommentThreadAdditionalActions")}static{this.CommentThreadTitleContext=new T("CommentThreadTitleContext")}static{this.CommentThreadCommentContext=new T("CommentThreadCommentContext")}static{this.CommentTitle=new T("CommentTitle")}static{this.CommentActions=new T("CommentActions")}static{this.CommentsViewThreadActions=new T("CommentsViewThreadActions")}static{this.InteractiveToolbar=new T("InteractiveToolbar")}static{this.InteractiveCellTitle=new T("InteractiveCellTitle")}static{this.InteractiveCellDelete=new T("InteractiveCellDelete")}static{this.InteractiveCellExecute=new T("InteractiveCellExecute")}static{this.InteractiveInputExecute=new T("InteractiveInputExecute")}static{this.InteractiveInputConfig=new T("InteractiveInputConfig")}static{this.ReplInputExecute=new T("ReplInputExecute")}static{this.IssueReporter=new T("IssueReporter")}static{this.NotebookToolbar=new T("NotebookToolbar")}static{this.NotebookToolbarContext=new T("NotebookToolbarContext")}static{this.NotebookStickyScrollContext=new T("NotebookStickyScrollContext")}static{this.NotebookCellTitle=new T("NotebookCellTitle")}static{this.NotebookCellDelete=new T("NotebookCellDelete")}static{this.NotebookCellInsert=new T("NotebookCellInsert")}static{this.NotebookCellBetween=new T("NotebookCellBetween")}static{this.NotebookCellListTop=new T("NotebookCellTop")}static{this.NotebookCellExecute=new T("NotebookCellExecute")}static{this.NotebookCellExecuteGoTo=new T("NotebookCellExecuteGoTo")}static{this.NotebookCellExecutePrimary=new T("NotebookCellExecutePrimary")}static{this.NotebookDiffCellInputTitle=new T("NotebookDiffCellInputTitle")}static{this.NotebookDiffDocumentMetadata=new T("NotebookDiffDocumentMetadata")}static{this.NotebookDiffCellMetadataTitle=new T("NotebookDiffCellMetadataTitle")}static{this.NotebookDiffCellOutputsTitle=new T("NotebookDiffCellOutputsTitle")}static{this.NotebookOutputToolbar=new T("NotebookOutputToolbar")}static{this.NotebookOutlineFilter=new T("NotebookOutlineFilter")}static{this.NotebookOutlineActionMenu=new T("NotebookOutlineActionMenu")}static{this.NotebookEditorLayoutConfigure=new T("NotebookEditorLayoutConfigure")}static{this.NotebookKernelSource=new T("NotebookKernelSource")}static{this.BulkEditTitle=new T("BulkEditTitle")}static{this.BulkEditContext=new T("BulkEditContext")}static{this.TimelineItemContext=new T("TimelineItemContext")}static{this.TimelineTitle=new T("TimelineTitle")}static{this.TimelineTitleContext=new T("TimelineTitleContext")}static{this.TimelineFilterSubMenu=new T("TimelineFilterSubMenu")}static{this.AccountsContext=new T("AccountsContext")}static{this.SidebarTitle=new T("SidebarTitle")}static{this.PanelTitle=new T("PanelTitle")}static{this.AuxiliaryBarTitle=new T("AuxiliaryBarTitle")}static{this.AuxiliaryBarHeader=new T("AuxiliaryBarHeader")}static{this.TerminalInstanceContext=new T("TerminalInstanceContext")}static{this.TerminalEditorInstanceContext=new T("TerminalEditorInstanceContext")}static{this.TerminalNewDropdownContext=new T("TerminalNewDropdownContext")}static{this.TerminalTabContext=new T("TerminalTabContext")}static{this.TerminalTabEmptyAreaContext=new T("TerminalTabEmptyAreaContext")}static{this.TerminalStickyScrollContext=new T("TerminalStickyScrollContext")}static{this.WebviewContext=new T("WebviewContext")}static{this.InlineCompletionsActions=new T("InlineCompletionsActions")}static{this.InlineEditsActions=new T("InlineEditsActions")}static{this.NewFile=new T("NewFile")}static{this.MergeInput1Toolbar=new T("MergeToolbar1Toolbar")}static{this.MergeInput2Toolbar=new T("MergeToolbar2Toolbar")}static{this.MergeBaseToolbar=new T("MergeBaseToolbar")}static{this.MergeInputResultToolbar=new T("MergeToolbarResultToolbar")}static{this.InlineSuggestionToolbar=new T("InlineSuggestionToolbar")}static{this.InlineEditToolbar=new T("InlineEditToolbar")}static{this.ChatContext=new T("ChatContext")}static{this.ChatCodeBlock=new T("ChatCodeblock")}static{this.ChatCompareBlock=new T("ChatCompareBlock")}static{this.ChatMessageTitle=new T("ChatMessageTitle")}static{this.ChatMessageFooter=new T("ChatMessageFooter")}static{this.ChatExecute=new T("ChatExecute")}static{this.ChatExecuteSecondary=new T("ChatExecuteSecondary")}static{this.ChatInput=new T("ChatInput")}static{this.ChatInputSide=new T("ChatInputSide")}static{this.ChatModelPicker=new T("ChatModelPicker")}static{this.ChatModePicker=new T("ChatModePicker")}static{this.ChatEditingWidgetToolbar=new T("ChatEditingWidgetToolbar")}static{this.ChatEditingEditorContent=new T("ChatEditingEditorContent")}static{this.ChatEditingEditorHunk=new T("ChatEditingEditorHunk")}static{this.ChatEditingDeletedNotebookCell=new T("ChatEditingDeletedNotebookCell")}static{this.ChatInputAttachmentToolbar=new T("ChatInputAttachmentToolbar")}static{this.ChatEditingWidgetModifiedFilesToolbar=new T("ChatEditingWidgetModifiedFilesToolbar")}static{this.ChatInputResourceAttachmentContext=new T("ChatInputResourceAttachmentContext")}static{this.ChatInputSymbolAttachmentContext=new T("ChatInputSymbolAttachmentContext")}static{this.ChatInlineResourceAnchorContext=new T("ChatInlineResourceAnchorContext")}static{this.ChatInlineSymbolAnchorContext=new T("ChatInlineSymbolAnchorContext")}static{this.ChatEditingCodeBlockContext=new T("ChatEditingCodeBlockContext")}static{this.ChatTitleBarMenu=new T("ChatTitleBarMenu")}static{this.ChatAttachmentsContext=new T("ChatAttachmentsContext")}static{this.ChatToolOutputResourceToolbar=new T("ChatToolOutputResourceToolbar")}static{this.ChatExplorerMenu=new T("ChatExplorerMenu")}static{this.ChatTextEditorMenu=new T("ChatTextEditorMenu")}static{this.ChatTerminalMenu=new T("ChatTerminalMenu")}static{this.ChatToolOutputResourceContext=new T("ChatToolOutputResourceContext")}static{this.AccessibleView=new T("AccessibleView")}static{this.MultiDiffEditorFileToolbar=new T("MultiDiffEditorFileToolbar")}static{this.DiffEditorHunkToolbar=new T("DiffEditorHunkToolbar")}static{this.DiffEditorSelectionToolbar=new T("DiffEditorSelectionToolbar")}static for(e){return T._instances.get(e)??new T(e)}constructor(e){if(T._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);T._instances.set(e,this),this.id=e}}class Ca{static{this._all=new Map}static for(e){let t=this._all.get(e);return t||(t=new Ca(e),this._all.set(e,t)),t}static merge(e){const t=new Set;for(const n of e)n instanceof Ca&&t.add(n.id);return t}constructor(e){this.id=e,this.has=t=>t===e}}const Pa=new class{constructor(){this._commands=new Map,this._menuItems=new Map,this._onDidChangeMenu=new k7({merge:Ca.merge}),this.onDidChangeMenu=this._onDidChangeMenu.event}addCommand(i){return this._commands.set(i.id,i),this._onDidChangeMenu.fire(Ca.for(T.CommandPalette)),Fd(fe(()=>{this._commands.delete(i.id)&&this._onDidChangeMenu.fire(Ca.for(T.CommandPalette))}))}getCommand(i){return this._commands.get(i)}getCommands(){const i=new Map;return this._commands.forEach((e,t)=>i.set(t,e)),i}appendMenuItem(i,e){let t=this._menuItems.get(i);t||(t=new sn,this._menuItems.set(i,t));const n=t.push(e);return this._onDidChangeMenu.fire(Ca.for(i)),Fd(fe(()=>{n(),this._onDidChangeMenu.fire(Ca.for(i))}))}appendMenuItems(i){const e=new X;for(const{id:t,item:n}of i)e.add(this.appendMenuItem(t,n));return e}getMenuItems(i){let e;return this._menuItems.has(i)?e=[...this._menuItems.get(i)]:e=[],i===T.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(i){const e=new Set;for(const t of i)wd(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||i.push({command:t})})}};class o4 extends RS{constructor(e,t,n){super(`submenuitem.${e.submenu.id}`,typeof e.title=="string"?e.title:e.title.value,n,"submenu"),this.item=e,this.hideActions=t}}let Qh=Cp=class{static label(e,t){return t?.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}constructor(e,t,n,s,r,o,a){this.hideActions=s,this.menuKeybinding=r,this._commandService=a,this.id=e.id,this.label=Cp.label(e,n),this.tooltip=(typeof e.tooltip=="string"?e.tooltip:e.tooltip?.value)??"",this.enabled=!e.precondition||o.contextMatchesRules(e.precondition),this.checked=void 0;let l;if(e.toggled){const c=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=o.contextMatchesRules(c.condition),this.checked&&c.tooltip&&(this.tooltip=typeof c.tooltip=="string"?c.tooltip:c.tooltip.value),this.checked&&ze.isThemeIcon(c.icon)&&(l=c.icon),this.checked&&c.title&&(this.label=typeof c.title=="string"?c.title:c.title.value)}l||(l=ze.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new Cp(t,void 0,n,s,void 0,o,a):void 0,this._options=n,this.class=l&&ze.asClassName(l)}run(...e){let t=[];return this._options?.arg&&(t=[...t,this._options.arg]),this._options?.shouldForwardArgs&&(t=[...t,...e]),this._commandService.executeCommand(this.id,...t)}};Qh=Cp=G([L(5,Mt),L(6,ea)],Qh);class pH{constructor(e){this.desc=e}}function Uie(i){const e=[],t=new i,{f1:n,menu:s,keybinding:r,...o}=t.desc;if(Ss.getCommand(o.id))throw new Error(`Cannot register two commands with the same id: ${o.id}`);if(e.push(Ss.registerCommand({id:o.id,handler:(a,...l)=>t.run(a,...l),metadata:o.metadata??{description:t.desc.title}})),Array.isArray(s))for(const a of s)e.push(Pa.appendMenuItem(a.id,{command:{...o,precondition:a.precondition===null?void 0:o.precondition},...a}));else s&&e.push(Pa.appendMenuItem(s.id,{command:{...o,precondition:s.precondition===null?void 0:o.precondition},...s}));if(n&&(e.push(Pa.appendMenuItem(T.CommandPalette,{command:o,when:o.precondition})),e.push(Pa.addCommand(o))),Array.isArray(r))for(const a of r)e.push(dc.registerKeybindingRule({...a,id:o.id,when:o.precondition?kt.and(o.precondition,a.when):a.when}));else r&&e.push(dc.registerKeybindingRule({...r,id:o.id,when:o.precondition?kt.and(o.precondition,r.when):r.when}));return{dispose(){ai(e)}}}const tb=be("menuService"),mH=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));mt(mH);function Hie(i,e){const t={primary:[],secondary:[]};return a4(i,t,e),t}function bH(i,e){const t=[];return a4(i,t,e),t}function a4(i,e,t){const n=Ra.getInstance(),s=n.keyStatus.altKey||(hi||rs)&&n.keyStatus.shiftKey;c4(i,e,s,t?r=>r===t:r=>r==="navigation")}function Vie(i,e,t,n){const s={primary:[],secondary:[]};return l4(i,s,e,t,n),s}function zie(i,e,t,n){const s=[];return l4(i,s,e,t,n),s}function l4(i,e,t,n,s){c4(i,e,!1,typeof t=="string"?o=>o===t:t,n,s)}function c4(i,e,t,n=o=>o==="navigation",s=()=>!1,r=!1){let o,a;Array.isArray(e)?(o=e,a=e):(o=e.primary,a=e.secondary);const l=new Set;for(const[c,h]of i){let u;n(c)?(u=o,u.length>0&&r&&u.push(new Ui)):(u=a,u.length>0&&u.push(new Ui));for(let f of h){t&&(f=f instanceof Qh&&f.alt?f.alt:f);const g=u.push(f);f instanceof RS&&l.add({group:c,action:f,index:g-1})}}for(const{group:c,action:h,index:u}of l){const f=n(c)?o:a,g=h.actions;s(h,c,f.length)&&f.splice(u,1,...g)}}let Zh=class extends OS{constructor(e,t,n,s,r,o,a,l){super(void 0,e,{icon:!!(e.class||e.item.icon),label:!e.class&&!e.item.icon,draggable:t?.draggable,keybinding:t?.keybinding,hoverDelegate:t?.hoverDelegate,keybindingNotRenderedWithLabel:t?.keybindingNotRenderedWithLabel}),this._options=t,this._keybindingService=n,this._notificationService=s,this._contextKeyService=r,this._themeService=o,this._contextMenuService=a,this._accessibilityService=l,this._wantsAltCommand=!1,this._itemClassDispose=this._register(new vs),this._altKey=Ra.getInstance()}get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(e){e.preventDefault(),e.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(t){this._notificationService.error(t)}}render(e){if(super.render(e),e.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let t=!1;const n=()=>{const s=!!this._menuItemAction.alt?.enabled&&(!this._accessibilityService.isMotionReduced()||t)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&t);s!==this._wantsAltCommand&&(this._wantsAltCommand=s,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(n)),this._register(V(e,"mouseleave",s=>{t=!1,n()})),this._register(V(e,"mouseenter",s=>{t=!0,n()})),n()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){const e=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),t=e&&e.getLabel(),n=this._commandAction.tooltip||this._commandAction.label;let s=t?d(1704,"{0} ({1})",n,t):n;if(!this._wantsAltCommand&&this._menuItemAction.alt?.enabled){const r=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,o=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),a=o&&o.getLabel(),l=a?d(1704,"{0} ({1})",r,a):r;s=d(1705,`{0}
[{1}] {2}`,s,LS.modifierLabels[An].altKey,l)}return s}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(e){this._itemClassDispose.value=void 0;const{element:t,label:n}=this;if(!t||!n)return;const s=this._commandAction.checked&&YU(e.toggled)&&e.toggled.icon?e.toggled.icon:e.icon;if(s)if(ze.isThemeIcon(s)){const r=ze.asClassNameArray(s);n.classList.add(...r),this._itemClassDispose.value=fe(()=>{n.classList.remove(...r)})}else n.style.backgroundImage=H1(this._themeService.getColorTheme().type)?pr(s.dark):pr(s.light),n.classList.add("icon"),this._itemClassDispose.value=Kr(fe(()=>{n.style.backgroundImage="",n.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};Zh=G([L(2,$s),L(3,Ec),L(4,Mt),L(5,no),L(6,Hf),L(7,qf)],Zh);class h4 extends Zh{render(e){this.options.label=!0,this.options.icon=!1,super.render(e),e.classList.add("text-only"),e.classList.toggle("use-comma",this._options?.useComma??!1)}updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=h4._symbolPrintEnter(e);this._options?.conversational?this.label.textContent=d(1706,"{1} to {0}",this._action.label,t):this.label.textContent=d(1707,"{0} ({1})",this._action.label,t)}}static _symbolPrintEnter(e){return e.getLabel()?.replace(/\benter\b/gi,"⏎").replace(/\bEscape\b/gi,"Esc")}}let _w=class extends QN{constructor(e,t,n,s,r){const o={...t,menuAsChild:t?.menuAsChild??!1,classNames:t?.classNames??(ze.isThemeIcon(e.item.icon)?ze.asClassName(e.item.icon):void 0),keybindingProvider:t?.keybindingProvider??(a=>n.lookupKeybinding(a.id))};super(e,{getActions:()=>e.actions},s,o),this._keybindingService=n,this._contextMenuService=s,this._themeService=r}render(e){super.render(e),Wp(this.element),e.classList.add("menu-entry");const t=this._action,{icon:n}=t.item;if(n&&!ze.isThemeIcon(n)){this.element.classList.add("icon");const s=()=>{this.element&&(this.element.style.backgroundImage=H1(this._themeService.getColorTheme().type)?pr(n.dark):pr(n.light))};s(),this._register(this._themeService.onDidColorThemeChange(()=>{s()}))}}};_w=G([L(2,$s),L(3,Hf),L(4,no)],_w);let ww=class extends nr{get onDidChangeDropdownVisibility(){return this._dropdown.onDidChangeVisibility}constructor(e,t,n,s,r,o,a,l){super(null,e),this._keybindingService=n,this._notificationService=s,this._contextMenuService=r,this._menuService=o,this._instaService=a,this._storageService=l,this._defaultActionDisposables=this._register(new X),this._container=null,this._options=t,this._storageKey=`${e.item.submenu.id}_lastActionId`;let c;const h=t?.persistLastActionId?l.get(this._storageKey,Oe.WORKSPACE):void 0;h&&(c=e.actions.find(f=>h===f.id)),c||(c=e.actions[0]),this._defaultAction=this._defaultActionDisposables.add(this._instaService.createInstance(Zh,c,{keybinding:this._getDefaultActionKeybindingLabel(c)}));const u={keybindingProvider:f=>this._keybindingService.lookupKeybinding(f.id),...t,menuAsChild:t?.menuAsChild??!0,classNames:t?.classNames??["codicon","codicon-chevron-down"],actionRunner:t?.actionRunner??this._register(new Xh)};this._dropdown=this._register(new QN(e,e.actions,this._contextMenuService,u)),this._register(this._dropdown.actionRunner.onDidRun(f=>{f.action instanceof Qh&&this.update(f.action)}))}update(e){this._options?.persistLastActionId&&this._storageService.store(this._storageKey,e.id,Oe.WORKSPACE,fc.MACHINE),this._defaultActionDisposables.clear(),this._defaultAction=this._defaultActionDisposables.add(this._instaService.createInstance(Zh,e,{keybinding:this._getDefaultActionKeybindingLabel(e)})),this._defaultAction.actionRunner=this._defaultActionDisposables.add(new class extends Xh{async runAction(t,n){await t.run(void 0)}}),this._container&&this._defaultAction.render(tS(this._container,_e(".action-container")))}_getDefaultActionKeybindingLabel(e){let t;if(this._options?.renderKeybindingWithDefaultActionLabel){const n=this._keybindingService.lookupKeybinding(e.id);n&&(t=`(${n.getLabel()})`)}return t}setActionContext(e){super.setActionContext(e),this._defaultAction.setActionContext(e),this._dropdown.setActionContext(e)}render(e){this._container=e,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");const t=_e(".action-container");this._defaultAction.render(ie(this._container,t)),this._register(V(t,j.KEY_DOWN,s=>{const r=new at(s);r.equals(w.RightArrow)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),r.stopPropagation())}));const n=_e(".dropdown-action-container");this._dropdown.render(ie(this._container,n)),this._register(V(n,j.KEY_DOWN,s=>{const r=new at(s);r.equals(w.LeftArrow)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),this._defaultAction.element?.focus(),r.stopPropagation())}))}focus(e){e?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(e){e?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}};ww=G([L(2,$s),L(3,Ec),L(4,Hf),L(5,tb),L(6,xt),L(7,rl)],ww);let vw=class extends KU{constructor(e,t,n){super(null,e,e.actions.map(s=>({text:s.id===Ui.ID?"─────────":s.label,isDisabled:!s.enabled})),0,t,cH,{ariaLabel:e.tooltip,optionsAsChildren:!0,useCustomDrawn:!i4(n)}),this.select(Math.max(0,e.actions.findIndex(s=>s.checked)))}render(e){super.render(e),e.style.borderColor=K(lS)}runAction(e,t){const n=this.action.actions[t];n&&this.actionRunner.run(n)}};vw=G([L(1,Uf),L(2,Vt)],vw);function jie(i,e,t){return e instanceof Qh?i.createInstance(Zh,e,t):e instanceof o4?e.item.isSelection?i.createInstance(vw,e):e.item.rememberDefaultAction?i.createInstance(ww,e,{...t,persistLastActionId:!0}):i.createInstance(_w,e,t):void 0}mt(YN);var xh;(function(i){i[i.HORIZONTAL=0]="HORIZONTAL",i[i.VERTICAL=1]="VERTICAL"})(xh||(xh={}));class Ql extends ${constructor(e,t={}){super(),this._actionRunnerDisposables=this._register(new X),this.viewItemDisposables=this._register(new Cf),this.triggerKeyDown=!1,this.focusable=!0,this._onDidBlur=this._register(new A),this.onDidBlur=this._onDidBlur.event,this._onDidCancel=this._register(new A({onWillAddFirstListener:()=>this.cancelHasListener=!0})),this.onDidCancel=this._onDidCancel.event,this.cancelHasListener=!1,this._onDidRun=this._register(new A),this.onDidRun=this._onDidRun.event,this._onWillRun=this._register(new A),this.onWillRun=this._onWillRun.event,this.options=t,this._context=t.context??null,this._orientation=this.options.orientation??xh.HORIZONTAL,this._triggerKeys={keyDown:this.options.triggerKeys?.keyDown??!1,keys:this.options.triggerKeys?.keys??[w.Enter,w.Space]},this._hoverDelegate=t.hoverDelegate??this._register(J1()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new Xh,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(r=>this._onDidRun.fire(r))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(r=>this._onWillRun.fire(r))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar";let n,s;switch(this._orientation){case xh.HORIZONTAL:n=[w.LeftArrow],s=[w.RightArrow];break;case xh.VERTICAL:n=[w.UpArrow],s=[w.DownArrow],this.domNode.className+=" vertical";break}this._register(V(this.domNode,j.KEY_DOWN,r=>{const o=new at(r);let a=!0;const l=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;n&&(o.equals(n[0])||o.equals(n[1]))?a=this.focusPrevious():s&&(o.equals(s[0])||o.equals(s[1]))?a=this.focusNext():o.equals(w.Escape)&&this.cancelHasListener?this._onDidCancel.fire():o.equals(w.Home)?a=this.focusFirst():o.equals(w.End)?a=this.focusLast():o.equals(w.Tab)&&l instanceof nr&&l.trapsArrowNavigation?a=this.focusNext(void 0,!0):this.isTriggerKeyEvent(o)?this._triggerKeys.keyDown?this.doTrigger(o):this.triggerKeyDown=!0:a=!1,a&&(o.preventDefault(),o.stopPropagation())})),this._register(V(this.domNode,j.KEY_UP,r=>{const o=new at(r);this.isTriggerKeyEvent(o)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(o)),o.preventDefault(),o.stopPropagation()):(o.equals(w.Tab)||o.equals(Ne.Shift|w.Tab)||o.equals(w.UpArrow)||o.equals(w.DownArrow)||o.equals(w.LeftArrow)||o.equals(w.RightArrow))&&this.updateFocusedItem()})),this.focusTracker=this._register(eS(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(on()===this.domNode||!Kt(on(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setAriaLabel(e){e?this.actionsList.setAttribute("aria-label",e):this.actionsList.removeAttribute("aria-label")}setFocusable(e){if(this.focusable=e,this.focusable){const t=this.viewItems.find(n=>n instanceof nr&&n.isEnabled());t instanceof nr&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof nr&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){const t=this.actionsList.children[e];if(Kt(on(),t)){this.focusedItem=e,this.viewItems[this.focusedItem]?.showHover?.();break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}hasAction(e){return this.viewItems.findIndex(t=>t.action.id===e.id)!==-1}getAction(e){if(typeof e=="number")return this.viewItems[e]?.action;if(Ut(e)){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let t=0;t<this.actionsList.childNodes.length;t++)if(this.actionsList.childNodes[t]===e)return this.viewItems[t].action}}push(e,t={}){const n=Array.isArray(e)?e:[e];let s=el(t.index)?t.index:null;n.forEach(r=>{const o=document.createElement("li");o.className="action-item",o.setAttribute("role","presentation");let a;const l={hoverDelegate:this._hoverDelegate,...t,isTabList:this.options.ariaRole==="tablist"};this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(r,l)),a||(a=new OS(this.context,r,l)),this.options.allowContextMenu||this.viewItemDisposables.set(a,V(o,j.CONTEXT_MENU,c=>{Re.stop(c,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(o),this.focusable&&a instanceof nr&&this.viewItems.length===0&&a.setFocusable(!0),s===null||s<0||s>=this.actionsList.children.length?(this.actionsList.appendChild(o),this.viewItems.push(a)):(this.actionsList.insertBefore(o,this.actionsList.children[s]),this.viewItems.splice(s,0,a),s++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}getWidth(e){if(e>=0&&e<this.actionsList.children.length){const t=this.actionsList.children.item(e);if(t)return t.clientWidth}return 0}getHeight(e){if(e>=0&&e<this.actionsList.children.length){const t=this.actionsList.children.item(e);if(t)return t.clientHeight}return 0}pull(e){e>=0&&e<this.viewItems.length&&(this.actionsList.childNodes[e].remove(),this.viewItemDisposables.deleteAndDispose(this.viewItems[e]),ai(this.viewItems.splice(e,1)),this.refreshRole())}clear(){this.isEmpty()||(this.viewItems=ai(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),gr(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){const s=this.viewItems.findIndex(r=>r.isEnabled());this.focusedItem=s===-1?void 0:s,this.updateFocus(void 0,void 0,!0)}else n!==void 0&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e,t){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;const n=this.focusedItem;let s;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=n,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,s=this.viewItems[this.focusedItem]}while(this.focusedItem!==n&&(this.options.focusOnlyEnabledItems&&!s.isEnabled()||s.action.id===Ui.ID));return this.updateFocus(void 0,void 0,t),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;const t=this.focusedItem;let n;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===Ui.ID));return this.updateFocus(!0),!0}updateFocus(e,t,n=!1){typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&this.viewItems[this.previouslyFocusedItem]?.blur();const s=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(s){let r=!0;Wh(s.focus)||(r=!1),this.options.focusOnlyEnabledItems&&Wh(s.isEnabled)&&!s.isEnabled()&&(r=!1),s.action.id===Ui.ID&&(r=!1),r?(n||this.previouslyFocusedItem!==this.focusedItem)&&(s.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),r&&s.showHover?.()}}doTrigger(e){if(typeof this.focusedItem>"u")return;const t=this.viewItems[this.focusedItem];if(t instanceof nr){const n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=ai(this.viewItems),this.getContainer().remove(),super.dispose()}}function Yie(i){if(!i.length)return i;let e=-1;for(let n=0;n<i.length;n++)if(i[n].id!==Ui.ID){e=n;break}if(e===-1)return[];i=i.slice(e);for(let n=i.length-1;n>=0&&i[n].id===Ui.ID;n--)i.splice(n,1);let t=!1;for(let n=i.length-1;n>=0;n--){const s=i[n].id===Ui.ID;s&&!t?i.splice(n,1):s?s&&(t=!1):t=!0}return i}const yw=/\(&([^\s&])\)|(^|[^&])&([^\s&])/,g_=/(&amp;)?(&amp;)([^\s&])/g;var Pm;(function(i){i[i.Right=0]="Right",i[i.Left=1]="Left"})(Pm||(Pm={}));var Sw;(function(i){i[i.Above=0]="Above",i[i.Below=1]="Below"})(Sw||(Sw={}));class Lh extends Ql{constructor(e,t,n,s){e.classList.add("monaco-menu-container"),e.setAttribute("role","presentation");const r=document.createElement("div");r.classList.add("monaco-menu"),r.setAttribute("role","presentation"),super(r,{orientation:xh.VERTICAL,actionViewItemProvider:c=>this.doGetActionViewItem(c,n,o),context:n.context,actionRunner:n.actionRunner,ariaLabel:n.ariaLabel,ariaRole:"menu",focusOnlyEnabledItems:!0,triggerKeys:{keys:[w.Enter,...Me||rs?[w.Space]:[]],keyDown:!0}}),this.menuStyles=s,this.menuElement=r,this.actionsList.tabIndex=0,this.initializeOrUpdateStyleSheet(e,s),this._register(Bt.addTarget(r)),this._register(V(r,j.KEY_DOWN,c=>{new at(c).equals(w.Tab)&&c.preventDefault()})),n.enableMnemonics&&this._register(V(r,j.KEY_DOWN,c=>{const h=c.key.toLocaleLowerCase();if(this.mnemonics.has(h)){Re.stop(c,!0);const u=this.mnemonics.get(h);if(u.length===1&&(u[0]instanceof p_&&u[0].container&&this.focusItemByElement(u[0].container),u[0].onClick(c)),u.length>1){const f=u.shift();f&&f.container&&(this.focusItemByElement(f.container),u.push(f)),this.mnemonics.set(h,u)}}})),rs&&this._register(V(r,j.KEY_DOWN,c=>{const h=new at(c);h.equals(w.Home)||h.equals(w.PageUp)?(this.focusedItem=this.viewItems.length-1,this.focusNext(),Re.stop(c,!0)):(h.equals(w.End)||h.equals(w.PageDown))&&(this.focusedItem=0,this.focusPrevious(),Re.stop(c,!0))})),this._register(V(this.domNode,j.MOUSE_OUT,c=>{const h=c.relatedTarget;Kt(h,this.domNode)||(this.focusedItem=void 0,this.updateFocus(),c.stopPropagation())})),this._register(V(this.actionsList,j.MOUSE_OVER,c=>{let h=c.target;if(!(!h||!Kt(h,this.actionsList)||h===this.actionsList)){for(;h.parentElement!==this.actionsList&&h.parentElement!==null;)h=h.parentElement;if(h.classList.contains("action-item")){const u=this.focusedItem;this.setFocusedItem(h),u!==this.focusedItem&&this.updateFocus()}}})),this._register(Bt.addTarget(this.actionsList)),this._register(V(this.actionsList,qt.Tap,c=>{let h=c.initialTarget;if(!(!h||!Kt(h,this.actionsList)||h===this.actionsList)){for(;h.parentElement!==this.actionsList&&h.parentElement!==null;)h=h.parentElement;if(h.classList.contains("action-item")){const u=this.focusedItem;this.setFocusedItem(h),u!==this.focusedItem&&this.updateFocus()}}}));const o={parent:this};this.mnemonics=new Map,this.scrollableElement=this._register(new nN(r,{alwaysConsumeMouseWheel:!0,horizontal:Nt.Hidden,vertical:Nt.Visible,verticalScrollbarSize:7,handleMouseWheel:!0,useShadows:!0}));const a=this.scrollableElement.getDomNode();a.style.position="",this.styleScrollElement(a,s),this._register(V(r,qt.Change,c=>{Re.stop(c,!0);const h=this.scrollableElement.getScrollPosition().scrollTop;this.scrollableElement.setScrollPosition({scrollTop:h-c.translationY})})),this._register(V(a,j.MOUSE_UP,c=>{c.preventDefault()}));const l=ke(e);r.style.maxHeight=`${Math.max(10,l.innerHeight-e.getBoundingClientRect().top-35)}px`,t=t.filter((c,h)=>n.submenuIds?.has(c.id)?(console.warn(`Found submenu cycle: ${c.id}`),!1):!(c instanceof Ui&&(h===t.length-1||h===0||t[h-1]instanceof Ui))),this.push(t,{icon:!0,label:!0,isMenu:!0}),e.appendChild(this.scrollableElement.getDomNode()),this.scrollableElement.scanDomNode(),this.viewItems.filter(c=>!(c instanceof _x)).forEach((c,h,u)=>{c.updatePositionInSet(h+1,u.length)})}initializeOrUpdateStyleSheet(e,t){this.styleSheet||(am(e)?this.styleSheet=On(e):(Lh.globalStyleSheet||(Lh.globalStyleSheet=On()),this.styleSheet=Lh.globalStyleSheet)),this.styleSheet.textContent=wH(t,am(e))}styleScrollElement(e,t){const n=t.foregroundColor??"",s=t.backgroundColor??"",r=t.borderColor?`1px solid ${t.borderColor}`:"",o="5px",a=t.shadowColor?`0 2px 8px ${t.shadowColor}`:"";e.style.outline=r,e.style.borderRadius=o,e.style.color=n,e.style.backgroundColor=s,e.style.boxShadow=a}getContainer(){return this.scrollableElement.getDomNode()}get onScroll(){return this.scrollableElement.onScroll}get scrollOffset(){return this.menuElement.scrollTop}trigger(e){if(e<=this.viewItems.length&&e>=0){const t=this.viewItems[e];if(t instanceof p_)super.focus(e),t.open(!0);else if(t instanceof kw)super.run(t._action,t._context);else return}}focusItemByElement(e){const t=this.focusedItem;this.setFocusedItem(e),t!==this.focusedItem&&this.updateFocus()}setFocusedItem(e){for(let t=0;t<this.actionsList.children.length;t++){const n=this.actionsList.children[t];if(e===n){this.focusedItem=t;break}}}updateFocus(e){super.updateFocus(e,!0,!0),typeof this.focusedItem<"u"&&this.scrollableElement.setScrollPosition({scrollTop:Math.round(this.menuElement.scrollTop)})}doGetActionViewItem(e,t,n){if(e instanceof Ui)return new _x(t.context,e,{icon:!0},this.menuStyles);if(e instanceof RS){const s=new p_(e,e.actions,n,{...t,submenuIds:new Set([...t.submenuIds||[],e.id])},this.menuStyles);if(t.enableMnemonics){const r=s.getMnemonic();if(r&&s.isEnabled()){let o=[];this.mnemonics.has(r)&&(o=this.mnemonics.get(r)),o.push(s),this.mnemonics.set(r,o)}}return s}else{const s={enableMnemonics:t.enableMnemonics,useEventAsContext:t.useEventAsContext};if(t.getKeyBinding){const o=t.getKeyBinding(e);if(o){const a=o.getLabel();a&&(s.keybinding=a)}}const r=new kw(t.context,e,s,this.menuStyles);if(t.enableMnemonics){const o=r.getMnemonic();if(o&&r.isEnabled()){let a=[];this.mnemonics.has(o)&&(a=this.mnemonics.get(o)),a.push(r),this.mnemonics.set(o,a)}}return r}}}class kw extends nr{constructor(e,t,n,s){if(n.isMenu=!0,super(t,t,n),this.menuStyle=s,this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass="",this.options.label&&n.enableMnemonics){const r=this.action.label;if(r){const o=yw.exec(r);o&&(this.mnemonic=(o[1]?o[1]:o[3]).toLocaleLowerCase())}}this.runOnceToEnableMouseUp=new Bs(()=>{this.element&&(this._register(V(this.element,j.MOUSE_UP,r=>{if(Re.stop(r,!0),Gd){if(new Ns(ke(this.element),r).rightButton)return;this.onClick(r)}else setTimeout(()=>{this.onClick(r)},0)})),this._register(V(this.element,j.CONTEXT_MENU,r=>{Re.stop(r,!0)})))},100),this._register(this.runOnceToEnableMouseUp)}render(e){super.render(e),this.element&&(this.container=e,this.item=ie(this.element,_e("a.action-menu-item")),this._action.id===Ui.ID?this.item.setAttribute("role","presentation"):(this.item.setAttribute("role","menuitem"),this.mnemonic&&this.item.setAttribute("aria-keyshortcuts",`${this.mnemonic}`)),this.check=ie(this.item,_e("span.menu-item-check"+ze.asCSSSelector(re.menuSelection))),this.check.setAttribute("role","none"),this.label=ie(this.item,_e("span.action-label")),this.options.label&&this.options.keybinding&&(ie(this.item,_e("span.keybinding")).textContent=this.options.keybinding),this.runOnceToEnableMouseUp.schedule(),this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked(),this.applyStyle())}blur(){super.blur(),this.applyStyle()}focus(){super.focus(),this.item?.focus(),this.applyStyle()}updatePositionInSet(e,t){this.item&&(this.item.setAttribute("aria-posinset",`${e}`),this.item.setAttribute("aria-setsize",`${t}`))}updateLabel(){if(this.label&&this.options.label){gr(this.label);let e=qI(this.action.label);if(e){const t=_H(e);this.options.enableMnemonics||(e=t),this.label.setAttribute("aria-label",t.replace(/&&/g,"&"));const n=yw.exec(e);if(n){e=Gr(e),g_.lastIndex=0;let s=g_.exec(e);for(;s&&s[1];)s=g_.exec(e);const r=o=>o.replace(/&amp;&amp;/g,"&amp;");s?this.label.append(xf(r(e.substr(0,s.index))," "),_e("u",{"aria-hidden":"true"},s[3]),wy(r(e.substr(s.index+s[0].length))," ")):this.label.innerText=r(e).trim(),this.item?.setAttribute("aria-keyshortcuts",(n[1]?n[1]:n[3]).toLocaleLowerCase())}else this.label.innerText=e.replace(/&&/g,"&").trim()}}}updateTooltip(){}updateClass(){this.cssClass&&this.item&&this.item.classList.remove(...this.cssClass.split(" ")),this.options.icon&&this.label?(this.cssClass=this.action.class||"",this.label.classList.add("icon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" ")),this.updateEnabled()):this.label&&this.label.classList.remove("icon")}updateEnabled(){this.action.enabled?(this.element&&(this.element.classList.remove("disabled"),this.element.removeAttribute("aria-disabled")),this.item&&(this.item.classList.remove("disabled"),this.item.removeAttribute("aria-disabled"),this.item.tabIndex=0)):(this.element&&(this.element.classList.add("disabled"),this.element.setAttribute("aria-disabled","true")),this.item&&(this.item.classList.add("disabled"),this.item.setAttribute("aria-disabled","true")))}updateChecked(){if(!this.item)return;const e=this.action.checked;this.item.classList.toggle("checked",!!e),e!==void 0?(this.item.setAttribute("role","menuitemcheckbox"),this.item.setAttribute("aria-checked",e?"true":"false")):(this.item.setAttribute("role","menuitem"),this.item.setAttribute("aria-checked",""))}getMnemonic(){return this.mnemonic}applyStyle(){const e=this.element&&this.element.classList.contains("focused"),t=e&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor,n=e&&this.menuStyle.selectionBackgroundColor?this.menuStyle.selectionBackgroundColor:void 0,s=e&&this.menuStyle.selectionBorderColor?`1px solid ${this.menuStyle.selectionBorderColor}`:"",r=e&&this.menuStyle.selectionBorderColor?"-1px":"";this.item&&(this.item.style.color=t??"",this.item.style.backgroundColor=n??"",this.item.style.outline=s,this.item.style.outlineOffset=r),this.check&&(this.check.style.color=t??"")}}class p_ extends kw{constructor(e,t,n,s,r){super(e,e,s,r),this.submenuActions=t,this.parentData=n,this.submenuOptions=s,this.mysubmenu=null,this.submenuDisposables=this._register(new X),this.mouseOver=!1,this.expandDirection=s&&s.expandDirection!==void 0?s.expandDirection:{horizontal:Pm.Right,vertical:Sw.Below},this.showScheduler=new Bs(()=>{this.mouseOver&&(this.cleanupExistingSubmenu(!1),this.createSubmenu(!1))},250),this.hideScheduler=new Bs(()=>{this.element&&!Kt(on(),this.element)&&this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))},750)}render(e){super.render(e),this.element&&(this.item&&(this.item.classList.add("monaco-submenu-item"),this.item.tabIndex=0,this.item.setAttribute("aria-haspopup","true"),this.updateAriaExpanded("false"),this.submenuIndicator=ie(this.item,_e("span.submenu-indicator"+ze.asCSSSelector(re.menuSubmenu))),this.submenuIndicator.setAttribute("aria-hidden","true")),this._register(V(this.element,j.KEY_UP,t=>{const n=new at(t);(n.equals(w.RightArrow)||n.equals(w.Enter))&&(Re.stop(t,!0),this.createSubmenu(!0))})),this._register(V(this.element,j.KEY_DOWN,t=>{const n=new at(t);on()===this.item&&(n.equals(w.RightArrow)||n.equals(w.Enter))&&Re.stop(t,!0)})),this._register(V(this.element,j.MOUSE_OVER,t=>{this.mouseOver||(this.mouseOver=!0,this.showScheduler.schedule())})),this._register(V(this.element,j.MOUSE_LEAVE,t=>{this.mouseOver=!1})),this._register(V(this.element,j.FOCUS_OUT,t=>{this.element&&!Kt(on(),this.element)&&this.hideScheduler.schedule()})),this._register(this.parentData.parent.onScroll(()=>{this.parentData.submenu===this.mysubmenu&&(this.parentData.parent.focus(!1),this.cleanupExistingSubmenu(!0))})))}updateEnabled(){}open(e){this.cleanupExistingSubmenu(!1),this.createSubmenu(e)}onClick(e){Re.stop(e,!0),this.cleanupExistingSubmenu(!1),this.createSubmenu(!0)}cleanupExistingSubmenu(e){if(this.parentData.submenu&&(e||this.parentData.submenu!==this.mysubmenu)){try{this.parentData.submenu.dispose()}catch{}this.parentData.submenu=void 0,this.updateAriaExpanded("false"),this.submenuContainer&&(this.submenuDisposables.clear(),this.submenuContainer=void 0)}}calculateSubmenuMenuLayout(e,t,n,s){const r={top:0,left:0};return r.left=hh(e.width,t.width,{position:s.horizontal===Pm.Right?qn.Before:qn.After,offset:n.left,size:n.width}),r.left>=n.left&&r.left<n.left+n.width&&(n.left+10+t.width<=e.width&&(r.left=n.left+10),n.top+=10,n.height=0),r.top=hh(e.height,t.height,{position:qn.Before,offset:n.top,size:0}),r.top+t.height===n.top&&r.top+n.height+t.height<=e.height&&(r.top+=n.height),r}createSubmenu(e=!0){if(this.element)if(this.parentData.submenu)this.parentData.submenu.focus(!1);else{this.updateAriaExpanded("true"),this.submenuContainer=ie(this.element,_e("div.monaco-submenu")),this.submenuContainer.classList.add("menubar-menu-items-holder","context-view");const t=ke(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode),n=parseFloat(t.paddingTop||"0")||0;this.submenuContainer.style.position="fixed",this.submenuContainer.style.top="0",this.submenuContainer.style.left="0",this.parentData.submenu=new Lh(this.submenuContainer,this.submenuActions.length?this.submenuActions:[new MS],this.submenuOptions,this.menuStyle);const s=this.element.getBoundingClientRect(),r={top:s.top-n,left:s.left,height:s.height+2*n,width:s.width},o=this.submenuContainer.getBoundingClientRect(),a=ke(this.element),{top:l,left:c}=this.calculateSubmenuMenuLayout(new As(a.innerWidth,a.innerHeight),As.lift(o),r,this.expandDirection);this.submenuContainer.style.left=`${c-o.left}px`,this.submenuContainer.style.top=`${l-o.top}px`,this.submenuDisposables.add(V(this.submenuContainer,j.KEY_UP,h=>{new at(h).equals(w.LeftArrow)&&(Re.stop(h,!0),this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0))})),this.submenuDisposables.add(V(this.submenuContainer,j.KEY_DOWN,h=>{new at(h).equals(w.LeftArrow)&&Re.stop(h,!0)})),this.submenuDisposables.add(this.parentData.submenu.onDidCancel(()=>{this.parentData.parent.focus(),this.cleanupExistingSubmenu(!0)})),this.parentData.submenu.focus(e),this.mysubmenu=this.parentData.submenu}}updateAriaExpanded(e){this.item&&this.item?.setAttribute("aria-expanded",e)}applyStyle(){super.applyStyle();const t=this.element&&this.element.classList.contains("focused")&&this.menuStyle.selectionForegroundColor?this.menuStyle.selectionForegroundColor:this.menuStyle.foregroundColor;this.submenuIndicator&&(this.submenuIndicator.style.color=t??"")}dispose(){super.dispose(),this.hideScheduler.dispose(),this.mysubmenu&&(this.mysubmenu.dispose(),this.mysubmenu=null),this.submenuContainer&&(this.submenuContainer=void 0)}}class _x extends OS{constructor(e,t,n,s){super(e,t,n),this.menuStyles=s}render(e){super.render(e),this.label&&(this.label.style.borderBottomColor=this.menuStyles.separatorColor?`${this.menuStyles.separatorColor}`:"")}}function _H(i){const e=yw,t=e.exec(i);if(!t)return i;const n=!t[1];return i.replace(e,n?"$2$3":"").trim()}function wx(i){const e=$I()[i.id];return`.codicon-${i.id}:before { content: '\\${e.toString(16)}'; }`}function wH(i,e){let t=`
.monaco-menu {
	font-size: 13px;
	border-radius: 5px;
	min-width: 160px;
}

${wx(re.menuSelection)}
${wx(re.menuSubmenu)}

.monaco-menu .monaco-action-bar {
	text-align: right;
	overflow: hidden;
	white-space: nowrap;
}

.monaco-menu .monaco-action-bar .actions-container {
	display: flex;
	margin: 0 auto;
	padding: 0;
	width: 100%;
	justify-content: flex-end;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: inline-block;
}

.monaco-menu .monaco-action-bar.reverse .actions-container {
	flex-direction: row-reverse;
}

.monaco-menu .monaco-action-bar .action-item {
	cursor: pointer;
	display: inline-block;
	transition: transform 50ms ease;
	position: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */
}

.monaco-menu .monaco-action-bar .action-item.disabled {
	cursor: default;
}

.monaco-menu .monaco-action-bar .action-item .icon,
.monaco-menu .monaco-action-bar .action-item .codicon {
	display: inline-block;
}

.monaco-menu .monaco-action-bar .action-item .codicon {
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar .action-label {
	font-size: 11px;
	margin-right: 4px;
}

.monaco-menu .monaco-action-bar .action-item.disabled .action-label,
.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {
	color: var(--vscode-disabledForeground);
}

/* Vertical actions */

.monaco-menu .monaco-action-bar.vertical {
	text-align: left;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	display: block;
	border-bottom: 1px solid var(--vscode-menu-separatorBackground);
	padding-top: 1px;
	padding: 30px;
}

.monaco-menu .secondary-actions .monaco-action-bar .action-label {
	margin-left: 6px;
}

/* Action Items */
.monaco-menu .monaco-action-bar .action-item.select-container {
	overflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */
	flex: 1;
	max-width: 170px;
	min-width: 60px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin-right: 10px;
}

.monaco-menu .monaco-action-bar.vertical {
	margin-left: 0;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .actions-container {
	display: block;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	padding: 0;
	transform: none;
	display: flex;
}

.monaco-menu .monaco-action-bar.vertical .action-item.active {
	transform: none;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	flex: 1 1 auto;
	display: flex;
	height: 2em;
	align-items: center;
	position: relative;
	margin: 0 4px;
	border-radius: 4px;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {
	opacity: unset;
}

.monaco-menu .monaco-action-bar.vertical .action-label {
	flex: 1 1 auto;
	text-decoration: none;
	padding: 0 1em;
	background: none;
	font-size: 12px;
	line-height: 1;
}

.monaco-menu .monaco-action-bar.vertical .keybinding,
.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	display: inline-block;
	flex: 2 1 auto;
	padding: 0 1em;
	text-align: right;
	font-size: 12px;
	line-height: 1;
	opacity: 0.7;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {
	font-size: 16px !important;
	display: flex;
	align-items: center;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {
	margin-left: auto;
	margin-right: -20px;
}

.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,
.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {
	opacity: 0.4;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {
	display: inline-block;
	box-sizing: border-box;
	margin: 0;
}

.monaco-menu .monaco-action-bar.vertical .action-item {
	position: static;
	overflow: visible;
}

.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {
	position: absolute;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	width: 100%;
	height: 0px !important;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {
	padding: 0.7em 1em 0.1em 1em;
	font-weight: bold;
	opacity: 1;
}

.monaco-menu .monaco-action-bar.vertical .action-label:hover {
	color: inherit;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	position: absolute;
	visibility: hidden;
	width: 1em;
	height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {
	visibility: visible;
	display: flex;
	align-items: center;
	justify-content: center;
}

/* Context Menu */

.context-view.monaco-menu-container {
	outline: 0;
	border: none;
	animation: fadeIn 0.083s linear;
	-webkit-app-region: no-drag;
}

.context-view.monaco-menu-container :focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,
.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {
	outline: 0;
}

.hc-black .context-view.monaco-menu-container,
.hc-light .context-view.monaco-menu-container,
:host-context(.hc-black) .context-view.monaco-menu-container,
:host-context(.hc-light) .context-view.monaco-menu-container {
	box-shadow: none;
}

.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,
.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,
:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {
	background: none;
}

/* Vertical Action Bar Styles */

.monaco-menu .monaco-action-bar.vertical {
	padding: 4px 0;
}

.monaco-menu .monaco-action-bar.vertical .action-menu-item {
	height: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),
.monaco-menu .monaco-action-bar.vertical .keybinding {
	font-size: inherit;
	padding: 0 2em;
	max-height: 100%;
}

.monaco-menu .monaco-action-bar.vertical .menu-item-check {
	font-size: inherit;
	width: 2em;
}

.monaco-menu .monaco-action-bar.vertical .action-label.separator {
	font-size: inherit;
	margin: 5px 0 !important;
	padding: 0;
	border-radius: 0;
}

.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {
	margin-left: 0;
	margin-right: 0;
}

.monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	font-size: 60%;
	padding: 0 1.8em;
}

.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,
:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {
	height: 100%;
	mask-size: 10px 10px;
	-webkit-mask-size: 10px 10px;
}

.monaco-menu .action-item {
	cursor: default;
}`;if(e){t+=`
			/* Arrows */
			.monaco-scrollable-element > .scrollbar > .scra {
				cursor: pointer;
				font-size: 11px !important;
			}

			.monaco-scrollable-element > .visible {
				opacity: 1;

				/* Background rule added for IE9 - to allow clicks on dom node */
				background:rgba(0,0,0,0);

				transition: opacity 100ms linear;
			}
			.monaco-scrollable-element > .invisible {
				opacity: 0;
				pointer-events: none;
			}
			.monaco-scrollable-element > .invisible.fade {
				transition: opacity 800ms linear;
			}

			/* Scrollable Content Inset Shadow */
			.monaco-scrollable-element > .shadow {
				position: absolute;
				display: none;
			}
			.monaco-scrollable-element > .shadow.top {
				display: block;
				top: 0;
				left: 3px;
				height: 3px;
				width: 100%;
			}
			.monaco-scrollable-element > .shadow.left {
				display: block;
				top: 3px;
				left: 0;
				height: 100%;
				width: 3px;
			}
			.monaco-scrollable-element > .shadow.top-left-corner {
				display: block;
				top: 0;
				left: 0;
				height: 3px;
				width: 3px;
			}
			/* Fix for https://github.com/microsoft/vscode/issues/103170 */
			.monaco-menu .action-item .monaco-submenu {
				z-index: 1;
			}
		`;const n=i.scrollbarShadow;n&&(t+=`
				.monaco-scrollable-element > .shadow.top {
					box-shadow: ${n} 0 6px 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.left {
					box-shadow: ${n} 6px 0 6px -6px inset;
				}

				.monaco-scrollable-element > .shadow.top.left {
					box-shadow: ${n} 6px 6px 6px -6px inset;
				}
			`);const s=i.scrollbarSliderBackground;s&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider {
					background: ${s};
				}
			`);const r=i.scrollbarSliderHoverBackground;r&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider:hover {
					background: ${r};
				}
			`);const o=i.scrollbarSliderActiveBackground;o&&(t+=`
				.monaco-scrollable-element > .scrollbar > .slider.active {
					background: ${o};
				}
			`)}return t}class vH{constructor(e,t,n,s){this.contextViewService=e,this.telemetryService=t,this.notificationService=n,this.keybindingService=s,this.focusToReturn=null,this.lastContainer=null,this.block=null,this.blockDisposable=null,this.options={blockMouse:!0}}configure(e){this.options=e}showContextMenu(e){const t=e.getActions();if(!t.length)return;this.focusToReturn=on();let n;const s=Ut(e.domForShadowRoot)?e.domForShadowRoot:void 0;this.contextViewService.showContextView({getAnchor:()=>e.getAnchor(),canRelayout:!1,anchorAlignment:e.anchorAlignment,anchorAxisAlignment:e.anchorAxisAlignment,layer:e.layer,render:r=>{this.lastContainer=r;const o=e.getMenuClassName?e.getMenuClassName():"";o&&(r.className+=" "+o),this.options.blockMouse&&(this.block=r.appendChild(_e(".context-view-block")),this.block.style.position="fixed",this.block.style.cursor="initial",this.block.style.left="0",this.block.style.top="0",this.block.style.width="100%",this.block.style.height="100%",this.block.style.zIndex="-1",this.blockDisposable?.dispose(),this.blockDisposable=V(this.block,j.MOUSE_DOWN,h=>h.stopPropagation()));const a=new X,l=e.actionRunner||a.add(new Xh);l.onWillRun(h=>this.onActionRun(h,!e.skipTelemetry),this,a),l.onDidRun(this.onDidActionRun,this,a),n=new Lh(r,t,{actionViewItemProvider:e.getActionViewItem,context:e.getActionsContext?e.getActionsContext():null,actionRunner:l,getKeyBinding:e.getKeyBinding?e.getKeyBinding:h=>this.keybindingService.lookupKeybinding(h.id)},hH),n.onDidCancel(()=>this.contextViewService.hideContextView(!0),null,a),n.onDidBlur(()=>this.contextViewService.hideContextView(!0),null,a);const c=ke(r);return a.add(V(c,j.BLUR,()=>this.contextViewService.hideContextView(!0))),a.add(V(c,j.MOUSE_DOWN,h=>{if(h.defaultPrevented)return;const u=new Ns(c,h);let f=u.target;if(!u.rightButton){for(;f;){if(f===r)return;f=f.parentElement}this.contextViewService.hideContextView(!0)}})),Kr(a,n)},focus:()=>{n?.focus(!!e.autoSelectFirstItem)},onHide:r=>{e.onHide?.(!!r),this.block&&(this.block.remove(),this.block=null),this.blockDisposable?.dispose(),this.blockDisposable=null,this.lastContainer&&(on()===this.lastContainer||Kt(on(),this.lastContainer))&&this.focusToReturn?.focus(),this.lastContainer=null}},s,!!s)}onActionRun(e,t){t&&this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.action.id,from:"contextMenu"}),this.contextViewService.hideContextView(!1)}onDidActionRun(e){e.error&&!wc(e.error)&&this.notificationService.error(e.error)}}let Cw=class extends ${get contextMenuHandler(){return this._contextMenuHandler||(this._contextMenuHandler=new vH(this.contextViewService,this.telemetryService,this.notificationService,this.keybindingService)),this._contextMenuHandler}constructor(e,t,n,s,r,o){super(),this.telemetryService=e,this.notificationService=t,this.contextViewService=n,this.keybindingService=s,this.menuService=r,this.contextKeyService=o,this._contextMenuHandler=void 0,this._onDidShowContextMenu=this._store.add(new A),this.onDidShowContextMenu=this._onDidShowContextMenu.event,this._onDidHideContextMenu=this._store.add(new A),this.onDidHideContextMenu=this._onDidHideContextMenu.event}configure(e){this.contextMenuHandler.configure(e)}showContextMenu(e){e=Ew.transform(e,this.menuService,this.contextKeyService),this.contextMenuHandler.showContextMenu({...e,onHide:t=>{e.onHide?.(t),this._onDidHideContextMenu.fire()}}),Ra.getInstance().resetKeyStatus(),this._onDidShowContextMenu.fire()}};Cw=G([L(0,gu),L(1,Ec),L(2,Uf),L(3,$s),L(4,tb),L(5,Mt)],Cw);var Ew;(function(i){function e(n){return n&&n.menuId instanceof T}function t(n,s,r){if(!e(n))return n;const{menuId:o,menuActionOptions:a,contextKeyService:l}=n;return{...n,getActions:()=>{let c=[];if(o){const h=s.getMenuActions(o,l??r,a);c=bH(h)}return n.getActions?Ui.join(n.getActions(),c):c}}}i.transform=t})(Ew||(Ew={}));function Qie(i,e){return i.with({fragment:`${e.startLineNumber},${e.startColumn}${e.endLineNumber?`-${e.endLineNumber}${e.endColumn?`,${e.endColumn}`:""}`:""}`})}function yH(i){let e;const t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(i.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},i=i.with({fragment:""})),{selection:e,uri:i}}let xw=class{constructor(e){this._commandService=e}async open(e,t){if(!L1(e,ge.command))return!1;if(!t?.allowCommands||(typeof e=="string"&&(e=Y.parse(e)),Array.isArray(t.allowCommands)&&!t.allowCommands.includes(e.path)))return!0;let n=[];try{n=Cm(decodeURIComponent(e.query))}catch{try{n=Cm(e.query)}catch{}}return Array.isArray(n)||(n=[n]),await this._commandService.executeCommand(e.path,...n),!0}};xw=G([L(0,ea)],xw);let Lw=class{constructor(e){this._editorService=e}async open(e,t){typeof e=="string"&&(e=Y.parse(e));const{selection:n,uri:s}=yH(e);return e=s,e.scheme===ge.file&&(e=g9(e)),await this._editorService.openCodeEditor({resource:e,options:{selection:n,source:t?.fromUserGesture?Jp.USER:Jp.API,...t?.editorOptions}},this._editorService.getFocusedCodeEditor(),t?.openToSide),!0}};Lw=G([L(0,vr)],Lw);let Dw=class{constructor(e,t){this._openers=new sn,this._validators=new sn,this._resolvers=new sn,this._resolvedUriTargets=new oi(n=>n.with({path:null,fragment:null,query:null}).toString()),this._externalOpeners=new sn,this._defaultExternalOpener={openExternal:async n=>(kC(n,ge.http,ge.https)?wA(n):$e.location.href=n,!0)},this._openers.push({open:async(n,s)=>s?.openExternal||kC(n,ge.mailto,ge.http,ge.https,ge.vsls)?(await this._doOpenExternal(n,s),!0):!1}),this._openers.push(new xw(t)),this._openers.push(new Lw(e))}registerOpener(e){return{dispose:this._openers.unshift(e)}}registerValidator(e){return{dispose:this._validators.push(e)}}registerExternalUriResolver(e){return{dispose:this._resolvers.push(e)}}setDefaultExternalOpener(e){this._defaultExternalOpener=e}registerExternalOpener(e){return{dispose:this._externalOpeners.push(e)}}async open(e,t){if(!t?.skipValidation){const n=typeof e=="string"?Y.parse(e):e,s=this._resolvedUriTargets.get(n)??e;for(const r of this._validators)if(!await r.shouldOpen(s,t))return!1}for(const n of this._openers)if(await n.open(e,t))return!0;return!1}async resolveExternalUri(e,t){for(const n of this._resolvers)try{const s=await n.resolveExternalUri(e,t);if(s)return this._resolvedUriTargets.has(s.resolved)||this._resolvedUriTargets.set(s.resolved,e),s}catch{}throw new Error("Could not resolve external URI: "+e.toString())}async _doOpenExternal(e,t){const n=typeof e=="string"?Y.parse(e):e;let s;try{s=(await this.resolveExternalUri(n,t)).resolved}catch{s=n}let r;if(typeof e=="string"&&n.toString()===s.toString()?r=e:r=encodeURI(s.toString(!0)),t?.allowContributedOpeners){const o=typeof t?.allowContributedOpeners=="string"?t?.allowContributedOpeners:void 0;for(const a of this._externalOpeners)if(await a.openExternal(r,{sourceUri:n,preferredOpenerId:o},mi.None))return!0}return this._defaultExternalOpener.openExternal(r,{sourceUri:n},mi.None)}dispose(){this._validators.clear()}};Dw=G([L(0,vr),L(1,ea)],Dw);const u4=be("editorWorkerService"),vx="default",SH="$initialize";let yx=!1;function Iw(i){zs&&(yx||(yx=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(i.message))}var jn;(function(i){i[i.Request=0]="Request",i[i.Reply=1]="Reply",i[i.SubscribeEvent=2]="SubscribeEvent",i[i.Event=3]="Event",i[i.UnsubscribeEvent=4]="UnsubscribeEvent"})(jn||(jn={}));class kH{constructor(e,t,n,s,r){this.vsWorker=e,this.req=t,this.channel=n,this.method=s,this.args=r,this.type=jn.Request}}class Sx{constructor(e,t,n,s){this.vsWorker=e,this.seq=t,this.res=n,this.err=s,this.type=jn.Reply}}class CH{constructor(e,t,n,s,r){this.vsWorker=e,this.req=t,this.channel=n,this.eventName=s,this.arg=r,this.type=jn.SubscribeEvent}}class EH{constructor(e,t,n){this.vsWorker=e,this.req=t,this.event=n,this.type=jn.Event}}class xH{constructor(e,t){this.vsWorker=e,this.req=t,this.type=jn.UnsubscribeEvent}}class LH{constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t,n){const s=String(++this._lastSentReq);return new Promise((r,o)=>{this._pendingReplies[s]={resolve:r,reject:o},this._send(new kH(this._workerId,s,e,t,n))})}listen(e,t,n){let s=null;const r=new A({onWillAddFirstListener:()=>{s=String(++this._lastSentReq),this._pendingEmitters.set(s,r),this._send(new CH(this._workerId,s,e,t,n))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(s),this._send(new xH(this._workerId,s)),s=null}});return r.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}createProxyToRemoteChannel(e,t){const n={get:(s,r)=>(typeof r=="string"&&!s[r]&&(f4(r)?s[r]=o=>this.listen(e,r,o):d4(r)?s[r]=this.listen(e,r,void 0):r.charCodeAt(0)===k.DollarSign&&(s[r]=async(...o)=>(await t?.(),this.sendMessage(e,r,o)))),s[r])};return new Proxy(Object.create(null),n)}_handleMessage(e){switch(e.type){case jn.Reply:return this._handleReplyMessage(e);case jn.Request:return this._handleRequestMessage(e);case jn.SubscribeEvent:return this._handleSubscribeEventMessage(e);case jn.Event:return this._handleEventMessage(e);case jn.UnsubscribeEvent:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}const t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;e.err.$isError&&(n=new Error,n.name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),t.reject(n);return}t.resolve(e.res)}_handleRequestMessage(e){const t=e.req;this._handler.handleMessage(e.channel,e.method,e.args).then(s=>{this._send(new Sx(this._workerId,t,s,void 0))},s=>{s.detail instanceof Error&&(s.detail=G_(s.detail)),this._send(new Sx(this._workerId,t,void 0,G_(s)))})}_handleSubscribeEventMessage(e){const t=e.req,n=this._handler.handleEvent(e.channel,e.eventName,e.arg)(s=>{this._send(new EH(this._workerId,t,s))});this._pendingEvents.set(t,n)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){const t=[];if(e.type===jn.Request)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else e.type===jn.Reply&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}}class DH extends ${constructor(e){super(),this._localChannels=new Map,this._remoteChannels=new Map,this._worker=e,this._register(this._worker.onMessage(t=>{this._protocol.handleMessage(t)})),this._register(this._worker.onError(t=>{Iw(t),pt(t)})),this._protocol=new LH({sendMessage:(t,n)=>{this._worker.postMessage(t,n)},handleMessage:(t,n,s)=>this._handleMessage(t,n,s),handleEvent:(t,n,s)=>this._handleEvent(t,n,s)}),this._protocol.setWorkerId(this._worker.getId()),this._onModuleLoaded=this._protocol.sendMessage(vx,SH,[this._worker.getId()]),this.proxy=this._protocol.createProxyToRemoteChannel(vx,async()=>{await this._onModuleLoaded}),this._onModuleLoaded.catch(t=>{this._onError("Worker failed to load ",t)})}_handleMessage(e,t,n){const s=this._localChannels.get(e);if(!s)return Promise.reject(new Error(`Missing channel ${e} on main thread`));if(typeof s[t]!="function")return Promise.reject(new Error(`Missing method ${t} on main thread channel ${e}`));try{return Promise.resolve(s[t].apply(s,n))}catch(r){return Promise.reject(r)}}_handleEvent(e,t,n){const s=this._localChannels.get(e);if(!s)throw new Error(`Missing channel ${e} on main thread`);if(f4(t)){const r=s[t].call(s,n);if(typeof r!="function")throw new Error(`Missing dynamic event ${t} on main thread channel ${e}.`);return r}if(d4(t)){const r=s[t];if(typeof r!="function")throw new Error(`Missing event ${t} on main thread channel ${e}.`);return r}throw new Error(`Malformed event name ${t}`)}setChannel(e,t){this._localChannels.set(e,t)}getChannel(e){if(!this._remoteChannels.has(e)){const t=this._protocol.createProxyToRemoteChannel(e,async()=>{await this._onModuleLoaded});this._remoteChannels.set(e,t)}return this._remoteChannels.get(e)}_onError(e,t){console.error(e),console.info(t)}}function d4(i){return i[0]==="o"&&i[1]==="n"&&LI(i.charCodeAt(2))}function f4(i){return/^onDynamic/.test(i)&&LI(i.charCodeAt(9))}let mh;typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope"&&globalThis.workerttPolicy!==void 0?mh=globalThis.workerttPolicy:mh=_N("defaultWorkerFactory",{createScriptURL:i=>i});function IH(i,e){const t=i.label||"anonymous"+e,n=globalThis.MonacoEnvironment;if(n){if(typeof n.getWorker=="function")return n.getWorker("workerMain.js",t);if(typeof n.getWorkerUrl=="function"){const r=n.getWorkerUrl("workerMain.js",t);return new Worker(mh?mh.createScriptURL(r):r,{name:t,type:"module"})}}const s=i.esmModuleLocation;if(s){const r=TH(t,s.toString(!0)),o=new Worker(mh?mh.createScriptURL(r):r,{name:t,type:"module"});return AH(o)}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function TH(i,e){if(!(/^((http:)|(https:)|(file:))/.test(e)&&e.substring(0,globalThis.origin.length)!==globalThis.origin)){const n=e.lastIndexOf("?"),s=e.lastIndexOf("#",n),r=n>0?new URLSearchParams(e.substring(n+1,~s?s:void 0)):new URLSearchParams;p0.addSearchParam(r,!0,!0),r.toString()?e=`${e}?${r.toString()}#${i}`:e=`${e}#${i}`}const t=new Blob([ru([`/*${i}*/`,`globalThis._VSCODE_NLS_MESSAGES = ${JSON.stringify(KI())};`,`globalThis._VSCODE_NLS_LANGUAGE = ${JSON.stringify(Dy())};`,`globalThis._VSCODE_FILE_ROOT = ${JSON.stringify(globalThis._VSCODE_FILE_ROOT)};`,"const ttPolicy = globalThis.trustedTypes?.createPolicy('defaultWorkerFactory', { createScriptURL: value => value });","globalThis.workerttPolicy = ttPolicy;",`await import(ttPolicy?.createScriptURL(${JSON.stringify(e)}) ?? ${JSON.stringify(e)});`,"globalThis.postMessage({ type: 'vscode-worker-ready' });",`/*${i}*/`]).join("")],{type:"application/javascript"});return URL.createObjectURL(t)}function AH(i){return new Promise((e,t)=>{i.onmessage=function(n){n.data.type==="vscode-worker-ready"&&(i.onmessage=null,e(i))},i.onerror=t})}function NH(i){return!!i&&typeof i.then=="function"}class BS extends ${static{this.LAST_WORKER_ID=0}constructor(e){super(),this._onMessage=this._register(new A),this.onMessage=this._onMessage.event,this._onError=this._register(new A),this.onError=this._onError.event,this.id=++BS.LAST_WORKER_ID;const t=e instanceof Worker?e:IH(e,this.id);NH(t)?this.worker=t:this.worker=Promise.resolve(t),this.postMessage("-please-ignore-",[]);const n=s=>{this._onError.fire(s)};this.worker.then(s=>{s.onmessage=r=>{this._onMessage.fire(r.data)},s.onmessageerror=r=>{this._onError.fire(r)},typeof s.addEventListener=="function"&&s.addEventListener("error",n)}),this._register(fe(()=>{this.worker?.then(s=>{s.onmessage=null,s.onmessageerror=null,s.removeEventListener("error",n),s.terminate()}),this.worker=null}))}getId(){return this.id}postMessage(e,t){this.worker?.then(n=>{try{n.postMessage(e,t)}catch(s){pt(s),pt(new Error("FAILED to post message to worker",{cause:s}))}})}}class g4{constructor(e,t){this.esmModuleLocation=e,this.label=t}}function RH(i,e){const t=Y.isUri(i)?new g4(i,e):i;return new DH(new BS(t))}const Xf=be("languageConfigurationService");class ca{constructor(e,t,n,s){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=s}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}}class kx{constructor(e){this.source=e}getElements(){const e=this.source,t=new Int32Array(e.length);for(let n=0,s=e.length;n<s;n++)t[n]=e.charCodeAt(n);return t}}function MH(i,e,t){return new No(new kx(i),new kx(e)).ComputeDiff(t).changes}class Kc{static Assert(e,t){if(!e)throw new Error(t)}}class Gc{static Copy(e,t,n,s,r){for(let o=0;o<r;o++)n[s+o]=e[t+o]}static Copy2(e,t,n,s,r){for(let o=0;o<r;o++)n[s+o]=e[t+o]}}var ko;(function(i){i[i.MaxDifferencesHistory=1447]="MaxDifferencesHistory"})(ko||(ko={}));class Cx{constructor(){this.m_changes=[],this.m_originalStart=si.MAX_SAFE_SMALL_INTEGER,this.m_modifiedStart=si.MAX_SAFE_SMALL_INTEGER,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new ca(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=si.MAX_SAFE_SMALL_INTEGER,this.m_modifiedStart=si.MAX_SAFE_SMALL_INTEGER}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}}class No{constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;const[s,r,o]=No._getElements(e),[a,l,c]=No._getElements(t);this._hasStrings=o&&c,this._originalStringElements=s,this._originalElementsOrHash=r,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){const t=e.getElements();if(No._isStringArray(t)){const n=new Int32Array(t.length);for(let s=0,r=t.length;s<r;s++)n[s]=$y(t[s],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;const n=No._getStrictElement(this._originalSequence,e),s=No._getStrictElement(this._modifiedSequence,t);return n===s}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,s,r){const o=[!1];let a=this.ComputeDiffRecursive(e,t,n,s,o);return r&&(a=this.PrettifyChanges(a)),{quitEarly:o[0],changes:a}}ComputeDiffRecursive(e,t,n,s,r){for(r[0]=!1;e<=t&&n<=s&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&s>=n&&this.ElementsAreEqual(t,s);)t--,s--;if(e>t||n>s){let u;return n<=s?(Kc.Assert(e===t+1,"originalStart should only be one more than originalEnd"),u=[new ca(e,0,n,s-n+1)]):e<=t?(Kc.Assert(n===s+1,"modifiedStart should only be one more than modifiedEnd"),u=[new ca(e,t-e+1,n,0)]):(Kc.Assert(e===t+1,"originalStart should only be one more than originalEnd"),Kc.Assert(n===s+1,"modifiedStart should only be one more than modifiedEnd"),u=[]),u}const o=[0],a=[0],l=this.ComputeRecursionPoint(e,t,n,s,o,a,r),c=o[0],h=a[0];if(l!==null)return l;if(!r[0]){const u=this.ComputeDiffRecursive(e,c,n,h,r);let f=[];return r[0]?f=[new ca(c+1,t-(c+1)+1,h+1,s-(h+1)+1)]:f=this.ComputeDiffRecursive(c+1,t,h+1,s,r),this.ConcatenateChanges(u,f)}return[new ca(e,t-e+1,n,s-n+1)]}WALKTRACE(e,t,n,s,r,o,a,l,c,h,u,f,g,p,m,_,v,y){let E=null,N=null,I=new Cx,B=t,x=n,D=g[0]-_[0]-s,F=si.MIN_SAFE_SMALL_INTEGER,te=this.m_forwardHistory.length-1;do{const J=D+e;J===B||J<x&&c[J-1]<c[J+1]?(u=c[J+1],p=u-D-s,u<F&&I.MarkNextChange(),F=u,I.AddModifiedElement(u+1,p),D=J+1-e):(u=c[J-1]+1,p=u-D-s,u<F&&I.MarkNextChange(),F=u-1,I.AddOriginalElement(u,p+1),D=J-1-e),te>=0&&(c=this.m_forwardHistory[te],e=c[0],B=1,x=c.length-1)}while(--te>=-1);if(E=I.getReverseChanges(),y[0]){let J=g[0]+1,le=_[0]+1;if(E!==null&&E.length>0){const ee=E[E.length-1];J=Math.max(J,ee.getOriginalEnd()),le=Math.max(le,ee.getModifiedEnd())}N=[new ca(J,f-J+1,le,m-le+1)]}else{I=new Cx,B=o,x=a,D=g[0]-_[0]-l,F=si.MAX_SAFE_SMALL_INTEGER,te=v?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{const J=D+r;J===B||J<x&&h[J-1]>=h[J+1]?(u=h[J+1]-1,p=u-D-l,u>F&&I.MarkNextChange(),F=u+1,I.AddOriginalElement(u+1,p+1),D=J+1-r):(u=h[J-1],p=u-D-l,u>F&&I.MarkNextChange(),F=u,I.AddModifiedElement(u+1,p+1),D=J-1-r),te>=0&&(h=this.m_reverseHistory[te],r=h[0],B=1,x=h.length-1)}while(--te>=-1);N=I.getChanges()}return this.ConcatenateChanges(E,N)}ComputeRecursionPoint(e,t,n,s,r,o,a){let l=0,c=0,h=0,u=0,f=0,g=0;e--,n--,r[0]=0,o[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];const p=t-e+(s-n),m=p+1,_=new Int32Array(m),v=new Int32Array(m),y=s-n,E=t-e,N=e-n,I=t-s,x=(E-y)%2===0;_[y]=e,v[E]=t,a[0]=!1;for(let D=1;D<=p/2+1;D++){let F=0,te=0;h=this.ClipDiagonalBound(y-D,D,y,m),u=this.ClipDiagonalBound(y+D,D,y,m);for(let le=h;le<=u;le+=2){le===h||le<u&&_[le-1]<_[le+1]?l=_[le+1]:l=_[le-1]+1,c=l-(le-y)-N;const ee=l;for(;l<t&&c<s&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(_[le]=l,l+c>F+te&&(F=l,te=c),!x&&Math.abs(le-E)<=D-1&&l>=v[le])return r[0]=l,o[0]=c,ee<=v[le]&&ko.MaxDifferencesHistory>0&&D<=ko.MaxDifferencesHistory+1?this.WALKTRACE(y,h,u,N,E,f,g,I,_,v,l,t,r,c,s,o,x,a):null}const J=(F-e+(te-n)-D)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(F,J))return a[0]=!0,r[0]=F,o[0]=te,J>0&&ko.MaxDifferencesHistory>0&&D<=ko.MaxDifferencesHistory+1?this.WALKTRACE(y,h,u,N,E,f,g,I,_,v,l,t,r,c,s,o,x,a):(e++,n++,[new ca(e,t-e+1,n,s-n+1)]);f=this.ClipDiagonalBound(E-D,D,E,m),g=this.ClipDiagonalBound(E+D,D,E,m);for(let le=f;le<=g;le+=2){le===f||le<g&&v[le-1]>=v[le+1]?l=v[le+1]-1:l=v[le-1],c=l-(le-E)-I;const ee=l;for(;l>e&&c>n&&this.ElementsAreEqual(l,c);)l--,c--;if(v[le]=l,x&&Math.abs(le-y)<=D&&l<=_[le])return r[0]=l,o[0]=c,ee>=_[le]&&ko.MaxDifferencesHistory>0&&D<=ko.MaxDifferencesHistory+1?this.WALKTRACE(y,h,u,N,E,f,g,I,_,v,l,t,r,c,s,o,x,a):null}if(D<=ko.MaxDifferencesHistory){let le=new Int32Array(u-h+2);le[0]=y-h+1,Gc.Copy2(_,h,le,1,u-h+1),this.m_forwardHistory.push(le),le=new Int32Array(g-f+2),le[0]=E-f+1,Gc.Copy2(v,f,le,1,g-f+1),this.m_reverseHistory.push(le)}}return this.WALKTRACE(y,h,u,N,E,f,g,I,_,v,l,t,r,c,s,o,x,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){const n=e[t],s=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,r=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,o=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<s&&n.modifiedStart+n.modifiedLength<r&&(!o||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){const c=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!c)break;n.originalStart++,n.modifiedStart++}const l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){const n=e[t];let s=0,r=0;if(t>0){const u=e[t-1];s=u.originalStart+u.originalLength,r=u.modifiedStart+u.modifiedLength}const o=n.originalLength>0,a=n.modifiedLength>0;let l=0,c=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let u=1;;u++){const f=n.originalStart-u,g=n.modifiedStart-u;if(f<s||g<r||o&&!this.OriginalElementsAreEqual(f,f+n.originalLength)||a&&!this.ModifiedElementsAreEqual(g,g+n.modifiedLength))break;const m=(f===s&&g===r?5:0)+this._boundaryScore(f,n.originalLength,g,n.modifiedLength);m>c&&(c=m,l=u)}n.originalStart-=l,n.modifiedStart-=l;const h=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],h)){e[t-1]=h[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){const s=e[t-1],r=e[t],o=r.originalStart-s.originalStart-s.originalLength,a=s.originalStart,l=r.originalStart+r.originalLength,c=l-a,h=s.modifiedStart,u=r.modifiedStart+r.modifiedLength,f=u-h;if(o<5&&c<20&&f<20){const g=this._findBetterContiguousSequence(a,c,h,f,o);if(g){const[p,m]=g;(p!==s.originalStart+s.originalLength||m!==s.modifiedStart+s.modifiedLength)&&(s.originalLength=p-s.originalStart,s.modifiedLength=m-s.modifiedStart,r.originalStart=p+o,r.modifiedStart=m+o,r.originalLength=l-r.originalStart,r.modifiedLength=u-r.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,s,r){if(t<r||s<r)return null;const o=e+t-r+1,a=n+s-r+1;let l=0,c=0,h=0;for(let u=e;u<o;u++)for(let f=n;f<a;f++){const g=this._contiguousSequenceScore(u,f,r);g>0&&g>l&&(l=g,c=u,h=f)}return l>0?[c,h]:null}_contiguousSequenceScore(e,t,n){let s=0;for(let r=0;r<n;r++){if(!this.ElementsAreEqual(e+r,t+r))return 0;s+=this._originalStringElements[e+r].length}return s}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){const n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,s){const r=this._OriginalRegionIsBoundary(e,t)?1:0,o=this._ModifiedRegionIsBoundary(n,s)?1:0;return r+o}ConcatenateChanges(e,t){const n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){const s=new Array(e.length+t.length-1);return Gc.Copy(e,0,s,0,e.length-1),s[e.length-1]=n[0],Gc.Copy(t,1,s,e.length,t.length-1),s}else{const s=new Array(e.length+t.length);return Gc.Copy(e,0,s,0,e.length),Gc.Copy(t,0,s,e.length,t.length),s}}ChangesOverlap(e,t,n){if(Kc.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),Kc.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){const s=e.originalStart;let r=e.originalLength;const o=e.modifiedStart;let a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(r=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new ca(s,r,o,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,s){if(e>=0&&e<s)return e;const r=n,o=s-n-1,a=t%2===0;if(e<0){const l=r%2===0;return a===l?0:1}else{const l=o%2===0;return a===l?s-1:s-2}}}class Qf{constructor(e){const t=cC(e);this._defaultValue=t,this._asciiMap=Qf._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const n=cC(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}var vd;(function(i){i[i.False=0]="False",i[i.True=1]="True"})(vd||(vd={}));class tne{constructor(){this._actual=new Qf(vd.False)}add(e){this._actual.set(e,vd.True)}has(e){return this._actual.get(e)===vd.True}clear(){return this._actual.clear()}}var xe;(function(i){i[i.Invalid=0]="Invalid",i[i.Start=1]="Start",i[i.H=2]="H",i[i.HT=3]="HT",i[i.HTT=4]="HTT",i[i.HTTP=5]="HTTP",i[i.F=6]="F",i[i.FI=7]="FI",i[i.FIL=8]="FIL",i[i.BeforeColon=9]="BeforeColon",i[i.AfterColon=10]="AfterColon",i[i.AlmostThere=11]="AlmostThere",i[i.End=12]="End",i[i.Accept=13]="Accept",i[i.LastKnownState=14]="LastKnownState"})(xe||(xe={}));class OH{constructor(e,t,n){const s=new Uint8Array(e*t);for(let r=0,o=e*t;r<o;r++)s[r]=n;this._data=s,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,n){this._data[e*this.cols+t]=n}}class FH{constructor(e){let t=0,n=xe.Invalid;for(let r=0,o=e.length;r<o;r++){const[a,l,c]=e[r];l>t&&(t=l),a>n&&(n=a),c>n&&(n=c)}t++,n++;const s=new OH(n,t,xe.Invalid);for(let r=0,o=e.length;r<o;r++){const[a,l,c]=e[r];s.set(a,l,c)}this._states=s,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?xe.Invalid:this._states.get(e,t)}}let m_=null;function PH(){return m_===null&&(m_=new FH([[xe.Start,k.h,xe.H],[xe.Start,k.H,xe.H],[xe.Start,k.f,xe.F],[xe.Start,k.F,xe.F],[xe.H,k.t,xe.HT],[xe.H,k.T,xe.HT],[xe.HT,k.t,xe.HTT],[xe.HT,k.T,xe.HTT],[xe.HTT,k.p,xe.HTTP],[xe.HTT,k.P,xe.HTTP],[xe.HTTP,k.s,xe.BeforeColon],[xe.HTTP,k.S,xe.BeforeColon],[xe.HTTP,k.Colon,xe.AfterColon],[xe.F,k.i,xe.FI],[xe.F,k.I,xe.FI],[xe.FI,k.l,xe.FIL],[xe.FI,k.L,xe.FIL],[xe.FIL,k.e,xe.BeforeColon],[xe.FIL,k.E,xe.BeforeColon],[xe.BeforeColon,k.Colon,xe.AfterColon],[xe.AfterColon,k.Slash,xe.AlmostThere],[xe.AlmostThere,k.Slash,xe.End]])),m_}var Pt;(function(i){i[i.None=0]="None",i[i.ForceTermination=1]="ForceTermination",i[i.CannotEndIn=2]="CannotEndIn"})(Pt||(Pt={}));let Nu=null;function BH(){if(Nu===null){Nu=new Qf(Pt.None);const i=` 	<>'"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…`;for(let t=0;t<i.length;t++)Nu.set(i.charCodeAt(t),Pt.ForceTermination);const e=".,;:";for(let t=0;t<e.length;t++)Nu.set(e.charCodeAt(t),Pt.CannotEndIn)}return Nu}class Bm{static _createLink(e,t,n,s,r){let o=r-1;do{const a=t.charCodeAt(o);if(e.get(a)!==Pt.CannotEndIn)break;o--}while(o>s);if(s>0){const a=t.charCodeAt(s-1),l=t.charCodeAt(o);(a===k.OpenParen&&l===k.CloseParen||a===k.OpenSquareBracket&&l===k.CloseSquareBracket||a===k.OpenCurlyBrace&&l===k.CloseCurlyBrace)&&o--}return{range:{startLineNumber:n,startColumn:s+1,endLineNumber:n,endColumn:o+2},url:t.substring(s,o+1)}}static computeLinks(e,t=PH()){const n=BH(),s=[];for(let r=1,o=e.getLineCount();r<=o;r++){const a=e.getLineContent(r),l=a.length;let c=0,h=0,u=0,f=xe.Start,g=!1,p=!1,m=!1,_=!1;for(;c<l;){let v=!1;const y=a.charCodeAt(c);if(f===xe.Accept){let E;switch(y){case k.OpenParen:g=!0,E=Pt.None;break;case k.CloseParen:E=g?Pt.None:Pt.ForceTermination;break;case k.OpenSquareBracket:m=!0,p=!0,E=Pt.None;break;case k.CloseSquareBracket:m=!1,E=p?Pt.None:Pt.ForceTermination;break;case k.OpenCurlyBrace:_=!0,E=Pt.None;break;case k.CloseCurlyBrace:E=_?Pt.None:Pt.ForceTermination;break;case k.SingleQuote:case k.DoubleQuote:case k.BackTick:u===y?E=Pt.ForceTermination:u===k.SingleQuote||u===k.DoubleQuote||u===k.BackTick?E=Pt.None:E=Pt.ForceTermination;break;case k.Asterisk:E=u===k.Asterisk?Pt.ForceTermination:Pt.None;break;case k.Pipe:E=u===k.Pipe?Pt.ForceTermination:Pt.None;break;case k.Space:E=m?Pt.None:Pt.ForceTermination;break;default:E=n.get(y)}E===Pt.ForceTermination&&(s.push(Bm._createLink(n,a,r,h,c)),v=!0)}else if(f===xe.End){let E;y===k.OpenSquareBracket?(p=!0,E=Pt.None):E=n.get(y),E===Pt.ForceTermination?v=!0:f=xe.Accept}else f=t.nextState(f,y),f===xe.Invalid&&(v=!0);v&&(f=xe.Start,g=!1,p=!1,_=!1,h=c+1,u=y),c++}f===xe.Accept&&s.push(Bm._createLink(n,a,r,h,l))}return s}}function WH(i){return!i||typeof i.getLineCount!="function"||typeof i.getLineContent!="function"?[]:Bm.computeLinks(i)}class WS{constructor(){this._defaultValueSet=[["true","false"],["True","False"],["Private","Public","Friend","ReadOnly","Partial","Protected","WriteOnly"],["public","protected","private"]]}static{this.INSTANCE=new WS}navigateValueSet(e,t,n,s,r){if(e&&t){const o=this.doNavigateValueSet(t,r);if(o)return{range:e,value:o}}if(n&&s){const o=this.doNavigateValueSet(s,r);if(o)return{range:n,value:o}}return null}doNavigateValueSet(e,t){const n=this.numberReplace(e,t);return n!==null?n:this.textReplace(e,t)}numberReplace(e,t){const n=Math.pow(10,e.length-(e.lastIndexOf(".")+1));let s=Number(e);const r=parseFloat(e);return!isNaN(s)&&!isNaN(r)&&s===r?s===0&&!t?null:(s=Math.floor(s*n),s+=t?n:-n,String(s/n)):null}textReplace(e,t){return this.valueSetsReplace(this._defaultValueSet,e,t)}valueSetsReplace(e,t,n){let s=null;for(let r=0,o=e.length;s===null&&r<o;r++)s=this.valueSetReplace(e[r],t,n);return s}valueSetReplace(e,t,n){let s=e.indexOf(t);return s>=0?(s+=n?1:-1,s<0?s=e.length-1:s%=e.length,e[s]):null}}var ma;(function(i){i[i.LTR=0]="LTR",i[i.RTL=1]="RTL"})(ma||(ma={}));class tn extends H{constructor(e,t,n,s){super(e,t,n,s),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return tn.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?ma.LTR:ma.RTL}setEndPosition(e,t){return this.getDirection()===ma.LTR?new tn(this.startLineNumber,this.startColumn,e,t):new tn(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new pe(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new pe(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===ma.LTR?new tn(e,t,this.endLineNumber,this.endColumn):new tn(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new tn(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===ma.LTR?new tn(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new tn(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new tn(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,s=e.length;n<s;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,s,r){return r===ma.LTR?new tn(e,t,n,s):new tn(n,s,e,t)}}var Ex;(function(i){i[i.Unknown=0]="Unknown",i[i.Disabled=1]="Disabled",i[i.Enabled=2]="Enabled"})(Ex||(Ex={}));var xx;(function(i){i[i.Invoke=1]="Invoke",i[i.Auto=2]="Auto"})(xx||(xx={}));var Lx;(function(i){i[i.None=0]="None",i[i.KeepWhitespace=1]="KeepWhitespace",i[i.InsertAsSnippet=4]="InsertAsSnippet"})(Lx||(Lx={}));var Dx;(function(i){i[i.Method=0]="Method",i[i.Function=1]="Function",i[i.Constructor=2]="Constructor",i[i.Field=3]="Field",i[i.Variable=4]="Variable",i[i.Class=5]="Class",i[i.Struct=6]="Struct",i[i.Interface=7]="Interface",i[i.Module=8]="Module",i[i.Property=9]="Property",i[i.Event=10]="Event",i[i.Operator=11]="Operator",i[i.Unit=12]="Unit",i[i.Value=13]="Value",i[i.Constant=14]="Constant",i[i.Enum=15]="Enum",i[i.EnumMember=16]="EnumMember",i[i.Keyword=17]="Keyword",i[i.Text=18]="Text",i[i.Color=19]="Color",i[i.File=20]="File",i[i.Reference=21]="Reference",i[i.Customcolor=22]="Customcolor",i[i.Folder=23]="Folder",i[i.TypeParameter=24]="TypeParameter",i[i.User=25]="User",i[i.Issue=26]="Issue",i[i.Tool=27]="Tool",i[i.Snippet=28]="Snippet"})(Dx||(Dx={}));var Ix;(function(i){i[i.Deprecated=1]="Deprecated"})(Ix||(Ix={}));var Tx;(function(i){i[i.Invoke=0]="Invoke",i[i.TriggerCharacter=1]="TriggerCharacter",i[i.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(Tx||(Tx={}));var Ax;(function(i){i[i.EXACT=0]="EXACT",i[i.ABOVE=1]="ABOVE",i[i.BELOW=2]="BELOW"})(Ax||(Ax={}));var Nx;(function(i){i[i.NotSet=0]="NotSet",i[i.ContentFlush=1]="ContentFlush",i[i.RecoverFromMarkers=2]="RecoverFromMarkers",i[i.Explicit=3]="Explicit",i[i.Paste=4]="Paste",i[i.Undo=5]="Undo",i[i.Redo=6]="Redo"})(Nx||(Nx={}));var Rx;(function(i){i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(Rx||(Rx={}));var Mx;(function(i){i[i.Text=0]="Text",i[i.Read=1]="Read",i[i.Write=2]="Write"})(Mx||(Mx={}));var Ox;(function(i){i[i.None=0]="None",i[i.Keep=1]="Keep",i[i.Brackets=2]="Brackets",i[i.Advanced=3]="Advanced",i[i.Full=4]="Full"})(Ox||(Ox={}));var Fx;(function(i){i[i.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",i[i.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",i[i.accessibilitySupport=2]="accessibilitySupport",i[i.accessibilityPageSize=3]="accessibilityPageSize",i[i.allowVariableLineHeights=4]="allowVariableLineHeights",i[i.ariaLabel=5]="ariaLabel",i[i.ariaRequired=6]="ariaRequired",i[i.autoClosingBrackets=7]="autoClosingBrackets",i[i.autoClosingComments=8]="autoClosingComments",i[i.screenReaderAnnounceInlineSuggestion=9]="screenReaderAnnounceInlineSuggestion",i[i.autoClosingDelete=10]="autoClosingDelete",i[i.autoClosingOvertype=11]="autoClosingOvertype",i[i.autoClosingQuotes=12]="autoClosingQuotes",i[i.autoIndent=13]="autoIndent",i[i.automaticLayout=14]="automaticLayout",i[i.autoSurround=15]="autoSurround",i[i.bracketPairColorization=16]="bracketPairColorization",i[i.guides=17]="guides",i[i.codeLens=18]="codeLens",i[i.codeLensFontFamily=19]="codeLensFontFamily",i[i.codeLensFontSize=20]="codeLensFontSize",i[i.colorDecorators=21]="colorDecorators",i[i.colorDecoratorsLimit=22]="colorDecoratorsLimit",i[i.columnSelection=23]="columnSelection",i[i.comments=24]="comments",i[i.contextmenu=25]="contextmenu",i[i.copyWithSyntaxHighlighting=26]="copyWithSyntaxHighlighting",i[i.cursorBlinking=27]="cursorBlinking",i[i.cursorSmoothCaretAnimation=28]="cursorSmoothCaretAnimation",i[i.cursorStyle=29]="cursorStyle",i[i.cursorSurroundingLines=30]="cursorSurroundingLines",i[i.cursorSurroundingLinesStyle=31]="cursorSurroundingLinesStyle",i[i.cursorWidth=32]="cursorWidth",i[i.disableLayerHinting=33]="disableLayerHinting",i[i.disableMonospaceOptimizations=34]="disableMonospaceOptimizations",i[i.domReadOnly=35]="domReadOnly",i[i.dragAndDrop=36]="dragAndDrop",i[i.dropIntoEditor=37]="dropIntoEditor",i[i.experimentalEditContextEnabled=38]="experimentalEditContextEnabled",i[i.emptySelectionClipboard=39]="emptySelectionClipboard",i[i.experimentalGpuAcceleration=40]="experimentalGpuAcceleration",i[i.experimentalWhitespaceRendering=41]="experimentalWhitespaceRendering",i[i.extraEditorClassName=42]="extraEditorClassName",i[i.fastScrollSensitivity=43]="fastScrollSensitivity",i[i.find=44]="find",i[i.fixedOverflowWidgets=45]="fixedOverflowWidgets",i[i.folding=46]="folding",i[i.foldingStrategy=47]="foldingStrategy",i[i.foldingHighlight=48]="foldingHighlight",i[i.foldingImportsByDefault=49]="foldingImportsByDefault",i[i.foldingMaximumRegions=50]="foldingMaximumRegions",i[i.unfoldOnClickAfterEndOfLine=51]="unfoldOnClickAfterEndOfLine",i[i.fontFamily=52]="fontFamily",i[i.fontInfo=53]="fontInfo",i[i.fontLigatures=54]="fontLigatures",i[i.fontSize=55]="fontSize",i[i.fontWeight=56]="fontWeight",i[i.fontVariations=57]="fontVariations",i[i.formatOnPaste=58]="formatOnPaste",i[i.formatOnType=59]="formatOnType",i[i.glyphMargin=60]="glyphMargin",i[i.gotoLocation=61]="gotoLocation",i[i.hideCursorInOverviewRuler=62]="hideCursorInOverviewRuler",i[i.hover=63]="hover",i[i.inDiffEditor=64]="inDiffEditor",i[i.inlineSuggest=65]="inlineSuggest",i[i.letterSpacing=66]="letterSpacing",i[i.lightbulb=67]="lightbulb",i[i.lineDecorationsWidth=68]="lineDecorationsWidth",i[i.lineHeight=69]="lineHeight",i[i.lineNumbers=70]="lineNumbers",i[i.lineNumbersMinChars=71]="lineNumbersMinChars",i[i.linkedEditing=72]="linkedEditing",i[i.links=73]="links",i[i.matchBrackets=74]="matchBrackets",i[i.minimap=75]="minimap",i[i.mouseStyle=76]="mouseStyle",i[i.mouseWheelScrollSensitivity=77]="mouseWheelScrollSensitivity",i[i.mouseWheelZoom=78]="mouseWheelZoom",i[i.multiCursorMergeOverlapping=79]="multiCursorMergeOverlapping",i[i.multiCursorModifier=80]="multiCursorModifier",i[i.multiCursorPaste=81]="multiCursorPaste",i[i.multiCursorLimit=82]="multiCursorLimit",i[i.occurrencesHighlight=83]="occurrencesHighlight",i[i.occurrencesHighlightDelay=84]="occurrencesHighlightDelay",i[i.overtypeCursorStyle=85]="overtypeCursorStyle",i[i.overtypeOnPaste=86]="overtypeOnPaste",i[i.overviewRulerBorder=87]="overviewRulerBorder",i[i.overviewRulerLanes=88]="overviewRulerLanes",i[i.padding=89]="padding",i[i.pasteAs=90]="pasteAs",i[i.parameterHints=91]="parameterHints",i[i.peekWidgetDefaultFocus=92]="peekWidgetDefaultFocus",i[i.placeholder=93]="placeholder",i[i.definitionLinkOpensInPeek=94]="definitionLinkOpensInPeek",i[i.quickSuggestions=95]="quickSuggestions",i[i.quickSuggestionsDelay=96]="quickSuggestionsDelay",i[i.readOnly=97]="readOnly",i[i.readOnlyMessage=98]="readOnlyMessage",i[i.renameOnType=99]="renameOnType",i[i.renderControlCharacters=100]="renderControlCharacters",i[i.renderFinalNewline=101]="renderFinalNewline",i[i.renderLineHighlight=102]="renderLineHighlight",i[i.renderLineHighlightOnlyWhenFocus=103]="renderLineHighlightOnlyWhenFocus",i[i.renderValidationDecorations=104]="renderValidationDecorations",i[i.renderWhitespace=105]="renderWhitespace",i[i.revealHorizontalRightPadding=106]="revealHorizontalRightPadding",i[i.roundedSelection=107]="roundedSelection",i[i.rulers=108]="rulers",i[i.scrollbar=109]="scrollbar",i[i.scrollBeyondLastColumn=110]="scrollBeyondLastColumn",i[i.scrollBeyondLastLine=111]="scrollBeyondLastLine",i[i.scrollPredominantAxis=112]="scrollPredominantAxis",i[i.selectionClipboard=113]="selectionClipboard",i[i.selectionHighlight=114]="selectionHighlight",i[i.selectOnLineNumbers=115]="selectOnLineNumbers",i[i.showFoldingControls=116]="showFoldingControls",i[i.showUnused=117]="showUnused",i[i.snippetSuggestions=118]="snippetSuggestions",i[i.smartSelect=119]="smartSelect",i[i.smoothScrolling=120]="smoothScrolling",i[i.stickyScroll=121]="stickyScroll",i[i.stickyTabStops=122]="stickyTabStops",i[i.stopRenderingLineAfter=123]="stopRenderingLineAfter",i[i.suggest=124]="suggest",i[i.suggestFontSize=125]="suggestFontSize",i[i.suggestLineHeight=126]="suggestLineHeight",i[i.suggestOnTriggerCharacters=127]="suggestOnTriggerCharacters",i[i.suggestSelection=128]="suggestSelection",i[i.tabCompletion=129]="tabCompletion",i[i.tabIndex=130]="tabIndex",i[i.unicodeHighlighting=131]="unicodeHighlighting",i[i.unusualLineTerminators=132]="unusualLineTerminators",i[i.useShadowDOM=133]="useShadowDOM",i[i.useTabStops=134]="useTabStops",i[i.wordBreak=135]="wordBreak",i[i.wordSegmenterLocales=136]="wordSegmenterLocales",i[i.wordSeparators=137]="wordSeparators",i[i.wordWrap=138]="wordWrap",i[i.wordWrapBreakAfterCharacters=139]="wordWrapBreakAfterCharacters",i[i.wordWrapBreakBeforeCharacters=140]="wordWrapBreakBeforeCharacters",i[i.wordWrapColumn=141]="wordWrapColumn",i[i.wordWrapOverride1=142]="wordWrapOverride1",i[i.wordWrapOverride2=143]="wordWrapOverride2",i[i.wrappingIndent=144]="wrappingIndent",i[i.wrappingStrategy=145]="wrappingStrategy",i[i.showDeprecated=146]="showDeprecated",i[i.inlayHints=147]="inlayHints",i[i.effectiveCursorStyle=148]="effectiveCursorStyle",i[i.editorClassName=149]="editorClassName",i[i.pixelRatio=150]="pixelRatio",i[i.tabFocusMode=151]="tabFocusMode",i[i.layoutInfo=152]="layoutInfo",i[i.wrappingInfo=153]="wrappingInfo",i[i.defaultColorDecorators=154]="defaultColorDecorators",i[i.colorDecoratorsActivatedOn=155]="colorDecoratorsActivatedOn",i[i.inlineCompletionsAccessibilityVerbose=156]="inlineCompletionsAccessibilityVerbose",i[i.effectiveExperimentalEditContextEnabled=157]="effectiveExperimentalEditContextEnabled"})(Fx||(Fx={}));var Px;(function(i){i[i.TextDefined=0]="TextDefined",i[i.LF=1]="LF",i[i.CRLF=2]="CRLF"})(Px||(Px={}));var Bx;(function(i){i[i.LF=0]="LF",i[i.CRLF=1]="CRLF"})(Bx||(Bx={}));var Wx;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=3]="Right"})(Wx||(Wx={}));var Ux;(function(i){i[i.Increase=0]="Increase",i[i.Decrease=1]="Decrease"})(Ux||(Ux={}));var Hx;(function(i){i[i.None=0]="None",i[i.Indent=1]="Indent",i[i.IndentOutdent=2]="IndentOutdent",i[i.Outdent=3]="Outdent"})(Hx||(Hx={}));var Vx;(function(i){i[i.Both=0]="Both",i[i.Right=1]="Right",i[i.Left=2]="Left",i[i.None=3]="None"})(Vx||(Vx={}));var zx;(function(i){i[i.Type=1]="Type",i[i.Parameter=2]="Parameter"})(zx||(zx={}));var $x;(function(i){i[i.Accepted=0]="Accepted",i[i.Rejected=1]="Rejected",i[i.Ignored=2]="Ignored"})($x||($x={}));var qx;(function(i){i[i.Automatic=0]="Automatic",i[i.Explicit=1]="Explicit"})(qx||(qx={}));var Kx;(function(i){i[i.Invoke=0]="Invoke",i[i.Automatic=1]="Automatic"})(Kx||(Kx={}));var Tw;(function(i){i[i.DependsOnKbLayout=-1]="DependsOnKbLayout",i[i.Unknown=0]="Unknown",i[i.Backspace=1]="Backspace",i[i.Tab=2]="Tab",i[i.Enter=3]="Enter",i[i.Shift=4]="Shift",i[i.Ctrl=5]="Ctrl",i[i.Alt=6]="Alt",i[i.PauseBreak=7]="PauseBreak",i[i.CapsLock=8]="CapsLock",i[i.Escape=9]="Escape",i[i.Space=10]="Space",i[i.PageUp=11]="PageUp",i[i.PageDown=12]="PageDown",i[i.End=13]="End",i[i.Home=14]="Home",i[i.LeftArrow=15]="LeftArrow",i[i.UpArrow=16]="UpArrow",i[i.RightArrow=17]="RightArrow",i[i.DownArrow=18]="DownArrow",i[i.Insert=19]="Insert",i[i.Delete=20]="Delete",i[i.Digit0=21]="Digit0",i[i.Digit1=22]="Digit1",i[i.Digit2=23]="Digit2",i[i.Digit3=24]="Digit3",i[i.Digit4=25]="Digit4",i[i.Digit5=26]="Digit5",i[i.Digit6=27]="Digit6",i[i.Digit7=28]="Digit7",i[i.Digit8=29]="Digit8",i[i.Digit9=30]="Digit9",i[i.KeyA=31]="KeyA",i[i.KeyB=32]="KeyB",i[i.KeyC=33]="KeyC",i[i.KeyD=34]="KeyD",i[i.KeyE=35]="KeyE",i[i.KeyF=36]="KeyF",i[i.KeyG=37]="KeyG",i[i.KeyH=38]="KeyH",i[i.KeyI=39]="KeyI",i[i.KeyJ=40]="KeyJ",i[i.KeyK=41]="KeyK",i[i.KeyL=42]="KeyL",i[i.KeyM=43]="KeyM",i[i.KeyN=44]="KeyN",i[i.KeyO=45]="KeyO",i[i.KeyP=46]="KeyP",i[i.KeyQ=47]="KeyQ",i[i.KeyR=48]="KeyR",i[i.KeyS=49]="KeyS",i[i.KeyT=50]="KeyT",i[i.KeyU=51]="KeyU",i[i.KeyV=52]="KeyV",i[i.KeyW=53]="KeyW",i[i.KeyX=54]="KeyX",i[i.KeyY=55]="KeyY",i[i.KeyZ=56]="KeyZ",i[i.Meta=57]="Meta",i[i.ContextMenu=58]="ContextMenu",i[i.F1=59]="F1",i[i.F2=60]="F2",i[i.F3=61]="F3",i[i.F4=62]="F4",i[i.F5=63]="F5",i[i.F6=64]="F6",i[i.F7=65]="F7",i[i.F8=66]="F8",i[i.F9=67]="F9",i[i.F10=68]="F10",i[i.F11=69]="F11",i[i.F12=70]="F12",i[i.F13=71]="F13",i[i.F14=72]="F14",i[i.F15=73]="F15",i[i.F16=74]="F16",i[i.F17=75]="F17",i[i.F18=76]="F18",i[i.F19=77]="F19",i[i.F20=78]="F20",i[i.F21=79]="F21",i[i.F22=80]="F22",i[i.F23=81]="F23",i[i.F24=82]="F24",i[i.NumLock=83]="NumLock",i[i.ScrollLock=84]="ScrollLock",i[i.Semicolon=85]="Semicolon",i[i.Equal=86]="Equal",i[i.Comma=87]="Comma",i[i.Minus=88]="Minus",i[i.Period=89]="Period",i[i.Slash=90]="Slash",i[i.Backquote=91]="Backquote",i[i.BracketLeft=92]="BracketLeft",i[i.Backslash=93]="Backslash",i[i.BracketRight=94]="BracketRight",i[i.Quote=95]="Quote",i[i.OEM_8=96]="OEM_8",i[i.IntlBackslash=97]="IntlBackslash",i[i.Numpad0=98]="Numpad0",i[i.Numpad1=99]="Numpad1",i[i.Numpad2=100]="Numpad2",i[i.Numpad3=101]="Numpad3",i[i.Numpad4=102]="Numpad4",i[i.Numpad5=103]="Numpad5",i[i.Numpad6=104]="Numpad6",i[i.Numpad7=105]="Numpad7",i[i.Numpad8=106]="Numpad8",i[i.Numpad9=107]="Numpad9",i[i.NumpadMultiply=108]="NumpadMultiply",i[i.NumpadAdd=109]="NumpadAdd",i[i.NUMPAD_SEPARATOR=110]="NUMPAD_SEPARATOR",i[i.NumpadSubtract=111]="NumpadSubtract",i[i.NumpadDecimal=112]="NumpadDecimal",i[i.NumpadDivide=113]="NumpadDivide",i[i.KEY_IN_COMPOSITION=114]="KEY_IN_COMPOSITION",i[i.ABNT_C1=115]="ABNT_C1",i[i.ABNT_C2=116]="ABNT_C2",i[i.AudioVolumeMute=117]="AudioVolumeMute",i[i.AudioVolumeUp=118]="AudioVolumeUp",i[i.AudioVolumeDown=119]="AudioVolumeDown",i[i.BrowserSearch=120]="BrowserSearch",i[i.BrowserHome=121]="BrowserHome",i[i.BrowserBack=122]="BrowserBack",i[i.BrowserForward=123]="BrowserForward",i[i.MediaTrackNext=124]="MediaTrackNext",i[i.MediaTrackPrevious=125]="MediaTrackPrevious",i[i.MediaStop=126]="MediaStop",i[i.MediaPlayPause=127]="MediaPlayPause",i[i.LaunchMediaPlayer=128]="LaunchMediaPlayer",i[i.LaunchMail=129]="LaunchMail",i[i.LaunchApp2=130]="LaunchApp2",i[i.Clear=131]="Clear",i[i.MAX_VALUE=132]="MAX_VALUE"})(Tw||(Tw={}));var Aw;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(Aw||(Aw={}));var Nw;(function(i){i[i.Unnecessary=1]="Unnecessary",i[i.Deprecated=2]="Deprecated"})(Nw||(Nw={}));var Gx;(function(i){i[i.Inline=1]="Inline",i[i.Gutter=2]="Gutter"})(Gx||(Gx={}));var jx;(function(i){i[i.Normal=1]="Normal",i[i.Underlined=2]="Underlined"})(jx||(jx={}));var Yx;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.TEXTAREA=1]="TEXTAREA",i[i.GUTTER_GLYPH_MARGIN=2]="GUTTER_GLYPH_MARGIN",i[i.GUTTER_LINE_NUMBERS=3]="GUTTER_LINE_NUMBERS",i[i.GUTTER_LINE_DECORATIONS=4]="GUTTER_LINE_DECORATIONS",i[i.GUTTER_VIEW_ZONE=5]="GUTTER_VIEW_ZONE",i[i.CONTENT_TEXT=6]="CONTENT_TEXT",i[i.CONTENT_EMPTY=7]="CONTENT_EMPTY",i[i.CONTENT_VIEW_ZONE=8]="CONTENT_VIEW_ZONE",i[i.CONTENT_WIDGET=9]="CONTENT_WIDGET",i[i.OVERVIEW_RULER=10]="OVERVIEW_RULER",i[i.SCROLLBAR=11]="SCROLLBAR",i[i.OVERLAY_WIDGET=12]="OVERLAY_WIDGET",i[i.OUTSIDE_EDITOR=13]="OUTSIDE_EDITOR"})(Yx||(Yx={}));var Xx;(function(i){i[i.AIGenerated=1]="AIGenerated"})(Xx||(Xx={}));var Qx;(function(i){i[i.Invoke=0]="Invoke",i[i.Automatic=1]="Automatic"})(Qx||(Qx={}));var Zx;(function(i){i[i.TOP_RIGHT_CORNER=0]="TOP_RIGHT_CORNER",i[i.BOTTOM_RIGHT_CORNER=1]="BOTTOM_RIGHT_CORNER",i[i.TOP_CENTER=2]="TOP_CENTER"})(Zx||(Zx={}));var Jx;(function(i){i[i.Left=1]="Left",i[i.Center=2]="Center",i[i.Right=4]="Right",i[i.Full=7]="Full"})(Jx||(Jx={}));var eL;(function(i){i[i.Word=0]="Word",i[i.Line=1]="Line",i[i.Suggest=2]="Suggest"})(eL||(eL={}));var tL;(function(i){i[i.Left=0]="Left",i[i.Right=1]="Right",i[i.None=2]="None",i[i.LeftOfInjectedText=3]="LeftOfInjectedText",i[i.RightOfInjectedText=4]="RightOfInjectedText"})(tL||(tL={}));var iL;(function(i){i[i.Off=0]="Off",i[i.On=1]="On",i[i.Relative=2]="Relative",i[i.Interval=3]="Interval",i[i.Custom=4]="Custom"})(iL||(iL={}));var nL;(function(i){i[i.None=0]="None",i[i.Text=1]="Text",i[i.Blocks=2]="Blocks"})(nL||(nL={}));var sL;(function(i){i[i.Smooth=0]="Smooth",i[i.Immediate=1]="Immediate"})(sL||(sL={}));var rL;(function(i){i[i.Auto=1]="Auto",i[i.Hidden=2]="Hidden",i[i.Visible=3]="Visible"})(rL||(rL={}));var Rw;(function(i){i[i.LTR=0]="LTR",i[i.RTL=1]="RTL"})(Rw||(Rw={}));var oL;(function(i){i.Off="off",i.OnCode="onCode",i.On="on"})(oL||(oL={}));var aL;(function(i){i[i.Invoke=1]="Invoke",i[i.TriggerCharacter=2]="TriggerCharacter",i[i.ContentChange=3]="ContentChange"})(aL||(aL={}));var lL;(function(i){i[i.File=0]="File",i[i.Module=1]="Module",i[i.Namespace=2]="Namespace",i[i.Package=3]="Package",i[i.Class=4]="Class",i[i.Method=5]="Method",i[i.Property=6]="Property",i[i.Field=7]="Field",i[i.Constructor=8]="Constructor",i[i.Enum=9]="Enum",i[i.Interface=10]="Interface",i[i.Function=11]="Function",i[i.Variable=12]="Variable",i[i.Constant=13]="Constant",i[i.String=14]="String",i[i.Number=15]="Number",i[i.Boolean=16]="Boolean",i[i.Array=17]="Array",i[i.Object=18]="Object",i[i.Key=19]="Key",i[i.Null=20]="Null",i[i.EnumMember=21]="EnumMember",i[i.Struct=22]="Struct",i[i.Event=23]="Event",i[i.Operator=24]="Operator",i[i.TypeParameter=25]="TypeParameter"})(lL||(lL={}));var cL;(function(i){i[i.Deprecated=1]="Deprecated"})(cL||(cL={}));var hL;(function(i){i[i.Hidden=0]="Hidden",i[i.Blink=1]="Blink",i[i.Smooth=2]="Smooth",i[i.Phase=3]="Phase",i[i.Expand=4]="Expand",i[i.Solid=5]="Solid"})(hL||(hL={}));var uL;(function(i){i[i.Line=1]="Line",i[i.Block=2]="Block",i[i.Underline=3]="Underline",i[i.LineThin=4]="LineThin",i[i.BlockOutline=5]="BlockOutline",i[i.UnderlineThin=6]="UnderlineThin"})(uL||(uL={}));var dL;(function(i){i[i.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",i[i.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",i[i.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",i[i.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(dL||(dL={}));var fL;(function(i){i[i.None=0]="None",i[i.Same=1]="Same",i[i.Indent=2]="Indent",i[i.DeepIndent=3]="DeepIndent"})(fL||(fL={}));class UH{static{this.CtrlCmd=Ne.CtrlCmd}static{this.Shift=Ne.Shift}static{this.Alt=Ne.Alt}static{this.WinCtrl=Ne.WinCtrl}static chord(e,t){return PT(e,t)}}function HH(){return{editor:void 0,languages:void 0,CancellationTokenSource:_r,Emitter:A,KeyCode:Tw,KeyMod:UH,Position:pe,Range:H,Selection:tn,SelectionDirection:Rw,MarkerSeverity:Aw,MarkerTag:Nw,Uri:Y,Token:kN}}const Mw=60,Ow=Mw*60,lf=Ow*24,gL=lf*7,pL=lf*30,mL=lf*365;function VH(i,e,t,n){typeof i!="number"&&(i=i.getTime());const s=Math.round((new Date().getTime()-i)/1e3);if(s<-30)return d(44,"in {0}",VH(new Date().getTime()+s*1e3,!1));if(s<30)return d(45,"now");let r;return s<Mw?(r=s,e?r===1?t?d(46,"{0} second ago",r):d(47,"{0} sec ago",r):t?d(48,"{0} seconds ago",r):d(49,"{0} secs ago",r):r===1?t?d(50,"{0} second",r):d(51,"{0} sec",r):t?d(52,"{0} seconds",r):d(53,"{0} secs",r)):s<Ow?(r=Math.floor(s/Mw),e?r===1?t?d(54,"{0} minute ago",r):d(55,"{0} min ago",r):t?d(56,"{0} minutes ago",r):d(57,"{0} mins ago",r):r===1?t?d(58,"{0} minute",r):d(59,"{0} min",r):t?d(60,"{0} minutes",r):d(61,"{0} mins",r)):s<lf?(r=Math.floor(s/Ow),e?r===1?t?d(62,"{0} hour ago",r):d(63,"{0} hr ago",r):t?d(64,"{0} hours ago",r):d(65,"{0} hrs ago",r):r===1?t?d(66,"{0} hour",r):d(67,"{0} hr",r):t?d(68,"{0} hours",r):d(69,"{0} hrs",r)):s<gL?(r=Math.floor(s/lf),e?r===1?d(70,"{0} day ago",r):d(71,"{0} days ago",r):r===1?d(72,"{0} day",r):d(73,"{0} days",r)):s<pL?(r=Math.floor(s/gL),e?r===1?t?d(74,"{0} week ago",r):d(75,"{0} wk ago",r):t?d(76,"{0} weeks ago",r):d(77,"{0} wks ago",r):r===1?t?d(78,"{0} week",r):d(79,"{0} wk",r):t?d(80,"{0} weeks",r):d(81,"{0} wks",r)):s<mL?(r=Math.floor(s/pL),e?r===1?t?d(82,"{0} month ago",r):d(83,"{0} mo ago",r):t?d(84,"{0} months ago",r):d(85,"{0} mos ago",r):r===1?t?d(86,"{0} month",r):d(87,"{0} mo",r):t?d(88,"{0} months",r):d(89,"{0} mos",r)):(r=Math.floor(s/mL),e?r===1?t?d(90,"{0} year ago",r):d(91,"{0} yr ago",r):t?d(92,"{0} years ago",r):d(93,"{0} yrs ago",r):r===1?t?d(94,"{0} year",r):d(95,"{0} yr",r):t?d(96,"{0} years",r):d(97,"{0} yrs",r))}function zH(i){return i.getFullYear()+"-"+String(i.getMonth()+1).padStart(2,"0")+"-"+String(i.getDate()).padStart(2,"0")+"T"+String(i.getHours()).padStart(2,"0")+":"+String(i.getMinutes()).padStart(2,"0")+":"+String(i.getSeconds()).padStart(2,"0")+"."+(i.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}const ib={DateTimeFormat(i,e){return new Fi(()=>{try{return new Intl.DateTimeFormat(i,e)}catch{return new Intl.DateTimeFormat(void 0,e)}})},Collator(i,e){return new Fi(()=>{try{return new Intl.Collator(i,e)}catch{return new Intl.Collator(void 0,e)}})},Segmenter(i,e){return new Fi(()=>{try{return new Intl.Segmenter(i,e)}catch{return new Intl.Segmenter(void 0,e)}})},Locale(i,e){return new Fi(()=>{try{return new Intl.Locale(i,e)}catch{return new Intl.Locale(Fl,e)}})},NumberFormat(i,e){return new Fi(()=>{try{return new Intl.NumberFormat(i,e)}catch{return new Intl.NumberFormat(void 0,e)}})}};var qr;(function(i){i[i.Regular=0]="Regular",i[i.Whitespace=1]="Whitespace",i[i.WordSeparator=2]="WordSeparator"})(qr||(qr={}));class $H extends Qf{constructor(e,t){super(qr.Regular),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=ib.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let n=0,s=e.length;n<s;n++)this.set(e.charCodeAt(n),qr.WordSeparator);this.set(k.Space,qr.Whitespace),this.set(k.Tab,qr.Whitespace)}findPrevIntlWordBeforeOrAtOffset(e,t){let n=null;for(const s of this._getIntlSegmenterWordsOnLine(e)){if(s.index>t)break;n=s}return n}findNextIntlWordAtOrAfterOffset(e,t){for(const n of this._getIntlSegmenterWordsOnLine(e))if(!(n.index<t))return n;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?this._cachedLine===e?this._cachedSegments:(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.value.segment(e)),this._cachedSegments):[]}_filterWordSegments(e){const t=[];for(const n of e)this._isWordLike(n)&&t.push(n);return t}_isWordLike(e){return!!e.isWordLike}}const bL=new v1(10);function qH(i,e){const t=`${i}/${e.join(",")}`;let n=bL.get(t);return n||(n=new $H(i,e),bL.set(t,n)),n}const KH=999;class jc{constructor(e,t,n,s){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=s}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=p4(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=EI(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new vO(t,this.wordSeparators?qH(this.wordSeparators,[]):null,n?this.searchString:null)}}function p4(i){if(!i||i.length===0)return!1;for(let e=0,t=i.length;e<t;e++){const n=i.charCodeAt(e);if(n===k.LineFeed)return!0;if(n===k.Backslash){if(e++,e>=t)break;const s=i.charCodeAt(e);if(s===k.n||s===k.r||s===k.W)return!0}}return!1}function Il(i,e,t){if(!t)return new im(i,null);const n=[];for(let s=0,r=e.length;s<r;s++)n[s]=e[s];return new im(i,n)}class _L{constructor(e){const t=[];let n=0;for(let s=0,r=e.length;s<r;s++)e.charCodeAt(s)===k.LineFeed&&(t[n++]=s);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){const t=this._lineFeedsOffsets;let n=0,s=t.length-1;if(s===-1||e<=t[0])return 0;for(;n<s;){const r=n+((s-n)/2>>0);t[r]>=e?s=r-1:t[r+1]>=e?(n=r,s=r):n=r+1}return n+1}}class Hg{static findMatches(e,t,n,s,r){const o=t.parseSearchRequest();return o?o.regex.multiline?this._doFindMatchesMultiline(e,n,new bh(o.wordSeparators,o.regex),s,r):this._doFindMatchesLineByLine(e,n,o,s,r):[]}static _getMultilineMatchRange(e,t,n,s,r,o){let a,l=0;s?(l=s.findLineFeedCountBeforeOffset(r),a=t+r+l):a=t+r;let c;if(s){const g=s.findLineFeedCountBeforeOffset(r+o.length)-l;c=a+o.length+g}else c=a+o.length;const h=e.getPositionAt(a),u=e.getPositionAt(c);return new H(h.lineNumber,h.column,u.lineNumber,u.column)}static _doFindMatchesMultiline(e,t,n,s,r){const o=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,_n.LF),l=e.getEOL()===`\r
`?new _L(a):null,c=[];let h=0,u;for(n.reset(0);u=n.next(a);)if(c[h++]=Il(this._getMultilineMatchRange(e,o,a,l,u.index,u[0]),u,s),h>=r)return c;return c}static _doFindMatchesLineByLine(e,t,n,s,r){const o=[];let a=0;if(t.startLineNumber===t.endLineNumber){const c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,c,t.startLineNumber,t.startColumn-1,a,o,s,r),o}const l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,o,s,r);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<r;c++)a=this._findMatchesInLine(n,e.getLineContent(c),c,0,a,o,s,r);if(a<r){const c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,c,t.endLineNumber,0,a,o,s,r)}return o}static _findMatchesInLine(e,t,n,s,r,o,a,l){const c=e.wordSeparators;if(!a&&e.simpleSearch){const f=e.simpleSearch,g=f.length,p=t.length;let m=-g;for(;(m=t.indexOf(f,m+g))!==-1;)if((!c||US(c,t,p,m,g))&&(o[r++]=new im(new H(n,m+1+s,n,m+1+g+s),null),r>=l))return r;return r}const h=new bh(e.wordSeparators,e.regex);let u;h.reset(0);do if(u=h.next(t),u&&(o[r++]=Il(new H(n,u.index+1+s,n,u.index+1+u[0].length+s),u,a),r>=l))return r;while(u);return r}static findNextMatch(e,t,n,s){const r=t.parseSearchRequest();if(!r)return null;const o=new bh(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindNextMatchMultiline(e,n,o,s):this._doFindNextMatchLineByLine(e,n,o,s)}static _doFindNextMatchMultiline(e,t,n,s){const r=new pe(t.lineNumber,1),o=e.getOffsetAt(r),a=e.getLineCount(),l=e.getValueInRange(new H(r.lineNumber,r.column,a,e.getLineMaxColumn(a)),_n.LF),c=e.getEOL()===`\r
`?new _L(l):null;n.reset(t.column-1);const h=n.next(l);return h?Il(this._getMultilineMatchRange(e,o,l,c,h.index,h[0]),h,s):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new pe(1,1),n,s):null}static _doFindNextMatchLineByLine(e,t,n,s){const r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o),l=this._findFirstMatchInLine(n,a,o,t.column,s);if(l)return l;for(let c=1;c<=r;c++){const h=(o+c-1)%r,u=e.getLineContent(h+1),f=this._findFirstMatchInLine(n,u,h+1,1,s);if(f)return f}return null}static _findFirstMatchInLine(e,t,n,s,r){e.reset(s-1);const o=e.next(t);return o?Il(new H(n,o.index+1,n,o.index+1+o[0].length),o,r):null}static findPreviousMatch(e,t,n,s){const r=t.parseSearchRequest();if(!r)return null;const o=new bh(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindPreviousMatchMultiline(e,n,o,s):this._doFindPreviousMatchLineByLine(e,n,o,s)}static _doFindPreviousMatchMultiline(e,t,n,s){const r=this._doFindMatchesMultiline(e,new H(1,1,t.lineNumber,t.column),n,s,10*KH);if(r.length>0)return r[r.length-1];const o=e.getLineCount();return t.lineNumber!==o||t.column!==e.getLineMaxColumn(o)?this._doFindPreviousMatchMultiline(e,new pe(o,e.getLineMaxColumn(o)),n,s):null}static _doFindPreviousMatchLineByLine(e,t,n,s){const r=e.getLineCount(),o=t.lineNumber,a=e.getLineContent(o).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,o,s);if(l)return l;for(let c=1;c<=r;c++){const h=(r+o-c-1)%r,u=e.getLineContent(h+1),f=this._findLastMatchInLine(n,u,h+1,s);if(f)return f}return null}static _findLastMatchInLine(e,t,n,s){let r=null,o;for(e.reset(0);o=e.next(t);)r=Il(new H(n,o.index+1,n,o.index+1+o[0].length),o,s);return r}}function GH(i,e,t,n,s){if(n===0)return!0;const r=e.charCodeAt(n-1);if(i.get(r)!==qr.Regular||r===k.CarriageReturn||r===k.LineFeed)return!0;if(s>0){const o=e.charCodeAt(n);if(i.get(o)!==qr.Regular)return!0}return!1}function jH(i,e,t,n,s){if(n+s===t)return!0;const r=e.charCodeAt(n+s);if(i.get(r)!==qr.Regular||r===k.CarriageReturn||r===k.LineFeed)return!0;if(s>0){const o=e.charCodeAt(n+s-1);if(i.get(o)!==qr.Regular)return!0}return!1}function US(i,e,t,n,s){return GH(i,e,t,n,s)&&jH(i,e,t,n,s)}class bh{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;const s=n.index,r=n[0].length;if(s===this._prevMatchStartIndex&&r===this._prevMatchLength){if(r===0){Vp(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=s,this._prevMatchLength=r,!this._wordSeparators||US(this._wordSeparators,e,t,s,r))return n}while(n);return null}}class YH{static computeUnicodeHighlights(e,t,n){const s=n?n.startLineNumber:1,r=n?n.endLineNumber:e.getLineCount(),o=new wL(t),a=o.getCandidateCodePoints();let l;a==="allNonBasicAscii"?l=new RegExp("[^\\t\\n\\r\\x20-\\x7E]","g"):l=new RegExp(`${XH(Array.from(a))}`,"g");const c=new bh(null,l),h=[];let u=!1,f,g=0,p=0,m=0;e:for(let _=s,v=r;_<=v;_++){const y=e.getLineContent(_),E=y.length;c.reset(0);do if(f=c.next(y),f){let N=f.index,I=f.index+f[0].length;if(N>0){const F=y.charCodeAt(N-1);hs(F)&&N--}if(I+1<E){const F=y.charCodeAt(I-1);hs(F)&&I++}const B=y.substring(N,I);let x=Kd(N+1,LT,y,0);x&&x.endColumn<=N+1&&(x=null);const D=o.shouldHighlightNonBasicASCII(B,x?x.word:null);if(D!==mn.None){if(D===mn.Ambiguous?g++:D===mn.Invisible?p++:D===mn.NonBasicASCII?m++:_I(),h.length>=1e3){u=!0;break e}h.push(new H(_,N+1,_,I+1))}}while(f)}return{ranges:h,hasMore:u,ambiguousCharacterCount:g,invisibleCharacterCount:p,nonBasicAsciiCharacterCount:m}}static computeUnicodeHighlightReason(e,t){const n=new wL(t);switch(n.shouldHighlightNonBasicASCII(e,null)){case mn.None:return null;case mn.Invisible:return{kind:yd.Invisible};case mn.Ambiguous:{const r=e.codePointAt(0),o=n.ambiguousCharacters.getPrimaryConfusable(r),a=Ta.getLocales().filter(l=>!Ta.getInstance(new Set([...t.allowedLocales,l])).isAmbiguous(r));return{kind:yd.Ambiguous,confusableWith:String.fromCodePoint(o),notAmbiguousInLocales:a}}case mn.NonBasicASCII:return{kind:yd.NonBasicAscii}}}}function XH(i,e){return`[${Ga(i.map(n=>String.fromCodePoint(n)).join(""))}]`}var yd;(function(i){i[i.Ambiguous=0]="Ambiguous",i[i.Invisible=1]="Invisible",i[i.NonBasicAscii=2]="NonBasicAscii"})(yd||(yd={}));class wL{constructor(e){this.options=e,this.allowedCodePoints=new Set(e.allowedCodePoints),this.ambiguousCharacters=Ta.getInstance(new Set(e.allowedLocales))}getCandidateCodePoints(){if(this.options.nonBasicASCII)return"allNonBasicAscii";const e=new Set;if(this.options.invisibleCharacters)for(const t of Aa.codePoints)vL(String.fromCodePoint(t))||e.add(t);if(this.options.ambiguousCharacters)for(const t of this.ambiguousCharacters.getConfusableCodePoints())e.add(t);for(const t of this.allowedCodePoints)e.delete(t);return e}shouldHighlightNonBasicASCII(e,t){const n=e.codePointAt(0);if(this.allowedCodePoints.has(n))return mn.None;if(this.options.nonBasicASCII)return mn.NonBasicASCII;let s=!1,r=!1;if(t)for(const o of t){const a=o.codePointAt(0),l=TI(o);s=s||l,!l&&!this.ambiguousCharacters.isAmbiguous(a)&&!Aa.isInvisibleCharacter(a)&&(r=!0)}return!s&&r?mn.None:this.options.invisibleCharacters&&!vL(e)&&Aa.isInvisibleCharacter(n)?mn.Invisible:this.options.ambiguousCharacters&&this.ambiguousCharacters.isAmbiguous(n)?mn.Ambiguous:mn.None}}function vL(i){return i===" "||i===`
`||i==="	"}var mn;(function(i){i[i.None=0]="None",i[i.NonBasicASCII=1]="NonBasicASCII",i[i.Invisible=2]="Invisible",i[i.Ambiguous=3]="Ambiguous"})(mn||(mn={}));class Ep{constructor(e,t,n){this.changes=e,this.moves=t,this.hitTimeout=n}}class nb{constructor(e,t){this.lineRangeMapping=e,this.changes=t}flip(){return new nb(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}}class Se{static ofLength(e,t){return new Se(e,e+t)}static fromRange(e){return new Se(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new Se(e.startLineNumber,e.endLineNumber+1)}static{this.compareByStart=zl(e=>e.startLineNumber,$l)}static subtract(e,t){return t?e.startLineNumber<t.startLineNumber&&t.endLineNumberExclusive<e.endLineNumberExclusive?[new Se(e.startLineNumber,t.startLineNumber),new Se(t.endLineNumberExclusive,e.endLineNumberExclusive)]:t.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=t.endLineNumberExclusive?[]:t.endLineNumberExclusive<e.endLineNumberExclusive?[new Se(Math.max(t.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new Se(e.startLineNumber,Math.min(t.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let t=new Vr(e[0].slice());for(let n=1;n<e.length;n++)t=t.getUnion(new Vr(e[n].slice()));return t.ranges}static join(e){if(e.length===0)throw new De("lineRanges cannot be empty");let t=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let s=1;s<e.length;s++)t=Math.min(t,e[s].startLineNumber),n=Math.max(n,e[s].endLineNumberExclusive);return new Se(t,n)}static deserialize(e){return new Se(e[0],e[1])}constructor(e,t){if(e>t)throw new De(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}containsRange(e){return this.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new Se(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new Se(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new Se(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){const t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=n)return new Se(t,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}intersectsOrTouches(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new H(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new H(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){const t=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)t.push(e(n));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}toOffsetRange(){return new me(this.startLineNumber-1,this.endLineNumberExclusive-1)}distanceToRange(e){return this.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-this.endLineNumberExclusive:e.endLineNumberExclusive<=this.startLineNumber?this.startLineNumber-e.endLineNumberExclusive:0}distanceToLine(e){return this.contains(e)?0:e<this.startLineNumber?this.startLineNumber-e:e-this.endLineNumberExclusive}addMargin(e,t){return new Se(this.startLineNumber-e,this.endLineNumberExclusive+t)}}class Vr{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;const t=K_(this._normalizedRanges,s=>s.endLineNumberExclusive>=e.startLineNumber),n=Bh(this._normalizedRanges,s=>s.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)this._normalizedRanges.splice(t,0,e);else if(t===n-1){const s=this._normalizedRanges[t];this._normalizedRanges[t]=s.join(e)}else{const s=this._normalizedRanges[t].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(t,n-t,s)}}contains(e){const t=Ph(this._normalizedRanges,n=>n.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){const t=Ph(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;const t=[];let n=0,s=0,r=null;for(;n<this._normalizedRanges.length||s<e._normalizedRanges.length;){let o=null;if(n<this._normalizedRanges.length&&s<e._normalizedRanges.length){const a=this._normalizedRanges[n],l=e._normalizedRanges[s];a.startLineNumber<l.startLineNumber?(o=a,n++):(o=l,s++)}else n<this._normalizedRanges.length?(o=this._normalizedRanges[n],n++):(o=e._normalizedRanges[s],s++);r===null?r=o:r.endLineNumberExclusive>=o.startLineNumber?r=new Se(r.startLineNumber,Math.max(r.endLineNumberExclusive,o.endLineNumberExclusive)):(t.push(r),r=o)}return r!==null&&t.push(r),new Vr(t)}subtractFrom(e){const t=K_(this._normalizedRanges,o=>o.endLineNumberExclusive>=e.startLineNumber),n=Bh(this._normalizedRanges,o=>o.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)return new Vr([e]);const s=[];let r=e.startLineNumber;for(let o=t;o<n;o++){const a=this._normalizedRanges[o];a.startLineNumber>r&&s.push(new Se(r,a.startLineNumber)),r=a.endLineNumberExclusive}return r<e.endLineNumberExclusive&&s.push(new Se(r,e.endLineNumberExclusive)),new Vr(s)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){const t=[];let n=0,s=0;for(;n<this._normalizedRanges.length&&s<e._normalizedRanges.length;){const r=this._normalizedRanges[n],o=e._normalizedRanges[s],a=r.intersect(o);a&&!a.isEmpty&&t.push(a),r.endLineNumberExclusive<o.endLineNumberExclusive?n++:s++}return new Vr(t)}getWithDelta(e){return new Vr(this._normalizedRanges.map(t=>t.delta(e)))}}class pi{static{this.zero=new pi(0,0)}static lengthDiffNonNegative(e,t){return t.isLessThan(e)?pi.zero:e.lineCount===t.lineCount?new pi(0,t.columnCount-e.columnCount):new pi(t.lineCount-e.lineCount,t.columnCount)}static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new pi(0,t.column-e.column):new pi(t.lineNumber-e.lineNumber,t.column-1)}static fromPosition(e){return new pi(e.lineNumber-1,e.column-1)}static ofRange(e){return pi.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,n=0;for(const s of e)s===`
`?(t++,n=0):n++;return new pi(t,n)}constructor(e,t){this.lineCount=e,this.columnCount=t}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new pi(this.lineCount,this.columnCount+e.columnCount):new pi(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new H(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new H(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new H(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return Se.ofLength(1,this.lineCount+1)}addToPosition(e){return this.lineCount===0?new pe(e.lineNumber,e.column+this.columnCount):new pe(e.lineNumber+this.lineCount,this.columnCount+1)}addToRange(e){return H.fromPositions(this.addToPosition(e.getStartPosition()),this.addToPosition(e.getEndPosition()))}toString(){return`${this.lineCount},${this.columnCount}`}}class m4{constructor(e){this.replacements=e;let t=-1;for(const n of e){if(!(n.replaceRange.start>=t))throw new De(`Edits must be disjoint and sorted. Found ${n} after ${t}`);t=n.replaceRange.endExclusive}}equals(e){if(this.replacements.length!==e.replacements.length)return!1;for(let t=0;t<this.replacements.length;t++)if(!this.replacements[t].equals(e.replacements[t]))return!1;return!0}toString(){return`[${this.replacements.map(t=>t.toString()).join(", ")}]`}normalize(){const e=[];let t;for(const n of this.replacements)if(!(n.getNewLength()===0&&n.replaceRange.length===0)){if(t&&t.replaceRange.endExclusive===n.replaceRange.start){const s=t.tryJoinTouching(n);if(s){t=s;continue}}t&&e.push(t),t=n}return t&&e.push(t),this._createNew(e)}compose(e){const t=this.normalize(),n=e.normalize();if(t.isEmpty())return n;if(n.isEmpty())return t;const s=[...t.replacements],r=[];let o=0;for(const a of n.replacements){for(;;){const u=s[0];if(!u||u.replaceRange.start+o+u.getNewLength()>=a.replaceRange.start)break;s.shift(),r.push(u),o+=u.getNewLength()-u.replaceRange.length}const l=o;let c,h;for(;;){const u=s[0];if(!u||u.replaceRange.start+o>a.replaceRange.endExclusive)break;c||(c=u),h=u,s.shift(),o+=u.getNewLength()-u.replaceRange.length}if(!c)r.push(a.delta(-o));else{const u=Math.min(c.replaceRange.start,a.replaceRange.start-l),f=a.replaceRange.start-(c.replaceRange.start+l);if(f>0){const _=c.slice(me.emptyAt(u),new me(0,f));r.push(_)}if(!h)throw new De("Invariant violation: lastIntersecting is undefined");const g=h.replaceRange.endExclusive+o-a.replaceRange.endExclusive;if(g>0){const _=h.slice(me.ofStartAndLength(h.replaceRange.endExclusive,0),new me(h.getNewLength()-g,h.getNewLength()));s.unshift(_),o-=_.getNewLength()-_.replaceRange.length}const p=new me(u,a.replaceRange.endExclusive-o),m=a.slice(p,new me(0,a.getNewLength()));r.push(m)}}for(;;){const a=s.shift();if(!a)break;r.push(a)}return this._createNew(r).normalize()}getNewRanges(){const e=[];let t=0;for(const n of this.replacements)e.push(me.ofStartAndLength(n.replaceRange.start+t,n.getNewLength())),t+=n.getLengthDelta();return e}getJoinedReplaceRange(){if(this.replacements.length!==0)return this.replacements[0].replaceRange.join(this.replacements.at(-1).replaceRange)}isEmpty(){return this.replacements.length===0}getLengthDelta(){return WR(this.replacements,e=>e.getLengthDelta())}getNewDataLength(e){return e+this.getLengthDelta()}applyToOffset(e){let t=0;for(const n of this.replacements)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+t;t+=n.getNewLength()-n.replaceRange.length}else break;return e+t}applyToOffsetRange(e){return new me(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyInverseToOffset(e){let t=0;for(const n of this.replacements){const s=n.getNewLength();if(n.replaceRange.start<=e-t){if(e-t<n.replaceRange.start+s)return n.replaceRange.start;t+=s-n.replaceRange.length}else break}return e-t}}class QH{constructor(e){this.replaceRange=e}delta(e){return this.slice(this.replaceRange.delta(e),new me(0,this.getNewLength()))}getLengthDelta(){return this.getNewLength()-this.replaceRange.length}toString(){return`{ ${this.replaceRange.toString()} -> ${this.getNewLength()} }`}get isEmpty(){return this.getNewLength()===0&&this.replaceRange.length===0}getRangeAfterReplace(){return new me(this.replaceRange.start,this.replaceRange.start+this.getNewLength())}}class Qu extends m4{static{this.empty=new Qu([])}static create(e){return new Qu(e)}static single(e){return new Qu([e])}_createNew(e){return new Qu(e)}}class Un extends m4{static{this.empty=new Un([])}static create(e){return new Un(e)}static single(e){return new Un([e])}static replace(e,t){return new Un([new Tn(e,t)])}static insert(e,t){return new Un([new Tn(me.emptyAt(e),t)])}static delete(e){return new Un([new Tn(e,"")])}static fromJson(e){return new Un(e.map(Tn.fromJson))}static compose(e){if(e.length===0)return Un.empty;let t=e[0];for(let n=1;n<e.length;n++)t=t.compose(e[n]);return t}constructor(e){super(e)}_createNew(e){return new Un(e)}apply(e){const t=[];let n=0;for(const s of this.replacements)t.push(e.substring(n,s.replaceRange.start)),t.push(s.newText),n=s.replaceRange.endExclusive;return t.push(e.substring(n)),t.join("")}inverse(e){const t=[];let n=0;for(const s of this.replacements)t.push(new Tn(me.ofStartAndLength(s.replaceRange.start+n,s.newText.length),e.substring(s.replaceRange.start,s.replaceRange.endExclusive))),n+=s.newText.length-s.replaceRange.length;return new Un(t)}tryRebase(e,t){const n=[];let s=0,r=0,o=0;for(;r<this.replacements.length||s<e.replacements.length;){const a=e.replacements[s],l=this.replacements[r];if(l)if(!a)n.push(new Tn(l.replaceRange.delta(o),l.newText)),r++;else if(l.replaceRange.intersectsOrTouches(a.replaceRange)){if(r++,t)return}else l.replaceRange.start<a.replaceRange.start?(n.push(new Tn(l.replaceRange.delta(o),l.newText)),r++):(s++,o+=a.newText.length-a.replaceRange.length);else break}return new Un(n)}toJson(){return this.replacements.map(e=>({txt:e.newText,pos:e.replaceRange.start,len:e.replaceRange.length}))}isNeutralOn(e){return this.replacements.every(t=>t.isNeutralOn(e))}removeCommonSuffixPrefix(e){const t=[];for(const n of this.replacements){const s=n.removeCommonSuffixPrefix(e);s.isEmpty||t.push(s)}return new Un(t)}}class Tn extends QH{static insert(e,t){return new Tn(me.emptyAt(e),t)}static replace(e,t){return new Tn(e,t)}static fromJson(e){return new Tn(me.ofStartAndLength(e.pos,e.len),e.txt)}constructor(e,t){super(e),this.newText=t}equals(e){return this.replaceRange.equals(e.replaceRange)&&this.newText===e.newText}getNewLength(){return this.newText.length}tryJoinTouching(e){return new Tn(this.replaceRange.joinRightTouching(e.replaceRange),this.newText+e.newText)}slice(e,t){return new Tn(e,t.substring(this.newText))}toString(){return`${this.replaceRange} -> "${this.newText}"`}replace(e){return e.substring(0,this.replaceRange.start)+this.newText+e.substring(this.replaceRange.endExclusive)}isNeutralOn(e){return this.newText===e.substring(this.replaceRange.start,this.replaceRange.endExclusive)}removeCommonSuffixPrefix(e){const t=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),n=s0(t,this.newText),s=Math.min(t.length-n,this.newText.length-n,DI(t,this.newText)),r=new me(this.replaceRange.start+n,this.replaceRange.endExclusive-s),o=this.newText.substring(n,this.newText.length-s);return new Tn(r,o)}}function ine(i,e){i=i.slice();const t=[];let n=0;for(const s of e.replacements){for(;;){const o=i[0];if(!o||o.endExclusive>=s.replaceRange.start)break;i.shift(),t.push(o.delta(n))}const r=[];for(;;){const o=i[0];if(!o||!o.intersectsOrTouches(s.replaceRange))break;i.shift(),r.push(o)}for(let o=r.length-1;o>=0;o--){let a=r[o];const l=a.intersect(s.replaceRange).length;a=a.deltaEnd(-l+(o===0?s.newText.length:0));const c=a.start-s.replaceRange.start;c>0&&(a=a.delta(-c)),o!==0&&(a=a.delta(s.newText.length)),a=a.delta(-(s.newText.length-s.replaceRange.length)),i.unshift(a)}n+=s.newText.length-s.replaceRange.length}for(;;){const s=i[0];if(!s)break;i.shift(),t.push(s.delta(n))}return t}class ZH{getOffsetRange(e){return new me(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getRange(e){return H.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getStringEdit(e){const t=e.replacements.map(n=>this.getStringReplacement(n));return new Un(t)}getStringReplacement(e){return new Tn(this.getOffsetRange(e.range),e.text)}getSingleTextEdit(e){return new us(this.getRange(e.replaceRange),e.newText)}getTextEdit(e){const t=e.replacements.map(n=>this.getSingleTextEdit(n));return new Ea(t)}}class b4 extends ZH{constructor(e){super(),this.text=e,this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&(this.lineStartOffsetByLineIdx.push(t+1),t>0&&e.charAt(t-1)==="\r"?this.lineEndOffsetByLineIdx.push(t-1):this.lineEndOffsetByLineIdx.push(t));this.lineEndOffsetByLineIdx.push(e.length)}getOffset(e){const t=this._validatePosition(e);return this.lineStartOffsetByLineIdx[t.lineNumber-1]+t.column-1}_validatePosition(e){if(e.lineNumber<1)return new pe(1,1);const t=this.textLength.lineCount+1;if(e.lineNumber>t){const s=this.getLineLength(t);return new pe(t,s+1)}if(e.column<1)return new pe(e.lineNumber,1);const n=this.getLineLength(e.lineNumber);return e.column-1>n?new pe(e.lineNumber,n+1):e}getPosition(e){const t=Bh(this.lineStartOffsetByLineIdx,r=>r<=e),n=t+1,s=e-this.lineStartOffsetByLineIdx[t]+1;return new pe(n,s)}getTextLength(e){return pi.ofRange(this.getRange(e))}get textLength(){const e=this.lineStartOffsetByLineIdx.length-1;return new pi(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}}class _4{constructor(){this._transformer=void 0}get endPositionExclusive(){return this.length.addToPosition(new pe(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getLineLength(e){return this.getValueOfRange(new H(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new b4(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new H(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){const e=this.getValue();return S1(e)}}class JH extends _4{constructor(e,t){Bp(t>=1),super(),this._getLineContent=e,this._lineCount=t}getValueOfRange(e){if(e.startLineNumber===e.endLineNumber)return this._getLineContent(e.startLineNumber).substring(e.startColumn-1,e.endColumn-1);let t=this._getLineContent(e.startLineNumber).substring(e.startColumn-1);for(let n=e.startLineNumber+1;n<e.endLineNumber;n++)t+=`
`+this._getLineContent(n);return t+=`
`+this._getLineContent(e.endLineNumber).substring(0,e.endColumn-1),t}getLineLength(e){return this._getLineContent(e).length}get length(){const e=this._getLineContent(this._lineCount);return new pi(this._lineCount-1,e.length)}}class Vg extends JH{constructor(e){super(t=>e[t-1],e.length)}}class yL extends _4{constructor(e){super(),this.value=e,this._t=new b4(this.value)}getValueOfRange(e){return this._t.getOffsetRange(e).substring(this.value)}get length(){return this._t.textLength}}class Ea{static fromStringEdit(e,t){const n=e.replacements.map(s=>new us(t.getTransformer().getRange(s.replaceRange),s.newText));return new Ea(n)}static replace(e,t){return new Ea([new us(e,t)])}static insert(e,t){return new Ea([new us(H.fromPositions(e,e),t)])}constructor(e){this.replacements=e,tc(()=>uy(e,(t,n)=>t.range.getEndPosition().isBeforeOrEqual(n.range.getStartPosition())))}normalize(){const e=[];for(const t of this.replacements)if(e.length>0&&e[e.length-1].range.getEndPosition().equals(t.range.getStartPosition())){const n=e[e.length-1];e[e.length-1]=new us(n.range.plusRange(t.range),n.text+t.text)}else t.isEmpty||e.push(t);return new Ea(e)}mapPosition(e){let t=0,n=0,s=0;for(const r of this.replacements){const o=r.range.getStartPosition();if(e.isBeforeOrEqual(o))break;const a=r.range.getEndPosition(),l=pi.ofText(r.text);if(e.isBefore(a)){const c=new pe(o.lineNumber+t,o.column+(o.lineNumber+t===n?s:0)),h=l.addToPosition(c);return zg(c,h)}o.lineNumber+t!==n&&(s=0),t+=l.lineCount-(r.range.endLineNumber-r.range.startLineNumber),l.lineCount===0?a.lineNumber!==o.lineNumber?s+=l.columnCount-(a.column-1):s+=l.columnCount-(a.column-o.column):s=l.columnCount,n=a.lineNumber+t}return new pe(e.lineNumber+t,e.column+(e.lineNumber+t===n?s:0))}mapRange(e){function t(o){return o instanceof pe?o:o.getStartPosition()}function n(o){return o instanceof pe?o:o.getEndPosition()}const s=t(this.mapPosition(e.getStartPosition())),r=n(this.mapPosition(e.getEndPosition()));return zg(s,r)}inverseMapPosition(e,t){return this.inverse(t).mapPosition(e)}inverseMapRange(e,t){return this.inverse(t).mapRange(e)}apply(e){let t="",n=new pe(1,1);for(const r of this.replacements){const o=r.range,a=o.getStartPosition(),l=o.getEndPosition(),c=zg(n,a);c.isEmpty()||(t+=e.getValueOfRange(c)),t+=r.text,n=l}const s=zg(n,e.endPositionExclusive);return s.isEmpty()||(t+=e.getValueOfRange(s)),t}applyToString(e){const t=new yL(e);return this.apply(t)}inverse(e){const t=this.getNewRanges();return new Ea(this.replacements.map((n,s)=>new us(t[s],e.getValueOfRange(n.range))))}getNewRanges(){const e=[];let t=0,n=0,s=0;for(const r of this.replacements){const o=pi.ofText(r.text),a=pe.lift({lineNumber:r.range.startLineNumber+n,column:r.range.startColumn+(r.range.startLineNumber===t?s:0)}),l=o.createRange(a);e.push(l),n=l.endLineNumber-r.range.endLineNumber,s=l.endColumn-r.range.endColumn,t=r.range.endLineNumber}return e}toReplacement(e){if(this.replacements.length===0)throw new De;if(this.replacements.length===1)return this.replacements[0];const t=this.replacements[0].range.getStartPosition(),n=this.replacements[this.replacements.length-1].range.getEndPosition();let s="";for(let r=0;r<this.replacements.length;r++){const o=this.replacements[r];if(s+=o.text,r<this.replacements.length-1){const a=this.replacements[r+1],l=H.fromPositions(o.range.getEndPosition(),a.range.getStartPosition()),c=e.getValueOfRange(l);s+=c}}return new us(H.fromPositions(t,n),s)}equals(e){return wi(this.replacements,e.replacements,(t,n)=>t.equals(n))}toString(e){return e===void 0?this.replacements.map(t=>t.toString()).join(`
`):typeof e=="string"?this.toString(new yL(e)):this.replacements.length===0?"":this.replacements.map(t=>{const s=e.getValueOfRange(t.range),r=H.fromPositions(new pe(Math.max(1,t.range.startLineNumber-1),1),t.range.getStartPosition());let o=e.getValueOfRange(r);o.length>10&&(o="..."+o.substring(o.length-10));const a=H.fromPositions(t.range.getEndPosition(),new pe(t.range.endLineNumber+1,1));let l=e.getValueOfRange(a);l.length>10&&(l=l.substring(0,10)+"...");let c=s;if(c.length>10){const u=Math.floor(5);c=c.substring(0,u)+"..."+c.substring(c.length-u)}let h=t.text;if(h.length>10){const u=Math.floor(5);h=h.substring(0,u)+"..."+h.substring(h.length-u)}return c.length===0?`${o}❰${h}❱${l}`:`${o}❰${c}↦${h}❱${l}`}).join(`
`)}}class us{static joinReplacements(e,t){if(e.length===0)throw new De;if(e.length===1)return e[0];const n=e[0].range.getStartPosition(),s=e[e.length-1].range.getEndPosition();let r="";for(let o=0;o<e.length;o++){const a=e[o];if(r+=a.text,o<e.length-1){const l=e[o+1],c=H.fromPositions(a.range.getEndPosition(),l.range.getStartPosition()),h=t.getValueOfRange(c);r+=h}}return new us(H.fromPositions(n,s),r)}constructor(e,t){this.range=e,this.text=t}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,t){return e.range.equalsRange(t.range)&&e.text===t.text}toSingleEditOperation(){return{range:this.range,text:this.text}}toEdit(){return new Ea([this])}equals(e){return us.equals(this,e)}extendToCoverRange(e,t){if(this.range.containsRange(e))return this;const n=this.range.plusRange(e),s=t.getValueOfRange(H.fromPositions(n.getStartPosition(),this.range.getStartPosition())),r=t.getValueOfRange(H.fromPositions(this.range.getEndPosition(),n.getEndPosition())),o=s+this.text+r;return new us(n,o)}extendToFullLine(e){const t=new H(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(t,e)}removeCommonPrefix(e){const t=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),n=this.text.replaceAll(`\r
`,`
`),s=s0(t,n),r=pi.ofText(t.substring(0,s)).addToPosition(this.range.getStartPosition()),o=n.substring(s),a=H.fromPositions(r,this.range.getEndPosition());return new us(a,o)}isEffectiveDeletion(e){let t=this.text.replaceAll(`\r
`,`
`),n=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`);const s=s0(t,n);t=t.substring(s),n=n.substring(s);const r=DI(t,n);return t=t.substring(0,t.length-r),n=n.substring(0,n.length-r),t===""}}function zg(i,e){if(i.lineNumber===e.lineNumber&&i.column===Number.MAX_SAFE_INTEGER)return H.fromPositions(e,e);if(!i.isBeforeOrEqual(e))throw new De("start must be before end");return new H(i.lineNumber,i.column,e.lineNumber,e.column)}class gs{static inverse(e,t,n){const s=[];let r=1,o=1;for(const l of e){const c=new gs(new Se(r,l.original.startLineNumber),new Se(o,l.modified.startLineNumber));c.modified.isEmpty||s.push(c),r=l.original.endLineNumberExclusive,o=l.modified.endLineNumberExclusive}const a=new gs(new Se(r,t+1),new Se(o,n+1));return a.modified.isEmpty||s.push(a),s}static clip(e,t,n){const s=[];for(const r of e){const o=r.original.intersect(t),a=r.modified.intersect(n);o&&!o.isEmpty&&a&&!a.isEmpty&&s.push(new gs(o,a))}return s}constructor(e,t){this.original=e,this.modified=t}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new gs(this.modified,this.original)}join(e){return new gs(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}toRangeMapping(){const e=this.original.toInclusiveRange(),t=this.modified.toInclusiveRange();if(e&&t)return new yn(e,t);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new De("not a valid diff");return new yn(new H(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new H(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new yn(new H(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new H(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,t){if(SL(this.original.endLineNumberExclusive,e)&&SL(this.modified.endLineNumberExclusive,t))return new yn(new H(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new H(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new yn(H.fromPositions(new pe(this.original.startLineNumber,1),Yc(new pe(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),H.fromPositions(new pe(this.modified.startLineNumber,1),Yc(new pe(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new yn(H.fromPositions(Yc(new pe(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),Yc(new pe(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),H.fromPositions(Yc(new pe(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),t),Yc(new pe(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));throw new De}}function Yc(i,e){if(i.lineNumber<1)return new pe(1,1);if(i.lineNumber>e.length)return new pe(e.length,e[e.length-1].length+1);const t=e[i.lineNumber-1];return i.column>t.length+1?new pe(i.lineNumber,t.length+1):i}function SL(i,e){return i>=1&&i<=e.length}class Xr extends gs{static fromRangeMappings(e){const t=Se.join(e.map(s=>Se.fromRangeInclusive(s.originalRange))),n=Se.join(e.map(s=>Se.fromRangeInclusive(s.modifiedRange)));return new Xr(t,n,e)}constructor(e,t,n){super(e,t),this.innerChanges=n}flip(){return new Xr(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new Xr(this.original,this.modified,[this.toRangeMapping()])}}class yn{static fromEdit(e){const t=e.getNewRanges();return e.replacements.map((s,r)=>new yn(s.range,t[r]))}static fromEditJoin(e){const t=e.getNewRanges(),n=e.replacements.map((s,r)=>new yn(s.range,t[r]));return yn.join(n)}static join(e){if(e.length===0)throw new De("Cannot join an empty list of range mappings");let t=e[0];for(let n=1;n<e.length;n++)t=t.join(e[n]);return t}static assertSorted(e){for(let t=1;t<e.length;t++){const n=e[t-1],s=e[t];if(!(n.originalRange.getEndPosition().isBeforeOrEqual(s.originalRange.getStartPosition())&&n.modifiedRange.getEndPosition().isBeforeOrEqual(s.modifiedRange.getStartPosition())))throw new De("Range mappings must be sorted")}}constructor(e,t){this.originalRange=e,this.modifiedRange=t}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new yn(this.modifiedRange,this.originalRange)}toTextEdit(e){const t=e.getValueOfRange(this.modifiedRange);return new us(this.originalRange,t)}join(e){return new yn(this.originalRange.plusRange(e.originalRange),this.modifiedRange.plusRange(e.modifiedRange))}}function kL(i,e,t,n=!1){const s=[];for(const r of TR(i.map(o=>eV(o,e,t)),(o,a)=>o.original.intersectsOrTouches(a.original)||o.modified.intersectsOrTouches(a.modified))){const o=r[0],a=r[r.length-1];s.push(new Xr(o.original.join(a.original),o.modified.join(a.modified),r.map(l=>l.innerChanges[0])))}return tc(()=>!n&&s.length>0&&(s[0].modified.startLineNumber!==s[0].original.startLineNumber||t.length.lineCount-s[s.length-1].modified.endLineNumberExclusive!==e.length.lineCount-s[s.length-1].original.endLineNumberExclusive)?!1:uy(s,(r,o)=>o.original.startLineNumber-r.original.endLineNumberExclusive===o.modified.startLineNumber-r.modified.endLineNumberExclusive&&r.original.endLineNumberExclusive<o.original.startLineNumber&&r.modified.endLineNumberExclusive<o.modified.startLineNumber)),s}function eV(i,e,t){let n=0,s=0;i.modifiedRange.endColumn===1&&i.originalRange.endColumn===1&&i.originalRange.startLineNumber+n<=i.originalRange.endLineNumber&&i.modifiedRange.startLineNumber+n<=i.modifiedRange.endLineNumber&&(s=-1),i.modifiedRange.startColumn-1>=t.getLineLength(i.modifiedRange.startLineNumber)&&i.originalRange.startColumn-1>=e.getLineLength(i.originalRange.startLineNumber)&&i.originalRange.startLineNumber<=i.originalRange.endLineNumber+s&&i.modifiedRange.startLineNumber<=i.modifiedRange.endLineNumber+s&&(n=1);const r=new Se(i.originalRange.startLineNumber+n,i.originalRange.endLineNumber+1+s),o=new Se(i.modifiedRange.startLineNumber+n,i.modifiedRange.endLineNumber+1+s);return new Xr(r,o,[i])}const tV=3;class iV{computeDiff(e,t,n){const r=new v4(e,t,{maxComputationTime:n.maxComputationTimeMs,shouldIgnoreTrimWhitespace:n.ignoreTrimWhitespace,shouldComputeCharChanges:!0,shouldMakePrettyDiff:!0,shouldPostProcessCharChanges:!0}).computeDiff(),o=[];let a=null;for(const l of r.changes){let c;l.originalEndLineNumber===0?c=new Se(l.originalStartLineNumber+1,l.originalStartLineNumber+1):c=new Se(l.originalStartLineNumber,l.originalEndLineNumber+1);let h;l.modifiedEndLineNumber===0?h=new Se(l.modifiedStartLineNumber+1,l.modifiedStartLineNumber+1):h=new Se(l.modifiedStartLineNumber,l.modifiedEndLineNumber+1);let u=new Xr(c,h,l.charChanges?.map(f=>new yn(new H(f.originalStartLineNumber,f.originalStartColumn,f.originalEndLineNumber,f.originalEndColumn),new H(f.modifiedStartLineNumber,f.modifiedStartColumn,f.modifiedEndLineNumber,f.modifiedEndColumn))));a&&(a.modified.endLineNumberExclusive===u.modified.startLineNumber||a.original.endLineNumberExclusive===u.original.startLineNumber)&&(u=new Xr(a.original.join(u.original),a.modified.join(u.modified),a.innerChanges&&u.innerChanges?a.innerChanges.concat(u.innerChanges):void 0),o.pop()),o.push(u),a=u}return tc(()=>uy(o,(l,c)=>c.original.startLineNumber-l.original.endLineNumberExclusive===c.modified.startLineNumber-l.modified.endLineNumberExclusive&&l.original.endLineNumberExclusive<c.original.startLineNumber&&l.modified.endLineNumberExclusive<c.modified.startLineNumber)),new Ep(o,[],r.quitEarly)}}function w4(i,e,t,n){return new No(i,e,t).ComputeDiff(n)}let CL=class{constructor(e){const t=[],n=[];for(let s=0,r=e.length;s<r;s++)t[s]=Fw(e[s],1),n[s]=Pw(e[s],1);this.lines=e,this._startColumns=t,this._endColumns=n}getElements(){const e=[];for(let t=0,n=this.lines.length;t<n;t++)e[t]=this.lines[t].substring(this._startColumns[t]-1,this._endColumns[t]-1);return e}getStrictElement(e){return this.lines[e]}getStartLineNumber(e){return e+1}getEndLineNumber(e){return e+1}createCharSequence(e,t,n){const s=[],r=[],o=[];let a=0;for(let l=t;l<=n;l++){const c=this.lines[l],h=e?this._startColumns[l]:1,u=e?this._endColumns[l]:c.length+1;for(let f=h;f<u;f++)s[a]=c.charCodeAt(f-1),r[a]=l+1,o[a]=f,a++;!e&&l<n&&(s[a]=k.LineFeed,r[a]=l+1,o[a]=c.length+1,a++)}return new nV(s,r,o)}};class nV{constructor(e,t,n){this._charCodes=e,this._lineNumbers=t,this._columns=n}toString(){return"["+this._charCodes.map((e,t)=>(e===k.LineFeed?"\\n":String.fromCharCode(e))+`-(${this._lineNumbers[t]},${this._columns[t]})`).join(", ")+"]"}_assertIndex(e,t){if(e<0||e>=t.length)throw new Error("Illegal index")}getElements(){return this._charCodes}getStartLineNumber(e){return e>0&&e===this._lineNumbers.length?this.getEndLineNumber(e-1):(this._assertIndex(e,this._lineNumbers),this._lineNumbers[e])}getEndLineNumber(e){return e===-1?this.getStartLineNumber(e+1):(this._assertIndex(e,this._lineNumbers),this._charCodes[e]===k.LineFeed?this._lineNumbers[e]+1:this._lineNumbers[e])}getStartColumn(e){return e>0&&e===this._columns.length?this.getEndColumn(e-1):(this._assertIndex(e,this._columns),this._columns[e])}getEndColumn(e){return e===-1?this.getStartColumn(e+1):(this._assertIndex(e,this._columns),this._charCodes[e]===k.LineFeed?1:this._columns[e]+1)}}class Dh{constructor(e,t,n,s,r,o,a,l){this.originalStartLineNumber=e,this.originalStartColumn=t,this.originalEndLineNumber=n,this.originalEndColumn=s,this.modifiedStartLineNumber=r,this.modifiedStartColumn=o,this.modifiedEndLineNumber=a,this.modifiedEndColumn=l}static createFromDiffChange(e,t,n){const s=t.getStartLineNumber(e.originalStart),r=t.getStartColumn(e.originalStart),o=t.getEndLineNumber(e.originalStart+e.originalLength-1),a=t.getEndColumn(e.originalStart+e.originalLength-1),l=n.getStartLineNumber(e.modifiedStart),c=n.getStartColumn(e.modifiedStart),h=n.getEndLineNumber(e.modifiedStart+e.modifiedLength-1),u=n.getEndColumn(e.modifiedStart+e.modifiedLength-1);return new Dh(s,r,o,a,l,c,h,u)}}function sV(i){if(i.length<=1)return i;const e=[i[0]];let t=e[0];for(let n=1,s=i.length;n<s;n++){const r=i[n],o=r.originalStart-(t.originalStart+t.originalLength),a=r.modifiedStart-(t.modifiedStart+t.modifiedLength);Math.min(o,a)<tV?(t.originalLength=r.originalStart+r.originalLength-t.originalStart,t.modifiedLength=r.modifiedStart+r.modifiedLength-t.modifiedStart):(e.push(r),t=r)}return e}class Sd{constructor(e,t,n,s,r){this.originalStartLineNumber=e,this.originalEndLineNumber=t,this.modifiedStartLineNumber=n,this.modifiedEndLineNumber=s,this.charChanges=r}static createFromDiffResult(e,t,n,s,r,o,a){let l,c,h,u,f;if(t.originalLength===0?(l=n.getStartLineNumber(t.originalStart)-1,c=0):(l=n.getStartLineNumber(t.originalStart),c=n.getEndLineNumber(t.originalStart+t.originalLength-1)),t.modifiedLength===0?(h=s.getStartLineNumber(t.modifiedStart)-1,u=0):(h=s.getStartLineNumber(t.modifiedStart),u=s.getEndLineNumber(t.modifiedStart+t.modifiedLength-1)),o&&t.originalLength>0&&t.originalLength<20&&t.modifiedLength>0&&t.modifiedLength<20&&r()){const g=n.createCharSequence(e,t.originalStart,t.originalStart+t.originalLength-1),p=s.createCharSequence(e,t.modifiedStart,t.modifiedStart+t.modifiedLength-1);if(g.getElements().length>0&&p.getElements().length>0){let m=w4(g,p,r,!0).changes;a&&(m=sV(m)),f=[];for(let _=0,v=m.length;_<v;_++)f.push(Dh.createFromDiffChange(m[_],g,p))}}return new Sd(l,c,h,u,f)}}class v4{constructor(e,t,n){this.shouldComputeCharChanges=n.shouldComputeCharChanges,this.shouldPostProcessCharChanges=n.shouldPostProcessCharChanges,this.shouldIgnoreTrimWhitespace=n.shouldIgnoreTrimWhitespace,this.shouldMakePrettyDiff=n.shouldMakePrettyDiff,this.originalLines=e,this.modifiedLines=t,this.original=new CL(e),this.modified=new CL(t),this.continueLineDiff=EL(n.maxComputationTime),this.continueCharDiff=EL(n.maxComputationTime===0?0:Math.min(n.maxComputationTime,5e3))}computeDiff(){if(this.original.lines.length===1&&this.original.lines[0].length===0)return this.modified.lines.length===1&&this.modified.lines[0].length===0?{quitEarly:!1,changes:[]}:{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:1,modifiedStartLineNumber:1,modifiedEndLineNumber:this.modified.lines.length,charChanges:void 0}]};if(this.modified.lines.length===1&&this.modified.lines[0].length===0)return{quitEarly:!1,changes:[{originalStartLineNumber:1,originalEndLineNumber:this.original.lines.length,modifiedStartLineNumber:1,modifiedEndLineNumber:1,charChanges:void 0}]};const e=w4(this.original,this.modified,this.continueLineDiff,this.shouldMakePrettyDiff),t=e.changes,n=e.quitEarly;if(this.shouldIgnoreTrimWhitespace){const a=[];for(let l=0,c=t.length;l<c;l++)a.push(Sd.createFromDiffResult(this.shouldIgnoreTrimWhitespace,t[l],this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges));return{quitEarly:n,changes:a}}const s=[];let r=0,o=0;for(let a=-1,l=t.length;a<l;a++){const c=a+1<l?t[a+1]:null,h=c?c.originalStart:this.originalLines.length,u=c?c.modifiedStart:this.modifiedLines.length;for(;r<h&&o<u;){const f=this.originalLines[r],g=this.modifiedLines[o];if(f!==g){{let p=Fw(f,1),m=Fw(g,1);for(;p>1&&m>1;){const _=f.charCodeAt(p-2),v=g.charCodeAt(m-2);if(_!==v)break;p--,m--}(p>1||m>1)&&this._pushTrimWhitespaceCharChange(s,r+1,1,p,o+1,1,m)}{let p=Pw(f,1),m=Pw(g,1);const _=f.length+1,v=g.length+1;for(;p<_&&m<v;){const y=f.charCodeAt(p-1),E=f.charCodeAt(m-1);if(y!==E)break;p++,m++}(p<_||m<v)&&this._pushTrimWhitespaceCharChange(s,r+1,p,_,o+1,m,v)}}r++,o++}c&&(s.push(Sd.createFromDiffResult(this.shouldIgnoreTrimWhitespace,c,this.original,this.modified,this.continueCharDiff,this.shouldComputeCharChanges,this.shouldPostProcessCharChanges)),r+=c.originalLength,o+=c.modifiedLength)}return{quitEarly:n,changes:s}}_pushTrimWhitespaceCharChange(e,t,n,s,r,o,a){if(this._mergeTrimWhitespaceCharChange(e,t,n,s,r,o,a))return;let l;this.shouldComputeCharChanges&&(l=[new Dh(t,n,t,s,r,o,r,a)]),e.push(new Sd(t,t,r,r,l))}_mergeTrimWhitespaceCharChange(e,t,n,s,r,o,a){const l=e.length;if(l===0)return!1;const c=e[l-1];return c.originalEndLineNumber===0||c.modifiedEndLineNumber===0?!1:c.originalEndLineNumber===t&&c.modifiedEndLineNumber===r?(this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new Dh(t,n,t,s,r,o,r,a)),!0):c.originalEndLineNumber+1===t&&c.modifiedEndLineNumber+1===r?(c.originalEndLineNumber=t,c.modifiedEndLineNumber=r,this.shouldComputeCharChanges&&c.charChanges&&c.charChanges.push(new Dh(t,n,t,s,r,o,r,a)),!0):!1}}function Fw(i,e){const t=ql(i);return t===-1?e:t+1}function Pw(i,e){const t=xI(i);return t===-1?e:t+2}function EL(i){if(i===0)return()=>!0;const e=Date.now();return()=>Date.now()-e<i}class Ko{static trivial(e,t){return new Ko([new ri(me.ofLength(e.length),me.ofLength(t.length))],!1)}static trivialTimedOut(e,t){return new Ko([new ri(me.ofLength(e.length),me.ofLength(t.length))],!0)}constructor(e,t){this.diffs=e,this.hitTimeout=t}}class ri{static invert(e,t){const n=[];return AR(e,(s,r)=>{n.push(ri.fromOffsetPairs(s?s.getEndExclusives():ar.zero,r?r.getStarts():new ar(t,(s?s.seq2Range.endExclusive-s.seq1Range.endExclusive:0)+t)))}),n}static fromOffsetPairs(e,t){return new ri(new me(e.offset1,t.offset1),new me(e.offset2,t.offset2))}static assertSorted(e){let t;for(const n of e){if(t&&!(t.seq1Range.endExclusive<=n.seq1Range.start&&t.seq2Range.endExclusive<=n.seq2Range.start))throw new De("Sequence diffs must be sorted");t=n}}constructor(e,t){this.seq1Range=e,this.seq2Range=t}swap(){return new ri(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new ri(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new ri(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new ri(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new ri(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersectsOrTouches(e){return this.seq1Range.intersectsOrTouches(e.seq1Range)||this.seq2Range.intersectsOrTouches(e.seq2Range)}intersect(e){const t=this.seq1Range.intersect(e.seq1Range),n=this.seq2Range.intersect(e.seq2Range);if(!(!t||!n))return new ri(t,n)}getStarts(){return new ar(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new ar(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}}class ar{static{this.zero=new ar(0,0)}static{this.max=new ar(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER)}constructor(e,t){this.offset1=e,this.offset2=t}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new ar(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}}class Zf{static{this.instance=new Zf}isValid(){return!0}}class rV{constructor(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new De("timeout must be positive")}isValid(){return!(Date.now()-this.startTime<this.timeout)&&this.valid&&(this.valid=!1),this.valid}disable(){this.timeout=Number.MAX_SAFE_INTEGER,this.isValid=()=>!0,this.valid=!0}}class b_{constructor(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}get(e,t){return this.array[e+t*this.width]}set(e,t,n){this.array[e+t*this.width]=n}}function Bw(i){return i===k.Space||i===k.Tab}class cf{static{this.chrKeys=new Map}static getKey(e){let t=this.chrKeys.get(e);return t===void 0&&(t=this.chrKeys.size,this.chrKeys.set(e,t)),t}constructor(e,t,n){this.range=e,this.lines=t,this.source=n,this.histogram=[];let s=0;for(let r=e.startLineNumber-1;r<e.endLineNumberExclusive-1;r++){const o=t[r];for(let l=0;l<o.length;l++){s++;const c=o[l],h=cf.getKey(c);this.histogram[h]=(this.histogram[h]||0)+1}s++;const a=cf.getKey(`
`);this.histogram[a]=(this.histogram[a]||0)+1}this.totalCount=s}computeSimilarity(e){let t=0;const n=Math.max(this.histogram.length,e.histogram.length);for(let s=0;s<n;s++)t+=Math.abs((this.histogram[s]??0)-(e.histogram[s]??0));return 1-t/(this.totalCount+e.totalCount)}}class oV{compute(e,t,n=Zf.instance,s){if(e.length===0||t.length===0)return Ko.trivial(e,t);const r=new b_(e.length,t.length),o=new b_(e.length,t.length),a=new b_(e.length,t.length);for(let p=0;p<e.length;p++)for(let m=0;m<t.length;m++){if(!n.isValid())return Ko.trivialTimedOut(e,t);const _=p===0?0:r.get(p-1,m),v=m===0?0:r.get(p,m-1);let y;e.getElement(p)===t.getElement(m)?(p===0||m===0?y=0:y=r.get(p-1,m-1),p>0&&m>0&&o.get(p-1,m-1)===3&&(y+=a.get(p-1,m-1)),y+=s?s(p,m):1):y=-1;const E=Math.max(_,v,y);if(E===y){const N=p>0&&m>0?a.get(p-1,m-1):0;a.set(p,m,N+1),o.set(p,m,3)}else E===_?(a.set(p,m,0),o.set(p,m,1)):E===v&&(a.set(p,m,0),o.set(p,m,2));r.set(p,m,E)}const l=[];let c=e.length,h=t.length;function u(p,m){(p+1!==c||m+1!==h)&&l.push(new ri(new me(p+1,c),new me(m+1,h))),c=p,h=m}let f=e.length-1,g=t.length-1;for(;f>=0&&g>=0;)o.get(f,g)===3?(u(f,g),f--,g--):o.get(f,g)===1?f--:g--;return u(-1,-1),l.reverse(),new Ko(l,!1)}}class y4{compute(e,t,n=Zf.instance){if(e.length===0||t.length===0)return Ko.trivial(e,t);const s=e,r=t;function o(m,_){for(;m<s.length&&_<r.length&&s.getElement(m)===r.getElement(_);)m++,_++;return m}let a=0;const l=new aV;l.set(0,o(0,0));const c=new lV;c.set(0,l.get(0)===0?null:new xL(null,0,0,l.get(0)));let h=0;e:for(;;){if(a++,!n.isValid())return Ko.trivialTimedOut(s,r);const m=-Math.min(a,r.length+a%2),_=Math.min(a,s.length+a%2);for(h=m;h<=_;h+=2){const v=h===_?-1:l.get(h+1),y=h===m?-1:l.get(h-1)+1,E=Math.min(Math.max(v,y),s.length),N=E-h;if(E>s.length||N>r.length)continue;const I=o(E,N);l.set(h,I);const B=E===v?c.get(h+1):c.get(h-1);if(c.set(h,I!==E?new xL(B,E,N,I-E):B),l.get(h)===s.length&&l.get(h)-h===r.length)break e}}let u=c.get(h);const f=[];let g=s.length,p=r.length;for(;;){const m=u?u.x+u.length:0,_=u?u.y+u.length:0;if((m!==g||_!==p)&&f.push(new ri(new me(m,g),new me(_,p))),!u)break;g=u.x,p=u.y,u=u.prev}return f.reverse(),new Ko(f,!1)}}class xL{constructor(e,t,n,s){this.prev=e,this.x=t,this.y=n,this.length=s}}class aV{constructor(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){if(e<0){if(e=-e-1,e>=this.negativeArr.length){const n=this.negativeArr;this.negativeArr=new Int32Array(n.length*2),this.negativeArr.set(n)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){const n=this.positiveArr;this.positiveArr=new Int32Array(n.length*2),this.positiveArr.set(n)}this.positiveArr[e]=t}}}class lV{constructor(){this.positiveArr=[],this.negativeArr=[]}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t}}class Wm{constructor(e,t,n){this.lines=e,this.range=t,this.considerWhitespaceChanges=n,this.elements=[],this.firstElementOffsetByLineIdx=[],this.lineStartOffsets=[],this.trimmedWsLengthsByLineIdx=[],this.firstElementOffsetByLineIdx.push(0);for(let s=this.range.startLineNumber;s<=this.range.endLineNumber;s++){let r=e[s-1],o=0;s===this.range.startLineNumber&&this.range.startColumn>1&&(o=this.range.startColumn-1,r=r.substring(o)),this.lineStartOffsets.push(o);let a=0;if(!n){const c=r.trimStart();a=r.length-c.length,r=c.trimEnd()}this.trimmedWsLengthsByLineIdx.push(a);const l=s===this.range.endLineNumber?Math.min(this.range.endColumn-1-o-a,r.length):r.length;for(let c=0;c<l;c++)this.elements.push(r.charCodeAt(c));s<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new me(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(t=>String.fromCharCode(t)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){const t=IL(e>0?this.elements[e-1]:-1),n=IL(e<this.elements.length?this.elements[e]:-1);if(t===jt.LineBreakCR&&n===jt.LineBreakLF)return 0;if(t===jt.LineBreakLF)return 150;let s=0;return t!==n&&(s+=10,t===jt.WordLower&&n===jt.WordUpper&&(s+=1)),s+=DL(t),s+=DL(n),s}translateOffset(e,t="right"){const n=Bh(this.firstElementOffsetByLineIdx,r=>r<=e),s=e-this.firstElementOffsetByLineIdx[n];return new pe(this.range.startLineNumber+n,1+this.lineStartOffsets[n]+s+(s===0&&t==="left"?0:this.trimmedWsLengthsByLineIdx[n]))}translateRange(e){const t=this.translateOffset(e.start,"right"),n=this.translateOffset(e.endExclusive,"left");return n.isBefore(t)?H.fromPositions(n,n):H.fromPositions(t,n)}findWordContaining(e){if(e<0||e>=this.elements.length||!Xc(this.elements[e]))return;let t=e;for(;t>0&&Xc(this.elements[t-1]);)t--;let n=e;for(;n<this.elements.length&&Xc(this.elements[n]);)n++;return new me(t,n)}findSubWordContaining(e){if(e<0||e>=this.elements.length||!Xc(this.elements[e]))return;let t=e;for(;t>0&&Xc(this.elements[t-1])&&!LL(this.elements[t]);)t--;let n=e;for(;n<this.elements.length&&Xc(this.elements[n])&&!LL(this.elements[n]);)n++;return new me(t,n)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,t){return this.elements[e]===this.elements[t]}extendToFullLines(e){const t=Ph(this.firstElementOffsetByLineIdx,s=>s<=e.start)??0,n=yR(this.firstElementOffsetByLineIdx,s=>e.endExclusive<=s)??this.elements.length;return new me(t,n)}}function Xc(i){return i>=k.a&&i<=k.z||i>=k.A&&i<=k.Z||i>=k.Digit0&&i<=k.Digit9}function LL(i){return i>=k.A&&i<=k.Z}var jt;(function(i){i[i.WordLower=0]="WordLower",i[i.WordUpper=1]="WordUpper",i[i.WordNumber=2]="WordNumber",i[i.End=3]="End",i[i.Other=4]="Other",i[i.Separator=5]="Separator",i[i.Space=6]="Space",i[i.LineBreakCR=7]="LineBreakCR",i[i.LineBreakLF=8]="LineBreakLF"})(jt||(jt={}));const cV={[jt.WordLower]:0,[jt.WordUpper]:0,[jt.WordNumber]:0,[jt.End]:10,[jt.Other]:2,[jt.Separator]:30,[jt.Space]:3,[jt.LineBreakCR]:10,[jt.LineBreakLF]:10};function DL(i){return cV[i]}function IL(i){return i===k.LineFeed?jt.LineBreakLF:i===k.CarriageReturn?jt.LineBreakCR:Bw(i)?jt.Space:i>=k.a&&i<=k.z?jt.WordLower:i>=k.A&&i<=k.Z?jt.WordUpper:i>=k.Digit0&&i<=k.Digit9?jt.WordNumber:i===-1?jt.End:i===k.Comma||i===k.Semicolon?jt.Separator:jt.Other}function hV(i,e,t,n,s,r){let{moves:o,excludedChanges:a}=dV(i,e,t,r);if(!r.isValid())return[];const l=i.filter(h=>!a.has(h)),c=fV(l,n,s,e,t,r);return X_(o,c),o=gV(o),o=o.filter(h=>{const u=h.original.toOffsetRange().slice(e).map(g=>g.trim());return u.join(`
`).length>=15&&uV(u,g=>g.length>=2)>=2}),o=pV(i,o),o}function uV(i,e){let t=0;for(const n of i)e(n)&&t++;return t}function dV(i,e,t,n){const s=[],r=i.filter(l=>l.modified.isEmpty&&l.original.length>=3).map(l=>new cf(l.original,e,l)),o=new Set(i.filter(l=>l.original.isEmpty&&l.modified.length>=3).map(l=>new cf(l.modified,t,l))),a=new Set;for(const l of r){let c=-1,h;for(const u of o){const f=l.computeSimilarity(u);f>c&&(c=f,h=u)}if(c>.9&&h&&(o.delete(h),s.push(new gs(l.range,h.range)),a.add(l.source),a.add(h.source)),!n.isValid())return{moves:s,excludedChanges:a}}return{moves:s,excludedChanges:a}}function fV(i,e,t,n,s,r){const o=[],a=new hy;for(const f of i)for(let g=f.original.startLineNumber;g<f.original.endLineNumberExclusive-2;g++){const p=`${e[g-1]}:${e[g+1-1]}:${e[g+2-1]}`;a.add(p,{range:new Se(g,g+3)})}const l=[];i.sort(zl(f=>f.modified.startLineNumber,$l));for(const f of i){let g=[];for(let p=f.modified.startLineNumber;p<f.modified.endLineNumberExclusive-2;p++){const m=`${t[p-1]}:${t[p+1-1]}:${t[p+2-1]}`,_=new Se(p,p+3),v=[];a.forEach(m,({range:y})=>{for(const N of g)if(N.originalLineRange.endLineNumberExclusive+1===y.endLineNumberExclusive&&N.modifiedLineRange.endLineNumberExclusive+1===_.endLineNumberExclusive){N.originalLineRange=new Se(N.originalLineRange.startLineNumber,y.endLineNumberExclusive),N.modifiedLineRange=new Se(N.modifiedLineRange.startLineNumber,_.endLineNumberExclusive),v.push(N);return}const E={modifiedLineRange:_,originalLineRange:y};l.push(E),v.push(E)}),g=v}if(!r.isValid())return[]}l.sort(BR(zl(f=>f.modifiedLineRange.length,$l)));const c=new Vr,h=new Vr;for(const f of l){const g=f.modifiedLineRange.startLineNumber-f.originalLineRange.startLineNumber,p=c.subtractFrom(f.modifiedLineRange),m=h.subtractFrom(f.originalLineRange).getWithDelta(g),_=p.getIntersection(m);for(const v of _.ranges){if(v.length<3)continue;const y=v,E=v.delta(-g);o.push(new gs(E,y)),c.addRange(y),h.addRange(E)}}o.sort(zl(f=>f.original.startLineNumber,$l));const u=new _1(i);for(let f=0;f<o.length;f++){const g=o[f],p=u.findLastMonotonous(B=>B.original.startLineNumber<=g.original.startLineNumber),m=Ph(i,B=>B.modified.startLineNumber<=g.modified.startLineNumber),_=Math.max(g.original.startLineNumber-p.original.startLineNumber,g.modified.startLineNumber-m.modified.startLineNumber),v=u.findLastMonotonous(B=>B.original.startLineNumber<g.original.endLineNumberExclusive),y=Ph(i,B=>B.modified.startLineNumber<g.modified.endLineNumberExclusive),E=Math.max(v.original.endLineNumberExclusive-g.original.endLineNumberExclusive,y.modified.endLineNumberExclusive-g.modified.endLineNumberExclusive);let N;for(N=0;N<_;N++){const B=g.original.startLineNumber-N-1,x=g.modified.startLineNumber-N-1;if(B>n.length||x>s.length||c.contains(x)||h.contains(B)||!TL(n[B-1],s[x-1],r))break}N>0&&(h.addRange(new Se(g.original.startLineNumber-N,g.original.startLineNumber)),c.addRange(new Se(g.modified.startLineNumber-N,g.modified.startLineNumber)));let I;for(I=0;I<E;I++){const B=g.original.endLineNumberExclusive+I,x=g.modified.endLineNumberExclusive+I;if(B>n.length||x>s.length||c.contains(x)||h.contains(B)||!TL(n[B-1],s[x-1],r))break}I>0&&(h.addRange(new Se(g.original.endLineNumberExclusive,g.original.endLineNumberExclusive+I)),c.addRange(new Se(g.modified.endLineNumberExclusive,g.modified.endLineNumberExclusive+I))),(N>0||I>0)&&(o[f]=new gs(new Se(g.original.startLineNumber-N,g.original.endLineNumberExclusive+I),new Se(g.modified.startLineNumber-N,g.modified.endLineNumberExclusive+I)))}return o}function TL(i,e,t){if(i.trim()===e.trim())return!0;if(i.length>300&&e.length>300)return!1;const s=new y4().compute(new Wm([i],new H(1,1,1,i.length),!1),new Wm([e],new H(1,1,1,e.length),!1),t);let r=0;const o=ri.invert(s.diffs,i.length);for(const h of o)h.seq1Range.forEach(u=>{Bw(i.charCodeAt(u))||r++});function a(h){let u=0;for(let f=0;f<i.length;f++)Bw(h.charCodeAt(f))||u++;return u}const l=a(i.length>e.length?i:e);return r/l>.6&&l>10}function gV(i){if(i.length===0)return i;i.sort(zl(t=>t.original.startLineNumber,$l));const e=[i[0]];for(let t=1;t<i.length;t++){const n=e[e.length-1],s=i[t],r=s.original.startLineNumber-n.original.endLineNumberExclusive,o=s.modified.startLineNumber-n.modified.endLineNumberExclusive;if(r>=0&&o>=0&&r+o<=2){e[e.length-1]=n.join(s);continue}e.push(s)}return e}function pV(i,e){const t=new _1(i);return e=e.filter(n=>{const s=t.findLastMonotonous(a=>a.original.startLineNumber<n.original.endLineNumberExclusive)||new gs(new Se(1,1),new Se(1,1)),r=Ph(i,a=>a.modified.startLineNumber<n.modified.endLineNumberExclusive);return s!==r}),e}function AL(i,e,t){let n=t;return n=NL(i,e,n),n=NL(i,e,n),n=mV(i,e,n),n}function NL(i,e,t){if(t.length===0)return t;const n=[];n.push(t[0]);for(let r=1;r<t.length;r++){const o=n[n.length-1];let a=t[r];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=a.seq1Range.start-o.seq1Range.endExclusive;let c;for(c=1;c<=l&&!(i.getElement(a.seq1Range.start-c)!==i.getElement(a.seq1Range.endExclusive-c)||e.getElement(a.seq2Range.start-c)!==e.getElement(a.seq2Range.endExclusive-c));c++);if(c--,c===l){n[n.length-1]=new ri(new me(o.seq1Range.start,a.seq1Range.endExclusive-l),new me(o.seq2Range.start,a.seq2Range.endExclusive-l));continue}a=a.delta(-c)}n.push(a)}const s=[];for(let r=0;r<n.length-1;r++){const o=n[r+1];let a=n[r];if(a.seq1Range.isEmpty||a.seq2Range.isEmpty){const l=o.seq1Range.start-a.seq1Range.endExclusive;let c;for(c=0;c<l&&!(!i.isStronglyEqual(a.seq1Range.start+c,a.seq1Range.endExclusive+c)||!e.isStronglyEqual(a.seq2Range.start+c,a.seq2Range.endExclusive+c));c++);if(c===l){n[r+1]=new ri(new me(a.seq1Range.start+l,o.seq1Range.endExclusive),new me(a.seq2Range.start+l,o.seq2Range.endExclusive));continue}c>0&&(a=a.delta(c))}s.push(a)}return n.length>0&&s.push(n[n.length-1]),s}function mV(i,e,t){if(!i.getBoundaryScore||!e.getBoundaryScore)return t;for(let n=0;n<t.length;n++){const s=n>0?t[n-1]:void 0,r=t[n],o=n+1<t.length?t[n+1]:void 0,a=new me(s?s.seq1Range.endExclusive+1:0,o?o.seq1Range.start-1:i.length),l=new me(s?s.seq2Range.endExclusive+1:0,o?o.seq2Range.start-1:e.length);r.seq1Range.isEmpty?t[n]=RL(r,i,e,a,l):r.seq2Range.isEmpty&&(t[n]=RL(r.swap(),e,i,l,a).swap())}return t}function RL(i,e,t,n,s){let o=1;for(;i.seq1Range.start-o>=n.start&&i.seq2Range.start-o>=s.start&&t.isStronglyEqual(i.seq2Range.start-o,i.seq2Range.endExclusive-o)&&o<100;)o++;o--;let a=0;for(;i.seq1Range.start+a<n.endExclusive&&i.seq2Range.endExclusive+a<s.endExclusive&&t.isStronglyEqual(i.seq2Range.start+a,i.seq2Range.endExclusive+a)&&a<100;)a++;if(o===0&&a===0)return i;let l=0,c=-1;for(let h=-o;h<=a;h++){const u=i.seq2Range.start+h,f=i.seq2Range.endExclusive+h,g=i.seq1Range.start+h,p=e.getBoundaryScore(g)+t.getBoundaryScore(u)+t.getBoundaryScore(f);p>c&&(c=p,l=h)}return i.delta(l)}function bV(i,e,t){const n=[];for(const s of t){const r=n[n.length-1];if(!r){n.push(s);continue}s.seq1Range.start-r.seq1Range.endExclusive<=2||s.seq2Range.start-r.seq2Range.endExclusive<=2?n[n.length-1]=new ri(r.seq1Range.join(s.seq1Range),r.seq2Range.join(s.seq2Range)):n.push(s)}return n}function ML(i,e,t,n,s=!1){const r=ri.invert(t,i.length),o=[];let a=new ar(0,0);function l(h,u){if(h.offset1<a.offset1||h.offset2<a.offset2)return;const f=n(i,h.offset1),g=n(e,h.offset2);if(!f||!g)return;let p=new ri(f,g);const m=p.intersect(u);let _=m.seq1Range.length,v=m.seq2Range.length;for(;r.length>0;){const y=r[0];if(!(y.seq1Range.intersects(p.seq1Range)||y.seq2Range.intersects(p.seq2Range)))break;const N=n(i,y.seq1Range.start),I=n(e,y.seq2Range.start),B=new ri(N,I),x=B.intersect(y);if(_+=x.seq1Range.length,v+=x.seq2Range.length,p=p.join(B),p.seq1Range.endExclusive>=y.seq1Range.endExclusive)r.shift();else break}(s&&_+v<p.seq1Range.length+p.seq2Range.length||_+v<(p.seq1Range.length+p.seq2Range.length)*2/3)&&o.push(p),a=p.getEndExclusives()}for(;r.length>0;){const h=r.shift();h.seq1Range.isEmpty||(l(h.getStarts(),h),l(h.getEndExclusives().delta(-1),h))}return _V(t,o)}function _V(i,e){const t=[];for(;i.length>0||e.length>0;){const n=i[0],s=e[0];let r;n&&(!s||n.seq1Range.start<s.seq1Range.start)?r=i.shift():r=e.shift(),t.length>0&&t[t.length-1].seq1Range.endExclusive>=r.seq1Range.start?t[t.length-1]=t[t.length-1].join(r):t.push(r)}return t}function wV(i,e,t){let n=t;if(n.length===0)return n;let s=0,r;do{r=!1;const o=[n[0]];for(let a=1;a<n.length;a++){let h=function(f,g){const p=new me(c.seq1Range.endExclusive,l.seq1Range.start);return i.getText(p).replace(/\s/g,"").length<=4&&(f.seq1Range.length+f.seq2Range.length>5||g.seq1Range.length+g.seq2Range.length>5)};const l=n[a],c=o[o.length-1];h(c,l)?(r=!0,o[o.length-1]=o[o.length-1].join(l)):o.push(l)}n=o}while(s++<10&&r);return n}function vV(i,e,t){let n=t;if(n.length===0)return n;let s=0,r;do{r=!1;const a=[n[0]];for(let l=1;l<n.length;l++){let u=function(g,p){const m=new me(h.seq1Range.endExclusive,c.seq1Range.start);if(i.countLinesIn(m)>5||m.length>500)return!1;const v=i.getText(m).trim();if(v.length>20||v.split(/\r\n|\r|\n/).length>1)return!1;const y=i.countLinesIn(g.seq1Range),E=g.seq1Range.length,N=e.countLinesIn(g.seq2Range),I=g.seq2Range.length,B=i.countLinesIn(p.seq1Range),x=p.seq1Range.length,D=e.countLinesIn(p.seq2Range),F=p.seq2Range.length,te=2*40+50;function J(le){return Math.min(le,te)}return Math.pow(Math.pow(J(y*40+E),1.5)+Math.pow(J(N*40+I),1.5),1.5)+Math.pow(Math.pow(J(B*40+x),1.5)+Math.pow(J(D*40+F),1.5),1.5)>(te**1.5)**1.5*1.3};const c=n[l],h=a[a.length-1];u(h,c)?(r=!0,a[a.length-1]=a[a.length-1].join(c)):a.push(c)}n=a}while(s++<10&&r);const o=[];return NR(n,(a,l,c)=>{let h=l;function u(v){return v.length>0&&v.trim().length<=3&&l.seq1Range.length+l.seq2Range.length>100}const f=i.extendToFullLines(l.seq1Range),g=i.getText(new me(f.start,l.seq1Range.start));u(g)&&(h=h.deltaStart(-g.length));const p=i.getText(new me(l.seq1Range.endExclusive,f.endExclusive));u(p)&&(h=h.deltaEnd(p.length));const m=ri.fromOffsetPairs(a?a.getEndExclusives():ar.zero,c?c.getStarts():ar.max),_=h.intersect(m);o.length>0&&_.getStarts().equals(o[o.length-1].getEndExclusives())?o[o.length-1]=o[o.length-1].join(_):o.push(_)}),o}class OL{constructor(e,t){this.trimmedHash=e,this.lines=t}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){const t=e===0?0:FL(this.lines[e-1]),n=e===this.lines.length?0:FL(this.lines[e]);return 1e3-(t+n)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,t){return this.lines[e]===this.lines[t]}}function FL(i){let e=0;for(;e<i.length&&(i.charCodeAt(e)===k.Space||i.charCodeAt(e)===k.Tab);)e++;return e}class yV{constructor(){this.dynamicProgrammingDiffing=new oV,this.myersDiffingAlgorithm=new y4}computeDiff(e,t,n){if(e.length<=1&&wi(e,t,(I,B)=>I===B))return new Ep([],[],!1);if(e.length===1&&e[0].length===0||t.length===1&&t[0].length===0)return new Ep([new Xr(new Se(1,e.length+1),new Se(1,t.length+1),[new yn(new H(1,1,e.length,e[e.length-1].length+1),new H(1,1,t.length,t[t.length-1].length+1))])],[],!1);const s=n.maxComputationTimeMs===0?Zf.instance:new rV(n.maxComputationTimeMs),r=!n.ignoreTrimWhitespace,o=new Map;function a(I){let B=o.get(I);return B===void 0&&(B=o.size,o.set(I,B)),B}const l=e.map(I=>a(I.trim())),c=t.map(I=>a(I.trim())),h=new OL(l,e),u=new OL(c,t),f=h.length+u.length<1700?this.dynamicProgrammingDiffing.compute(h,u,s,(I,B)=>e[I]===t[B]?t[B].length===0?.1:1+Math.log(1+t[B].length):.99):this.myersDiffingAlgorithm.compute(h,u,s);let g=f.diffs,p=f.hitTimeout;g=AL(h,u,g),g=wV(h,u,g);const m=[],_=I=>{if(r)for(let B=0;B<I;B++){const x=v+B,D=y+B;if(e[x]!==t[D]){const F=this.refineDiff(e,t,new ri(new me(x,x+1),new me(D,D+1)),s,r,n);for(const te of F.mappings)m.push(te);F.hitTimeout&&(p=!0)}}};let v=0,y=0;for(const I of g){tc(()=>I.seq1Range.start-v===I.seq2Range.start-y);const B=I.seq1Range.start-v;_(B),v=I.seq1Range.endExclusive,y=I.seq2Range.endExclusive;const x=this.refineDiff(e,t,I,s,r,n);x.hitTimeout&&(p=!0);for(const D of x.mappings)m.push(D)}_(e.length-v);const E=kL(m,new Vg(e),new Vg(t));let N=[];return n.computeMoves&&(N=this.computeMoves(E,e,t,l,c,s,r,n)),tc(()=>{function I(x,D){if(x.lineNumber<1||x.lineNumber>D.length)return!1;const F=D[x.lineNumber-1];return!(x.column<1||x.column>F.length+1)}function B(x,D){return!(x.startLineNumber<1||x.startLineNumber>D.length+1||x.endLineNumberExclusive<1||x.endLineNumberExclusive>D.length+1)}for(const x of E){if(!x.innerChanges)return!1;for(const D of x.innerChanges)if(!(I(D.modifiedRange.getStartPosition(),t)&&I(D.modifiedRange.getEndPosition(),t)&&I(D.originalRange.getStartPosition(),e)&&I(D.originalRange.getEndPosition(),e)))return!1;if(!B(x.modified,t)||!B(x.original,e))return!1}return!0}),new Ep(E,N,p)}computeMoves(e,t,n,s,r,o,a,l){return hV(e,t,n,s,r,o).map(u=>{const f=this.refineDiff(t,n,new ri(u.original.toOffsetRange(),u.modified.toOffsetRange()),o,a,l),g=kL(f.mappings,new Vg(t),new Vg(n),!0);return new nb(u,g)})}refineDiff(e,t,n,s,r,o){const l=SV(n).toRangeMapping2(e,t),c=new Wm(e,l.originalRange,r),h=new Wm(t,l.modifiedRange,r),u=c.length+h.length<500?this.dynamicProgrammingDiffing.compute(c,h,s):this.myersDiffingAlgorithm.compute(c,h,s);let f=u.diffs;return f=AL(c,h,f),f=ML(c,h,f,(p,m)=>p.findWordContaining(m)),o.extendToSubwords&&(f=ML(c,h,f,(p,m)=>p.findSubWordContaining(m),!0)),f=bV(c,h,f),f=vV(c,h,f),{mappings:f.map(p=>new yn(c.translateRange(p.seq1Range),h.translateRange(p.seq2Range))),hitTimeout:u.hitTimeout}}}function SV(i){return new gs(new Se(i.seq1Range.start+1,i.seq1Range.endExclusive+1),new Se(i.seq2Range.start+1,i.seq2Range.endExclusive+1))}const __={getLegacy:()=>new iV,getDefault:()=>new yV};function S4(i){const e=[];for(const t of i){const n=Number(t);(n||n===0&&t.replace(/\s/g,"")!=="")&&e.push(n)}return e}function HS(i,e,t,n){return{red:i/255,blue:t/255,green:e/255,alpha:n}}function Ru(i,e){const t=e.index,n=e[0].length;if(t===void 0)return;const s=i.positionAt(t);return{startLineNumber:s.lineNumber,startColumn:s.column,endLineNumber:s.lineNumber,endColumn:s.column+n}}function kV(i,e){if(!i)return;const t=P.Format.CSS.parseHex(e);if(t)return{range:i,color:HS(t.rgba.r,t.rgba.g,t.rgba.b,t.rgba.a)}}function PL(i,e,t){if(!i||e.length!==1)return;const s=e[0].values(),r=S4(s);return{range:i,color:HS(r[0],r[1],r[2],t?r[3]:1)}}function BL(i,e,t){if(!i||e.length!==1)return;const s=e[0].values(),r=S4(s),o=new P(new Ts(r[0],r[1]/100,r[2]/100,t?r[3]:1));return{range:i,color:HS(o.rgba.r,o.rgba.g,o.rgba.b,o.rgba.a)}}function Mu(i,e){return typeof i=="string"?[...i.matchAll(e)]:i.findMatches(e)}function CV(i){const e=[],n=Mu(i,/\b(rgb|rgba|hsl|hsla)(\([0-9\s,.\%]*\))|\s+(#)([A-Fa-f0-9]{6})\b|\s+(#)([A-Fa-f0-9]{8})\b|^(#)([A-Fa-f0-9]{6})\b|^(#)([A-Fa-f0-9]{8})\b/gm);if(n.length>0)for(const s of n){const r=s.filter(c=>c!==void 0),o=r[1],a=r[2];if(!a)continue;let l;if(o==="rgb"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*\)$/gm;l=PL(Ru(i,s),Mu(a,c),!1)}else if(o==="rgba"){const c=/^\(\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=PL(Ru(i,s),Mu(a,c),!0)}else if(o==="hsl"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*\)$/gm;l=BL(Ru(i,s),Mu(a,c),!1)}else if(o==="hsla"){const c=/^\(\s*(36[0]|3[0-5][0-9]|[12][0-9][0-9]|[1-9]?[0-9])\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(100|\d{1,2}[.]\d*|\d{1,2})%\s*,\s*(0[.][0-9]+|[.][0-9]+|[01][.]|[01])\s*\)$/gm;l=BL(Ru(i,s),Mu(a,c),!0)}else o==="#"&&(l=kV(Ru(i,s),o+a));l&&e.push(l)}return e}function EV(i){return!i||typeof i.getValue!="function"||typeof i.positionAt!="function"?[]:CV(i)}const xV=/^-+|-+$/g,WL=100,LV=5;function DV(i,e){let t=[];if(e.findRegionSectionHeaders&&e.foldingRules?.markers){const n=IV(i,e);t=t.concat(n)}if(e.findMarkSectionHeaders){const n=TV(i,e);t=t.concat(n)}return t}function IV(i,e){const t=[],n=i.getLineCount();for(let s=1;s<=n;s++){const r=i.getLineContent(s),o=r.match(e.foldingRules.markers.start);if(o){const a={startLineNumber:s,startColumn:o[0].length+1,endLineNumber:s,endColumn:r.length+1};if(a.endColumn>a.startColumn){const l={range:a,...AV(r.substring(o[0].length)),shouldBeInComments:!1};(l.text||l.hasSeparatorLine)&&t.push(l)}}}return t}function TV(i,e){const t=[],n=i.getLineCount(),s=p4(e.markSectionHeaderRegex),r=new RegExp(e.markSectionHeaderRegex,`gdm${s?"s":""}`);for(let o=1;o<=n;o+=WL-LV){const a=Math.min(o+WL-1,n),l=[];for(let u=o;u<=a;u++)l.push(i.getLineContent(u));const c=l.join(`
`);r.lastIndex=0;let h;for(;(h=r.exec(c))!==null;){const u=c.substring(0,h.index),f=(u.match(/\n/g)||[]).length,g=o+f,p=h[0].split(`
`),m=p.length,_=g+m-1,v=u.lastIndexOf(`
`)+1,y=h.index-v+1,E=p[p.length-1],N=m===1?y+h[0].length:E.length+1,I={startLineNumber:g,startColumn:y,endLineNumber:_,endColumn:N},B=(h.groups??{}).label??"",x=((h.groups??{}).separator??"")!=="",D={range:I,text:B,hasSeparatorLine:x,shouldBeInComments:!0};(D.text||D.hasSeparatorLine)&&(t.length===0||t[t.length-1].range.endLineNumber<D.range.startLineNumber)&&t.push(D),r.lastIndex=h.index+h[0].length}}return t}function AV(i){i=i.trim();const e=i.startsWith("-");return i=i.replace(xV,""),{text:i,hasSeparatorLine:e}}class NV{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,t){e=Bc(e);const n=this.values,s=this.prefixSum,r=t.length;return r===0?!1:(this.values=new Uint32Array(n.length+r),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+r),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=Bc(e),t=Bc(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=Bc(e),t=Bc(t);const n=this.values,s=this.prefixSum;if(e>=n.length)return!1;const r=n.length-e;return t>=r&&(t=r),t===0?!1:(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(s.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=Bc(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,s=0,r=0,o=0;for(;t<=n;)if(s=t+(n-t)/2|0,r=this.prefixSum[s],o=r-this.values[s],e<o)n=s-1;else if(e>=r)t=s+1;else break;return new k4(s,e-o)}}class sne{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],n=t>0?this._prefixSum[t-1]:0;return new k4(t,e-n)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=kf(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const n=this._values[e],s=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=s+n;for(let r=0;r<n;r++)this._indexBySum[s+r]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class k4{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class RV{constructor(e,t,n,s){this._uri=e,this._lines=t,this._eol=n,this._versionId=s,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const n of t)this._acceptDeleteRange(n.range),this._acceptInsertText(new pe(n.range.startLineNumber,n.range.startColumn),n.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let s=0;s<t;s++)n[s]=this._lines[s].length+e;this._lineStarts=new NV(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const n=S1(t);if(n.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);const s=new Uint32Array(n.length-1);for(let r=1;r<n.length;r++)this._lines.splice(e.lineNumber+r-1,0,n[r]),s[r-1]=n[r].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,s)}}const UL=60*1e3,C4="workerTextModelSync";class VS extends ${static create(e,t){return new VS(e.getChannel(C4),t)}constructor(e,t,n=!1){if(super(),this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),this._proxy=e,this._modelService=t,!n){const s=new Hy;s.cancelAndSet(()=>this._checkStopModelSync(),Math.round(UL/2)),this._register(s)}}dispose(){for(const e in this._syncedModels)ai(this._syncedModels[e]);this._syncedModels=Object.create(null),this._syncedModelsLastUsedTime=Object.create(null),super.dispose()}ensureSyncedResources(e,t=!1){for(const n of e){const s=n.toString();this._syncedModels[s]||this._beginModelSync(n,t),this._syncedModels[s]&&(this._syncedModelsLastUsedTime[s]=new Date().getTime())}}_checkStopModelSync(){const e=new Date().getTime(),t=[];for(const n in this._syncedModelsLastUsedTime)e-this._syncedModelsLastUsedTime[n]>UL&&t.push(n);for(const n of t)this._stopModelSync(n)}_beginModelSync(e,t){const n=this._modelService.getModel(e);if(!n||!t&&n.isTooLargeForSyncing())return;const s=e.toString();this._proxy.$acceptNewModel({url:n.uri.toString(),lines:n.getLinesContent(),EOL:n.getEOL(),versionId:n.getVersionId()});const r=new X;r.add(n.onDidChangeContent(o=>{this._proxy.$acceptModelChanged(s.toString(),o)})),r.add(n.onWillDispose(()=>{this._stopModelSync(s)})),r.add(fe(()=>{this._proxy.$acceptRemovedModel(s)})),this._syncedModels[s]=r}_stopModelSync(e){const t=this._syncedModels[e];delete this._syncedModels[e],delete this._syncedModelsLastUsedTime[e],ai(t)}}class MV{constructor(){this._models=Object.create(null)}bindToServer(e){e.setChannel(C4,this)}getModel(e){return this._models[e]}getModels(){const e=[];return Object.keys(this._models).forEach(t=>e.push(this._models[t])),e}$acceptNewModel(e){this._models[e.url]=new OV(Y.parse(e.url),e.lines,e.EOL,e.versionId)}$acceptModelChanged(e,t){if(!this._models[e])return;this._models[e].onEvents(t)}$acceptRemovedModel(e){this._models[e]&&delete this._models[e]}}class OV extends RV{get uri(){return this._uri}get eol(){return this._eol}getValue(){return this.getText()}findMatches(e){const t=[];for(let n=0;n<this._lines.length;n++){const s=this._lines[n],r=this.offsetAt(new pe(n+1,1)),o=s.matchAll(e);for(const a of o)(a.index||a.index===0)&&(a.index=a.index+r),t.push(a)}return t}getLinesContent(){return this._lines.slice(0)}getLineCount(){return this._lines.length}getLineContent(e){return this._lines[e-1]}getWordAtPosition(e,t){const n=Kd(e.column,DT(t),this._lines[e.lineNumber-1],0);return n?new H(e.lineNumber,n.startColumn,e.lineNumber,n.endColumn):null}getWordUntilPosition(e,t){const n=this.getWordAtPosition(e,t);return n?{word:this._lines[e.lineNumber-1].substring(n.startColumn-1,e.column-1),startColumn:n.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}words(e){const t=this._lines,n=this._wordenize.bind(this);let s=0,r="",o=0,a=[];return{*[Symbol.iterator](){for(;;)if(o<a.length){const l=r.substring(a[o].start,a[o].end);o+=1,yield l}else if(s<t.length)r=t[s],a=n(r,e),o=0,s+=1;else break}}}getLineWords(e,t){const n=this._lines[e-1],s=this._wordenize(n,t),r=[];for(const o of s)r.push({word:n.substring(o.start,o.end),startColumn:o.start+1,endColumn:o.end+1});return r}_wordenize(e,t){const n=[];let s;for(t.lastIndex=0;(s=t.exec(e))&&s[0].length!==0;)n.push({start:s.index,end:s.index+s[0].length});return n}getValueInRange(e){if(e=this._validateRange(e),e.startLineNumber===e.endLineNumber)return this._lines[e.startLineNumber-1].substring(e.startColumn-1,e.endColumn-1);const t=this._eol,n=e.startLineNumber-1,s=e.endLineNumber-1,r=[];r.push(this._lines[n].substring(e.startColumn-1));for(let o=n+1;o<s;o++)r.push(this._lines[o]);return r.push(this._lines[s].substring(0,e.endColumn-1)),r.join(t)}offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.lineNumber-2)+(e.column-1)}positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),n=this._lines[t.index].length;return{lineNumber:1+t.index,column:1+Math.min(t.remainder,n)}}_validateRange(e){const t=this._validatePosition({lineNumber:e.startLineNumber,column:e.startColumn}),n=this._validatePosition({lineNumber:e.endLineNumber,column:e.endColumn});return t.lineNumber!==e.startLineNumber||t.column!==e.startColumn||n.lineNumber!==e.endLineNumber||n.column!==e.endColumn?{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:n.lineNumber,endColumn:n.column}:e}_validatePosition(e){if(!pe.isIPosition(e))throw new Error("bad position");let{lineNumber:t,column:n}=e,s=!1;if(t<1)t=1,n=1,s=!0;else if(t>this._lines.length)t=this._lines.length,n=this._lines[t-1].length+1,s=!0;else{const r=this._lines[t-1].length+1;n<1?(n=1,s=!0):n>r&&(n=r,s=!0)}return s?{lineNumber:t,column:n}:e}}class _h{constructor(e=null){this._foreignModule=e,this._workerTextModelSyncServer=new MV}dispose(){}async $ping(){return"pong"}_getModel(e){return this._workerTextModelSyncServer.getModel(e)}getModels(){return this._workerTextModelSyncServer.getModels()}$acceptNewModel(e){this._workerTextModelSyncServer.$acceptNewModel(e)}$acceptModelChanged(e,t){this._workerTextModelSyncServer.$acceptModelChanged(e,t)}$acceptRemovedModel(e){this._workerTextModelSyncServer.$acceptRemovedModel(e)}async $computeUnicodeHighlights(e,t,n){const s=this._getModel(e);return s?YH.computeUnicodeHighlights(s,t,n):{ranges:[],hasMore:!1,ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0}}async $findSectionHeaders(e,t){const n=this._getModel(e);return n?DV(n,t):[]}async $computeDiff(e,t,n,s){const r=this._getModel(e),o=this._getModel(t);return!r||!o?null:_h.computeDiff(r,o,n,s)}static computeDiff(e,t,n,s){const r=s==="advanced"?__.getDefault():__.getLegacy(),o=e.getLinesContent(),a=t.getLinesContent(),l=r.computeDiff(o,a,n),c=l.changes.length>0?!1:this._modelsAreIdentical(e,t);function h(u){return u.map(f=>[f.original.startLineNumber,f.original.endLineNumberExclusive,f.modified.startLineNumber,f.modified.endLineNumberExclusive,f.innerChanges?.map(g=>[g.originalRange.startLineNumber,g.originalRange.startColumn,g.originalRange.endLineNumber,g.originalRange.endColumn,g.modifiedRange.startLineNumber,g.modifiedRange.startColumn,g.modifiedRange.endLineNumber,g.modifiedRange.endColumn])])}return{identical:c,quitEarly:l.hitTimeout,changes:h(l.changes),moves:l.moves.map(u=>[u.lineRangeMapping.original.startLineNumber,u.lineRangeMapping.original.endLineNumberExclusive,u.lineRangeMapping.modified.startLineNumber,u.lineRangeMapping.modified.endLineNumberExclusive,h(u.changes)])}}static _modelsAreIdentical(e,t){const n=e.getLineCount(),s=t.getLineCount();if(n!==s)return!1;for(let r=1;r<=n;r++){const o=e.getLineContent(r),a=t.getLineContent(r);if(o!==a)return!1}return!0}async $computeDirtyDiff(e,t,n){const s=this._getModel(e),r=this._getModel(t);if(!s||!r)return null;const o=s.getLinesContent(),a=r.getLinesContent();return new v4(o,a,{shouldComputeCharChanges:!1,shouldPostProcessCharChanges:!1,shouldIgnoreTrimWhitespace:n,shouldMakePrettyDiff:!0,maxComputationTime:1e3}).computeDiff().changes}static{this._diffLimit=1e5}async $computeMoreMinimalEdits(e,t,n){const s=this._getModel(e);if(!s)return t;const r=[];let o;t=t.slice(0).sort((l,c)=>{if(l.range&&c.range)return H.compareRangesUsingStarts(l.range,c.range);const h=l.range?0:1,u=c.range?0:1;return h-u});let a=0;for(let l=1;l<t.length;l++)H.getEndPosition(t[a].range).equals(H.getStartPosition(t[l].range))?(t[a].range=H.fromPositions(H.getStartPosition(t[a].range),H.getEndPosition(t[l].range)),t[a].text+=t[l].text):(a++,t[a]=t[l]);t.length=a+1;for(let{range:l,text:c,eol:h}of t){if(typeof h=="number"&&(o=h),H.isEmpty(l)&&!c)continue;const u=s.getValueInRange(l);if(c=c.replace(/\r\n|\n|\r/g,s.eol),u===c)continue;if(Math.max(c.length,u.length)>_h._diffLimit){r.push({range:l,text:c});continue}const f=MH(u,c,n),g=s.offsetAt(H.lift(l).getStartPosition());for(const p of f){const m=s.positionAt(g+p.originalStart),_=s.positionAt(g+p.originalStart+p.originalLength),v={text:c.substr(p.modifiedStart,p.modifiedLength),range:{startLineNumber:m.lineNumber,startColumn:m.column,endLineNumber:_.lineNumber,endColumn:_.column}};s.getValueInRange(v.range)!==v.text&&r.push(v)}}return typeof o=="number"&&r.push({eol:o,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),r}$computeHumanReadableDiff(e,t,n){const s=this._getModel(e);if(!s)return t;const r=[];let o;t=t.slice(0).sort((a,l)=>{if(a.range&&l.range)return H.compareRangesUsingStarts(a.range,l.range);const c=a.range?0:1,h=l.range?0:1;return c-h});for(let{range:a,text:l,eol:c}of t){let m=function(v,y){return new pe(v.lineNumber+y.lineNumber-1,y.lineNumber===1?v.column+y.column-1:y.column)},_=function(v,y){const E=[];for(let N=y.startLineNumber;N<=y.endLineNumber;N++){const I=v[N-1];N===y.startLineNumber&&N===y.endLineNumber?E.push(I.substring(y.startColumn-1,y.endColumn-1)):N===y.startLineNumber?E.push(I.substring(y.startColumn-1)):N===y.endLineNumber?E.push(I.substring(0,y.endColumn-1)):E.push(I)}return E};if(typeof c=="number"&&(o=c),H.isEmpty(a)&&!l)continue;const h=s.getValueInRange(a);if(l=l.replace(/\r\n|\n|\r/g,s.eol),h===l)continue;if(Math.max(l.length,h.length)>_h._diffLimit){r.push({range:a,text:l});continue}const u=h.split(/\r\n|\n|\r/),f=l.split(/\r\n|\n|\r/),g=__.getDefault().computeDiff(u,f,n),p=H.lift(a).getStartPosition();for(const v of g.changes)if(v.innerChanges)for(const y of v.innerChanges)r.push({range:H.fromPositions(m(p,y.originalRange.getStartPosition()),m(p,y.originalRange.getEndPosition())),text:_(f,y.modifiedRange).join(s.eol)});else throw new De("The experimental diff algorithm always produces inner changes")}return typeof o=="number"&&r.push({eol:o,text:"",range:{startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0}}),r}async $computeLinks(e){const t=this._getModel(e);return t?WH(t):null}async $computeDefaultDocumentColors(e){const t=this._getModel(e);return t?EV(t):null}static{this._suggestionsLimit=1e4}async $textualSuggest(e,t,n,s){const r=new Yo,o=new RegExp(n,s),a=new Set;e:for(const l of e){const c=this._getModel(l);if(c){for(const h of c.words(o))if(!(h===t||!isNaN(Number(h)))&&(a.add(h),a.size>_h._suggestionsLimit))break e}}return{words:Array.from(a),duration:r.elapsed()}}async $computeWordRanges(e,t,n,s){const r=this._getModel(e);if(!r)return Object.create(null);const o=new RegExp(n,s),a=Object.create(null);for(let l=t.startLineNumber;l<t.endLineNumber;l++){const c=r.getLineWords(l,o);for(const h of c){if(!isNaN(Number(h.word)))continue;let u=a[h.word];u||(u=[],a[h.word]=u),u.push({startLineNumber:l,startColumn:h.startColumn,endLineNumber:l,endColumn:h.endColumn})}}return a}async $navigateValueSet(e,t,n,s,r){const o=this._getModel(e);if(!o)return null;const a=new RegExp(s,r);t.startColumn===t.endColumn&&(t={startLineNumber:t.startLineNumber,startColumn:t.startColumn,endLineNumber:t.endLineNumber,endColumn:t.endColumn+1});const l=o.getValueInRange(t),c=o.getWordAtPosition({lineNumber:t.startLineNumber,column:t.startColumn},a);if(!c)return null;const h=o.getValueInRange(c);return WS.INSTANCE.navigateValueSet(t,l,c,h,n)}$fmr(e,t){if(!this._foreignModule||typeof this._foreignModule[e]!="function")return Promise.reject(new Error("Missing requestHandler or method: "+e));try{return Promise.resolve(this._foreignModule[e].apply(this._foreignModule,t))}catch(n){return Promise.reject(n)}}}typeof importScripts=="function"&&(globalThis.monaco=HH());class Um{static{this.CHANNEL_NAME="editorWorkerHost"}static getChannel(e){return e.getChannel(Um.CHANNEL_NAME)}static setChannel(e,t){e.setChannel(Um.CHANNEL_NAME,t)}}const HL=5*60*1e3;function Dr(i,e){const t=i.getModel(e);return!(!t||t.isTooLargeForSyncing())}let Hm=class extends ${constructor(e,t,n,s,r,o){super(),this._languageConfigurationService=r,this._modelService=t,this._workerManager=this._register(new Ww(e,this._modelService)),this._logService=s,this._register(o.linkProvider.register({language:"*",hasAccessToAllModels:!0},{provideLinks:async(a,l)=>{if(!Dr(this._modelService,a.uri))return Promise.resolve({links:[]});const h=await(await this._workerWithResources([a.uri])).$computeLinks(a.uri.toString());return h&&{links:h}}})),this._register(o.completionProvider.register("*",new FV(this._workerManager,n,this._modelService,this._languageConfigurationService)))}dispose(){super.dispose()}canComputeUnicodeHighlights(e){return Dr(this._modelService,e)}async computedUnicodeHighlights(e,t,n){return(await this._workerWithResources([e])).$computeUnicodeHighlights(e.toString(),t,n)}async computeDiff(e,t,n,s){const o=await(await this._workerWithResources([e,t],!0)).$computeDiff(e.toString(),t.toString(),n,s);if(!o)return null;return{identical:o.identical,quitEarly:o.quitEarly,changes:l(o.changes),moves:o.moves.map(c=>new nb(new gs(new Se(c[0],c[1]),new Se(c[2],c[3])),l(c[4])))};function l(c){return c.map(h=>new Xr(new Se(h[0],h[1]),new Se(h[2],h[3]),h[4]?.map(u=>new yn(new H(u[0],u[1],u[2],u[3]),new H(u[4],u[5],u[6],u[7])))))}}canComputeDirtyDiff(e,t){return Dr(this._modelService,e)&&Dr(this._modelService,t)}async computeDirtyDiff(e,t,n){return(await this._workerWithResources([e,t])).$computeDirtyDiff(e.toString(),t.toString(),n)}async computeMoreMinimalEdits(e,t,n=!1){if(Y_(t)){if(!Dr(this._modelService,e))return Promise.resolve(t);const s=Yo.create(),r=this._workerWithResources([e]).then(o=>o.$computeMoreMinimalEdits(e.toString(),t,n));return r.finally(()=>this._logService.trace("FORMAT#computeMoreMinimalEdits",e.toString(!0),s.elapsed())),Promise.race([r,sc(1e3).then(()=>t)])}else return Promise.resolve(void 0)}computeHumanReadableDiff(e,t){if(Y_(t)){if(!Dr(this._modelService,e))return Promise.resolve(t);const n=Yo.create(),s={ignoreTrimWhitespace:!1,maxComputationTimeMs:1e3,computeMoves:!1},r=this._workerWithResources([e]).then(o=>o.$computeHumanReadableDiff(e.toString(),t,s)).catch(o=>(pt(o),this.computeMoreMinimalEdits(e,t,!0)));return r.finally(()=>this._logService.trace("FORMAT#computeHumanReadableDiff",e.toString(!0),n.elapsed())),r}else return Promise.resolve(void 0)}canNavigateValueSet(e){return Dr(this._modelService,e)}async navigateValueSet(e,t,n){const s=this._modelService.getModel(e);if(!s)return null;const r=this._languageConfigurationService.getLanguageConfiguration(s.getLanguageId()).getWordDefinition(),o=r.source,a=r.flags;return(await this._workerWithResources([e])).$navigateValueSet(e.toString(),t,n,o,a)}canComputeWordRanges(e){return Dr(this._modelService,e)}async computeWordRanges(e,t){const n=this._modelService.getModel(e);if(!n)return Promise.resolve(null);const s=this._languageConfigurationService.getLanguageConfiguration(n.getLanguageId()).getWordDefinition(),r=s.source,o=s.flags;return(await this._workerWithResources([e])).$computeWordRanges(e.toString(),t,r,o)}async findSectionHeaders(e,t){return(await this._workerWithResources([e])).$findSectionHeaders(e.toString(),t)}async computeDefaultDocumentColors(e){return(await this._workerWithResources([e])).$computeDefaultDocumentColors(e.toString())}async _workerWithResources(e,t=!1){return await(await this._workerManager.withWorker()).workerWithSyncedResources(e,t)}};Hm=G([L(1,yr),L(2,G1),L(3,Zi),L(4,Xf),L(5,iS)],Hm);class FV{constructor(e,t,n,s){this.languageConfigurationService=s,this._debugDisplayName="wordbasedCompletions",this._workerManager=e,this._configurationService=t,this._modelService=n}async provideCompletionItems(e,t){const n=this._configurationService.getValue(e.uri,t,"editor");if(n.wordBasedSuggestions==="off")return;const s=[];if(n.wordBasedSuggestions==="currentDocument")Dr(this._modelService,e.uri)&&s.push(e.uri);else for(const u of this._modelService.getModels())Dr(this._modelService,u.uri)&&(u===e?s.unshift(u.uri):(n.wordBasedSuggestions==="allDocuments"||u.getLanguageId()===e.getLanguageId())&&s.push(u.uri));if(s.length===0)return;const r=this.languageConfigurationService.getLanguageConfiguration(e.getLanguageId()).getWordDefinition(),o=e.getWordAtPosition(t),a=o?new H(t.lineNumber,o.startColumn,t.lineNumber,o.endColumn):H.fromPositions(t),l=a.setEndPosition(t.lineNumber,t.column),h=await(await this._workerManager.withWorker()).textualSuggest(s,o?.word,r);if(h)return{duration:h.duration,suggestions:h.words.map(u=>({kind:q.Text,label:u,insertText:u,range:{insert:l,replace:a}}))}}}let Ww=class extends ${constructor(e,t){super(),this._workerDescriptor=e,this._modelService=t,this._editorWorkerClient=null,this._lastWorkerUsedTime=new Date().getTime(),this._register(new lA).cancelAndSet(()=>this._checkStopIdleWorker(),Math.round(HL/2),$e),this._register(this._modelService.onModelRemoved(s=>this._checkStopEmptyWorker()))}dispose(){this._editorWorkerClient&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null),super.dispose()}_checkStopEmptyWorker(){if(!this._editorWorkerClient)return;this._modelService.getModels().length===0&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}_checkStopIdleWorker(){if(!this._editorWorkerClient)return;new Date().getTime()-this._lastWorkerUsedTime>HL&&(this._editorWorkerClient.dispose(),this._editorWorkerClient=null)}withWorker(){return this._lastWorkerUsedTime=new Date().getTime(),this._editorWorkerClient||(this._editorWorkerClient=new Uw(this._workerDescriptor,!1,this._modelService)),Promise.resolve(this._editorWorkerClient)}};Ww=G([L(1,yr)],Ww);class PV{constructor(e){this._instance=e,this.proxy=this._instance}dispose(){this._instance.dispose()}setChannel(e,t){throw new Error("Not supported")}getChannel(e){throw new Error("Not supported")}}let Uw=class extends ${constructor(e,t,n){super(),this._workerDescriptorOrWorker=e,this._disposed=!1,this._modelService=n,this._keepIdleModels=t,this._worker=null,this._modelManager=null}fhr(e,t){throw new Error("Not implemented!")}_getOrCreateWorker(){if(!this._worker)try{this._worker=this._register(RH(this._workerDescriptorOrWorker)),Um.setChannel(this._worker,this._createEditorWorkerHost())}catch(e){Iw(e),this._worker=this._createFallbackLocalWorker()}return this._worker}async _getProxy(){try{const e=this._getOrCreateWorker().proxy;return await e.$ping(),e}catch(e){return Iw(e),this._worker=this._createFallbackLocalWorker(),this._worker.proxy}}_createFallbackLocalWorker(){return new PV(new _h(null))}_createEditorWorkerHost(){return{$fhr:(e,t)=>this.fhr(e,t)}}_getOrCreateModelManager(e){return this._modelManager||(this._modelManager=this._register(new VS(e,this._modelService,this._keepIdleModels))),this._modelManager}async workerWithSyncedResources(e,t=!1){if(this._disposed)return Promise.reject(j_());const n=await this._getProxy();return this._getOrCreateModelManager(n).ensureSyncedResources(e,t),n}async textualSuggest(e,t,n){const s=await this.workerWithSyncedResources(e),r=n.source,o=n.flags;return s.$textualSuggest(e.map(a=>a.toString()),t,r,o)}dispose(){super.dispose(),this._disposed=!0}};Uw=G([L(2,yr)],Uw);var ba;(function(i){i[i.Unnecessary=1]="Unnecessary",i[i.Deprecated=2]="Deprecated"})(ba||(ba={}));var es;(function(i){i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error"})(es||(es={}));(function(i){function e(l,c){return c-l}i.compare=e;const t=Object.create(null);t[i.Error]=d(1936,"Error"),t[i.Warning]=d(1937,"Warning"),t[i.Info]=d(1938,"Info");function n(l){return t[l]||""}i.toString=n;const s=Object.create(null);s[i.Error]=d(1939,"Errors"),s[i.Warning]=d(1940,"Warnings"),s[i.Info]=d(1941,"Infos");function r(l){return s[l]||""}i.toStringPlural=r;function o(l){switch(l){case bt.Error:return i.Error;case bt.Warning:return i.Warning;case bt.Info:return i.Info;case bt.Ignore:return i.Hint}}i.fromSeverity=o;function a(l){switch(l){case i.Error:return bt.Error;case i.Warning:return bt.Warning;case i.Info:return bt.Info;case i.Hint:return bt.Ignore}}i.toSeverity=a})(es||(es={}));var VL;(function(i){const e="";function t(s){return n(s,!0)}i.makeKey=t;function n(s,r){const o=[e];return s.source?o.push(s.source.replace("¦","\\¦")):o.push(e),s.code?typeof s.code=="string"?o.push(s.code.replace("¦","\\¦")):o.push(s.code.value.replace("¦","\\¦")):o.push(e),s.severity!==void 0&&s.severity!==null?o.push(es.toString(s.severity)):o.push(e),s.message&&r?o.push(s.message.replace("¦","\\¦")):o.push(e),s.startLineNumber!==void 0&&s.startLineNumber!==null?o.push(s.startLineNumber.toString()):o.push(e),s.startColumn!==void 0&&s.startColumn!==null?o.push(s.startColumn.toString()):o.push(e),s.endLineNumber!==void 0&&s.endLineNumber!==null?o.push(s.endLineNumber.toString()):o.push(e),s.endColumn!==void 0&&s.endColumn!==null?o.push(s.endColumn.toString()):o.push(e),o.push(e),o.join("¦")}i.makeKeyOptionalMessage=n})(VL||(VL={}));const E4=be("markerService");var Is;(function(i){i.EditorHintDecoration="squiggly-hint",i.EditorInfoDecoration="squiggly-info",i.EditorWarningDecoration="squiggly-warning",i.EditorErrorDecoration="squiggly-error",i.EditorUnnecessaryDecoration="squiggly-unnecessary",i.EditorUnnecessaryInlineDecoration="squiggly-inline-unnecessary",i.EditorDeprecatedInlineDecoration="squiggly-inline-deprecated"})(Is||(Is={}));var Ue;(function(i){i[i.Black=0]="Black",i[i.Red=1]="Red"})(Ue||(Ue={}));var Je;(function(i){i[i.ColorMask=1]="ColorMask",i[i.ColorMaskInverse=254]="ColorMaskInverse",i[i.ColorOffset=0]="ColorOffset",i[i.IsVisitedMask=2]="IsVisitedMask",i[i.IsVisitedMaskInverse=253]="IsVisitedMaskInverse",i[i.IsVisitedOffset=1]="IsVisitedOffset",i[i.IsForValidationMask=4]="IsForValidationMask",i[i.IsForValidationMaskInverse=251]="IsForValidationMaskInverse",i[i.IsForValidationOffset=2]="IsForValidationOffset",i[i.StickinessMask=24]="StickinessMask",i[i.StickinessMaskInverse=231]="StickinessMaskInverse",i[i.StickinessOffset=3]="StickinessOffset",i[i.CollapseOnReplaceEditMask=32]="CollapseOnReplaceEditMask",i[i.CollapseOnReplaceEditMaskInverse=223]="CollapseOnReplaceEditMaskInverse",i[i.CollapseOnReplaceEditOffset=5]="CollapseOnReplaceEditOffset",i[i.IsMarginMask=64]="IsMarginMask",i[i.IsMarginMaskInverse=191]="IsMarginMaskInverse",i[i.IsMarginOffset=6]="IsMarginOffset",i[i.MIN_SAFE_DELTA=-1073741824]="MIN_SAFE_DELTA",i[i.MAX_SAFE_DELTA=1073741824]="MAX_SAFE_DELTA"})(Je||(Je={}));function hn(i){return(i.metadata&Je.ColorMask)>>>Je.ColorOffset}function ct(i,e){i.metadata=i.metadata&Je.ColorMaskInverse|e<<Je.ColorOffset}function Li(i){return(i.metadata&Je.IsVisitedMask)>>>Je.IsVisitedOffset===1}function ot(i,e){i.metadata=i.metadata&Je.IsVisitedMaskInverse|(e?1:0)<<Je.IsVisitedOffset}function x4(i){return(i.metadata&Je.IsForValidationMask)>>>Je.IsForValidationOffset===1}function zL(i,e){i.metadata=i.metadata&Je.IsForValidationMaskInverse|(e?1:0)<<Je.IsForValidationOffset}function L4(i){return(i.metadata&Je.IsMarginMask)>>>Je.IsMarginOffset===1}function $L(i,e){i.metadata=i.metadata&Je.IsMarginMaskInverse|(e?1:0)<<Je.IsMarginOffset}function BV(i){return(i.metadata&Je.StickinessMask)>>>Je.StickinessOffset}function qL(i,e){i.metadata=i.metadata&Je.StickinessMaskInverse|e<<Je.StickinessOffset}function WV(i){return(i.metadata&Je.CollapseOnReplaceEditMask)>>>Je.CollapseOnReplaceEditOffset===1}function KL(i,e){i.metadata=i.metadata&Je.CollapseOnReplaceEditMaskInverse|(e?1:0)<<Je.CollapseOnReplaceEditOffset}class D4{constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,ct(this,Ue.Red),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,zL(this,!1),$L(this,!1),qL(this,ms.NeverGrowsWhenTypingAtEdges),KL(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,ot(this,!1)}reset(e,t,n,s){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=s}setOptions(e){this.options=e;const t=this.options.className;zL(this,t===Is.EditorErrorDecoration||t===Is.EditorWarningDecoration||t===Is.EditorInfoDecoration),$L(this,this.options.glyphMarginClassName!==null),qL(this,this.options.stickiness),KL(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}}const Ee=new D4(null,0,0);Ee.parent=Ee;Ee.left=Ee;Ee.right=Ee;ct(Ee,Ue.Black);class w_{constructor(){this.root=Ee,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,s,r,o){return this.root===Ee?[]:KV(this,e,t,n,s,r,o)}search(e,t,n,s){return this.root===Ee?[]:GL(this,e,t,n,s)}collectNodesFromOwner(e){return $V(this,e)}collectNodesPostOrder(){return qV(this)}insert(e){jL(this,e),this._normalizeDeltaIfNecessary()}delete(e){YL(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){const n=e;let s=0;for(;e!==this.root;)e===e.parent.right&&(s+=e.parent.delta),e=e.parent;const r=n.start+s,o=n.end+s;n.setCachedOffsets(r,o,t)}acceptReplace(e,t,n,s){const r=VV(this,e,e+t);for(let o=0,a=r.length;o<a;o++){const l=r[o];YL(this,l)}this._normalizeDeltaIfNecessary(),zV(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let o=0,a=r.length;o<a;o++){const l=r[o];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,HV(l,e,e+t,n,s),l.maxEnd=l.end,jL(this,l)}this._normalizeDeltaIfNecessary()}getAllInOrder(){return GL(this,0,!1,0,!1)}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,UV(this))}}function UV(i){let e=i.root,t=0;for(;e!==Ee;){if(e.left!==Ee&&!Li(e.left)){e=e.left;continue}if(e.right!==Ee&&!Li(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,Za(e),ot(e,!0),ot(e.left,!1),ot(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}ot(i.root,!1)}var Zs;(function(i){i[i.MarkerDefined=0]="MarkerDefined",i[i.ForceMove=1]="ForceMove",i[i.ForceStay=2]="ForceStay"})(Zs||(Zs={}));function Qc(i,e,t,n){return i<t?!0:i>t||n===Zs.ForceMove?!1:n===Zs.ForceStay?!0:e}function HV(i,e,t,n,s){const r=BV(i),o=r===ms.AlwaysGrowsWhenTypingAtEdges||r===ms.GrowsOnlyWhenTypingBefore,a=r===ms.NeverGrowsWhenTypingAtEdges||r===ms.GrowsOnlyWhenTypingBefore,l=t-e,c=n,h=Math.min(l,c),u=i.start;let f=!1;const g=i.end;let p=!1;e<=u&&g<=t&&WV(i)&&(i.start=e,f=!0,i.end=e,p=!0);{const _=s?Zs.ForceMove:l>0?Zs.ForceStay:Zs.MarkerDefined;!f&&Qc(u,o,e,_)&&(f=!0),!p&&Qc(g,a,e,_)&&(p=!0)}if(h>0&&!s){const _=l>c?Zs.ForceStay:Zs.MarkerDefined;!f&&Qc(u,o,e+h,_)&&(f=!0),!p&&Qc(g,a,e+h,_)&&(p=!0)}{const _=s?Zs.ForceMove:Zs.MarkerDefined;!f&&Qc(u,o,t,_)&&(i.start=e+c,f=!0),!p&&Qc(g,a,t,_)&&(i.end=e+c,p=!0)}const m=c-l;f||(i.start=Math.max(0,u+m)),p||(i.end=Math.max(0,g+m)),i.start>i.end&&(i.end=i.start)}function VV(i,e,t){let n=i.root,s=0,r=0,o=0,a=0;const l=[];let c=0;for(;n!==Ee;){if(Li(n)){ot(n.left,!1),ot(n.right,!1),n===n.parent.right&&(s-=n.parent.delta),n=n.parent;continue}if(!Li(n.left)){if(r=s+n.maxEnd,r<e){ot(n,!0);continue}if(n.left!==Ee){n=n.left;continue}}if(o=s+n.start,o>t){ot(n,!0);continue}if(a=s+n.end,a>=e&&(n.setCachedOffsets(o,a,0),l[c++]=n),ot(n,!0),n.right!==Ee&&!Li(n.right)){s+=n.delta,n=n.right;continue}}return ot(i.root,!1),l}function zV(i,e,t,n){let s=i.root,r=0,o=0,a=0;const l=n-(t-e);for(;s!==Ee;){if(Li(s)){ot(s.left,!1),ot(s.right,!1),s===s.parent.right&&(r-=s.parent.delta),Za(s),s=s.parent;continue}if(!Li(s.left)){if(o=r+s.maxEnd,o<e){ot(s,!0);continue}if(s.left!==Ee){s=s.left;continue}}if(a=r+s.start,a>t){s.start+=l,s.end+=l,s.delta+=l,(s.delta<Je.MIN_SAFE_DELTA||s.delta>Je.MAX_SAFE_DELTA)&&(i.requestNormalizeDelta=!0),ot(s,!0);continue}if(ot(s,!0),s.right!==Ee&&!Li(s.right)){r+=s.delta,s=s.right;continue}}ot(i.root,!1)}function $V(i,e){let t=i.root;const n=[];let s=0;for(;t!==Ee;){if(Li(t)){ot(t.left,!1),ot(t.right,!1),t=t.parent;continue}if(t.left!==Ee&&!Li(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[s++]=t),ot(t,!0),t.right!==Ee&&!Li(t.right)){t=t.right;continue}}return ot(i.root,!1),n}function qV(i){let e=i.root;const t=[];let n=0;for(;e!==Ee;){if(Li(e)){ot(e.left,!1),ot(e.right,!1),e=e.parent;continue}if(e.left!==Ee&&!Li(e.left)){e=e.left;continue}if(e.right!==Ee&&!Li(e.right)){e=e.right;continue}t[n++]=e,ot(e,!0)}return ot(i.root,!1),t}function GL(i,e,t,n,s){let r=i.root,o=0,a=0,l=0;const c=[];let h=0;for(;r!==Ee;){if(Li(r)){ot(r.left,!1),ot(r.right,!1),r===r.parent.right&&(o-=r.parent.delta),r=r.parent;continue}if(r.left!==Ee&&!Li(r.left)){r=r.left;continue}a=o+r.start,l=o+r.end,r.setCachedOffsets(a,l,n);let u=!0;if(e&&r.ownerId&&r.ownerId!==e&&(u=!1),t&&x4(r)&&(u=!1),s&&!L4(r)&&(u=!1),u&&(c[h++]=r),ot(r,!0),r.right!==Ee&&!Li(r.right)){o+=r.delta,r=r.right;continue}}return ot(i.root,!1),c}function KV(i,e,t,n,s,r,o){let a=i.root,l=0,c=0,h=0,u=0;const f=[];let g=0;for(;a!==Ee;){if(Li(a)){ot(a.left,!1),ot(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;continue}if(!Li(a.left)){if(c=l+a.maxEnd,c<e){ot(a,!0);continue}if(a.left!==Ee){a=a.left;continue}}if(h=l+a.start,h>t){ot(a,!0);continue}if(u=l+a.end,u>=e){a.setCachedOffsets(h,u,r);let p=!0;n&&a.ownerId&&a.ownerId!==n&&(p=!1),s&&x4(a)&&(p=!1),o&&!L4(a)&&(p=!1),p&&(f[g++]=a)}if(ot(a,!0),a.right!==Ee&&!Li(a.right)){l+=a.delta,a=a.right;continue}}return ot(i.root,!1),f}function jL(i,e){if(i.root===Ee)return e.parent=Ee,e.left=Ee,e.right=Ee,ct(e,Ue.Black),i.root=e,i.root;GV(i,e),ha(e.parent);let t=e;for(;t!==i.root&&hn(t.parent)===Ue.Red;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;hn(n)===Ue.Red?(ct(t.parent,Ue.Black),ct(n,Ue.Black),ct(t.parent.parent,Ue.Red),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,kd(i,t)),ct(t.parent,Ue.Black),ct(t.parent.parent,Ue.Red),Cd(i,t.parent.parent))}else{const n=t.parent.parent.left;hn(n)===Ue.Red?(ct(t.parent,Ue.Black),ct(n,Ue.Black),ct(t.parent.parent,Ue.Red),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,Cd(i,t)),ct(t.parent,Ue.Black),ct(t.parent.parent,Ue.Red),kd(i,t.parent.parent))}return ct(i.root,Ue.Black),e}function GV(i,e){let t=0,n=i.root;const s=e.start,r=e.end;for(;;)if(YV(s,r,n.start+t,n.end+t)<0)if(n.left===Ee){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===Ee){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=Ee,e.right=Ee,ct(e,Ue.Red)}function YL(i,e){let t,n;if(e.left===Ee?(t=e.right,n=e,t.delta+=e.delta,(t.delta<Je.MIN_SAFE_DELTA||t.delta>Je.MAX_SAFE_DELTA)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===Ee?(t=e.left,n=e):(n=jV(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<Je.MIN_SAFE_DELTA||t.delta>Je.MAX_SAFE_DELTA)&&(i.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<Je.MIN_SAFE_DELTA||n.delta>Je.MAX_SAFE_DELTA)&&(i.requestNormalizeDelta=!0)),n===i.root){i.root=t,ct(t,Ue.Black),e.detach(),v_(),Za(t),i.root.parent=Ee;return}const s=hn(n)===Ue.Red;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,ct(n,hn(e)),e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==Ee&&(n.left.parent=n),n.right!==Ee&&(n.right.parent=n)),e.detach(),s){ha(t.parent),n!==e&&(ha(n),ha(n.parent)),v_();return}ha(t),ha(t.parent),n!==e&&(ha(n),ha(n.parent));let r;for(;t!==i.root&&hn(t)===Ue.Black;)t===t.parent.left?(r=t.parent.right,hn(r)===Ue.Red&&(ct(r,Ue.Black),ct(t.parent,Ue.Red),kd(i,t.parent),r=t.parent.right),hn(r.left)===Ue.Black&&hn(r.right)===Ue.Black?(ct(r,Ue.Red),t=t.parent):(hn(r.right)===Ue.Black&&(ct(r.left,Ue.Black),ct(r,Ue.Red),Cd(i,r),r=t.parent.right),ct(r,hn(t.parent)),ct(t.parent,Ue.Black),ct(r.right,Ue.Black),kd(i,t.parent),t=i.root)):(r=t.parent.left,hn(r)===Ue.Red&&(ct(r,Ue.Black),ct(t.parent,Ue.Red),Cd(i,t.parent),r=t.parent.left),hn(r.left)===Ue.Black&&hn(r.right)===Ue.Black?(ct(r,Ue.Red),t=t.parent):(hn(r.left)===Ue.Black&&(ct(r.right,Ue.Black),ct(r,Ue.Red),kd(i,r),r=t.parent.left),ct(r,hn(t.parent)),ct(t.parent,Ue.Black),ct(r.left,Ue.Black),Cd(i,t.parent),t=i.root));ct(t,Ue.Black),v_()}function jV(i){for(;i.left!==Ee;)i=i.left;return i}function v_(){Ee.parent=Ee,Ee.delta=0,Ee.start=0,Ee.end=0}function kd(i,e){const t=e.right;t.delta+=e.delta,(t.delta<Je.MIN_SAFE_DELTA||t.delta>Je.MAX_SAFE_DELTA)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==Ee&&(t.left.parent=e),t.parent=e.parent,e.parent===Ee?i.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,Za(e),Za(t)}function Cd(i,e){const t=e.left;e.delta-=t.delta,(e.delta<Je.MIN_SAFE_DELTA||e.delta>Je.MAX_SAFE_DELTA)&&(i.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==Ee&&(t.right.parent=e),t.parent=e.parent,e.parent===Ee?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,Za(e),Za(t)}function I4(i){let e=i.end;if(i.left!==Ee){const t=i.left.maxEnd;t>e&&(e=t)}if(i.right!==Ee){const t=i.right.maxEnd+i.delta;t>e&&(e=t)}return e}function Za(i){i.maxEnd=I4(i)}function ha(i){for(;i!==Ee;){const e=I4(i);if(i.maxEnd===e)return;i.maxEnd=e,i=i.parent}}function YV(i,e,t,n){return i===t?e-n:i-t}const XV=S("editor.lineHighlightBackground",null,d(649,"Background color for the highlight of line at the cursor position.")),lne=S("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:He},d(650,"Background color for the border around the line at the cursor position.")),cne=S("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},d(651,"Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0);S("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:Ht,hcLight:Ht},d(652,"Background color of the border around highlighted ranges."));S("editor.symbolHighlightBackground",{dark:Ma,light:Ma,hcDark:null,hcLight:null},d(653,"Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0);S("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:Ht,hcLight:Ht},d(654,"Background color of the border around highlighted symbols."));const T4=S("editorCursor.foreground",{dark:"#AEAFAD",light:P.black,hcDark:P.white,hcLight:"#0F4A85"},d(655,"Color of the editor cursor.")),A4=S("editorCursor.background",null,d(656,"The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),hne=S("editorMultiCursor.primary.foreground",T4,d(657,"Color of the primary editor cursor when multiple cursors are present.")),une=S("editorMultiCursor.primary.background",A4,d(658,"The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),dne=S("editorMultiCursor.secondary.foreground",T4,d(659,"Color of secondary editor cursors when multiple cursors are present.")),fne=S("editorMultiCursor.secondary.background",A4,d(660,"The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),N4=S("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},d(661,"Color of whitespace characters in the editor.")),gne=S("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:P.white,hcLight:"#292929"},d(662,"Color of editor line numbers.")),QV=S("editorIndentGuide.background",N4,d(663,"Color of the editor indentation guides."),!1,d(664,"'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),ZV=S("editorIndentGuide.activeBackground",N4,d(665,"Color of the active editor indentation guides."),!1,d(666,"'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),sb=S("editorIndentGuide.background1",QV,d(667,"Color of the editor indentation guides (1).")),pne=S("editorIndentGuide.background2","#00000000",d(668,"Color of the editor indentation guides (2).")),mne=S("editorIndentGuide.background3","#00000000",d(669,"Color of the editor indentation guides (3).")),bne=S("editorIndentGuide.background4","#00000000",d(670,"Color of the editor indentation guides (4).")),_ne=S("editorIndentGuide.background5","#00000000",d(671,"Color of the editor indentation guides (5).")),wne=S("editorIndentGuide.background6","#00000000",d(672,"Color of the editor indentation guides (6).")),rb=S("editorIndentGuide.activeBackground1",ZV,d(673,"Color of the active editor indentation guides (1).")),vne=S("editorIndentGuide.activeBackground2","#00000000",d(674,"Color of the active editor indentation guides (2).")),yne=S("editorIndentGuide.activeBackground3","#00000000",d(675,"Color of the active editor indentation guides (3).")),Sne=S("editorIndentGuide.activeBackground4","#00000000",d(676,"Color of the active editor indentation guides (4).")),kne=S("editorIndentGuide.activeBackground5","#00000000",d(677,"Color of the active editor indentation guides (5).")),Cne=S("editorIndentGuide.activeBackground6","#00000000",d(678,"Color of the active editor indentation guides (6).")),JV=S("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:Ht,hcLight:Ht},d(679,"Color of editor active line number"),!1,d(680,"Id is deprecated. Use 'editorLineNumber.activeForeground' instead."));S("editorLineNumber.activeForeground",JV,d(679,"Color of editor active line number"));const Ene=S("editorLineNumber.dimmedForeground",null,d(681,"Color of the final editor line when editor.renderFinalNewline is set to dimmed.")),xne=S("editorRuler.foreground",{dark:"#5A5A5A",light:P.lightgrey,hcDark:P.white,hcLight:"#292929"},d(682,"Color of the editor rulers."));S("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},d(683,"Foreground color of editor CodeLens"));S("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},d(684,"Background color behind matching brackets"));S("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:He,hcLight:He},d(685,"Color for matching brackets boxes"));const Lne=S("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},d(686,"Color of the overview ruler border.")),Dne=S("editorOverviewRuler.background",null,d(687,"Background color of the editor overview ruler."));S("editorGutter.background",Jr,d(688,"Background color of the editor gutter. The gutter contains the glyph margins and the line numbers."));S("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:P.fromHex("#fff").transparent(.8),hcLight:He},d(689,"Border color of unnecessary (unused) source code in the editor."));const Ine=S("editorUnnecessaryCode.opacity",{dark:P.fromHex("#000a"),light:P.fromHex("#0007"),hcDark:null,hcLight:null},d(690,`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`));S("editorGhostText.border",{dark:null,light:null,hcDark:P.fromHex("#fff").transparent(.8),hcLight:P.fromHex("#292929").transparent(.8)},d(691,"Border color of ghost text in the editor."));const Tne=S("editorGhostText.foreground",{dark:P.fromHex("#ffffff56"),light:P.fromHex("#0007"),hcDark:null,hcLight:null},d(692,"Foreground color of the ghost text in the editor."));S("editorGhostText.background",null,d(693,"Background color of the ghost text in the editor."));const ez=new P(new R(0,122,204,.6)),Ane=S("editorOverviewRuler.rangeHighlightForeground",ez,d(694,"Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),tz=S("editorOverviewRuler.errorForeground",{dark:new P(new R(255,18,18,.7)),light:new P(new R(255,18,18,.7)),hcDark:new P(new R(255,50,50,1)),hcLight:"#B5200D"},d(695,"Overview ruler marker color for errors.")),iz=S("editorOverviewRuler.warningForeground",{dark:cc,light:cc,hcDark:bm,hcLight:bm},d(696,"Overview ruler marker color for warnings.")),nz=S("editorOverviewRuler.infoForeground",{dark:$h,light:$h,hcDark:_m,hcLight:_m},d(697,"Overview ruler marker color for infos.")),sz=S("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},d(698,"Foreground color of brackets (1). Requires enabling bracket pair colorization.")),rz=S("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},d(699,"Foreground color of brackets (2). Requires enabling bracket pair colorization.")),oz=S("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},d(700,"Foreground color of brackets (3). Requires enabling bracket pair colorization.")),az=S("editorBracketHighlight.foreground4","#00000000",d(701,"Foreground color of brackets (4). Requires enabling bracket pair colorization.")),lz=S("editorBracketHighlight.foreground5","#00000000",d(702,"Foreground color of brackets (5). Requires enabling bracket pair colorization.")),cz=S("editorBracketHighlight.foreground6","#00000000",d(703,"Foreground color of brackets (6). Requires enabling bracket pair colorization.")),hz=S("editorBracketHighlight.unexpectedBracket.foreground",{dark:new P(new R(255,18,18,.8)),light:new P(new R(255,18,18,.8)),hcDark:new P(new R(255,50,50,1)),hcLight:"#B5200D"},d(704,"Foreground color of unexpected brackets.")),Nne=S("editorBracketPairGuide.background1","#00000000",d(705,"Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),Rne=S("editorBracketPairGuide.background2","#00000000",d(706,"Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),Mne=S("editorBracketPairGuide.background3","#00000000",d(707,"Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),One=S("editorBracketPairGuide.background4","#00000000",d(708,"Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),Fne=S("editorBracketPairGuide.background5","#00000000",d(709,"Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),Pne=S("editorBracketPairGuide.background6","#00000000",d(710,"Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),Bne=S("editorBracketPairGuide.activeBackground1","#00000000",d(711,"Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),Wne=S("editorBracketPairGuide.activeBackground2","#00000000",d(712,"Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),Une=S("editorBracketPairGuide.activeBackground3","#00000000",d(713,"Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),Hne=S("editorBracketPairGuide.activeBackground4","#00000000",d(714,"Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),Vne=S("editorBracketPairGuide.activeBackground5","#00000000",d(715,"Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),zne=S("editorBracketPairGuide.activeBackground6","#00000000",d(716,"Background color of active bracket pair guides (6). Requires enabling bracket pair guides."));S("editorUnicodeHighlight.border",cc,d(717,"Border color used to highlight unicode characters."));S("editorUnicodeHighlight.background",sP,d(718,"Background color used to highlight unicode characters."));nS((i,e)=>{const t=i.getColor(Jr),n=i.getColor(XV),s=n&&!n.isTransparent()?n:t;s&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${s}; }`)});let Hw=class extends ${constructor(e,t){super(),this._markerService=t,this._onDidChangeMarker=this._register(new A),this.onDidChangeMarker=this._onDidChangeMarker.event,this._suppressedRanges=new oi,this._markerDecorations=new oi,e.getModels().forEach(n=>this._onModelAdded(n)),this._register(e.onModelAdded(this._onModelAdded,this)),this._register(e.onModelRemoved(this._onModelRemoved,this)),this._register(this._markerService.onMarkerChanged(this._handleMarkerChange,this))}dispose(){super.dispose(),this._markerDecorations.forEach(e=>e.dispose()),this._markerDecorations.clear()}getMarker(e,t){const n=this._markerDecorations.get(e);return n&&n.getMarker(t)||null}getLiveMarkers(e){const t=this._markerDecorations.get(e);return t?t.getMarkers():[]}addMarkerSuppression(e,t){let n=this._suppressedRanges.get(e);return n||(n=new Set,this._suppressedRanges.set(e,n)),n.add(t),this._handleMarkerChange([e]),fe(()=>{const s=this._suppressedRanges.get(e);s&&(s.delete(t),s.size===0&&this._suppressedRanges.delete(e),this._handleMarkerChange([e]))})}_handleMarkerChange(e){e.forEach(t=>{const n=this._markerDecorations.get(t);n&&this._updateDecorations(n)})}_onModelAdded(e){const t=new uz(e);this._markerDecorations.set(e.uri,t),this._updateDecorations(t)}_onModelRemoved(e){const t=this._markerDecorations.get(e.uri);t&&(t.dispose(),this._markerDecorations.delete(e.uri)),(e.uri.scheme===ge.inMemory||e.uri.scheme===ge.internal||e.uri.scheme===ge.vscode)&&this._markerService?.read({resource:e.uri}).map(n=>n.owner).forEach(n=>this._markerService.remove(n,[e.uri]))}_updateDecorations(e){let t=this._markerService.read({resource:e.model.uri,take:500});const n=this._suppressedRanges.get(e.model.uri);n&&(t=t.filter(s=>!Be.some(n,r=>H.areIntersectingOrTouching(r,s)))),e.update(t)&&this._onDidChangeMarker.fire(e.model)}};Hw=G([L(0,yr),L(1,E4)],Hw);class uz extends ${constructor(e){super(),this.model=e,this._map=new KR,this._register(fe(()=>{this.model.deltaDecorations([...this._map.values()],[]),this._map.clear()}))}update(e){const{added:t,removed:n}=HR(new Set(this._map.keys()),new Set(e));if(t.length===0&&n.length===0)return!1;const s=n.map(a=>this._map.get(a)),r=t.map(a=>({range:this._createDecorationRange(this.model,a),options:this._createDecorationOption(a)})),o=this.model.deltaDecorations(s,r);for(const a of n)this._map.delete(a);for(let a=0;a<o.length;a++)this._map.set(t[a],o[a]);return!0}getMarker(e){return this._map.getKey(e.id)}getMarkers(){const e=[];return this._map.forEach((t,n)=>{const s=this.model.getDecorationRange(t);s&&e.push([s,n])}),e}_createDecorationRange(e,t){let n=H.lift(t);if(t.severity===es.Hint&&!this._hasMarkerTag(t,ba.Unnecessary)&&!this._hasMarkerTag(t,ba.Deprecated)&&(n=n.setEndPosition(n.startLineNumber,n.startColumn+2)),n=e.validateRange(n),n.isEmpty()){const s=e.getLineLastNonWhitespaceColumn(n.startLineNumber)||e.getLineMaxColumn(n.startLineNumber);if(s===1||n.endColumn>=s)return n;const r=e.getWordAtPosition(n.getStartPosition());r&&(n=new H(n.startLineNumber,r.startColumn,n.endLineNumber,r.endColumn))}else if(t.endColumn===Number.MAX_VALUE&&t.startColumn===1&&n.startLineNumber===n.endLineNumber){const s=e.getLineFirstNonWhitespaceColumn(t.startLineNumber);s<n.endColumn&&(n=new H(n.startLineNumber,s,n.endLineNumber,n.endColumn),t.startColumn=s)}return n}_createDecorationOption(e){let t,n,s,r,o;switch(e.severity){case es.Hint:this._hasMarkerTag(e,ba.Deprecated)?t=void 0:this._hasMarkerTag(e,ba.Unnecessary)?t=Is.EditorUnnecessaryDecoration:t=Is.EditorHintDecoration,s=0;break;case es.Info:t=Is.EditorInfoDecoration,n=zc(nz),s=10,o={color:zc(gP),position:od.Inline};break;case es.Warning:t=Is.EditorWarningDecoration,n=zc(iz),s=20,o={color:zc(pP),position:od.Inline};break;case es.Error:default:t=Is.EditorErrorDecoration,n=zc(tz),s=30,o={color:zc(mP),position:od.Inline};break}return e.tags&&(e.tags.indexOf(ba.Unnecessary)!==-1&&(r=Is.EditorUnnecessaryInlineDecoration),e.tags.indexOf(ba.Deprecated)!==-1&&(r=Is.EditorDeprecatedInlineDecoration)),{description:"marker-decoration",stickiness:ms.NeverGrowsWhenTypingAtEdges,className:t,showIfCollapsed:!0,overviewRuler:{color:n,position:$d.Right},minimap:o,zIndex:s,inlineClassName:r}}_hasMarkerTag(e,t){return e.tags?e.tags.indexOf(t)>=0:!1}}const dz=be("markerDecorationsService");class Ba{static _nextVisibleColumn(e,t,n){return e===k.Tab?Ba.nextRenderTabStop(t,n):W7(e)||Sy(e)?t+2:t+1}static visibleColumnFromColumn(e,t,n){const s=Math.min(t-1,e.length),r=e.substring(0,s),o=new zp(r);let a=0;for(;!o.eol();){const l=Vp(r,s,o.offset);o.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,n)}return a}static toStatusbarColumn(e,t,n){const s=e.substring(0,Math.min(t-1,e.length)),r=new C1(s);let o=0;for(;!r.eol();)r.nextCodePoint()===k.Tab?o=Ba.nextRenderTabStop(o,n):o=o+1;return o+1}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;const s=e.length,r=new zp(e);let o=0,a=1;for(;!r.eol();){const l=Vp(e,s,r.offset);r.nextGraphemeLength();const c=this._nextVisibleColumn(l,o,n),h=r.offset+1;if(c>=t){const u=t-o;return c-t<u?h:a}o=c,a=h}return s+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return Ba.nextRenderTabStop(e,t)}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Ba.prevRenderTabStop(e,t)}}function fz(i,e,t){let n=0;for(let r=0;r<i.length;r++)i.charAt(r)==="	"?n=Ba.nextIndentTabStop(n,e):n++;let s="";if(!t){const r=Math.floor(n/e);n=n%e;for(let o=0;o<r;o++)s+="	"}for(let r=0;r<n;r++)s+=" ";return s}function gz(i,e,t){let n=ql(i);return n===-1&&(n=i.length),fz(i.substring(0,n),e,t)+i.substring(n)}function qne(i,e){const t=i.getCount(),n=i.findTokenIndexAtOffset(e),s=i.getLanguageId(n);let r=n;for(;r+1<t&&i.getLanguageId(r+1)===s;)r++;let o=n;for(;o>0&&i.getLanguageId(o-1)===s;)o--;return new pz(i,s,o,r+1,i.getStartOffset(o),i.getEndOffset(r))}class pz{constructor(e,t,n,s,r,o){this._scopedLineTokensBrand=void 0,this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=s,this.firstCharOffset=r,this._lastCharOffset=o,this.languageIdCodec=e.languageIdCodec}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getLineLength(){return this._lastCharOffset-this.firstCharOffset}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}toIViewLineTokens(){return this._actual.sliceAndInflate(this.firstCharOffset,this._lastCharOffset,0)}}var Vw;(function(i){i[i.value=3]="value"})(Vw||(Vw={}));function go(i){return(i&Vw.value)!==0}let y_;function R4(){return y_||(y_=new TextDecoder("UTF-16LE")),y_}let S_;function mz(){return S_||(S_=new TextDecoder("UTF-16BE")),S_}let k_;function M4(){return k_||(k_=DM()?R4():mz()),k_}function bz(i,e,t){const n=new Uint16Array(i.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?_z(i,e,t):R4().decode(n)}function _z(i,e,t){const n=[];let s=0;for(let r=0;r<t;r++){const o=a7(i,e);e+=2,n[s++]=String.fromCharCode(o)}return n.join("")}class Kne{constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";const e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return M4().decode(e)}_flushBuffer(){const e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){const t=this._capacity-this._bufferLength;t<=1&&(t===0||hs(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){const t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}}class Vm{constructor(e,t,n,s,r,o){this._richEditBracketBrand=void 0,this.languageId=e,this.index=t,this.open=n,this.close=s,this.forwardRegex=r,this.reversedRegex=o,this._openSet=Vm._toSet(this.open),this._closeSet=Vm._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){const t=new Set;for(const n of e)t.add(n);return t}}function wz(i){const e=i.length;i=i.map(o=>[o[0].toLowerCase(),o[1].toLowerCase()]);const t=[];for(let o=0;o<e;o++)t[o]=o;const n=(o,a)=>{const[l,c]=o,[h,u]=a;return l===h||l===u||c===h||c===u},s=(o,a)=>{const l=Math.min(o,a),c=Math.max(o,a);for(let h=0;h<e;h++)t[h]===c&&(t[h]=l)};for(let o=0;o<e;o++){const a=i[o];for(let l=o+1;l<e;l++){const c=i[l];n(a,c)&&s(t[o],t[l])}}const r=[];for(let o=0;o<e;o++){const a=[],l=[];for(let c=0;c<e;c++)if(t[c]===o){const[h,u]=i[c];a.push(h),l.push(u)}a.length>0&&r.push({open:a,close:l})}return r}class Gne{constructor(e,t){this._richEditBracketsBrand=void 0;const n=wz(t);this.brackets=n.map((s,r)=>new Vm(e,r,s.open,s.close,vz(s.open,s.close,n,r),yz(s.open,s.close,n,r))),this.forwardRegex=Sz(this.brackets),this.reversedRegex=kz(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(const s of this.brackets){for(const r of s.open)this.textIsBracket[r]=s,this.textIsOpenBracket[r]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,r.length);for(const r of s.close)this.textIsBracket[r]=s,this.textIsOpenBracket[r]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,r.length)}}}function O4(i,e,t,n){for(let s=0,r=e.length;s<r;s++){if(s===t)continue;const o=e[s];for(const a of o.open)a.indexOf(i)>=0&&n.push(a);for(const a of o.close)a.indexOf(i)>=0&&n.push(a)}}function F4(i,e){return i.length-e.length}function ob(i){if(i.length<=1)return i;const e=[],t=new Set;for(const n of i)t.has(n)||(e.push(n),t.add(n));return e}function vz(i,e,t,n){let s=[];s=s.concat(i),s=s.concat(e);for(let r=0,o=s.length;r<o;r++)O4(s[r],t,n,s);return s=ob(s),s.sort(F4),s.reverse(),ab(s)}function yz(i,e,t,n){let s=[];s=s.concat(i),s=s.concat(e);for(let r=0,o=s.length;r<o;r++)O4(s[r],t,n,s);return s=ob(s),s.sort(F4),s.reverse(),ab(s.map(zS))}function Sz(i){let e=[];for(const t of i){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=ob(e),ab(e)}function kz(i){let e=[];for(const t of i){for(const n of t.open)e.push(n);for(const n of t.close)e.push(n)}return e=ob(e),ab(e.map(zS))}function Cz(i){const e=/^[\w ]+$/.test(i);return i=Ga(i),e?`\\b${i}\\b`:i}function ab(i,e){const t=`(${i.map(Cz).join(")|(")})`;return EI(t,!0,e)}const zS=function(){function i(n){const s=new Uint16Array(n.length);let r=0;for(let o=n.length-1;o>=0;o--)s[r++]=n.charCodeAt(o);return M4().decode(s)}let e=null,t=null;return function(s){return e!==s&&(e=s,t=i(e)),t}}();class js{static _findPrevBracketInText(e,t,n,s){const r=n.match(e);if(!r)return null;const o=n.length-(r.index||0),a=r[0].length,l=s+o;return new H(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,s,r){const a=zS(n).substring(n.length-r,n.length-s);return this._findPrevBracketInText(e,t,a,s)}static findNextBracketInText(e,t,n,s){const r=n.match(e);if(!r)return null;const o=r.index||0,a=r[0].length;if(a===0)return null;const l=s+o;return new H(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,s,r){const o=n.substring(s,r);return this.findNextBracketInText(e,t,o,s)}}class XL{constructor(e,t,n,s){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=n,this.isInvalid=s}}class Ez{constructor(e,t,n,s,r,o){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=s,this.nestingLevelOfEqualBracketType=r,this.bracketPairNode=o}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}get closingBracketInfo(){return this.bracketPairNode.closingBracket?.bracketInfo}}class xz extends Ez{constructor(e,t,n,s,r,o,a){super(e,t,n,s,r,o),this.minVisibleColumnIndentation=a}}function Lz(i,e,t,n){return i!==t?Wt(t-i,n):Wt(0,n-e)}const Cn=0;function zm(i){return i===0}const ss=2**26;function Wt(i,e){return i*ss+e}function _s(i){const e=i,t=Math.floor(e/ss),n=e-t*ss;return new pi(t,n)}function Dz(i){return Math.floor(i/ss)}function jne(i){return i}function Gt(i,e){let t=i+e;return e>=ss&&(t=t-i%ss),t}function Iz(i,e){return i.reduce((t,n)=>Gt(t,e(n)),Cn)}function P4(i,e){return i===e}function hf(i,e){const t=i,n=e;if(n-t<=0)return Cn;const r=Math.floor(t/ss),o=Math.floor(n/ss),a=n-o*ss;if(r===o){const l=t-r*ss;return Wt(0,a-l)}else return Wt(o-r,a)}function Ih(i,e){return i<e}function Th(i,e){return i<=e}function Zu(i,e){return i>=e}function wh(i){return Wt(i.lineNumber-1,i.column-1)}function Zl(i,e){const t=i,n=Math.floor(t/ss),s=t-n*ss,r=e,o=Math.floor(r/ss),a=r-o*ss;return new H(n+1,s+1,o+1,a+1)}function Tz(i){const e=S1(i);return Wt(e.length-1,e[e.length-1].length)}const $g=[];class ni{static{this.cache=new Array(129)}static create(e,t){if(e<=128&&t.length===0){let n=ni.cache[e];return n||(n=new ni(e,t),ni.cache[e]=n),n}return new ni(e,t)}static{this.empty=ni.create(0,$g)}static getEmpty(){return this.empty}constructor(e,t){this.items=e,this.additionalItems=t}add(e,t){const n=t.getKey(e);let s=n>>5;if(s===0){const o=1<<n|this.items;return o===this.items?this:ni.create(o,this.additionalItems)}s--;const r=this.additionalItems.slice(0);for(;r.length<s;)r.push(0);return r[s]|=1<<(n&31),ni.create(this.items,r)}has(e,t){const n=t.getKey(e);let s=n>>5;return s===0?(this.items&1<<n)!==0:(s--,((this.additionalItems[s]||0)&1<<(n&31))!==0)}merge(e){const t=this.items|e.items;if(this.additionalItems===$g&&e.additionalItems===$g)return t===this.items?this:t===e.items?e:ni.create(t,$g);const n=[];for(let s=0;s<Math.max(this.additionalItems.length,e.additionalItems.length);s++){const r=this.additionalItems[s]||0,o=e.additionalItems[s]||0;n.push(r|o)}return ni.create(t,n)}intersects(e){if((this.items&e.items)!==0)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if((this.additionalItems[t]&e.additionalItems[t])!==0)return!0;return!1}equals(e){if(this.items!==e.items||this.additionalItems.length!==e.additionalItems.length)return!1;for(let t=0;t<this.additionalItems.length;t++)if(this.additionalItems[t]!==e.additionalItems[t])return!1;return!0}}const QL={getKey(i){return i}};class Az{constructor(){this.items=new Map}getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}reverseLookup(e){return[...this.items].find(([t,n])=>n===e)?.[0]}reverseLookupSet(e){const t=[];for(const[n]of this.items)e.has(n,this)&&t.push(n);return t}keys(){return this.items.keys()}}var Et;(function(i){i[i.Text=0]="Text",i[i.Bracket=1]="Bracket",i[i.Pair=2]="Pair",i[i.UnexpectedClosingBracket=3]="UnexpectedClosingBracket",i[i.List=4]="List"})(Et||(Et={}));class $S{get length(){return this._length}constructor(e){this._length=e}}class Ah extends $S{static create(e,t,n){let s=e.length;return t&&(s=Gt(s,t.length)),n&&(s=Gt(s,n.length)),new Ah(s,e,t,n,t?t.missingOpeningBracketIds:ni.getEmpty())}get kind(){return Et.Pair}get listHeight(){return 0}get childrenLength(){return 3}getChild(e){switch(e){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){const e=[];return e.push(this.openingBracket),this.child&&e.push(this.child),this.closingBracket&&e.push(this.closingBracket),e}constructor(e,t,n,s,r){super(e),this.openingBracket=t,this.child=n,this.closingBracket=s,this.missingOpeningBracketIds=r}canBeReused(e){return!(this.closingBracket===null||e.intersects(this.missingOpeningBracketIds))}flattenLists(){return Ah.create(this.openingBracket.flattenLists(),this.child&&this.child.flattenLists(),this.closingBracket&&this.closingBracket.flattenLists())}deepClone(){return new Ah(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(e,t){return this.child?this.child.computeMinIndentation(Gt(e,this.openingBracket.length),t):Number.MAX_SAFE_INTEGER}}class Vs extends $S{static create23(e,t,n,s=!1){let r=e.length,o=e.missingOpeningBracketIds;if(e.listHeight!==t.listHeight)throw new Error("Invalid list heights");if(r=Gt(r,t.length),o=o.merge(t.missingOpeningBracketIds),n){if(e.listHeight!==n.listHeight)throw new Error("Invalid list heights");r=Gt(r,n.length),o=o.merge(n.missingOpeningBracketIds)}return s?new Nz(r,e.listHeight+1,e,t,n,o):new uf(r,e.listHeight+1,e,t,n,o)}static create(e,t=!1){if(e.length===0)return this.getEmpty();{let n=e[0].length,s=e[0].missingOpeningBracketIds;for(let r=1;r<e.length;r++)n=Gt(n,e[r].length),s=s.merge(e[r].missingOpeningBracketIds);return t?new ZL(n,e[0].listHeight+1,e,s):new df(n,e[0].listHeight+1,e,s)}}static getEmpty(){return new ZL(Cn,0,[],ni.getEmpty())}get kind(){return Et.List}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}constructor(e,t,n){super(e),this.listHeight=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();const e=this.childrenLength;if(e===0)return;const t=this.getChild(e-1),n=t.kind===Et.List?t.toMutable():t;return t!==n&&this.setChild(e-1,n),n}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;const t=this.getChild(0),n=t.kind===Et.List?t.toMutable():t;return t!==n&&this.setChild(0,n),n}canBeReused(e){if(e.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let t=this;for(;t.kind===Et.List;){const n=t.childrenLength;if(n===0)throw new De;t=t.getChild(n-1)}return t.canBeReused(e)}handleChildrenChanged(){this.throwIfImmutable();const e=this.childrenLength;let t=this.getChild(0).length,n=this.getChild(0).missingOpeningBracketIds;for(let s=1;s<e;s++){const r=this.getChild(s);t=Gt(t,r.length),n=n.merge(r.missingOpeningBracketIds)}this._length=t,this._missingOpeningBracketIds=n,this.cachedMinIndentation=-1}flattenLists(){const e=[];for(const t of this.children){const n=t.flattenLists();n.kind===Et.List?e.push(...n.children):e.push(n)}return Vs.create(e)}computeMinIndentation(e,t){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let n=Number.MAX_SAFE_INTEGER,s=e;for(let r=0;r<this.childrenLength;r++){const o=this.getChild(r);o&&(n=Math.min(n,o.computeMinIndentation(s,t)),s=Gt(s,o.length))}return this.cachedMinIndentation=n,n}}class uf extends Vs{get childrenLength(){return this._item3!==null?3:2}getChild(e){switch(e){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(e,t){switch(e){case 0:this._item1=t;return;case 1:this._item2=t;return;case 2:this._item3=t;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}constructor(e,t,n,s,r,o){super(e,t,o),this._item1=n,this._item2=s,this._item3=r}deepClone(){return new uf(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=e,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item3;return this._item3=null,this.handleChildrenChanged(),e}prependChildOfSameHeight(e){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=e,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();const e=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),e}toMutable(){return this}}class Nz extends uf{toMutable(){return new uf(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}class df extends Vs{get childrenLength(){return this._children.length}getChild(e){return this._children[e]}setChild(e,t){this._children[e]=t}get children(){return this._children}constructor(e,t,n,s){super(e,t,s),this._children=n}deepClone(){const e=new Array(this._children.length);for(let t=0;t<this._children.length;t++)e[t]=this._children[t].deepClone();return new df(this.length,this.listHeight,e,this.missingOpeningBracketIds)}appendChildOfSameHeight(e){this.throwIfImmutable(),this._children.push(e),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();const e=this._children.pop();return this.handleChildrenChanged(),e}prependChildOfSameHeight(e){this.throwIfImmutable(),this._children.unshift(e),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();const e=this._children.shift();return this.handleChildrenChanged(),e}toMutable(){return this}}class ZL extends df{toMutable(){return new df(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}}const Rz=[];class qS extends $S{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return Rz}flattenLists(){return this}deepClone(){return this}}class Tl extends qS{get kind(){return Et.Text}get missingOpeningBracketIds(){return ni.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){const n=_s(e),s=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,r=Dz(Gt(e,this.length))+1;let o=Number.MAX_SAFE_INTEGER;for(let a=s;a<=r;a++){const l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;const h=Ba.visibleColumnFromColumn(c,l,t.getOptions().tabSize);o=Math.min(o,h)}return o}}class $m extends qS{static create(e,t,n){return new $m(e,t,n)}get kind(){return Et.Bracket}get missingOpeningBracketIds(){return ni.getEmpty()}constructor(e,t,n){super(e),this.bracketInfo=t,this.bracketIds=n}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(e){return!1}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class Mz extends qS{get kind(){return Et.UnexpectedClosingBracket}constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}}class ff{static fromModelContentChanges(e){return e.map(n=>{const s=H.lift(n.range);return new ff(wh(s.getStartPosition()),wh(s.getEndPosition()),Tz(n.text))}).reverse()}constructor(e,t,n){this.startOffset=e,this.endOffset=t,this.newLength=n}toString(){return`[${_s(this.startOffset)}...${_s(this.endOffset)}) -> ${_s(this.newLength)}`}}class Oz{constructor(e){this.nextEditIdx=0,this.deltaOldToNewLineCount=0,this.deltaOldToNewColumnCount=0,this.deltaLineIdxInOld=-1,this.edits=e.map(t=>KS.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);const t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):null;return n===null?null:hf(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?Wt(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):Wt(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){const t=_s(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?Wt(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):Wt(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){const t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(Th(n,e)){this.nextEditIdx++;const s=_s(n),r=_s(this.translateOldToCur(t.endOffsetBeforeObj)),o=s.lineCount-r.lineCount;this.deltaOldToNewLineCount+=o;const a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=s.columnCount-r.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}}class KS{static from(e){return new KS(e.startOffset,e.endOffset,e.newLength)}constructor(e,t,n){this.endOffsetBeforeObj=_s(t),this.endOffsetAfterObj=_s(Gt(e,n)),this.offsetObj=_s(e)}}var kn;(function(i){i[i.Text=0]="Text",i[i.OpeningBracket=1]="OpeningBracket",i[i.ClosingBracket=2]="ClosingBracket"})(kn||(kn={}));class xa{constructor(e,t,n,s,r){this.length=e,this.kind=t,this.bracketId=n,this.bracketIds=s,this.astNode=r}}class Fz{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.reader=new Pz(this.textModel,this.bracketTokens),this._offset=Cn,this.didPeek=!1,this.peeked=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}get offset(){return this._offset}get length(){return Wt(this.textBufferLineCount-1,this.textBufferLastLineLength)}getText(){return this.textModel.getValue()}skip(e){this.didPeek=!1,this._offset=Gt(this._offset,e);const t=_s(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=Gt(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}}class Pz{constructor(e,t){this.textModel=e,this.bracketTokens=t,this.lineIdx=0,this.line=null,this.lineCharOffset=0,this.lineTokens=null,this.lineTokenOffset=0,this.peekedToken=null,this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}read(){if(this.peekedToken){const r=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=r.length,r}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));const e=this.lineIdx,t=this.lineCharOffset;let n=0;for(;;){const r=this.lineTokens,o=r.getCount();let a=null;if(this.lineTokenOffset<o){const l=r.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<o&&l===r.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;const c=er.getTokenType(l)===Jn.Other,h=er.containsBalancedBrackets(l),u=r.getEndOffset(this.lineTokenOffset);if(h&&c&&this.lineCharOffset<u){const f=r.getLanguageId(this.lineTokenOffset),g=this.line.substring(this.lineCharOffset,u),p=this.bracketTokens.getSingleLanguageBracketTokens(f),m=p.regExpGlobal;if(m){m.lastIndex=0;const _=m.exec(g);_&&(a=p.getToken(_[0]),a&&(this.lineCharOffset+=_.index))}}if(n+=u-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=u}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}const s=Lz(e,t,this.lineIdx,this.lineCharOffset);return new xa(s,kn.Text,-1,ni.getEmpty(),new Tl(s))}}class Bz{constructor(e,t){this.text=e,this._offset=Cn,this.idx=0;const n=t.getRegExpStr(),s=n?new RegExp(n+`|
`,"gi"):null,r=[];let o,a=0,l=0,c=0,h=0;const u=[];for(let p=0;p<60;p++)u.push(new xa(Wt(0,p),kn.Text,-1,ni.getEmpty(),new Tl(Wt(0,p))));const f=[];for(let p=0;p<60;p++)f.push(new xa(Wt(1,p),kn.Text,-1,ni.getEmpty(),new Tl(Wt(1,p))));if(s)for(s.lastIndex=0;(o=s.exec(e))!==null;){const p=o.index,m=o[0];if(m===`
`)a++,l=p+1;else{if(c!==p){let _;if(h===a){const v=p-c;if(v<u.length)_=u[v];else{const y=Wt(0,v);_=new xa(y,kn.Text,-1,ni.getEmpty(),new Tl(y))}}else{const v=a-h,y=p-l;if(v===1&&y<f.length)_=f[y];else{const E=Wt(v,y);_=new xa(E,kn.Text,-1,ni.getEmpty(),new Tl(E))}}r.push(_)}r.push(t.getToken(m)),c=p+m.length,h=a}}const g=e.length;if(c!==g){const p=h===a?Wt(0,g-c):Wt(a-h,g-l);r.push(new xa(p,kn.Text,-1,ni.getEmpty(),new Tl(p)))}this.length=Wt(a,g-l),this.tokens=r}get offset(){return this._offset}read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new ER}getText(){return this.text}}class GS{static createFromLanguage(e,t){function n(r){return t.getKey(`${r.languageId}:::${r.bracketText}`)}const s=new Map;for(const r of e.bracketsNew.openingBrackets){const o=Wt(0,r.bracketText.length),a=n(r),l=ni.getEmpty().add(a,QL);s.set(r.bracketText,new xa(o,kn.OpeningBracket,a,l,$m.create(o,r,l)))}for(const r of e.bracketsNew.closingBrackets){const o=Wt(0,r.bracketText.length);let a=ni.getEmpty();const l=r.getOpeningBrackets();for(const c of l)a=a.add(n(c),QL);s.set(r.bracketText,new xa(o,kn.ClosingBracket,n(l[0]),a,$m.create(o,r,a)))}return new GS(s)}constructor(e){this.map=e,this.hasRegExp=!1,this._regExpGlobal=null}getRegExpStr(){if(this.isEmpty)return null;{const e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>Wz(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){const e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(const[t,n]of this.map)if(n.kind===kn.ClosingBracket&&n.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}}function Wz(i){let e=Ga(i);return/^[\w ]+/.test(i)&&(e=`\\b${e}`),/[\w ]+$/.test(i)&&(e=`${e}\\b`),e}class Uz{constructor(e,t){this.denseKeyProvider=e,this.getLanguageConfiguration=t,this.languageIdToBracketTokens=new Map}didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=GS.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}getToken(e,t){return this.getSingleLanguageBracketTokens(t).getToken(e)}}function Hz(i){if(i.length===0)return null;if(i.length===1)return i[0];let e=0;function t(){if(e>=i.length)return null;const o=e,a=i[o].listHeight;for(e++;e<i.length&&i[e].listHeight===a;)e++;return e-o>=2?B4(o===0&&e===i.length?i:i.slice(o,e),!1):i[o]}let n=t(),s=t();if(!s)return n;for(let o=t();o;o=t())JL(n,s)<=JL(s,o)?(n=C_(n,s),s=o):s=C_(s,o);return C_(n,s)}function B4(i,e=!1){if(i.length===0)return null;if(i.length===1)return i[0];let t=i.length;for(;t>3;){const n=t>>1;for(let s=0;s<n;s++){const r=s<<1;i[s]=Vs.create23(i[r],i[r+1],r+3===t?i[r+2]:null,e)}t=n}return Vs.create23(i[0],i[1],t>=3?i[2]:null,e)}function JL(i,e){return Math.abs(i.listHeight-e.listHeight)}function C_(i,e){return i.listHeight===e.listHeight?Vs.create23(i,e,null,!1):i.listHeight>e.listHeight?Vz(i,e):zz(e,i)}function Vz(i,e){i=i.toMutable();let t=i;const n=[];let s;for(;;){if(e.listHeight===t.listHeight){s=e;break}if(t.kind!==Et.List)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let r=n.length-1;r>=0;r--){const o=n[r];s?o.childrenLength>=3?s=Vs.create23(o.unappendChild(),s,null,!1):(o.appendChildOfSameHeight(s),s=void 0):o.handleChildrenChanged()}return s?Vs.create23(i,s,null,!1):i}function zz(i,e){i=i.toMutable();let t=i;const n=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==Et.List)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let s=e;for(let r=n.length-1;r>=0;r--){const o=n[r];s?o.childrenLength>=3?s=Vs.create23(s,o.unprependChild(),null,!1):(o.prependChildOfSameHeight(s),s=void 0):o.handleChildrenChanged()}return s?Vs.create23(s,i,null,!1):i}class $z{constructor(e){this.lastOffset=Cn,this.nextNodes=[e],this.offsets=[Cn],this.idxs=[]}readLongestNodeAt(e,t){if(Ih(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){const n=Ou(this.nextNodes);if(!n)return;const s=Ou(this.offsets);if(Ih(e,s))return;if(Ih(s,e))if(Gt(s,n.length)<=e)this.nextNodeAfterCurrent();else{const r=E_(n);r!==-1?(this.nextNodes.push(n.getChild(r)),this.offsets.push(s),this.idxs.push(r)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{const r=E_(n);if(r===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(r)),this.offsets.push(s),this.idxs.push(r)}}}}nextNodeAfterCurrent(){for(;;){const e=Ou(this.offsets),t=Ou(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;const n=Ou(this.nextNodes),s=E_(n,this.idxs[this.idxs.length-1]);if(s!==-1){this.nextNodes.push(n.getChild(s)),this.offsets.push(Gt(e,t.length)),this.idxs[this.idxs.length-1]=s;break}else this.idxs.pop()}}}function E_(i,e=-1){for(;;){if(e++,e>=i.childrenLength)return-1;if(i.getChild(e))return e}}function Ou(i){return i.length>0?i[i.length-1]:void 0}function eD(i,e,t,n){return new qz(i,e,t,n).parseDocument()}class qz{get nodesConstructed(){return this._itemsConstructed}get nodesReused(){return this._itemsFromCache}constructor(e,t,n,s){if(this.tokenizer=e,this.createImmutableLists=s,this._itemsConstructed=0,this._itemsFromCache=0,n&&s)throw new Error("Not supported");this.oldNodeReader=n?new $z(n):void 0,this.positionMapper=new Oz(t)}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(ni.getEmpty(),0);return e||(e=Vs.getEmpty()),e}parseList(e,t){const n=[];for(;;){let r=this.tryReadChildFromCache(e);if(!r){const o=this.tokenizer.peek();if(!o||o.kind===kn.ClosingBracket&&o.bracketIds.intersects(e))break;r=this.parseChild(e,t+1)}r.kind===Et.List&&r.childrenLength===0||n.push(r)}return this.oldNodeReader?Hz(n):B4(n,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){const t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!zm(t)){const n=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),s=>t!==null&&!Ih(s.length,t)?!1:s.canBeReused(e));if(n)return this._itemsFromCache++,this.tokenizer.skip(n.length),n}}}parseChild(e,t){this._itemsConstructed++;const n=this.tokenizer.read();switch(n.kind){case kn.ClosingBracket:return new Mz(n.bracketIds,n.length);case kn.Text:return n.astNode;case kn.OpeningBracket:{if(t>300)return new Tl(n.length);const s=e.merge(n.bracketIds),r=this.parseList(s,t+1),o=this.tokenizer.peek();return o&&o.kind===kn.ClosingBracket&&(o.bracketId===n.bracketId||o.bracketIds.intersects(n.bracketIds))?(this.tokenizer.read(),Ah.create(n.astNode,r,o.astNode)):Ah.create(n.astNode,r,null)}default:throw new Error("unexpected")}}}var Go;(function(i){i[i.InProgress=1]="InProgress",i[i.Completed=2]="Completed"})(Go||(Go={}));function tD(i,e){if(i.length===0)return e;if(e.length===0)return i;const t=new Q_(iD(i)),n=iD(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let s=t.dequeue();function r(c){if(c===void 0){const u=t.takeWhile(f=>!0)||[];return s&&u.unshift(s),u}const h=[];for(;s&&!zm(c);){const[u,f]=s.splitAt(c);h.push(u),c=hf(u.lengthAfter,c),s=f??t.dequeue()}return zm(c)||h.push(new Wa(!1,c,c)),h}const o=[];function a(c,h,u){if(o.length>0&&P4(o[o.length-1].endOffset,c)){const f=o[o.length-1];o[o.length-1]=new ff(f.startOffset,h,Gt(f.newLength,u))}else o.push({startOffset:c,endOffset:h,newLength:u})}let l=Cn;for(const c of n){const h=r(c.lengthBefore);if(c.modified){const u=Iz(h,g=>g.lengthBefore),f=Gt(l,u);a(l,f,c.lengthAfter),l=f}else for(const u of h){const f=l;l=Gt(l,u.lengthBefore),u.modified&&a(f,l,u.lengthAfter)}}return o}class Wa{constructor(e,t,n){this.modified=e,this.lengthBefore=t,this.lengthAfter=n}splitAt(e){const t=hf(e,this.lengthAfter);return P4(t,Cn)?[this,void 0]:this.modified?[new Wa(this.modified,this.lengthBefore,e),new Wa(this.modified,Cn,t)]:[new Wa(this.modified,e,e),new Wa(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${_s(this.lengthBefore)} -> ${_s(this.lengthAfter)}`}}function iD(i){const e=[];let t=Cn;for(const n of i){const s=hf(t,n.startOffset);zm(s)||e.push(new Wa(!1,s,s));const r=hf(n.startOffset,n.endOffset);e.push(new Wa(!0,r,n.newLength)),t=n.endOffset}return e}class Kz extends ${didLanguageChange(e){return this.brackets.didLanguageChange(e)}constructor(e,t){if(super(),this.textModel=e,this.getLanguageConfiguration=t,this.didChangeEmitter=new A,this.denseKeyProvider=new Az,this.brackets=new Uz(this.denseKeyProvider,this.getLanguageConfiguration),this.onDidChange=this.didChangeEmitter.event,this.queuedTextEditsForInitialAstWithoutTokens=[],this.queuedTextEdits=[],e.tokenization.hasTokens)e.tokenization.backgroundTokenizationState===Go.Completed?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{const n=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),s=new Bz(this.textModel.getValue(),n);this.initialAstWithoutTokens=eD(s,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===Go.Completed){const e=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,e||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:e}){const t=e.map(n=>new ff(Wt(n.fromLineNumber-1,0),Wt(n.toLineNumber,0),Wt(n.toLineNumber-n.fromLineNumber+1,0)));this.handleEdits(t,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(e){const t=ff.fromModelContentChanges(e.changes);this.handleEdits(t,!1)}handleEdits(e,t){const n=tD(this.queuedTextEdits,e);this.queuedTextEdits=n,this.initialAstWithoutTokens&&!t&&(this.queuedTextEditsForInitialAstWithoutTokens=tD(this.queuedTextEditsForInitialAstWithoutTokens,e))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(e,t,n){const s=t,r=new Fz(this.textModel,this.brackets);return eD(r,e,s,n)}getBracketsInRange(e,t){this.flushQueue();const n=Wt(e.startLineNumber-1,e.startColumn-1),s=Wt(e.endLineNumber-1,e.endColumn-1);return new Uo(r=>{const o=this.initialAstWithoutTokens||this.astWithTokens;zw(o,Cn,o.length,n,s,r,0,0,new Map,t)})}getBracketPairsInRange(e,t){this.flushQueue();const n=wh(e.getStartPosition()),s=wh(e.getEndPosition());return new Uo(r=>{const o=this.initialAstWithoutTokens||this.astWithTokens,a=new Gz(r,t,this.textModel);$w(o,Cn,o.length,n,s,a,0,new Map)})}getFirstBracketAfter(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return U4(t,Cn,t.length,wh(e))}getFirstBracketBefore(e){this.flushQueue();const t=this.initialAstWithoutTokens||this.astWithTokens;return W4(t,Cn,t.length,wh(e))}}function W4(i,e,t,n){if(i.kind===Et.List||i.kind===Et.Pair){const s=[];for(const r of i.children)t=Gt(e,r.length),s.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let r=s.length-1;r>=0;r--){const{nodeOffsetStart:o,nodeOffsetEnd:a}=s[r];if(Ih(o,n)){const l=W4(i.children[r],o,a,n);if(l)return l}}return null}else{if(i.kind===Et.UnexpectedClosingBracket)return null;if(i.kind===Et.Bracket){const s=Zl(e,t);return{bracketInfo:i.bracketInfo,range:s}}}return null}function U4(i,e,t,n){if(i.kind===Et.List||i.kind===Et.Pair){for(const s of i.children){if(t=Gt(e,s.length),Ih(n,t)){const r=U4(s,e,t,n);if(r)return r}e=t}return null}else{if(i.kind===Et.UnexpectedClosingBracket)return null;if(i.kind===Et.Bracket){const s=Zl(e,t);return{bracketInfo:i.bracketInfo,range:s}}}return null}function zw(i,e,t,n,s,r,o,a,l,c,h=!1){if(o>200)return!0;e:for(;;)switch(i.kind){case Et.List:{const u=i.childrenLength;for(let f=0;f<u;f++){const g=i.getChild(f);if(g){if(t=Gt(e,g.length),Th(e,s)&&Zu(t,n)){if(Zu(t,s)){i=g;continue e}if(!zw(g,e,t,n,s,r,o,0,l,c))return!1}e=t}}return!0}case Et.Pair:{const u=!c||!i.closingBracket||i.closingBracket.bracketInfo.closesColorized(i.openingBracket.bracketInfo);let f=0;if(l){let p=l.get(i.openingBracket.text);p===void 0&&(p=0),f=p,u&&(p++,l.set(i.openingBracket.text,p))}const g=i.childrenLength;for(let p=0;p<g;p++){const m=i.getChild(p);if(m){if(t=Gt(e,m.length),Th(e,s)&&Zu(t,n)){if(Zu(t,s)&&m.kind!==Et.Bracket){i=m,u?(o++,a=f+1):a=f;continue e}if((u||m.kind!==Et.Bracket||!i.closingBracket)&&!zw(m,e,t,n,s,r,u?o+1:o,u?f+1:f,l,c,!i.closingBracket))return!1}e=t}}return l?.set(i.openingBracket.text,f),!0}case Et.UnexpectedClosingBracket:{const u=Zl(e,t);return r(new XL(u,o-1,0,!0))}case Et.Bracket:{const u=Zl(e,t);return r(new XL(u,o-1,a-1,h))}case Et.Text:return!0}}class Gz{constructor(e,t,n){this.push=e,this.includeMinIndentation=t,this.textModel=n}}function $w(i,e,t,n,s,r,o,a){if(o>200)return!0;let l=!0;if(i.kind===Et.Pair){let c=0;if(a){let f=a.get(i.openingBracket.text);f===void 0&&(f=0),c=f,f++,a.set(i.openingBracket.text,f)}const h=Gt(e,i.openingBracket.length);let u=-1;if(r.includeMinIndentation&&(u=i.computeMinIndentation(e,r.textModel)),l=r.push(new xz(Zl(e,t),Zl(e,h),i.closingBracket?Zl(Gt(h,i.child?.length||Cn),t):void 0,o,c,i,u)),e=h,l&&i.child){const f=i.child;if(t=Gt(e,f.length),Th(e,s)&&Zu(t,n)&&(l=$w(f,e,t,n,s,r,o+1,a),!l))return!1}a?.set(i.openingBracket.text,c)}else{let c=e;for(const h of i.children){const u=c;if(c=Gt(c,h.length),Th(u,s)&&Th(n,c)&&(l=$w(h,u,c,n,s,r,o,a),!l))return!1}}return l}class jz extends ${get canBuildAST(){return this.textModel.getValueLength()<=5e6}constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t,this.bracketPairsTree=this._register(new vs),this.onDidChangeEmitter=new A,this.onDidChange=this.onDidChangeEmitter.event,this.bracketsRequested=!1}handleLanguageConfigurationServiceChange(e){(!e.languageId||this.bracketPairsTree.value?.object.didLanguageChange(e.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(e){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(e){this.bracketPairsTree.value?.object.handleContentChanged(e)}handleDidChangeBackgroundTokenizationState(){this.bracketPairsTree.value?.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(e){this.bracketPairsTree.value?.object.handleDidChangeTokens(e)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){const e=new X;this.bracketPairsTree.value=Yz(e.add(new Kz(this.textModel,t=>this.languageConfigurationService.getLanguageConfiguration(t))),e),e.add(this.bracketPairsTree.value.object.onDidChange(t=>this.onDidChangeEmitter.fire(t))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(e){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(e,!1)||Uo.empty}getBracketPairsInRangeWithMinIndentation(e){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(e,!0)||Uo.empty}getBracketsInRange(e,t=!1){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketsInRange(e,t)||Uo.empty}findMatchingBracketUp(e,t,n){const s=this.textModel.validatePosition(t),r=this.textModel.getLanguageIdAtPosition(s.lineNumber,s.column);if(this.canBuildAST){const o=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew.getClosingBracketInfo(e);if(!o)return null;const a=this.getBracketPairsInRange(H.fromPositions(t,t)).findLast(l=>o.closes(l.openingBracketInfo));return a?a.openingBracketRange:null}else{const o=e.toLowerCase(),a=this.languageConfigurationService.getLanguageConfiguration(r).brackets;if(!a)return null;const l=a.textIsBracket[o];return l?qg(this._findMatchingBracketUp(l,s,x_(n))):null}}matchBracket(e,t){if(this.canBuildAST){const n=this.getBracketPairsInRange(H.fromPositions(e,e)).filter(s=>s.closingBracketRange!==void 0&&(s.openingBracketRange.containsPosition(e)||s.closingBracketRange.containsPosition(e))).findLastMaxBy(zl(s=>s.openingBracketRange.containsPosition(e)?s.openingBracketRange:s.closingBracketRange,H.compareRangesUsingStarts));return n?[n.openingBracketRange,n.closingBracketRange]:null}else{const n=x_(t);return this._matchBracket(this.textModel.validatePosition(e),n)}}_establishBracketSearchOffsets(e,t,n,s){const r=t.getCount(),o=t.getLanguageId(s);let a=Math.max(0,e.column-1-n.maxBracketLength);for(let c=s-1;c>=0;c--){const h=t.getEndOffset(c);if(h<=a)break;if(go(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){a=h;break}}let l=Math.min(t.getLineContent().length,e.column-1+n.maxBracketLength);for(let c=s+1;c<r;c++){const h=t.getStartOffset(c);if(h>=l)break;if(go(t.getStandardTokenType(c))||t.getLanguageId(c)!==o){l=h;break}}return{searchStartOffset:a,searchEndOffset:l}}_matchBracket(e,t){const n=e.lineNumber,s=this.textModel.tokenization.getLineTokens(n),r=this.textModel.getLineContent(n),o=s.findTokenIndexAtOffset(e.column-1);if(o<0)return null;const a=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId(o)).brackets;if(a&&!go(s.getStandardTokenType(o))){let{searchStartOffset:l,searchEndOffset:c}=this._establishBracketSearchOffsets(e,s,a,o),h=null;for(;;){const u=js.findNextBracketInRange(a.forwardRegex,n,r,l,c);if(!u)break;if(u.startColumn<=e.column&&e.column<=u.endColumn){const f=r.substring(u.startColumn-1,u.endColumn-1).toLowerCase(),g=this._matchFoundBracket(u,a.textIsBracket[f],a.textIsOpenBracket[f],t);if(g){if(g instanceof Do)return null;h=g}}l=u.endColumn-1}if(h)return h}if(o>0&&s.getStartOffset(o)===e.column-1){const l=o-1,c=this.languageConfigurationService.getLanguageConfiguration(s.getLanguageId(l)).brackets;if(c&&!go(s.getStandardTokenType(l))){const{searchStartOffset:h,searchEndOffset:u}=this._establishBracketSearchOffsets(e,s,c,l),f=js.findPrevBracketInRange(c.reversedRegex,n,r,h,u);if(f&&f.startColumn<=e.column&&e.column<=f.endColumn){const g=r.substring(f.startColumn-1,f.endColumn-1).toLowerCase(),p=this._matchFoundBracket(f,c.textIsBracket[g],c.textIsOpenBracket[g],t);if(p)return p instanceof Do?null:p}}}return null}_matchFoundBracket(e,t,n,s){if(!t)return null;const r=n?this._findMatchingBracketDown(t,e.getEndPosition(),s):this._findMatchingBracketUp(t,e.getStartPosition(),s);return r?r instanceof Do?r:[e,r]:null}_findMatchingBracketUp(e,t,n){const s=e.languageId,r=e.reversedRegex;let o=-1,a=0;const l=(c,h,u,f)=>{for(;;){if(n&&++a%100===0&&!n())return Do.INSTANCE;const g=js.findPrevBracketInRange(r,c,h,u,f);if(!g)break;const p=h.substring(g.startColumn-1,g.endColumn-1).toLowerCase();if(e.isOpen(p)?o++:e.isClose(p)&&o--,o===0)return g;f=g.startColumn-1}return null};for(let c=t.lineNumber;c>=1;c--){const h=this.textModel.tokenization.getLineTokens(c),u=h.getCount(),f=this.textModel.getLineContent(c);let g=u-1,p=f.length,m=f.length;c===t.lineNumber&&(g=h.findTokenIndexAtOffset(t.column-1),p=t.column-1,m=t.column-1);let _=!0;for(;g>=0;g--){const v=h.getLanguageId(g)===s&&!go(h.getStandardTokenType(g));if(v)_?p=h.getStartOffset(g):(p=h.getStartOffset(g),m=h.getEndOffset(g));else if(_&&p!==m){const y=l(c,f,p,m);if(y)return y}_=v}if(_&&p!==m){const v=l(c,f,p,m);if(v)return v}}return null}_findMatchingBracketDown(e,t,n){const s=e.languageId,r=e.forwardRegex;let o=1,a=0;const l=(h,u,f,g)=>{for(;;){if(n&&++a%100===0&&!n())return Do.INSTANCE;const p=js.findNextBracketInRange(r,h,u,f,g);if(!p)break;const m=u.substring(p.startColumn-1,p.endColumn-1).toLowerCase();if(e.isOpen(m)?o++:e.isClose(m)&&o--,o===0)return p;f=p.endColumn-1}return null},c=this.textModel.getLineCount();for(let h=t.lineNumber;h<=c;h++){const u=this.textModel.tokenization.getLineTokens(h),f=u.getCount(),g=this.textModel.getLineContent(h);let p=0,m=0,_=0;h===t.lineNumber&&(p=u.findTokenIndexAtOffset(t.column-1),m=t.column-1,_=t.column-1);let v=!0;for(;p<f;p++){const y=u.getLanguageId(p)===s&&!go(u.getStandardTokenType(p));if(y)v||(m=u.getStartOffset(p)),_=u.getEndOffset(p);else if(v&&m!==_){const E=l(h,g,m,_);if(E)return E}v=y}if(v&&m!==_){const y=l(h,g,m,_);if(y)return y}}return null}findPrevBracket(e){const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketBefore(t)||null;let n=null,s=null,r=null;for(let o=t.lineNumber;o>=1;o--){const a=this.textModel.tokenization.getLineTokens(o),l=a.getCount(),c=this.textModel.getLineContent(o);let h=l-1,u=c.length,f=c.length;if(o===t.lineNumber){h=a.findTokenIndexAtOffset(t.column-1),u=t.column-1,f=t.column-1;const p=a.getLanguageId(h);n!==p&&(n=p,s=this.languageConfigurationService.getLanguageConfiguration(n).brackets,r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew)}let g=!0;for(;h>=0;h--){const p=a.getLanguageId(h);if(n!==p){if(s&&r&&g&&u!==f){const _=js.findPrevBracketInRange(s.reversedRegex,o,c,u,f);if(_)return this._toFoundBracket(r,_);g=!1}n=p,s=this.languageConfigurationService.getLanguageConfiguration(n).brackets,r=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew}const m=!!s&&!go(a.getStandardTokenType(h));if(m)g?u=a.getStartOffset(h):(u=a.getStartOffset(h),f=a.getEndOffset(h));else if(r&&s&&g&&u!==f){const _=js.findPrevBracketInRange(s.reversedRegex,o,c,u,f);if(_)return this._toFoundBracket(r,_)}g=m}if(r&&s&&g&&u!==f){const p=js.findPrevBracketInRange(s.reversedRegex,o,c,u,f);if(p)return this._toFoundBracket(r,p)}}return null}findNextBracket(e){const t=this.textModel.validatePosition(e);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketAfter(t)||null;const n=this.textModel.getLineCount();let s=null,r=null,o=null;for(let a=t.lineNumber;a<=n;a++){const l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),h=this.textModel.getLineContent(a);let u=0,f=0,g=0;if(a===t.lineNumber){u=l.findTokenIndexAtOffset(t.column-1),f=t.column-1,g=t.column-1;const m=l.getLanguageId(u);s!==m&&(s=m,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,o=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew)}let p=!0;for(;u<c;u++){const m=l.getLanguageId(u);if(s!==m){if(o&&r&&p&&f!==g){const v=js.findNextBracketInRange(r.forwardRegex,a,h,f,g);if(v)return this._toFoundBracket(o,v);p=!1}s=m,r=this.languageConfigurationService.getLanguageConfiguration(s).brackets,o=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew}const _=!!r&&!go(l.getStandardTokenType(u));if(_)p||(f=l.getStartOffset(u)),g=l.getEndOffset(u);else if(o&&r&&p&&f!==g){const v=js.findNextBracketInRange(r.forwardRegex,a,h,f,g);if(v)return this._toFoundBracket(o,v)}p=_}if(o&&r&&p&&f!==g){const m=js.findNextBracketInRange(r.forwardRegex,a,h,f,g);if(m)return this._toFoundBracket(o,m)}}return null}findEnclosingBrackets(e,t){const n=this.textModel.validatePosition(e);if(this.canBuildAST){const g=H.fromPositions(n),p=this.getBracketPairsInRange(H.fromPositions(n,n)).findLast(m=>m.closingBracketRange!==void 0&&m.range.strictContainsRange(g));return p?[p.openingBracketRange,p.closingBracketRange]:null}const s=x_(t),r=this.textModel.getLineCount(),o=new Map;let a=[];const l=(g,p)=>{if(!o.has(g)){const m=[];for(let _=0,v=p?p.brackets.length:0;_<v;_++)m[_]=0;o.set(g,m)}a=o.get(g)};let c=0;const h=(g,p,m,_,v)=>{for(;;){if(s&&++c%100===0&&!s())return Do.INSTANCE;const y=js.findNextBracketInRange(g.forwardRegex,p,m,_,v);if(!y)break;const E=m.substring(y.startColumn-1,y.endColumn-1).toLowerCase(),N=g.textIsBracket[E];if(N&&(N.isOpen(E)?a[N.index]++:N.isClose(E)&&a[N.index]--,a[N.index]===-1))return this._matchFoundBracket(y,N,!1,s);_=y.endColumn-1}return null};let u=null,f=null;for(let g=n.lineNumber;g<=r;g++){const p=this.textModel.tokenization.getLineTokens(g),m=p.getCount(),_=this.textModel.getLineContent(g);let v=0,y=0,E=0;if(g===n.lineNumber){v=p.findTokenIndexAtOffset(n.column-1),y=n.column-1,E=n.column-1;const I=p.getLanguageId(v);u!==I&&(u=I,f=this.languageConfigurationService.getLanguageConfiguration(u).brackets,l(u,f))}let N=!0;for(;v<m;v++){const I=p.getLanguageId(v);if(u!==I){if(f&&N&&y!==E){const x=h(f,g,_,y,E);if(x)return qg(x);N=!1}u=I,f=this.languageConfigurationService.getLanguageConfiguration(u).brackets,l(u,f)}const B=!!f&&!go(p.getStandardTokenType(v));if(B)N||(y=p.getStartOffset(v)),E=p.getEndOffset(v);else if(f&&N&&y!==E){const x=h(f,g,_,y,E);if(x)return qg(x)}N=B}if(f&&N&&y!==E){const I=h(f,g,_,y,E);if(I)return qg(I)}}return null}_toFoundBracket(e,t){if(!t)return null;let n=this.textModel.getValueInRange(t);n=n.toLowerCase();const s=e.getBracketInfo(n);return s?{range:t,bracketInfo:s}:null}}function Yz(i,e){return{object:i,dispose:()=>e?.dispose()}}function x_(i){if(typeof i>"u")return()=>!0;{const e=Date.now();return()=>Date.now()-e<=i}}class Do{static{this.INSTANCE=new Do}constructor(){this._searchCanceledBrand=void 0}}function qg(i){return i instanceof Do?null:i}class Xz extends ${constructor(e){super(),this.textModel=e,this.colorProvider=new H4,this.onDidChangeEmitter=new A,this.onDidChange=this.onDidChangeEmitter.event,this.colorizationOptions=e.getOptions().bracketPairColorizationOptions,this._register(e.bracketPairs.onDidChange(t=>{this.onDidChangeEmitter.fire()}))}handleDidChangeOptions(e){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(e,t,n,s){return s?[]:t===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(e,!0).map(o=>({id:`bracket${o.range.toString()}-${o.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(o,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:o.range})).toArray():[]}getAllDecorations(e,t){return e===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new H(1,1,this.textModel.getLineCount(),1),e,t):[]}}class H4{constructor(){this.unexpectedClosingBracketClassName="unexpected-closing-bracket"}getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}}nS((i,e)=>{const t=[sz,rz,oz,az,lz,cz],n=new H4;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${i.getColor(hz)}; }`);const s=t.map(r=>i.getColor(r)).filter(r=>!!r).filter(r=>!r.isTransparent());for(let r=0;r<30;r++){const o=s[r%s.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(r)} { color: ${o}; }`)}});function Kg(i){return i.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class Ci{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,n,s){this.oldPosition=e,this.oldText=t,this.newPosition=n,this.newText=s}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${Kg(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${Kg(this.oldText)}")`:`(replace@${this.oldPosition} "${Kg(this.oldText)}" with "${Kg(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){const s=t.length;gn(e,s,n),n+=4;for(let r=0;r<s;r++)l7(e,t.charCodeAt(r),n),n+=2;return n}static _readString(e,t){const n=fn(e,t);return t+=4,bz(e,t,n)}writeSize(){return 8+Ci._writeStringSize(this.oldText)+Ci._writeStringSize(this.newText)}write(e,t){return gn(e,this.oldPosition,t),t+=4,gn(e,this.newPosition,t),t+=4,t=Ci._writeString(e,this.oldText,t),t=Ci._writeString(e,this.newText,t),t}static read(e,t,n){const s=fn(e,t);t+=4;const r=fn(e,t);t+=4;const o=Ci._readString(e,t);t+=Ci._writeStringSize(o);const a=Ci._readString(e,t);return t+=Ci._writeStringSize(a),n.push(new Ci(s,o,r,a)),t}}function Qz(i,e){return i===null||i.length===0?e:new Ir(i,e).compress()}class Ir{constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),s=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(s),s=this._getCurr(++t);continue}if(s===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(s.oldEnd<=n.newPosition){this._acceptCurr(s),s=this._getCurr(++t);continue}if(n.newEnd<=s.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(s.oldPosition<n.newPosition){const[c,h]=Ir._splitCurr(s,n.newPosition-s.oldPosition);this._acceptCurr(c),s=h;continue}if(n.newPosition<s.oldPosition){const[c,h]=Ir._splitPrev(n,s.oldPosition-n.newPosition);this._acceptPrev(c),n=h;continue}let a,l;if(s.oldEnd===n.newEnd)a=n,l=s,n=this._getPrev(++e),s=this._getCurr(++t);else if(s.oldEnd<n.newEnd){const[c,h]=Ir._splitPrev(n,s.oldLength);a=c,l=s,n=h,s=this._getCurr(++t)}else{const[c,h]=Ir._splitCurr(s,n.newLength);a=n,l=c,n=this._getPrev(++e),s=h}this._result[this._resultLen++]=new Ci(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}const r=Ir._merge(this._result);return Ir._removeNoOps(r)}_acceptCurr(e){this._result[this._resultLen++]=Ir._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=Ir._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new Ci(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new Ci(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){const n=e.newText.substr(0,t),s=e.newText.substr(t);return[new Ci(e.oldPosition,e.oldText,e.newPosition,n),new Ci(e.oldEnd,"",e.newPosition+t,s)]}static _splitCurr(e,t){const n=e.oldText.substr(0,t),s=e.oldText.substr(t);return[new Ci(e.oldPosition,n,e.newPosition,e.newText),new Ci(e.oldPosition+t,s,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;const t=[];let n=0,s=e[0];for(let r=1;r<e.length;r++){const o=e[r];s.oldEnd===o.oldPosition?s=new Ci(s.oldPosition,s.oldText+o.oldText,s.newPosition,s.newText+o.newText):(t[n++]=s,s=o)}return t[n++]=s,t}static _removeNoOps(e){if(e.length===0)return e;const t=[];let n=0;for(let s=0;s<e.length;s++){const r=e[s];r.oldText!==r.newText&&(t[n++]=r)}return t}}function Zc(i){return i.toString()}class li{static create(e,t){const n=e.getAlternativeVersionId(),s=qw(e);return new li(n,n,s,s,t,t,[])}constructor(e,t,n,s,r,o,a){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=s,this.beforeCursorState=r,this.afterCursorState=o,this.changes=a}append(e,t,n,s,r){t.length>0&&(this.changes=Qz(this.changes,t)),this.afterEOL=n,this.afterVersionId=s,this.afterCursorState=r}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(gn(e,t?t.length:0,n),n+=4,t)for(const s of t)gn(e,s.selectionStartLineNumber,n),n+=4,gn(e,s.selectionStartColumn,n),n+=4,gn(e,s.positionLineNumber,n),n+=4,gn(e,s.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const s=fn(e,t);t+=4;for(let r=0;r<s;r++){const o=fn(e,t);t+=4;const a=fn(e,t);t+=4;const l=fn(e,t);t+=4;const c=fn(e,t);t+=4,n.push(new tn(o,a,l,c))}return t}serialize(){let e=10+li._writeSelectionsSize(this.beforeCursorState)+li._writeSelectionsSize(this.afterCursorState)+4;for(const s of this.changes)e+=s.writeSize();const t=new Uint8Array(e);let n=0;gn(t,this.beforeVersionId,n),n+=4,gn(t,this.afterVersionId,n),n+=4,i0(t,this.beforeEOL,n),n+=1,i0(t,this.afterEOL,n),n+=1,n=li._writeSelections(t,this.beforeCursorState,n),n=li._writeSelections(t,this.afterCursorState,n),gn(t,this.changes.length,n),n+=4;for(const s of this.changes)n=s.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const s=fn(t,n);n+=4;const r=fn(t,n);n+=4;const o=t0(t,n);n+=1;const a=t0(t,n);n+=1;const l=[];n=li._readSelections(t,n,l);const c=[];n=li._readSelections(t,n,c);const h=fn(t,n);n+=4;const u=[];for(let f=0;f<h;f++)n=Ci.read(t,n,u);return new li(s,r,o,a,l,c,u)}}class V4{get type(){return Yi.Resource}get resource(){return Y.isUri(this.model)?this.model:this.model.uri}constructor(e,t,n,s){this.label=e,this.code=t,this.model=n,this._data=li.create(n,s)}toString(){return(this._data instanceof li?this._data:li.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(Y.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof li}append(e,t,n,s,r){this._data instanceof li&&this._data.append(e,t,n,s,r)}close(){this._data instanceof li&&(this._data=this._data.serialize())}open(){this._data instanceof li||(this._data=li.deserialize(this._data))}undo(){if(Y.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof li&&(this._data=this._data.serialize());const e=li.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(Y.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof li&&(this._data=this._data.serialize());const e=li.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof li&&(this._data=this._data.serialize()),this._data.byteLength+168}}class Zz{get resources(){return this._editStackElementsArr.map(e=>e.resource)}constructor(e,t,n){this.label=e,this.code=t,this.type=Yi.Workspace,this._isOpen=!0,this._editStackElementsArr=n.slice(0),this._editStackElementsMap=new Map;for(const s of this._editStackElementsArr){const r=Zc(s.resource);this._editStackElementsMap.set(r,s)}this._delegate=null}setDelegate(e){this._delegate=e}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}getMissingModels(){const e=[];for(const t of this._editStackElementsArr)Y.isUri(t.model)&&e.push(t.model);return e}matchesResource(e){const t=Zc(e);return this._editStackElementsMap.has(t)}setModel(e){const t=Zc(Y.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=Zc(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,s,r){const o=Zc(e.uri);this._editStackElementsMap.get(o).append(e,t,n,s,r)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=Zc(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${nc(t.resource)}: ${t}`);return`{${e.join(", ")}}`}}function qw(i){return i.getEOL()===`
`?ds.LF:ds.CRLF}function Io(i){return i?i instanceof V4||i instanceof Zz:!1}class jS{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Io(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);Io(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){const n=this._undoRedoService.getLastElement(this._model.uri);if(Io(n)&&n.canAppend(this._model))return n;const s=new V4(d(822,"Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(s,t),s}pushEOL(e){const t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],qw(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n,s){const r=this._getOrCreateEditStackElement(e,s),o=this._model.applyEdits(t,!0),a=jS._computeCursorState(n,o),l=o.map((c,h)=>({index:h,textChange:c.textChange}));return l.sort((c,h)=>c.textChange.oldPosition===h.textChange.oldPosition?c.index-h.index:c.textChange.oldPosition-h.textChange.oldPosition),r.append(this._model,l.map(c=>c.textChange),qw(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return pt(n),null}}}class z4 extends ${constructor(){super(...arguments),this._isDisposed=!1}dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}}function Jz(i,e){let t=0,n=0;const s=i.length;for(;n<s;){const r=i.charCodeAt(n);if(r===k.Space)t++;else if(r===k.Tab)t=t-t%e+e;else break;n++}return n===s?-1:t}var qm;(function(i){i[i.Disabled=0]="Disabled",i[i.EnabledForActive=1]="EnabledForActive",i[i.Enabled=2]="Enabled"})(qm||(qm={}));class Gg{constructor(e,t,n,s,r,o){if(this.visibleColumn=e,this.column=t,this.className=n,this.horizontalLine=s,this.forWrappedLinesAfterColumn=r,this.forWrappedLinesBeforeOrAtColumn=o,e!==-1==(t!==-1))throw new Error}}class L_{constructor(e,t){this.top=e,this.endColumn=t}}class e$ extends z4{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return Jz(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,n){this.assertNotDisposed();const s=this.textModel.getLineCount();if(e<1||e>s)throw new De("Illegal value for lineNumber");const r=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(r&&r.offSide);let a=-2,l=-1,c=-2,h=-1;const u=x=>{if(a!==-1&&(a===-2||a>x-1)){a=-1,l=-1;for(let D=x-2;D>=0;D--){const F=this._computeIndentLevel(D);if(F>=0){a=D,l=F;break}}}if(c===-2){c=-1,h=-1;for(let D=x;D<s;D++){const F=this._computeIndentLevel(D);if(F>=0){c=D,h=F;break}}}};let f=-2,g=-1,p=-2,m=-1;const _=x=>{if(f===-2){f=-1,g=-1;for(let D=x-2;D>=0;D--){const F=this._computeIndentLevel(D);if(F>=0){f=D,g=F;break}}}if(p!==-1&&(p===-2||p<x-1)){p=-1,m=-1;for(let D=x;D<s;D++){const F=this._computeIndentLevel(D);if(F>=0){p=D,m=F;break}}}};let v=0,y=!0,E=0,N=!0,I=0,B=0;for(let x=0;y||N;x++){const D=e-x,F=e+x;x>1&&(D<1||D<t)&&(y=!1),x>1&&(F>s||F>n)&&(N=!1),x>5e4&&(y=!1,N=!1);let te=-1;if(y&&D>=1){const le=this._computeIndentLevel(D-1);le>=0?(c=D-1,h=le,te=Math.ceil(le/this.textModel.getOptions().indentSize)):(u(D),te=this._getIndentLevelForWhitespaceLine(o,l,h))}let J=-1;if(N&&F<=s){const le=this._computeIndentLevel(F-1);le>=0?(f=F-1,g=le,J=Math.ceil(le/this.textModel.getOptions().indentSize)):(_(F),J=this._getIndentLevelForWhitespaceLine(o,g,m))}if(x===0){B=te;continue}if(x===1){if(F<=s&&J>=0&&B+1===J){y=!1,v=F,E=F,I=J;continue}if(D>=1&&te>=0&&te-1===B){N=!1,v=D,E=D,I=te;continue}if(v=e,E=e,I=B,I===0)return{startLineNumber:v,endLineNumber:E,indent:I}}y&&(te>=I?v=D:y=!1),N&&(J>=I?E=F:N=!1)}return{startLineNumber:v,endLineNumber:E,indent:I}}getLinesBracketGuides(e,t,n,s){const r=[];for(let u=e;u<=t;u++)r.push([]);const o=!0,a=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new H(e,1,t,this.textModel.getLineMaxColumn(t))).toArray();let l;if(n&&a.length>0){const u=(e<=n.lineNumber&&n.lineNumber<=t?a:this.textModel.bracketPairs.getBracketPairsInRange(H.fromPositions(n)).toArray()).filter(f=>H.strictContainsPosition(f.range,n));l=wR(u,f=>o)?.range}const c=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,h=new t$;for(const u of a){if(!u.closingBracketRange)continue;const f=l&&u.range.equalsRange(l);if(!f&&!s.includeInactive)continue;const g=h.getInlineClassName(u.nestingLevel,u.nestingLevelOfEqualBracketType,c)+(s.highlightActive&&f?" "+h.activeClassName:""),p=u.openingBracketRange.getStartPosition(),m=u.closingBracketRange.getStartPosition(),_=s.horizontalGuides===qm.Enabled||s.horizontalGuides===qm.EnabledForActive&&f;if(u.range.startLineNumber===u.range.endLineNumber){_&&r[u.range.startLineNumber-e].push(new Gg(-1,u.openingBracketRange.getEndPosition().column,g,new L_(!1,m.column),-1,-1));continue}const v=this.getVisibleColumnFromPosition(m),y=this.getVisibleColumnFromPosition(u.openingBracketRange.getStartPosition()),E=Math.min(y,v,u.minVisibleColumnIndentation+1);let N=!1;ql(this.textModel.getLineContent(u.closingBracketRange.startLineNumber))<u.closingBracketRange.startColumn-1&&(N=!0);const x=Math.max(p.lineNumber,e),D=Math.min(m.lineNumber,t),F=N?1:0;for(let te=x;te<D+F;te++)r[te-e].push(new Gg(E,-1,g,null,te===p.lineNumber?p.column:-1,te===m.lineNumber?m.column:-1));_&&(p.lineNumber>=e&&y>E&&r[p.lineNumber-e].push(new Gg(E,-1,g,new L_(!1,p.column),-1,-1)),m.lineNumber<=t&&v>E&&r[m.lineNumber-e].push(new Gg(E,-1,g,new L_(!N,m.column),-1,-1)))}for(const u of r)u.sort((f,g)=>f.visibleColumn-g.visibleColumn);return r}getVisibleColumnFromPosition(e){return Ba.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const n=this.textModel.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const s=this.textModel.getOptions(),r=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=!!(r&&r.offSide),a=new Array(t-e+1);let l=-2,c=-1,h=-2,u=-1;for(let f=e;f<=t;f++){const g=f-e,p=this._computeIndentLevel(f-1);if(p>=0){l=f-1,c=p,a[g]=Math.ceil(p/s.indentSize);continue}if(l===-2){l=-1,c=-1;for(let m=f-2;m>=0;m--){const _=this._computeIndentLevel(m);if(_>=0){l=m,c=_;break}}}if(h!==-1&&(h===-2||h<f-1)){h=-1,u=-1;for(let m=f;m<n;m++){const _=this._computeIndentLevel(m);if(_>=0){h=m,u=_;break}}}a[g]=this._getIndentLevelForWhitespaceLine(o,c,u)}return a}_getIndentLevelForWhitespaceLine(e,t,n){const s=this.textModel.getOptions();return t===-1||n===-1?0:t<n?1+Math.floor(t/s.indentSize):t===n||e?Math.ceil(n/s.indentSize):1+Math.floor(n/s.indentSize)}}class t${constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,n){return this.getInlineClassNameOfLevel(n?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}}class i${constructor(){this.spacesDiff=0,this.looksLikeAlignment=!1}}function n$(i,e,t,n,s){s.spacesDiff=0,s.looksLikeAlignment=!1;let r;for(r=0;r<e&&r<n;r++){const f=i.charCodeAt(r),g=t.charCodeAt(r);if(f!==g)break}let o=0,a=0;for(let f=r;f<e;f++)i.charCodeAt(f)===k.Space?o++:a++;let l=0,c=0;for(let f=r;f<n;f++)t.charCodeAt(f)===k.Space?l++:c++;if(o>0&&a>0||l>0&&c>0)return;const h=Math.abs(a-c),u=Math.abs(o-l);if(h===0){s.spacesDiff=u,u>0&&0<=l-1&&l-1<i.length&&l<t.length&&t.charCodeAt(l)!==k.Space&&i.charCodeAt(l-1)===k.Space&&i.charCodeAt(i.length-1)===k.Comma&&(s.looksLikeAlignment=!0);return}if(u%h===0){s.spacesDiff=u/h;return}}function nD(i,e,t){const n=Math.min(i.getLineCount(),1e4);let s=0,r=0,o="",a=0;const l=[2,4,6,8,3,5,7],c=8,h=[0,0,0,0,0,0,0,0,0],u=new i$;for(let p=1;p<=n;p++){const m=i.getLineLength(p),_=i.getLineContent(p),v=m<=65536;let y=!1,E=0,N=0,I=0;for(let x=0,D=m;x<D;x++){const F=v?_.charCodeAt(x):i.getLineCharCode(p,x);if(F===k.Tab)I++;else if(F===k.Space)N++;else{y=!0,E=x;break}}if(!y||(I>0?s++:N>1&&r++,n$(o,a,_,E,u),u.looksLikeAlignment&&!(t&&e===u.spacesDiff)))continue;const B=u.spacesDiff;B<=c&&h[B]++,o=_,a=E}let f=t;s!==r&&(f=s<r);let g=e;if(f){let p=f?0:.1*n;l.forEach(m=>{const _=h[m];_>p&&(p=_,g=m)}),g===4&&h[4]>0&&h[2]>0&&h[2]>=h[4]/2&&(g=2)}return{insertSpaces:f,tabSize:g}}class Kw{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==we)return YS(this.right);let e=this;for(;e.parent!==we&&e.parent.left!==e;)e=e.parent;return e.parent===we?we:e.parent}prev(){if(this.left!==we)return $4(this.left);let e=this;for(;e.parent!==we&&e.parent.right!==e;)e=e.parent;return e.parent===we?we:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}var We;(function(i){i[i.Black=0]="Black",i[i.Red=1]="Red"})(We||(We={}));const we=new Kw(null,We.Black);we.parent=we;we.left=we;we.right=we;we.color=We.Black;function YS(i){for(;i.left!==we;)i=i.left;return i}function $4(i){for(;i.right!==we;)i=i.right;return i}function XS(i){return i===we?0:i.size_left+i.piece.length+XS(i.right)}function QS(i){return i===we?0:i.lf_left+i.piece.lineFeedCnt+QS(i.right)}function D_(){we.parent=we}function Ed(i,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==we&&(t.left.parent=e),t.parent=e.parent,e.parent===we?i.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function xd(i,e){const t=e.left;e.left=t.right,t.right!==we&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===we?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function jg(i,e){let t,n;if(e.left===we?(n=e,t=n.right):e.right===we?(n=e,t=n.left):(n=YS(e.right),t=n.right),n===i.root){i.root=t,t.color=We.Black,e.detach(),D_(),i.root.parent=we;return}const s=n.color===We.Red;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,Ju(i,t)):(n.parent===e?t.parent=n:t.parent=n.parent,Ju(i,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==we&&(n.left.parent=n),n.right!==we&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,Ju(i,n)),e.detach(),t.parent.left===t){const o=XS(t),a=QS(t);if(o!==t.parent.size_left||a!==t.parent.lf_left){const l=o-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=o,t.parent.lf_left=a,wo(i,t.parent,l,c)}}if(Ju(i,t.parent),s){D_();return}let r;for(;t!==i.root&&t.color===We.Black;)t===t.parent.left?(r=t.parent.right,r.color===We.Red&&(r.color=We.Black,t.parent.color=We.Red,Ed(i,t.parent),r=t.parent.right),r.left.color===We.Black&&r.right.color===We.Black?(r.color=We.Red,t=t.parent):(r.right.color===We.Black&&(r.left.color=We.Black,r.color=We.Red,xd(i,r),r=t.parent.right),r.color=t.parent.color,t.parent.color=We.Black,r.right.color=We.Black,Ed(i,t.parent),t=i.root)):(r=t.parent.left,r.color===We.Red&&(r.color=We.Black,t.parent.color=We.Red,xd(i,t.parent),r=t.parent.left),r.left.color===We.Black&&r.right.color===We.Black?(r.color=We.Red,t=t.parent):(r.left.color===We.Black&&(r.right.color=We.Black,r.color=We.Red,Ed(i,r),r=t.parent.left),r.color=t.parent.color,t.parent.color=We.Black,r.left.color=We.Black,xd(i,t.parent),t=i.root));t.color=We.Black,D_()}function sD(i,e){for(Ju(i,e);e!==i.root&&e.parent.color===We.Red;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===We.Red?(e.parent.color=We.Black,t.color=We.Black,e.parent.parent.color=We.Red,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,Ed(i,e)),e.parent.color=We.Black,e.parent.parent.color=We.Red,xd(i,e.parent.parent))}else{const t=e.parent.parent.left;t.color===We.Red?(e.parent.color=We.Black,t.color=We.Black,e.parent.parent.color=We.Red,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,xd(i,e)),e.parent.color=We.Black,e.parent.parent.color=We.Red,Ed(i,e.parent.parent))}i.root.color=We.Black}function wo(i,e,t,n){for(;e!==i.root&&e!==we;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}function Ju(i,e){let t=0,n=0;if(e!==i.root){for(;e!==i.root&&e===e.parent.right;)e=e.parent;if(e!==i.root)for(e=e.parent,t=XS(e.left)-e.size_left,n=QS(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==i.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}const po=65535;function q4(i){let e;return i[i.length-1]<65536?e=new Uint16Array(i.length):e=new Uint32Array(i.length),e.set(i,0),e}class s${constructor(e,t,n,s,r){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=s,this.isBasicASCII=r}}function Co(i,e=!0){const t=[0];let n=1;for(let s=0,r=i.length;s<r;s++){const o=i.charCodeAt(s);o===k.CarriageReturn?s+1<r&&i.charCodeAt(s+1)===k.LineFeed?(t[n++]=s+2,s++):t[n++]=s+1:o===k.LineFeed&&(t[n++]=s+1)}return e?q4(t):t}function r$(i,e){i.length=0,i[0]=0;let t=1,n=0,s=0,r=0,o=!0;for(let l=0,c=e.length;l<c;l++){const h=e.charCodeAt(l);h===k.CarriageReturn?l+1<c&&e.charCodeAt(l+1)===k.LineFeed?(r++,i[t++]=l+2,l++):(n++,i[t++]=l+1):h===k.LineFeed?(s++,i[t++]=l+1):o&&h!==k.Tab&&(h<32||h>126)&&(o=!1)}const a=new s$(q4(i),n,s,r,o);return i.length=0,a}class Ln{constructor(e,t,n,s,r){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=s,this.length=r}}class Al{constructor(e,t){this.buffer=e,this.lineStarts=t}}class o${constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==we&&e.iterate(e.root,n=>(n!==we&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class a${constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const n=this._cache;for(let s=0;s<n.length;s++){const r=n[s];if(r.node.parent===null||r.nodeStartOffset>=e){n[s]=null,t=!0;continue}}if(t){const s=[];for(const r of n)r!==null&&s.push(r);this._cache=s}}}class l${constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new Al("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=we,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let s=null;for(let r=0,o=e.length;r<o;r++)if(e[r].buffer.length>0){e[r].lineStarts||(e[r].lineStarts=Co(e[r].buffer));const a=new Ln(r+1,{line:0,column:0},{line:e[r].lineStarts.length-1,column:e[r].buffer.length-e[r].lineStarts[e[r].lineStarts.length-1]},e[r].lineStarts.length-1,e[r].buffer.length);this._buffers.push(e[r]),s=this.rbInsertRight(s,a)}this._searchCache=new a$(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=po,n=t-Math.floor(t/3),s=n*2;let r="",o=0;const a=[];if(this.iterate(this.root,l=>{const c=this.getNodeContent(l),h=c.length;if(o<=n||o+h<s)return r+=c,o+=h,!0;const u=r.replace(/\r\n|\r|\n/g,e);return a.push(new Al(u,Co(u))),r=c,o=h,!0}),o>0){const l=r.replace(/\r\n|\r|\n/g,e);a.push(new Al(l,Co(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new o$(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,s=>{if(s===we)return!0;const r=this.getNodeContent(s),o=r.length,a=e.nodeAt(t),l=e.nodeAt(t+o),c=e.getValueInRange2(a,l);return t+=o,r===c})}getOffsetAt(e,t){let n=0,s=this.root;for(;s!==we;)if(s.left!==we&&s.lf_left+1>=e)s=s.left;else if(s.lf_left+s.piece.lineFeedCnt+1>=e){n+=s.size_left;const r=this.getAccumulatedValue(s,e-s.lf_left-2);return n+=r+t-1}else e-=s.lf_left+s.piece.lineFeedCnt,n+=s.size_left+s.piece.length,s=s.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0;const s=e;for(;t!==we;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const r=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+r.index,r.index===0){const o=this.getOffsetAt(n+1,1),a=s-o;return new pe(n+1,a+1)}return new pe(n+1,r.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===we){const r=this.getOffsetAt(n+1,1),o=s-e-r;return new pe(n+1,o+1)}else t=t.right;return new pe(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const n=this.nodeAt2(e.startLineNumber,e.startColumn),s=this.nodeAt2(e.endLineNumber,e.endColumn),r=this.getValueInRange2(n,s);return t?t!==this._EOL||!this._EOLNormalized?r.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?r:r.replace(/\r\n|\r|\n/g,t):r}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let n=e.node;const s=this._buffers[n.piece.bufferIndex].buffer,r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);let o=s.substring(r+e.remainder,r+n.piece.length);for(n=n.next();n!==we;){const a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){o+=a.substring(l,l+t.remainder);break}else o+=a.substr(l,n.piece.length);n=n.next()}return o}getLinesContent(){const e=[];let t=0,n="",s=!1;return this.iterate(this.root,r=>{if(r===we)return!0;const o=r.piece;let a=o.length;if(a===0)return!0;const l=this._buffers[o.bufferIndex].buffer,c=this._buffers[o.bufferIndex].lineStarts,h=o.start.line,u=o.end.line;let f=c[h]+o.start.column;if(s&&(l.charCodeAt(f)===k.LineFeed&&(f++,a--),e[t++]=n,n="",s=!1,a===0))return!0;if(h===u)return!this._EOLNormalized&&l.charCodeAt(f+a-1)===k.CarriageReturn?(s=!0,n+=l.substr(f,a-1)):n+=l.substr(f,a),!0;n+=this._EOLNormalized?l.substring(f,Math.max(f,c[h+1]-this._EOLLength)):l.substring(f,c[h+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let g=h+1;g<u;g++)n=this._EOLNormalized?l.substring(c[g],c[g+1]-this._EOLLength):l.substring(c[g],c[g+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(c[u]+o.end.column-1)===k.CarriageReturn?(s=!0,o.end.column===0?t--:n=l.substr(c[u],o.end.column-1)):n=l.substr(c[u],o.end.column),!0}),s&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const n=this._buffers[t.piece.bufferIndex],s=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(s)}else{const t=this._buffers[e.node.piece.bufferIndex],s=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(s)}}getLineCharCode(e,t){const n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}getCharCode(e){const t=this.nodeAt(e);return this._getCharCode(t)}getNearestChunk(e){const t=this.nodeAt(e);if(t.remainder===t.node.piece.length){const n=t.node.next();if(!n||n===we)return"";const s=this._buffers[n.piece.bufferIndex],r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return s.buffer.substring(r,r+n.piece.length)}else{const n=this._buffers[t.node.piece.bufferIndex],s=this.offsetInBuffer(t.node.piece.bufferIndex,t.node.piece.start),r=s+t.remainder,o=s+t.node.piece.length;return n.buffer.substring(r,o)}}findMatchesInNode(e,t,n,s,r,o,a,l,c,h,u){const f=this._buffers[e.piece.bufferIndex],g=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),p=this.offsetInBuffer(e.piece.bufferIndex,r),m=this.offsetInBuffer(e.piece.bufferIndex,o);let _;const v={line:0,column:0};let y,E;t._wordSeparators?(y=f.buffer.substring(p,m),E=N=>N+p,t.reset(0)):(y=f.buffer,E=N=>N,t.reset(p));do if(_=t.next(y),_){if(E(_.index)>=m)return h;this.positionInBuffer(e,E(_.index)-g,v);const N=this.getLineFeedCnt(e.piece.bufferIndex,r,v),I=v.line===r.line?v.column-r.column+s:v.column+1,B=I+_[0].length;if(u[h++]=Il(new H(n+N,I,n+N,B),_,l),E(_.index)+_[0].length>=m||h>=c)return h}while(_);return h}findMatchesLineByLine(e,t,n,s){const r=[];let o=0;const a=new bh(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];const c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let h=this.positionInBuffer(l.node,l.remainder);const u=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,h,u,t,n,s,o,r),r;let f=e.startLineNumber,g=l.node;for(;g!==c.node;){const m=this.getLineFeedCnt(g.piece.bufferIndex,h,g.piece.end);if(m>=1){const v=this._buffers[g.piece.bufferIndex].lineStarts,y=this.offsetInBuffer(g.piece.bufferIndex,g.piece.start),E=v[h.line+m],N=f===e.startLineNumber?e.startColumn:1;if(o=this.findMatchesInNode(g,a,f,N,h,this.positionInBuffer(g,E-y),t,n,s,o,r),o>=s)return r;f+=m}const _=f===e.startLineNumber?e.startColumn-1:0;if(f===e.endLineNumber){const v=this.getLineContent(f).substring(_,e.endColumn-1);return o=this._findMatchesInLine(t,a,v,e.endLineNumber,_,o,r,n,s),r}if(o=this._findMatchesInLine(t,a,this.getLineContent(f).substr(_),f,_,o,r,n,s),o>=s)return r;f++,l=this.nodeAt2(f,1),g=l.node,h=this.positionInBuffer(l.node,l.remainder)}if(f===e.endLineNumber){const m=f===e.startLineNumber?e.startColumn-1:0,_=this.getLineContent(f).substring(m,e.endColumn-1);return o=this._findMatchesInLine(t,a,_,e.endLineNumber,m,o,r,n,s),r}const p=f===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(c.node,a,f,p,h,u,t,n,s,o,r),r}_findMatchesInLine(e,t,n,s,r,o,a,l,c){const h=e.wordSeparators;if(!l&&e.simpleSearch){const f=e.simpleSearch,g=f.length,p=n.length;let m=-g;for(;(m=n.indexOf(f,m+g))!==-1;)if((!h||US(h,n,p,m,g))&&(a[o++]=new im(new H(s,m+1+r,s,m+1+g+r),null),o>=c))return o;return o}let u;t.reset(0);do if(u=t.next(n),u&&(a[o++]=Il(new H(s,u.index+1+r,s,u.index+1+u[0].length+r),u,l),o>=c))return o;while(u);return o}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==we){const{node:s,remainder:r,nodeStartOffset:o}=this.nodeAt(e),a=s.piece,l=a.bufferIndex,c=this.positionInBuffer(s,r);if(s.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&o+a.length===e&&t.length<po){this.appendToNode(s,t),this.computeBufferMetadata();return}if(o===e)this.insertContentToNodeLeft(t,s),this._searchCache.validate(e);else if(o+s.piece.length>e){const h=[];let u=new Ln(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(s,r)===10){const m={line:u.start.line+1,column:0};u=new Ln(u.bufferIndex,m,u.end,this.getLineFeedCnt(u.bufferIndex,m,u.end),u.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(s,r-1)===13){const m=this.positionInBuffer(s,r-1);this.deleteNodeTail(s,m),t="\r"+t,s.piece.length===0&&h.push(s)}else this.deleteNodeTail(s,c);else this.deleteNodeTail(s,c);const f=this.createNewPieces(t);u.length>0&&this.rbInsertRight(s,u);let g=s;for(let p=0;p<f.length;p++)g=this.rbInsertRight(g,f[p]);this.deleteNodes(h)}else this.insertContentToNodeRight(t,s)}else{const s=this.createNewPieces(t);let r=this.rbInsertLeft(null,s[0]);for(let o=1;o<s.length;o++)r=this.rbInsertRight(r,s[o])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===we)return;const n=this.nodeAt(e),s=this.nodeAt(e+t),r=n.node,o=s.node;if(r===o){const f=this.positionInBuffer(r,n.remainder),g=this.positionInBuffer(r,s.remainder);if(n.nodeStartOffset===e){if(t===r.piece.length){const p=r.next();jg(this,r),this.validateCRLFWithPrevNode(p),this.computeBufferMetadata();return}this.deleteNodeHead(r,g),this._searchCache.validate(e),this.validateCRLFWithPrevNode(r),this.computeBufferMetadata();return}if(n.nodeStartOffset+r.piece.length===e+t){this.deleteNodeTail(r,f),this.validateCRLFWithNextNode(r),this.computeBufferMetadata();return}this.shrinkNode(r,f,g),this.computeBufferMetadata();return}const a=[],l=this.positionInBuffer(r,n.remainder);this.deleteNodeTail(r,l),this._searchCache.validate(e),r.piece.length===0&&a.push(r);const c=this.positionInBuffer(o,s.remainder);this.deleteNodeHead(o,c),o.piece.length===0&&a.push(o);const h=r.next();for(let f=h;f!==we&&f!==o;f=f.next())a.push(f);const u=r.piece.length===0?r.prev():r;this.deleteNodes(a),this.validateCRLFWithNextNode(u),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const o=t.piece,a={line:o.start.line+1,column:0},l=new Ln(o.bufferIndex,a,o.end,this.getLineFeedCnt(o.bufferIndex,a,o.end),o.length-1);t.piece=l,e+=`
`,wo(this,t,-1,-1),t.piece.length===0&&n.push(t)}const s=this.createNewPieces(e);let r=this.rbInsertLeft(t,s[s.length-1]);for(let o=s.length-2;o>=0;o--)r=this.rbInsertLeft(r,s[o]);this.validateCRLFWithPrevNode(r),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const n=this.createNewPieces(e),s=this.rbInsertRight(t,n[0]);let r=s;for(let o=1;o<n.length;o++)r=this.rbInsertRight(r,n[o]);this.validateCRLFWithPrevNode(s)}positionInBuffer(e,t,n){const s=e.piece,r=e.piece.bufferIndex,o=this._buffers[r].lineStarts,l=o[s.start.line]+s.start.column+t;let c=s.start.line,h=s.end.line,u=0,f=0,g=0;for(;c<=h&&(u=c+(h-c)/2|0,g=o[u],u!==h);)if(f=o[u+1],l<g)h=u-1;else if(l>=f)c=u+1;else break;return n?(n.line=u,n.column=l-g,null):{line:u,column:l-g}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;const s=this._buffers[e].lineStarts;if(n.line===s.length-1)return n.line-t.line;const r=s[n.line+1],o=s[n.line]+n.column;if(r>o+1)return n.line-t.line;const a=o-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)jg(this,e[t])}createNewPieces(e){if(e.length>po){const h=[];for(;e.length>po;){const f=e.charCodeAt(po-1);let g;f===k.CarriageReturn||f>=55296&&f<=56319?(g=e.substring(0,po-1),e=e.substring(po-1)):(g=e.substring(0,po),e=e.substring(po));const p=Co(g);h.push(new Ln(this._buffers.length,{line:0,column:0},{line:p.length-1,column:g.length-p[p.length-1]},p.length-1,g.length)),this._buffers.push(new Al(g,p))}const u=Co(e);return h.push(new Ln(this._buffers.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this._buffers.push(new Al(e,u)),h}let t=this._buffers[0].buffer.length;const n=Co(e,!1);let s=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},s=this._lastChangeBufferPos;for(let h=0;h<n.length;h++)n[h]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let h=0;h<n.length;h++)n[h]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const r=this._buffers[0].buffer.length,o=this._buffers[0].lineStarts.length-1,a=r-this._buffers[0].lineStarts[o],l={line:o,column:a},c=new Ln(0,s,l,this.getLineFeedCnt(0,s,l),r-t);return this._lastChangeBufferPos=l,[c]}getLinesRawContent(){return this.getContentOfSubTree(this.root)}getLineRawContent(e,t=0){let n=this.root,s="";const r=this._searchCache.get2(e);if(r){n=r.node;const o=this.getAccumulatedValue(n,e-r.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(r.nodeStartLineNumber+n.piece.lineFeedCnt===e)s=a.substring(l+o,l+n.piece.length);else{const c=this.getAccumulatedValue(n,e-r.nodeStartLineNumber);return a.substring(l+o,l+c-t)}}else{let o=0;const a=e;for(;n!==we;)if(n.left!==we&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){const l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this.getAccumulatedValue(n,e-n.lf_left-1),h=this._buffers[n.piece.bufferIndex].buffer,u=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return o+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:o,nodeStartLineNumber:a-(e-1-n.lf_left)}),h.substring(u+l,u+c-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){const l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this._buffers[n.piece.bufferIndex].buffer,h=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);s=c.substring(h+l,h+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,o+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==we;){const o=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return s+=o.substring(l,l+a-t),s}else{const a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);s+=o.substr(a,n.piece.length)}n=n.next()}return s}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==we;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){const n=e.piece,s=this.positionInBuffer(e,t),r=s.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){const o=this.getLineFeedCnt(e.piece.bufferIndex,n.start,s);if(o!==r)return{index:o,remainder:0}}return{index:r,remainder:s.column}}getAccumulatedValue(e,t){if(t<0)return 0;const n=e.piece,s=this._buffers[n.bufferIndex].lineStarts,r=n.start.line+t+1;return r>n.end.line?s[n.end.line]+n.end.column-s[n.start.line]-n.start.column:s[r]-s[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,s=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.end),o=t,a=this.offsetInBuffer(n.bufferIndex,o),l=this.getLineFeedCnt(n.bufferIndex,n.start,o),c=l-s,h=a-r,u=n.length+h;e.piece=new Ln(n.bufferIndex,n.start,o,l,u),wo(this,e,h,c)}deleteNodeHead(e,t){const n=e.piece,s=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.start),o=t,a=this.getLineFeedCnt(n.bufferIndex,o,n.end),l=this.offsetInBuffer(n.bufferIndex,o),c=a-s,h=r-l,u=n.length+h;e.piece=new Ln(n.bufferIndex,o,n.end,a,u),wo(this,e,h,c)}shrinkNode(e,t,n){const s=e.piece,r=s.start,o=s.end,a=s.length,l=s.lineFeedCnt,c=t,h=this.getLineFeedCnt(s.bufferIndex,s.start,c),u=this.offsetInBuffer(s.bufferIndex,t)-this.offsetInBuffer(s.bufferIndex,r);e.piece=new Ln(s.bufferIndex,s.start,c,h,u),wo(this,e,u-a,h-l);const f=new Ln(s.bufferIndex,n,o,this.getLineFeedCnt(s.bufferIndex,n,o),this.offsetInBuffer(s.bufferIndex,o)-this.offsetInBuffer(s.bufferIndex,n)),g=this.rbInsertRight(e,f);this.validateCRLFWithPrevNode(g)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),s=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const r=Co(t,!1);for(let g=0;g<r.length;g++)r[g]+=s;if(n){const g=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:s-g}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1));const o=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[o],l={line:o,column:a},c=e.piece.length+t.length,h=e.piece.lineFeedCnt,u=this.getLineFeedCnt(0,e.piece.start,l),f=u-h;e.piece=new Ln(e.piece.bufferIndex,e.piece.start,l,u,c),this._lastChangeBufferPos=l,wo(this,e,t.length,f)}nodeAt(e){let t=this.root;const n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let s=0;for(;t!==we;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){s+=t.size_left;const r={node:t,remainder:e-t.size_left,nodeStartOffset:s};return this._searchCache.set(r),r}else e-=t.size_left+t.piece.length,s+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,s=0;for(;n!==we;)if(n.left!==we&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){const r=this.getAccumulatedValue(n,e-n.lf_left-2),o=this.getAccumulatedValue(n,e-n.lf_left-1);return s+=n.size_left,{node:n,remainder:Math.min(r+t-1,o),nodeStartOffset:s}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){const r=this.getAccumulatedValue(n,e-n.lf_left-2);if(r+t-1<=n.piece.length)return{node:n,remainder:r+t-1,nodeStartOffset:s};t-=n.piece.length-r;break}else e-=n.lf_left+n.piece.lineFeedCnt,s+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==we;){if(n.piece.lineFeedCnt>0){const r=this.getAccumulatedValue(n,0),o=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,r),nodeStartOffset:o}}else if(n.piece.length>=t-1){const r=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:r}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const n=this._buffers[e.piece.bufferIndex],s=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(s)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===we||e.piece.lineFeedCnt===0)return!1;const t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,s=t.start.line,r=n[s]+t.start.column;return s===n.length-1||n[s+1]>r+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(r)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===we||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const n=[],s=this._buffers[e.piece.bufferIndex].lineStarts;let r;e.piece.end.column===0?r={line:e.piece.end.line-1,column:s[e.piece.end.line]-s[e.piece.end.line-1]-1}:r={line:e.piece.end.line,column:e.piece.end.column-1};const o=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new Ln(e.piece.bufferIndex,e.piece.start,r,a,o),wo(this,e,-1,-1),e.piece.length===0&&n.push(e);const l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,h=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new Ln(t.piece.bufferIndex,l,t.piece.end,h,c),wo(this,t,-1,-1),t.piece.length===0&&n.push(t);const u=this.createNewPieces(`\r
`);this.rbInsertRight(e,u[0]);for(let f=0;f<n.length;f++)jg(this,n[f])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)jg(this,n);else{const s=n.piece,r={line:s.start.line+1,column:0},o=s.length-1,a=this.getLineFeedCnt(s.bufferIndex,r,s.end);n.piece=new Ln(s.bufferIndex,r,s.end,a,o),wo(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===we)return t(we);const n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===we)return"";const t=this._buffers[e.piece.bufferIndex],n=e.piece,s=this.offsetInBuffer(n.bufferIndex,n.start),r=this.offsetInBuffer(n.bufferIndex,n.end);return t.buffer.substring(s,r)}getPieceContent(e){const t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),s=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,s)}rbInsertRight(e,t){const n=new Kw(t,We.Red);if(n.left=we,n.right=we,n.parent=we,n.size_left=0,n.lf_left=0,this.root===we)this.root=n,n.color=We.Black;else if(e.right===we)e.right=n,n.parent=e;else{const r=YS(e.right);r.left=n,n.parent=r}return sD(this,n),n}rbInsertLeft(e,t){const n=new Kw(t,We.Red);if(n.left=we,n.right=we,n.parent=we,n.size_left=0,n.lf_left=0,this.root===we)this.root=n,n.color=We.Black;else if(e.left===we)e.left=n,n.parent=e;else{const s=$4(e.left);s.right=n,n.parent=s}return sD(this,n),n}getContentOfSubTree(e){let t="";return this.iterate(e,n=>(t+=this.getNodeContent(n),!0)),t}}class Hl extends ${constructor(e,t,n,s,r,o,a){super(),this._onDidChangeContent=this._register(new A),this.onDidChangeContent=this._onDidChangeContent.event,this._BOM=t,this._mightContainNonBasicASCII=!o,this._mightContainRTL=s,this._mightContainUnusualLineTerminators=r,this._pieceTree=new l$(e,n,a)}equals(e){return!(e instanceof Hl)||this._BOM!==e._BOM||this.getEOL()!==e.getEOL()?!1:this._pieceTree.equal(e._pieceTree)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const n=e+t,s=this.getPositionAt(e),r=this.getPositionAt(n);return new H(s.lineNumber,s.column,r.lineNumber,r.column)}getValueInRange(e,t=_n.TextDefined){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=_n.TextDefined){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const n=this.getOffsetAt(e.startLineNumber,e.startColumn),s=this.getOffsetAt(e.endLineNumber,e.endColumn);let r=0;const o=this._getEndOfLine(t),a=this.getEOL();if(o.length!==a.length){const l=o.length-a.length,c=e.endLineNumber-e.startLineNumber;r=l*c}return s-n+r}getCharacterCountInRange(e,t=_n.TextDefined){if(this._mightContainNonBasicASCII){let n=0;const s=e.startLineNumber,r=e.endLineNumber;for(let o=s;o<=r;o++){const a=this.getLineContent(o),l=o===s?e.startColumn-1:0,c=o===r?e.endColumn-1:a.length;for(let h=l;h<c;h++)hs(a.charCodeAt(h))?(n=n+1,h=h+1):n=n+1}return n+=this._getEndOfLine(t).length*(r-s),n}return this.getValueLengthInRange(e,t)}getNearestChunk(e){return this._pieceTree.getNearestChunk(e)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getCharCode(e){return this._pieceTree.getCharCode(e)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineMinColumn(e){return 1}getLineMaxColumn(e){return this.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){const t=ql(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=xI(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case _n.LF:return`
`;case _n.CRLF:return`\r
`;case _n.TextDefined:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let s=this._mightContainRTL,r=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,a=!0,l=[];for(let m=0;m<e.length;m++){const _=e[m];a&&_._isTracked&&(a=!1);const v=_.range;if(_.text){let B=!0;o||(B=!TI(_.text),o=B),!s&&B&&(s=II(_.text)),!r&&B&&(r=NI(_.text))}let y="",E=0,N=0,I=0;if(_.text){let B;[E,N,I,B]=Yr(_.text);const x=this.getEOL(),D=x===`\r
`?Bo.CRLF:Bo.LF;B===Bo.Unknown||B===D?y=_.text:y=_.text.replace(/\r\n|\r|\n/g,x)}l[m]={sortIndex:m,identifier:_.identifier||null,range:v,rangeOffset:this.getOffsetAt(v.startLineNumber,v.startColumn),rangeLength:this.getValueLengthInRange(v),text:y,eolCount:E,firstLineLength:N,lastLineLength:I,forceMoveMarkers:!!_.forceMoveMarkers,isAutoWhitespaceEdit:_.isAutoWhitespaceEdit||!1}}l.sort(Hl._sortOpsAscending);let c=!1;for(let m=0,_=l.length-1;m<_;m++){const v=l[m].range.getEndPosition(),y=l[m+1].range.getStartPosition();if(y.isBeforeOrEqual(v)){if(y.isBefore(v))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));const h=n||t?Hl._getInverseEditRanges(l):[],u=[];if(t)for(let m=0;m<l.length;m++){const _=l[m],v=h[m];if(_.isAutoWhitespaceEdit&&_.range.isEmpty())for(let y=v.startLineNumber;y<=v.endLineNumber;y++){let E="";y===v.startLineNumber&&(E=this.getLineContent(_.range.startLineNumber),ql(E)!==-1)||u.push({lineNumber:y,oldContent:E})}}let f=null;if(n){let m=0;f=[];for(let _=0;_<l.length;_++){const v=l[_],y=h[_],E=this.getValueInRange(v.range),N=v.rangeOffset+m;m+=v.text.length-E.length,f[_]={sortIndex:v.sortIndex,identifier:v.identifier,range:y,text:E,textChange:new Ci(v.rangeOffset,E,N,v.text)}}c||f.sort((_,v)=>_.sortIndex-v.sortIndex)}this._mightContainRTL=s,this._mightContainUnusualLineTerminators=r,this._mightContainNonBasicASCII=o;const g=this._doApplyEdits(l);let p=null;if(t&&u.length>0){u.sort((m,_)=>_.lineNumber-m.lineNumber),p=[];for(let m=0,_=u.length;m<_;m++){const v=u[m].lineNumber;if(m>0&&u[m-1].lineNumber===v)continue;const y=u[m].oldContent,E=this.getLineContent(v);E.length===0||E===y||ql(E)!==-1||p.push(v)}}return this._onDidChangeContent.fire(),new yO(f,g,p)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,s=e[e.length-1].range,r=new H(n.startLineNumber,n.startColumn,s.endLineNumber,s.endColumn);let o=n.startLineNumber,a=n.startColumn;const l=[];for(let g=0,p=e.length;g<p;g++){const m=e[g],_=m.range;t=t||m.forceMoveMarkers,l.push(this.getValueInRange(new H(o,a,_.startLineNumber,_.startColumn))),m.text.length>0&&l.push(m.text),o=_.endLineNumber,a=_.endColumn}const c=l.join(""),[h,u,f]=Yr(c);return{sortIndex:0,identifier:e[0].identifier,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r,_n.TextDefined),text:c,eolCount:h,firstLineLength:u,lastLineLength:f,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(Hl._sortOpsDescending);const t=[];for(let n=0;n<e.length;n++){const s=e[n],r=s.range.startLineNumber,o=s.range.startColumn,a=s.range.endLineNumber,l=s.range.endColumn;if(r===a&&o===l&&s.text.length===0)continue;s.text?(this._pieceTree.delete(s.rangeOffset,s.rangeLength),this._pieceTree.insert(s.rangeOffset,s.text,!0)):this._pieceTree.delete(s.rangeOffset,s.rangeLength);const c=new H(r,o,a,l);t.push({range:c,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,s){return this._pieceTree.findMatchesLineByLine(e,t,n,s)}getPieceTree(){return this._pieceTree}static _getInverseEditRange(e,t){const n=e.startLineNumber,s=e.startColumn,[r,o,a]=Yr(t);let l;if(t.length>0){const c=r+1;c===1?l=new H(n,s,n,s+o):l=new H(n,s,n+c-1,a+1)}else l=new H(n,s,n,s);return l}static _getInverseEditRanges(e){const t=[];let n=0,s=0,r=null;for(let o=0,a=e.length;o<a;o++){const l=e[o];let c,h;r?r.range.endLineNumber===l.range.startLineNumber?(c=n,h=s+(l.range.startColumn-r.range.endColumn)):(c=n+(l.range.startLineNumber-r.range.endLineNumber),h=l.range.startColumn):(c=l.range.startLineNumber,h=l.range.startColumn);let u;if(l.text.length>0){const f=l.eolCount+1;f===1?u=new H(c,h,c,h+l.firstLineLength):u=new H(c,h,c+f-1,l.lastLineLength+1)}else u=new H(c,h,c,h);n=u.endLineNumber,s=u.endColumn,t.push(u),r=l}return t}static _sortOpsAscending(e,t){const n=H.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){const n=H.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}}class c${constructor(e,t,n,s,r,o,a,l,c){this._chunks=e,this._bom=t,this._cr=n,this._lf=s,this._crlf=r,this._containsRTL=o,this._containsUnusualLineTerminators=a,this._isBasicASCII=l,this._normalizeEOL=c}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===Vo.LF?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let r=0,o=n.length;r<o;r++){const a=n[r].buffer.replace(/\r\n|\r|\n/g,t),l=Co(a);n[r]=new Al(a,l)}const s=new Hl(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:s,disposable:s}}getFirstLineText(e){return this._chunks[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}}class ZS{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&RI(e)&&(this.BOM=$7,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===k.CarriageReturn||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=r$(this._tmpLineStarts,e);this.chunks.push(new Al(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=II(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=NI(e)))}finish(e=!0){return this._finish(),new c$(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=Co(e.buffer);e.lineStarts=t,this._previousChar===k.CarriageReturn&&this.cr++}}}class h$ extends Mf{get debugName(){return this._debugNameData.getDebugName(this)??"LazyObservableValue"}constructor(e,t,n){super(),this._debugNameData=e,this._equalityComparator=n,this._isUpToDate=!0,this._deltas=[],this._updateCounter=0,this._value=t}get(){return this._update(),this._value}_update(){if(!this._isUpToDate)if(this._isUpToDate=!0,this._deltas.length>0){for(const e of this._deltas){_i()?.handleObservableUpdated(this,{change:e,didChange:!0,oldValue:"(unknown)",newValue:this._value,hadValue:!0});for(const t of this._observers)t.handleChange(this,e)}this._deltas.length=0}else{_i()?.handleObservableUpdated(this,{change:void 0,didChange:!0,oldValue:"(unknown)",newValue:this._value,hadValue:!0});for(const e of this._observers)e.handleChange(this,void 0)}}_beginUpdate(){if(this._updateCounter++,this._updateCounter===1)for(const e of this._observers)e.beginUpdate(this)}_endUpdate(){if(this._updateCounter--,this._updateCounter===0){this._update();const e=[...this._observers];for(const t of e)t.endUpdate(this)}}addObserver(e){const t=!this._observers.has(e)&&this._updateCounter>0;super.addObserver(e),t&&e.beginUpdate(this)}removeObserver(e){const t=this._observers.has(e)&&this._updateCounter>0;super.removeObserver(e),t&&e.endUpdate(this)}set(e,t,n){if(n===void 0&&this._equalityComparator(this._value,e))return;let s;t||(t=s=new Of(()=>{},()=>`Setting ${this.debugName}`));try{if(this._isUpToDate=!1,this._setValue(e),n!==void 0&&this._deltas.push(n),t.updateObserver({beginUpdate:()=>this._beginUpdate(),endUpdate:()=>this._endUpdate(),handleChange:(r,o)=>{},handlePossibleChange:r=>{}},this),this._updateCounter>1)for(const r of this._observers)r.handlePossibleChange(this)}finally{s&&s.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(e){this._value=e}}function K4(i,e){return i.lazy?new h$(new Qi(i.owner,i.debugName,void 0),e,i.equalsFn??ys):new jd(new Qi(i.owner,i.debugName,void 0),e,i.equalsFn??ys)}class u${constructor(){this._onDidChangeVisibleRanges=new A,this.onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event,this._views=new Set,this._viewsChanged=ZT(this),this.visibleLineRanges=zh({owner:this,equalsFn:xF(LF())},e=>(this._viewsChanged.read(e),Se.joinMany([...this._views].map(n=>n.state.read(e)?.visibleLineRanges??[]))))}attachView(){const e=new f$(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),this._viewsChanged.trigger(void 0),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0}),this._viewsChanged.trigger(void 0)}}class d${constructor(e,t){this.visibleLineRanges=e,this.stabilized=t}equals(e){return this===e?!0:!(!wi(this.visibleLineRanges,e.visibleLineRanges,(t,n)=>t.equals(n))||this.stabilized!==e.stabilized)}}class f${get state(){return this._state}constructor(e){this.handleStateChange=e,this._state=K4({owner:this,equalsFn:DF((t,n)=>t.equals(n))},void 0)}setVisibleLines(e,t){const n=e.map(r=>new Se(r.startLineNumber,r.endLineNumber+1)),s=new d$(n,t);this._state.set(s,void 0,void 0),this.handleStateChange(s)}}class g$ extends ${get lineRanges(){return this._lineRanges}constructor(e){super(),this._refreshTokens=e,this.runner=this._register(new Bs(()=>this.update(),50)),this._computedLineRanges=[],this._lineRanges=[]}update(){wi(this._computedLineRanges,this._lineRanges,(e,t)=>e.equals(t))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(e){this._lineRanges=e.visibleLineRanges,e.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}}class G4 extends ${get backgroundTokenizationState(){return this._backgroundTokenizationState}constructor(e,t){super(),this._languageIdCodec=e,this._textModel=t,this._onDidChangeTokens=this._register(new A),this.onDidChangeTokens=this._onDidChangeTokens.event}tokenizeIfCheap(e){this.isCheapToTokenize(e)&&this.forceTokenization(e)}}function p$(i,e){const t=i.gotoNextSibling(),n=e.gotoNextSibling();if(t!==n)throw new Error("Trees are out of sync");return t&&n}function j4(i,e){const t=i.gotoParent(),n=e.gotoParent();if(t!==n)throw new Error("Trees are out of sync");return t&&n}function m$(i,e,t){const n=i.gotoFirstChild(),s=e.gotoFirstChild();if(n!==s)throw new Error("Trees are out of sync");if(t===0)return n&&s;for(let r=1;r<=t;r++){const o=i.gotoNextSibling(),a=e.gotoNextSibling();if(o!==a)throw new Error("Trees are out of sync");if(!o||!a)return!1}return n&&s}function rD(i,e){do{if(i.currentNode.nextSibling)return p$(i,e);i.currentNode.parent&&j4(i,e)}while(i.currentNode.nextSibling||i.currentNode.parent);return!1}function b$(i,e){const t=e.walk();t.resetTo(i);const n=i.currentNode;do if(t.currentNode.previousSibling&&t.currentNode.endIndex-t.currentNode.startIndex!==0)t.gotoPreviousSibling();else{for(;!t.currentNode.previousSibling&&t.currentNode.parent;)t.gotoParent();t.gotoPreviousSibling()}while(t.currentNode.endIndex>n.startIndex&&(t.currentNode.parent||t.currentNode.previousSibling)&&t.currentNode.id!==n.id);if(t.currentNode.id!==n.id&&t.currentNode.endIndex<=n.startIndex)return t.currentNode}let Gw=class extends ${constructor(e,t,n,s,r,o,a){super(),this.languageId=e,this._ranges=t,this._parser=n,this._parserClass=s,this.textModel=r,this._logService=o,this._telemetryService=a,this._tree=Os(this,void 0),this.tree=this._tree,this._treeLastParsedVersion=Os(this,-1),this.treeLastParsedVersion=this._treeLastParsedVersion,this._onDidChangeContentQueue=new W9,this._tree=Os(this,void 0),this.tree=this._tree,this._register(fe(()=>{this._tree.get()?.delete(),this._lastFullyParsed?.delete(),this._lastFullyParsedWithEdits?.delete(),this._parser.delete()})),this.handleContentChange(void 0,this._ranges)}handleContentChange(e,t){const n=this.textModel.getVersionId();let s=[];t&&(s=this._setRanges(t)),e&&this._applyEdits(e.changes),this._onDidChangeContentQueue.clearPending(),this._onDidChangeContentQueue.schedule(async()=>{if(this._store.isDisposed)return;const r=this._lastFullyParsed;let o;this._lastFullyParsedWithEdits&&this._lastFullyParsed&&(o=this._findChangedNodes(this._lastFullyParsedWithEdits,this._lastFullyParsed));const a=await this._parseAndUpdateTree(n);if(a){let l;o?r&&o&&(l=this._findTreeChanges(a,o,s)):this._ranges&&(l=this._ranges.map(h=>({newRange:new H(h.startPosition.row+1,h.startPosition.column+1,h.endPosition.row+1,h.endPosition.column+1),oldRangeLength:h.endIndex-h.startIndex,newRangeStartOffset:h.startIndex,newRangeEndOffset:h.endIndex}))),l||(l=[{newRange:this.textModel.getFullModelRange(),newRangeStartOffset:0,newRangeEndOffset:this.textModel.getValueLength()}]);const c=this._tree.get();lc(h=>{this._tree.set(a,h,{ranges:l,versionId:n}),this._treeLastParsedVersion.set(n,h)}),c?.delete()}})}get ranges(){return this._ranges}getInjectionTrees(e,t){}_applyEdits(e){for(const t of e){const n=pi.ofRange(H.lift(t.range)),s=pi.ofText(t.text),r=t.text.length===0?s:n.add(s),o={startIndex:t.rangeOffset,oldEndIndex:t.rangeOffset+t.rangeLength,newEndIndex:t.rangeOffset+t.text.length,startPosition:{row:t.range.startLineNumber-1,column:t.range.startColumn-1},oldEndPosition:{row:t.range.endLineNumber-1,column:t.range.endColumn-1},newEndPosition:{row:t.range.startLineNumber+r.lineCount-1,column:r.lineCount?r.columnCount:t.range.endColumn+r.columnCount}};this._tree.get()?.edit(o),this._lastFullyParsedWithEdits?.edit(o)}}_findChangedNodes(e,t){if(this._ranges&&this._ranges.every(a=>a.startPosition.row!==e.rootNode.startPosition.row)||e.rootNode.startPosition.row!==0)return[];const n=e.walk(),s=t.walk(),r=[];let o=!0;do if(n.currentNode.hasChanges){const a=n.currentNode.children,l=[],c=a.filter((h,u)=>h?.hasChanges||s.currentNode.children.length<=u?(l.push(u),!0):!1);if(c.length===0||n.currentNode.hasError!==s.currentNode.hasError){for(;n.currentNode.parent&&o&&!n.currentNode.isNamed;)o=j4(n,s);const h=n.currentNode,u=b$(n,e)??h;r.push({startIndex:u.startIndex,endIndex:h.endIndex,startPosition:u.startPosition,endPosition:h.endPosition}),o=rD(n,s)}else c.length>=1&&(o=m$(n,s,l[0]))}else o=rD(n,s);while(o);return n.delete(),s.delete(),r}_findTreeChanges(e,t,n){let s=0;const r=[];for(let o=0;o<t.length;o++){const a=t[o];if(r.length>0&&a.startIndex>=r[r.length-1].newRangeStartOffset&&a.endIndex<=r[r.length-1].newRangeEndOffset)continue;const l=e.walk(),c=()=>l.startIndex<a.startIndex&&l.endIndex>a.endIndex;for(;c();){let m=l.gotoFirstChild(),_=!1;for(;m;)if(c()&&l.currentNode.isNamed){_=!0;break}else m=l.gotoNextSibling();if(!_){l.gotoParent();break}if(l.currentNode.childCount===0)break}const h=l.currentNode.startPosition,u=l.currentNode.endPosition,f=l.currentNode.startIndex,g=l.currentNode.endIndex,p={newRange:new H(h.row+1,h.column+1,u.row+1,u.column+1),newRangeStartOffset:f,newRangeEndOffset:g};s<n.length&&aD(n[s],{startIndex:f,endIndex:g})?(n[s].startIndex<p.newRangeStartOffset&&(p.newRange=p.newRange.setStartPosition(n[s].startPosition.row+1,n[s].startPosition.column+1),p.newRangeStartOffset=n[s].startIndex),n[s].endIndex>p.newRangeEndOffset&&(p.newRange=p.newRange.setEndPosition(n[s].endPosition.row+1,n[s].endPosition.column+1),p.newRangeEndOffset=n[s].endIndex),s++):s<n.length&&n[s].endIndex<p.newRangeStartOffset&&r.push({newRange:new H(n[s].startPosition.row+1,n[s].startPosition.column+1,n[s].endPosition.row+1,n[s].endPosition.column+1),newRangeStartOffset:n[s].startIndex,newRangeEndOffset:n[s].endIndex}),r.length>0&&r[r.length-1].newRangeEndOffset>=p.newRangeStartOffset?(r[r.length-1].newRange=H.fromPositions(r[r.length-1].newRange.getStartPosition(),p.newRange.getEndPosition()),r[r.length-1].newRangeEndOffset=p.newRangeEndOffset):r.push(p)}return this._constrainRanges(r)}_constrainRanges(e){if(!this._ranges)return e;const t=[];let n=0,s=0;for(;n<e.length&&s<this._ranges.length;){const r=e[n],o=this._ranges[s];if(r.newRangeEndOffset<o.startIndex)n++;else if(r.newRangeStartOffset>o.endIndex)s++;else{const a=Math.max(r.newRangeStartOffset,o.startIndex),l=Math.min(r.newRangeEndOffset,o.endIndex),c=r.newRange.intersectRanges(new H(o.startPosition.row+1,o.startPosition.column+1,o.endPosition.row+1,o.endPosition.column+1));t.push({newRange:c,newRangeEndOffset:l,newRangeStartOffset:a}),l<r.newRangeEndOffset?(r.newRange=H.fromPositions(c.getEndPosition(),r.newRange.getEndPosition()),r.newRangeStartOffset=l+1):n++}}return t}async _parseAndUpdateTree(e){const t=await this._parse();if(t)return this._lastFullyParsed?.delete(),this._lastFullyParsed=t.copy(),this._lastFullyParsedWithEdits?.delete(),this._lastFullyParsedWithEdits=t.copy(),t;this._tree.get()||this._parser.reset()}_parse(){let e=Ld.Full;return this._tree.get()&&(e=Ld.Incremental),this._parseAndYield(e)}async _parseAndYield(e){let t=0,n=0;const s=this.textModel.getVersionId();let r;const o=_$();do{const a=performance.now();r=this._parser.parse((l,c)=>this._parseCallback(l),this._tree.get(),{progressCallback:o,includedRanges:this._ranges}),t+=performance.now()-a,n++,await new Promise(l=>x1(l))}while(!this._store.isDisposed&&!r&&s===this.textModel.getVersionId());return this._sendParseTimeTelemetry(e,t,n),r&&s===this.textModel.getVersionId()?r:void 0}_parseCallback(e){try{return this.textModel.getTextBuffer().getNearestChunk(e)}catch(t){this._logService.debug("Error getting chunk for tree-sitter parsing",t)}}_setRanges(e){const t=[];if(this._ranges)for(const n of e){let s=!1;for(let r=0;r<this._ranges.length;r++){const o=this._ranges[r];if(M$(o,n)||aD(o,n)){s=!0;break}}s||t.push(n)}else t.push(...e);return this._ranges=e,t}_sendParseTimeTelemetry(e,t,n){this._logService.debug(`Tree parsing (${e}) took ${t} ms and ${n} passes.`),e===Ld.Full?this._telemetryService.publicLog2("treeSitter.fullParse",{languageId:this.languageId,time:t,passes:n}):this._telemetryService.publicLog2("treeSitter.incrementalParse",{languageId:this.languageId,time:t,passes:n})}createParsedTreeSync(e){const t=new this._parserClass;t.setLanguage(this._parser.language);const n=t.parse(e);return t.delete(),n??void 0}};Gw=G([L(5,Zi),L(6,gu)],Gw);var Ld;(function(i){i.Full="fullParse",i.Incremental="incrementalParse"})(Ld||(Ld={}));function _$(){let i=performance.now();return function(t){const n=performance.now();return n-i>50?(i=n,!0):!1}}class w${constructor(e){this._default=e,this._store=[]}get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,n){if(e>=this._store.length)return;if(t===0){this.insert(e,n);return}else if(n===0){this.delete(e,t);return}const s=this._store.slice(0,e),r=this._store.slice(e+t),o=v$(n,this._default);this._store=s.concat(o,r)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;const n=[];for(let s=0;s<t;s++)n[s]=this._default;this._store=kf(this._store,e,n)}}function v$(i,e){const t=[];for(let n=0;n<i;n++)t[n]=e;return t}const Eo=new Uint32Array(0).buffer;class Ri{static deleteBeginning(e,t){return e===null||e===Eo?e:Ri.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===Eo)return e;const n=Ro(e),s=n[n.length-2];return Ri.delete(e,t,s)}static delete(e,t,n){if(e===null||e===Eo||t===n)return e;const s=Ro(e),r=s.length>>>1;if(t===0&&s[s.length-2]===n)return Eo;const o=bi.findIndexInTokensArray(s,t),a=o>0?s[o-1<<1]:0,l=s[o<<1];if(n<l){const g=n-t;for(let p=o;p<r;p++)s[p<<1]-=g;return e}let c,h;a!==t?(s[o<<1]=t,c=o+1<<1,h=t):(c=o<<1,h=a);const u=n-t;for(let g=o+1;g<r;g++){const p=s[g<<1]-u;p>h&&(s[c++]=p,s[c++]=s[(g<<1)+1],h=p)}if(c===s.length)return e;const f=new Uint32Array(c);return f.set(s.subarray(0,c),0),f.buffer}static append(e,t){if(t===Eo)return e;if(e===Eo)return t;if(e===null)return e;if(t===null)return null;const n=Ro(e),s=Ro(t),r=s.length>>>1,o=new Uint32Array(n.length+s.length);o.set(n,0);let a=n.length;const l=n[n.length-2];for(let c=0;c<r;c++)o[a++]=s[c<<1]+l,o[a++]=s[(c<<1)+1];return o.buffer}static insert(e,t,n){if(e===null||e===Eo)return e;const s=Ro(e),r=s.length>>>1;let o=bi.findIndexInTokensArray(s,t);o>0&&s[o-1<<1]===t&&o--;for(let a=o;a<r;a++)s[a<<1]+=n;return e}}function Ro(i){return i instanceof Uint32Array?i:new Uint32Array(i)}class Km{static deserialize(e,t,n){const s=new Uint32Array(e.buffer),r=fn(e,t);t+=4;const o=fn(e,t);t+=4;const a=[];for(let l=0;l<o;l++){const c=fn(e,t);t+=4,a.push(s.subarray(t/4,t/4+c/4)),t+=c}return n.push(new Km(r,a)),t}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineRange(){return new Se(this._startLineNumber,this._startLineNumber+this._tokens.length)}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}serializeSize(){let e=0;e+=4,e+=4;for(let t=0;t<this._tokens.length;t++){const n=this._tokens[t];if(!(n instanceof Uint32Array))throw new Error("Not supported!");e+=4,e+=n.byteLength}return e}serialize(e,t){gn(e,this._startLineNumber,t),t+=4,gn(e,this._tokens.length,t),t+=4;for(let n=0;n<this._tokens.length;n++){const s=this._tokens[n];if(!(s instanceof Uint32Array))throw new Error("Not supported!");gn(e,s.byteLength,t),t+=4,e.set(new Uint8Array(s.buffer),t),t+=s.byteLength}return t}applyEdit(e,t){const[n,s]=Yr(t);this._acceptDeleteRange(e),this._acceptInsertText(new pe(e.startLineNumber,e.startColumn),n,s)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){const s=n-t;this._startLineNumber-=s;return}if(!(t>=this._tokens.length)){if(t<0&&n>=this._tokens.length){this._startLineNumber=0,this._tokens=[];return}if(t===n){this._tokens[t]=Ri.delete(this._tokens[t],e.startColumn-1,e.endColumn-1);return}if(t>=0)if(this._tokens[t]=Ri.deleteEnding(this._tokens[t],e.startColumn-1),n<this._tokens.length){const s=Ri.deleteBeginning(this._tokens[n],e.endColumn-1);this._tokens[t]=Ri.append(this._tokens[t],s),this._tokens.splice(t+1,n-t)}else this._tokens[t]=Ri.append(this._tokens[t],null),this._tokens=this._tokens.slice(0,t+1);else{const s=-t;this._startLineNumber-=s,this._tokens[n]=Ri.deleteBeginning(this._tokens[n],e.endColumn-1),this._tokens=this._tokens.slice(n)}}}_acceptInsertText(e,t,n){if(t===0&&n===0)return;const s=e.lineNumber-this._startLineNumber;if(s<0){this._startLineNumber+=t;return}if(!(s>=this._tokens.length)){if(t===0){this._tokens[s]=Ri.insert(this._tokens[s],e.column-1,n);return}this._tokens[s]=Ri.deleteEnding(this._tokens[s],e.column-1),this._tokens[s]=Ri.insert(this._tokens[s],e.column-1,n),this._insertLines(e.lineNumber,t)}}_insertLines(e,t){if(t===0)return;const n=[];for(let s=0;s<t;s++)n[s]=null;this._tokens=kf(this._tokens,e,n)}}class jw{static deserialize(e){let t=0;const n=fn(e,t);t+=4;const s=[];for(let r=0;r<n;r++)t=Km.deserialize(e,t,s);return s}constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e){n.appendLineTokens(t);return}}this._tokens.push(new Km(e,[t]))}finalize(){return this._tokens}serialize(){const e=this._serializeSize(),t=new Uint8Array(e);return this._serialize(t),t}_serializeSize(){let e=0;e+=4;for(let t=0;t<this._tokens.length;t++)e+=this._tokens[t].serializeSize();return e}_serialize(e){let t=0;gn(e,this._tokens.length,t),t+=4;for(let n=0;n<this._tokens.length;n++)t=this._tokens[n].serialize(e,t)}}var Yw;(function(i){i[i.CHEAP_TOKENIZATION_LENGTH_LIMIT=2048]="CHEAP_TOKENIZATION_LENGTH_LIMIT"})(Yw||(Yw={}));class y${constructor(e,t){this.tokenizationSupport=t,this.initialState=this.tokenizationSupport.getInitialState(),this.store=new Xw(e)}getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}}class S$ extends y${constructor(e,t,n,s){super(e,t),this._textModel=n,this._languageIdCodec=s}updateTokensUntilLine(e,t){const n=this._textModel.getLanguageId();for(;;){const s=this.getFirstInvalidLine();if(!s||s.lineNumber>t)break;const r=this._textModel.getLineContent(s.lineNumber),o=Fu(this._languageIdCodec,n,this.tokenizationSupport,r,!0,s.startState);e.add(s.lineNumber,o.tokens),this.store.setEndState(s.lineNumber,o.endState)}}getTokenTypeIfInsertingCharacter(e,t){const n=this.getStartState(e.lineNumber);if(!n)return Jn.Other;const s=this._textModel.getLanguageId(),r=this._textModel.getLineContent(e.lineNumber),o=r.substring(0,e.column-1)+t+r.substring(e.column-1),a=Fu(this._languageIdCodec,s,this.tokenizationSupport,o,!0,n),l=new bi(a.tokens,o,this._languageIdCodec);if(l.getCount()===0)return Jn.Other;const c=l.findTokenIndexAtOffset(e.column-1);return l.getStandardTokenType(c)}tokenizeLinesAt(e,t){const n=this.getStartState(e);if(!n)return null;const s=this._textModel.getLanguageId(),r=[];let o=n;for(const a of t){const l=Fu(this._languageIdCodec,s,this.tokenizationSupport,a,!0,o);r.push(new bi(l.tokens,a,this._languageIdCodec)),o=l.endState}return r}hasAccurateTokensForLine(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t}isCheapToTokenize(e){const t=this.store.getFirstInvalidEndStateLineNumberOrMax();return e<t||e===t&&this._textModel.getLineLength(e)<Yw.CHEAP_TOKENIZATION_LENGTH_LIMIT}tokenizeHeuristically(e,t,n){if(n<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(t<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(e,n),{heuristicTokens:!1};let s=this.guessStartState(t);const r=this._textModel.getLanguageId();for(let o=t;o<=n;o++){const a=this._textModel.getLineContent(o),l=Fu(this._languageIdCodec,r,this.tokenizationSupport,a,!0,s);e.add(o,l.tokens),s=l.endState}return{heuristicTokens:!0}}guessStartState(e){let{likelyRelevantLines:t,initialState:n}=Y4(this._textModel,e,this);n||(n=this.tokenizationSupport.getInitialState());const s=this._textModel.getLanguageId();let r=n;for(const o of t)r=Fu(this._languageIdCodec,s,this.tokenizationSupport,o,!1,r).endState;return r}}function Y4(i,e,t){let n=i.getLineFirstNonWhitespaceColumn(e);const s=[];let r=null;for(let o=e-1;n>1&&o>=1;o--){const a=i.getLineFirstNonWhitespaceColumn(o);if(a!==0&&a<n&&(s.push(i.getLineContent(o)),n=a,r=t?.getStartState(o),r))break}return s.reverse(),{likelyRelevantLines:s,initialState:r??void 0}}class Xw{constructor(e){this.lineCount=e,this._tokenizationStateStore=new k$,this._invalidEndStatesLineNumbers=new C$,this._invalidEndStatesLineNumbers.addRange(new me(1,e+1))}getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new De("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);const n=this._tokenizationStateStore.setEndState(e,t);return n&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new me(e+1,e+2)),n}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new me(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(const t of e){const[n]=Yr(t.text);this.acceptChange(new Se(t.range.startLineNumber,t.range.endLineNumber+1),n+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new me(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){const t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;const n=this.getStartState(t,e);if(!n)throw new De("Start state must be defined");return{lineNumber:t,startState:n}}}class k${constructor(){this._lineEndStates=new w$(null)}getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){const n=this._lineEndStates.get(e);return n&&n.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let n=e.length;t>0&&n>0&&(n--,t--),this._lineEndStates.replace(e.startLineNumber,n,t)}acceptChanges(e){for(const t of e){const[n]=Yr(t.text);this.acceptChange(new Se(t.range.startLineNumber,t.range.endLineNumber+1),n+1)}}}class C${constructor(){this._ranges=[]}getRanges(){return this._ranges}get min(){return this._ranges.length===0?null:this._ranges[0].start}removeMin(){if(this._ranges.length===0)return null;const e=this._ranges[0];return e.start+1===e.endExclusive?this._ranges.shift():this._ranges[0]=new me(e.start+1,e.endExclusive),e.start}delete(e){const t=this._ranges.findIndex(n=>n.contains(e));if(t!==-1){const n=this._ranges[t];n.start===e?n.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new me(e+1,n.endExclusive):n.endExclusive===e+1?this._ranges[t]=new me(n.start,e):this._ranges.splice(t,1,new me(n.start,e),new me(e+1,n.endExclusive))}}addRange(e){me.addRange(e,this._ranges)}addRangeAndResize(e,t){let n=0;for(;!(n>=this._ranges.length||e.start<=this._ranges[n].endExclusive);)n++;let s=n;for(;!(s>=this._ranges.length||e.endExclusive<this._ranges[s].start);)s++;const r=t-e.length;for(let o=s;o<this._ranges.length;o++)this._ranges[o]=this._ranges[o].delta(r);if(n===s){const o=new me(e.start,e.start+t);o.isEmpty||this._ranges.splice(n,0,o)}else{const o=Math.min(e.start,this._ranges[n].start),a=Math.max(e.endExclusive,this._ranges[s-1].endExclusive),l=new me(o,a+r);l.isEmpty?this._ranges.splice(n,s-n):this._ranges.splice(n,s-n,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}}function Fu(i,e,t,n,s,r){let o=null;if(t)try{o=t.tokenizeEncoded(n,s,r.clone())}catch(a){pt(a)}return o||(o=EN(i.encodeLanguageId(e),r)),bi.convertToEndOffset(o.tokens,n.length),o}class E${constructor(e,t){this._tokenizerWithStateStore=e,this._backgroundTokenStore=t,this._isDisposed=!1,this._isScheduled=!1}dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,Hh(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){const t=Date.now()+e.timeRemaining(),n=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?x1(n):this._beginBackgroundTokenization())};n()}_backgroundTokenizeForAtLeast1ms(){const e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new jw,n=Yo.create(!1);do if(n.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){const t=this._tokenizerWithStateStore?.getFirstInvalidLine();return t?(this._tokenizerWithStateStore.updateTokensUntilLine(e,t.lineNumber),t.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new Se(e,t))}}class Xo{get children(){return this._children}get length(){return this._length}constructor(e){this.height=e,this._children=[],this._length=0}static create(e,t){const n=new Xo(e.height+1);return n.appendChild(e),n.appendChild(t),n}canAppendChild(){return this._children.length<3}appendChild(e){if(!this.canAppendChild())throw new Error("Cannot insert more than 3 children in a ListNode");this._children.push(e),this._length+=e.length,this._updateParentLength(e.length),fi(e)||(e.parent=this)}_updateParentLength(e){let t=this.parent;for(;t;)t._length+=e,t=t.parent}unappendChild(){const e=this._children.pop();return this._length-=e.length,this._updateParentLength(-e.length),e}prependChild(e){if(this._children.length>=3)throw new Error("Cannot prepend more than 3 children in a ListNode");this._children.unshift(e),this._length+=e.length,this._updateParentLength(e.length),fi(e)||(e.parent=this)}unprependChild(){const e=this._children.shift();return this._length-=e.length,this._updateParentLength(-e.length),e}lastChild(){return this._children[this._children.length-1]}dispose(){this._children.splice(0,this._children.length)}}var Yn;(function(i){i[i.None=0]="None",i[i.ViewportGuess=1]="ViewportGuess",i[i.EditGuess=2]="EditGuess",i[i.Accurate=3]="Accurate"})(Yn||(Yn={}));function fi(i){return i.token!==void 0}function X4(i,e){let t=i;const n=[];let s;for(;;){if(e.height===t.height){s=e;break}if(fi(t))throw new Error("unexpected");n.push(t),t=t.lastChild()}for(let r=n.length-1;r>=0;r--){const o=n[r];s&&(o.children.length>=3?s=Xo.create(o.unappendChild(),s):(o.appendChild(s),s=void 0))}if(s){const r=new Xo(s.height+1);return r.appendChild(i),r.appendChild(s),r}else return i}function x$(i,e){let t=i;const n=[];for(;e.height!==t.height;){if(fi(t))throw new Error("unexpected");n.push(t),t=t.children[0]}let s=e;for(let r=n.length-1;r>=0;r--){const o=n[r];s&&(o.children.length>=3?s=Xo.create(s,o.unprependChild()):(o.prependChild(s),s=void 0))}return s?Xo.create(s,i):i}function L$(i,e){return i.height===e.height?Xo.create(i,e):i.height>e.height?X4(i,e):x$(e,i)}class JS{get root(){return this._root}constructor(e){this._textModel=e,this._root=this.createEmptyRoot()}createEmptyRoot(){return{length:this._textModel.getValueLength(),token:0,height:0,tokenQuality:Yn.None}}buildStore(e,t){this._root=this.createFromUpdates(e,t)}createFromUpdates(e,t){if(e.length===0)return this.createEmptyRoot();let n={length:e[0].length,token:e[0].token,height:0,tokenQuality:t};for(let s=1;s<e.length;s++)n=X4(n,{length:e[s].length,token:e[s].token,height:0,tokenQuality:t});return n}update(e,t,n){t.length!==0&&this.replace(e,t[0].startOffsetInclusive,t,n)}delete(e,t){this.replace(e,t,[],Yn.EditGuess)}replace(e,t,n,s){const r=t+e,o=[],a=[],l=[{node:this._root,offset:0}];for(;l.length>0;){const u=l.pop(),f=u.offset;if(f<t&&f+u.node.length<=t){fi(u.node)||(u.node.parent=void 0),o.push(u.node);continue}else fi(u.node)&&f<t&&o.push({length:t-f,token:u.node.token,height:0,tokenQuality:u.node.tokenQuality});if(!(t<=f&&f+u.node.length<=r)){if(f>=r){fi(u.node)||(u.node.parent=void 0),a.push(u.node);continue}else if(fi(u.node)&&f+u.node.length>r){a.push({length:f+u.node.length-r,token:u.node.token,height:0,tokenQuality:u.node.tokenQuality});continue}if(!fi(u.node)){let g=f+u.node.length;for(let p=u.node.children.length-1;p>=0;p--)g-=u.node.children[p].length,l.push({node:u.node.children[p],offset:g})}}}let c;n.length>0?c=o.concat(this.createFromUpdates(n,s),a):c=o.concat(a);let h=c[0];for(let u=1;u<c.length;u++)h=L$(h,c[u]);this._root=h??this.createEmptyRoot()}traverseInOrderInRange(e,t,n){const s=[{node:this._root,offset:0}];for(;s.length>0;){const{node:r,offset:o}=s.pop();if(!(o+r.length<=e||o>=t)){if(n(r,o))return;if(!fi(r)){let l=o+r.length;for(let c=r.children.length-1;c>=0;c--)l-=r.children[c].length,s.push({node:r.children[c],offset:l})}}}}getTokenAt(e){let t;return this.traverseInOrderInRange(e,this._root.length,(n,s)=>fi(n)?(t={token:n.token,startOffsetInclusive:s,length:n.length},!0):!1),t}getTokensInRange(e,t){const n=[];return this.traverseInOrderInRange(e,t,(s,r)=>{if(fi(s)){let o=s.length,a=r;r<e&&r+s.length>t?(a=e,o=t-e):r<e?(o-=e-r,a=e):r+s.length>t&&(o-=r+s.length-t),n.push({token:s.token,startOffsetInclusive:a,length:o})}return!1}),n}markForRefresh(e,t){this.traverseInOrderInRange(e,t,n=>(fi(n)&&(n.tokenQuality=Yn.None),!1))}rangeHasTokens(e,t,n){let s=!0;return this.traverseInOrderInRange(e,t,r=>(fi(r)&&r.tokenQuality<n&&(s=!1),!1)),s}rangeNeedsRefresh(e,t){let n=!1;return this.traverseInOrderInRange(e,t,s=>(fi(s)&&s.tokenQuality!==Yn.Accurate&&(n=!0),!1)),n}getNeedsRefresh(){const e=[];return this.traverseInOrderInRange(0,this._textModel.getValueLength(),(t,n)=>(fi(t)&&t.tokenQuality!==Yn.Accurate&&(e.length>0&&e[e.length-1].endOffset===n?e[e.length-1].endOffset+=t.length:e.push({startOffset:n,endOffset:n+t.length})),!1)),e}deepCopy(){const e=new JS(this._textModel);return e._root=this._copyNodeIterative(this._root),e}_copyNodeIterative(e){const t=fi(e)?{length:e.length,token:e.token,tokenQuality:e.tokenQuality,height:e.height}:new Xo(e.height),n=[[e,t]];for(;n.length>0;){const[s,r]=n.pop();if(!fi(s))for(const o of s.children){const a=fi(o)?{length:o.length,token:o.token,tokenQuality:o.tokenQuality,height:o.height}:new Xo(o.height);r.appendChild(a),n.push([o,a])}}return t}printTree(e=this._root){const t=[],n=[[e,0]];for(;n.length>0;){const[s,r]=n.pop(),o="  ".repeat(r);if(fi(s))t.push(`${o}Leaf(length: ${s.length}, token: ${s.token}, refresh: ${s.tokenQuality})
`);else{t.push(`${o}List(length: ${s.length})
`);for(let a=s.children.length-1;a>=0;a--)n.push([s.children[a],r+1])}}return t.join("")}dispose(){const e=[[this._root,!1]];for(;e.length>0;){const[t,n]=e.pop();if(!fi(t))if(n)t.dispose(),t.parent=void 0;else{e.push([t,!0]);for(let s=t.children.length-1;s>=0;s--)e.push([t.children[s],!1])}}this._root=void 0}}const D$=be("treeSitterThemeService");function Q4(i,e){let t,n=!0;return BF({changeTracker:{createChangeSummary:()=>({deltas:[],didChange:!1}),handleChange:(s,r)=>{if(s.didChange(i)){const o=s.change;o!==void 0&&r.deltas.push(o),r.didChange=!0}return!0}}},(s,r)=>{const o=i.read(s),a=t;r.didChange&&(t=o,e(o,a,r.deltas)),n&&(n=!1,t=o)})}function I$(i,e){const t=new X,n=Q4(i,(s,r,o)=>{t.clear(),e(s,r,o,t)});return{dispose(){n.dispose(),t.dispose()}}}function Xne(i,e){return I$(i,(t,n,s,r)=>{e(t,n,s,L7(r))})}function T$(i){return{createChangeSummary:e=>({changes:[]}),handleChange(e,t){for(const n in i)e.didChange(i[n])&&t.changes.push({key:n,change:e.change});return!0},beforeUpdate(e,t){for(const n in i){if(n==="changes")throw new De('property name "changes" is reserved for change tracking');t[n]=i[n].read(e)}}}}let Qw=class extends ${get _textModel(){return this._tree.textModel}constructor(e,t,n,s,r){super(),this._tree=e,this._highlightingQueries=t,this._languageIdCodec=n,this._visibleLineRanges=s,this._treeSitterThemeService=r,this._onDidChangeTokens=this._register(new A),this.onDidChangeTokens=this._onDidChangeTokens.event,this._onDidCompleteBackgroundTokenization=this._register(new A),this.onDidChangeBackgroundTokenization=this._onDidCompleteBackgroundTokenization.event,this._encodedLanguageId=this._languageIdCodec.encodeLanguageId(this._tree.languageId),this._register(Q4(this._treeSitterThemeService.onChange,()=>{this._updateTheme()})),this._tokenStore=this._register(new JS(this._textModel)),this._accurateVersion=this._textModel.getVersionId(),this._guessVersion=this._textModel.getVersionId(),this._tokenStore.buildStore(this._createEmptyTokens(),Yn.None),this._register(du(o=>{const a=this._visibleLineRanges.read(o);this._parseAndTokenizeViewPort(a)})),this._register(QT({owner:this,changeTracker:T$({tree:this._tree.tree})},(o,a)=>{const l=a.changes.at(0)?.change;if(a.changes.length>1)throw new De("The tree changed twice in one transaction. This is currently not supported and should not happen.");if(!l)a.tree&&this._firstTreeUpdate(this._tree.treeLastParsedVersion.read(o));else{if(this.hasTokens())for(const c of l.ranges)this._markForRefresh(c.newRange);this.hasTokens()?this._handleTreeUpdate(l.ranges,l.versionId):this._firstTreeUpdate(l.versionId)}}))}handleContentChanged(e){this._guessVersion=e.versionId;for(const t of e.changes)if(t.text.length>t.rangeLength){const n=t.rangeOffset>0?t.rangeOffset-1:t.rangeOffset,s=this._tokenStore.getTokenAt(n);let r;s?(r={startOffsetInclusive:s.startOffsetInclusive,length:s.length+t.text.length-t.rangeLength,token:s.token},this._tokenStore.markForRefresh(n,t.rangeOffset+(t.text.length>t.rangeLength?t.text.length:t.rangeLength))):r={startOffsetInclusive:n,length:t.text.length,token:0},this._tokenStore.update(s?.length??0,[r],Yn.EditGuess)}else if(t.text.length<t.rangeLength){const n=t.rangeLength-t.text.length;this._tokenStore.delete(n,t.rangeOffset)}}getLineTokens(e){const t=this._textModel.getLineContent(e),n=this.getTokens(e);return new bi(n,t,this._languageIdCodec)}_createEmptyTokens(){const e=this._emptyToken(),t=this._textModel.getValueLength();return[this._emptyTokensForOffsetAndLength(0,t,e)]}_emptyToken(){return this._treeSitterThemeService.findMetadata([],this._encodedLanguageId,!1,void 0)}_emptyTokensForOffsetAndLength(e,t,n){return{token:n,length:e+t,startOffsetInclusive:0}}hasAccurateTokensForLine(e){return this.hasTokens(new H(e,1,e,this._textModel.getLineMaxColumn(e)))}tokenizeLinesAt(e,t){const n=this._guessTokensForLinesContent(e,t),s=[];if(!n)return null;for(let r=0;r<n.length;r++)s.push(new bi(n[r],t[r],this._languageIdCodec));return s}_rangeHasTokens(e,t){return this._tokenStore.rangeHasTokens(this._textModel.getOffsetAt(e.getStartPosition()),this._textModel.getOffsetAt(e.getEndPosition()),t)}hasTokens(e){return!e||this._guessVersion===this._accurateVersion?!0:!this._tokenStore.rangeNeedsRefresh(this._textModel.getOffsetAt(e.getStartPosition()),this._textModel.getOffsetAt(e.getEndPosition()))}getTokens(e){const t=this._textModel.getOffsetAt({lineNumber:e,column:1}),n=this._textModel.getOffsetAt({lineNumber:e,column:this._textModel.getLineLength(e)+1}),s=this._tokenStore.getTokensInRange(t,n),r=new Uint32Array(s.length*2);for(let o=0;o<s.length;o++)r[o*2]=s[o].startOffsetInclusive-t+s[o].length,r[o*2+1]=s[o].token;return r}getTokensInRange(e,t,n,s){const r=s?this._tokenizeCapturesWithMetadata(s,t,n):this._tokenize(e,t,n);if(r?.endOffsetsAndMetadata)return this._rangeTokensAsUpdates(t,r.endOffsetsAndMetadata)}_updateTokensInStore(e,t,n){this._accurateVersion=e;for(const s of t){const r=s.newTokens.length>0?s.newTokens[s.newTokens.length-1]:void 0;let o;r&&this._guessVersion>=e?o=r.startOffsetInclusive+r.length-s.newTokens[0].startOffsetInclusive:s.oldRangeLength?o=s.oldRangeLength:o=0,this._tokenStore.update(o,s.newTokens,n)}}_markForRefresh(e){this._tokenStore.markForRefresh(this._textModel.getOffsetAt(e.getStartPosition()),this._textModel.getOffsetAt(e.getEndPosition()))}_getNeedsRefresh(){const e=this._tokenStore.getNeedsRefresh();return e?e.map(t=>({range:H.fromPositions(this._textModel.getPositionAt(t.startOffset),this._textModel.getPositionAt(t.endOffset)),startOffset:t.startOffset,endOffset:t.endOffset})):[]}_parseAndTokenizeViewPort(e){const t=e.map(n=>n.toInclusiveRange()).filter(_l);for(const n of t){const s=this._textModel.getOffsetAt(n.getStartPosition()),r=this._textModel.getOffsetAt(n.getEndPosition()),o=this._textModel.getVersionId();if(this._rangeHasTokens(n,Yn.ViewportGuess))continue;const a=this._textModel.getValueInRange(n),l=this._forceParseAndTokenizeContent(n,s,r,a,!0);if(!l||this._rangeHasTokens(n,Yn.ViewportGuess)||l.length===0)continue;const c=l[l.length-1],h=c.startOffsetInclusive+c.length-l[0].startOffsetInclusive;this._updateTokensInStore(o,[{newTokens:l,oldRangeLength:h}],Yn.ViewportGuess),this._onDidChangeTokens.fire({changes:{semanticTokensApplied:!1,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]}})}}_guessTokensForLinesContent(e,t){if(t.length===0)return;const n=t.join(this._textModel.getEOL()),s=new H(1,1,e+t.length,t[t.length-1].length+1),r=this._textModel.getOffsetAt({lineNumber:e,column:1}),o=this._forceParseAndTokenizeContent(s,r,r+n.length,n,!1);if(!o)return;const a=new Array(t.length);let l=0,c=0,h=0;for(let u=0;u<t.length;u++){const f=[];let g=!1;for(let p=l;!g&&p<o.length;p++){const m=o[p],_=m.endOffset-h,v=c-h;if(_<=t[u].length)f.push({endOffset:_,metadata:m.metadata}),l++;else if(v<t[u].length){const y={endOffset:t[u].length,metadata:m.metadata};f.push(y),g=!0}else g=!0;c=m.endOffset}a[u]=this._endOffsetTokensToUint32Array(f),h+=t[u].length+this._textModel.getEOL().length}return a}_forceParseAndTokenizeContent(e,t,n,s,r){const o=Y4(this._textModel,e.startLineNumber).likelyRelevantLines,a=o.join(this._textModel.getEOL()),l=this._tree.createParsedTreeSync(`${a}${s}`);if(!l)return;const c=new H(1,1,e.endLineNumber-e.startLineNumber+1+o.length,e.endColumn),h=this.captureAtRange(c),u=this._tokenizeCapturesWithMetadata(h,a.length,n-t+a.length);if(l.delete(),!!u)return r?this._rangeTokensAsUpdates(t,u.endOffsetsAndMetadata,a.length):u.endOffsetsAndMetadata}_firstTreeUpdate(e){return this._setViewPortTokens(e)}_setViewPortTokens(e){const t=this._visibleLineRanges.get().map(n=>{const s=n.toInclusiveRange();if(!s)return;const r=this._textModel.getOffsetAt(s.getStartPosition()),o=this._textModel.getOffsetAt(s.getEndPosition());return{newRange:s,newRangeEndOffset:o,newRangeStartOffset:r}}).filter(_l);return this._handleTreeUpdate(t,e)}_handleTreeUpdate(e,t){const n=[];for(let o=0;o<e.length;o++)if(e[o].newRange.endLineNumber-e[o].newRange.startLineNumber>1e3){const l=e[o].newRange.endLineNumber;let c=e[o].newRange.startLineNumber,h=e[o].newRange.startColumn,u=c+1e3;do{const f=new pe(c,h),g=u===e[o].newRange.endLineNumber?e[o].newRange.endColumn:this._textModel.getLineMaxColumn(u),p=new pe(u,g),m=H.fromPositions(f,p);n.push({range:m,startOffset:this._textModel.getOffsetAt(m.getStartPosition()),endOffset:this._textModel.getOffsetAt(m.getEndPosition())}),c=u+1,h=1,u<l&&u+1e3>l?u=l:u=u+1e3}while(u<=l)}else if(o===0||n[o-1].endOffset<e[o].newRangeStartOffset)n.push({range:e[o].newRange,startOffset:e[o].newRangeStartOffset,endOffset:e[o].newRangeEndOffset});else if(n[o-1].endOffset<e[o].newRangeEndOffset){const l=this._textModel.getPositionAt(n[o-1].endOffset+1),c=new H(l.lineNumber,l.column,e[o].newRange.endLineNumber,e[o].newRange.endColumn);n.push({range:c,startOffset:n[o-1].endOffset+1,endOffset:e[o].newRangeEndOffset})}const r=n.map(o=>this._getCaptures(o.range));return this._updateTreeForRanges(n,t,r).then(()=>{!this._textModel.isDisposed()&&this._tree.treeLastParsedVersion.get()===this._textModel.getVersionId()&&this._refreshNeedsRefresh(t)})}async _updateTreeForRanges(e,t,n){let s;for(let r=0;r<e.length&&!(!this._textModel.isDisposed()&&t!==this._textModel.getVersionId());r++){const o=n[r],a=e[r],l=this.getTokensInRange(a.range,a.startOffset,a.endOffset,o);l?s={newTokens:l}:s={newTokens:[]},this._updateTokensInStore(t,[s],Yn.Accurate),this._onDidChangeTokens.fire({changes:{semanticTokensApplied:!1,ranges:[{fromLineNumber:a.range.getStartPosition().lineNumber,toLineNumber:a.range.getEndPosition().lineNumber}]}}),await new Promise(c=>x1(c))}this._onDidCompleteBackgroundTokenization.fire()}_refreshNeedsRefresh(e){const t=this._getNeedsRefresh();if(t.length===0)return;const n=new Array(t.length);for(let s=0;s<t.length;s++){const r=t[s];n[s]={newRange:r.range,newRangeStartOffset:r.startOffset,newRangeEndOffset:r.endOffset}}this._handleTreeUpdate(n,e)}_rangeTokensAsUpdates(e,t,n){const s=[];let r=0;for(const o of t){if(o.endOffset<=r||n&&o.endOffset<n)continue;let a;n&&r<n?a={startOffsetInclusive:e+n,length:o.endOffset-n,token:o.metadata}:a={startOffsetInclusive:e+r,length:o.endOffset-r,token:o.metadata},s.push(a),r=o.endOffset}return s}_updateTheme(){const e=this._textModel.getFullModelRange();this._markForRefresh(e),this._parseAndTokenizeViewPort(this._visibleLineRanges.get())}captureAtPosition(e,t){return this.captureAtRangeWithInjections(new H(e,t,e,t+1))}captureAtRangeTree(e){return this.captureAtRangeWithInjections(e)}captureAtRange(e){const t=this._tree.tree.get();return t?this._highlightingQueries.captures(t.rootNode,{startPosition:{row:e.startLineNumber-1,column:e.startColumn-1},endPosition:{row:e.endLineNumber-1,column:e.endColumn-1}}).map(n=>({name:n.name,text:n.node.text,node:{startIndex:n.node.startIndex,endIndex:n.node.endIndex,startPosition:{lineNumber:n.node.startPosition.row+1,column:n.node.startPosition.column+1},endPosition:{lineNumber:n.node.endPosition.row+1,column:n.node.endPosition.column+1}},encodedLanguageId:this._encodedLanguageId})):[]}captureAtRangeWithInjections(e){const t=this.captureAtRange(e);for(let n=0;n<t.length;n++){const s=t[n],r=s.node.startPosition.lineNumber,o=s.node.endPosition.lineNumber,a=s.node.startPosition.column,l=s.node.endPosition.column,c=r>e.startLineNumber&&r<e.endLineNumber?r:e.startLineNumber,h=o>e.startLineNumber&&o<e.endLineNumber?o:e.endLineNumber,u=r===e.startLineNumber?a<e.startColumn?e.startColumn:a:r<e.startLineNumber?e.startColumn:a,f=o===e.endLineNumber?l>e.endColumn?e.endColumn:l:o>e.endLineNumber?e.endColumn:l,g=new H(c,u,h,f),p=this._getInjectionCaptures(s,g);p&&p.length>0&&(t.splice(n+1,0,...p),n+=p.length)}return t}tokenizeEncoded(e){const t=this._tokenizeEncoded(e);if(!t)return;const n=this._rangeTokensAsUpdates(this._textModel.getOffsetAt({lineNumber:e,column:1}),t.result);t.versionId===this._textModel.getVersionId()&&this._updateTokensInStore(t.versionId,[{newTokens:n,oldRangeLength:this._textModel.getLineLength(e)}],Yn.Accurate)}tokenizeEncodedInstrumented(e){const t=this._tokenizeEncoded(e);if(t)return{result:this._endOffsetTokensToUint32Array(t.result),captureTime:t.captureTime,metadataTime:t.metadataTime}}_getCaptures(e){return this.captureAtRangeWithInjections(e)}_tokenize(e,t,n){const s=this._getCaptures(e),r=this._tokenizeCapturesWithMetadata(s,t,n);if(r)return{...r,versionId:this._tree.treeLastParsedVersion.get()}}_createTokensFromCaptures(e,t,n){const s=this._tree.tree.get(),r=Yo.create(),o=n-t,a=this._languageIdCodec.encodeLanguageId(this._tree.languageId),l=A$[this._tree.languageId]||"source";if(e.length===0)return s?(r.stop(),{endOffsets:[{endOffset:o,scopes:[],encodedLanguageId:a}],captureTime:r.elapsed()}):void 0;const c=Array(e.length);c.fill({endOffset:0,scopes:[l],encodedLanguageId:a});let h=0;const u=()=>{c.push({endOffset:0,scopes:[l],encodedLanguageId:a})},f=(m,_)=>m.name.includes("punctuation")&&m.text?Array.from(m.text.matchAll(N$)).map(v=>_+v.index):void 0,g=(m,_,v,y)=>{if(y!==void 0){const E=c[y].scopes;let N=c[y].bracket;if((y>0?c[y-1].endOffset:0)!==_){let B;if(N&&N.length>0){B=[];const x=[];for(let D=0;D<N.length;D++){const F=N[D];F<_?B.push(F):F>v&&x.push(F)}B.length===0&&(B=void 0),x.length===0?N=void 0:N=x}c.splice(y,0,{endOffset:_,scopes:[...E],bracket:B,encodedLanguageId:m.encodedLanguageId}),y++,u(),h++}c.splice(y,0,{endOffset:v,scopes:[...E,m.name],bracket:f(m,_),encodedLanguageId:m.encodedLanguageId}),c[h].bracket=N}else c[h]={endOffset:v,scopes:[l,m.name],bracket:f(m,_),encodedLanguageId:m.encodedLanguageId};h++};for(let m=0;m<e.length;m++){const _=e[m],v=_.node.endIndex<n?_.node.endIndex<t?t:_.node.endIndex:n,y=_.node.startIndex<t?t:_.node.startIndex,E=v-t;let N;const I=v-y;m>0?N=c[h-1].endOffset:N=y-t-1;const B=E-I;if(N>=0&&N<B&&(c[h]={endOffset:B,scopes:[l],encodedLanguageId:this._encodedLanguageId},h++,u()),!(I<0))if(N>=E){let x=h-1,D=c[x].endOffset,F=x>=2?c[x-1].endOffset:0;do{if(F+I===D){if(F===B){c[x].scopes.push(_.name);const te=c[x].bracket;c[x].bracket=te&&te.length>0?te:f(_,B)}}else if(F<=B){g(_,B,E,x);break}x--,F=x>=1?c[x-1].endOffset:0,D=x>=0?c[x].endOffset:0}while(D>B)}else g(_,B,E)}c[h-1].endOffset<o&&o-c[h-1].endOffset>0&&(u(),c[h]={endOffset:o,scopes:c[h].scopes,encodedLanguageId:this._encodedLanguageId},h++);for(let m=0;m<c.length;m++)if(c[m].endOffset===0&&m!==0){c.splice(m,c.length-m);break}const p=r.elapsed();return{endOffsets:c,captureTime:p}}_getInjectionCaptures(e,t){return[]}_tokenizeCapturesWithMetadata(e,t,n){const s=Yo.create(),r=this._createTokensFromCaptures(e,t,n);if(!r)return;const o=r.endOffsets;for(let l=0;l<o.length;l++){const c=o[l];c.metadata=this._treeSitterThemeService.findMetadata(c.scopes,c.encodedLanguageId,!!c.bracket&&c.bracket.length>0,void 0)}const a=s.elapsed();return{endOffsetsAndMetadata:o,captureTime:r.captureTime,metadataTime:a}}_tokenizeEncoded(e){const t=this._textModel.getOffsetAt({lineNumber:e,column:1}),n=this._textModel.getLineCount(),s=e+1<=n?this._textModel.getOffsetAt({lineNumber:e+1,column:1}):this._textModel.getValueLength(),r=s-t,o=this._tokenize(new H(e,1,e,r+1),t,s);if(o)return{result:o.endOffsetsAndMetadata,captureTime:o.captureTime,metadataTime:o.metadataTime,versionId:o.versionId}}_endOffsetTokensToUint32Array(e){const t=new Uint32Array(e.length*2);for(let n=0;n<e.length;n++)t[n*2]=e[n].endOffset,t[n*2+1]=e[n].metadata;return t}};Qw=G([L(4,D$)],Qw);const A$={css:"source.css",typescript:"source.ts",ini:"source.ini",regex:"source.regex"},N$=/[\{\}\[\]\<\>\(\)]/g,ek=be("treeSitterLibraryService");class R${get cachedValue(){return this._value}constructor(e){this._computeValue=e,this._value=Os(this,void 0)}getValue(){let e=this._value.get();return e||(e=this._computeValue(),this._value.set(e,void 0)),e}}class lb{static fromFn(e){return new lb(e())}constructor(e){this._value=Os(this,void 0),this.promiseResult=this._value,this.resolvedValue=fs(this,t=>{const n=this.promiseResult.read(t);if(n)return n.getDataOrThrow()}),this.promise=e.then(t=>(lc(n=>{this._value.set(new oD(t,void 0),n)}),t),t=>{throw lc(n=>{this._value.set(new oD(void 0,t),n)}),t})}}class oD{constructor(e,t){this.data=e,this.error=t}getDataOrThrow(){if(this.error)throw this.error;return this.data}}class Zne{constructor(e){this._computePromise=e,this._lazyValue=new R$(()=>new lb(this._computePromise())),this.cachedPromiseResult=fs(this,t=>this._lazyValue.cachedValue.read(t)?.promiseResult.read(t))}getPromise(){return this._lazyValue.getValue().promise}}let Zw=class extends G4{constructor(e,t,n,s,r,o){super(t,n),this._languageIdObs=e,this._treeSitterLibraryService=r,this._instantiationService=o,this._backgroundTokenizationState=Go.InProgress,this._onDidChangeBackgroundTokenizationState=this._register(new A),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event;const a=new lb(this._treeSitterLibraryService.getParserClass()),l=fs(this,c=>a.promiseResult?.read(c)?.getDataOrThrow());this._tree=fs(this,c=>{const h=l.read(c);if(!h)return;const u=this._languageIdObs.read(c),f=this._treeSitterLibraryService.getLanguage(u,c);if(!f)return;const g=new h;if(c.store.add(fe(()=>{g.delete()})),g.setLanguage(f),this._treeSitterLibraryService.getInjectionQueries(u,c)!==void 0)return c.store.add(this._instantiationService.createInstance(Gw,u,void 0,g,h,this._textModel))}),this._tokenizationImpl=fs(this,c=>{const h=this._tree.read(c);if(!h)return;const u=this._treeSitterLibraryService.getHighlightingQueries(h.languageId,c);if(u)return c.store.add(this._instantiationService.createInstance(Qw,h,u,this._languageIdCodec,s))}),this._register(du(c=>{const h=this._tokenizationImpl.read(c);h&&(c.store.add(h.onDidChangeTokens(u=>{this._onDidChangeTokens.fire(u.changes)})),c.store.add(h.onDidChangeBackgroundTokenization(u=>{this._backgroundTokenizationState=Go.Completed,this._onDidChangeBackgroundTokenizationState.fire()})))}))}get tree(){return this._tree}get tokenizationImpl(){return this._tokenizationImpl}getLineTokens(e){const t=this._tokenizationImpl.get();if(!t){const n=this._textModel.getLineContent(e);return bi.createEmpty(n,this._languageIdCodec)}return t.getLineTokens(e)}todo_resetTokenization(e=!0){e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}handleDidChangeAttached(){}handleDidChangeContent(e){e.isFlush?this.todo_resetTokenization(!1):this._tokenizationImpl.get()?.handleContentChanged(e),this._tree.get()?.handleContentChange(e)}forceTokenization(e){const t=this._tokenizationImpl.get();t&&(t.hasAccurateTokensForLine(e)||t.tokenizeEncoded(e))}hasAccurateTokensForLine(e){const t=this._tokenizationImpl.get();return t?t.hasAccurateTokensForLine(e):!1}isCheapToTokenize(e){return!0}getTokenTypeIfInsertingCharacter(e,t,n){return Jn.Other}tokenizeLinesAt(e,t){const n=this._tokenizationImpl.get();return n?n.tokenizeLinesAt(e,t):null}get hasTokens(){const e=this._tokenizationImpl.get();return e?e.hasTokens():!1}};Zw=G([L(4,ek),L(5,xt)],Zw);function M$(i,e){return i.startPosition.row===e.startPosition.row&&i.startPosition.column===e.startPosition.column&&i.endPosition.row===e.endPosition.row&&i.endPosition.column===e.endPosition.column&&i.startIndex===e.startIndex&&i.endIndex===e.endIndex}function aD(i,e){return i.startIndex<=e.startIndex&&i.endIndex>=e.startIndex||e.startIndex<=i.startIndex&&e.endIndex>=i.startIndex}class tk{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t,n=void 0){if(this._pieces=e||[],this._isComplete=t,n)for(const s of this._pieces)s.reportIfInvalid(n)}setPartial(e,t){let n=e;if(t.length>0){const r=t[0].getRange(),o=t[t.length-1].getRange();if(!r||!o)return e;n=e.plusRange(r).plusRange(o)}let s=null;for(let r=0,o=this._pieces.length;r<o;r++){const a=this._pieces[r];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){s=s||{index:r};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(r,1),r--,o--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){s=s||{index:r};continue}const[l,c]=a.split(n);if(l.isEmpty()){s=s||{index:r};continue}c.isEmpty()||(this._pieces.splice(r,1,l,c),r++,o++,s=s||{index:r})}return s=s||{index:this._pieces.length},t.length>0&&(this._pieces=kf(this._pieces,s.index,t)),n}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getTextLength()===0)return t;const n=this._pieces;if(n.length===0)return t;const s=tk._findFirstPieceWithLine(n,e),r=n[s].getLineTokens(e);if(!r)return t;const o=t.getCount(),a=r.getCount();let l=0;const c=[];let h=0,u=0;const f=(g,p)=>{g!==u&&(u=g,c[h++]=g,c[h++]=p)};for(let g=0;g<a;g++){const p=Math.min(r.getStartCharacter(g),t.getTextLength()),m=Math.min(r.getEndCharacter(g),t.getTextLength()),_=r.getMetadata(g),v=((_&Ce.SEMANTIC_USE_ITALIC?Ce.ITALIC_MASK:0)|(_&Ce.SEMANTIC_USE_BOLD?Ce.BOLD_MASK:0)|(_&Ce.SEMANTIC_USE_UNDERLINE?Ce.UNDERLINE_MASK:0)|(_&Ce.SEMANTIC_USE_STRIKETHROUGH?Ce.STRIKETHROUGH_MASK:0)|(_&Ce.SEMANTIC_USE_FOREGROUND?Ce.FOREGROUND_MASK:0)|(_&Ce.SEMANTIC_USE_BACKGROUND?Ce.BACKGROUND_MASK:0))>>>0,y=~v>>>0;for(;l<o&&t.getEndOffset(l)<=p;)f(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<o&&t.getStartOffset(l)<p&&f(p,t.getMetadata(l));l<o&&t.getEndOffset(l)<m;)f(t.getEndOffset(l),t.getMetadata(l)&y|_&v),l++;if(l<o)f(m,t.getMetadata(l)&y|_&v),t.getEndOffset(l)===m&&l++;else{const E=Math.min(Math.max(0,l-1),o-1);f(m,t.getMetadata(E)&y|_&v)}}for(;l<o;)f(t.getEndOffset(l),t.getMetadata(l)),l++;return new bi(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,s=e.length-1;for(;n<s;){let r=n+Math.floor((s-n)/2);if(e[r].endLineNumber<t)n=r+1;else if(e[r].startLineNumber>t)s=r-1;else{for(;r>n&&e[r-1].startLineNumber<=t&&t<=e[r-1].endLineNumber;)r--;return r}}return n}acceptEdit(e,t,n,s,r){for(const o of this._pieces)o.acceptEdit(e,t,n,s,r)}}class gf{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,n){let s=null;if(t<this._len&&(s=this._lineTokens[t]),s!==null&&s!==Eo)return new bi(Ro(s),n,this._languageIdCodec);const r=new Uint32Array(2);return r[0]=n.length,r[1]=lD(this._languageIdCodec.encodeLanguageId(e)),new bi(r,n,this._languageIdCodec)}static _massageTokens(e,t,n){const s=n?Ro(n):null;if(t===0){let r=!1;if(s&&s.length>1&&(r=er.getLanguageId(s[1])!==e),!r)return Eo}if(!s||s.length===0){const r=new Uint32Array(2);return r[0]=t,r[1]=lD(e),r.buffer}return s[s.length-2]=t,s.byteOffset===0&&s.byteLength===s.buffer.byteLength?s.buffer:s}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;const n=[];for(let s=0;s<t;s++)n[s]=null;this._lineTokens=kf(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,s,r){const o=gf._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,s);this._ensureLine(t);const a=this._lineTokens[t];return this._lineTokens[t]=o,r?!gf._equals(a,o):!1}static _equals(e,t){if(!e||!t)return!e&&!t;const n=Ro(e),s=Ro(t);if(n.length!==s.length)return!1;for(let r=0,o=n.length;r<o;r++)if(n[r]!==s[r])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new pe(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=Ri.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=Ri.deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let s=null;n<this._len&&(s=Ri.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=Ri.append(this._lineTokens[t],s),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;const s=e.lineNumber-1;if(!(s>=this._len)){if(t===0){this._lineTokens[s]=Ri.insert(this._lineTokens[s],e.column-1,n);return}this._lineTokens[s]=Ri.deleteEnding(this._lineTokens[s],e.column-1),this._lineTokens[s]=Ri.insert(this._lineTokens[s],e.column-1,n),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};const n=[];for(let s=0,r=e.length;s<r;s++){const o=e[s];let a=0,l=0,c=!1;for(let h=o.startLineNumber;h<=o.endLineNumber;h++)c?(this.setTokens(t.getLanguageId(),h-1,t.getLineLength(h),o.getLineTokens(h),!1),l=h):this.setTokens(t.getLanguageId(),h-1,t.getLineLength(h),o.getLineTokens(h),!0)&&(c=!0,a=h,l=h);c&&n.push({fromLineNumber:a,toLineNumber:l})}return{changes:n}}}function lD(i){return(i<<Ce.LANGUAGEID_OFFSET|Jn.Other<<Ce.TOKEN_TYPE_OFFSET|ht.None<<Ce.FONT_STYLE_OFFSET|Ws.DefaultForeground<<Ce.FOREGROUND_OFFSET|Ws.DefaultBackground<<Ce.BACKGROUND_OFFSET|Ce.BALANCED_BRACKETS_MASK)>>>0}class O$ extends G4{constructor(e,t,n,s){super(e,t),this.getLanguageId=n,this._tokenizer=null,this._backgroundTokenizationState=Go.InProgress,this._onDidChangeBackgroundTokenizationState=this._register(new A),this.onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event,this._defaultBackgroundTokenizer=null,this._backgroundTokenizer=this._register(new vs),this._tokens=new gf(this._languageIdCodec),this._debugBackgroundTokenizer=this._register(new vs),this._attachedViewStates=this._register(new Cf),this._register(nf.onDidChange(r=>{const o=this.getLanguageId();r.changedLanguages.indexOf(o)!==-1&&this.todo_resetTokenization()})),this.todo_resetTokenization(),this._register(s.onDidChangeVisibleRanges(({view:r,state:o})=>{if(o){let a=this._attachedViewStates.get(r);a||(a=new g$(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(r,a)),a.handleStateChange(o)}else this._attachedViewStates.deleteAndDispose(r)}))}todo_resetTokenization(e=!0){this._tokens.flush(),this._debugBackgroundTokens?.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new Xw(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});const t=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];const r=nf.get(this.getLanguageId());if(!r)return[null,null];let o;try{o=r.getInitialState()}catch(a){return pt(a),[null,null]}return[r,o]},[n,s]=t();if(n&&s?this._tokenizer=new S$(this._textModel.getLineCount(),n,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){const r={setTokens:o=>{this.setTokens(o)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===Go.Completed)return;const o=Go.Completed;this._backgroundTokenizationState=o,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(o,a)=>{if(!this._tokenizer)return;const l=this._tokenizer.store.getFirstInvalidEndStateLineNumber();l!==null&&o>=l&&this._tokenizer?.store.setEndState(o,a)}};n&&n.createBackgroundTokenizer&&!n.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,r)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new E$(this._tokenizer,r),this._defaultBackgroundTokenizer.handleChanges()),n?.backgroundTokenizerShouldOnlyVerifyTokens&&n.createBackgroundTokenizer?(this._debugBackgroundTokens=new gf(this._languageIdCodec),this._debugBackgroundStates=new Xw(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,{setTokens:o=>{this._debugBackgroundTokens?.setMultilineTokens(o,this._textModel)},backgroundTokenizationFinished(){},setEndState:(o,a)=>{this._debugBackgroundStates?.setEndState(o,a)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){this._defaultBackgroundTokenizer?.handleChanges()}handleDidChangeContent(e){if(e.isFlush)this.todo_resetTokenization(!1);else if(!e.isEolChange){for(const t of e.changes){const[n,s]=Yr(t.text);this._tokens.acceptEdit(t.range,n,s),this._debugBackgroundTokens?.acceptEdit(t.range,n,s)}this._debugBackgroundStates?.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),this._defaultBackgroundTokenizer?.handleChanges()}}setTokens(e){const{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){const e=Se.joinMany([...this._attachedViewStates].map(([t,n])=>n.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(const t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);const n=new jw,{heuristicTokens:s}=this._tokenizer.tokenizeHeuristically(n,e,t),r=this.setTokens(n.finalize());if(s)for(const o of r.changes)this._backgroundTokenizer.value?.requestTokens(o.fromLineNumber,o.toLineNumber+1);this._defaultBackgroundTokenizer?.checkFinished()}forceTokenization(e){const t=new jw;this._tokenizer?.updateTokensUntilLine(t,e),this.setTokens(t.finalize()),this._defaultBackgroundTokenizer?.checkFinished()}hasAccurateTokensForLine(e){return this._tokenizer?this._tokenizer.hasAccurateTokensForLine(e):!0}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}getLineTokens(e){const t=this._textModel.getLineContent(e),n=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){const s=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!n.equals(s)&&this._debugBackgroundTokenizer.value?.reportMismatchingTokens&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return n}getTokenTypeIfInsertingCharacter(e,t,n){if(!this._tokenizer)return Jn.Other;const s=this._textModel.validatePosition(new pe(e,t));return this.forceTokenization(s.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(s,n)}tokenizeLinesAt(e,t){return this._tokenizer?(this.forceTokenization(e),this._tokenizer.tokenizeLinesAt(e,t)):null}get hasTokens(){return this._tokens.hasTokens}}var xp;let Jw=xp=class extends z4{constructor(e,t,n,s,r,o,a,l){super(),this._textModel=e,this._bracketPairsTextModelPart=t,this._languageId=n,this._attachedViews=s,this._languageService=r,this._languageConfigurationService=o,this._instantiationService=a,this._treeSitterLibraryService=l,this._languageIdObs=Os(this,this._languageId),this._useTreeSitter=fs(this,h=>{const u=this._languageIdObs.read(h);return this._treeSitterLibraryService.supportsLanguage(u,h)}),this.tokens=fs(this,h=>{let u;return this._useTreeSitter.read(h)?u=h.store.add(this._instantiationService.createInstance(Zw,this._languageIdObs,this._languageService.languageIdCodec,this._textModel,this._attachedViews.visibleLineRanges)):u=h.store.add(new O$(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews)),h.store.add(u.onDidChangeTokens(f=>{this._emitModelTokensChangedEvent(f)})),h.store.add(u.onDidChangeBackgroundTokenizationState(f=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})),u});let c=!1;this.tokens.recomputeInitiallyAndOnChange(this._store,h=>{c&&h.todo_resetTokenization(),c=!0}),this._semanticTokens=new tk(this._languageService.languageIdCodec),this._onDidChangeLanguage=this._register(new A),this.onDidChangeLanguage=this._onDidChangeLanguage.event,this._onDidChangeLanguageConfiguration=this._register(new A),this.onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event,this._onDidChangeTokens=this._register(new A),this.onDidChangeTokens=this._onDidChangeTokens.event}_hasListeners(){return this._onDidChangeLanguage.hasListeners()||this._onDidChangeLanguageConfiguration.hasListeners()||this._onDidChangeTokens.hasListeners()}handleLanguageConfigurationServiceChange(e){e.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(e){if(e.isFlush)this._semanticTokens.flush();else if(!e.isEolChange)for(const t of e.changes){const[n,s,r]=Yr(t.text);this._semanticTokens.acceptEdit(t.range,n,s,r,t.text.length>0?t.text.charCodeAt(0):k.Null)}this.tokens.get().handleDidChangeContent(e)}handleDidChangeAttached(){this.tokens.get().handleDidChangeAttached()}getLineTokens(e){this.validateLineNumber(e);const t=this.tokens.get().getLineTokens(e);return this._semanticTokens.addSparseTokens(e,t)}_emitModelTokensChangedEvent(e){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(e),this._onDidChangeTokens.fire(e))}validateLineNumber(e){if(e<1||e>this._textModel.getLineCount())throw new De("Illegal value for lineNumber")}get hasTokens(){return this.tokens.get().hasTokens}resetTokenization(){this.tokens.get().todo_resetTokenization()}get backgroundTokenizationState(){return this.tokens.get().backgroundTokenizationState}forceTokenization(e){this.validateLineNumber(e),this.tokens.get().forceTokenization(e)}hasAccurateTokensForLine(e){return this.validateLineNumber(e),this.tokens.get().hasAccurateTokensForLine(e)}isCheapToTokenize(e){return this.validateLineNumber(e),this.tokens.get().isCheapToTokenize(e)}tokenizeIfCheap(e){this.validateLineNumber(e),this.tokens.get().tokenizeIfCheap(e)}getTokenTypeIfInsertingCharacter(e,t,n){return this.tokens.get().getTokenTypeIfInsertingCharacter(e,t,n)}tokenizeLinesAt(e,t){return this.tokens.get().tokenizeLinesAt(e,t)}setSemanticTokens(e,t){this._semanticTokens.set(e,t,this._textModel),this._emitModelTokensChangedEvent({semanticTokensApplied:e!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(e,t){if(this.hasCompleteSemanticTokens())return;const n=this._textModel.validateRange(this._semanticTokens.setPartial(e,t));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:n.startLineNumber,toLineNumber:n.endLineNumber}]})}getWordAtPosition(e){this.assertNotDisposed();const t=this._textModel.validatePosition(e),n=this._textModel.getLineContent(t.lineNumber),s=this.getLineTokens(t.lineNumber),r=s.findTokenIndexAtOffset(t.column-1),[o,a]=xp._findLanguageBoundaries(s,r),l=Kd(t.column,this.getLanguageConfiguration(s.getLanguageId(r)).getWordDefinition(),n.substring(o,a),o);if(l&&l.startColumn<=e.column&&e.column<=l.endColumn)return l;if(r>0&&o===t.column-1){const[c,h]=xp._findLanguageBoundaries(s,r-1),u=Kd(t.column,this.getLanguageConfiguration(s.getLanguageId(r-1)).getWordDefinition(),n.substring(c,h),c);if(u&&u.startColumn<=e.column&&e.column<=u.endColumn)return u}return null}getLanguageConfiguration(e){return this._languageConfigurationService.getLanguageConfiguration(e)}static _findLanguageBoundaries(e,t){const n=e.getLanguageId(t);let s=0;for(let o=t;o>=0&&e.getLanguageId(o)===n;o--)s=e.getStartOffset(o);let r=e.getLineContent().length;for(let o=t,a=e.getCount();o<a&&e.getLanguageId(o)===n;o++)r=e.getEndOffset(o);return[s,r]}getWordUntilPosition(e){const t=this.getWordAtPosition(e);return t?{word:t.word.substr(0,e.column-t.startColumn),startColumn:t.startColumn,endColumn:e.column}:{word:"",startColumn:e.column,endColumn:e.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(e,t){const n=this._textModel.validatePosition(new pe(e,t)),s=this.getLineTokens(n.lineNumber);return s.getLanguageId(s.findTokenIndexAtOffset(n.column-1))}setLanguageId(e,t="api"){if(this._languageId===e)return;const n={oldLanguage:this._languageId,newLanguage:e,source:t};this._languageId=e,this._languageIdObs.set(e,void 0),this._bracketPairsTextModelPart.handleDidChangeLanguage(n),this._onDidChangeLanguage.fire(n),this._onDidChangeLanguageConfiguration.fire({})}};Jw=xp=G([L(4,xc),L(5,Xf),L(6,xt),L(7,ek)],Jw);var gc;(function(i){i[i.Flush=1]="Flush",i[i.LineChanged=2]="LineChanged",i[i.LinesDeleted=3]="LinesDeleted",i[i.LinesInserted=4]="LinesInserted",i[i.EOLChanged=5]="EOLChanged"})(gc||(gc={}));class F${constructor(){this.changeType=gc.Flush}}class Nh{static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",s=0;for(const r of t)n+=e.substring(s,r.column-1),s=r.column-1,n+=r.options.content;return n+=e.substring(s),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new Nh(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new Nh(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,s)=>n.lineNumber===s.lineNumber?n.column===s.column?n.order-s.order:n.column-s.column:n.lineNumber-s.lineNumber),t}constructor(e,t,n,s,r){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=s,this.order=r}withText(e){return new Nh(this.ownerId,this.lineNumber,this.column,{...this.options,content:e},this.order)}}class cD{constructor(e,t,n){this.changeType=gc.LineChanged,this.lineNumber=e,this.detail=t,this.injectedText=n}}class P${constructor(e,t,n,s){this.ownerId=e,this.decorationId=t,this.lineNumber=n,this.lineHeight=s}}class B${constructor(e,t){this.changeType=gc.LinesDeleted,this.fromLineNumber=e,this.toLineNumber=t}}class W${constructor(e,t,n,s){this.changeType=gc.LinesInserted,this.injectedTexts=s,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}class U${constructor(){this.changeType=gc.EOLChanged}}class Rh{constructor(e,t,n,s){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=s,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),s=t.versionId,r=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing;return new Rh(n,s,r,o)}}class H${constructor(e){this.changes=e}}class V${constructor(e){this.changes=e}}class Gm{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=Rh.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=Gm._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new Gm(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),s=t.eol,r=t.versionId,o=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,c=e.isEolChange&&t.isEolChange;return{changes:n,eol:s,isEolChange:c,versionId:r,isUndoing:o,isRedoing:a,isFlush:l}}}const Z4=be("undoRedoService");class z${static{this._nextMetadataId=0}static{this._metaDataMap=new Map}static editWithReason(e,t){const n=this._nextMetadataId++;this._metaDataMap.set(n,e.metadata);try{return t()}finally{this._metaDataMap.delete(n)}}static _getCurrentMetadata(){const e={};for(const t of this._metaDataMap.values())Object.assign(e,t);return e}constructor(e){this.metadata=e}}var pl;function $$(i){const e=new ZS;return e.acceptChunk(i),e.finish()}function tse(i){return new Promise((e,t)=>{const n=new ZS;let s=!1;gy(i,{onData:r=>{n.acceptChunk(typeof r=="string"?r:r.toString())},onError:r=>{s||(s=!0,t(r))},onEnd:()=>{s||(s=!0,e(n.finish()))}})})}function q$(i){const e=new ZS;let t;for(;typeof(t=i.read())=="string";)e.acceptChunk(t);return e.finish()}function ev(i,e){let t;return typeof i=="string"?t=$$(i):wO(i)?t=q$(i):t=i,t.create(e)}let Yg=0;const K$=999,G$=1e4,j$=300;class Y${constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;const e=[];let t=0,n=0;do{const s=this._source.read();if(s===null)return this._eos=!0,t===0?null:e.join("");if(s.length>0&&(e[t++]=s,n+=s.length),n>=64*1024)return e.join("")}while(!0)}}const Pu=()=>{throw new Error("Invalid change accessor")};var Hn;(function(i){i[i.Relaxed=0]="Relaxed",i[i.SurrogatePairs=1]="SurrogatePairs"})(Hn||(Hn={}));let tv=class extends ${static{pl=this}static{this._MODEL_SYNC_LIMIT=50*1024*1024}static{this.LARGE_FILE_SIZE_THRESHOLD=20*1024*1024}static{this.LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3}static{this.LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024}static{this.DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Oi.tabSize,indentSize:Oi.indentSize,insertSpaces:Oi.insertSpaces,detectIndentation:!1,defaultEOL:Vo.LF,trimAutoWhitespace:Oi.trimAutoWhitespace,largeFileOptimizations:Oi.largeFileOptimizations,bracketPairColorizationOptions:Oi.bracketPairColorizationOptions}}static resolveOptions(e,t){if(t.detectIndentation){const n=nD(e,t.tabSize,t.insertSpaces);return new $b({tabSize:n.tabSize,indentSize:"tabSize",insertSpaces:n.insertSpaces,trimAutoWhitespace:t.trimAutoWhitespace,defaultEOL:t.defaultEOL,bracketPairColorizationOptions:t.bracketPairColorizationOptions})}return new $b(t)}get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}onDidChangeContent(e){return this._eventEmitter.slowEvent(t=>e(t.contentChangedEvent))}onDidChangeContentOrInjectedText(e){return Kr(this._eventEmitter.fastEvent(t=>e(t)),this._onDidChangeInjectedText.event(t=>e(t)))}_isDisposing(){return this.__isDisposing}get tokenization(){return this._tokenizationTextModelPart}get bracketPairs(){return this._bracketPairs}get guides(){return this._guidesTextModelPart}constructor(e,t,n,s=null,r,o,a,l){super(),this._undoRedoService=r,this._languageService=o,this._languageConfigurationService=a,this.instantiationService=l,this._onWillDispose=this._register(new A),this.onWillDispose=this._onWillDispose.event,this._onDidChangeDecorations=this._register(new tq((p,m)=>this.handleBeforeFireDecorationsChangedEvent(p,m))),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._onDidChangeOptions=this._register(new A),this.onDidChangeOptions=this._onDidChangeOptions.event,this._onDidChangeAttached=this._register(new A),this.onDidChangeAttached=this._onDidChangeAttached.event,this._onDidChangeInjectedText=this._register(new A),this._onDidChangeLineHeight=this._register(new A),this.onDidChangeLineHeight=this._onDidChangeLineHeight.event,this._eventEmitter=this._register(new iq),this._languageSelectionListener=this._register(new vs),this._deltaDecorationCallCnt=0,this._attachedViews=new u$,Yg++,this.id="$model"+Yg,this.isForSimpleWidget=n.isForSimpleWidget,typeof s>"u"||s===null?this._associatedResource=Y.parse("inmemory://model/"+Yg):this._associatedResource=s,this._attachedEditorCount=0;const{textBuffer:c,disposable:h}=ev(e,n.defaultEOL);this._buffer=c,this._bufferDisposable=h;const u=this._buffer.getLineCount(),f=this._buffer.getValueLengthInRange(new H(1,1,u,this._buffer.getLineLength(u)+1),_n.TextDefined);n.largeFileOptimizations?(this._isTooLargeForTokenization=f>pl.LARGE_FILE_SIZE_THRESHOLD||u>pl.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=f>pl.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._options=pl.resolveOptions(this._buffer,n);const g=typeof t=="string"?t:t.languageId;typeof t!="string"&&(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId))),this._bracketPairs=this._register(new jz(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new e$(this,this._languageConfigurationService)),this._decorationProvider=this._register(new Xz(this)),this._tokenizationTextModelPart=this.instantiationService.createInstance(Jw,this,this._bracketPairs,g,this._attachedViews),this._isTooLargeForSyncing=f>pl._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=q7(Yg),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new hD,this._commandManager=new jS(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(g),this._register(this._languageConfigurationService.onDidChange(p=>{this._bracketPairs.handleLanguageConfigurationServiceChange(p),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(p)}))}dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;const e=new Hl([],"",`
`,!1,!1,!0,!0);e.dispose(),this._buffer=e,this._bufferDisposable=$.None}_hasListeners(){return this._onWillDispose.hasListeners()||this._onDidChangeDecorations.hasListeners()||this._tokenizationTextModelPart._hasListeners()||this._onDidChangeOptions.hasListeners()||this._onDidChangeAttached.hasListeners()||this._onDidChangeInjectedText.hasListeners()||this._onDidChangeLineHeight.hasListeners()||this._eventEmitter.hasListeners()}_assertNotDisposed(){if(this._isDisposed)throw new De("Model is disposed!")}equalsTextBuffer(e){return this._assertNotDisposed(),this._buffer.equals(e)}getTextBuffer(){return this._assertNotDisposed(),this._buffer}_emitContentChangedEvent(e,t){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(t),this._bracketPairs.handleDidChangeContent(t),this._eventEmitter.fire(new Gm(e,t)))}setValue(e){if(this._assertNotDisposed(),e==null)throw Sf();const{textBuffer:t,disposable:n}=ev(e,this._options.defaultEOL);this._setValueFromTextBuffer(t,n)}_createContentChanged2(e,t,n,s,r,o,a,l,c){return{changes:[{range:e,rangeOffset:t,rangeLength:n,text:r}],eol:this._buffer.getEOL(),isEolChange:c,versionId:this.getVersionId(),isUndoing:o,isRedoing:a,isFlush:l}}_setValueFromTextBuffer(e,t){this._assertNotDisposed();const n=this.getFullModelRange(),s=this.getValueLengthInRange(n),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._buffer=e,this._bufferDisposable.dispose(),this._bufferDisposable=t,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new hD,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new Rh([new F$],this._versionId,!1,!1),this._createContentChanged2(new H(1,1,r,o),0,s,new pe(r,o),this.getValue(),!1,!1,!0,!1))}setEOL(e){this._assertNotDisposed();const t=e===ds.CRLF?`\r
`:`
`;if(this._buffer.getEOL()===t)return;const n=this.getFullModelRange(),s=this.getValueLengthInRange(n),r=this.getLineCount(),o=this.getLineMaxColumn(r);this._onBeforeEOLChange(),this._buffer.setEOL(t),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new Rh([new U$],this._versionId,!1,!1),this._createContentChanged2(new H(1,1,r,o),0,s,new pe(r,o),this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){const e=this.getVersionId(),t=this._decorationsTree.collectNodesPostOrder();for(let n=0,s=t.length;n<s;n++){const r=t[n],o=r.range,a=r.cachedAbsoluteStart-r.start,l=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),c=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);r.cachedAbsoluteStart=l,r.cachedAbsoluteEnd=c,r.cachedVersionId=e,r.start=l-a,r.end=c-a,Za(r)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(e){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(e)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let e=0,t=0;const n=this._buffer.getLineCount();for(let s=1;s<=n;s++){const r=this._buffer.getLineLength(s);r>=G$?t+=r:e+=r}return t>e}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(e){this._assertNotDisposed();const t=typeof e.tabSize<"u"?e.tabSize:this._options.tabSize,n=typeof e.indentSize<"u"?e.indentSize:this._options.originalIndentSize,s=typeof e.insertSpaces<"u"?e.insertSpaces:this._options.insertSpaces,r=typeof e.trimAutoWhitespace<"u"?e.trimAutoWhitespace:this._options.trimAutoWhitespace,o=typeof e.bracketColorizationOptions<"u"?e.bracketColorizationOptions:this._options.bracketPairColorizationOptions,a=new $b({tabSize:t,indentSize:n,insertSpaces:s,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:r,bracketPairColorizationOptions:o});if(this._options.equals(a))return;const l=this._options.createChangeEvent(a);this._options=a,this._bracketPairs.handleDidChangeOptions(l),this._decorationProvider.handleDidChangeOptions(l),this._onDidChangeOptions.fire(l)}detectIndentation(e,t){this._assertNotDisposed();const n=nD(this._buffer,t,e);this.updateOptions({insertSpaces:n.insertSpaces,tabSize:n.tabSize,indentSize:n.tabSize})}normalizeIndentation(e){return this._assertNotDisposed(),gz(e,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(e=null){const t=this.findMatches(AI.source,!1,!0,!1,null,!1,si.MAX_SAFE_SMALL_INTEGER);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(e,t.map(n=>({range:n.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(e){this._assertNotDisposed();const t=this._validatePosition(e.lineNumber,e.column,Hn.Relaxed);return this._buffer.getOffsetAt(t.lineNumber,t.column)}getPositionAt(e){this._assertNotDisposed();const t=Math.min(this._buffer.getLength(),Math.max(0,e));return this._buffer.getPositionAt(t)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(e){this._versionId=e}_overwriteAlternativeVersionId(e){this._alternativeVersionId=e}_overwriteInitialUndoRedoSnapshot(e){this._initialUndoRedoSnapshot=e}getValue(e,t=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new De("Operation would exceed heap memory limits");const n=this.getFullModelRange(),s=this.getValueInRange(n,e);return t?this._buffer.getBOM()+s:s}createSnapshot(e=!1){return new Y$(this._buffer.createSnapshot(e))}getValueLength(e,t=!1){this._assertNotDisposed();const n=this.getFullModelRange(),s=this.getValueLengthInRange(n,e);return t?this._buffer.getBOM().length+s:s}getValueInRange(e,t=_n.TextDefined){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(e),t)}getValueLengthInRange(e,t=_n.TextDefined){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(e),t)}getCharacterCountInRange(e,t=_n.TextDefined){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(e),t)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new De("Illegal value for lineNumber");return this._buffer.getLineContent(e)}getLineLength(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new De("Illegal value for lineNumber");return this._buffer.getLineLength(e)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new De("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?ds.LF:ds.CRLF}getLineMinColumn(e){return this._assertNotDisposed(),1}getLineMaxColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new De("Illegal value for lineNumber");return this._buffer.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new De("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(e)}getLineLastNonWhitespaceColumn(e){if(this._assertNotDisposed(),e<1||e>this.getLineCount())throw new De("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(e)}_validateRangeRelaxedNoAllocations(e){const t=this._buffer.getLineCount(),n=e.startLineNumber,s=e.startColumn;let r=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),o=Math.floor(typeof s=="number"&&!isNaN(s)?s:1);if(r<1)r=1,o=1;else if(r>t)r=t,o=this.getLineMaxColumn(r);else if(o<=1)o=1;else{const u=this.getLineMaxColumn(r);o>=u&&(o=u)}const a=e.endLineNumber,l=e.endColumn;let c=Math.floor(typeof a=="number"&&!isNaN(a)?a:1),h=Math.floor(typeof l=="number"&&!isNaN(l)?l:1);if(c<1)c=1,h=1;else if(c>t)c=t,h=this.getLineMaxColumn(c);else if(h<=1)h=1;else{const u=this.getLineMaxColumn(c);h>=u&&(h=u)}return n===r&&s===o&&a===c&&l===h&&e instanceof H&&!(e instanceof tn)?e:new H(r,o,c,h)}_isValidPosition(e,t,n){if(typeof e!="number"||typeof t!="number"||isNaN(e)||isNaN(t)||e<1||t<1||(e|0)!==e||(t|0)!==t)return!1;const s=this._buffer.getLineCount();if(e>s)return!1;if(t===1)return!0;const r=this.getLineMaxColumn(e);if(t>r)return!1;if(n===Hn.SurrogatePairs){const o=this._buffer.getLineCharCode(e,t-2);if(hs(o))return!1}return!0}_validatePosition(e,t,n){const s=Math.floor(typeof e=="number"&&!isNaN(e)?e:1),r=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),o=this._buffer.getLineCount();if(s<1)return new pe(1,1);if(s>o)return new pe(o,this.getLineMaxColumn(o));if(r<=1)return new pe(s,1);const a=this.getLineMaxColumn(s);if(r>=a)return new pe(s,a);if(n===Hn.SurrogatePairs){const l=this._buffer.getLineCharCode(s,r-2);if(hs(l))return new pe(s,r-1)}return new pe(s,r)}validatePosition(e){const t=Hn.SurrogatePairs;return this._assertNotDisposed(),e instanceof pe&&this._isValidPosition(e.lineNumber,e.column,t)?e:this._validatePosition(e.lineNumber,e.column,t)}isValidRange(e){return this._isValidRange(e,Hn.SurrogatePairs)}_isValidRange(e,t){const n=e.startLineNumber,s=e.startColumn,r=e.endLineNumber,o=e.endColumn;if(!this._isValidPosition(n,s,Hn.Relaxed)||!this._isValidPosition(r,o,Hn.Relaxed))return!1;if(t===Hn.SurrogatePairs){const a=s>1?this._buffer.getLineCharCode(n,s-2):0,l=o>1&&o<=this._buffer.getLineLength(r)?this._buffer.getLineCharCode(r,o-2):0,c=hs(a),h=hs(l);return!c&&!h}return!0}validateRange(e){const t=Hn.SurrogatePairs;if(this._assertNotDisposed(),e instanceof H&&!(e instanceof tn)&&this._isValidRange(e,t))return e;const n=this._validatePosition(e.startLineNumber,e.startColumn,Hn.Relaxed),s=this._validatePosition(e.endLineNumber,e.endColumn,Hn.Relaxed),r=n.lineNumber,o=n.column,a=s.lineNumber,l=s.column;if(t===Hn.SurrogatePairs){const c=o>1?this._buffer.getLineCharCode(r,o-2):0,h=l>1&&l<=this._buffer.getLineLength(a)?this._buffer.getLineCharCode(a,l-2):0,u=hs(c),f=hs(h);return!u&&!f?new H(r,o,a,l):r===a&&o===l?new H(r,o-1,a,l-1):u&&f?new H(r,o-1,a,l+1):u?new H(r,o-1,a,l):new H(r,o,a,l+1)}return new H(r,o,a,l)}modifyPosition(e,t){this._assertNotDisposed();const n=this.getOffsetAt(e)+t;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,n)))}getFullModelRange(){this._assertNotDisposed();const e=this.getLineCount();return new H(1,1,e,this.getLineMaxColumn(e))}findMatchesLineByLine(e,t,n,s){return this._buffer.findMatchesLineByLine(e,t,n,s)}findMatches(e,t,n,s,r,o,a=K$){this._assertNotDisposed();let l=null;t!==null&&(Array.isArray(t)||(t=[t]),t.every(u=>H.isIRange(u))&&(l=t.map(u=>this.validateRange(u)))),l===null&&(l=[this.getFullModelRange()]),l=l.sort((u,f)=>u.startLineNumber-f.startLineNumber||u.startColumn-f.startColumn);const c=[];c.push(l.reduce((u,f)=>H.areIntersecting(u,f)?u.plusRange(f):(c.push(u),f)));let h;if(!n&&e.indexOf(`
`)<0){const f=new jc(e,n,s,r).parseSearchRequest();if(!f)return[];h=g=>this.findMatchesLineByLine(g,f,o,a)}else h=u=>Hg.findMatches(this,new jc(e,n,s,r),u,o,a);return c.map(h).reduce((u,f)=>u.concat(f),[])}findNextMatch(e,t,n,s,r,o){this._assertNotDisposed();const a=this.validatePosition(t);if(!n&&e.indexOf(`
`)<0){const c=new jc(e,n,s,r).parseSearchRequest();if(!c)return null;const h=this.getLineCount();let u=new H(a.lineNumber,a.column,h,this.getLineMaxColumn(h)),f=this.findMatchesLineByLine(u,c,o,1);return Hg.findNextMatch(this,new jc(e,n,s,r),a,o),f.length>0||(u=new H(1,1,a.lineNumber,this.getLineMaxColumn(a.lineNumber)),f=this.findMatchesLineByLine(u,c,o,1),f.length>0)?f[0]:null}return Hg.findNextMatch(this,new jc(e,n,s,r),a,o)}findPreviousMatch(e,t,n,s,r,o){this._assertNotDisposed();const a=this.validatePosition(t);return Hg.findPreviousMatch(this,new jc(e,n,s,r),a,o)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(e){if((this.getEOL()===`
`?ds.LF:ds.CRLF)!==e)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(e)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(e){return e instanceof qb?e:new qb(e.identifier||null,this.validateRange(e.range),e.text,e.forceMoveMarkers||!1,e.isAutoWhitespaceEdit||!1,e._isTracked||!1)}_validateEditOperations(e){const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=this._validateEditOperation(e[n]);return t}pushEditOperations(e,t,n,s){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(e,this._validateEditOperations(t),n,s)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(e,t,n,s){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){const r=t.map(a=>({range:this.validateRange(a.range),text:a.text}));let o=!0;if(e)for(let a=0,l=e.length;a<l;a++){const c=e[a];let h=!1;for(let u=0,f=r.length;u<f;u++){const g=r[u].range,p=g.startLineNumber>c.endLineNumber,m=c.startLineNumber>g.endLineNumber;if(!p&&!m){h=!0;break}}if(!h){o=!1;break}}if(o)for(let a=0,l=this._trimAutoWhitespaceLines.length;a<l;a++){const c=this._trimAutoWhitespaceLines[a],h=this.getLineMaxColumn(c);let u=!0;for(let f=0,g=r.length;f<g;f++){const p=r[f].range,m=r[f].text;if(!(c<p.startLineNumber||c>p.endLineNumber)&&!(c===p.startLineNumber&&p.startColumn===h&&p.isEmpty()&&m&&m.length>0&&m.charAt(0)===`
`)&&!(c===p.startLineNumber&&p.startColumn===1&&p.isEmpty()&&m&&m.length>0&&m.charAt(m.length-1)===`
`)){u=!1;break}}if(u){const f=new H(c,1,c,h);t.push(new qb(null,f,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(e,t,n,s)}_applyUndo(e,t,n,s){const r=e.map(o=>{const a=this.getPositionAt(o.newPosition),l=this.getPositionAt(o.newEnd);return{range:new H(a.lineNumber,a.column,l.lineNumber,l.column),text:o.oldText}});this._applyUndoRedoEdits(r,t,!0,!1,n,s)}_applyRedo(e,t,n,s){const r=e.map(o=>{const a=this.getPositionAt(o.oldPosition),l=this.getPositionAt(o.oldEnd);return{range:new H(a.lineNumber,a.column,l.lineNumber,l.column),text:o.newText}});this._applyUndoRedoEdits(r,t,!1,!0,n,s)}_applyUndoRedoEdits(e,t,n,s,r,o){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=n,this._isRedoing=s,this.applyEdits(e,!1),this.setEOL(t),this._overwriteAlternativeVersionId(r)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(o),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(e,t=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();const n=this._validateEditOperations(e);return this._doApplyEdits(n,t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(e,t){const n=this._buffer.getLineCount(),s=this._buffer.applyEdits(e,this._options.trimAutoWhitespace,t),r=this._buffer.getLineCount(),o=s.changes;if(this._trimAutoWhitespaceLines=s.trimAutoWhitespaceLineNumbers,o.length!==0){for(let c=0,h=o.length;c<h;c++){const u=o[c];this._decorationsTree.acceptReplace(u.rangeOffset,u.rangeLength,u.text.length,u.forceMoveMarkers)}const a=[];this._increaseVersionId();let l=n;for(let c=0,h=o.length;c<h;c++){const u=o[c],[f]=Yr(u.text);this._onDidChangeDecorations.fire();const g=u.range.startLineNumber,p=u.range.endLineNumber,m=p-g,_=f,v=Math.min(m,_),y=_-m,E=r-l-y+g,N=E,I=E+_,B=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new pe(N,1)),this.getOffsetAt(new pe(I,this.getLineMaxColumn(I))),0),x=Nh.fromDecorations(B),D=new Q_(x);for(let F=v;F>=0;F--){const te=g+F,J=E+F;D.takeFromEndWhile(ee=>ee.lineNumber>J);const le=D.takeFromEndWhile(ee=>ee.lineNumber===J);a.push(new cD(te,this.getLineContent(J),le))}if(v<m){const F=g+v;a.push(new B$(F+1,p))}if(v<_){const F=new Q_(x),te=g+v,J=_-v,le=r-l-J+te+1,ee=[],z=[];for(let Z=0;Z<J;Z++){const ne=le+Z;z[Z]=this.getLineContent(ne),F.takeWhile(ve=>ve.lineNumber<ne),ee[Z]=F.takeWhile(ve=>ve.lineNumber===ne)}a.push(new W$(te+1,g+_,z,ee))}l+=y}this._emitContentChangedEvent(new Rh(a,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:o,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return s.reverseEdits===null?void 0:s.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(e,t){if(e&&e.size>0){const s=Array.from(e).map(r=>new cD(r,this.getLineContent(r),this._getInjectedTextInLine(r)));this._onDidChangeInjectedText.fire(new H$(s))}if(t&&t.size>0){const s=Array.from(t).map(r=>new P$(r.ownerId,r.decorationId,r.lineNumber,r.lineHeight));this._onDidChangeLineHeight.fire(new V$(s))}}changeDecorations(e,t=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(t,e)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(e,t){const n={addDecoration:(r,o)=>this._deltaDecorationsImpl(e,[],[{range:r,options:o}])[0],changeDecoration:(r,o)=>{this._changeDecorationImpl(e,r,o)},changeDecorationOptions:(r,o)=>{this._changeDecorationOptionsImpl(e,r,dD(o))},removeDecoration:r=>{this._deltaDecorationsImpl(e,[r],[])},deltaDecorations:(r,o)=>r.length===0&&o.length===0?[]:this._deltaDecorationsImpl(e,r,o)};let s=null;try{s=t(n)}catch(r){pt(r)}return n.addDecoration=Pu,n.changeDecoration=Pu,n.changeDecorationOptions=Pu,n.removeDecoration=Pu,n.deltaDecorations=Pu,s}deltaDecorations(e,t,n=0){if(this._assertNotDisposed(),e||(e=[]),e.length===0&&t.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),pt(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(n,e,t)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(e){return this.getDecorationRange(e)}_setTrackedRange(e,t,n){const s=e?this._decorations[e]:null;if(!s)return t?this._deltaDecorationsImpl(0,[],[{range:t,options:uD[n]}],!0)[0]:null;if(!t)return this._decorationsTree.delete(s),delete this._decorations[s.id],null;const r=this._validateRangeRelaxedNoAllocations(t),o=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),a=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);return this._decorationsTree.delete(s),s.reset(this.getVersionId(),o,a,r),s.setOptions(uD[n]),this._decorationsTree.insert(s),s.id}removeAllDecorationsWithOwnerId(e){if(this._isDisposed)return;const t=this._decorationsTree.collectNodesFromOwner(e);for(let n=0,s=t.length;n<s;n++){const r=t[n];this._decorationsTree.delete(r),delete this._decorations[r.id]}}getDecorationOptions(e){const t=this._decorations[e];return t?t.options:null}getDecorationRange(e){const t=this._decorations[e];return t?this._decorationsTree.getNodeRange(this,t):null}getLineDecorations(e,t=0,n=!1){return e<1||e>this.getLineCount()?[]:this.getLinesDecorations(e,e,t,n)}getLinesDecorations(e,t,n=0,s=!1,r=!1){const o=this.getLineCount(),a=Math.min(o,Math.max(1,e)),l=Math.min(o,Math.max(1,t)),c=this.getLineMaxColumn(l),h=new H(a,1,l,c),u=this._getDecorationsInRange(h,n,s,r);return X_(u,this._decorationProvider.getDecorationsInRange(h,n,s)),u}getDecorationsInRange(e,t=0,n=!1,s=!1,r=!1){const o=this.validateRange(e),a=this._getDecorationsInRange(o,t,n,r);return X_(a,this._decorationProvider.getDecorationsInRange(o,t,n,s)),a}getOverviewRulerDecorations(e=0,t=!1){return this._decorationsTree.getAll(this,e,t,!0,!1)}getInjectedTextDecorations(e=0){return this._decorationsTree.getAllInjectedText(this,e)}getCustomLineHeightsDecorations(e=0){return this._decorationsTree.getAllCustomLineHeights(this,e)}_getInjectedTextInLine(e){const t=this._buffer.getOffsetAt(e,1),n=t+this._buffer.getLineLength(e),s=this._decorationsTree.getInjectedTextInInterval(this,t,n,0);return Nh.fromDecorations(s).filter(r=>r.lineNumber===e)}getAllDecorations(e=0,t=!1){let n=this._decorationsTree.getAll(this,e,t,!1,!1);return n=n.concat(this._decorationProvider.getAllDecorations(e,t)),n}getAllMarginDecorations(e=0){return this._decorationsTree.getAll(this,e,!1,!1,!0)}_getDecorationsInRange(e,t,n,s){const r=this._buffer.getOffsetAt(e.startLineNumber,e.startColumn),o=this._buffer.getOffsetAt(e.endLineNumber,e.endColumn);return this._decorationsTree.getAllInInterval(this,r,o,t,n,s)}getRangeAt(e,t){return this._buffer.getRangeAt(e,t-e)}_changeDecorationImpl(e,t,n){const s=this._decorations[t];if(!s)return;if(s.options.after){const l=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.endLineNumber)}if(s.options.before){const l=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.startLineNumber)}if(s.options.lineHeight!==null){const l=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByLineHeightChange(e,t,l.startLineNumber,null)}const r=this._validateRangeRelaxedNoAllocations(n),o=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),a=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);this._decorationsTree.delete(s),s.reset(this.getVersionId(),o,a,r),this._decorationsTree.insert(s),this._onDidChangeDecorations.checkAffectedAndFire(s.options),s.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber),s.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber),s.options.lineHeight!==null&&this._onDidChangeDecorations.recordLineAffectedByLineHeightChange(e,t,r.startLineNumber,s.options.lineHeight)}_changeDecorationOptionsImpl(e,t,n){const s=this._decorations[t];if(!s)return;const r=!!(s.options.overviewRuler&&s.options.overviewRuler.color),o=!!(n.overviewRuler&&n.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(s.options),this._onDidChangeDecorations.checkAffectedAndFire(n),s.options.after||n.after){const c=this._decorationsTree.getNodeRange(this,s);this._onDidChangeDecorations.recordLineAffectedByInjectedText(c.endLineNumber)}if(s.options.before||n.before){const c=this._decorationsTree.getNodeRange(this,s);this._onDidChangeDecorations.recordLineAffectedByInjectedText(c.startLineNumber)}if(s.options.lineHeight!==null||n.lineHeight!==null){const c=this._decorationsTree.getNodeRange(this,s);this._onDidChangeDecorations.recordLineAffectedByLineHeightChange(e,t,c.startLineNumber,n.lineHeight)}const a=r!==o,l=Q$(n)!==Lp(s);a||l?(this._decorationsTree.delete(s),s.setOptions(n),this._decorationsTree.insert(s)):s.setOptions(n)}_deltaDecorationsImpl(e,t,n,s=!1){const r=this.getVersionId(),o=t.length;let a=0;const l=n.length;let c=0;this._onDidChangeDecorations.beginDeferredEmit();try{const h=new Array(l);for(;a<o||c<l;){let u=null;if(a<o){let f;do f=t[a++],u=this._decorations[f];while(!u&&a<o);if(u){if(u.options.after){const g=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.endLineNumber)}if(u.options.before){const g=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.startLineNumber)}if(u.options.lineHeight!==null){const g=this._decorationsTree.getNodeRange(this,u);this._onDidChangeDecorations.recordLineAffectedByLineHeightChange(e,f,g.startLineNumber,null)}this._decorationsTree.delete(u),s||this._onDidChangeDecorations.checkAffectedAndFire(u.options)}}if(c<l){if(!u){const v=++this._lastDecorationId,y=`${this._instanceId};${v}`;u=new D4(y,0,0),this._decorations[y]=u}const f=n[c],g=this._validateRangeRelaxedNoAllocations(f.range),p=dD(f.options),m=this._buffer.getOffsetAt(g.startLineNumber,g.startColumn),_=this._buffer.getOffsetAt(g.endLineNumber,g.endColumn);u.ownerId=e,u.reset(r,m,_,g),u.setOptions(p),u.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.endLineNumber),u.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.startLineNumber),u.options.lineHeight!==null&&this._onDidChangeDecorations.recordLineAffectedByLineHeightChange(e,u.id,g.startLineNumber,u.options.lineHeight),s||this._onDidChangeDecorations.checkAffectedAndFire(p),this._decorationsTree.insert(u),h[c]=u.id,c++}else u&&delete this._decorations[u.id]}return h}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(e,t){typeof e=="string"?(this._languageSelectionListener.clear(),this._setLanguage(e,t)):(this._languageSelectionListener.value=e.onDidChange(()=>this._setLanguage(e.languageId,t)),this._setLanguage(e.languageId,t))}_setLanguage(e,t){this.tokenization.setLanguageId(e,t),this._languageService.requestRichLanguageFeatures(e)}getLanguageIdAtPosition(e,t){return this.tokenization.getLanguageIdAtPosition(e,t)}getWordAtPosition(e){return this._tokenizationTextModelPart.getWordAtPosition(e)}getWordUntilPosition(e){return this._tokenizationTextModelPart.getWordUntilPosition(e)}normalizePosition(e,t){return e}getLineIndentColumn(e){return X$(this.getLineContent(e))+1}toString(){return`TextModel(${this.uri.toString()})`}editWithReason(e,t){return z$.editWithReason(e,t)}};tv=pl=G([L(4,Z4),L(5,xc),L(6,Xf),L(7,xt)],tv);function X$(i){let e=0;for(const t of i)if(t===" "||t==="	")e++;else break;return e}function I_(i){return!!(i.options.overviewRuler&&i.options.overviewRuler.color)}function Q$(i){return!!i.after||!!i.before}function Lp(i){return!!i.options.after||!!i.options.before}class hD{constructor(){this._decorationsTree0=new w_,this._decorationsTree1=new w_,this._injectedTextDecorationsTree=new w_}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(const n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,s,r,o){const a=e.getVersionId(),l=this._intervalSearch(t,n,s,r,a,o);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,n,s,r,o){const a=this._decorationsTree0.intervalSearch(e,t,n,s,r,o),l=this._decorationsTree1.intervalSearch(e,t,n,s,r,o),c=this._injectedTextDecorationsTree.intervalSearch(e,t,n,s,r,o);return a.concat(l).concat(c)}getInjectedTextInInterval(e,t,n,s){const r=e.getVersionId(),o=this._injectedTextDecorationsTree.intervalSearch(t,n,s,!1,r,!1);return this._ensureNodesHaveRanges(e,o).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){const n=e.getVersionId(),s=this._injectedTextDecorationsTree.search(t,!1,n,!1);return this._ensureNodesHaveRanges(e,s).filter(r=>r.options.showIfCollapsed||!r.range.isEmpty())}getAllCustomLineHeights(e,t){const n=e.getVersionId(),s=this._search(t,!1,!1,n,!1);return this._ensureNodesHaveRanges(e,s).filter(r=>typeof r.options.lineHeight=="number")}getAll(e,t,n,s,r){const o=e.getVersionId(),a=this._search(t,n,s,o,r);return this._ensureNodesHaveRanges(e,a)}_search(e,t,n,s,r){if(n)return this._decorationsTree1.search(e,t,s,r);{const o=this._decorationsTree0.search(e,t,s,r),a=this._decorationsTree1.search(e,t,s,r),l=this._injectedTextDecorationsTree.search(e,t,s,r);return o.concat(a).concat(l)}}collectNodesFromOwner(e){const t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),s=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(s)}collectNodesPostOrder(){const e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){Lp(e)?this._injectedTextDecorationsTree.insert(e):I_(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){Lp(e)?this._injectedTextDecorationsTree.delete(e):I_(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){const n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){Lp(e)?this._injectedTextDecorationsTree.resolveNode(e,t):I_(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,s){this._decorationsTree0.acceptReplace(e,t,n,s),this._decorationsTree1.acceptReplace(e,t,n,s),this._injectedTextDecorationsTree.acceptReplace(e,t,n,s)}}function xr(i){return i.replace(/[^a-z0-9\-_]/gi," ")}class J4{constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}}class Z$ extends J4{constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:$d.Center}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;const n=e?t.getColor(e.id):null;return n?n.toString():""}}class J${constructor(e){this.position=e?.position??v0.Center,this.persistLane=e?.persistLane}}class eq extends J4{constructor(e){super(e),this.position=e.position,this.sectionHeaderStyle=e.sectionHeaderStyle??null,this.sectionHeaderText=e.sectionHeaderText??null}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?P.fromHex(e):t.getColor(e.id)}}class pf{static from(e){return e instanceof pf?e:new pf(e)}constructor(e){this.content=e.content||"",this.tokens=e.tokens??null,this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}}class lr{static register(e){return new lr(e)}static createDynamic(e){return new lr(e)}constructor(e){this.description=e.description,this.blockClassName=e.blockClassName?xr(e.blockClassName):null,this.blockDoesNotCollapse=e.blockDoesNotCollapse??null,this.blockIsAfterEnd=e.blockIsAfterEnd??null,this.blockPadding=e.blockPadding??null,this.stickiness=e.stickiness||ms.AlwaysGrowsWhenTypingAtEdges,this.zIndex=e.zIndex||0,this.className=e.className?xr(e.className):null,this.shouldFillLineOnLineBreak=e.shouldFillLineOnLineBreak??null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.lineHeight=e.lineHeight?Math.min(e.lineHeight,j$):null,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new Z$(e.overviewRuler):null,this.minimap=e.minimap?new eq(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new J$(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?xr(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?xr(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?xr(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?A7(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?xr(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?xr(e.marginClassName):null,this.inlineClassName=e.inlineClassName?xr(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?xr(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?xr(e.afterContentClassName):null,this.after=e.after?pf.from(e.after):null,this.before=e.before?pf.from(e.before):null,this.hideInCommentTokens=e.hideInCommentTokens??!1,this.hideInStringTokens=e.hideInStringTokens??!1}}lr.EMPTY=lr.register({description:"empty"});const uD=[lr.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:ms.AlwaysGrowsWhenTypingAtEdges}),lr.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:ms.NeverGrowsWhenTypingAtEdges}),lr.register({description:"tracked-range-grows-only-when-typing-before",stickiness:ms.GrowsOnlyWhenTypingBefore}),lr.register({description:"tracked-range-grows-only-when-typing-after",stickiness:ms.GrowsOnlyWhenTypingAfter})];function dD(i){return i instanceof lr?i:lr.createDynamic(i)}class fD{static toKey(e){return`${e.ownerId};${e.decorationId};${e.lineNumber}`}constructor(e,t,n,s){this.ownerId=e,this.decorationId=t,this.lineNumber=n,this.lineHeight=s}}class tq extends ${constructor(e){super(),this.handleBeforeFire=e,this._actual=this._register(new A),this.event=this._actual.event,this._affectedInjectedTextLines=null,this._affectedLineHeights=null,this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}hasListeners(){return this._actual.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),this._affectedInjectedTextLines?.clear(),this._affectedInjectedTextLines=null,this._affectedLineHeights?.clear(),this._affectedLineHeights=null)}recordLineAffectedByInjectedText(e){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(e)}recordLineAffectedByLineHeightChange(e,t,n,s){this._affectedLineHeights||(this._affectedLineHeights=new mI([],fD.toKey)),this._affectedLineHeights.add(new fD(e,t,n,s))}checkAffectedAndFire(e){this._affectsMinimap||=!!e.minimap?.position,this._affectsOverviewRuler||=!!e.overviewRuler?.color,this._affectsGlyphMargin||=!!e.glyphMarginClassName,this._affectsLineNumber||=!!e.lineNumberClassName,this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines,this._affectedLineHeights);const e={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(e)}}class iq extends ${constructor(){super(),this._fastEmitter=this._register(new A),this.fastEvent=this._fastEmitter.event,this._slowEmitter=this._register(new A),this.slowEvent=this._slowEmitter.event,this._deferredCnt=0,this._deferredEvent=null}hasListeners(){return this._fastEmitter.hasListeners()||this._slowEmitter.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;const t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}}var ml;function oa(i){return i.toString()}class nq{constructor(e,t,n){this.model=e,this._modelEventListeners=new X,this.model=e,this._modelEventListeners.add(e.onWillDispose(()=>t(e))),this._modelEventListeners.add(e.onDidChangeLanguage(s=>n(e,s)))}dispose(){this._modelEventListeners.dispose()}}const sq=rs||Me?Vo.LF:Vo.CRLF;class rq{constructor(e,t,n,s,r,o,a,l){this.uri=e,this.initialUndoRedoSnapshot=t,this.time=n,this.sharesUndoRedoStack=s,this.heapSize=r,this.sha1=o,this.versionId=a,this.alternativeVersionId=l}}let iv=class extends ${static{ml=this}static{this.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK=20*1024*1024}constructor(e,t,n,s){super(),this._configurationService=e,this._resourcePropertiesService=t,this._undoRedoService=n,this._instantiationService=s,this._onModelAdded=this._register(new A),this.onModelAdded=this._onModelAdded.event,this._onModelRemoved=this._register(new A),this.onModelRemoved=this._onModelRemoved.event,this._onModelModeChanged=this._register(new A),this.onModelLanguageChanged=this._onModelModeChanged.event,this._modelCreationOptionsByLanguageAndResource=Object.create(null),this._models={},this._disposedModels=new Map,this._disposedModelsHeapSize=0,this._register(this._configurationService.onDidChangeConfiguration(r=>this._updateModelOptions(r))),this._updateModelOptions(void 0)}static _readModelOptions(e,t){let n=Oi.tabSize;if(e.editor&&typeof e.editor.tabSize<"u"){const f=parseInt(e.editor.tabSize,10);isNaN(f)||(n=f),n<1&&(n=1)}let s="tabSize";if(e.editor&&typeof e.editor.indentSize<"u"&&e.editor.indentSize!=="tabSize"){const f=parseInt(e.editor.indentSize,10);isNaN(f)||(s=Math.max(f,1))}let r=Oi.insertSpaces;e.editor&&typeof e.editor.insertSpaces<"u"&&(r=e.editor.insertSpaces==="false"?!1:!!e.editor.insertSpaces);let o=sq;const a=e.eol;a===`\r
`?o=Vo.CRLF:a===`
`&&(o=Vo.LF);let l=Oi.trimAutoWhitespace;e.editor&&typeof e.editor.trimAutoWhitespace<"u"&&(l=e.editor.trimAutoWhitespace==="false"?!1:!!e.editor.trimAutoWhitespace);let c=Oi.detectIndentation;e.editor&&typeof e.editor.detectIndentation<"u"&&(c=e.editor.detectIndentation==="false"?!1:!!e.editor.detectIndentation);let h=Oi.largeFileOptimizations;e.editor&&typeof e.editor.largeFileOptimizations<"u"&&(h=e.editor.largeFileOptimizations==="false"?!1:!!e.editor.largeFileOptimizations);let u=Oi.bracketPairColorizationOptions;return e.editor?.bracketPairColorization&&typeof e.editor.bracketPairColorization=="object"&&(u={enabled:!!e.editor.bracketPairColorization.enabled,independentColorPoolPerBracketType:!!e.editor.bracketPairColorization.independentColorPoolPerBracketType}),{isForSimpleWidget:t,tabSize:n,indentSize:s,insertSpaces:r,detectIndentation:c,defaultEOL:o,trimAutoWhitespace:l,largeFileOptimizations:h,bracketPairColorizationOptions:u}}_getEOL(e,t){if(e)return this._resourcePropertiesService.getEOL(e,t);const n=this._configurationService.getValue("files.eol",{overrideIdentifier:t});return n&&typeof n=="string"&&n!=="auto"?n:An===At.Linux||An===At.Macintosh?`
`:`\r
`}_shouldRestoreUndoStack(){const e=this._configurationService.getValue("files.restoreUndoStack");return typeof e=="boolean"?e:!0}getCreationOptions(e,t,n){const s=typeof e=="string"?e:e.languageId;let r=this._modelCreationOptionsByLanguageAndResource[s+t];if(!r){const o=this._configurationService.getValue("editor",{overrideIdentifier:s,resource:t}),a=this._getEOL(t,s);r=ml._readModelOptions({editor:o,eol:a},n),this._modelCreationOptionsByLanguageAndResource[s+t]=r}return r}_updateModelOptions(e){const t=this._modelCreationOptionsByLanguageAndResource;this._modelCreationOptionsByLanguageAndResource=Object.create(null);const n=Object.keys(this._models);for(let s=0,r=n.length;s<r;s++){const o=n[s],a=this._models[o],l=a.model.getLanguageId(),c=a.model.uri;if(e&&!e.affectsConfiguration("editor",{overrideIdentifier:l,resource:c})&&!e.affectsConfiguration("files.eol",{overrideIdentifier:l,resource:c}))continue;const h=t[l+c],u=this.getCreationOptions(l,c,a.model.isForSimpleWidget);ml._setModelOptionsForModel(a.model,u,h)}}static _setModelOptionsForModel(e,t,n){n&&n.defaultEOL!==t.defaultEOL&&e.getLineCount()===1&&e.setEOL(t.defaultEOL===Vo.LF?ds.LF:ds.CRLF),!(n&&n.detectIndentation===t.detectIndentation&&n.insertSpaces===t.insertSpaces&&n.tabSize===t.tabSize&&n.indentSize===t.indentSize&&n.trimAutoWhitespace===t.trimAutoWhitespace&&Wi(n.bracketPairColorizationOptions,t.bracketPairColorizationOptions))&&(t.detectIndentation?(e.detectIndentation(t.insertSpaces,t.tabSize),e.updateOptions({trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions})):e.updateOptions({insertSpaces:t.insertSpaces,tabSize:t.tabSize,indentSize:t.indentSize,trimAutoWhitespace:t.trimAutoWhitespace,bracketColorizationOptions:t.bracketPairColorizationOptions}))}_insertDisposedModel(e){this._disposedModels.set(oa(e.uri),e),this._disposedModelsHeapSize+=e.heapSize}_removeDisposedModel(e){const t=this._disposedModels.get(oa(e));return t&&(this._disposedModelsHeapSize-=t.heapSize),this._disposedModels.delete(oa(e)),t}_ensureDisposedModelsHeapSize(e){if(this._disposedModelsHeapSize>e){const t=[];for(this._disposedModels.forEach(n=>{n.sharesUndoRedoStack||t.push(n)}),t.sort((n,s)=>n.time-s.time);t.length>0&&this._disposedModelsHeapSize>e;){const n=t.shift();this._removeDisposedModel(n.uri),n.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(n.initialUndoRedoSnapshot)}}}_createModelData(e,t,n,s){const r=this.getCreationOptions(t,n,s),o=this._instantiationService.createInstance(tv,e,t,r,n);if(n&&this._disposedModels.has(oa(n))){const c=this._removeDisposedModel(n),h=this._undoRedoService.getElements(n),u=this._getSHA1Computer(),f=u.canComputeSHA1(o)?u.computeSHA1(o)===c.sha1:!1;if(f||c.sharesUndoRedoStack){for(const g of h.past)Io(g)&&g.matchesResource(n)&&g.setModel(o);for(const g of h.future)Io(g)&&g.matchesResource(n)&&g.setModel(o);this._undoRedoService.setElementsValidFlag(n,!0,g=>Io(g)&&g.matchesResource(n)),f&&(o._overwriteVersionId(c.versionId),o._overwriteAlternativeVersionId(c.alternativeVersionId),o._overwriteInitialUndoRedoSnapshot(c.initialUndoRedoSnapshot))}else c.initialUndoRedoSnapshot!==null&&this._undoRedoService.restoreSnapshot(c.initialUndoRedoSnapshot)}const a=oa(o.uri);if(this._models[a])throw new Error("ModelService: Cannot add model because it already exists!");const l=new nq(o,c=>this._onWillDispose(c),(c,h)=>this._onDidChangeLanguage(c,h));return this._models[a]=l,l}updateModel(e,t){const n=this.getCreationOptions(e.getLanguageId(),e.uri,e.isForSimpleWidget),{textBuffer:s,disposable:r}=ev(t,n.defaultEOL);if(e.equalsTextBuffer(s)){r.dispose();return}e.pushStackElement(),e.pushEOL(s.getEOL()===`\r
`?ds.CRLF:ds.LF),e.pushEditOperations([],ml._computeEdits(e,s),()=>[]),e.pushStackElement(),r.dispose()}static _commonPrefix(e,t,n,s,r,o){const a=Math.min(t,r);let l=0;for(let c=0;c<a&&e.getLineContent(n+c)===s.getLineContent(o+c);c++)l++;return l}static _commonSuffix(e,t,n,s,r,o){const a=Math.min(t,r);let l=0;for(let c=0;c<a&&e.getLineContent(n+t-c)===s.getLineContent(o+r-c);c++)l++;return l}static _computeEdits(e,t){const n=e.getLineCount(),s=t.getLineCount(),r=this._commonPrefix(e,n,1,t,s,1);if(n===s&&r===n)return[];const o=this._commonSuffix(e,n-r,r,t,s-r,r);let a,l;return o>0?(a=new H(r+1,1,n-o+1,1),l=new H(r+1,1,s-o+1,1)):r>0?(a=new H(r,e.getLineMaxColumn(r),n,e.getLineMaxColumn(n)),l=new H(r,1+t.getLineLength(r),s,1+t.getLineLength(s))):(a=new H(1,1,n,e.getLineMaxColumn(n)),l=new H(1,1,s,1+t.getLineLength(s))),[jh.replaceMove(a,t.getValueInRange(l,_n.TextDefined))]}createModel(e,t,n,s=!1){let r;return t?r=this._createModelData(e,t,n,s):r=this._createModelData(e,qa,n,s),this._onModelAdded.fire(r.model),r.model}destroyModel(e){const t=this._models[oa(e)];t&&t.model.dispose()}getModels(){const e=[],t=Object.keys(this._models);for(let n=0,s=t.length;n<s;n++){const r=t[n];e.push(this._models[r].model)}return e}getModel(e){const t=oa(e),n=this._models[t];return n?n.model:null}_schemaShouldMaintainUndoRedoElements(e){return e.scheme===ge.file||e.scheme===ge.vscodeRemote||e.scheme===ge.vscodeUserData||e.scheme===ge.vscodeNotebookCell||e.scheme==="fake-fs"}_onWillDispose(e){const t=oa(e.uri),n=this._models[t],s=this._undoRedoService.getUriComparisonKey(e.uri)!==e.uri.toString();let r=!1,o=0;if(s||this._shouldRestoreUndoStack()&&this._schemaShouldMaintainUndoRedoElements(e.uri)){const c=this._undoRedoService.getElements(e.uri);if(c.past.length>0||c.future.length>0){for(const h of c.past)Io(h)&&h.matchesResource(e.uri)&&(r=!0,o+=h.heapSize(e.uri),h.setModel(e.uri));for(const h of c.future)Io(h)&&h.matchesResource(e.uri)&&(r=!0,o+=h.heapSize(e.uri),h.setModel(e.uri))}}const a=ml.MAX_MEMORY_FOR_CLOSED_FILES_UNDO_STACK,l=this._getSHA1Computer();if(r)if(!s&&(o>a||!l.canComputeSHA1(e))){const c=n.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}else this._ensureDisposedModelsHeapSize(a-o),this._undoRedoService.setElementsValidFlag(e.uri,!1,c=>Io(c)&&c.matchesResource(e.uri)),this._insertDisposedModel(new rq(e.uri,n.model.getInitialUndoRedoSnapshot(),Date.now(),s,o,l.computeSHA1(e),e.getVersionId(),e.getAlternativeVersionId()));else if(!s){const c=n.model.getInitialUndoRedoSnapshot();c!==null&&this._undoRedoService.restoreSnapshot(c)}delete this._models[t],n.dispose(),delete this._modelCreationOptionsByLanguageAndResource[e.getLanguageId()+e.uri],this._onModelRemoved.fire(e)}_onDidChangeLanguage(e,t){const n=t.oldLanguage,s=e.getLanguageId(),r=this.getCreationOptions(n,e.uri,e.isForSimpleWidget),o=this.getCreationOptions(s,e.uri,e.isForSimpleWidget);ml._setModelOptionsForModel(e,o,r),this._onModelModeChanged.fire({model:e,oldLanguageId:n})}_getSHA1Computer(){return new ik}};iv=ml=G([L(0,Vt),L(1,DN),L(2,Z4),L(3,xt)],iv);class ik{static{this.MAX_MODEL_SIZE=10*1024*1024}canComputeSHA1(e){return e.getValueLength()<=ik.MAX_MODEL_SIZE}computeSHA1(e){const t=new qy,n=e.createSnapshot();let s;for(;s=n.read();)t.update(s);return t.digest()}}const oq=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var nv;(function(i){i[i.Eager=0]="Eager",i[i.AfterFirstRender=1]="AfterFirstRender",i[i.BeforeFirstInteraction=2]="BeforeFirstInteraction",i[i.Eventually=3]="Eventually",i[i.Lazy=4]="Lazy"})(nv||(nv={}));class nk{constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){const e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(const t of e){let n=t.kbExpr;this.precondition&&(n?n=kt.and(n,this.precondition):n=this.precondition);const s={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};dc.registerKeybindingRule(s)}}Ss.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){Pa.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}}class sk extends nk{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t,n,s){return this._implementations.push({priority:e,name:t,implementation:n,when:s}),this._implementations.sort((r,o)=>o.priority-r.priority),{dispose:()=>{for(let r=0;r<this._implementations.length;r++)if(this._implementations[r].implementation===n){this._implementations.splice(r,1);return}}}}runCommand(e,t){const n=e.get(Zi),s=e.get(Mt);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(const r of this._implementations){if(r.when){const a=s.getContext(on());if(!r.when.evaluate(a))continue}const o=r.implementation(e,t);if(o)return n.trace(`Command '${this.id}' was handled by '${r.name}'.`),typeof o=="boolean"?void 0:o}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}}class e5 extends nk{constructor(e,t){super(t),this.command=e}runCommand(e,t){return this.command.runCommand(e,t)}}class jm extends nk{static bindToContribution(e){return class extends jm{constructor(n){super(n),this._callback=n.handler}runEditorCommand(n,s,r){const o=e(s);o&&this._callback(o,r)}}}static runEditorCommand(e,t,n,s){const r=e.get(vr),o=r.getFocusedCodeEditor()||r.getActiveCodeEditor();if(o)return o.invokeWithinContext(a=>{if(a.get(Mt).contextMatchesRules(n??void 0))return s(a,o,t)})}runCommand(e,t){return jm.runEditorCommand(e,t,this.precondition,(n,s,r)=>this.runEditorCommand(n,s,r))}}class rk extends jm{static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function n(s){return s.menuId||(s.menuId=T.EditorContext),s.title||(s.title=typeof e.label=="string"?e.label:e.label.value),s.when=kt.and(e.precondition,s.when),s}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}constructor(e){super(rk.convertOptions(e)),typeof e.label=="string"?(this.label=e.label,this.alias=e.alias??e.label):(this.label=e.label.value,this.alias=e.alias??e.label.original)}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get(gu).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}}class rse extends rk{constructor(){super(...arguments),this._implementations=[]}addImplementation(e,t){return this._implementations.push([e,t]),this._implementations.sort((n,s)=>s[0]-n[0]),{dispose:()=>{for(let n=0;n<this._implementations.length;n++)if(this._implementations[n][1]===t){this._implementations.splice(n,1);return}}}}run(e,t,n){for(const s of this._implementations){const r=s[1](e,t,n);if(r)return typeof r=="boolean"?void 0:r}}}class ose extends pH{run(e,...t){const n=e.get(vr),s=n.getFocusedCodeEditor()||n.getActiveCodeEditor();if(s)return s.invokeWithinContext(r=>{const o=r.get(Mt),a=r.get(Zi);if(!o.contextMatchesRules(this.desc.precondition??void 0)){a.debug("[EditorAction2] NOT running command because its precondition is FALSE",this.desc.id,this.desc.precondition?.serialize());return}return this.runEditorCommand(r,s,...t)})}}function ase(i,e){Ss.registerCommand(i,function(t,...n){const s=t.get(xt),[r,o]=n;Wp(Y.isUri(r)),Wp(pe.isIPosition(o));const a=t.get(yr).getModel(r);if(a){const l=pe.lift(o);return s.invokeFunction(e,a,l,...n.slice(2))}return t.get(xS).createModelReference(r).then(l=>new Promise((c,h)=>{try{const u=s.invokeFunction(e,l.object.textEditorModel,pe.lift(o),n.slice(2));c(u)}catch(u){h(u)}}).finally(()=>{l.dispose()}))})}function lse(i){return ts.INSTANCE.registerEditorCommand(i),i}function cse(i){const e=new i;return ts.INSTANCE.registerEditorAction(e),e}function hse(i){return ts.INSTANCE.registerEditorAction(i),i}function use(i){ts.INSTANCE.registerEditorAction(i)}function aq(i,e,t){ts.INSTANCE.registerEditorContribution(i,e,t)}function dse(i,e){ts.INSTANCE.registerDiffEditorContribution(i,e)}var gD;(function(i){function e(o){return ts.INSTANCE.getEditorCommand(o)}i.getEditorCommand=e;function t(){return ts.INSTANCE.getEditorActions()}i.getEditorActions=t;function n(){return ts.INSTANCE.getEditorContributions()}i.getEditorContributions=n;function s(o){return ts.INSTANCE.getEditorContributions().filter(a=>o.indexOf(a.id)>=0)}i.getSomeEditorContributions=s;function r(){return ts.INSTANCE.getDiffEditorContributions()}i.getDiffEditorContributions=r})(gD||(gD={}));const lq={EditorCommonContributions:"editor.contributions"};class ts{static{this.INSTANCE=new ts}constructor(){this.editorContributions=[],this.diffEditorContributions=[],this.editorActions=[],this.editorCommands=Object.create(null)}registerEditorContribution(e,t,n){this.editorContributions.push({id:e,ctor:t,instantiation:n})}getEditorContributions(){return this.editorContributions.slice(0)}registerDiffEditorContribution(e,t){this.diffEditorContributions.push({id:e,ctor:t})}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}}wt.add(lq.EditorCommonContributions,ts.INSTANCE);function Jf(i){return i.register(),i}const cq=Jf(new sk({id:"undo",precondition:void 0,kbOpts:{weight:Xa.EditorCore,primary:Ne.CtrlCmd|w.KeyZ},menuOpts:[{menuId:T.MenubarEditMenu,group:"1_do",title:d(138,"&&Undo"),order:1},{menuId:T.CommandPalette,group:"",title:d(139,"Undo"),order:1},{menuId:T.SimpleEditorContext,group:"1_do",title:d(139,"Undo"),order:1}]}));Jf(new e5(cq,{id:"default:undo",precondition:void 0}));const hq=Jf(new sk({id:"redo",precondition:void 0,kbOpts:{weight:Xa.EditorCore,primary:Ne.CtrlCmd|w.KeyY,secondary:[Ne.CtrlCmd|Ne.Shift|w.KeyZ],mac:{primary:Ne.CtrlCmd|Ne.Shift|w.KeyZ}},menuOpts:[{menuId:T.MenubarEditMenu,group:"1_do",title:d(140,"&&Redo"),order:2},{menuId:T.CommandPalette,group:"",title:d(141,"Redo"),order:1},{menuId:T.SimpleEditorContext,group:"1_do",title:d(141,"Redo"),order:2}]}));Jf(new e5(hq,{id:"default:redo",precondition:void 0}));const fse=Jf(new sk({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:Xa.EditorCore,kbExpr:null,primary:Ne.CtrlCmd|w.KeyA},menuOpts:[{menuId:T.MenubarSelectionMenu,group:"1_basic",title:d(142,"&&Select All"),order:1},{menuId:T.CommandPalette,group:"",title:d(143,"Select All"),order:1},{menuId:T.SimpleEditorContext,group:"9_select",title:d(143,"Select All"),order:1}]}));var sv;(function(i){i[i.PRESERVE=0]="PRESERVE",i[i.LAST=1]="LAST"})(sv||(sv={}));const t5={Quickaccess:"workbench.contributions.quickaccess"};class uq{constructor(){this.providers=[],this.defaultProvider=void 0}registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),fe(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return ru([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}clear(){const e=[...this.providers],t=this.defaultProvider;return this.providers=[],this.defaultProvider=void 0,()=>{this.providers=e,this.defaultProvider=t}}}wt.add(t5.Quickaccess,new uq);const dq={ctrlCmd:!1,alt:!1};var Jh;(function(i){i[i.Blur=1]="Blur",i[i.Gesture=2]="Gesture",i[i.Other=3]="Other"})(Jh||(Jh={}));var eu;(function(i){i.QuickPick="quickPick",i.InputBox="inputBox",i.QuickWidget="quickWidget"})(eu||(eu={}));var Or;(function(i){i[i.NONE=0]="NONE",i[i.FIRST=1]="FIRST",i[i.SECOND=2]="SECOND",i[i.LAST=3]="LAST"})(Or||(Or={}));var tt;(function(i){i[i.First=1]="First",i[i.Second=2]="Second",i[i.Last=3]="Last",i[i.Next=4]="Next",i[i.Previous=5]="Previous",i[i.NextPage=6]="NextPage",i[i.PreviousPage=7]="PreviousPage",i[i.NextSeparator=8]="NextSeparator",i[i.PreviousSeparator=9]="PreviousSeparator"})(tt||(tt={}));var Ym;(function(i){i[i.Title=1]="Title",i[i.Inline=2]="Inline"})(Ym||(Ym={}));class fq{constructor(e){this.options=e}getItemLabel(e){return e.label}getItemDescription(e){if(!this.options?.skipDescription)return e.description}getItemPath(e){if(!this.options?.skipPath)return e.resource?.scheme===ge.file?e.resource.fsPath:e.resource?.path}}const gse=new fq,eg=be("quickInputService");let rv=class extends ${constructor(e,t){super(),this.quickInputService=e,this.instantiationService=t,this.registry=wt.as(t5.Quickaccess),this.mapProviderToDescriptor=new Map,this.lastAcceptedPickerValues=new Map,this.visibleQuickAccess=void 0,this._register(fe(()=>{for(const n of this.mapProviderToDescriptor.values())lu(n)&&n.dispose();this.visibleQuickAccess?.picker.dispose()}))}pick(e="",t){return this.doShowOrPick(e,!0,t)}show(e="",t){this.doShowOrPick(e,!1,t)}doShowOrPick(e,t,n){const[s,r]=this.getOrInstantiateProvider(e,n?.enabledProviderPrefixes),o=this.visibleQuickAccess,a=o?.descriptor;if(o&&r&&a===r){e!==r.prefix&&!n?.preserveValue&&(o.picker.value=e),this.adjustValueSelection(o.picker,r,n);return}if(r&&!n?.preserveValue){let p;if(o&&a&&a!==r){const m=o.value.substr(a.prefix.length);m&&(p=`${r.prefix}${m}`)}if(!p){const m=s?.defaultFilterValue;m===sv.LAST?p=this.lastAcceptedPickerValues.get(r):typeof m=="string"&&(p=`${r.prefix}${m}`)}typeof p=="string"&&(e=p)}const l=o?.picker?.valueSelection,c=o?.picker?.value,h=new X,u=h.add(this.quickInputService.createQuickPick({useSeparators:!0}));u.value=e,this.adjustValueSelection(u,r,n),u.placeholder=n?.placeholder??r?.placeholder,u.quickNavigate=n?.quickNavigateConfiguration,u.hideInput=!!u.quickNavigate&&!o,(typeof n?.itemActivation=="number"||n?.quickNavigateConfiguration)&&(u.itemActivation=n?.itemActivation??Or.SECOND),u.contextKey=r?.contextKey,u.filterValue=p=>p.substring(r?r.prefix.length:0);let f;t&&(f=new Ya,h.add(W.once(u.onWillAccept)(p=>{p.veto(),u.hide()}))),h.add(this.registerPickerListeners(u,s,r,e,n));const g=h.add(new _r);if(s&&h.add(s.provide(u,g.token,n?.providerOptions)),W.once(u.onDidHide)(()=>{u.selectedItems.length===0&&g.cancel(),h.dispose(),f?.complete(u.selectedItems.slice(0))}),u.show(),l&&c===e&&(u.valueSelection=l),t)return f?.p}adjustValueSelection(e,t,n){let s;n?.preserveValue?s=[e.value.length,e.value.length]:s=[t?.prefix.length??0,e.value.length],e.valueSelection=s}registerPickerListeners(e,t,n,s,r){const o=new X,a=this.visibleQuickAccess={picker:e,descriptor:n,value:s};return o.add(fe(()=>{a===this.visibleQuickAccess&&(this.visibleQuickAccess=void 0)})),o.add(e.onDidChangeValue(l=>{const[c]=this.getOrInstantiateProvider(l,r?.enabledProviderPrefixes);c!==t?this.show(l,{enabledProviderPrefixes:r?.enabledProviderPrefixes,preserveValue:!0,providerOptions:r?.providerOptions}):a.value=l})),n&&o.add(e.onDidAccept(()=>{this.lastAcceptedPickerValues.set(n,e.value)})),o}getOrInstantiateProvider(e,t){const n=this.registry.getQuickAccessProvider(e);if(!n||t&&!t?.includes(n.prefix))return[void 0,void 0];let s=this.mapProviderToDescriptor.get(n);return s||(s=this.instantiationService.createInstance(n.ctor),this.mapProviderToDescriptor.set(n,s)),[s,n]}};rv=G([L(0,eg),L(1,xt)],rv);const gq=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));mt(gq);const i5={inputActiveOptionBorder:"#007ACC00",inputActiveOptionForeground:"#FFFFFF",inputActiveOptionBackground:"#0E639C50"};class pu extends so{constructor(e){super(),this._onChange=this._register(new A),this.onChange=this._onChange.event,this._onKeyDown=this._register(new A),this.onKeyDown=this._onKeyDown.event,this._opts=e,this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...ze.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register(qs().setupManagedHover(e.hoverDelegate??ks("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,n=>{if(this.enabled){if(n.keyCode===w.Space||n.keyCode===w.Enter){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault(),n.stopPropagation();return}this._onKeyDown.fire(n)}})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}setIcon(e){this._icon&&this.domNode.classList.remove(...ze.asClassNameArray(this._icon)),this._icon=e,this._icon&&this.domNode.classList.add(...ze.asClassNameArray(this._icon))}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1)),this.domNode.classList.remove("disabled")}disable(){this.domNode.setAttribute("aria-disabled",String(!0)),this.domNode.classList.add("disabled")}setTitle(e){this._hover.update(e),this.domNode.setAttribute("aria-label",e)}set visible(e){this.domNode.style.display=e?"":"none"}get visible(){return this.domNode.style.display!=="none"}}class cb extends so{static{this.CLASS_NAME="monaco-checkbox"}constructor(e,t,n){super(),this.title=e,this.isChecked=t,this._onChange=this._register(new A),this.onChange=this._onChange.event,this.checkbox=this._register(new pu({title:this.title,isChecked:this.isChecked,icon:re.check,actionClassName:cb.CLASS_NAME,...i5})),this.domNode=this.checkbox.domNode,this.styles=n,this.applyStyles(),this._register(this.checkbox.onChange(s=>{this.applyStyles(),this._onChange.fire(s)}))}get checked(){return this.checkbox.checked}get enabled(){return this.checkbox.enabled}set checked(e){this.checkbox.checked=e,this.applyStyles()}focus(){this.domNode.focus()}hasFocus(){return il(this.domNode)}enable(){this.checkbox.enable(),this.applyStyles(!0)}disable(){this.checkbox.disable(),this.applyStyles(!1)}setTitle(e){this.checkbox.setTitle(e)}applyStyles(e=this.enabled){this.domNode.style.color=(e?this.styles.checkboxForeground:this.styles.checkboxDisabledForeground)||"",this.domNode.style.backgroundColor=(e?this.styles.checkboxBackground:this.styles.checkboxDisabledBackground)||"",this.domNode.style.borderColor=(e?this.styles.checkboxBorder:this.styles.checkboxDisabledBackground)||"";const t=this.styles.size||18;this.domNode.style.width=this.domNode.style.height=this.domNode.style.fontSize=`${t}px`,this.domNode.style.fontSize=`${t-2}px`}}const ok=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));class ov{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>typeof e=="string"?e:e.label).join("")}}ov.__decorator=G([vt],ov.prototype,"toString",null);const pq=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function mq(i){const e=[];let t=0,n;for(;n=pq.exec(i);){n.index-t>0&&e.push(i.substring(t,n.index));const[,s,r,,o]=n;o?e.push({label:s,href:r,title:o}):e.push({label:s,href:r}),t=n.index+n[0].length}return t<i.length&&e.push(i.substring(t)),new ov(e)}mt(ok);const T_={},bq=new sN("quick-input-button-icon-");function _q(i){if(!i)return;let e;const t=i.dark.toString();return T_[t]?e=T_[t]:(e=bq.nextId(),ir(`.${e}, .hc-light .${e}`,`background-image: ${pr(i.light||i.dark)}`),ir(`.vs-dark .${e}, .hc-black .${e}`,`background-image: ${pr(i.dark)}`),T_[t]=e),e}function Dd(i,e,t){let n=i.iconClass||_q(i.iconPath);return i.alwaysVisible&&(n=n?`${n} always-visible`:"always-visible"),{id:e,label:"",tooltip:i.tooltip||"",class:n,enabled:!0,run:t}}function wq(i,e,t){Nn(e);const n=mq(i);let s=0;for(const r of n.nodes)if(typeof r=="string")e.append(...jl(r));else{let o=r.title;!o&&r.href.startsWith("command:")?o=d(1971,"Click to execute command '{0}'",r.href.substring(8)):o||(o=r.href);const a=_e("a",{href:r.href,title:o,tabIndex:s++},r.label);a.style.textDecoration="underline";const l=g=>{b6(g)&&Re.stop(g,!0),t.callback(r.href)},c=t.disposables.add(new Ve(a,j.CLICK)).event,h=t.disposables.add(new Ve(a,j.KEY_DOWN)).event,u=W.chain(h,g=>g.filter(p=>{const m=new at(p);return m.equals(w.Space)||m.equals(w.Enter)}));t.disposables.add(Bt.addTarget(a));const f=t.disposables.add(new Ve(a,qt.Tap)).event;W.any(c,f,u)(l,null,t.disposables),e.appendChild(a)}}const n5=be("hoverService");let av=class extends ${get delay(){return this.isInstantlyHovering()?0:this.hoverOptions?.dynamicDelay?e=>this.hoverOptions?.dynamicDelay?.(e)??this._delay:this._delay}constructor(e,t,n={},s,r){super(),this.placement=e,this.hoverOptions=t,this.overrideOptions=n,this.configurationService=s,this.hoverService=r,this.lastHoverHideTime=0,this.timeLimit=200,this.hoverDisposables=this._register(new X),this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}showHover(e,t){const n=typeof this.overrideOptions=="function"?this.overrideOptions(e,t):this.overrideOptions;this.hoverDisposables.clear();const s=Ut(e.target)?[e.target]:e.target.targetElements;for(const o of s)this.hoverDisposables.add(Fs(o,"keydown",a=>{a.equals(w.Escape)&&this.hoverService.hideHover()}));const r=Ut(e.content)?void 0:typeof e.content=="string"?e.content.toString():e.content.value;return this.hoverService.showInstantHover({...e,...n,persistence:{hideOnKeyDown:!0,...n.persistence},id:r,appearance:{...e.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...n.appearance}},t)}isInstantlyHovering(){return!!this.hoverOptions?.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}setInstantHoverTimeLimit(e){if(!this.hoverOptions?.instantHover)throw new Error("Instant hover is not enabled");this.timeLimit=e}onDidHideHover(){this.hoverDisposables.clear(),this.hoverOptions?.instantHover&&(this.lastHoverHideTime=Date.now())}};av=G([L(3,Vt),L(4,n5)],av);const bse={showHover:function(){throw new Error("Native hover function not implemented.")},delay:0,showNativeHover:!0};mt(ok);const s5="inQuickInput",vq=new oe(s5,!1,d(1950,"Whether keyboard focus is inside the quick input control")),yq=kt.has(s5),Sq="quickInputAlignment",kq=new oe(Sq,"top",d(1951,"The alignment of the quick input")),r5="quickInputType",Cq=new oe(r5,void 0,d(1952,"The type of the currently visible quick input")),o5="cursorAtEndOfQuickInputBox",Eq=new oe(o5,!1,d(1953,"Whether the cursor in the quick input is at the end of the input box")),xq=kt.has(o5),Xm={iconClass:ze.asClassName(re.quickInputBack),tooltip:d(1954,"Back"),handle:-1};class tu extends ${static{this.noPromptMessage=d(1955,"Press 'Enter' to confirm your input or 'Escape' to cancel")}constructor(e){super(),this.ui=e,this._widgetUpdated=!1,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._leftButtons=[],this._rightButtons=[],this._inlineButtons=[],this.buttonsUpdated=!1,this._toggles=[],this.togglesUpdated=!1,this.noValidationMessage=tu.noPromptMessage,this._severity=bt.Ignore,this.onDidTriggerButtonEmitter=this._register(new A),this.onDidHideEmitter=this._register(new A),this.onWillHideEmitter=this._register(new A),this.onDisposeEmitter=this._register(new A),this.visibleDisposables=this._register(new X),this.onDidTriggerButton=this.onDidTriggerButtonEmitter.event,this.onDidHide=this.onDidHideEmitter.event,this.onWillHide=this.onWillHideEmitter.event,this.onDispose=this.onDisposeEmitter.event}get title(){return this._title}set title(e){this._title=e,this.update()}get description(){return this._description}set description(e){this._description=e,this.update()}get widget(){return this._widget}set widget(e){Ut(e)&&this._widget!==e&&(this._widget=e,this._widgetUpdated=!0,this.update())}get step(){return this._steps}set step(e){this._steps=e,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(e){this._totalSteps=e,this.update()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.update()}get contextKey(){return this._contextKey}set contextKey(e){this._contextKey=e,this.update()}get busy(){return this._busy}set busy(e){this._busy=e,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(e){const t=this._ignoreFocusOut!==e&&!ja;this._ignoreFocusOut=e&&!ja,t&&this.update()}get titleButtons(){return this._leftButtons.length?[...this._leftButtons,this._rightButtons]:this._rightButtons}get buttons(){return[...this._leftButtons,...this._rightButtons,...this._inlineButtons]}set buttons(e){this._leftButtons=e.filter(t=>t===Xm),this._rightButtons=e.filter(t=>t!==Xm&&t.location!==Ym.Inline),this._inlineButtons=e.filter(t=>t.location===Ym.Inline),this.buttonsUpdated=!0,this.update()}get toggles(){return this._toggles}set toggles(e){this._toggles=e??[],this.togglesUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(e){this._validationMessage=e,this.update()}get severity(){return this._severity}set severity(e){this._severity=e,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton(e=>{this.buttons.indexOf(e)!==-1&&this.onDidTriggerButtonEmitter.fire(e)})),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.toggles.length&&(this.togglesUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(e=Jh.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:e})}willHide(e=Jh.Other){this.onWillHideEmitter.fire({reason:e})}update(){if(!this.visible)return;const e=this.getTitle();e&&this.ui.title.textContent!==e?this.ui.title.textContent=e:!e&&this.ui.title.innerHTML!=="&nbsp;"&&(this.ui.title.innerText=" ");const t=this.getDescription();if(this.ui.description1.textContent!==t&&(this.ui.description1.textContent=t),this.ui.description2.textContent!==t&&(this.ui.description2.textContent=t),this._widgetUpdated&&(this._widgetUpdated=!1,this._widget?Nn(this.ui.widget,this._widget):Nn(this.ui.widget)),this.busy&&!this.busyDelay&&(this.busyDelay=new tl,this.busyDelay.setIfNotSet(()=>{this.visible&&this.ui.progressBar.infinite()},800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const s=this._leftButtons.map((a,l)=>Dd(a,`id-${l}`,async()=>this.onDidTriggerButtonEmitter.fire(a)));this.ui.leftActionBar.push(s,{icon:!0,label:!1}),this.ui.rightActionBar.clear();const r=this._rightButtons.map((a,l)=>Dd(a,`id-${l}`,async()=>this.onDidTriggerButtonEmitter.fire(a)));this.ui.rightActionBar.push(r,{icon:!0,label:!1}),this.ui.inlineActionBar.clear();const o=this._inlineButtons.map((a,l)=>Dd(a,`id-${l}`,async()=>this.onDidTriggerButtonEmitter.fire(a)));this.ui.inlineActionBar.push(o,{icon:!0,label:!1})}if(this.togglesUpdated){this.togglesUpdated=!1;const s=this.toggles?.filter(r=>r instanceof pu)??[];this.ui.inputBox.toggles=s}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const n=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==n&&(this._lastValidationMessage=n,Nn(this.ui.message),wq(n,this.ui.message,{callback:s=>{this.ui.linkOpenerDelegate(s)},disposables:this.visibleDisposables})),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?d(1956,"{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(e){if(this.ui.inputBox.showDecoration(e),e!==bt.Ignore){const t=this.ui.inputBox.stylesForType(e);this.ui.message.style.color=t.foreground?`${t.foreground}`:"",this.ui.message.style.backgroundColor=t.background?`${t.background}`:"",this.ui.message.style.border=t.border?`1px solid ${t.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}class Nl extends tu{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new A),this.onWillAcceptEmitter=this._register(new A),this.onDidAcceptEmitter=this._register(new A),this.onDidCustomEmitter=this._register(new A),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._keepScrollPosition=!1,this._itemActivation=Or.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new A),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new A),this.onDidTriggerItemButtonEmitter=this._register(new A),this.onDidTriggerSeparatorButtonEmitter=this._register(new A),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this._focusEventBufferer=new Ef,this.type=eu.QuickPick,this.filterValue=e=>e,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidCustom=this.onDidCustomEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event,this.onDidTriggerSeparatorButton=this.onDidTriggerSeparatorButtonEmitter.event}static{this.DEFAULT_ARIA_LABEL=d(1957,"Type to narrow down results.")}get quickNavigate(){return this._quickNavigate}set quickNavigate(e){this._quickNavigate=e,this.update()}get value(){return this._value}set value(e){this.doSetValue(e)}doSetValue(e,t){this._value!==e&&(this._value=e,t||this.update(),this.visible&&this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst(),this.onDidChangeValueEmitter.fire(this._value))}set ariaLabel(e){this._ariaLabel=e,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(e){this.ui.list.scrollTop=e}set items(e){this._items=e,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(e){this._canSelectMany=e,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(e){this._canAcceptInBackground=e}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(e){this._keepScrollPosition=e}get itemActivation(){return this._itemActivation}set itemActivation(e){this._itemActivation=e}get activeItems(){return this._activeItems}set activeItems(e){this._activeItems=e,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(e){this._selectedItems=e,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?dq:this.ui.keyMods}get valueSelection(){const e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(e){this._customButton=e,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(e){this._customButtonLabel=e,this.update()}get customHover(){return this._customButtonHover}set customHover(e){this._customButtonHover=e,this.update()}get ok(){return this._ok}set ok(e){this._ok=e,this.update()}get okLabel(){return this._okLabel??d(1958,"OK")}set okLabel(e){this._okLabel=e,this.update()}inputHasFocus(){return this.visible?this.ui.inputBox.hasFocus():!1}focusOnInput(){this.ui.inputBox.setFocus()}get hideInput(){return!!this._hideInput}set hideInput(e){this._hideInput=e,this.update()}get hideCountBadge(){return!!this._hideCountBadge}set hideCountBadge(e){this._hideCountBadge=e,this.update()}get hideCheckAll(){return!!this._hideCheckAll}set hideCheckAll(e){this._hideCheckAll=e,this.update()}trySelectFirst(){this.canSelectMany||this.ui.list.focus(tt.First)}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{this.doSetValue(e,!0)})),this.visibleDisposables.add(this.ui.onDidAccept(()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)})),this.visibleDisposables.add(this.ui.onDidCustom(()=>{this.onDidCustomEmitter.fire()})),this.visibleDisposables.add(this._focusEventBufferer.wrapEvent(this.ui.list.onDidChangeFocus,(e,t)=>t)(e=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&wi(e,this._activeItems,(t,n)=>t===n)||(this._activeItems=e,this.onDidChangeActiveEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({items:e,event:t})=>{if(this.canSelectMany&&!e.some(n=>n.pickable===!1)){e.length&&this.ui.list.setSelectedElements([]);return}this.selectedItemsToConfirm!==this._selectedItems&&wi(e,this._selectedItems,(n,s)=>n===s)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e),e.length&&this.handleAccept(Jy(t)&&t.button===1))})),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(e=>{!this.canSelectMany||!this.visible||this.selectedItemsToConfirm!==this._selectedItems&&wi(e,this._selectedItems,(t,n)=>t===n)||(this._selectedItems=e,this.onDidChangeSelectionEmitter.fire(e))})),this.visibleDisposables.add(this.ui.list.onButtonTriggered(e=>this.onDidTriggerItemButtonEmitter.fire(e))),this.visibleDisposables.add(this.ui.list.onSeparatorButtonTriggered(e=>this.onDidTriggerSeparatorButtonEmitter.fire(e))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(e){let t=!1;this.onWillAcceptEmitter.fire({veto:()=>t=!0}),t||this.onDidAcceptEmitter.fire({inBackground:e})}registerQuickNavigation(){return V(this.ui.container,j.KEY_UP,e=>{if(this.canSelectMany||!this._quickNavigate)return;const t=new at(e),n=t.keyCode;this._quickNavigate.keybindings.some(o=>{const a=o.getChords();return a.length>1?!1:a[0].shiftKey&&n===w.Shift?!(t.ctrlKey||t.altKey||t.metaKey):!!(a[0].altKey&&n===w.Alt||a[0].ctrlKey&&n===w.Ctrl||a[0].metaKey&&n===w.Meta)})&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)})}update(){if(!this.visible)return;const e=this.keepScrollPosition?this.scrollTop:0,t=!!this.description,n={title:!!this.title||!!this.step||!!this.titleButtons.length,description:t,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!this._hideInput,progressBar:!this._hideInput||t,visibleCount:!0,count:this.canSelectMany&&!this._hideCountBadge,ok:this.ok==="default"?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(n),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let s=this.ariaLabel;!s&&n.inputBox&&(s=this.placeholder||Nl.DEFAULT_ARIA_LABEL,this.title&&(s+=` - ${this.title}`)),this.ui.list.ariaLabel!==s&&(this.ui.list.ariaLabel=s??null),this.ui.inputBox.ariaLabel!==s&&(this.ui.inputBox.ariaLabel=s??"input"),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated&&(this.itemsUpdated=!1,this._focusEventBufferer.bufferEvents(()=>{switch(this.ui.list.setElements(this.items),this.ui.list.shouldLoop=!this.canSelectMany,this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this._itemActivation){case Or.NONE:this._itemActivation=Or.FIRST;break;case Or.SECOND:this.ui.list.focus(tt.Second),this._itemActivation=Or.FIRST;break;case Or.LAST:this.ui.list.focus(tt.Last),this._itemActivation=Or.FIRST;break;default:this.trySelectFirst();break}})),this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.ok.label=this.okLabel||"",this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",n.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(tt.First)),this.keepScrollPosition&&(this.scrollTop=e)}focus(e){this.ui.list.focus(e),this.canSelectMany&&this.ui.list.domFocus()}accept(e){e&&!this._canAcceptInBackground||this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(e??!1))}}let Lq=class extends tu{constructor(){super(...arguments),this._value="",this.valueSelectionUpdated=!0,this._password=!1,this.onDidValueChangeEmitter=this._register(new A),this.onDidAcceptEmitter=this._register(new A),this.type=eu.InputBox,this.onDidChangeValue=this.onDidValueChangeEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event}get value(){return this._value}set value(e){this._value=e||"",this.update()}get valueSelection(){const e=this.ui.inputBox.getSelection();if(e)return[e.start,e.end]}set valueSelection(e){this._valueSelection=e,this.valueSelectionUpdated=!0,this.update()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.update()}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.update()}get password(){return this._password}set password(e){this._password=e,this.update()}get prompt(){return this._prompt}set prompt(e){this._prompt=e,this.noValidationMessage=e?d(1959,"{0} (Press 'Enter' to confirm or 'Escape' to cancel)",e):tu.noPromptMessage,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange(e=>{e!==this.value&&(this._value=e,this.onDidValueChangeEmitter.fire(e))})),this.visibleDisposables.add(this.ui.onDidAccept(()=>this.onDidAcceptEmitter.fire())),this.valueSelectionUpdated=!0),super.show()}update(){if(!this.visible)return;this.ui.container.classList.remove("hidden-input");const e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description||!!this.step,inputBox:!0,message:!0,progressBar:!0};this.ui.setVisibilities(e),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||""),this.ui.inputBox.password!==this.password&&(this.ui.inputBox.password=this.password);let t=this.ariaLabel;!t&&e.inputBox&&(t=this.placeholder?this.title?`${this.placeholder} - ${this.title}`:this.placeholder:this.title?this.title:"input"),this.ui.inputBox.ariaLabel!==t&&(this.ui.inputBox.ariaLabel=t||"input")}};class Dq extends tu{constructor(){super(...arguments),this.type=eu.QuickWidget}update(){if(!this.visible)return;const e={title:!!this.title||!!this.step||!!this.titleButtons.length,description:!!this.description||!!this.step};this.ui.setVisibilities(e),super.update()}}let lv=class extends av{constructor(e,t){super("element",void 0,n=>this.getOverrideOptions(n),e,t)}getOverrideOptions(e){const t=(Ut(e.content)?e.content.textContent??"":typeof e.content=="string"?e.content:e.content.value).includes(`
`);return{persistence:{hideOnKeyDown:!1},appearance:{showHoverHint:t,skipFadeInAnimation:!0}}}};lv=G([L(0,Vt),L(1,n5)],lv);const Iq=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));mt(Iq);P.white.toString(),P.white.toString();class pc extends ${get onDidClick(){return this._onDidClick.event}get onDidEscape(){return this._onDidEscape.event}constructor(e,t){super(),this._label="",this._onDidClick=this._register(new A),this._onDidEscape=this._register(new A),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);const n=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,s=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=s||"",this._element.style.backgroundColor=n||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),typeof t.title=="string"&&this.setTitle(t.title),typeof t.ariaLabel=="string"&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this.enabled=!t.disabled,this._register(Bt.addTarget(this._element)),[j.CLICK,qt.Tap].forEach(r=>{this._register(V(this._element,r,o=>{if(!this.enabled){Re.stop(o);return}this._onDidClick.fire(o)}))}),this._register(V(this._element,j.KEY_DOWN,r=>{const o=new at(r);let a=!1;this.enabled&&(o.equals(w.Enter)||o.equals(w.Space))?(this._onDidClick.fire(r),a=!0):o.equals(w.Escape)&&(this._onDidEscape.fire(r),this._element.blur(),a=!0),a&&Re.stop(o,!0)})),this._register(V(this._element,j.MOUSE_OVER,r=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register(V(this._element,j.MOUSE_OUT,r=>{this.updateBackground(!1)})),this.focusTracker=this._register(eS(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){const t=[];for(let n of jl(e))if(typeof n=="string"){if(n=n.trim(),n==="")continue;const s=document.createElement("span");s.textContent=n,t.push(s)}else t.push(n);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){if(this._label===e||cr(this._label)&&cr(e)&&cT(this._label,e))return;this._element.classList.add("monaco-text-button");const t=this.options.supportShortLabel?this._labelElement:this._element;if(cr(e)){const s=K1(e,{inline:!0});s.dispose();const r=s.element.querySelector("p")?.innerHTML;if(r){const o=ac.sanitize(r,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});t.innerHTML=o}else Nn(t)}else this.options.supportIcons?Nn(t,...this.getContentElements(e)):t.textContent=e;let n="";typeof this.options.title=="string"?n=this.options.title:this.options.title&&(n=SS(e)),this.setTitle(n),this._setAriaLabel(),this._label=e}get label(){return this._label}set labelShort(e){!this.options.supportShortLabel||!this._labelShortElement||(this.options.supportIcons?Nn(this._labelShortElement,...this.getContentElements(e)):this._labelShortElement.textContent=e)}_setAriaLabel(){typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):typeof this.options.title=="string"&&this._element.setAttribute("aria-label",this.options.title)}set icon(e){this._setAriaLabel();const t=Array.from(this._element.classList).filter(n=>n.startsWith("codicon-"));this._element.classList.remove(...t),this._element.classList.add(...ze.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}set checked(e){e?(this._element.classList.add("checked"),this._element.setAttribute("aria-checked","true")):(this._element.classList.remove("checked"),this._element.setAttribute("aria-checked","false"))}get checked(){return this._element.classList.contains("checked")}setTitle(e){!this._hover&&e!==""?this._hover=this._register(qs().setupManagedHover(this.options.hoverDelegate??ks("element"),this._element,e)):this._hover&&this._hover.update(e)}focus(){this._element.focus()}hasFocus(){return il(this._element)}}class Tq extends ${constructor(e,t){super(),this._onDidClick=this._register(new A),this.onDidClick=this._onDidClick.event,this.element=document.createElement("div"),this.element.classList.add("monaco-button-dropdown"),e.appendChild(this.element),t.hoverDelegate||(t={...t,hoverDelegate:this._register(J1())}),this.primaryButton=this._register(new pc(this.element,t)),this._register(this.primaryButton.onDidClick(r=>this._onDidClick.fire(r))),this.action=this._register(new Q1("primaryAction",SS(this.primaryButton.label),void 0,!0,async()=>this._onDidClick.fire(void 0))),this.separatorContainer=document.createElement("div"),this.separatorContainer.classList.add("monaco-button-dropdown-separator"),this.separator=document.createElement("div"),this.separatorContainer.appendChild(this.separator),this.element.appendChild(this.separatorContainer);const n=t.buttonBorder;n&&(this.separatorContainer.style.borderTop="1px solid "+n,this.separatorContainer.style.borderBottom="1px solid "+n);const s=t.secondary?t.buttonSecondaryBackground:t.buttonBackground;this.separatorContainer.style.backgroundColor=s??"",this.separator.style.backgroundColor=t.buttonSeparator??"",this.dropdownButton=this._register(new pc(this.element,{...t,title:d(2,"More Actions..."),supportIcons:!0})),this.dropdownButton.element.setAttribute("aria-haspopup","true"),this.dropdownButton.element.setAttribute("aria-expanded","false"),this.dropdownButton.element.classList.add("monaco-dropdown-button"),this.dropdownButton.icon=re.dropDownButton,this._register(this.dropdownButton.onDidClick(r=>{const o=Array.isArray(t.actions)?t.actions:t.actions.getActions();t.contextMenuProvider.showContextMenu({getAnchor:()=>this.dropdownButton.element,getActions:()=>t.addPrimaryActionToDropdown===!1?[...o]:[this.action,...o],actionRunner:t.actionRunner,onHide:()=>this.dropdownButton.element.setAttribute("aria-expanded","false"),layer:t.dropdownLayer}),this.dropdownButton.element.setAttribute("aria-expanded","true")}))}dispose(){super.dispose(),this.element.remove()}set label(e){this.primaryButton.label=e,this.action.label=e}set icon(e){this.primaryButton.icon=e}set enabled(e){this.primaryButton.enabled=e,this.dropdownButton.enabled=e,this.element.classList.toggle("disabled",!e)}get enabled(){return this.primaryButton.enabled}set checked(e){this.primaryButton.checked=e}get checked(){return this.primaryButton.checked}focus(){this.primaryButton.focus()}hasFocus(){return this.primaryButton.hasFocus()||this.dropdownButton.hasFocus()}}class Aq{constructor(e,t){this.options=t,this._element=document.createElement("div"),this._element.classList.add("monaco-description-button"),this._button=new pc(this._element,t),this._descriptionElement=document.createElement("div"),this._descriptionElement.classList.add("monaco-button-description"),this._element.appendChild(this._descriptionElement),e.appendChild(this._element)}get onDidClick(){return this._button.onDidClick}get element(){return this._element}set label(e){this._button.label=e}set icon(e){this._button.icon=e}get enabled(){return this._button.enabled}set enabled(e){this._button.enabled=e}set checked(e){this._button.checked=e}get checked(){return this._button.checked}focus(){this._button.focus()}hasFocus(){return this._button.hasFocus()}dispose(){this._button.dispose()}set description(e){this.options.supportIcons?Nn(this._descriptionElement,...jl(e)):this._descriptionElement.textContent=e}}var Qm;(function(i){i[i.Horizontal=0]="Horizontal",i[i.Vertical=1]="Vertical"})(Qm||(Qm={}));class vse{constructor(e,t){this.container=e,this.options=t,this._buttons=[],this._buttonStore=new X}dispose(){this._buttonStore.dispose()}get buttons(){return this._buttons}clear(){this._buttonStore.clear(),this._buttons.length=0}addButton(e){const t=this._buttonStore.add(new pc(this.container,e));return this.pushButton(t),t}addButtonWithDescription(e){const t=this._buttonStore.add(new Aq(this.container,e));return this.pushButton(t),t}addButtonWithDropdown(e){const t=this._buttonStore.add(new Tq(this.container,e));return this.pushButton(t),t}pushButton(e){this._buttons.push(e);const t=this._buttons.length-1;this._buttonStore.add(V(e.element,j.KEY_DOWN,n=>{const s=new at(n);let r=!0,o;s.equals(this.options?.alignment===Qm.Vertical?w.UpArrow:w.LeftArrow)?o=t>0?t-1:this._buttons.length-1:s.equals(this.options?.alignment===Qm.Vertical?w.DownArrow:w.RightArrow)?o=t===this._buttons.length-1?0:t+1:r=!1,r&&typeof o=="number"&&(this._buttons[o].focus(),Re.stop(n,!0))}))}}class yse extends pc{get labelElement(){return this._mdlabelElement}constructor(e,t){if(super(e,t),t.supportShortLabel)throw new Error("ButtonWithIcon does not support short labels");this._element.classList.add("monaco-icon-button"),this._iconElement=_e(""),this._mdlabelElement=_e(".monaco-button-mdlabel"),this._element.append(this._iconElement,this._mdlabelElement)}set label(e){if(this._label===e||cr(this._label)&&cr(e)&&cT(this._label,e))return;if(this._element.classList.add("monaco-text-button"),cr(e)){const n=K1(e,{inline:!0});n.dispose();const s=n.element.querySelector("p")?.innerHTML;if(s){const r=ac.sanitize(s,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});this._mdlabelElement.innerHTML=r}else Nn(this._mdlabelElement)}else this.options.supportIcons?Nn(this._mdlabelElement,...this.getContentElements(e)):this._mdlabelElement.textContent=e;let t="";typeof this.options.title=="string"?t=this.options.title:this.options.title&&(t=SS(e)),this.setTitle(t),this._setAriaLabel(),this._label=e}set icon(e){this._iconElement.classList.value="",this._iconElement.classList.add(...ze.asClassNameArray(e)),this._setAriaLabel()}}const Nq=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));mt(Nq);class pD extends ${constructor(e,t,n){super(),this.options=t,this.styles=n,this.count=0,this.hover=this._register(new vs),this.element=ie(e,_e(".monaco-count-badge")),this._register(fe(()=>e.removeChild(this.element))),this.countFormat=this.options.countFormat||"{0}",this.titleFormat=this.options.titleFormat||"",this.setCount(this.options.count||0),this.updateHover()}setCount(e){this.count=e,this.render()}setCountFormat(e){this.countFormat=e,this.render()}setTitleFormat(e){this.titleFormat=e,this.updateHover(),this.render()}updateHover(){this.titleFormat!==""&&!this.hover.value?this.hover.value=qs().setupDelayedHoverAtMouse(this.element,()=>({content:xo(this.titleFormat,this.count),appearance:{compact:!0}})):this.titleFormat===""&&this.hover.value&&(this.hover.value=void 0)}render(){this.element.textContent=xo(this.countFormat,this.count),this.element.style.backgroundColor=this.styles.badgeBackground??"",this.element.style.color=this.styles.badgeForeground??"",this.styles.badgeBorder&&(this.element.style.border=`1px solid ${this.styles.badgeBorder}`)}}const Rq=()=>({msLoopTime:-1,msDelayTime:-1,dispose:()=>{}});let a5=Rq;function Sse(i){a5=i}function Mq(i,e){return a5(i,e)}const Oq=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));mt(Oq);const A_="done",N_="active",Xg="infinite",Qg="infinite-long-running",R_="discrete";class Zm extends ${static{this.LONG_RUNNING_INFINITE_THRESHOLD=1e4}static{this.PROGRESS_SIGNAL_DEFAULT_DELAY=3e3}constructor(e,t){super(),this.progressSignal=this._register(new vs),this.workedVal=0,this.showDelayedScheduler=this._register(new Bs(()=>cm(this.element),0)),this.longRunningScheduler=this._register(new Bs(()=>this.infiniteLongRunning(),Zm.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=t?.progressBarBackground||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(N_,Xg,Qg,R_),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}done(){return this.doDone(!0)}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(A_),this.element.classList.contains(Xg)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(R_,A_,Qg),this.element.classList.add(N_,Xg),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(Qg)}total(e){return this.workedVal=0,this.totalWork=e,this.element.setAttribute("aria-valuemax",e.toString()),this}hasTotal(){return el(this.totalWork)}worked(e){return e=Math.max(1,Number(e)),this.doSetWorked(this.workedVal+e)}setWorked(e){return e=Math.max(1,Number(e)),this.doSetWorked(e)}doSetWorked(e){const t=this.totalWork||100;return this.workedVal=e,this.workedVal=Math.min(t,this.workedVal),this.element.classList.remove(Xg,Qg,A_),this.element.classList.add(N_,R_),this.element.setAttribute("aria-valuenow",e.toString()),this.bit.style.width=100*(this.workedVal/t)+"%",this}getContainer(){return this.element}show(e){this.showDelayedScheduler.cancel(),this.progressSignal.value=Mq(Zm.PROGRESS_SIGNAL_DEFAULT_DELAY),typeof e=="number"?this.showDelayedScheduler.schedule(e):cm(this.element)}hide(){hm(this.element),this.showDelayedScheduler.cancel(),this.progressSignal.clear()}}const Fq=d(11,"Match Case"),Pq=d(12,"Match Whole Word"),Bq=d(13,"Use Regular Expression");class Wq extends pu{constructor(e){super({icon:re.caseSensitive,title:Fq+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??ks("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Uq extends pu{constructor(e){super({icon:re.wholeWord,title:Pq+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??ks("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Hq extends pu{constructor(e){super({icon:re.regex,title:Bq+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??ks("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}}class Vq{constructor(e,t=0,n=e.length,s=t-1){this.items=e,this.start=t,this.end=n,this.index=s}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}}class zq{constructor(e=new Set,t=10){this._history=e,this._limit=t,this._onChange(),this._history.onDidChange&&(this._disposable=this._history.onDidChange(()=>this._onChange()))}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isFirst(){return this._currentPosition()===0}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}clear(){this._history.clear(),this._onChange()}_onChange(){this._reduceToLimit();const e=this._elements;this._navigator=new Vq(e,0,e.length,e.length)}_reduceToLimit(){const e=this._elements;if(e.length>this._limit){const t=e.slice(e.length-this._limit);this._history.replace?this._history.replace(t):this._history=new Set(t)}}_currentPosition(){const e=this._navigator.current();return e?this._elements.indexOf(e):-1}get _elements(){const e=[];return this._history.forEach(t=>e.push(t)),e}dispose(){this._disposable&&(this._disposable.dispose(),this._disposable=void 0)}}class kse{get size(){return this._size}constructor(e,t=10,n=s=>s){if(this.capacity=t,this.identityFn=n,e.length<1)throw new Error("not supported");this._size=1,this.head=this.tail=this.cursor={value:e[0],previous:void 0,next:void 0},this.valueSet=new mI([e[0]],n);for(let s=1;s<e.length;s++)this.add(e[s])}add(e){const t={value:e,previous:this.tail,next:void 0};for(this.tail.next=t,this.tail=t,this.cursor=this.tail,this._size++,this.valueSet.has(e)?this._deleteFromList(e):this.valueSet.add(e);this._size>this.capacity;)this.valueSet.delete(this.head.value),this.head=this.head.next,this.head.previous=void 0,this._size--}replaceLast(e){if(this.identityFn(this.tail.value)===this.identityFn(e))return e;const t=this.tail.value;return this.valueSet.delete(t),this.tail.value=e,this.valueSet.has(e)?this._deleteFromList(e):this.valueSet.add(e),t}prepend(e){if(this._size===this.capacity||this.valueSet.has(e))return;const t={value:e,previous:void 0,next:this.head};this.head.previous=t,this.head=t,this._size++,this.valueSet.add(e)}isAtEnd(){return this.cursor===this.tail}current(){return this.cursor.value}previous(){return this.cursor.previous&&(this.cursor=this.cursor.previous),this.cursor.value}next(){return this.cursor.next&&(this.cursor=this.cursor.next),this.cursor.value}has(e){return this.valueSet.has(e)}resetCursor(){return this.cursor=this.tail,this.cursor.value}*[Symbol.iterator](){let e=this.head;for(;e;)yield e.value,e=e.next}_deleteFromList(e){let t=this.head;const n=this.identityFn(e);for(;t!==this.tail;)this.identityFn(t.value)===n&&(t===this.head?(this.head=this.head.next,this.head.previous=void 0):(t.previous.next=t.next,t.next.previous=t.previous),this._size--),t=t.next}}const $q=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));mt($q);const Bu=_e;var Sn;(function(i){i[i.INFO=1]="INFO",i[i.WARNING=2]="WARNING",i[i.ERROR=3]="ERROR"})(Sn||(Sn={}));const qq={inputBackground:"#3C3C3C",inputForeground:"#CCCCCC",inputValidationInfoBorder:"#55AAFF",inputValidationInfoBackground:"#063B49",inputValidationWarningBorder:"#B89500",inputValidationWarningBackground:"#352A05",inputValidationErrorBorder:"#BE1100",inputValidationErrorBackground:"#5A1D1D",inputBorder:void 0,inputValidationErrorForeground:void 0,inputValidationInfoForeground:void 0,inputValidationWarningForeground:void 0};class Kq extends so{constructor(e,t,n){super(),this.state="idle",this.maxHeight=Number.POSITIVE_INFINITY,this.hover=this._register(new vs),this._onDidChange=this._register(new A),this.onDidChange=this._onDidChange.event,this._onDidHeightChange=this._register(new A),this.onDidHeightChange=this._onDidHeightChange.event,this.contextViewProvider=t,this.options=n,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=this.options.tooltip??(this.placeholder||""),this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=ie(e,Bu(".monaco-inputbox.idle"));const s=this.options.flexibleHeight?"textarea":"input",r=ie(this.element,Bu(".ibwrapper"));if(this.input=ie(r,Bu(s+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=ie(r,Bu("div.mirror")),this.mirror.innerText=" ",this.scrollableElement=new M3(this.element,{vertical:Nt.Auto}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),ie(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(l=>this.input.scrollTop=l.scrollTop));const o=this._register(new Ve(e.ownerDocument,"selectionchange")),a=W.filter(o.event,()=>e.ownerDocument.getSelection()?.anchorNode===r);this._register(a(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new Ql(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.hover.value||(this.hover.value=this._register(qs().setupDelayedHoverAtMouse(this.input,()=>({content:this.tooltip,appearance:{compact:!0}}))))}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get mirrorElement(){return this.mirror}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get step(){return this.input.step}set step(e){this.input.step=e}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:M0(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return il(this.input)}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){const e=this.input.selectionStart;if(e===null)return null;const t=this.input.selectionEnd??e;return{start:e,end:t}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}setEnabled(e){e?this.enable():this.disable()}get width(){return Yd(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){const n=parseFloat(this.mirror.style.paddingLeft||"")||0,s=parseFloat(this.mirror.style.paddingRight||"")||0;t=n+s}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;const e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){if(this.state==="open"&&Wi(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));const n=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${$o(n.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}isInputValid(){return!!this.validation&&!this.validation(this.value)}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e?.type}stylesForType(e){const t=this.options.inputBoxStyles;switch(e){case Sn.INFO:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case Sn.WARNING:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case Sn.INFO:return"info";case Sn.WARNING:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e;const t=()=>e.style.width=Yd(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:Oa.RIGHT,render:s=>{if(!this.message)return null;e=ie(s,Bu(".monaco-inputbox-container")),t();const r={inline:!0,className:"monaco-inputbox-message"},o=this.message.formatContent?xB(this.message.content,r):EB(this.message.content,r);o.classList.add(this.classForType(this.message.type));const a=this.stylesForType(this.message.type);return o.style.backgroundColor=a.background??"",o.style.color=a.foreground??"",o.style.border=a.border?`1px solid ${a.border}`:"",ie(e,o),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===Sn.ERROR?n=d(20,"Error: {0}",this.message.content):this.message.type===Sn.WARNING?n=d(21,"Warning: {0}",this.message.content):n=d(22,"Info: {0}",this.message.content),Yh(n),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;const e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";(e+n).replace(/\u000c/g,"")?this.mirror.textContent=e+n:this.mirror.innerText=" ",this.layout()}applyStyles(){const e=this.options.inputBoxStyles,t=e.inputBackground??"",n=e.inputForeground??"",s=e.inputBorder??"";this.element.style.backgroundColor=t,this.element.style.color=n,this.input.style.backgroundColor="inherit",this.input.style.color=n,this.element.style.border=`1px solid ${$o(s,"transparent")}`}layout(){if(!this.mirror)return;const e=this.cachedContentHeight;this.cachedContentHeight=M0(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){const t=this.inputElement,n=t.selectionStart,s=t.selectionEnd,r=t.value;n!==null&&s!==null&&(this.value=r.substr(0,n)+e+r.substr(s),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar?.dispose(),super.dispose()}}class Gq extends Kq{constructor(e,t,n){const s=d(23," or {0} for history","⇅"),r=d(24," ({0} for history)","⇅");super(e,t,n),this._onDidFocus=this._register(new A),this.onDidFocus=this._onDidFocus.event,this._onDidBlur=this._register(new A),this.onDidBlur=this._onDidBlur.event,this.history=this._register(new zq(n.history,100));const o=()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(s)&&!this.placeholder.endsWith(r)&&this.history.getHistory().length){const a=this.placeholder.endsWith(")")?s:r,l=this.placeholder+a;n.showPlaceholderOnFocus&&!il(this.input)?this.placeholder=l:this.setPlaceHolder(l)}};this.observer=new MutationObserver((a,l)=>{a.forEach(c=>{c.target.textContent||o()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>o()),this.onblur(this.input,()=>{const a=l=>{if(this.placeholder.endsWith(l)){const c=this.placeholder.slice(0,this.placeholder.length-l.length);return n.showPlaceholderOnFocus?this.placeholder=c:this.setPlaceHolder(c),!0}else return!1};a(r)||a(s)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}prependHistory(e){const t=this.getHistory();this.clearHistory(),e.forEach(n=>{this.history.add(n)}),t.forEach(n=>{this.history.add(n)})}getHistory(){return this.history.getHistory()}isAtFirstInHistory(){return this.history.isFirst()}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",Lm(this.value?this.value:d(25,"Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,Lm(this.value))}clearHistory(){this.history.clear()}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}}const jq=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));mt(jq);const Yq=d(10,"input");class l5 extends so{static{this.OPTION_CHANGE="optionChange"}constructor(e,t,n){super(),this.fixFocusOnOptionClickEnabled=!0,this.imeSessionInProgress=!1,this.additionalTogglesDisposables=this._register(new vs),this.additionalToggles=[],this._onDidOptionChange=this._register(new A),this.onDidOptionChange=this._onDidOptionChange.event,this._onKeyDown=this._register(new A),this.onKeyDown=this._onKeyDown.event,this._onMouseDown=this._register(new A),this.onMouseDown=this._onMouseDown.event,this._onInput=this._register(new A),this.onInput=this._onInput.event,this._onKeyUp=this._register(new A),this.onKeyUp=this._onKeyUp.event,this._onCaseSensitiveKeyDown=this._register(new A),this.onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event,this._onRegexKeyDown=this._register(new A),this.onRegexKeyDown=this._onRegexKeyDown.event,this._lastHighlightFindOptions=0,this.placeholder=n.placeholder||"",this.validation=n.validation,this.label=n.label||Yq,this.showCommonFindToggles=!!n.showCommonFindToggles;const s=n.appendCaseSensitiveLabel||"",r=n.appendWholeWordsLabel||"",o=n.appendRegexLabel||"",a=!!n.flexibleHeight,l=!!n.flexibleWidth,c=n.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new Gq(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},showHistoryHint:n.showHistoryHint,flexibleHeight:a,flexibleWidth:l,flexibleMaxHeight:c,inputBoxStyles:n.inputBoxStyles,history:n.history}));const h=this._register(J1());if(this.showCommonFindToggles){this.regex=this._register(new Hq({appendTitle:o,isChecked:!1,hoverDelegate:h,...n.toggleStyles})),this._register(this.regex.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(f=>{this._onRegexKeyDown.fire(f)})),this.wholeWords=this._register(new Uq({appendTitle:r,isChecked:!1,hoverDelegate:h,...n.toggleStyles})),this._register(this.wholeWords.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new Wq({appendTitle:s,isChecked:!1,hoverDelegate:h,...n.toggleStyles})),this._register(this.caseSensitive.onChange(f=>{this._onDidOptionChange.fire(f),!f&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(f=>{this._onCaseSensitiveKeyDown.fire(f)}));const u=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,f=>{if(f.equals(w.LeftArrow)||f.equals(w.RightArrow)||f.equals(w.Escape)){const g=u.indexOf(this.domNode.ownerDocument.activeElement);if(g>=0){let p=-1;f.equals(w.RightArrow)?p=(g+1)%u.length:f.equals(w.LeftArrow)&&(g===0?p=u.length-1:p=g-1),f.equals(w.Escape)?(u[g].blur(),this.inputBox.focus()):p>=0&&u[p].focus(),Re.stop(f,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(n?.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e?.appendChild(this.domNode),this._register(V(this.inputBox.inputElement,"compositionstart",u=>{this.imeSessionInProgress=!0})),this._register(V(this.inputBox.inputElement,"compositionend",u=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,u=>this._onKeyDown.fire(u)),this.onkeyup(this.inputBox.inputElement,u=>this._onKeyUp.fire(u)),this.oninput(this.inputBox.inputElement,u=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,u=>this._onMouseDown.fire(u))}get isImeSessionInProgress(){return this.imeSessionInProgress}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex?.enable(),this.wholeWords?.enable(),this.caseSensitive?.enable();for(const e of this.additionalToggles)e.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex?.disable(),this.wholeWords?.disable(),this.caseSensitive?.disable();for(const e of this.additionalToggles)e.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(const t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new X;for(const t of e??[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange(n=>{this._onDidOptionChange.fire(n),!n&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=(this.caseSensitive?.width()??0)+(this.wholeWords?.width()??0)+(this.regex?.width()??0)+this.additionalToggles.reduce((t,n)=>t+n.width(),0)}clear(){this.clearValidation(),this.setValue(""),this.focus()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}onSearchSubmit(){this.inputBox.addToHistory()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive?.checked??!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){return this.wholeWords?.checked??!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){return this.regex?.checked??!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){this.caseSensitive?.focus()}focusOnRegex(){this.regex?.focus()}highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}clearValidation(){this.inputBox.hideMessage()}}mt(ok);const Xq=_e;class Qq extends ${constructor(e,t,n){super(),this.parent=e,this.onDidChange=r=>this.findInput.onDidChange(r),this.container=ie(this.parent,Xq(".quick-input-box")),this.findInput=this._register(new l5(this.container,void 0,{label:"",inputBoxStyles:t,toggleStyles:n}));const s=this.findInput.inputBox.inputElement;s.role="textbox",s.ariaHasPopup="menu",s.ariaAutoComplete="list"}get onKeyDown(){return this.findInput.onKeyDown}get onMouseDown(){return this.findInput.onMouseDown}get value(){return this.findInput.getValue()}set value(e){this.findInput.setValue(e)}select(e=null){this.findInput.inputBox.select(e)}getSelection(){return this.findInput.inputBox.getSelection()}isSelectionAtEnd(){return this.findInput.inputBox.isSelectionAtEnd()}setPlaceholder(e){this.findInput.inputBox.setPlaceHolder(e)}get placeholder(){return this.findInput.inputBox.inputElement.getAttribute("placeholder")||""}set placeholder(e){this.findInput.inputBox.setPlaceHolder(e)}get password(){return this.findInput.inputBox.inputElement.type==="password"}set password(e){this.findInput.inputBox.inputElement.type=e?"password":"text"}set enabled(e){this.findInput.inputBox.inputElement.toggleAttribute("readonly",!e)}set toggles(e){this.findInput.setAdditionalToggles(e)}get ariaLabel(){return this.findInput.inputBox.inputElement.getAttribute("aria-label")||""}set ariaLabel(e){this.findInput.inputBox.inputElement.setAttribute("aria-label",e)}hasFocus(){return this.findInput.inputBox.hasFocus()}setAttribute(e,t){this.findInput.inputBox.inputElement.setAttribute(e,t)}removeAttribute(e){this.findInput.inputBox.inputElement.removeAttribute(e)}showDecoration(e){e===bt.Ignore?this.findInput.clearMessage():this.findInput.showMessage({type:e===bt.Info?Sn.INFO:e===bt.Warning?Sn.WARNING:Sn.ERROR,content:""})}stylesForType(e){return this.findInput.inputBox.stylesForType(e===bt.Info?Sn.INFO:e===bt.Warning?Sn.WARNING:Sn.ERROR)}setFocus(){this.findInput.focus()}layout(){this.findInput.inputBox.layout()}}const Zq=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));class Jl extends ${constructor(e,t){super(),this.options=t,this.text="",this.title="",this.highlights=[],this.didEverRender=!1,this.supportIcons=t?.supportIcons??!1,this.domNode=ie(e,_e("span.monaco-highlighted-label"))}get element(){return this.domNode}set(e,t=[],n="",s){e||(e=""),s&&(e=Jl.escapeNewLines(e,t)),!(this.didEverRender&&this.text===e&&this.title===n&&Wi(this.highlights,t))&&(this.text=e,this.title=n,this.highlights=t,this.render())}render(){const e=[];let t=0;for(const n of this.highlights){if(n.end===n.start)continue;if(t<n.start){const o=this.text.substring(t,n.start);this.supportIcons?e.push(...jl(o)):e.push(o),t=n.start}const s=this.text.substring(t,n.end),r=_e("span.highlight",void 0,...this.supportIcons?jl(s):[s]);n.extraClasses&&r.classList.add(...n.extraClasses),e.push(r),t=n.end}if(t<this.text.length){const n=this.text.substring(t);this.supportIcons?e.push(...jl(n)):e.push(n)}if(Nn(this.domNode,...e),this.options?.hoverDelegate?.showNativeHover)this.domNode.title=this.title;else if(!this.customHover&&this.title!==""){const n=this.options?.hoverDelegate??ks("mouse");this.customHover=this._register(qs().setupManagedHover(n,this.domNode,this.title))}else this.customHover&&this.customHover.update(this.title);this.didEverRender=!0}static escapeNewLines(e,t){let n=0,s=0;return e.replace(/\r\n|\r|\n/g,(r,o)=>{s=r===`\r
`?-1:0,o+=n;for(const a of t)a.end<=o||(a.start>=o&&(a.start+=s),a.end>=o&&(a.end+=s));return n+=s,"⏎"})}}mt(Zq);class Wu{constructor(e){this._element=e}get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set classNames(e){this.disposed||Wi(e,this._classNames)||(this._classNames=e,this._element.classList.value="",this._element.classList.add(...e))}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}}class mD extends ${constructor(e,t){super(),this.customHovers=new Map,this.creationOptions=t,this.domNode=this._register(new Wu(ie(e,_e(".monaco-icon-label")))),this.labelContainer=ie(this.domNode.element,_e(".monaco-icon-label-container")),this.nameContainer=ie(this.labelContainer,_e("span.monaco-icon-name-container")),t?.supportHighlights||t?.supportIcons?this.nameNode=this._register(new tK(this.nameContainer,!!t.supportIcons)):this.nameNode=new Jq(this.nameContainer),this.hoverDelegate=t?.hoverDelegate??ks("mouse")}get element(){return this.domNode.element}setLabel(e,t,n){const s=["monaco-icon-label"],r=["monaco-icon-label-container"];let o="";n&&(n.extraClasses&&s.push(...n.extraClasses),n.italic&&s.push("italic"),n.strikethrough&&s.push("strikethrough"),n.disabledCommand&&r.push("disabled"),n.title&&(typeof n.title=="string"?o+=n.title:o+=e));const a=this.domNode.element.querySelector(".monaco-icon-label-iconpath");if(n?.iconPath){let l;!a||!Ut(a)?(l=_e(".monaco-icon-label-iconpath"),this.domNode.element.prepend(l)):l=a,l.style.backgroundImage=pr(n?.iconPath),l.style.backgroundRepeat="no-repeat",l.style.backgroundPosition="center",l.style.backgroundSize="contain"}else a&&a.remove();if(this.domNode.classNames=s,this.domNode.element.setAttribute("aria-label",o),this.labelContainer.classList.value="",this.labelContainer.classList.add(...r),this.setupHover(n?.descriptionTitle?this.labelContainer:this.element,n?.title),this.nameNode.setLabel(e,n),t||this.descriptionNode){const l=this.getOrCreateDescriptionNode();l instanceof Jl?(l.set(t||"",n?n.descriptionMatches:void 0,void 0,n?.labelEscapeNewLines),this.setupHover(l.element,n?.descriptionTitle)):(l.textContent=t&&n?.labelEscapeNewLines?Jl.escapeNewLines(t,[]):t||"",this.setupHover(l.element,n?.descriptionTitle||""),l.empty=!t)}if(n?.suffix||this.suffixNode){const l=this.getOrCreateSuffixNode();l.textContent=n?.suffix??""}}setupHover(e,t){const n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}let s=e;if(this.creationOptions?.hoverTargetOverride){if(!Kt(e,this.creationOptions.hoverTargetOverride))throw new Error("hoverTargetOverrride must be an ancestor of the htmlElement");s=this.creationOptions.hoverTargetOverride}if(this.hoverDelegate.showNativeHover)(function(o,a){Bi(a)?o.title=qI(a):a?.markdownNotSupportedFallback?o.title=a.markdownNotSupportedFallback:o.removeAttribute("title")})(s,t);else{const r=qs().setupManagedHover(this.hoverDelegate,s,t);r&&this.customHovers.set(e,r)}}dispose(){super.dispose();for(const e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){const e=this._register(new Wu(_6(this.nameContainer,_e("span.monaco-icon-suffix-container"))));this.suffixNode=this._register(new Wu(ie(e.element,_e("span.label-suffix"))))}return this.suffixNode}getOrCreateDescriptionNode(){if(!this.descriptionNode){const e=this._register(new Wu(ie(this.labelContainer,_e("span.monaco-icon-description-container"))));this.creationOptions?.supportDescriptionHighlights?this.descriptionNode=this._register(new Jl(ie(e.element,_e("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new Wu(ie(e.element,_e("span.label-description"))))}return this.descriptionNode}}class Jq{constructor(e){this.container=e,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Wi(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=ie(this.container,_e("a.label-name",{id:t?.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){const s=e[n],r=t?.domId&&`${t?.domId}_${n}`;ie(this.container,_e("a.label-name",{id:r,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},s)),n<e.length-1&&ie(this.container,_e("span.label-separator",void 0,t?.separator||"/"))}}}}function eK(i,e,t){if(!t)return;let n=0;return i.map(s=>{const r={start:n,end:n+s.length},o=t.map(a=>Ni.intersect(r,a)).filter(a=>!Ni.isEmpty(a)).map(({start:a,end:l})=>({start:a-n,end:l-n}));return n=r.end+e.length,o})}class tK extends ${constructor(e,t){super(),this.container=e,this.supportIcons=t,this.label=void 0,this.singleLabel=void 0}setLabel(e,t){if(!(this.label===e&&Wi(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new Jl(ie(this.container,_e("a.label-name",{id:t?.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(e,t?.matches,void 0,t?.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;const n=t?.separator||"/",s=eK(e,n,t?.matches);for(let r=0;r<e.length;r++){const o=e[r],a=s?s[r]:void 0,l=t?.domId&&`${t?.domId}_${r}`,c=_e("a.label-name",{id:l,"data-icon-label-count":e.length,"data-icon-label-index":r,role:"treeitem"});this._register(new Jl(ie(this.container,c),{supportIcons:this.supportIcons})).set(o,a,void 0,t?.labelEscapeNewLines),r<e.length-1&&ie(c,_e("span.label-separator",void 0,n))}}}}const iK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));mt(iK);const Zg=_e,Cse={keybindingLabelBackground:void 0,keybindingLabelForeground:void 0,keybindingLabelBorder:void 0,keybindingLabelBottomBorder:void 0,keybindingLabelShadow:void 0};class ak extends ${constructor(e,t,n){super(),this.os=t,this.keyElements=new Set,this.options=n||Object.create(null);const s=this.options.keybindingLabelForeground;this.domNode=ie(e,Zg(".monaco-keybinding")),s&&(this.domNode.style.color=s),this.hover=this._register(qs().setupManagedHover(ks("mouse"),this.domNode,"")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&ak.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){const e=this.keybinding.getChords();e[0]&&this.renderChord(this.domNode,e[0],this.matches?this.matches.firstPart:null);for(let n=1;n<e.length;n++)ie(this.domNode,Zg("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,e[n],this.matches?this.matches.chordPart:null);const t=this.options.disableTitle??!1?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(t),this.domNode.setAttribute("aria-label",t||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){gr(this.domNode),this.keyElements.clear()}renderChord(e,t,n){const s=LS.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,s.ctrlKey,!!n?.ctrlKey,s.separator),t.shiftKey&&this.renderKey(e,s.shiftKey,!!n?.shiftKey,s.separator),t.altKey&&this.renderKey(e,s.altKey,!!n?.altKey,s.separator),t.metaKey&&this.renderKey(e,s.metaKey,!!n?.metaKey,s.separator);const r=t.keyLabel;r&&this.renderKey(e,r,!!n?.keyCode,"")}renderKey(e,t,n,s){ie(e,this.createKeyElement(t,n?".highlight":"")),s&&ie(e,Zg("span.monaco-keybinding-key-separator",void 0,s))}renderUnbound(e){ie(e,this.createKeyElement(d(26,"Unbound")))}createKeyElement(e,t=""){const n=Zg("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(n),this.options.keybindingLabelBackground&&(n.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(n.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(n.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(n.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),n}static areSame(e,t){return e===t||!e&&!t?!0:!!e&&!!t&&Wi(e.firstPart,t.firstPart)&&Wi(e.chordPart,t.chordPart)}}var Ye;(function(i){i[i.Hidden=0]="Hidden",i[i.Visible=1]="Visible",i[i.Recurse=2]="Recurse"})(Ye||(Ye={}));var Kn;(function(i){i[i.Expanded=0]="Expanded",i[i.Collapsed=1]="Collapsed",i[i.PreserveOrExpanded=2]="PreserveOrExpanded",i[i.PreserveOrCollapsed=3]="PreserveOrCollapsed"})(Kn||(Kn={}));var Vl;(function(i){i[i.Unknown=0]="Unknown",i[i.Twistie=1]="Twistie",i[i.Element=2]="Element",i[i.Filter=3]="Filter"})(Vl||(Vl={}));var cv;(function(i){i[i.Down=0]="Down",i[i.Up=1]="Up"})(cv||(cv={}));class Pi extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class lk{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}function tg(i){return!!i&&i.visibility!==void 0}function mc(i){switch(i){case!0:return Ye.Visible;case!1:return Ye.Hidden;default:return i}}function M_(i){return typeof i.collapsible=="boolean"}class nK{constructor(e,t,n={}){this.user=e,this.rootRef=[],this.eventBufferer=new Ef,this._onDidSpliceModel=new A,this.onDidSpliceModel=this._onDidSpliceModel.event,this._onDidSpliceRenderedNodes=new A,this.onDidSpliceRenderedNodes=this._onDidSpliceRenderedNodes.event,this._onDidChangeCollapseState=new A,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new A,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this.refilterDelayer=new Df(fT),this.collapseByDefault=typeof n.collapseByDefault>"u"?!1:n.collapseByDefault,this.allowNonCollapsibleParents=n.allowNonCollapsibleParents??!1,this.filter=n.filter,this.autoExpandSingleChildren=typeof n.autoExpandSingleChildren>"u"?!1:n.autoExpandSingleChildren,this.root={parent:void 0,element:t,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:Ye.Visible,visible:!0,filterData:void 0}}splice(e,t,n=Be.empty(),s={}){if(e.length===0)throw new Pi(this.user,"Invalid tree location");s.diffIdentityProvider?this.spliceSmart(s.diffIdentityProvider,e,t,n,s):this.spliceSimple(e,t,n,s)}spliceSmart(e,t,n,s=Be.empty(),r,o=r.diffDepth??0){const{parentNode:a}=this.getParentNodeWithListIndex(t);if(!a.lastDiffIds)return this.spliceSimple(t,n,s,r);const l=[...s],c=t[t.length-1],h=new No({getElements:()=>a.lastDiffIds},{getElements:()=>[...a.children.slice(0,c),...l,...a.children.slice(c+n)].map(m=>e.getId(m.element).toString())}).ComputeDiff(!1);if(h.quitEarly)return a.lastDiffIds=void 0,this.spliceSimple(t,n,l,r);const u=t.slice(0,-1),f=(m,_,v)=>{if(o>0)for(let y=0;y<v;y++)m--,_--,this.spliceSmart(e,[...u,m,0],Number.MAX_SAFE_INTEGER,l[_].children,r,o-1)};let g=Math.min(a.children.length,c+n),p=l.length;for(const m of h.changes.sort((_,v)=>v.originalStart-_.originalStart))f(g,p,g-(m.originalStart+m.originalLength)),g=m.originalStart,p=m.modifiedStart-c,this.spliceSimple([...u,g],m.originalLength,Be.slice(l,p,p+m.modifiedLength),r);f(g,p,g)}spliceSimple(e,t,n=Be.empty(),{onDidCreateNode:s,onDidDeleteNode:r,diffIdentityProvider:o}){const{parentNode:a,listIndex:l,revealed:c,visible:h}=this.getParentNodeWithListIndex(e),u=[],f=Be.map(n,I=>this.createTreeNode(I,a,a.visible?Ye.Visible:Ye.Hidden,c,u,s)),g=e[e.length-1];let p=0;for(let I=g;I>=0&&I<a.children.length;I--){const B=a.children[I];if(B.visible){p=B.visibleChildIndex;break}}const m=[];let _=0,v=0;for(const I of f)m.push(I),v+=I.renderNodeCount,I.visible&&(I.visibleChildIndex=p+_++);const y=Pp(a.children,g,t,m);o?a.lastDiffIds?Pp(a.lastDiffIds,g,t,m.map(I=>o.getId(I.element).toString())):a.lastDiffIds=a.children.map(I=>o.getId(I.element).toString()):a.lastDiffIds=void 0;let E=0;for(const I of y)I.visible&&E++;if(E!==0)for(let I=g+m.length;I<a.children.length;I++){const B=a.children[I];B.visible&&(B.visibleChildIndex-=E)}if(a.visibleChildrenCount+=_-E,y.length>0&&r){const I=B=>{r(B),B.children.forEach(I)};y.forEach(I)}if(c&&h){const I=y.reduce((B,x)=>B+(x.visible?x.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,v-I),this._onDidSpliceRenderedNodes.fire({start:l,deleteCount:I,elements:u})}this._onDidSpliceModel.fire({insertedNodes:m,deletedNodes:y});let N=a;for(;N;){if(N.visibility===Ye.Recurse){this.refilterDelayer.trigger(()=>this.refilter());break}N=N.parent}}rerender(e){if(e.length===0)throw new Pi(this.user,"Invalid tree location");const{node:t,listIndex:n,revealed:s}=this.getTreeNodeWithListIndex(e);t.visible&&s&&this._onDidSpliceRenderedNodes.fire({start:n,deleteCount:1,elements:[t]})}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:n,revealed:s}=this.getTreeNodeWithListIndex(e);return n&&s?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsible);const s={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,s))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){const s=this.getTreeNode(e);typeof t>"u"&&(t=!s.collapsed);const r={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,r))}_setCollapseState(e,t){const{node:n,listIndex:s,revealed:r}=this.getTreeNodeWithListIndex(e),o=this._setListNodeCollapseState(n,s,r,t);if(n!==this.root&&this.autoExpandSingleChildren&&o&&!M_(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let l=0;l<n.children.length;l++)if(n.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return o}_setListNodeCollapseState(e,t,n,s){const r=this._setNodeCollapseState(e,s,!1);if(!n||!e.visible||!r)return r;const o=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=o-(t===-1?0:1);return this._onDidSpliceRenderedNodes.fire({start:t+1,deleteCount:l,elements:a.slice(1)}),r}_setNodeCollapseState(e,t,n){let s;if(e===this.root?s=!1:(M_(t)?(s=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(s=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):s=!1,s&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!M_(t)&&t.recursive)for(const r of e.children)s=this._setNodeCollapseState(r,t,!0)||s;return s}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this._onDidSpliceRenderedNodes.fire({start:0,deleteCount:e,elements:t}),this.refilterDelayer.cancel()}createTreeNode(e,t,n,s,r,o){const a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:Ye.Visible,visible:!0,filterData:void 0},l=this._filterNode(a,n);a.visibility=l,s&&r.push(a);const c=e.children||Be.empty(),h=s&&l!==Ye.Hidden&&!a.collapsed;let u=0,f=1;for(const g of c){const p=this.createTreeNode(g,a,l,h,r,o);a.children.push(p),f+=p.renderNodeCount,p.visible&&(p.visibleChildIndex=u++)}return this.allowNonCollapsibleParents||(a.collapsible=a.collapsible||a.children.length>0),a.visibleChildrenCount=u,a.visible=l===Ye.Recurse?u>0:l===Ye.Visible,a.visible?a.collapsed||(a.renderNodeCount=f):(a.renderNodeCount=0,s&&r.pop()),o?.(a),a}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?Ye.Visible:Ye.Hidden,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,s=!0){let r;if(e!==this.root){if(r=this._filterNode(e,t),r===Ye.Hidden)return e.visible=!1,e.renderNodeCount=0,!1;s&&n.push(e)}const o=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||r!==Ye.Hidden){let l=0;for(const c of e.children)a=this._updateNodeAfterFilterChange(c,r,n,s&&!e.collapsed)||a,c.visible&&(c.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=r===Ye.Recurse?a:r===Ye.Visible,e.visibility=r),e.visible?e.collapsed||(e.renderNodeCount+=n.length-o):(e.renderNodeCount=0,s&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const n=this.filter?this.filter.filter(e.element,t):Ye.Visible;return typeof n=="boolean"?(e.filterData=void 0,n?Ye.Visible:Ye.Hidden):tg(n)?(e.filterData=n.data,mc(n.visibility)):(e.filterData=void 0,mc(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;const[n,...s]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(s,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;const[n,...s]=e;if(n<0||n>t.children.length)throw new Pi(this.user,"Invalid tree location");return this.getTreeNode(s,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:n,revealed:s,visible:r}=this.getParentNodeWithListIndex(e),o=e[e.length-1];if(o<0||o>t.children.length)throw new Pi(this.user,"Invalid tree location");const a=t.children[o];return{node:a,listIndex:n,revealed:s,visible:r&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,s=!0,r=!0){const[o,...a]=e;if(o<0||o>t.children.length)throw new Pi(this.user,"Invalid tree location");for(let l=0;l<o;l++)n+=t.children[l].renderNodeCount;return s=s&&!t.collapsed,r=r&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:s,visible:r}:this.getParentNodeWithListIndex(a,t.children[o],n+1,s,r)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:xR(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}getLastElementAncestor(e=[]){const t=this.getTreeNode(e);if(t.children.length!==0)return this._getLastElementAncestor(t)}_getLastElementAncestor(e){return e.children.length===0?e.element:this._getLastElementAncestor(e.children[e.children.length-1])}}const sK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));mt(sK);class rK extends Kf{set context(e){this.data.context=e}get context(){return this.data.context}constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function O_(i){return i instanceof Kf?new rK(i):i}class oK{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=$.None,this.disposables=new X}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart?.(O_(e),t)}onDragOver(e,t,n,s,r,o=!0){const a=this.dnd.onDragOver(O_(e),t&&t.element,n,s,r),l=this.autoExpandNode!==t;if(l&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return a;if(l&&typeof a!="boolean"&&a.autoExpand&&(this.autoExpandDisposable=em(()=>{const g=this.modelProvider(),p=g.getNodeLocation(t);g.isCollapsed(p)&&g.setCollapsed(p,!1),this.autoExpandNode=void 0},500,this.disposables)),typeof a=="boolean"||!a.accept||typeof a.bubble>"u"||a.feedback){if(!o){const g=typeof a=="boolean"?a:a.accept,p=typeof a=="boolean"?void 0:a.effect;return{accept:g,effect:p,feedback:[n]}}return a}if(a.bubble===cv.Up){const g=this.modelProvider(),p=g.getNodeLocation(t),m=g.getParentNodeLocation(p),_=g.getNode(m),v=m&&g.getListIndex(m);return this.onDragOver(e,_,v,s,r,!1)}const c=this.modelProvider(),h=c.getNodeLocation(t),u=c.getListIndex(h),f=c.getListRenderCount(h);return{...a,feedback:un(u,u+f)}}drop(e,t,n,s,r){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(O_(e),t&&t.element,n,s,r)}onDragEnd(e){this.dnd.onDragEnd?.(e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}}function aK(i,e,t){return t&&{...t,identityProvider:t.identityProvider&&{getId(n){return t.identityProvider.getId(n.element)}},dnd:t.dnd&&e.add(new oK(i,t.dnd)),multipleSelectionController:t.multipleSelectionController&&{isSelectionSingleChangeEvent(n){return t.multipleSelectionController.isSelectionSingleChangeEvent({...n,element:n.element})},isSelectionRangeChangeEvent(n){return t.multipleSelectionController.isSelectionRangeChangeEvent({...n,element:n.element})}},accessibilityProvider:t.accessibilityProvider&&{...t.accessibilityProvider,getSetSize(n){const s=i(),r=s.getNodeLocation(n),o=s.getParentNodeLocation(r);return s.getNode(o).visibleChildrenCount},getPosInSet(n){return n.visibleChildIndex+1},isChecked:t.accessibilityProvider&&t.accessibilityProvider.isChecked?n=>t.accessibilityProvider.isChecked(n.element):void 0,getRole:t.accessibilityProvider&&t.accessibilityProvider.getRole?n=>t.accessibilityProvider.getRole(n.element):()=>"treeitem",getAriaLabel(n){return t.accessibilityProvider.getAriaLabel(n.element)},getWidgetAriaLabel(){return t.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:t.accessibilityProvider&&t.accessibilityProvider.getWidgetRole?()=>t.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:t.accessibilityProvider&&t.accessibilityProvider.getAriaLevel?n=>t.accessibilityProvider.getAriaLevel(n.element):n=>n.depth,getActiveDescendantId:t.accessibilityProvider.getActiveDescendantId&&(n=>t.accessibilityProvider.getActiveDescendantId(n.element))},keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{...t.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(n){return t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(n.element)}}}}class ck{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight?.(e.element,t)}}class Id{static lift(e){return e instanceof Id?e:new Id(e)}static empty(e=0){return new Id({focus:[],selection:[],expanded:Object.create(null),scrollTop:e})}constructor(e){if(this.focus=new Set(e.focus),this.selection=new Set(e.selection),e.expanded instanceof Array){this.expanded=Object.create(null);for(const t of e.expanded)this.expanded[t]=1}else this.expanded=e.expanded;this.expanded=e.expanded,this.scrollTop=e.scrollTop}toJSON(){return{focus:Array.from(this.focus),selection:Array.from(this.selection),expanded:this.expanded,scrollTop:this.scrollTop}}}var iu;(function(i){i.None="none",i.OnHover="onHover",i.Always="always"})(iu||(iu={}));class lK{get elements(){return this._elements}constructor(e,t=[]){this._elements=t,this.disposables=new X,this.onDidChange=W.forEach(e,n=>this._elements=n,this.disposables)}dispose(){this.disposables.dispose()}}class Td{static{this.DefaultIndent=8}constructor(e,t,n,s,r,o={}){this.renderer=e,this.model=t,this.activeNodes=s,this.renderedIndentGuides=r,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=Td.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.activeIndentNodes=new Set,this.indentGuidesDisposable=$.None,this.disposables=new X,this.templateId=e.templateId,this.updateOptions(o),W.map(n,a=>a.node)(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState?.(this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(typeof e.indent<"u"){const t=pn(e.indent,0,40);if(t!==this.indent){this.indent=t;for(const[n,s]of this.renderedNodes)s.indentSize=Td.DefaultIndent+(n.depth-1)*this.indent,this.renderTreeElement(n,s)}}if(typeof e.renderIndentGuides<"u"){const t=e.renderIndentGuides!==iu.None;if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(const[n,s]of this.renderedNodes)this._renderIndentGuides(n,s);if(this.indentGuidesDisposable.dispose(),t){const n=new X;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=ie(e,_e(".monaco-tl-row")),n=ie(t,_e(".monaco-tl-indent")),s=ie(t,_e(".monaco-tl-twistie")),r=ie(t,_e(".monaco-tl-contents")),o=this.renderer.renderTemplate(r);return{container:e,indent:n,twistie:s,indentGuidesDisposable:$.None,indentSize:0,templateData:o}}renderElement(e,t,n,s){n.indentSize=Td.DefaultIndent+(e.depth-1)*this.indent,this.renderedNodes.set(e,n),this.renderedElements.set(e.element,e),this.renderTreeElement(e,n),this.renderer.renderElement(e,t,n.templateData,{...s,indent:n.indentSize})}disposeElement(e,t,n,s){n.indentGuidesDisposable.dispose(),this.renderer.disposeElement?.(e,t,n.templateData,{...s,indent:n.indentSize}),typeof s?.height=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){t.twistie.style.paddingLeft=`${t.indentSize}px`,t.indent.style.width=`${t.indentSize+this.indent-16}px`,e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...ze.asClassNameArray(re.treeItemExpanded));let n=!1;this.renderer.renderTwistie&&(n=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(n||t.twistie.classList.add(...ze.asClassNameArray(re.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(gr(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const n=new X;for(;;){const s=this.model.getNodeLocation(e),r=this.model.getParentNodeLocation(s);if(!r)break;const o=this.model.getNode(r),a=_e(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(o)&&a.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(a):t.indent.insertBefore(a,t.indent.firstElementChild),this.renderedIndentGuides.add(o,a),n.add(fe(()=>this.renderedIndentGuides.delete(o,a))),e=o}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set;e.forEach(n=>{const s=this.model.getNodeLocation(n);try{const r=this.model.getParentNodeLocation(s);n.collapsible&&n.children.length>0&&!n.collapsed?t.add(n):r&&t.add(this.model.getNode(r))}catch{}}),this.activeIndentNodes.forEach(n=>{t.has(n)||this.renderedIndentGuides.forEach(n,s=>s.classList.remove("active"))}),t.forEach(n=>{this.activeIndentNodes.has(n)||this.renderedIndentGuides.forEach(n,s=>s.classList.add("active"))}),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),ai(this.disposables)}}function cK(i,e){const t=e.toLowerCase().indexOf(i);let n;if(t>-1){n=[Number.MAX_SAFE_INTEGER,0];for(let s=i.length;s>0;s--)n.push(t+s-1)}return n}class c5{get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}set findMatchType(e){this._findMatchType=e}get findMatchType(){return this._findMatchType}set findMode(e){this._findMode=e}get findMode(){return this._findMode}set pattern(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()}constructor(e,t,n){this._keyboardNavigationLabelProvider=e,this._filter=t,this._defaultFindVisibility=n,this._totalCount=0,this._matchCount=0,this._findMatchType=Xn.Fuzzy,this._findMode=Xi.Highlight,this._pattern="",this._lowercasePattern="",this.disposables=new X}filter(e,t){let n=Ye.Visible;if(this._filter){const o=this._filter.filter(e,t);if(typeof o=="boolean"?n=o?Ye.Visible:Ye.Hidden:tg(o)?n=mc(o.visibility):n=o,n===Ye.Hidden)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:Va.Default,visibility:n};const s=this._keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),r=Array.isArray(s)?s:[s];for(const o of r){const a=o&&o.toString();if(typeof a>"u")return{data:Va.Default,visibility:n};let l;if(this._findMatchType===Xn.Contiguous?l=cK(this._lowercasePattern,a.toLowerCase()):l=Wd(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0}),l)return this._matchCount++,r.length===1?{data:l,visibility:n}:{data:{label:a,score:l},visibility:n}}return this._findMode===Xi.Filter?typeof this._defaultFindVisibility=="number"?this._defaultFindVisibility:this._defaultFindVisibility?this._defaultFindVisibility(e):Ye.Recurse:{data:Va.Default,visibility:n}}reset(){this._totalCount=0,this._matchCount=0}dispose(){ai(this.disposables)}}class hK extends pu{constructor(e,t,n){super({icon:e.icon,title:e.title,isChecked:e.isChecked,inputActiveOptionBorder:t.inputActiveOptionBorder,inputActiveOptionForeground:t.inputActiveOptionForeground,inputActiveOptionBackground:t.inputActiveOptionBackground,hoverDelegate:n}),this.id=e.id}}class uK{constructor(e){this.stateMap=new Map(e.map(t=>[t.id,{...t}]))}states(){return Array.from(this.stateMap.values())}get(e){const t=this.stateMap.get(e);if(t===void 0)throw new Error(`No state found for toggle id ${e}`);return t.isChecked}set(e,t){const n=this.stateMap.get(e);if(n===void 0)throw new Error(`No state found for toggle id ${e}`);return n.isChecked===t?!1:(n.isChecked=t,!0)}}const dK={inputBoxStyles:qq,toggleStyles:i5,listFilterWidgetBackground:void 0,listFilterWidgetShadow:void 0};var Xi;(function(i){i[i.Highlight=0]="Highlight",i[i.Filter=1]="Filter"})(Xi||(Xi={}));var Xn;(function(i){i[i.Fuzzy=0]="Fuzzy",i[i.Contiguous=1]="Contiguous"})(Xn||(Xn={}));class fK extends ${get value(){return this.findInput.inputBox.value}set value(e){this.findInput.inputBox.value=e}constructor(e,t,n,s,r=[],o){super(),this.tree=t,this.elements=i_(".monaco-tree-type-filter",[i_(".monaco-tree-type-filter-input@findInput"),i_(".monaco-tree-type-filter-actionbar@actionbar")]),this.toggles=[],this._onDidDisable=new A,this.onDidDisable=this._onDidDisable.event,e.appendChild(this.elements.root),this._register(fe(()=>this.elements.root.remove()));const a=o?.styles??dK;a.listFilterWidgetBackground&&(this.elements.root.style.backgroundColor=a.listFilterWidgetBackground),a.listFilterWidgetShadow&&(this.elements.root.style.boxShadow=`0 0 8px 2px ${a.listFilterWidgetShadow}`);const l=this._register(J1());this.toggles=r.map(g=>this._register(new hK(g,a.toggleStyles,l))),this.onDidToggleChange=W.any(...this.toggles.map(g=>W.map(g.onChange,()=>({id:g.id,isChecked:g.checked}))));const c=o?.history||[];this.findInput=this._register(new l5(this.elements.findInput,n,{label:d(32,"Type to search"),placeholder:s,additionalToggles:this.toggles,showCommonFindToggles:!1,inputBoxStyles:a.inputBoxStyles,toggleStyles:a.toggleStyles,history:new Set(c)})),this.actionbar=this._register(new Ql(this.elements.actionbar));const h=this._register(new Ve(this.findInput.inputBox.inputElement,"keydown")),u=W.chain(h.event,g=>g.map(p=>new at(p)));this._register(u(g=>{if(g.equals(w.Enter)){g.preventDefault(),g.stopPropagation(),this.findInput.inputBox.addToHistory(),this.tree.domFocus();return}if(g.equals(w.DownArrow)){g.preventDefault(),g.stopPropagation(),this.findInput.inputBox.isAtLastInHistory()||this.findInput.inputBox.isNowhereInHistory()?(this.findInput.inputBox.addToHistory(),this.tree.domFocus()):this.findInput.inputBox.showNextValue();return}if(g.equals(w.UpArrow)){g.preventDefault(),g.stopPropagation(),this.findInput.inputBox.showPreviousValue();return}}));const f=this._register(new Q1("close",d(33,"Close"),"codicon codicon-close",!0,()=>this.dispose()));this.actionbar.push(f,{icon:!0,label:!1}),this.onDidChangeValue=this.findInput.onDidChange}setToggleState(e,t){const n=this.toggles.find(s=>s.id===e);n&&(n.checked=t)}setPlaceHolder(e){this.findInput.inputBox.setPlaceHolder(e)}getHistory(){return this.findInput.inputBox.getHistory()}focus(){this.findInput.focus()}select(){this.findInput.select(),this.findInput.inputBox.addToHistory(!0)}showMessage(e){this.findInput.showMessage(e)}clearMessage(){this.findInput.clearMessage()}async dispose(){this._onDidDisable.fire(),this.elements.root.classList.add("disabled"),await sc(300),super.dispose()}}var Tr;(function(i){i.Mode="mode",i.MatchType="matchType"})(Tr||(Tr={}));class gK{get pattern(){return this._pattern}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.widget?.setPlaceHolder(e)}constructor(e,t,n,s={}){this.tree=e,this.filter=t,this.contextViewProvider=n,this.options=s,this._pattern="",this.previousPattern="",this._onDidChangePattern=new A,this.onDidChangePattern=this._onDidChangePattern.event,this._onDidChangeOpenState=new A,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new X,this.disposables=new X,this.toggles=new uK(s.toggles??[]),this._placeholder=s.placeholder??d(32,"Type to search")}isOpened(){return!!this.widget}open(){if(this.widget){this.widget.focus(),this.widget.select();return}this.tree.updateOptions({paddingTop:30}),this.widget=new fK(this.tree.getHTMLElement(),this.tree,this.contextViewProvider,this.placeholder,this.toggles.states(),{...this.options,history:this._history}),this.enabledDisposables.add(this.widget),this.widget.onDidChangeValue(this.onDidChangeValue,this,this.enabledDisposables),this.widget.onDidDisable(this.close,this,this.enabledDisposables),this.widget.onDidToggleChange(this.onDidToggleChange,this,this.enabledDisposables),this.widget.focus(),this.widget.value=this.previousPattern,this.widget.select(),this._onDidChangeOpenState.fire(!0)}close(){this.widget&&(this.tree.updateOptions({paddingTop:0}),this._history=this.widget.getHistory(),this.widget=void 0,this.enabledDisposables.clear(),this.previousPattern=this.pattern,this.onDidChangeValue(""),this.tree.domFocus(),this._onDidChangeOpenState.fire(!1))}onDidChangeValue(e){this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.applyPattern(e)}onDidToggleChange(e){this.toggles.set(e.id,e.isChecked)}updateToggleState(e,t){this.toggles.set(e,t),this.widget?.setToggleState(e,t)}renderMessage(e,t){e?this.tree.options.showNotFoundMessage??!0?this.widget?.showMessage({type:Sn.WARNING,content:t??d(34,"No results found.")}):this.widget?.showMessage({type:Sn.WARNING}):this.widget?.clearMessage()}alertResults(e){Yh(e?d(36,"{0} results",e):d(35,"No results"))}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class h5 extends gK{get mode(){return this.toggles.get(Tr.Mode)?Xi.Filter:Xi.Highlight}set mode(e){if(e===this.mode)return;const t=e===Xi.Filter;this.updateToggleState(Tr.Mode,t),this.placeholder=t?d(37,"Type to filter"):d(32,"Type to search"),this.filter.findMode=e,this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e)}get matchType(){return this.toggles.get(Tr.MatchType)?Xn.Fuzzy:Xn.Contiguous}set matchType(e){e!==this.matchType&&(this.updateToggleState(Tr.MatchType,e===Xn.Fuzzy),this.filter.findMatchType=e,this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}constructor(e,t,n,s={}){const r=s.defaultFindMode??Xi.Highlight,o=s.defaultFindMatchType??Xn.Fuzzy,a=[{id:Tr.Mode,icon:re.listFilter,title:d(38,"Filter"),isChecked:r===Xi.Filter},{id:Tr.MatchType,icon:re.searchFuzzy,title:d(39,"Fuzzy Match"),isChecked:o===Xn.Fuzzy}];t.findMatchType=o,t.findMode=r,super(e,t,n,{...s,toggles:a}),this.filter=t,this._onDidChangeMode=new A,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangeMatchType=new A,this.onDidChangeMatchType=this._onDidChangeMatchType.event,this.disposables.add(this.tree.onDidChangeModel(()=>{this.isOpened()&&(this.pattern.length!==0&&this.tree.refilter(),this.render())})),this.disposables.add(this.tree.onWillRefilter(()=>this.filter.reset()))}updateOptions(e={}){e.defaultFindMode!==void 0&&(this.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.matchType=e.defaultFindMatchType)}applyPattern(e){this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,n=>!Va.isDefault(n.filterData));const t=this.tree.getFocus();if(t.length>0){const n=t[0];this.tree.getRelativeTop(n)===null&&this.tree.reveal(n,.5)}this.render()}shouldAllowFocus(e){return!this.isOpened()||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!Va.isDefault(e.filterData)}onDidToggleChange(e){e.id===Tr.Mode?this.mode=e.isChecked?Xi.Filter:Xi.Highlight:e.id===Tr.MatchType&&(this.matchType=e.isChecked?Xn.Fuzzy:Xn.Contiguous)}render(){const t=this.filter.matchCount===0&&this.filter.totalCount>0&&this.pattern.length>0;this.renderMessage(t),this.pattern.length&&this.alertResults(this.filter.matchCount)}}function pK(i,e){return i.position===e.position&&u5(i,e)}function u5(i,e){return i.node.element===e.node.element&&i.startIndex===e.startIndex&&i.height===e.height&&i.endIndex===e.endIndex}class mK{constructor(e=[]){this.stickyNodes=e}get count(){return this.stickyNodes.length}equal(e){return wi(this.stickyNodes,e.stickyNodes,pK)}contains(e){return this.stickyNodes.some(t=>t.node.element===e.element)}lastNodePartiallyVisible(){if(this.count===0)return!1;const e=this.stickyNodes[this.count-1];if(this.count===1)return e.position!==0;const t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!wi(this.stickyNodes,e.stickyNodes,u5)||this.count===0)return!1;const t=this.stickyNodes[this.count-1],n=e.stickyNodes[e.count-1];return t.position!==n.position}}class bK{constrainStickyScrollNodes(e,t,n){for(let s=0;s<e.length;s++){const r=e[s];if(r.position+r.height>n||s>=t)return e.slice(0,s)}return e}}class bD extends ${constructor(e,t,n,s,r,o={}){super(),this.tree=e,this.model=t,this.view=n,this.treeDelegate=r,this.maxWidgetViewRatio=.4;const a=this.validateStickySettings(o);this.stickyScrollMaxItemCount=a.stickyScrollMaxItemCount,this.stickyScrollDelegate=o.stickyScrollDelegate??new bK,this.paddingTop=o.paddingTop??0,this._widget=this._register(new _K(n.getScrollableElement(),n,e,s,r,o.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(n.onDidScroll(()=>this.update())),this._register(n.onDidChangeContentHeight(()=>this.update())),this._register(e.onDidChangeCollapseState(()=>this.update())),this._register(t.onDidSpliceRenderedNodes(l=>{const c=this._widget.state;if(!c)return;if(l.deleteCount>0&&c.stickyNodes.some(f=>!this.model.has(this.model.getNodeLocation(f.node)))){this.update();return}c.stickyNodes.some(f=>{const g=this.model.getListIndex(this.model.getNodeLocation(f.node));return g>=l.start&&g<l.start+l.deleteCount&&c.contains(f.node)})&&this._widget.rerender()})),this.update()}get height(){return this._widget.height}get count(){return this._widget.count}getNode(e){return this._widget.getNode(e)}getNodeAtHeight(e){let t;if(e===0?t=this.view.firstVisibleIndex:t=this.view.indexAt(e+this.view.scrollTop),!(t<0||t>=this.view.length))return this.view.element(t)}update(){const e=this.getNodeAtHeight(this.paddingTop);if(!e||this.tree.scrollTop<=this.paddingTop){this._widget.setState(void 0);return}const t=this.findStickyState(e);this._widget.setState(t)}findStickyState(e){const t=[];let n=e,s=0,r=this.getNextStickyNode(n,void 0,s);for(;r&&(t.push(r),s+=r.height,!(t.length<=this.stickyScrollMaxItemCount&&(n=this.getNextVisibleNode(r),!n)));)r=this.getNextStickyNode(n,r.node,s);const o=this.constrainStickyNodes(t);return o.length?new mK(o):void 0}getNextVisibleNode(e){return this.getNodeAtHeight(e.position+e.height)}getNextStickyNode(e,t,n){const s=this.getAncestorUnderPrevious(e,t);if(s&&!(s===e&&(!this.nodeIsUncollapsedParent(e)||this.nodeTopAlignsWithStickyNodesBottom(e,n))))return this.createStickyScrollNode(s,n)}nodeTopAlignsWithStickyNodesBottom(e,t){const n=this.getNodeIndex(e),s=this.view.getElementTop(n),r=t;return this.view.scrollTop===s-r}createStickyScrollNode(e,t){const n=this.treeDelegate.getHeight(e),{startIndex:s,endIndex:r}=this.getNodeRange(e),o=this.calculateStickyNodePosition(r,t,n);return{node:e,position:o,height:n,startIndex:s,endIndex:r}}getAncestorUnderPrevious(e,t=void 0){let n=e,s=this.getParentNode(n);for(;s;){if(s===t)return n;n=s,s=this.getParentNode(n)}if(t===void 0)return n}calculateStickyNodePosition(e,t,n){let s=this.view.getRelativeTop(e);if(s===null&&this.view.firstVisibleIndex===e&&e+1<this.view.length){const c=this.treeDelegate.getHeight(this.view.element(e)),h=this.view.getRelativeTop(e+1);s=h?h-c/this.view.renderHeight:null}if(s===null)return t;const r=this.view.element(e),o=this.treeDelegate.getHeight(r),l=s*this.view.renderHeight+o;return t+n>l&&t<=l?l-n:t}constrainStickyNodes(e){if(e.length===0)return[];const t=this.view.renderHeight*this.maxWidgetViewRatio,n=e[e.length-1];if(e.length<=this.stickyScrollMaxItemCount&&n.position+n.height<=t)return e;const s=this.stickyScrollDelegate.constrainStickyScrollNodes(e,this.stickyScrollMaxItemCount,t);if(!s.length)return[];const r=s[s.length-1];if(s.length>this.stickyScrollMaxItemCount||r.position+r.height>t)throw new Error("stickyScrollDelegate violates constraints");return s}getParentNode(e){const t=this.model.getNodeLocation(e),n=this.model.getParentNodeLocation(t);return n?this.model.getNode(n):void 0}nodeIsUncollapsedParent(e){const t=this.model.getNodeLocation(e);return this.model.getListRenderCount(t)>1}getNodeIndex(e){const t=this.model.getNodeLocation(e);return this.model.getListIndex(t)}getNodeRange(e){const t=this.model.getNodeLocation(e),n=this.model.getListIndex(t);if(n<0)throw new Error("Node not found in tree");const s=this.model.getListRenderCount(t),r=n+s-1;return{startIndex:n,endIndex:r}}nodePositionTopBelowWidget(e){const t=[];let n=this.getParentNode(e);for(;n;)t.push(n),n=this.getParentNode(n);let s=0;for(let r=0;r<t.length&&r<this.stickyScrollMaxItemCount;r++)s+=this.treeDelegate.getHeight(t[r]);return s}getFocus(){return this._widget.getFocus()}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(e={}){if(e.paddingTop!==void 0&&(this.paddingTop=e.paddingTop),e.stickyScrollMaxItemCount!==void 0){const t=this.validateStickySettings(e);this.stickyScrollMaxItemCount!==t.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=t.stickyScrollMaxItemCount,this.update())}}validateStickySettings(e){let t=7;return typeof e.stickyScrollMaxItemCount=="number"&&(t=Math.max(e.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:t}}}class _K{get state(){return this._previousState}constructor(e,t,n,s,r,o){this.view=t,this.tree=n,this.treeRenderers=s,this.treeDelegate=r,this.accessibilityProvider=o,this._previousElements=[],this._previousStateDisposables=new X,this._rootDomNode=_e(".monaco-tree-sticky-container.empty"),e.appendChild(this._rootDomNode);const a=_e(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(a),this.stickyScrollFocus=new wK(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}get height(){if(!this._previousState)return 0;const e=this._previousState.stickyNodes[this._previousState.count-1];return e.position+e.height}get count(){return this._previousState?.count??0}getNode(e){return this._previousState?.stickyNodes.find(t=>t.node===e)}setState(e){const t=!!this._previousState&&this._previousState.count>0,n=!!e&&e.count>0;if(!t&&!n||t&&n&&this._previousState.equal(e))return;if(t!==n&&this.setVisible(n),!n){this._previousState=void 0,this._previousElements=[],this._previousStateDisposables.clear();return}const s=e.stickyNodes[e.count-1];this._previousState&&e.animationStateChanged(this._previousState)?this._previousElements[this._previousState.count-1].style.top=`${s.position}px`:this.renderState(e),this._previousState=e,this._rootDomNode.style.height=`${s.position+s.height}px`}renderState(e){this._previousStateDisposables.clear();const t=Array(e.count);for(let n=e.count-1;n>=0;n--){const s=e.stickyNodes[n],{element:r,disposable:o}=this.createElement(s,n,e.count);t[n]=r,this._rootDomNode.appendChild(r),this._previousStateDisposables.add(o)}this.stickyScrollFocus.updateElements(t,e),this._previousElements=t}rerender(){this._previousState&&this.renderState(this._previousState)}createElement(e,t,n){const s=e.startIndex,r=document.createElement("div");r.style.top=`${e.position}px`,this.tree.options.setRowHeight!==!1&&(r.style.height=`${e.height}px`),this.tree.options.setRowLineHeight!==!1&&(r.style.lineHeight=`${e.height}px`),r.classList.add("monaco-tree-sticky-row"),r.classList.add("monaco-list-row"),r.setAttribute("data-index",`${s}`),r.setAttribute("data-parity",s%2===0?"even":"odd"),r.setAttribute("id",this.view.getElementID(s));const o=this.setAccessibilityAttributes(r,e.node.element,t,n),a=this.treeDelegate.getTemplateId(e.node),l=this.treeRenderers.find(f=>f.templateId===a);if(!l)throw new Error(`No renderer found for template id ${a}`);let c=e.node;c===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(c=new Proxy(e.node,{}));const h=l.renderTemplate(r);l.renderElement(c,e.startIndex,h,{height:e.height});const u=fe(()=>{o.dispose(),l.disposeElement(c,e.startIndex,h,{height:e.height}),l.disposeTemplate(h),r.remove()});return{element:r,disposable:u}}setAccessibilityAttributes(e,t,n,s){if(!this.accessibilityProvider)return $.None;this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,n,s))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,n))),this.accessibilityProvider.getRole&&e.setAttribute("role",this.accessibilityProvider.getRole(t)??"treeitem");const r=this.accessibilityProvider.getAriaLabel(t),o=r&&typeof r!="string"?r:VN(r),a=du(c=>{const h=c.readObservable(o);h?e.setAttribute("aria-label",h):e.removeAttribute("aria-label")});typeof r=="string"||r&&e.setAttribute("aria-label",r.get());const l=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);return typeof l=="number"&&e.setAttribute("aria-level",`${l}`),e.setAttribute("aria-selected",String(!1)),a}setVisible(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}getFocus(){return this.stickyScrollFocus.getFocus()}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}}class wK extends ${get domHasFocus(){return this._domHasFocus}set domHasFocus(e){e!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(e),this._domHasFocus=e)}constructor(e,t){super(),this.container=e,this.view=t,this.focusedIndex=-1,this.elements=[],this._onDidChangeHasFocus=new A,this.onDidChangeHasFocus=this._onDidChangeHasFocus.event,this._onContextMenu=new A,this.onContextMenu=this._onContextMenu.event,this._domHasFocus=!1,this._register(V(this.container,"focus",()=>this.onFocus())),this._register(V(this.container,"blur",()=>this.onBlur())),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown(n=>this.onKeyDown(n))),this._register(this.view.onMouseDown(n=>this.onMouseDown(n))),this._register(this.view.onContextMenu(n=>this.handleContextMenu(n)))}handleContextMenu(e){const t=e.browserEvent.target;if(!af(t)&&!bd(t)){this.focusedLast()&&this.view.domFocus();return}if(!fa(e.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");const o=this.state.stickyNodes.findIndex(a=>a.node.element===e.element?.element);if(o===-1)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");this.container.focus(),this.setFocus(o);return}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");const s=this.state.stickyNodes[this.focusedIndex].node.element,r=this.elements[this.focusedIndex];this._onContextMenu.fire({element:s,anchor:r,browserEvent:e.browserEvent,isStickyScroll:!0})}onKeyDown(e){if(this.domHasFocus&&this.state){if(e.key==="ArrowUp")this.setFocusedElement(Math.max(0,this.focusedIndex-1)),e.preventDefault(),e.stopPropagation();else if(e.key==="ArrowDown"||e.key==="ArrowRight"){if(this.focusedIndex>=this.state.count-1){const t=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([t]),this.scrollNodeUnderWidget(t,this.state)}else this.setFocusedElement(this.focusedIndex+1);e.preventDefault(),e.stopPropagation()}}}onMouseDown(e){const t=e.browserEvent.target;!af(t)&&!bd(t)||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation())}updateElements(e,t){if(t&&t.count===0)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(t&&t.count!==e.length)throw new Error("Sticky scroll focus received illigel state");const n=this.focusedIndex;if(this.removeFocus(),this.elements=e,this.state=t,t){const s=pn(n,0,t.count-1);this.setFocus(s)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=t?0:-1}setFocusedElement(e){const t=this.state;if(!t)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(e),!(e<t.count-1)&&t.lastNodePartiallyVisible()){const n=t.stickyNodes[e];this.scrollNodeUnderWidget(n.endIndex+1,t)}}scrollNodeUnderWidget(e,t){const n=t.stickyNodes[t.count-1],s=t.count>1?t.stickyNodes[t.count-2]:void 0,r=this.view.getElementTop(e),o=s?s.position+s.height+n.height:n.height;this.view.scrollTop=r-o}getFocus(){if(!(!this.state||this.focusedIndex===-1))return this.state.stickyNodes[this.focusedIndex].node.element}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return this.state?this.view.getHTMLElement().classList.contains("sticky-scroll-focused"):!1}removeFocus(){this.focusedIndex!==-1&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(e){if(0>e)throw new Error("addFocus() can not remove focus");if(!this.state&&e>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&e>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");const t=this.focusedIndex;t>=0&&this.toggleElementFocus(this.elements[t],!1),e>=0&&this.toggleElementFocus(this.elements[e],!0),this.focusedIndex=e}toggleElementFocus(e,t){this.toggleElementActiveFocus(e,t&&this.domHasFocus),this.toggleElementPassiveFocus(e,t)}toggleCurrentElementActiveFocus(e){this.focusedIndex!==-1&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],e)}toggleElementActiveFocus(e,t){e.classList.toggle("focused",t)}toggleElementPassiveFocus(e,t){e.classList.toggle("passive-focused",t)}toggleStickyScrollFocused(e){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",e)}onFocus(){if(!this.state||this.elements.length===0)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),this.focusedIndex===-1&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}}function Jc(i){let e=Vl.Unknown;return t_(i.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=Vl.Twistie:t_(i.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=Vl.Element:t_(i.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=Vl.Filter),{browserEvent:i.browserEvent,element:i.element?i.element.element:null,target:e}}function vK(i){const e=af(i.browserEvent.target);return{element:i.element?i.element.element:null,browserEvent:i.browserEvent,anchor:i.anchor,isStickyScroll:e}}function Dp(i,e){e(i),i.children.forEach(t=>Dp(t,e))}class F_{get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new A,this.onDidChange=this._onDidChange.event}set(e,t){!t?.__forceEvent&&wi(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const s=this;this._onDidChange.fire({get elements(){return s.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const l=this.createNodeSet(),c=h=>l.delete(h);t.forEach(h=>Dp(h,c)),this.set([...l.values()]);return}const n=new Set,s=l=>n.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>Dp(l,s));const r=new Map,o=l=>r.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>Dp(l,o));const a=[];for(const l of this.nodes){const c=this.identityProvider.getId(l.element).toString();if(!n.has(c))a.push(l);else{const u=r.get(c);u&&u.visible&&a.push(u)}}if(this.nodes.length>0&&a.length===0){const l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class yK extends KN{constructor(e,t,n){super(e),this.tree=t,this.stickyScrollProvider=n}onViewPointer(e){if(zN(e.browserEvent.target)||zo(e.browserEvent.target)||Xu(e.browserEvent.target)||e.browserEvent.isHandledByList)return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const n=e.browserEvent.target,s=n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&e.browserEvent.offsetX<16,r=bd(e.browserEvent.target);let o=!1;if(r?o=!0:typeof this.tree.expandOnlyOnTwistieClick=="function"?o=this.tree.expandOnlyOnTwistieClick(t.element):o=!!this.tree.expandOnlyOnTwistieClick,r)this.handleStickyScrollMouseEvent(e,t);else{if(o&&!s&&e.browserEvent.detail!==2)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&e.browserEvent.detail===2)return super.onViewPointer(e)}if(t.collapsible&&(!r||s)){const a=this.tree.getNodeLocation(t),l=e.browserEvent.altKey;if(this.tree.setFocus([a]),this.tree.toggleCollapsed(a,l),s){e.browserEvent.isHandledByList=!0;return}}r||super.onViewPointer(e)}handleStickyScrollMouseEvent(e,t){if(LU(e.browserEvent.target)||DU(e.browserEvent.target))return;const n=this.stickyScrollProvider();if(!n)throw new Error("Sticky scroll controller not found");const s=this.list.indexOf(t),r=this.list.getElementTop(s),o=n.nodePositionTopBelowWidget(t);this.tree.scrollTop=r-o,this.list.domFocus(),this.list.setFocus([s]),this.list.setSelection([s])}onDoubleClick(e){e.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||e.browserEvent.isHandledByList||super.onDoubleClick(e)}onMouseDown(e){const t=e.browserEvent.target;if(!af(t)&&!bd(t)){super.onMouseDown(e);return}}onContextMenu(e){const t=e.browserEvent.target;if(!af(t)&&!bd(t)){super.onContextMenu(e);return}}}class SK extends yi{constructor(e,t,n,s,r,o,a,l){super(e,t,n,s,l),this.focusTrait=r,this.selectionTrait=o,this.anchorTrait=a}createMouseController(e){return new yK(this,e.tree,e.stickyScrollProvider)}splice(e,t,n=[]){if(super.splice(e,t,n),n.length===0)return;const s=[],r=[];let o;n.forEach((a,l)=>{this.focusTrait.has(a)&&s.push(e+l),this.selectionTrait.has(a)&&r.push(e+l),this.anchorTrait.has(a)&&(o=e+l)}),s.length>0&&super.setFocus(Mo([...super.getFocus(),...s])),r.length>0&&super.setSelection(Mo([...super.getSelection(),...r])),typeof o=="number"&&super.setAnchor(o)}setFocus(e,t,n=!1){super.setFocus(e,t),n||this.focusTrait.set(e.map(s=>this.element(s)),t)}setSelection(e,t,n=!1){super.setSelection(e,t),n||this.selectionTrait.set(e.map(s=>this.element(s)),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(typeof e>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}var Jm;(function(i){i[i.Tree=0]="Tree",i[i.StickyScroll=1]="StickyScroll"})(Jm||(Jm={}));class d5{get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseClick(){return W.map(this.view.onMouseClick,Jc)}get onMouseDblClick(){return W.filter(W.map(this.view.onMouseDblClick,Jc),e=>e.target!==Vl.Filter)}get onMouseOver(){return W.map(this.view.onMouseOver,Jc)}get onMouseOut(){return W.map(this.view.onMouseOut,Jc)}get onContextMenu(){return W.any(W.filter(W.map(this.view.onContextMenu,vK),e=>!e.isStickyScroll),this.stickyScrollController?.onContextMenu??W.None)}get onTap(){return W.map(this.view.onTap,Jc)}get onPointer(){return W.map(this.view.onPointer,Jc)}get onKeyDown(){return this.view.onKeyDown}get onKeyUp(){return this.view.onKeyUp}get onKeyPress(){return this.view.onKeyPress}get onDidFocus(){return this.view.onDidFocus}get onDidBlur(){return this.view.onDidBlur}get onDidChangeModel(){return W.any(this.onDidChangeModelRelay.event,this.onDidSwapModel.event)}get onDidChangeCollapseState(){return this.onDidChangeCollapseStateRelay.event}get onDidChangeRenderNodeCount(){return this.onDidChangeRenderNodeCountRelay.event}get findMode(){return this.findController?.mode??Xi.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get findMatchType(){return this.findController?.matchType??Xn.Fuzzy}set findMatchType(e){this.findController&&(this.findController.matchType=e)}get onDidChangeFindPattern(){return this.findController?this.findController.onDidChangePattern:W.None}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}constructor(e,t,n,s,r={}){this._user=e,this._options=r,this.eventBufferer=new Ef,this.onDidChangeFindOpenState=W.None,this.onDidChangeStickyScrollFocused=W.None,this.disposables=new X,this.onDidSwapModel=this.disposables.add(new A),this.onDidChangeModelRelay=this.disposables.add(new vu),this.onDidSpliceModelRelay=this.disposables.add(new vu),this.onDidChangeCollapseStateRelay=this.disposables.add(new vu),this.onDidChangeRenderNodeCountRelay=this.disposables.add(new vu),this.onDidChangeActiveNodesRelay=this.disposables.add(new vu),this._onWillRefilter=new A,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new A,this.onDidUpdateOptions=this._onDidUpdateOptions.event,this.modelDisposables=new X,r.keyboardNavigationLabelProvider&&(r.findWidgetEnabled??!0)&&(this.findFilter=new c5(r.keyboardNavigationLabelProvider,r.filter,r.defaultFindVisibility),r={...r,filter:this.findFilter},this.disposables.add(this.findFilter)),this.model=this.createModel(e,r),this.treeDelegate=new ck(n);const o=this.disposables.add(new lK(this.onDidChangeActiveNodesRelay.event)),a=new hy;this.renderers=s.map(l=>new Td(l,this.model,this.onDidChangeCollapseStateRelay.event,o,a,r));for(const l of this.renderers)this.disposables.add(l);if(this.focus=new F_(()=>this.view.getFocusedElements()[0],r.identityProvider),this.selection=new F_(()=>this.view.getSelectedElements()[0],r.identityProvider),this.anchor=new F_(()=>this.view.getAnchorElement(),r.identityProvider),this.view=new SK(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...aK(()=>this.model,this.disposables,r),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.setupModel(this.model),r.keyboardSupport!==!1){const l=W.chain(this.view.onKeyDown,c=>c.filter(h=>!zo(h.target)).map(h=>new at(h)));W.chain(l,c=>c.filter(h=>h.keyCode===w.LeftArrow))(this.onLeftArrow,this,this.disposables),W.chain(l,c=>c.filter(h=>h.keyCode===w.RightArrow))(this.onRightArrow,this,this.disposables),W.chain(l,c=>c.filter(h=>h.keyCode===w.Space))(this.onSpace,this,this.disposables)}if((r.findWidgetEnabled??!0)&&r.keyboardNavigationLabelProvider&&r.contextViewProvider){const l={styles:r.findWidgetStyles,defaultFindMode:r.defaultFindMode,defaultFindMatchType:r.defaultFindMatchType,showNotFoundMessage:r.showNotFoundMessage};this.findController=this.disposables.add(new h5(this,this.findFilter,r.contextViewProvider,l)),this.focusNavigationFilter=c=>this.findController.shouldAllowFocus(c),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindMode=W.None,this.onDidChangeFindMatchType=W.None;r.enableStickyScroll&&(this.stickyScrollController=new bD(this,this.model,this.view,this.renderers,this.treeDelegate,r),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=On(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===iu.Always)}updateOptions(e={}){this._options={...this._options,...e};for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(this._options),this.findController?.updateOptions(e),this.updateStickyScroll(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===iu.Always)}get options(){return this._options}updateStickyScroll(e){!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new bD(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=W.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),this.stickyScrollController?.updateOptions(e)}updateWidth(e){const t=this.model.getListIndex(e);t!==-1&&this.view.updateWidth(t)}getHTMLElement(){return this.view.getHTMLElement()}get contentHeight(){return this.view.contentHeight}get contentWidth(){return this.view.contentWidth}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.view.onDidChangeContentWidth}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollLeft(){return this.view.scrollLeft}set scrollLeft(e){this.view.scrollLeft=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleElement(){let e=this.view.firstVisibleIndex;return this.stickyScrollController&&(e+=this.stickyScrollController.count),e<0||e>=this.view.length?void 0:this.view.element(e).element}get lastVisibleElement(){const e=this.view.lastVisibleIndex;return this.view.element(e).element}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(e){this.view.ariaLabel=e}get selectionSize(){return this.selection.getNodes().length}domFocus(){this.stickyScrollController?.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}isDOMFocused(){return il(this.getHTMLElement())}layout(e,t){this.view.layout(e,t)}style(e){const t=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { opacity: 1; border-color: ${e.treeInactiveIndentGuidesStroke}; }`),n.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { opacity: 1; border-color: ${e.treeIndentGuidesStroke}; }`));const s=e.treeStickyScrollBackground??e.listBackground;s&&(n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${s}; }`),n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${s}; }`)),e.treeStickyScrollBorder&&n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ${e.treeStickyScrollBorder}; }`),e.treeStickyScrollShadow&&n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ${e.treeStickyScrollShadow} 0 6px 6px -6px inset; height: 3px; }`),e.listFocusForeground&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));const r=$o(e.listFocusAndSelectionOutline,$o(e.listSelectionOutline,e.listFocusOutline??""));r&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${r}; outline-offset: -1px;}`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),e.listFocusOutline&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}expandAll(){this.model.setCollapsed(this.model.rootRef,!1,!0)}collapseAll(){this.model.setCollapsed(this.model.rootRef,!0,!0)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}expandTo(e){this.model.expandTo(e)}triggerTypeNavigation(){this.view.triggerTypeNavigation()}openFind(){this.findController?.open()}closeFind(){this.findController?.close()}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setAnchor(e){if(typeof e>"u")return this.view.setAnchor(void 0);this.eventBufferer.bufferEvents(()=>{const t=this.model.getNode(e);this.anchor.set([t]);const n=this.model.getListIndex(e);n>-1&&this.view.setAnchor(n,!0)})}getAnchor(){return this.anchor.get().at(0)}setSelection(e,t){this.eventBufferer.bufferEvents(()=>{const n=e.map(r=>this.model.getNode(r));this.selection.set(n,t);const s=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setSelection(s,t,!0)})}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents(()=>{const n=e.map(r=>this.model.getNode(r));this.focus.set(n,t);const s=e.map(r=>this.model.getListIndex(r)).filter(r=>r>-1);this.view.setFocus(s,t,!0)})}focusNext(e=1,t=!1,n,s=fa(n)&&n.altKey?void 0:this.focusNavigationFilter){this.view.focusNext(e,t,n,s)}focusPrevious(e=1,t=!1,n,s=fa(n)&&n.altKey?void 0:this.focusNavigationFilter){this.view.focusPrevious(e,t,n,s)}focusNextPage(e,t=fa(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusNextPage(e,t)}focusPreviousPage(e,t=fa(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusPreviousPage(e,t,()=>this.stickyScrollController?.height??0)}focusLast(e,t=fa(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusLast(e,t)}focusFirst(e,t=fa(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusFirst(e,t)}getFocus(){return this.focus.get()}getStickyScrollFocus(){const e=this.stickyScrollController?.getFocus();return e!==void 0?[e]:[]}getFocusedPart(){return this.stickyScrollController?.focusedLast()?Jm.StickyScroll:Jm.Tree}reveal(e,t){this.model.expandTo(e);const n=this.model.getListIndex(e);if(n!==-1)if(!this.stickyScrollController)this.view.reveal(n,t);else{const s=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(n,t,s)}}getRelativeTop(e){const t=this.model.getListIndex(e);if(t===-1)return null;const n=this.stickyScrollController?.getNode(this.getNode(e));return this.view.getRelativeTop(t,n?.position??this.stickyScrollController?.height)}getViewState(e=this.options.identityProvider){if(!e)throw new Pi(this._user,"Can't get tree view state without an identity provider");const t=o=>e.getId(o).toString(),n=Id.empty(this.scrollTop);for(const o of this.getFocus())n.focus.add(t(o));for(const o of this.getSelection())n.selection.add(t(o));const s=this.model.getNode(),r=[s];for(;r.length>0;){const o=r.pop();o!==s&&o.collapsible&&(n.expanded[t(o.element)]=o.collapsed?0:1),cy(r,r.length,o.children)}return n}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],s=this.model.getNodeLocation(n);if(!this.model.setCollapsed(s,!0)){const o=this.model.getParentNodeLocation(s);if(!o)return;const a=this.model.getListIndex(o);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],s=this.model.getNodeLocation(n);if(!this.model.setCollapsed(s,!1)){if(!n.children.some(l=>l.visible))return;const[o]=this.view.getFocus(),a=o+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(t.length===0)return;const n=t[0],s=this.model.getNodeLocation(n),r=e.browserEvent.altKey;this.model.setCollapsed(s,void 0,r)}setupModel(e){this.modelDisposables.clear(),this.modelDisposables.add(e.onDidSpliceRenderedNodes(({start:r,deleteCount:o,elements:a})=>this.view.splice(r,o,a)));const t=W.forEach(e.onDidSpliceModel,r=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(r),this.selection.onDidModelSplice(r)})},this.modelDisposables);t(()=>null,null,this.modelDisposables);const n=this.modelDisposables.add(new A),s=this.modelDisposables.add(new Df(0));this.modelDisposables.add(W.any(t,this.focus.onDidChange,this.selection.onDidChange)(()=>{s.trigger(()=>{const r=new Set;for(const o of this.focus.getNodes())r.add(o);for(const o of this.selection.getNodes())r.add(o);n.fire([...r.values()])})})),this.onDidChangeActiveNodesRelay.input=n.event,this.onDidChangeModelRelay.input=W.signal(e.onDidSpliceModel),this.onDidChangeCollapseStateRelay.input=e.onDidChangeCollapseState,this.onDidChangeRenderNodeCountRelay.input=e.onDidChangeRenderNodeCount,this.onDidSpliceModelRelay.input=e.onDidSpliceModel}navigate(e){return new kK(this.view,this.model,e)}dispose(){ai(this.disposables),this.stickyScrollController?.dispose(),this.view.dispose(),this.modelDisposables.dispose()}}class kK{constructor(e,t,n){this.view=e,this.model=t,n?this.index=this.model.getListIndex(n):this.index=-1}current(){return this.index<0||this.index>=this.view.length?null:this.view.element(this.index).element}previous(){return this.index--,this.current()}next(){return this.index++,this.current()}first(){return this.index=0,this.current()}last(){return this.index=this.view.length-1,this.current()}}const _D=new Fi(()=>{const i=ib.Collator(void 0,{numeric:!0,sensitivity:"base"}).value;return{collator:i,collatorIsNumeric:i.resolvedOptions().numeric}}),mu=new Fi(()=>({collator:ib.Collator(void 0,{numeric:!0}).value})),hk=new Fi(()=>({collator:ib.Collator(void 0,{numeric:!0,sensitivity:"accent"}).value}));function f5(i,e,t=!1){const n=i||"",s=e||"",r=_D.value.collator.compare(n,s);return _D.value.collatorIsNumeric&&r===0&&n!==s?n<s?-1:1:r}function Ese(i,e){const t=mu.value.collator;return i=i||"",e=e||"",Qo(t,i,e)}function xse(i,e){const t=mu.value.collator;return i=i||"",e=e||"",p5(i,e)||Qo(t,i,e)}function Lse(i,e){const t=mu.value.collator;return i=i||"",e=e||"",g5(i,e)||Qo(t,i,e)}function Dse(i,e){return i=i||"",e=e||"",i===e?0:i<e?-1:1}function Ise(i,e){i=i||"",e=e||"";const t=Ja(i),n=Ja(e),s=mu.value.collator,r=hk.value.collator;return Qo(r,t,n)||Qo(s,i,e)}function Tse(i,e){i=i||"",e=e||"";const t=Ja(i),n=Ja(e),s=mu.value.collator,r=hk.value.collator;return Qo(r,t,n)||p5(i,e)||Qo(s,i,e)}function Ase(i,e){i=i||"",e=e||"";const t=Ja(i),n=Ja(e),s=mu.value.collator,r=hk.value.collator;return Qo(r,t,n)||g5(i,e)||Qo(s,i,e)}function Nse(i,e){i=i||"",e=e||"";const t=Ja(i).toLowerCase(),n=Ja(e).toLowerCase();return t!==n?t<n?-1:1:i!==e?i<e?-1:1:0}const CK=/^(.*?)(\.([^.]*))?$/;function Ja(i){const e=i?CK.exec(i):[];return e&&e[1]&&e[1].charAt(0)!=="."&&e[3]||""}function Qo(i,e,t){const n=i.compare(e,t);return n!==0?n:e.length!==t.length?e.length<t.length?-1:1:0}function e1(i){const e=i.charAt(0);return e.toLocaleUpperCase()!==e}function t1(i){const e=i.charAt(0);return e.toLocaleLowerCase()!==e}function g5(i,e){return e1(i)&&t1(e)?-1:t1(i)&&e1(e)?1:0}function p5(i,e){return t1(i)&&e1(e)?-1:e1(i)&&t1(e)?1:0}function EK(i,e,t=!1){return t||(i=i&&i.toLowerCase(),e=e&&e.toLowerCase()),i===e?0:i<e?-1:1}function Rse(i,e,t=!1){const n=i.split(Ms),s=e.split(Ms),r=n.length-1,o=s.length-1;let a,l;for(let c=0;;c++){if(a=r===c,l=o===c,a&&l)return f5(n[c],s[c],t);if(a)return-1;if(l)return 1;const h=EK(n[c],s[c],t);if(h!==0)return h}}function xK(i,e,t){const n=i.toLowerCase(),s=e.toLowerCase(),r=LK(i,e,t);if(r)return r;const o=n.endsWith(t),a=s.endsWith(t);if(o!==a)return o?-1:1;const l=f5(n,s);return l!==0?l:n.localeCompare(s)}function LK(i,e,t){const n=i.toLowerCase(),s=e.toLowerCase(),r=n.startsWith(t),o=s.startsWith(t);if(r!==o)return r?-1:1;if(r&&o){if(n.length<s.length)return-1;if(n.length>s.length)return 1}return 0}mt(HN);class DK{get templateId(){return this.renderer.templateId}constructor(e,t){this.renderer=e,this.modelProvider=t}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:$.None}}renderElement(e,t,n,s){if(n.disposable?.dispose(),!n.data)return;const r=this.modelProvider();if(r.isResolved(e))return this.renderer.renderElement(r.get(e),e,n.data,s);const o=new _r,a=r.resolve(e,o.token);n.disposable={dispose:()=>o.cancel()},this.renderer.renderPlaceholder(e,n.data),a.then(l=>this.renderer.renderElement(l,e,n.data,s))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class IK{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}function TK(i,e){return{...e,accessibilityProvider:e.accessibilityProvider&&new IK(i,e.accessibilityProvider)}}class AK{constructor(e,t,n,s,r={}){const o=()=>this.model,a=s.map(l=>new DK(l,o));this.list=new yi(e,t,n,a,TK(o,r))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}isDOMFocused(){return il(this.getHTMLElement())}domFocus(){this.list.domFocus()}get onDidFocus(){return this.list.onDidFocus}get onDidBlur(){return this.list.onDidBlur}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseClick(){return W.map(this.list.onMouseClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onMouseDblClick(){return W.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onTap(){return W.map(this.list.onTap,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return W.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeFocus(){return W.map(this.list.onDidChangeFocus,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(s=>this._model.get(s)),indexes:t,browserEvent:n}))}get onDidChangeSelection(){return W.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(s=>this._model.get(s)),indexes:t,browserEvent:n}))}get onContextMenu(){return W.map(this.list.onContextMenu,({element:e,index:t,anchor:n,browserEvent:s})=>typeof e>"u"?{element:e,index:t,anchor:n,browserEvent:s}:{element:this._model.get(e),index:t,anchor:n,browserEvent:s})}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,un(e.length))}get length(){return this.list.length}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollLeft(){return this.list.scrollLeft}set scrollLeft(e){this.list.scrollLeft=e}setAnchor(e){this.list.setAnchor(e)}getAnchor(){return this.list.getAnchor()}setFocus(e){this.list.setFocus(e)}focusNext(e,t){this.list.focusNext(e,t)}focusPrevious(e,t){this.list.focusPrevious(e,t)}focusNextPage(){return this.list.focusNextPage()}focusPreviousPage(){return this.list.focusPreviousPage()}focusLast(){this.list.focusLast()}focusFirst(){this.list.focusFirst()}getFocus(){return this.list.getFocus()}setSelection(e,t){this.list.setSelection(e,t)}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}layout(e,t){this.list.layout(e,t)}triggerTypeNavigation(){this.list.triggerTypeNavigation()}reveal(e,t){this.list.reveal(e,t)}style(e){this.list.style(e)}dispose(){this.list.dispose()}}const NK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));mt(NK);const RK=!1;var wD;(function(i){i.North="north",i.South="south",i.East="east",i.West="west"})(wD||(wD={}));var Gi;(function(i){i[i.VERTICAL=0]="VERTICAL",i[i.HORIZONTAL=1]="HORIZONTAL"})(Gi||(Gi={}));var ji;(function(i){i[i.Disabled=0]="Disabled",i[i.AtMinimum=1]="AtMinimum",i[i.AtMaximum=2]="AtMaximum",i[i.Enabled=3]="Enabled"})(ji||(ji={}));let m5=4;const b5=new A;function Mse(i){m5=i,b5.fire(i)}let _5=300;const w5=new A;function Ose(i){_5=i,w5.fire(i)}class mf{constructor(e){this.el=e,this.disposables=new X}get onPointerMove(){return this.disposables.add(new Ve(ke(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new Ve(ke(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}}mf.__decorator=G([vt],mf.prototype,"onPointerMove",null);mf.__decorator=G([vt],mf.prototype,"onPointerUp",null);class bf{get onPointerMove(){return this.disposables.add(new Ve(this.el,qt.Change)).event}get onPointerUp(){return this.disposables.add(new Ve(this.el,qt.End)).event}constructor(e){this.el=e,this.disposables=new X}dispose(){this.disposables.dispose()}}bf.__decorator=G([vt],bf.prototype,"onPointerMove",null);bf.__decorator=G([vt],bf.prototype,"onPointerUp",null);class nu{get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}constructor(e){this.factory=e}dispose(){}}nu.__decorator=G([vt],nu.prototype,"onPointerMove",null);nu.__decorator=G([vt],nu.prototype,"onPointerUp",null);const vD="pointer-events-disabled";class xs extends ${get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===ji.Disabled),this.el.classList.toggle("minimum",e===ji.AtMinimum),this.el.classList.toggle("maximum",e===ji.AtMaximum),this._state=e,this.onDidEnablementChange.fire(e))}set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){const t=n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==ji.Disabled&&(this._orthogonalStartDragHandle=ie(this.el,_e(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(fe(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new Ve(this._orthogonalStartDragHandle,"mouseenter")).event(()=>xs.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new Ve(this._orthogonalStartDragHandle,"mouseleave")).event(()=>xs.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){const t=n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==ji.Disabled&&(this._orthogonalEndDragHandle=ie(this.el,_e(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(fe(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new Ve(this._orthogonalEndDragHandle,"mouseenter")).event(()=>xs.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Ve(this._orthogonalEndDragHandle,"mouseleave")).event(()=>xs.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,n){super(),this.hoverDelay=_5,this.hoverDelayer=this._register(new Df(this.hoverDelay)),this._state=ji.Enabled,this.onDidEnablementChange=this._register(new A),this._onDidStart=this._register(new A),this._onDidChange=this._register(new A),this._onDidReset=this._register(new A),this._onDidEnd=this._register(new A),this.orthogonalStartSashDisposables=this._register(new X),this.orthogonalStartDragHandleDisposables=this._register(new X),this.orthogonalEndSashDisposables=this._register(new X),this.orthogonalEndDragHandleDisposables=this._register(new X),this.onDidStart=this._onDidStart.event,this.onDidChange=this._onDidChange.event,this.onDidReset=this._onDidReset.event,this.onDidEnd=this._onDidEnd.event,this.linkedSash=void 0,this.el=ie(e,_e(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),Me&&this.el.classList.add("mac");const s=this._register(new Ve(this.el,"mousedown")).event;this._register(s(u=>this.onPointerStart(u,new mf(e)),this));const r=this._register(new Ve(this.el,"dblclick")).event;this._register(r(this.onPointerDoublePress,this));const o=this._register(new Ve(this.el,"mouseenter")).event;this._register(o(()=>xs.onMouseEnter(this)));const a=this._register(new Ve(this.el,"mouseleave")).event;this._register(a(()=>xs.onMouseLeave(this))),this._register(Bt.addTarget(this.el));const l=this._register(new Ve(this.el,qt.Start)).event;this._register(l(u=>this.onPointerStart(u,new bf(this.el)),this));const c=this._register(new Ve(this.el,qt.Tap)).event;let h;this._register(c(u=>{if(h){clearTimeout(h),h=void 0,this.onPointerDoublePress(u);return}clearTimeout(h),h=setTimeout(()=>h=void 0,250)},this)),typeof n.size=="number"?(this.size=n.size,n.orientation===Gi.VERTICAL?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=m5,this._register(b5.event(u=>{this.size=u,this.layout()}))),this._register(w5.event(u=>this.hoverDelay=u)),this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||Gi.VERTICAL,this.orientation===Gi.HORIZONTAL?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",RK),this.layout()}onPointerStart(e,t){Re.stop(e);let n=!1;if(!e.__orthogonalSashEvent){const p=this.getOrthogonalSash(e);p&&(n=!0,e.__orthogonalSashEvent=!0,p.onPointerStart(e,new nu(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new nu(t))),!this.state)return;const s=this.el.ownerDocument.getElementsByTagName("iframe");for(const p of s)p.classList.add(vD);const r=e.pageX,o=e.pageY,a=e.altKey,l={startX:r,currentX:r,startY:o,currentY:o,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);const c=On(this.el),h=()=>{let p="";n?p="all-scroll":this.orientation===Gi.HORIZONTAL?this.state===ji.AtMinimum?p="s-resize":this.state===ji.AtMaximum?p="n-resize":p=Me?"row-resize":"ns-resize":this.state===ji.AtMinimum?p="e-resize":this.state===ji.AtMaximum?p="w-resize":p=Me?"col-resize":"ew-resize",c.textContent=`* { cursor: ${p} !important; }`},u=new X;h(),n||this.onDidEnablementChange.event(h,null,u);const f=p=>{Re.stop(p,!1);const m={startX:r,currentX:p.pageX,startY:o,currentY:p.pageY,altKey:a};this._onDidChange.fire(m)},g=p=>{Re.stop(p,!1),c.remove(),this.el.classList.remove("active"),this._onDidEnd.fire(),u.dispose();for(const m of s)m.classList.remove(vD)};t.onPointerMove(f,null,u),t.onPointerUp(g,null,u),u.add(t)}onPointerDoublePress(e){const t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&xs.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&xs.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){xs.onMouseLeave(this)}layout(){if(this.orientation===Gi.VERTICAL){const e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{const e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){const t=e.initialTarget??e.target;if(!(!t||!Ut(t))&&t.classList.contains("orthogonal-drag-handle"))return t.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}}const MK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));mt(MK);const OK={separatorBorder:P.transparent};var Ar;(function(i){i[i.Normal=0]="Normal",i[i.Low=1]="Low",i[i.High=2]="High"})(Ar||(Ar={}));class v5{set size(e){this._size=e}get size(){return this._size}get cachedVisibleSize(){return this._cachedVisibleSize}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){if(e!==this.visible){e?(this.size=pn(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{this.view.setVisible?.(e)}catch(n){console.error("Splitview: Failed to set visible view"),console.error(n)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}constructor(e,t,n,s){this.container=e,this.view=t,this.disposable=s,this._cachedVisibleSize=void 0,typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(n){console.error("Splitview: Failed to layout view"),console.error(n)}}dispose(){this.disposable.dispose()}}class FK extends v5{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}}class PK extends v5{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}}var Ji;(function(i){i[i.Idle=0]="Idle",i[i.Busy=1]="Busy"})(Ji||(Ji={}));var hv;(function(i){i.Distribute={type:"distribute"};function e(s){return{type:"split",index:s}}i.Split=e;function t(s){return{type:"auto",index:s}}i.Auto=t;function n(s){return{type:"invisible",cachedVisibleSize:s}}i.Invisible=n})(hv||(hv={}));class BK extends ${get contentSize(){return this._contentSize}get length(){return this.viewItems.length}get minimumSize(){return this.viewItems.reduce((e,t)=>e+t.minimumSize,0)}get maximumSize(){return this.length===0?Number.POSITIVE_INFINITY:this.viewItems.reduce((e,t)=>e+t.maximumSize,0)}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(const t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(const t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}get sashes(){return this.sashItems.map(e=>e.sash)}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){super(),this.size=0,this._contentSize=0,this.proportions=void 0,this.viewItems=[],this.sashItems=[],this.state=Ji.Idle,this._onDidSashChange=this._register(new A),this._onDidSashReset=this._register(new A),this._startSnappingEnabled=!0,this._endSnappingEnabled=!0,this.onDidSashChange=this._onDidSashChange.event,this.onDidSashReset=this._onDidSashReset.event,this.orientation=t.orientation??Gi.VERTICAL,this.inverseAltBehavior=t.inverseAltBehavior??!1,this.proportionalLayout=t.proportionalLayout??!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===Gi.VERTICAL?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=ie(this.el,_e(".sash-container")),this.viewContainer=_e(".split-view-container"),this.scrollable=this._register(new R1({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:s=>Hs(ke(this.el),s)})),this.scrollableElement=this._register(new iN(this.viewContainer,{vertical:this.orientation===Gi.VERTICAL?t.scrollbarVisibility??Nt.Auto:Nt.Hidden,horizontal:this.orientation===Gi.HORIZONTAL?t.scrollbarVisibility??Nt.Auto:Nt.Hidden},this.scrollable));const n=this._register(new Ve(this.viewContainer,"scroll")).event;this._register(n(s=>{const r=this.scrollableElement.getScrollPosition(),o=Math.abs(this.viewContainer.scrollLeft-r.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,a=Math.abs(this.viewContainer.scrollTop-r.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(o!==void 0||a!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:o,scrollTop:a})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(s=>{s.scrollTopChanged&&(this.viewContainer.scrollTop=s.scrollTop),s.scrollLeftChanged&&(this.viewContainer.scrollLeft=s.scrollLeft)})),ie(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||OK),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((s,r)=>{const o=ih(s.visible)||s.visible?s.size:{type:"invisible",cachedVisibleSize:s.size},a=s.view;this.doAddView(a,o,r,!0)}),this._contentSize=this.viewItems.reduce((s,r)=>s+r.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,s){this.doAddView(e,t,n,s)}removeView(e,t){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");if(this.state!==Ji.Idle)throw new Error("Cant modify splitview");this.state=Ji.Busy;try{t?.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index});const n=t?.type==="split"?this.viewItems[t.index]:void 0,s=this.viewItems.splice(e,1)[0];if(n&&(n.size+=s.size),this.viewItems.length>=1){const o=Math.max(e-1,0);this.sashItems.splice(o,1)[0].disposable.dispose()}this.relayout(),t?.type==="distribute"&&this.distributeViewSizes();const r=s.view;return s.dispose(),r}finally{this.state=Ji.Idle}}removeAllViews(){if(this.state!==Ji.Idle)throw new Error("Cant modify splitview");this.state=Ji.Busy;try{const e=this.viewItems.splice(0,this.viewItems.length);for(const n of e)n.dispose();const t=this.sashItems.splice(0,this.sashItems.length);for(const n of t)n.disposable.dispose();return this.relayout(),e.map(n=>n.view)}finally{this.state=Ji.Idle}}moveView(e,t){if(this.state!==Ji.Idle)throw new Error("Cant modify splitview");const n=this.getViewCachedVisibleSize(e),s=typeof n>"u"?this.getViewSize(e):hv.Invisible(n),r=this.removeView(e);this.addView(r,s,t)}swapViews(e,t){if(this.state!==Ji.Idle)throw new Error("Cant modify splitview");if(e>t)return this.swapViews(t,e);const n=this.getViewSize(e),s=this.getViewSize(t),r=this.removeView(t),o=this.removeView(e);this.addView(r,n,e),this.addView(o,s,t)}isViewVisible(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].visible}setViewVisible(e,t){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");this.viewItems[e].setVisible(t),this.distributeEmptySpace(e),this.layoutViews(),this.saveProportions()}getViewCachedVisibleSize(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].cachedVisibleSize}layout(e,t){const n=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let s=0;for(let r=0;r<this.viewItems.length;r++){const o=this.viewItems[r],a=this.proportions[r];typeof a=="number"?s+=a:e-=o.size}for(let r=0;r<this.viewItems.length;r++){const o=this.viewItems[r],a=this.proportions[r];typeof a=="number"&&s>0&&(o.size=pn(Math.round(a*e/s),o.minimumSize,o.maximumSize))}}else{const s=un(this.viewItems.length),r=s.filter(a=>this.viewItems[a].priority===Ar.Low),o=s.filter(a=>this.viewItems[a].priority===Ar.High);this.resize(this.viewItems.length-1,e-n,void 0,r,o)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0))}onSashStart({sash:e,start:t,alt:n}){for(const a of this.viewItems)a.enabled=!1;const s=this.sashItems.findIndex(a=>a.sash===e),r=Kr(V(this.el.ownerDocument.body,"keydown",a=>o(this.sashDragState.current,a.altKey)),V(this.el.ownerDocument.body,"keyup",()=>o(this.sashDragState.current,!1))),o=(a,l)=>{const c=this.viewItems.map(p=>p.size);let h=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(s===this.sashItems.length-1){const m=this.viewItems[s];h=(m.minimumSize-m.size)/2,u=(m.maximumSize-m.size)/2}else{const m=this.viewItems[s+1];h=(m.size-m.maximumSize)/2,u=(m.size-m.minimumSize)/2}let f,g;if(!l){const p=un(s,-1),m=un(s+1,this.viewItems.length),_=p.reduce((D,F)=>D+(this.viewItems[F].minimumSize-c[F]),0),v=p.reduce((D,F)=>D+(this.viewItems[F].viewMaximumSize-c[F]),0),y=m.length===0?Number.POSITIVE_INFINITY:m.reduce((D,F)=>D+(c[F]-this.viewItems[F].minimumSize),0),E=m.length===0?Number.NEGATIVE_INFINITY:m.reduce((D,F)=>D+(c[F]-this.viewItems[F].viewMaximumSize),0),N=Math.max(_,E),I=Math.min(y,v),B=this.findFirstSnapIndex(p),x=this.findFirstSnapIndex(m);if(typeof B=="number"){const D=this.viewItems[B],F=Math.floor(D.viewMinimumSize/2);f={index:B,limitDelta:D.visible?N-F:N+F,size:D.size}}if(typeof x=="number"){const D=this.viewItems[x],F=Math.floor(D.viewMinimumSize/2);g={index:x,limitDelta:D.visible?I+F:I-F,size:D.size}}}this.sashDragState={start:a,current:a,index:s,sizes:c,minDelta:h,maxDelta:u,alt:l,snapBefore:f,snapAfter:g,disposable:r}};o(t,n)}onSashChange({current:e}){const{index:t,start:n,sizes:s,alt:r,minDelta:o,maxDelta:a,snapBefore:l,snapAfter:c}=this.sashDragState;this.sashDragState.current=e;const h=e-n,u=this.resize(t,h,s,void 0,void 0,o,a,l,c);if(r){const f=t===this.sashItems.length-1,g=this.viewItems.map(E=>E.size),p=f?t:t+1,m=this.viewItems[p],_=m.size-m.maximumSize,v=m.size-m.minimumSize,y=f?t-1:t+1;this.resize(y,-u,g,void 0,void 0,_,v)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(const t of this.viewItems)t.enabled=!0}onViewChange(e,t){const n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=pn(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==Ji.Idle)throw new Error("Cant modify splitview");this.state=Ji.Busy;try{const n=un(this.viewItems.length).filter(a=>a!==e),s=[...n.filter(a=>this.viewItems[a].priority===Ar.Low),e],r=n.filter(a=>this.viewItems[a].priority===Ar.High),o=this.viewItems[e];t=Math.round(t),t=pn(t,o.minimumSize,Math.min(o.maximumSize,this.size)),o.size=t,this.relayout(s,r)}finally{this.state=Ji.Idle}}}isViewExpanded(e){if(e<0||e>=this.viewItems.length)return!1;for(const t of this.viewItems)if(t!==this.viewItems[e]&&t.size>t.minimumSize)return!1;return!0}distributeViewSizes(){const e=[];let t=0;for(const a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);const n=Math.floor(t/e.length);for(const a of e)a.size=pn(n,a.minimumSize,a.maximumSize);const s=un(this.viewItems.length),r=s.filter(a=>this.viewItems[a].priority===Ar.Low),o=s.filter(a=>this.viewItems[a].priority===Ar.High);this.relayout(r,o)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,s){if(this.state!==Ji.Idle)throw new Error("Cant modify splitview");this.state=Ji.Busy;try{const r=_e(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(r):this.viewContainer.insertBefore(r,this.viewContainer.children.item(n));const o=e.onDidChange(f=>this.onViewChange(h,f)),a=fe(()=>r.remove()),l=Kr(o,a);let c;typeof t=="number"?c=t:(t.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index}),t.type==="split"?c=this.getViewSize(t.index)/2:t.type==="invisible"?c={cachedVisibleSize:t.cachedVisibleSize}:c=e.minimumSize);const h=this.orientation===Gi.VERTICAL?new FK(r,e,c,l):new PK(r,e,c,l);if(this.viewItems.splice(n,0,h),this.viewItems.length>1){const f={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},g=this.orientation===Gi.VERTICAL?new xs(this.sashContainer,{getHorizontalSashTop:D=>this.getSashPosition(D),getHorizontalSashWidth:this.getSashOrthogonalSize},{...f,orientation:Gi.HORIZONTAL}):new xs(this.sashContainer,{getVerticalSashLeft:D=>this.getSashPosition(D),getVerticalSashHeight:this.getSashOrthogonalSize},{...f,orientation:Gi.VERTICAL}),p=this.orientation===Gi.VERTICAL?D=>({sash:g,start:D.startY,current:D.currentY,alt:D.altKey}):D=>({sash:g,start:D.startX,current:D.currentX,alt:D.altKey}),_=W.map(g.onDidStart,p)(this.onSashStart,this),y=W.map(g.onDidChange,p)(this.onSashChange,this),N=W.map(g.onDidEnd,()=>this.sashItems.findIndex(D=>D.sash===g))(this.onSashEnd,this),I=g.onDidReset(()=>{const D=this.sashItems.findIndex(ee=>ee.sash===g),F=un(D,-1),te=un(D+1,this.viewItems.length),J=this.findFirstSnapIndex(F),le=this.findFirstSnapIndex(te);typeof J=="number"&&!this.viewItems[J].visible||typeof le=="number"&&!this.viewItems[le].visible||this._onDidSashReset.fire(D)}),B=Kr(_,y,N,I,g),x={sash:g,disposable:B};this.sashItems.splice(n-1,0,x)}r.appendChild(e.element);let u;typeof t!="number"&&t.type==="split"&&(u=[t.index]),s||this.relayout([n],u),!s&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}finally{this.state=Ji.Idle}}relayout(e,t){const n=this.viewItems.reduce((s,r)=>s+r.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(h=>h.size),s,r,o=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,c){if(e<0||e>=this.viewItems.length)return 0;const h=un(e,-1),u=un(e+1,this.viewItems.length);if(r)for(const x of r)Db(h,x),Db(u,x);if(s)for(const x of s)hg(h,x),hg(u,x);const f=h.map(x=>this.viewItems[x]),g=h.map(x=>n[x]),p=u.map(x=>this.viewItems[x]),m=u.map(x=>n[x]),_=h.reduce((x,D)=>x+(this.viewItems[D].minimumSize-n[D]),0),v=h.reduce((x,D)=>x+(this.viewItems[D].maximumSize-n[D]),0),y=u.length===0?Number.POSITIVE_INFINITY:u.reduce((x,D)=>x+(n[D]-this.viewItems[D].minimumSize),0),E=u.length===0?Number.NEGATIVE_INFINITY:u.reduce((x,D)=>x+(n[D]-this.viewItems[D].maximumSize),0),N=Math.max(_,E,o),I=Math.min(y,v,a);let B=!1;if(l){const x=this.viewItems[l.index],D=t>=l.limitDelta;B=D!==x.visible,x.setVisible(D,l.size)}if(!B&&c){const x=this.viewItems[c.index],D=t<c.limitDelta;B=D!==x.visible,x.setVisible(D,c.size)}if(B)return this.resize(e,t,n,s,r,o,a);t=pn(t,N,I);for(let x=0,D=t;x<f.length;x++){const F=f[x],te=pn(g[x]+D,F.minimumSize,F.maximumSize),J=te-g[x];D-=J,F.size=te}for(let x=0,D=t;x<p.length;x++){const F=p[x],te=pn(m[x]-D,F.minimumSize,F.maximumSize),J=te-m[x];D+=J,F.size=te}return t}distributeEmptySpace(e){const t=this.viewItems.reduce((a,l)=>a+l.size,0);let n=this.size-t;const s=un(this.viewItems.length-1,-1),r=s.filter(a=>this.viewItems[a].priority===Ar.Low),o=s.filter(a=>this.viewItems[a].priority===Ar.High);for(const a of o)Db(s,a);for(const a of r)hg(s,a);typeof e=="number"&&hg(s,e);for(let a=0;n!==0&&a<s.length;a++){const l=this.viewItems[s[a]],c=pn(l.size+n,l.minimumSize,l.maximumSize),h=c-l.size;n-=h,l.size=c}}layoutViews(){this._contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(const t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===Gi.VERTICAL?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1;const t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;const n=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),s=[...this.viewItems].reverse();e=!1;const r=s.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;const o=s.map(l=>e=l.maximumSize-l.size>0||e).reverse();let a=0;for(let l=0;l<this.sashItems.length;l++){const{sash:c}=this.sashItems[l],h=this.viewItems[l];a+=h.size;const u=!(t[l]&&o[l+1]),f=!(n[l]&&r[l+1]);if(u&&f){const g=un(l,-1),p=un(l+1,this.viewItems.length),m=this.findFirstSnapIndex(g),_=this.findFirstSnapIndex(p),v=typeof m=="number"&&!this.viewItems[m].visible,y=typeof _=="number"&&!this.viewItems[_].visible;v&&r[l]&&(a>0||this.startSnappingEnabled)?c.state=ji.AtMinimum:y&&t[l]&&(a<this._contentSize||this.endSnappingEnabled)?c.state=ji.AtMaximum:c.state=ji.Disabled}else u&&!f?c.state=ji.AtMinimum:!u&&f?c.state=ji.AtMaximum:c.state=ji.Enabled}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(const t of e){const n=this.viewItems[t];if(n.visible&&n.snap)return t}for(const t of e){const n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}areViewsDistributed(){let e,t;for(const n of this.viewItems)if(e=e===void 0?n.size:Math.min(e,n.size),t=t===void 0?n.size:Math.max(t,n.size),t-e>2)return!1;return!0}dispose(){this.sashDragState?.disposable.dispose(),ai(this.viewItems),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[],super.dispose()}}const WK=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));mt(WK);class hb{static{this.TemplateId="row"}constructor(e,t,n){this.columns=e,this.getColumnSize=n,this.templateId=hb.TemplateId,this.renderedTemplates=new Set;const s=new Map(t.map(r=>[r.templateId,r]));this.renderers=[];for(const r of e){const o=s.get(r.templateId);if(!o)throw new Error(`Table cell renderer for template id ${r.templateId} not found.`);this.renderers.push(o)}}renderTemplate(e){const t=ie(e,_e(".monaco-table-tr")),n=[],s=[];for(let o=0;o<this.columns.length;o++){const a=this.renderers[o],l=ie(t,_e(".monaco-table-td",{"data-col-index":o}));l.style.width=`${this.getColumnSize(o)}px`,n.push(l),s.push(a.renderTemplate(l))}const r={container:e,cellContainers:n,cellTemplateData:s};return this.renderedTemplates.add(r),r}renderElement(e,t,n,s){for(let r=0;r<this.columns.length;r++){const a=this.columns[r].project(e);this.renderers[r].renderElement(a,t,n.cellTemplateData[r],s)}}disposeElement(e,t,n,s){for(let r=0;r<this.columns.length;r++){const o=this.renderers[r];if(o.disposeElement){const l=this.columns[r].project(e);o.disposeElement(l,t,n.cellTemplateData[r],s)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);gr(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}}function UK(i){return{getHeight(e){return i.getHeight(e)},getTemplateId(){return hb.TemplateId}}}class HK extends ${get minimumSize(){return this.column.minimumWidth??120}get maximumSize(){return this.column.maximumWidth??Number.POSITIVE_INFINITY}get onDidChange(){return this.column.onDidChangeWidthConstraints??W.None}constructor(e,t){super(),this.column=e,this.index=t,this._onDidLayout=new A,this.onDidLayout=this._onDidLayout.event,this.element=_e(".monaco-table-th",{"data-col-index":t},e.label),e.tooltip&&this._register(qs().setupManagedHover(ks("mouse"),this.element,e.tooltip))}layout(e){this._onDidLayout.fire([this.index,e])}}class uk{static{this.InstanceCount=0}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseClick(){return this.list.onMouseClick}get onMouseDblClick(){return this.list.onMouseDblClick}get onMouseMiddleClick(){return this.list.onMouseMiddleClick}get onPointer(){return this.list.onPointer}get onMouseUp(){return this.list.onMouseUp}get onMouseDown(){return this.list.onMouseDown}get onMouseOver(){return this.list.onMouseOver}get onMouseMove(){return this.list.onMouseMove}get onMouseOut(){return this.list.onMouseOut}get onTouchStart(){return this.list.onTouchStart}get onTap(){return this.list.onTap}get onContextMenu(){return this.list.onContextMenu}get onDidFocus(){return this.list.onDidFocus}get onDidBlur(){return this.list.onDidBlur}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollLeft(){return this.list.scrollLeft}set scrollLeft(e){this.list.scrollLeft=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}constructor(e,t,n,s,r,o){this.virtualDelegate=n,this.columns=s,this.domId=`table_id_${++uk.InstanceCount}`,this.disposables=new X,this.cachedWidth=0,this.cachedHeight=0,this.domNode=ie(t,_e(`.monaco-table.${this.domId}`));const a=s.map((h,u)=>this.disposables.add(new HK(h,u))),l={size:a.reduce((h,u)=>h+u.column.weight,0),views:a.map(h=>({size:h.column.weight,view:h}))};this.splitview=this.disposables.add(new BK(this.domNode,{orientation:Gi.HORIZONTAL,scrollbarVisibility:Nt.Hidden,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;const c=new hb(s,r,h=>this.splitview.getViewSize(h));this.list=this.disposables.add(new yi(e,this.domNode,UK(n),[c],o)),W.any(...a.map(h=>h.onDidLayout))(([h,u])=>c.layoutColumn(h,u),null,this.disposables),this.splitview.onDidSashReset(h=>{const u=s.reduce((g,p)=>g+p.weight,0),f=s[h].weight/u*this.cachedWidth;this.splitview.resizeView(h,f)},null,this.disposables),this.styleElement=On(this.domNode),this.style(MU)}getColumnLabels(){return this.columns.map(e=>e.label)}resizeColumn(e,t){const n=Math.round(t/100*this.cachedWidth);this.splitview.resizeView(e,n)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}rerender(){this.list.rerender()}row(e){return this.list.element(e)}indexOf(e){return this.list.indexOf(e)}get length(){return this.list.length}getHTMLElement(){return this.domNode}layout(e,t){e=e??hA(this.domNode),t=t??_p(this.domNode),this.cachedWidth=t,this.cachedHeight=e,this.splitview.layout(t);const n=e-this.virtualDelegate.headerRowHeight;this.list.getHTMLElement().style.height=`${n}px`,this.list.layout(n,t)}triggerTypeNavigation(){this.list.triggerTypeNavigation()}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}domFocus(){this.list.domFocus()}setAnchor(e){this.list.setAnchor(e)}getAnchor(){return this.list.getAnchor()}getSelectedElements(){return this.list.getSelectedElements()}setSelection(e,t){this.list.setSelection(e,t)}getSelection(){return this.list.getSelection()}setFocus(e,t){this.list.setFocus(e,t)}focusNext(e=1,t=!1,n){this.list.focusNext(e,t,n)}focusPrevious(e=1,t=!1,n){this.list.focusPrevious(e,t,n)}focusNextPage(e){return this.list.focusNextPage(e)}focusPreviousPage(e){return this.list.focusPreviousPage(e)}focusFirst(e){this.list.focusFirst(e)}focusLast(e){this.list.focusLast(e)}getFocus(){return this.list.getFocus()}getFocusedElements(){return this.list.getFocusedElements()}getRelativeTop(e){return this.list.getRelativeTop(e)}reveal(e,t){this.list.reveal(e,t)}dispose(){this.disposables.dispose()}}class dk{get size(){return this.nodes.size}constructor(e,t={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new nK(e,null,t),this.onDidSpliceModel=this.model.onDidSpliceModel,this.onDidSpliceRenderedNodes=this.model.onDidSpliceRenderedNodes,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,t.sorter&&(this.sorter={compare(n,s){return t.sorter.compare(n.element,s.element)}}),this.identityProvider=t.identityProvider}setChildren(e,t=Be.empty(),n={}){const s=this.getElementLocation(e);this._setChildren(s,this.preserveCollapseState(t),n)}_setChildren(e,t=Be.empty(),n){const s=new Set,r=new Set,o=l=>{if(l.element===null)return;const c=l;if(s.add(c.element),this.nodes.set(c.element,c),this.identityProvider){const h=this.identityProvider.getId(c.element).toString();r.add(h),this.nodesByIdentity.set(h,c)}n.onDidCreateNode?.(c)},a=l=>{if(l.element===null)return;const c=l;if(s.has(c.element)||this.nodes.delete(c.element),this.identityProvider){const h=this.identityProvider.getId(c.element).toString();r.has(h)||this.nodesByIdentity.delete(h)}n.onDidDeleteNode?.(c)};this.model.splice([...e,0],Number.MAX_VALUE,t,{...n,onDidCreateNode:o,onDidDeleteNode:a})}preserveCollapseState(e=Be.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),Be.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){const o=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(o)}if(!n){let o;return typeof t.collapsed>"u"?o=void 0:t.collapsed===Kn.Collapsed||t.collapsed===Kn.PreserveOrCollapsed?o=!0:t.collapsed===Kn.Expanded||t.collapsed===Kn.PreserveOrExpanded?o=!1:o=!!t.collapsed,{...t,children:this.preserveCollapseState(t.children),collapsed:o}}const s=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible;let r;return typeof t.collapsed>"u"||t.collapsed===Kn.PreserveOrCollapsed||t.collapsed===Kn.PreserveOrExpanded?r=n.collapsed:t.collapsed===Kn.Collapsed?r=!0:t.collapsed===Kn.Expanded?r=!1:r=!!t.collapsed,{...t,collapsible:s,collapsed:r,children:this.preserveCollapseState(t.children)}})}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}resort(e=null,t=!0){if(!this.sorter)return;const n=this.getElementLocation(e),s=this.model.getNode(n);this._setChildren(n,this.resortChildren(s,t),{})}resortChildren(e,t,n=!0){let s=[...e.children];return(t||n)&&(s=s.sort(this.sorter.compare.bind(this.sorter))),Be.map(s,r=>({element:r.element,collapsible:r.collapsible,collapsed:r.collapsed,children:this.resortChildren(r,t,!1)}))}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}getLastElementAncestor(e=null){const t=this.getElementLocation(e);return this.model.getLastElementAncestor(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const s=this.getElementLocation(e);return this.model.setCollapsed(s,t,n)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new Pi(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Pi(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new Pi(this.user,`Tree element not found: ${e}`);const n=this.model.getNodeLocation(t),s=this.model.getParentNodeLocation(n);return this.model.getNode(s).element}getElementLocation(e){if(e===null)return[];const t=this.nodes.get(e);if(!t)throw new Pi(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}function Ip(i){const e=[i.element],t=i.incompressible||!1;return{element:{elements:e,incompressible:t},children:Be.map(Be.from(i.children),Ip),collapsible:i.collapsible,collapsed:i.collapsed}}function Tp(i){const e=[i.element],t=i.incompressible||!1;let n,s;for(;[s,n]=Be.consume(Be.from(i.children),2),!(s.length!==1||s[0].incompressible);)i=s[0],e.push(i.element);return{element:{elements:e,incompressible:t},children:Be.map(Be.concat(s,n),Tp),collapsible:i.collapsible,collapsed:i.collapsed}}function uv(i,e=0){let t;return e<i.element.elements.length-1?t=[uv(i,e+1)]:t=Be.map(Be.from(i.children),n=>uv(n,0)),e===0&&i.element.incompressible?{element:i.element.elements[e],children:t,incompressible:!0,collapsible:i.collapsible,collapsed:i.collapsed}:{element:i.element.elements[e],children:t,collapsible:i.collapsible,collapsed:i.collapsed}}function yD(i){return uv(i,0)}function y5(i,e,t){return i.element===e?{...i,children:t}:{...i,children:Be.map(Be.from(i.children),n=>y5(n,e,t))}}const VK=i=>({getId(e){return e.elements.map(t=>i.getId(t).toString()).join("\0")}});class zK{get onDidSpliceRenderedNodes(){return this.model.onDidSpliceRenderedNodes}get onDidSpliceModel(){return this.model.onDidSpliceModel}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}get size(){return this.nodes.size}constructor(e,t={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new dk(e,t),this.enabled=typeof t.compressionEnabled>"u"?!0:t.compressionEnabled,this.identityProvider=t.identityProvider}setChildren(e,t=Be.empty(),n){const s=n.diffIdentityProvider&&VK(n.diffIdentityProvider);if(e===null){const p=Be.map(t,this.enabled?Tp:Ip);this._setChildren(null,p,{diffIdentityProvider:s,diffDepth:1/0});return}const r=this.nodes.get(e);if(!r)throw new Pi(this.user,"Unknown compressed tree node");const o=this.model.getNode(r),a=this.model.getParentNodeLocation(r),l=this.model.getNode(a),c=yD(o),h=y5(c,e,t),u=(this.enabled?Tp:Ip)(h),f=n.diffIdentityProvider?(p,m)=>n.diffIdentityProvider.getId(p)===n.diffIdentityProvider.getId(m):void 0;if(wi(u.element.elements,o.element.elements,f)){this._setChildren(r,u.children||Be.empty(),{diffIdentityProvider:s,diffDepth:1});return}const g=l.children.map(p=>p===o?u:p);this._setChildren(l.element,g,{diffIdentityProvider:s,diffDepth:o.depth-l.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const n=this.model.getNode().children,s=Be.map(n,yD),r=Be.map(s,e?Tp:Ip);this._setChildren(null,r,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){const s=new Set,r=a=>{for(const l of a.element.elements)s.add(l),this.nodes.set(l,a.element)},o=a=>{for(const l of a.element.elements)s.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,{...n,onDidCreateNode:r,onDidDeleteNode:o})}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}getLastElementAncestor(e){const t=typeof e>"u"?void 0:this.getCompressedNode(e);return this.model.getLastElementAncestor(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){const s=this.getCompressedNode(e);return this.model.setCollapsed(s,t,n)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}resort(e=null,t=!0){const n=this.getCompressedNode(e);this.model.resort(n,t)}getCompressedNode(e){if(e===null)return null;const t=this.nodes.get(e);if(!t)throw new Pi(this.user,`Tree element not found: ${e}`);return t}}const $K=i=>i[i.length-1];class fk{get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new fk(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e,t){this.unwrapper=e,this.node=t}}function qK(i,e){return{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(i(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){const s=t.elements;for(let r=0;r<s.length-1;r++){const o=e.filter.filter(s[r],n);n=mc(tg(o)?o.visibility:o)}return e.filter.filter(s[s.length-1],n)}}}}class KK{get onDidSpliceModel(){return W.map(this.model.onDidSpliceModel,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidSpliceRenderedNodes(){return W.map(this.model.onDidSpliceRenderedNodes,({start:e,deleteCount:t,elements:n})=>({start:e,deleteCount:t,elements:n.map(s=>this.nodeMapper.map(s))}))}get onDidChangeCollapseState(){return W.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return W.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}constructor(e,t={}){this.rootRef=null,this.elementMapper=t.elementMapper||$K;const n=s=>this.elementMapper(s.elements);this.nodeMapper=new lk(s=>new fk(n,s)),this.model=new zK(e,qK(n,t))}setChildren(e,t=Be.empty(),n={}){this.model.setChildren(e,t,n)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}getLastElementAncestor(e){const t=this.model.getLastElementAncestor(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}resort(e=null,t=!0){return this.model.resort(e,t)}getCompressedTreeNode(e=null){return this.model.getNode(e)}}class gk extends d5{get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}constructor(e,t,n,s,r={}){super(e,t,n,s,r),this.user=e}setChildren(e,t=Be.empty(),n){this.model.setChildren(e,t,n)}rerender(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}updateElementHeight(e,t){const n=this.model.getListIndex(e);n!==-1&&this.view.updateElementHeight(n,t)}resort(e,t=!0){this.model.resort(e,t)}hasElement(e){return this.model.has(e)}createModel(e,t){return new dk(e,t)}}class dv{get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}constructor(e,t,n){this._compressedTreeNodeProvider=e,this.stickyScrollDelegate=t,this.renderer=n,this.templateId=n.templateId,n.onDidChangeTwistieState&&(this.onDidChangeTwistieState=n.onDidChangeTwistieState)}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,s){let r=this.stickyScrollDelegate.getCompressedNode(e);r||(r=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),r.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,s)):(n.compressedTreeNode=r,this.renderer.renderCompressedElements(r,t,n.data,s))}disposeElement(e,t,n,s){n.compressedTreeNode?this.renderer.disposeCompressedElements?.(n.compressedTreeNode,t,n.data,s):this.renderer.disposeElement?.(e,t,n.data,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?.(e,t)??!1}}dv.__decorator=G([vt],dv.prototype,"compressedTreeNodeProvider",null);class GK{constructor(e){this.modelProvider=e,this.compressedStickyNodes=new Map}getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,n){if(this.compressedStickyNodes.clear(),e.length===0)return[];for(let s=0;s<e.length;s++){const r=e[s],o=r.position+r.height;if(s+1<e.length&&o+e[s+1].height>n||s>=t-1&&t<e.length){const l=e.slice(0,s),c=e.slice(s),h=this.compressStickyNodes(c);return[...l,h]}}return e}compressStickyNodes(e){if(e.length===0)throw new Error("Can't compress empty sticky nodes");const t=this.modelProvider();if(!t.isCompressionEnabled())return e[0];const n=[];for(let c=0;c<e.length;c++){const h=e[c],u=t.getCompressedTreeNode(h.node.element);if(u.element){if(c!==0&&u.element.incompressible)break;n.push(...u.element.elements)}}if(n.length<2)return e[0];const s=e[e.length-1],r={elements:n,incompressible:!1},o={...s.node,children:[],element:r},a=new Proxy(e[0].node,{}),l={node:a,startIndex:e[0].startIndex,endIndex:s.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(a,o),l}}function jK(i,e){return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=i().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}}}class S5 extends gk{constructor(e,t,n,s,r={}){const o=()=>this,a=new GK(()=>this.model),l=s.map(c=>new dv(o,a,c));super(e,t,n,l,{...jK(o,r),stickyScrollDelegate:a})}setChildren(e,t=Be.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t){return new KK(e,t)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}function P_(i){return{...i,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function fv(i,e){return e.parent?e.parent===i?!0:fv(i,e.parent):!1}function YK(i,e){return i===e||fv(i,e)||fv(e,i)}class pk{get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new pk(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class XK{constructor(e,t,n){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=n,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,s){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...ze.asClassNameArray(re.treeItemLoading)),!0):(t.classList.remove(...ze.asClassNameArray(re.treeItemLoading)),!1)}disposeElement(e,t,n,s){this.renderer.disposeElement?.(this.nodeMapper.map(e),t,n.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function SD(i){return{browserEvent:i.browserEvent,elements:i.elements.map(e=>e.element)}}function Jg(i){return{browserEvent:i.browserEvent,element:i.element&&i.element.element,target:i.target}}function QK(i){return{browserEvent:i.browserEvent,element:i.element&&i.element.element,anchor:i.anchor,isStickyScroll:i.isStickyScroll}}class ZK extends Kf{set context(e){this.data.context=e}get context(){return this.data.context}constructor(e){super(e.elements.map(t=>t.element)),this.data=e}}function B_(i){return i instanceof Kf?new ZK(i):i}class JK{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart?.(B_(e),t)}onDragOver(e,t,n,s,r,o=!0){return this.dnd.onDragOver(B_(e),t&&t.element,n,s,r)}drop(e,t,n,s,r){this.dnd.drop(B_(e),t&&t.element,n,s,r)}onDragEnd(e){this.dnd.onDragEnd?.(e)}dispose(){this.dnd.dispose()}}class eG extends c5{constructor(e,t,n){super(t,n),this.findProvider=e,this.isFindSessionActive=!1}filter(e,t){const n=super.filter(e,t);if(!this.isFindSessionActive||this.findMode===Xi.Highlight||!this.findProvider.isVisible)return n;const s=tg(n)?n.visibility:n;return mc(s)===Ye.Hidden?Ye.Hidden:this.findProvider.isVisible(e)?n:Ye.Hidden}}class tG extends h5{constructor(e,t,n,s,r){super(e,n,s,r),this.findProvider=t,this.filter=n,this.activeSession=!1,this.asyncWorkInProgress=!1,this.taskQueue=new Uy(250),this.disposables.add(fe(async()=>{this.activeSession&&await this.findProvider.endSession?.()}))}applyPattern(e){this.renderMessage(!1),this.activeTokenSource?.cancel(),this.activeTokenSource=new _r,this.taskQueue.trigger(()=>this.applyPatternAsync())}async applyPatternAsync(){const e=this.activeTokenSource?.token;if(!e||e.isCancellationRequested)return;const t=this.pattern;if(t===""){this.activeSession&&(this.asyncWorkInProgress=!0,await this.deactivateFindSession(),this.asyncWorkInProgress=!1,e.isCancellationRequested||(this.filter.reset(),super.applyPattern("")));return}this.activeSession||this.activateFindSession(),this.asyncWorkInProgress=!0,this.activeFindMetadata=void 0;const n=await this.findProvider.find(t,{matchType:this.matchType,findMode:this.mode},e);e.isCancellationRequested||n===void 0||(this.asyncWorkInProgress=!1,this.activeFindMetadata=n,this.filter.reset(),super.applyPattern(t),n.warningMessage&&this.renderMessage(!0,n.warningMessage))}activateFindSession(){this.activeSession=!0,this.filter.isFindSessionActive=!0,this.findProvider.startSession?.()}async deactivateFindSession(){this.activeSession=!1,this.filter.isFindSessionActive=!1,await this.findProvider.endSession?.()}render(){if(this.asyncWorkInProgress||!this.activeFindMetadata)return;const e=this.activeFindMetadata.matchCount===0&&this.pattern.length>0;this.renderMessage(e),this.pattern.length&&this.alertResults(this.activeFindMetadata.matchCount)}onDidToggleChange(e){this.toggles.set(e.id,e.isChecked),this.filter.findMode=this.mode,this.filter.findMatchType=this.matchType,this.placeholder=this.mode===Xi.Filter?d(40,"Type to filter"):d(41,"Type to search"),this.applyPattern(this.pattern)}shouldAllowFocus(e){return this.shouldFocusWhenNavigating(e)}shouldFocusWhenNavigating(e){if(!this.activeSession||!this.activeFindMetadata)return!0;const t=e.element?.element;return t&&this.activeFindMetadata.isMatch(t)?!0:!Va.isDefault(e.filterData)}}function k5(i){return i&&{...i,collapseByDefault:!0,identityProvider:i.identityProvider&&{getId(e){return i.identityProvider.getId(e.element)}},dnd:i.dnd&&new JK(i.dnd),multipleSelectionController:i.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return i.multipleSelectionController.isSelectionSingleChangeEvent({...e,element:e.element})},isSelectionRangeChangeEvent(e){return i.multipleSelectionController.isSelectionRangeChangeEvent({...e,element:e.element})}},accessibilityProvider:i.accessibilityProvider&&{...i.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:i.accessibilityProvider.getRole?e=>i.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:i.accessibilityProvider.isChecked?e=>!!i.accessibilityProvider?.isChecked(e.element):void 0,getAriaLabel(e){return i.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return i.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:i.accessibilityProvider.getWidgetRole?()=>i.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:i.accessibilityProvider.getAriaLevel&&(e=>i.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:i.accessibilityProvider.getActiveDescendantId&&(e=>i.accessibilityProvider.getActiveDescendantId(e.element))},filter:i.filter&&{filter(e,t){return i.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:i.keyboardNavigationLabelProvider&&{...i.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(e){return i.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}},sorter:void 0,expandOnlyOnTwistieClick:typeof i.expandOnlyOnTwistieClick>"u"?void 0:typeof i.expandOnlyOnTwistieClick!="function"?i.expandOnlyOnTwistieClick:e=>i.expandOnlyOnTwistieClick(e.element),defaultFindVisibility:e=>e.hasChildren&&e.stale?Ye.Visible:typeof i.defaultFindVisibility=="number"?i.defaultFindVisibility:typeof i.defaultFindVisibility>"u"?Ye.Recurse:i.defaultFindVisibility(e.element)}}function gv(i,e){e(i),i.children.forEach(t=>gv(t,e))}class C5{get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return W.map(this.tree.onDidChangeFocus,SD)}get onDidChangeSelection(){return W.map(this.tree.onDidChangeSelection,SD)}get onKeyDown(){return this.tree.onKeyDown}get onMouseClick(){return W.map(this.tree.onMouseClick,Jg)}get onMouseDblClick(){return W.map(this.tree.onMouseDblClick,Jg)}get onContextMenu(){return W.map(this.tree.onContextMenu,QK)}get onTap(){return W.map(this.tree.onTap,Jg)}get onPointer(){return W.map(this.tree.onPointer,Jg)}get onDidFocus(){return this.tree.onDidFocus}get onDidBlur(){return this.tree.onDidBlur}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidUpdateOptions(){return this.tree.onDidUpdateOptions}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get findMode(){return this.findController?this.findController.mode:this.tree.findMode}set findMode(e){this.findController?this.findController.mode=e:this.tree.findMode=e}get findMatchType(){return this.findController?this.findController.matchType:this.tree.findMatchType}set findMatchType(e){this.findController?this.findController.matchType=e:this.tree.findMatchType=e}get expandOnlyOnTwistieClick(){if(typeof this.tree.expandOnlyOnTwistieClick=="boolean")return this.tree.expandOnlyOnTwistieClick;const e=this.tree.expandOnlyOnTwistieClick;return t=>e(this.nodes.get(t===this.root.element?null:t)||null)}get onDidDispose(){return this.tree.onDidDispose}constructor(e,t,n,s,r,o={}){this.user=e,this.dataSource=r,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new A,this._onDidChangeNodeSlowState=new A,this.nodeMapper=new lk(c=>new pk(c)),this.disposables=new X,this.identityProvider=o.identityProvider,this.autoExpandSingleChildren=typeof o.autoExpandSingleChildren>"u"?!1:o.autoExpandSingleChildren,this.sorter=o.sorter,this.getDefaultCollapseState=c=>o.collapseByDefault?o.collapseByDefault(c)?Kn.PreserveOrCollapsed:Kn.PreserveOrExpanded:void 0;let a=!1,l;if(o.findProvider&&(o.findWidgetEnabled??!0)&&o.keyboardNavigationLabelProvider&&o.contextViewProvider&&(a=!0,l=new eG(o.findProvider,o.keyboardNavigationLabelProvider,o.filter)),this.tree=this.createTree(e,t,n,s,{...o,findWidgetEnabled:!a,filter:l??o.filter}),this.root=P_({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables),a){const c={styles:o.findWidgetStyles,showNotFoundMessage:o.showNotFoundMessage,defaultFindMatchType:o.defaultFindMatchType,defaultFindMode:o.defaultFindMode};this.findController=this.disposables.add(new tG(this.tree,o.findProvider,l,this.tree.options.contextViewProvider,c)),this.focusNavigationFilter=h=>this.findController.shouldFocusWhenNavigating(h),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType}else this.onDidChangeFindOpenState=this.tree.onDidChangeFindOpenState,this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType}createTree(e,t,n,s,r){const o=new ck(n),a=s.map(c=>new XK(c,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=k5(r)||{};return new gk(e,t,o,a,l)}updateOptions(e={}){this.findController&&(e.defaultFindMode!==void 0&&(this.findController.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.findController.matchType=e.defaultFindMatchType)),this.tree.updateOptions(e)}get options(){return this.tree.options}getHTMLElement(){return this.tree.getHTMLElement()}get contentHeight(){return this.tree.contentHeight}get contentWidth(){return this.tree.contentWidth}get onDidChangeContentHeight(){return this.tree.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.tree.onDidChangeContentWidth}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollLeft(){return this.tree.scrollLeft}set scrollLeft(e){this.tree.scrollLeft=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}get lastVisibleElement(){return this.tree.lastVisibleElement.element}get ariaLabel(){return this.tree.ariaLabel}set ariaLabel(e){this.tree.ariaLabel=e}domFocus(){this.tree.domFocus()}isDOMFocused(){return this.tree.isDOMFocused()}navigate(e){let t;return e&&(t=this.getDataNode(e)),new oG(this.tree.navigate(t))}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.refreshPromises.forEach(s=>s.cancel()),this.refreshPromises.clear(),this.root.element=e;const n=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)}async updateChildren(e=this.root.element,t=!0,n=!1,s){await this._updateChildren(e,t,n,void 0,s)}async _updateChildren(e=this.root.element,t=!0,n=!1,s,r){if(typeof this.root.element>"u")throw new Pi(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await W.toPromise(this._onDidRender.event));const o=this.getDataNode(e);if(await this.refreshAndRenderNode(o,t,s,r),n)try{this.tree.rerender(o)}catch{}}resort(e=this.root.element,t=!0){this.tree.resort(this.getDataNode(e),t)}hasNode(e){return e===this.root.element||this.nodes.has(e)}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}const t=this.getDataNode(e);this.tree.rerender(t)}updateElementHeight(e,t){const n=this.getDataNode(e);this.tree.updateElementHeight(n,t)}updateWidth(e){const t=this.getDataNode(e);this.tree.updateWidth(t)}getNode(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(n)}collapse(e,t=!1){const n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}async expand(e,t=!1){if(typeof this.root.element>"u")throw new Pi(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await W.toPromise(this._onDidRender.event));const n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(await this.root.refreshPromise,await W.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;const s=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(await this.root.refreshPromise,await W.toPromise(this._onDidRender.event)),s}toggleCollapsed(e,t=!1){return this.tree.toggleCollapsed(this.getDataNode(e),t)}expandAll(){this.tree.expandAll()}async expandTo(e){if(!this.dataSource.getParent)throw new Error("Can't expand to element without getParent method");const t=[];for(;!this.hasNode(e);)e=this.dataSource.getParent(e),e!==this.root.element&&t.push(e);for(const n of Be.reverse(t))await this.expand(n);this.tree.expandTo(this.getDataNode(e))}collapseAll(){this.tree.collapseAll()}isCollapsible(e){return this.tree.isCollapsible(this.getDataNode(e))}isCollapsed(e){return this.tree.isCollapsed(this.getDataNode(e))}triggerTypeNavigation(){this.tree.triggerTypeNavigation()}openFind(){this.findController?this.findController.open():this.tree.openFind()}closeFind(){this.findController?this.findController.close():this.tree.closeFind()}refilter(){this.tree.refilter()}setAnchor(e){this.tree.setAnchor(typeof e>"u"?void 0:this.getDataNode(e))}getAnchor(){return this.tree.getAnchor()?.element}setSelection(e,t){const n=e.map(s=>this.getDataNode(s));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){const n=e.map(s=>this.getDataNode(s));this.tree.setFocus(n,t)}focusNext(e=1,t=!1,n){this.tree.focusNext(e,t,n,this.focusNavigationFilter)}focusPrevious(e=1,t=!1,n){this.tree.focusPrevious(e,t,n,this.focusNavigationFilter)}focusNextPage(e){return this.tree.focusNextPage(e,this.focusNavigationFilter)}focusPreviousPage(e){return this.tree.focusPreviousPage(e,this.focusNavigationFilter)}focusLast(e){this.tree.focusLast(e,this.focusNavigationFilter)}focusFirst(e){this.tree.focusFirst(e,this.focusNavigationFilter)}getFocus(){return this.tree.getFocus().map(t=>t.element)}getStickyScrollFocus(){return this.tree.getStickyScrollFocus().map(t=>t.element)}getFocusedPart(){return this.tree.getFocusedPart()}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getRelativeTop(e){return this.tree.getRelativeTop(this.getDataNode(e))}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),n=this.tree.getFirstElementChild(t===this.root?null:t);return n&&n.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t){const n=this.identityProvider?.getId(e).toString();throw new Pi(this.user,`Data tree node not found${n?`: ${n}`:""}`)}return t}async refreshAndRenderNode(e,t,n,s){this.disposables.isDisposed||(await this.refreshNode(e,t,n),!this.disposables.isDisposed&&this.render(e,n,s))}async refreshNode(e,t,n){let s;if(this.subTreeRefreshPromises.forEach((r,o)=>{!s&&YK(o,e)&&(s=r.then(()=>this.refreshNode(e,t,n)))}),s)return s;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0,this.setChildren(e,[],t,n);return}return this.doRefreshSubTree(e,t,n)}async doRefreshSubTree(e,t,n){let s;e.refreshPromise=new Promise(r=>s=r),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{const r=await this.doRefreshNode(e,t,n);e.stale=!1,await sr.settled(r.map(o=>this.doRefreshSubTree(o,t,n)))}finally{s()}}async doRefreshNode(e,t,n){e.hasChildren=!!this.dataSource.hasChildren(e.element);let s;if(!e.hasChildren)s=Promise.resolve(Be.empty());else{const r=this.doGetChildren(e);if(e0(r))s=Promise.resolve(r);else{const o=sc(800);o.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),s=r.finally(()=>o.cancel())}}try{const r=await s;return this.setChildren(e,r,t,n)}catch(r){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),wc(r))return[];throw r}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const n=this.dataSource.getChildren(e.element);return e0(n)?this.processChildren(n):(t=gT(async()=>this.processChildren(await n)),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(pt))}setChildren(e,t,n,s){const r=[...t];if(e.children.length===0&&r.length===0)return[];const o=new Map,a=new Map;for(const h of e.children)o.set(h.element,h),this.identityProvider&&a.set(h.id,{node:h,collapsed:this.tree.hasElement(h)&&this.tree.isCollapsed(h)});const l=[],c=r.map(h=>{const u=!!this.dataSource.hasChildren(h);if(!this.identityProvider){const m=P_({element:h,parent:e,hasChildren:u,defaultCollapseState:this.getDefaultCollapseState(h)});return u&&m.defaultCollapseState===Kn.PreserveOrExpanded&&l.push(m),m}const f=this.identityProvider.getId(h).toString(),g=a.get(f);if(g){const m=g.node;return o.delete(m.element),this.nodes.delete(m.element),this.nodes.set(h,m),m.element=h,m.hasChildren=u,n?g.collapsed?(m.children.forEach(_=>gv(_,v=>this.nodes.delete(v.element))),m.children.splice(0,m.children.length),m.stale=!0):l.push(m):u&&!g.collapsed&&l.push(m),m}const p=P_({element:h,parent:e,id:f,hasChildren:u,defaultCollapseState:this.getDefaultCollapseState(h)});return s&&s.viewState.focus&&s.viewState.focus.indexOf(f)>-1&&s.focus.push(p),s&&s.viewState.selection&&s.viewState.selection.indexOf(f)>-1&&s.selection.push(p),(s&&s.viewState.expanded&&s.viewState.expanded.indexOf(f)>-1||u&&p.defaultCollapseState===Kn.PreserveOrExpanded)&&l.push(p),p});for(const h of o.values())gv(h,u=>this.nodes.delete(u.element));for(const h of c)this.nodes.set(h.element,h);return Pp(e.children,0,e.children.length,c),e!==this.root&&this.autoExpandSingleChildren&&c.length===1&&l.length===0&&(c[0].forceExpanded=!0,l.push(c[0])),l}render(e,t,n){const s=e.children.map(o=>this.asTreeElement(o,t)),r=n&&{...n,diffIdentityProvider:n.diffIdentityProvider&&{getId(o){return n.diffIdentityProvider.getId(o.element)}}};this.tree.setChildren(e===this.root?null:e,s,r),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:e.forceExpanded?(n=!1,e.forceExpanded=!1):n=e.defaultCollapseState,{element:e,children:e.hasChildren?Be.map(e.children,s=>this.asTreeElement(s,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}getViewState(){if(!this.identityProvider)throw new Pi(this.user,"Can't get tree view state without an identity provider");const e=a=>this.identityProvider.getId(a).toString(),t=this.getFocus().map(e),n=this.getSelection().map(e),s=[],r=this.tree.getNode(),o=[r];for(;o.length>0;){const a=o.pop();a!==r&&a.collapsible&&!a.collapsed&&s.push(e(a.element.element)),cy(o,o.length,a.children)}return{focus:t,selection:n,expanded:s,scrollTop:this.scrollTop}}dispose(){this.disposables.dispose(),this.tree.dispose()}}class mk{get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new mk(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}constructor(e){this.node=e}}class iG{constructor(e,t,n,s){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=n,this.onDidChangeTwistieState=s,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,s){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,s)}renderCompressedElements(e,t,n,s){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...ze.asClassNameArray(re.treeItemLoading)),!0):(t.classList.remove(...ze.asClassNameArray(re.treeItemLoading)),!1)}disposeElement(e,t,n,s){this.renderer.disposeElement?.(this.nodeMapper.map(e),t,n.templateData,s)}disposeCompressedElements(e,t,n,s){this.renderer.disposeCompressedElements?.(this.compressibleNodeMapperProvider().map(e),t,n.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=ai(this.disposables)}}function nG(i){const e=i&&k5(i);return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel(t){return i.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}}}}class sG extends C5{constructor(e,t,n,s,r,o,a={}){super(e,t,n,r,o,a),this.compressionDelegate=s,this.compressibleNodeMapper=new lk(l=>new mk(l)),this.filter=a.filter}getCompressedTreeNode(e){const t=this.getDataNode(e);return this.tree.getCompressedTreeNode(t).element}createTree(e,t,n,s,r){const o=new ck(n),a=s.map(c=>new iG(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),l=nG(r)||{};return new S5(e,t,o,a,l)}asTreeElement(e,t){return{incompressible:this.compressionDelegate.isIncompressible(e.element),...super.asTreeElement(e,t)}}getViewState(){if(!this.identityProvider)throw new Pi(this.user,"Can't get tree view state without an identity provider");const e=a=>this.identityProvider.getId(a).toString(),t=this.getFocus().map(e),n=this.getSelection().map(e),s=[],r=this.tree.getCompressedTreeNode(),o=[r];for(;o.length>0;){const a=o.pop();if(a!==r&&a.collapsible&&!a.collapsed)for(const l of a.element.elements)s.push(e(l.element));o.push(...a.children)}return{focus:t,selection:n,expanded:s,scrollTop:this.scrollTop}}render(e,t,n){if(!this.identityProvider)return super.render(e,t);const s=g=>this.identityProvider.getId(g).toString(),r=g=>{const p=new Set;for(const m of g){const _=this.tree.getCompressedTreeNode(m===this.root?null:m);if(_.element)for(const v of _.element.elements)p.add(s(v.element))}return p},o=r(this.tree.getSelection()),a=r(this.tree.getFocus());super.render(e,t,n);const l=this.getSelection();let c=!1;const h=this.getFocus();let u=!1;const f=g=>{const p=g.element;if(p)for(let m=0;m<p.elements.length;m++){const _=s(p.elements[m].element),v=p.elements[p.elements.length-1].element;o.has(_)&&l.indexOf(v)===-1&&(l.push(v),c=!0),a.has(_)&&h.indexOf(v)===-1&&(h.push(v),u=!0)}g.children.forEach(f)};f(this.tree.getCompressedTreeNode(e===this.root?null:e)),c&&this.setSelection(l),u&&this.setFocus(h)}processChildren(e){return this.filter&&(e=Be.filter(e,t=>{const n=this.filter.filter(t,Ye.Visible),s=rG(n);if(s===Ye.Recurse)throw new Error("Recursive tree visibility not supported in async data compressed trees");return s===Ye.Visible})),super.processChildren(e)}navigate(e){return super.navigate(e)}}function rG(i){return typeof i=="boolean"?i?Ye.Visible:Ye.Hidden:tg(i)?mc(i.visibility):mc(i)}class oG{constructor(e){this.navigator=e}current(){const e=this.navigator.current();return e===null?null:e.element}previous(){return this.navigator.previous(),this.current()}first(){return this.navigator.first(),this.current()}last(){return this.navigator.last(),this.current()}next(){return this.navigator.next(),this.current()}}class aG extends d5{constructor(e,t,n,s,r,o={}){super(e,t,n,s,o),this.user=e,this.dataSource=r,this.nodesByIdentity=new Map,this.identityProvider=o.identityProvider}getInput(){return this.input}setInput(e,t){if(t&&!this.identityProvider)throw new Pi(this.user,"Can't restore tree view state without an identity provider");if(this.input=e,!e){this.nodesByIdentity.clear(),this.model.setChildren(null,Be.empty());return}if(!t){this._refresh(e);return}const n=[],s=[],r=a=>{const l=this.identityProvider.getId(a).toString();return!t.expanded[l]},o=a=>{const l=this.identityProvider.getId(a.element).toString();t.focus.has(l)&&n.push(a.element),t.selection.has(l)&&s.push(a.element)};this._refresh(e,r,o),this.setFocus(n),this.setSelection(s),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)}updateChildren(e=this.input){if(typeof this.input>"u")throw new Pi(this.user,"Tree input not set");let t;this.identityProvider&&(t=n=>{const s=this.identityProvider.getId(n).toString(),r=this.nodesByIdentity.get(s);if(r)return r.collapsed}),this._refresh(e,t)}resort(e=this.input,t=!0){this.model.resort(e===this.input?null:e,t)}refresh(e){if(e===void 0){this.view.rerender();return}this.model.rerender(e)}_refresh(e,t,n){let s;if(this.identityProvider){const r=new Set,o=n;n=a=>{const l=this.identityProvider.getId(a.element).toString();r.add(l),this.nodesByIdentity.set(l,a),o?.(a)},s=a=>{const l=this.identityProvider.getId(a.element).toString();r.has(l)||this.nodesByIdentity.delete(l)}}this.model.setChildren(e===this.input?null:e,this.iterate(e,t).elements,{onDidCreateNode:n,onDidDeleteNode:s})}iterate(e,t){const n=[...this.dataSource.getChildren(e)];return{elements:Be.map(n,r=>{const{elements:o,size:a}=this.iterate(r,t),l=this.dataSource.hasChildren?this.dataSource.hasChildren(r):void 0,c=a===0?void 0:t&&t(r);return{element:r,children:o,collapsible:l,collapsed:c}}),size:n.length}}createModel(e,t){return new dk(e,t)}}const Fse=new oe("isMac",Me,d(1733,"Whether the operating system is macOS")),Pse=new oe("isLinux",rs,d(1734,"Whether the operating system is Linux")),Bse=new oe("isWindows",hi,d(1735,"Whether the operating system is Windows")),Wse=new oe("isWeb",zs,d(1736,"Whether the platform is a web browser")),Use=new oe("isMacNative",Me&&!zs,d(1737,"Whether the operating system is macOS on a non-browser platform")),Hse=new oe("isIOS",ja,d(1738,"Whether the operating system is iOS")),Vse=new oe("isMobile",xM,d(1739,"Whether the platform is a mobile web browser")),zse=new oe("isDevelopment",!1,!0),$se=new oe("productQualityType","",d(1740,"Quality type of VS Code")),E5="inputFocus",lG=new oe(E5,!1,d(1741,"Whether keyboard focus is inside an input box")),ro=be("listService");class cG{get lastFocusedList(){return this._lastFocusedWidget}constructor(){this.disposables=new X,this.lists=[],this._lastFocusedWidget=void 0}setLastFocusedList(e){e!==this._lastFocusedWidget&&(this._lastFocusedWidget?.getHTMLElement().classList.remove("last-focused"),this._lastFocusedWidget=e,this._lastFocusedWidget?.getHTMLElement().classList.add("last-focused"))}register(e,t){if(this.lists.some(s=>s.widget===e))throw new Error("Cannot register the same widget multiple times");const n={widget:e,extraContextKeys:t};return this.lists.push(n),il(e.getHTMLElement())&&this.setLastFocusedList(e),Kr(e.onDidFocus(()=>this.setLastFocusedList(e)),fe(()=>this.lists.splice(this.lists.indexOf(n),1)),e.onDidDispose(()=>{this.lists=this.lists.filter(s=>s!==n),this._lastFocusedWidget===e&&this.setLastFocusedList(void 0)}))}dispose(){this.disposables.dispose()}}const _f=new oe("listScrollAtBoundary","none"),qse=kt.or(_f.isEqualTo("top"),_f.isEqualTo("both")),Kse=kt.or(_f.isEqualTo("bottom"),_f.isEqualTo("both")),x5=new oe("listFocus",!0),L5=new oe("treestickyScrollFocused",!1),ub=new oe("listSupportsMultiselect",!0),Gse=kt.and(x5,kt.not(E5),L5.negate()),bk=new oe("listHasSelectionOrFocus",!1),_k=new oe("listDoubleSelection",!1),wk=new oe("listMultiSelection",!1),db=new oe("listSelectionNavigation",!1),hG=new oe("listSupportsFind",!0),uG=new oe("treeElementCanCollapse",!1),dG=new oe("treeElementHasParent",!1),fG=new oe("treeElementCanExpand",!1),gG=new oe("treeElementHasChild",!1),pG=new oe("treeFindOpen",!1),D5="listTypeNavigationMode",I5="listAutomaticKeyboardNavigation";function fb(i,e){const t=i.createScoped(e.getHTMLElement());return x5.bindTo(t),t}function gb(i,e){const t=_f.bindTo(i),n=()=>{const s=e.scrollTop===0,r=e.scrollHeight-e.renderHeight-e.scrollTop<1;s&&r?t.set("both"):s?t.set("top"):r?t.set("bottom"):t.set("none")};return n(),e.onDidScroll(n)}const Dc="workbench.list.multiSelectModifier",Ap="workbench.list.openMode",ws="workbench.list.horizontalScrolling",vk="workbench.list.defaultFindMode",yk="workbench.list.typeNavigationMode",i1="workbench.list.keyboardNavigation",mr="workbench.list.scrollByPage",Sk="workbench.list.defaultFindMatchType",wf="workbench.tree.indent",n1="workbench.tree.renderIndentGuides",br="workbench.list.smoothScrolling",eo="workbench.list.mouseWheelScrollSensitivity",to="workbench.list.fastScrollSensitivity",s1="workbench.tree.expandMode",r1="workbench.tree.enableStickyScroll",o1="workbench.tree.stickyScrollMaxItemCount";function io(i){return i.getValue(Dc)==="alt"}class mG extends ${constructor(e){super(),this.configurationService=e,this.useAltAsMultipleSelectionModifier=io(e),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(e=>{e.affectsConfiguration(Dc)&&(this.useAltAsMultipleSelectionModifier=io(this.configurationService))}))}isSelectionSingleChangeEvent(e){return this.useAltAsMultipleSelectionModifier?e.browserEvent.altKey:$N(e)}isSelectionRangeChangeEvent(e){return qN(e)}}function pb(i,e){const t=i.get(Vt),n=i.get($s),s=new X;return[{...e,keyboardNavigationDelegate:{mightProducePrintableCharacter(o){return n.mightProducePrintableCharacter(o)}},smoothScrolling:!!t.getValue(br),mouseWheelScrollSensitivity:t.getValue(eo),fastScrollSensitivity:t.getValue(to),multipleSelectionController:e.multipleSelectionController??s.add(new mG(t)),keyboardNavigationEventFilter:wG(n),scrollByPage:!!t.getValue(mr)},s]}let kD=class extends yi{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,n,s,r,o,a,l,c){const h=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!l.getValue(ws),[u,f]=c.invokeFunction(pb,r);super(e,t,n,s,{keyboardSupport:!1,...u,horizontalScrolling:h}),this.disposables.add(f),this.contextKeyService=fb(o,this),this.disposables.add(gb(this.contextKeyService,this)),this.listSupportsMultiSelect=ub.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),db.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this.listHasSelectionOrFocus=bk.bindTo(this.contextKeyService),this.listDoubleSelection=_k.bindTo(this.contextKeyService),this.listMultiSelection=wk.bindTo(this.contextKeyService),this.horizontalScrolling=r.horizontalScrolling,this._useAltAsMultipleSelectionModifier=io(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const p=this.getSelection(),m=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(p.length>0||m.length>0),this.listMultiSelection.set(p.length>1),this.listDoubleSelection.set(p.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const p=this.getSelection(),m=this.getFocus();this.listHasSelectionOrFocus.set(p.length>0||m.length>0)})),this.disposables.add(l.onDidChangeConfiguration(p=>{p.affectsConfiguration(Dc)&&(this._useAltAsMultipleSelectionModifier=io(l));let m={};if(p.affectsConfiguration(ws)&&this.horizontalScrolling===void 0){const _=!!l.getValue(ws);m={...m,horizontalScrolling:_}}if(p.affectsConfiguration(mr)){const _=!!l.getValue(mr);m={...m,scrollByPage:_}}if(p.affectsConfiguration(br)){const _=!!l.getValue(br);m={...m,smoothScrolling:_}}if(p.affectsConfiguration(eo)){const _=l.getValue(eo);m={...m,mouseWheelScrollSensitivity:_}}if(p.affectsConfiguration(to)){const _=l.getValue(to);m={...m,fastScrollSensitivity:_}}Object.keys(m).length>0&&this.updateOptions(m)})),this.navigator=new T5(this,{configurationService:l,...r}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Yf(e):jf)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}};kD=G([L(5,Mt),L(6,ro),L(7,Vt),L(8,xt)],kD);let CD=class extends AK{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,n,s,r,o,a,l,c){const h=typeof r.horizontalScrolling<"u"?r.horizontalScrolling:!!l.getValue(ws),[u,f]=c.invokeFunction(pb,r);super(e,t,n,s,{keyboardSupport:!1,...u,horizontalScrolling:h}),this.disposables=new X,this.disposables.add(f),this.contextKeyService=fb(o,this),this.disposables.add(gb(this.contextKeyService,this.widget)),this.horizontalScrolling=r.horizontalScrolling,this.listSupportsMultiSelect=ub.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(r.multipleSelectionSupport!==!1),db.bindTo(this.contextKeyService).set(!!r.selectionNavigation),this._useAltAsMultipleSelectionModifier=io(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(r.overrideStyles),this.disposables.add(l.onDidChangeConfiguration(p=>{p.affectsConfiguration(Dc)&&(this._useAltAsMultipleSelectionModifier=io(l));let m={};if(p.affectsConfiguration(ws)&&this.horizontalScrolling===void 0){const _=!!l.getValue(ws);m={...m,horizontalScrolling:_}}if(p.affectsConfiguration(mr)){const _=!!l.getValue(mr);m={...m,scrollByPage:_}}if(p.affectsConfiguration(br)){const _=!!l.getValue(br);m={...m,smoothScrolling:_}}if(p.affectsConfiguration(eo)){const _=l.getValue(eo);m={...m,mouseWheelScrollSensitivity:_}}if(p.affectsConfiguration(to)){const _=l.getValue(to);m={...m,fastScrollSensitivity:_}}Object.keys(m).length>0&&this.updateOptions(m)})),this.navigator=new T5(this,{configurationService:l,...r}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Yf(e):jf)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}dispose(){this.disposables.dispose(),super.dispose()}};CD=G([L(5,Mt),L(6,ro),L(7,Vt),L(8,xt)],CD);let ED=class extends uk{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,n,s,r,o,a,l,c,h){const u=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!c.getValue(ws),[f,g]=h.invokeFunction(pb,o);super(e,t,n,s,r,{keyboardSupport:!1,...f,horizontalScrolling:u}),this.disposables.add(g),this.contextKeyService=fb(a,this),this.disposables.add(gb(this.contextKeyService,this)),this.listSupportsMultiSelect=ub.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),db.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=bk.bindTo(this.contextKeyService),this.listDoubleSelection=_k.bindTo(this.contextKeyService),this.listMultiSelection=wk.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=io(c),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{const m=this.getSelection(),_=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(m.length>0||_.length>0),this.listMultiSelection.set(m.length>1),this.listDoubleSelection.set(m.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{const m=this.getSelection(),_=this.getFocus();this.listHasSelectionOrFocus.set(m.length>0||_.length>0)})),this.disposables.add(c.onDidChangeConfiguration(m=>{m.affectsConfiguration(Dc)&&(this._useAltAsMultipleSelectionModifier=io(c));let _={};if(m.affectsConfiguration(ws)&&this.horizontalScrolling===void 0){const v=!!c.getValue(ws);_={..._,horizontalScrolling:v}}if(m.affectsConfiguration(mr)){const v=!!c.getValue(mr);_={..._,scrollByPage:v}}if(m.affectsConfiguration(br)){const v=!!c.getValue(br);_={..._,smoothScrolling:v}}if(m.affectsConfiguration(eo)){const v=c.getValue(eo);_={..._,mouseWheelScrollSensitivity:v}}if(m.affectsConfiguration(to)){const v=c.getValue(to);_={..._,fastScrollSensitivity:v}}Object.keys(_).length>0&&this.updateOptions(_)})),this.navigator=new bG(this,{configurationService:c,...o}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?Yf(e):jf)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}dispose(){this.disposables.dispose(),super.dispose()}};ED=G([L(6,Mt),L(7,ro),L(8,Vt),L(9,xt)],ED);function Qse(i="keydown",e,t){const n=new KeyboardEvent(i);return n.preserveFocus=e,n.pinned=t,n.__forceEvent=!0,n}class kk extends ${constructor(e,t){super(),this.widget=e,this._onDidOpen=this._register(new A),this.onDidOpen=this._onDidOpen.event,this._register(W.filter(this.widget.onDidChangeSelection,n=>fa(n.browserEvent))(n=>this.onSelectionFromKeyboard(n))),this._register(this.widget.onPointer(n=>this.onPointer(n.element,n.browserEvent))),this._register(this.widget.onMouseDblClick(n=>this.onMouseDblClick(n.element,n.browserEvent))),typeof t?.openOnSingleClick!="boolean"&&t?.configurationService?(this.openOnSingleClick=t?.configurationService.getValue(Ap)!=="doubleClick",this._register(t?.configurationService.onDidChangeConfiguration(n=>{n.affectsConfiguration(Ap)&&(this.openOnSingleClick=t?.configurationService.getValue(Ap)!=="doubleClick")}))):this.openOnSingleClick=t?.openOnSingleClick??!0}onSelectionFromKeyboard(e){if(e.elements.length!==1)return;const t=e.browserEvent,n=typeof t.preserveFocus=="boolean"?t.preserveFocus:!0,s=typeof t.pinned=="boolean"?t.pinned:!n;this._open(this.getSelectedElement(),n,s,!1,e.browserEvent)}onPointer(e,t){if(!this.openOnSingleClick||t.detail===2)return;const s=t.button===1,r=!0,o=s,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,r,o,a,t)}onMouseDblClick(e,t){if(!t)return;const n=t.target;if(n.classList.contains("monaco-tl-twistie")||n.classList.contains("monaco-icon-label")&&n.classList.contains("folder-icon")&&t.offsetX<16)return;const r=!1,o=!0,a=t.ctrlKey||t.metaKey||t.altKey;this._open(e,r,o,a,t)}_open(e,t,n,s,r){e&&this._onDidOpen.fire({editorOptions:{preserveFocus:t,pinned:n,revealIfVisible:!0},sideBySide:s,element:e,browserEvent:r})}}class T5 extends kk{constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class bG extends kk{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}}class _G extends kk{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelection()[0]??void 0}}function wG(i){let e=!1;return t=>{if(t.toKeyCodeChord().isModifierKey())return!1;if(e)return e=!1,!1;const n=i.softDispatch(t,t.target);return n.kind===dr.MoreChordsNeeded?(e=!0,!1):(e=!1,n.kind===dr.NoMatchingKb)}}let pv=class extends gk{get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,s,r,o,a,l,c){const{options:h,getTypeNavigationMode:u,disposable:f}=o.invokeFunction(ig,r);super(e,t,n,s,h),this.disposables.add(f),this.internals=new bc(this,r,u,r.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};pv=G([L(5,xt),L(6,Mt),L(7,ro),L(8,Vt)],pv);let xD=class extends S5{get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,s,r,o,a,l,c){const{options:h,getTypeNavigationMode:u,disposable:f}=o.invokeFunction(ig,r);super(e,t,n,s,h),this.disposables.add(f),this.internals=new bc(this,r,u,r.overrideStyles,a,l,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};xD=G([L(5,xt),L(6,Mt),L(7,ro),L(8,Vt)],xD);let LD=class extends aG{get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,s,r,o,a,l,c,h){const{options:u,getTypeNavigationMode:f,disposable:g}=a.invokeFunction(ig,o);super(e,t,n,s,r,u),this.disposables.add(g),this.internals=new bc(this,o,f,o.overrideStyles,l,c,h),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles!==void 0&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};LD=G([L(6,xt),L(7,Mt),L(8,ro),L(9,Vt)],LD);let DD=class extends C5{get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,s,r,o,a,l,c,h){const{options:u,getTypeNavigationMode:f,disposable:g}=a.invokeFunction(ig,o);super(e,t,n,s,r,u),this.disposables.add(g),this.internals=new bc(this,o,f,o.overrideStyles,l,c,h),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};DD=G([L(6,xt),L(7,Mt),L(8,ro),L(9,Vt)],DD);let ID=class extends sG{get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,s,r,o,a,l,c,h,u){const{options:f,getTypeNavigationMode:g,disposable:p}=l.invokeFunction(ig,a);super(e,t,n,s,r,o,f),this.disposables.add(p),this.internals=new bc(this,a,g,a.overrideStyles,c,h,u),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};ID=G([L(7,xt),L(8,Mt),L(9,ro),L(10,Vt)],ID);function A5(i){const e=i.getValue(vk);if(e==="highlight")return Xi.Highlight;if(e==="filter")return Xi.Filter;const t=i.getValue(i1);if(t==="simple"||t==="highlight")return Xi.Highlight;if(t==="filter")return Xi.Filter}function N5(i){const e=i.getValue(Sk);if(e==="fuzzy")return Xn.Fuzzy;if(e==="contiguous")return Xn.Contiguous}function ig(i,e){const t=i.get(Vt),n=i.get(Uf),s=i.get(Mt),r=i.get(xt),o=()=>{const f=s.getContextKeyValue(D5);if(f==="automatic")return Hr.Automatic;if(f==="trigger"||s.getContextKeyValue(I5)===!1)return Hr.Trigger;const p=t.getValue(yk);if(p==="automatic")return Hr.Automatic;if(p==="trigger")return Hr.Trigger},a=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!t.getValue(ws),[l,c]=r.invokeFunction(pb,e),h=e.paddingBottom,u=e.renderIndentGuides!==void 0?e.renderIndentGuides:t.getValue(n1);return{getTypeNavigationMode:o,disposable:c,options:{keyboardSupport:!1,...l,indent:typeof t.getValue(wf)=="number"?t.getValue(wf):void 0,renderIndentGuides:u,smoothScrolling:!!t.getValue(br),defaultFindMode:A5(t),defaultFindMatchType:N5(t),horizontalScrolling:a,scrollByPage:!!t.getValue(mr),paddingBottom:h,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:e.expandOnlyOnTwistieClick??t.getValue(s1)==="doubleClick",contextViewProvider:n,findWidgetStyles:aH,enableStickyScroll:!!t.getValue(r1),stickyScrollMaxItemCount:Number(t.getValue(o1))}}}let bc=class{get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,n,s,r,o,a){this.tree=e,this.disposables=[],this.contextKeyService=fb(r,e),this.disposables.push(gb(this.contextKeyService,e)),this.listSupportsMultiSelect=ub.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),db.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.listSupportFindWidget=hG.bindTo(this.contextKeyService),this.listSupportFindWidget.set(t.findWidgetEnabled??!0),this.hasSelectionOrFocus=bk.bindTo(this.contextKeyService),this.hasDoubleSelection=_k.bindTo(this.contextKeyService),this.hasMultiSelection=wk.bindTo(this.contextKeyService),this.treeElementCanCollapse=uG.bindTo(this.contextKeyService),this.treeElementHasParent=dG.bindTo(this.contextKeyService),this.treeElementCanExpand=fG.bindTo(this.contextKeyService),this.treeElementHasChild=gG.bindTo(this.contextKeyService),this.treeFindOpen=pG.bindTo(this.contextKeyService),this.treeStickyScrollFocused=L5.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=io(a),this.updateStyleOverrides(s);const c=()=>{const u=e.getFocus()[0];if(!u)return;const f=e.getNode(u);this.treeElementCanCollapse.set(f.collapsible&&!f.collapsed),this.treeElementHasParent.set(!!e.getParentElement(u)),this.treeElementCanExpand.set(f.collapsible&&f.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(u))},h=new Set;h.add(D5),h.add(I5),this.disposables.push(this.contextKeyService,o.register(e),e.onDidChangeSelection(()=>{const u=e.getSelection(),f=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(u.length>0||f.length>0),this.hasMultiSelection.set(u.length>1),this.hasDoubleSelection.set(u.length===2)})}),e.onDidChangeFocus(()=>{const u=e.getSelection(),f=e.getFocus();this.hasSelectionOrFocus.set(u.length>0||f.length>0),c()}),e.onDidChangeCollapseState(c),e.onDidChangeModel(c),e.onDidChangeFindOpenState(u=>this.treeFindOpen.set(u)),e.onDidChangeStickyScrollFocused(u=>this.treeStickyScrollFocused.set(u)),a.onDidChangeConfiguration(u=>{let f={};if(u.affectsConfiguration(Dc)&&(this._useAltAsMultipleSelectionModifier=io(a)),u.affectsConfiguration(wf)){const g=a.getValue(wf);f={...f,indent:g}}if(u.affectsConfiguration(n1)&&t.renderIndentGuides===void 0){const g=a.getValue(n1);f={...f,renderIndentGuides:g}}if(u.affectsConfiguration(br)){const g=!!a.getValue(br);f={...f,smoothScrolling:g}}if(u.affectsConfiguration(vk)||u.affectsConfiguration(i1)){const g=A5(a);f={...f,defaultFindMode:g}}if(u.affectsConfiguration(yk)||u.affectsConfiguration(i1)){const g=n();f={...f,typeNavigationMode:g}}if(u.affectsConfiguration(Sk)){const g=N5(a);f={...f,defaultFindMatchType:g}}if(u.affectsConfiguration(ws)&&t.horizontalScrolling===void 0){const g=!!a.getValue(ws);f={...f,horizontalScrolling:g}}if(u.affectsConfiguration(mr)){const g=!!a.getValue(mr);f={...f,scrollByPage:g}}if(u.affectsConfiguration(s1)&&t.expandOnlyOnTwistieClick===void 0&&(f={...f,expandOnlyOnTwistieClick:a.getValue(s1)==="doubleClick"}),u.affectsConfiguration(r1)){const g=a.getValue(r1);f={...f,enableStickyScroll:g}}if(u.affectsConfiguration(o1)){const g=Math.max(1,a.getValue(o1));f={...f,stickyScrollMaxItemCount:g}}if(u.affectsConfiguration(eo)){const g=a.getValue(eo);f={...f,mouseWheelScrollSensitivity:g}}if(u.affectsConfiguration(to)){const g=a.getValue(to);f={...f,fastScrollSensitivity:g}}Object.keys(f).length>0&&e.updateOptions(f)}),this.contextKeyService.onDidChangeContext(u=>{u.affectsSome(h)&&e.updateOptions({typeNavigationMode:n()})})),this.navigator=new _G(e,{configurationService:a,...t}),this.disposables.push(this.navigator)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?Yf(e):jf)}dispose(){this.disposables=ai(this.disposables)}};bc=G([L(4,Mt),L(5,ro),L(6,Vt)],bc);const vG=wt.as(Ps.Configuration);vG.registerConfiguration({id:"workbench",order:7,title:d(1901,"Workbench"),type:"object",properties:{[Dc]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[d(1902,"Maps to `Control` on Windows and Linux and to `Command` on macOS."),d(1903,"Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:d(1904,"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[Ap]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:d(1905,"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[ws]:{type:"boolean",default:!1,description:d(1906,"Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[mr]:{type:"boolean",default:!1,description:d(1907,"Controls whether clicks in the scrollbar scroll page by page.")},[wf]:{type:"number",default:8,minimum:4,maximum:40,description:d(1908,"Controls tree indentation in pixels.")},[n1]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:d(1909,"Controls whether the tree should render indent guides.")},[br]:{type:"boolean",default:!1,description:d(1910,"Controls whether lists and trees have smooth scrolling.")},[eo]:{type:"number",default:1,markdownDescription:d(1911,"A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[to]:{type:"number",default:5,markdownDescription:d(1912,"Scrolling speed multiplier when pressing `Alt`.")},[vk]:{type:"string",enum:["highlight","filter"],enumDescriptions:[d(1913,"Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),d(1914,"Filter elements when searching.")],default:"highlight",description:d(1915,"Controls the default find mode for lists and trees in the workbench.")},[i1]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[d(1916,"Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),d(1917,"Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),d(1918,"Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:d(1919,"Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:d(1920,"Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[Sk]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[d(1921,"Use fuzzy matching when searching."),d(1922,"Use contiguous matching when searching.")],default:"fuzzy",description:d(1923,"Controls the type of matching used when searching lists and trees in the workbench.")},[s1]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:d(1924,"Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[r1]:{type:"boolean",default:!0,description:d(1925,"Controls whether sticky scrolling is enabled in trees.")},[o1]:{type:"number",minimum:1,default:7,markdownDescription:d(1926,"Controls the number of sticky elements displayed in the tree when {0} is enabled.","`#workbench.tree.enableStickyScroll#`")},[yk]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:d(1927,"Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});var mv;const Lr=_e;class R5{constructor(e,t,n){this.index=e,this.hasCheckbox=t,this._hidden=!1,this._init=new Fi(()=>{const s=n.label??"",r=zu(s).text.trim(),o=n.ariaLabel||[s,this.saneDescription,this.saneDetail].map(a=>vM(a)).filter(a=>!!a).join(", ");return{saneLabel:s,saneSortLabel:r,saneAriaLabel:o}}),this._saneDescription=n.description,this._saneTooltip=n.tooltip}get saneLabel(){return this._init.value.saneLabel}get saneSortLabel(){return this._init.value.saneSortLabel}get saneAriaLabel(){return this._init.value.saneAriaLabel}get element(){return this._element}set element(e){this._element=e}get hidden(){return this._hidden}set hidden(e){this._hidden=e}get saneDescription(){return this._saneDescription}set saneDescription(e){this._saneDescription=e}get saneDetail(){return this._saneDetail}set saneDetail(e){this._saneDetail=e}get saneTooltip(){return this._saneTooltip}set saneTooltip(e){this._saneTooltip=e}get labelHighlights(){return this._labelHighlights}set labelHighlights(e){this._labelHighlights=e}get descriptionHighlights(){return this._descriptionHighlights}set descriptionHighlights(e){this._descriptionHighlights=e}get detailHighlights(){return this._detailHighlights}set detailHighlights(e){this._detailHighlights=e}}class ki extends R5{constructor(e,t,n,s,r,o){super(e,t,r),this.fireButtonTriggered=n,this._onChecked=s,this.item=r,this._separator=o,this._checked=!1,this.onChecked=t?W.map(W.filter(this._onChecked.event,a=>a.element===this),a=>a.checked):W.None,this._saneDetail=r.detail,this._labelHighlights=r.highlights?.label,this._descriptionHighlights=r.highlights?.description,this._detailHighlights=r.highlights?.detail}get separator(){return this._separator}set separator(e){this._separator=e}get checked(){return this._checked}set checked(e){e!==this._checked&&(this._checked=e,this._onChecked.fire({element:this,checked:e}))}get checkboxDisabled(){return!!this.item.disabled}}var Fr;(function(i){i[i.NONE=0]="NONE",i[i.MOUSE_HOVER=1]="MOUSE_HOVER",i[i.ACTIVE_ITEM=2]="ACTIVE_ITEM"})(Fr||(Fr={}));class bl extends R5{constructor(e,t,n){super(e,!1,n),this.fireSeparatorButtonTriggered=t,this.separator=n,this.children=new Array,this.focusInsideSeparator=Fr.NONE}}class yG{getHeight(e){return e instanceof bl?30:e.saneDetail?44:22}getTemplateId(e){return e instanceof ki?a1.ID:mb.ID}}class SG{getWidgetAriaLabel(){return d(1970,"Quick Input")}getAriaLabel(e){return e.separator?.label?`${e.saneAriaLabel}, ${e.separator.label}`:e.saneAriaLabel}getWidgetRole(){return"listbox"}getRole(e){return e.hasCheckbox?"checkbox":"option"}isChecked(e){if(!(!e.hasCheckbox||!(e instanceof ki)))return{get value(){return e.checked},onDidChange:t=>e.onChecked(()=>t())}}}class M5{constructor(e){this.hoverDelegate=e}renderTemplate(e){const t=Object.create(null);t.toDisposeElement=new X,t.toDisposeTemplate=new X,t.entry=ie(e,Lr(".quick-input-list-entry"));const n=ie(t.entry,Lr("label.quick-input-list-label"));t.outerLabel=n,t.checkbox=t.toDisposeTemplate.add(new vs),t.toDisposeTemplate.add(Fs(n,j.CLICK,c=>{if(t.checkbox.value&&!c.defaultPrevented&&t.checkbox.value.enabled){const h=!t.checkbox.value.checked;t.checkbox.value.checked=h,t.element.checked=h}}));const s=ie(n,Lr(".quick-input-list-rows")),r=ie(s,Lr(".quick-input-list-row")),o=ie(s,Lr(".quick-input-list-row"));t.label=new mD(r,{supportHighlights:!0,supportDescriptionHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.label),t.icon=tS(t.label.element,Lr(".quick-input-list-icon"));const a=ie(r,Lr(".quick-input-list-entry-keybinding"));t.keybinding=new ak(a,An),t.toDisposeTemplate.add(t.keybinding);const l=ie(o,Lr(".quick-input-list-label-meta"));return t.detail=new mD(l,{supportHighlights:!0,supportIcons:!0,hoverDelegate:this.hoverDelegate}),t.toDisposeTemplate.add(t.detail),t.separator=ie(t.entry,Lr(".quick-input-list-separator")),t.actionBar=new Ql(t.entry,this.hoverDelegate?{hoverDelegate:this.hoverDelegate}:void 0),t.actionBar.domNode.classList.add("quick-input-list-entry-action-bar"),t.toDisposeTemplate.add(t.actionBar),t}disposeTemplate(e){e.toDisposeElement.dispose(),e.toDisposeTemplate.dispose()}disposeElement(e,t,n){n.toDisposeElement.clear(),n.actionBar.clear()}}let a1=class extends M5{static{mv=this}static{this.ID="quickpickitem"}constructor(e,t){super(e),this.themeService=t,this._itemsWithSeparatorsFrequency=new Map}get templateId(){return mv.ID}ensureCheckbox(e,t){if(!e.hasCheckbox){t.checkbox.value?.domNode.remove(),t.checkbox.clear();return}let n=t.checkbox.value;n?n.setTitle(e.saneLabel):(n=new cb(e.saneLabel,e.checked,{...e4,size:15}),t.checkbox.value=n,t.outerLabel.prepend(n.domNode)),e.checkboxDisabled?n.disable():n.enable(),n.checked=e.checked,t.toDisposeElement.add(e.onChecked(s=>n.checked=s)),t.toDisposeElement.add(n.onChange(()=>e.checked=n.checked))}renderElement(e,t,n){const s=e.element;n.element=s,s.element=n.entry??void 0;const r=s.item;s.element.classList.toggle("indented",!!r.indented),s.element.classList.toggle("not-pickable",s.item.pickable===!1),this.ensureCheckbox(s,n);const{labelHighlights:o,descriptionHighlights:a,detailHighlights:l}=s;if(r.iconPath){const f=H1(this.themeService.getColorTheme().type)?r.iconPath.dark:r.iconPath.light??r.iconPath.dark,g=Y.revive(f);n.icon.className="quick-input-list-icon",n.icon.style.backgroundImage=pr(g)}else n.icon.style.backgroundImage="",n.icon.className=r.iconClass?`quick-input-list-icon ${r.iconClass}`:"";let c;!s.saneTooltip&&s.saneDescription&&(c={markdown:{value:Gr(s.saneDescription),supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDescription});const h={matches:o||[],descriptionTitle:c,descriptionMatches:a||[],labelEscapeNewLines:!0};if(h.extraClasses=r.iconClasses,h.italic=r.italic,h.strikethrough=r.strikethrough,n.entry.classList.remove("quick-input-list-separator-as-item"),n.label.setLabel(s.saneLabel,s.saneDescription,h),n.keybinding.set(r.keybinding),s.saneDetail){let f;s.saneTooltip||(f={markdown:{value:Gr(s.saneDetail),supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDetail}),n.detail.element.style.display="",n.detail.setLabel(s.saneDetail,void 0,{matches:l,title:f,labelEscapeNewLines:!0})}else n.detail.element.style.display="none";s.separator?.label?(n.separator.textContent=s.separator.label,n.separator.style.display="",this.addItemWithSeparator(s)):n.separator.style.display="none",n.entry.classList.toggle("quick-input-list-separator-border",!!s.separator);const u=r.buttons;u&&u.length?(n.actionBar.push(u.map((f,g)=>Dd(f,`id-${g}`,()=>s.fireButtonTriggered({button:f,item:s.item}))),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions")}disposeElement(e,t,n){this.removeItemWithSeparator(e.element),super.disposeElement(e,t,n)}isItemWithSeparatorVisible(e){return this._itemsWithSeparatorsFrequency.has(e)}addItemWithSeparator(e){this._itemsWithSeparatorsFrequency.set(e,(this._itemsWithSeparatorsFrequency.get(e)||0)+1)}removeItemWithSeparator(e){const t=this._itemsWithSeparatorsFrequency.get(e)||0;t>1?this._itemsWithSeparatorsFrequency.set(e,t-1):this._itemsWithSeparatorsFrequency.delete(e)}};a1=mv=G([L(1,no)],a1);class mb extends M5{constructor(){super(...arguments),this._visibleSeparatorsFrequency=new Map}static{this.ID="quickpickseparator"}get templateId(){return mb.ID}get visibleSeparators(){return[...this._visibleSeparatorsFrequency.keys()]}isSeparatorVisible(e){return this._visibleSeparatorsFrequency.has(e)}renderElement(e,t,n){const s=e.element;n.element=s,s.element=n.entry??void 0,s.element.classList.toggle("focus-inside",!!s.focusInsideSeparator);const r=s.separator,{labelHighlights:o,descriptionHighlights:a}=s;n.icon.style.backgroundImage="",n.icon.className="";let l;!s.saneTooltip&&s.saneDescription&&(l={markdown:{value:Gr(s.saneDescription),supportThemeIcons:!0},markdownNotSupportedFallback:s.saneDescription});const c={matches:o||[],descriptionTitle:l,descriptionMatches:a||[],labelEscapeNewLines:!0};n.entry.classList.add("quick-input-list-separator-as-item"),n.label.setLabel(s.saneLabel,s.saneDescription,c),n.separator.style.display="none",n.entry.classList.add("quick-input-list-separator-border");const h=r.buttons;h&&h.length?(n.actionBar.push(h.map((u,f)=>Dd(u,`id-${f}`,()=>s.fireSeparatorButtonTriggered({button:u,separator:s.separator}))),{icon:!0,label:!1}),n.entry.classList.add("has-actions")):n.entry.classList.remove("has-actions"),this.addSeparator(s)}disposeElement(e,t,n){this.removeSeparator(e.element),this.isSeparatorVisible(e.element)||e.element.element?.classList.remove("focus-inside"),super.disposeElement(e,t,n)}addSeparator(e){this._visibleSeparatorsFrequency.set(e,(this._visibleSeparatorsFrequency.get(e)||0)+1)}removeSeparator(e){const t=this._visibleSeparatorsFrequency.get(e)||0;t>1?this._visibleSeparatorsFrequency.set(e,t-1):this._visibleSeparatorsFrequency.delete(e)}}let _c=class extends ${constructor(e,t,n,s,r,o){super(),this.parent=e,this.hoverDelegate=t,this.linkOpenerDelegate=n,this.accessibilityService=o,this._onKeyDown=new A,this.onKeyDown=this._onKeyDown.event,this._onLeave=new A,this.onLeave=this._onLeave.event,this._visibleCountObservable=Os("VisibleCount",0),this.onChangedVisibleCount=W.fromObservable(this._visibleCountObservable,this._store),this._allVisibleCheckedObservable=Os("AllVisibleChecked",!1),this.onChangedAllVisibleChecked=W.fromObservable(this._allVisibleCheckedObservable,this._store),this._checkedCountObservable=Os("CheckedCount",0),this.onChangedCheckedCount=W.fromObservable(this._checkedCountObservable,this._store),this._checkedElementsObservable=K4({equalsFn:wi},new Array),this.onChangedCheckedElements=W.fromObservable(this._checkedElementsObservable,this._store),this._onButtonTriggered=new A,this.onButtonTriggered=this._onButtonTriggered.event,this._onSeparatorButtonTriggered=new A,this.onSeparatorButtonTriggered=this._onSeparatorButtonTriggered.event,this._elementChecked=new A,this._elementCheckedEventBufferer=new Ef,this._hasCheckboxes=!1,this._inputElements=new Array,this._elementTree=new Array,this._itemElements=new Array,this._elementDisposable=this._register(new X),this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._matchOnMeta=!0,this._sortByLabel=!0,this._shouldLoop=!0,this._container=ie(this.parent,Lr(".quick-input-list")),this._separatorRenderer=new mb(t),this._itemRenderer=r.createInstance(a1,t),this._tree=this._register(r.createInstance(pv,"QuickInput",this._container,new yG,[this._itemRenderer,this._separatorRenderer],{filter:{filter(a){return a.hidden?Ye.Hidden:a instanceof bl?Ye.Recurse:Ye.Visible}},sorter:{compare:(a,l)=>{if(!this.sortByLabel||!this._lastQueryString)return 0;const c=this._lastQueryString.toLowerCase();return CG(a,l,c)}},accessibilityProvider:new SG,setRowLineHeight:!1,multipleSelectionSupport:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:iu.None,findWidgetEnabled:!1,indent:0,horizontalScrolling:!1,allowNonCollapsibleParents:!0,alwaysConsumeMouseWheel:!0})),this._tree.getHTMLElement().id=s,this._registerListeners()}get onDidChangeFocus(){return W.map(this._tree.onDidChangeFocus,e=>e.elements.filter(t=>t instanceof ki).map(t=>t.item),this._store)}get onDidChangeSelection(){return W.map(this._tree.onDidChangeSelection,e=>({items:e.elements.filter(t=>t instanceof ki).map(t=>t.item),event:e.browserEvent}),this._store)}get displayed(){return this._container.style.display!=="none"}set displayed(e){this._container.style.display=e?"":"none"}get scrollTop(){return this._tree.scrollTop}set scrollTop(e){this._tree.scrollTop=e}get ariaLabel(){return this._tree.ariaLabel}set ariaLabel(e){this._tree.ariaLabel=e??""}set enabled(e){this._tree.getHTMLElement().style.pointerEvents=e?"":"none"}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(e){this._matchOnDescription=e}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(e){this._matchOnDetail=e}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(e){this._matchOnLabel=e}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(e){this._matchOnLabelMode=e}get matchOnMeta(){return this._matchOnMeta}set matchOnMeta(e){this._matchOnMeta=e}get sortByLabel(){return this._sortByLabel}set sortByLabel(e){this._sortByLabel=e}get shouldLoop(){return this._shouldLoop}set shouldLoop(e){this._shouldLoop=e}_registerListeners(){this._registerOnKeyDown(),this._registerOnContainerClick(),this._registerOnMouseMiddleClick(),this._registerOnTreeModelChanged(),this._registerOnElementChecked(),this._registerOnContextMenu(),this._registerHoverListeners(),this._registerSelectionChangeListener(),this._registerSeparatorActionShowingListeners()}_registerOnKeyDown(){this._register(this._tree.onKeyDown(e=>{const t=new at(e);switch(t.keyCode){case w.Space:this.toggleCheckbox();break}this._onKeyDown.fire(t)}))}_registerOnContainerClick(){this._register(V(this._container,j.CLICK,e=>{(e.x||e.y)&&this._onLeave.fire()}))}_registerOnMouseMiddleClick(){this._register(V(this._container,j.AUXCLICK,e=>{e.button===1&&this._onLeave.fire()}))}_registerOnTreeModelChanged(){this._register(this._tree.onDidChangeModel(()=>{const e=this._itemElements.filter(t=>!t.hidden).length;this._visibleCountObservable.set(e,void 0),this._hasCheckboxes&&this._updateCheckedObservables()}))}_registerOnElementChecked(){this._register(this._elementCheckedEventBufferer.wrapEvent(this._elementChecked.event,(e,t)=>t)(e=>this._updateCheckedObservables()))}_registerOnContextMenu(){this._register(this._tree.onContextMenu(e=>{e.element&&(e.browserEvent.preventDefault(),this._tree.setSelection([e.element]))}))}_registerHoverListeners(){const e=this._register(new Uy(typeof this.hoverDelegate.delay=="function"?this.hoverDelegate.delay():this.hoverDelegate.delay));this._register(this._tree.onMouseOver(async t=>{if(T2(t.browserEvent.target)){e.cancel();return}if(!(!T2(t.browserEvent.relatedTarget)&&Kt(t.browserEvent.relatedTarget,t.element?.element)))try{await e.trigger(async()=>{t.element instanceof ki&&this.showHover(t.element)})}catch(n){if(!wc(n))throw n}})),this._register(this._tree.onMouseOut(t=>{Kt(t.browserEvent.relatedTarget,t.element?.element)||e.cancel()}))}_registerSeparatorActionShowingListeners(){this._register(this._tree.onDidChangeFocus(e=>{const t=e.elements[0]?this._tree.getParentElement(e.elements[0]):null;for(const n of this._separatorRenderer.visibleSeparators){const s=n===t;!!(n.focusInsideSeparator&Fr.ACTIVE_ITEM)!==s&&(s?n.focusInsideSeparator|=Fr.ACTIVE_ITEM:n.focusInsideSeparator&=~Fr.ACTIVE_ITEM,this._tree.rerender(n))}})),this._register(this._tree.onMouseOver(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const n of this._separatorRenderer.visibleSeparators){if(n!==t)continue;!!(n.focusInsideSeparator&Fr.MOUSE_HOVER)||(n.focusInsideSeparator|=Fr.MOUSE_HOVER,this._tree.rerender(n))}})),this._register(this._tree.onMouseOut(e=>{const t=e.element?this._tree.getParentElement(e.element):null;for(const n of this._separatorRenderer.visibleSeparators){if(n!==t)continue;!!(n.focusInsideSeparator&Fr.MOUSE_HOVER)&&(n.focusInsideSeparator&=~Fr.MOUSE_HOVER,this._tree.rerender(n))}}))}_registerSelectionChangeListener(){this._register(this._tree.onDidChangeSelection(e=>{const t=e.elements.filter(n=>n instanceof ki);t.length!==e.elements.length&&(e.elements.length===1&&e.elements[0]instanceof bl&&(this._tree.setFocus([e.elements[0].children[0]]),this._tree.reveal(e.elements[0],0)),this._tree.setSelection(t))}))}setAllVisibleChecked(e){this._elementCheckedEventBufferer.bufferEvents(()=>{this._itemElements.forEach(t=>{!t.hidden&&!t.checkboxDisabled&&t.item.pickable!==!1&&(t.checked=e)})})}setElements(e){this._elementDisposable.clear(),this._lastQueryString=void 0,this._inputElements=e,this._hasCheckboxes=this.parent.classList.contains("show-checkboxes");let t;this._itemElements=new Array,this._elementTree=e.reduce((n,s,r)=>{let o;if(s.type==="separator"){if(!s.buttons)return n;t=new bl(r,a=>this._onSeparatorButtonTriggered.fire(a),s),o=t}else{const a=r>0?e[r-1]:void 0;let l;a&&a.type==="separator"&&!a.buttons&&(t=void 0,l=a);const c=new ki(r,this._hasCheckboxes&&s.pickable!==!1,h=>this._onButtonTriggered.fire(h),this._elementChecked,s,l);if(this._itemElements.push(c),t)return t.children.push(c),n;o=c}return n.push(o),n},new Array),this._setElementsToTree(this._elementTree),this.accessibilityService.isScreenReaderOptimized()&&setTimeout(()=>{const n=this._tree.getHTMLElement().querySelector(".monaco-list-row.focused"),s=n?.parentNode;if(n&&s){const r=n.nextSibling;n.remove(),s.insertBefore(n,r)}},0)}setFocusedElements(e){const t=e.map(n=>this._itemElements.find(s=>s.item===n)).filter(n=>!!n).filter(n=>!n.hidden);if(this._tree.setFocus(t),e.length>0){const n=this._tree.getFocus()[0];n&&this._tree.reveal(n)}}getActiveDescendant(){return this._tree.getHTMLElement().getAttribute("aria-activedescendant")}setSelectedElements(e){const t=e.map(n=>this._itemElements.find(s=>s.item===n)).filter(n=>!!n);this._tree.setSelection(t)}getCheckedElements(){return this._itemElements.filter(e=>e.checked).map(e=>e.item)}setCheckedElements(e){this._elementCheckedEventBufferer.bufferEvents(()=>{const t=new Set;for(const n of e)t.add(n);for(const n of this._itemElements)n.checked=t.has(n.item)})}focus(e){if(this._itemElements.length)switch(e===tt.Second&&this._itemElements.length<2&&(e=tt.First),e){case tt.First:this._tree.scrollTop=0,this._tree.focusFirst(void 0,t=>t.element instanceof ki);break;case tt.Second:{this._tree.scrollTop=0;let t=!1;this._tree.focusFirst(void 0,n=>n.element instanceof ki?t?!0:(t=!t,!1):!1);break}case tt.Last:this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,t=>t.element instanceof ki);break;case tt.Next:{const t=this._tree.getFocus();this._tree.focusNext(void 0,this._shouldLoop,void 0,s=>s.element instanceof ki?(this._tree.reveal(s.element),!0):!1);const n=this._tree.getFocus();t.length&&t[0]===n[0]&&this._onLeave.fire();break}case tt.Previous:{const t=this._tree.getFocus();this._tree.focusPrevious(void 0,this._shouldLoop,void 0,s=>{if(!(s.element instanceof ki))return!1;const r=this._tree.getParentElement(s.element);return r===null||r.children[0]!==s.element?this._tree.reveal(s.element):this._tree.reveal(r),!0});const n=this._tree.getFocus();t.length&&t[0]===n[0]&&this._onLeave.fire();break}case tt.NextPage:this._tree.focusNextPage(void 0,t=>t.element instanceof ki?(this._tree.reveal(t.element),!0):!1);break;case tt.PreviousPage:this._tree.focusPreviousPage(void 0,t=>{if(!(t.element instanceof ki))return!1;const n=this._tree.getParentElement(t.element);return n===null||n.children[0]!==t.element?this._tree.reveal(t.element):this._tree.reveal(n),!0});break;case tt.NextSeparator:{let t=!1;const n=this._tree.getFocus()[0];this._tree.focusNext(void 0,!0,void 0,r=>{if(t)return!0;if(r.element instanceof bl)t=!0,this._separatorRenderer.isSeparatorVisible(r.element)?this._tree.reveal(r.element.children[0]):this._tree.reveal(r.element,0);else if(r.element instanceof ki){if(r.element.separator)return this._itemRenderer.isItemWithSeparatorVisible(r.element)?this._tree.reveal(r.element):this._tree.reveal(r.element,0),!0;if(r.element===this._elementTree[0])return this._tree.reveal(r.element,0),!0}return!1});const s=this._tree.getFocus()[0];n===s&&(this._tree.scrollTop=this._tree.scrollHeight,this._tree.focusLast(void 0,r=>r.element instanceof ki));break}case tt.PreviousSeparator:{let t,n=!!this._tree.getFocus()[0]?.separator;this._tree.focusPrevious(void 0,!0,void 0,s=>{if(s.element instanceof bl)n?t||(this._separatorRenderer.isSeparatorVisible(s.element)?this._tree.reveal(s.element):this._tree.reveal(s.element,0),t=s.element.children[0]):n=!0;else if(s.element instanceof ki&&!t){if(s.element.separator)this._itemRenderer.isItemWithSeparatorVisible(s.element)?this._tree.reveal(s.element):this._tree.reveal(s.element,0),t=s.element;else if(s.element===this._elementTree[0])return this._tree.reveal(s.element,0),!0}return!1}),t&&this._tree.setFocus([t]);break}}}clearFocus(){this._tree.setFocus([])}domFocus(){this._tree.domFocus()}layout(e){this._tree.getHTMLElement().style.maxHeight=e?`${Math.floor(e/44)*44+6}px`:"",this._tree.layout()}filter(e){if(this._lastQueryString=e,!(this._sortByLabel||this._matchOnLabel||this._matchOnDescription||this._matchOnDetail))return this._tree.layout(),!1;const t=e;if(e=e.trim(),!e||!(this.matchOnLabel||this.matchOnDescription||this.matchOnDetail))this._itemElements.forEach(n=>{n.labelHighlights=void 0,n.descriptionHighlights=void 0,n.detailHighlights=void 0,n.hidden=!1;const s=n.index&&this._inputElements[n.index-1];n.item&&(n.separator=s&&s.type==="separator"&&!s.buttons?s:void 0)});else{let n;this._itemElements.forEach(s=>{let r;this.matchOnLabelMode==="fuzzy"?r=this.matchOnLabel?Wb(e,zu(s.saneLabel))??void 0:void 0:r=this.matchOnLabel?kG(t,zu(s.saneLabel))??void 0:void 0;const o=this.matchOnDescription?Wb(e,zu(s.saneDescription||""))??void 0:void 0,a=this.matchOnDetail?Wb(e,zu(s.saneDetail||""))??void 0:void 0;if(r||o||a?(s.labelHighlights=r,s.descriptionHighlights=o,s.detailHighlights=a,s.hidden=!1):(s.labelHighlights=void 0,s.descriptionHighlights=void 0,s.detailHighlights=void 0,s.hidden=s.item?!s.item.alwaysShow:!0),s.item?s.separator=void 0:s.separator&&(s.hidden=!0),!this.sortByLabel){const l=s.index&&this._inputElements[s.index-1]||void 0;l?.type==="separator"&&!l.buttons&&(n=l),n&&!s.hidden&&(s.separator=n,n=void 0)}})}return this._setElementsToTree(this._sortByLabel&&e?this._itemElements:this._elementTree),this._tree.layout(),!0}toggleCheckbox(){this._elementCheckedEventBufferer.bufferEvents(()=>{const e=this._tree.getFocus().filter(n=>n instanceof ki),t=this._allVisibleChecked(e);for(const n of e)n.checkboxDisabled||(n.checked=!t)})}style(e){this._tree.style(e)}toggleHover(){const e=this._tree.getFocus()[0];if(!e?.saneTooltip||!(e instanceof ki))return;if(this._lastHover&&!this._lastHover.isDisposed){this._lastHover.dispose();return}this.showHover(e);const t=new X;t.add(this._tree.onDidChangeFocus(n=>{n.elements[0]instanceof ki&&this.showHover(n.elements[0])})),this._lastHover&&t.add(this._lastHover),this._elementDisposable.add(t)}_setElementsToTree(e){const t=new Array;for(const n of e)n instanceof bl?t.push({element:n,collapsible:!1,collapsed:!1,children:n.children.map(s=>({element:s,collapsible:!1,collapsed:!1}))}):t.push({element:n,collapsible:!1,collapsed:!1});this._tree.setChildren(null,t)}_allVisibleChecked(e,t=!0){for(let n=0,s=e.length;n<s;n++){const r=e[n];if(!r.hidden&&r.item.pickable!==!1)if(r.checked)t=!0;else return!1}return t}_updateCheckedObservables(){lc(e=>{this._allVisibleCheckedObservable.set(this._allVisibleChecked(this._itemElements,!1),e);const t=this._itemElements.filter(n=>n.checked).length;this._checkedCountObservable.set(t,e),this._checkedElementsObservable.set(this.getCheckedElements(),e)})}showHover(e){this._lastHover&&!this._lastHover.isDisposed&&(this.hoverDelegate.onDidHideHover?.(),this._lastHover?.dispose()),!(!e.element||!e.saneTooltip)&&(this._lastHover=this.hoverDelegate.showHover({content:e.saneTooltip,target:e.element,linkHandler:t=>{this.linkOpenerDelegate(t)},appearance:{showPointer:!0},container:this._container,position:{hoverPosition:rt.RIGHT}},!1))}};_c.__decorator=G([vt],_c.prototype,"onDidChangeFocus",null);_c.__decorator=G([vt],_c.prototype,"onDidChangeSelection",null);_c=G([L(4,xt),L(5,qf)],_c);function kG(i,e){const{text:t,iconOffsets:n}=e;if(!n||n.length===0)return TD(i,t);const s=xf(t," "),r=t.length-s.length,o=TD(i,s);if(o)for(const a of o){const l=n[a.start+r]+r;a.start+=l,a.end+=l}return o}function TD(i,e){const t=e.toLowerCase().indexOf(i.toLowerCase());return t!==-1?[{start:t,end:t+i.length}]:null}function CG(i,e,t){const n=i.labelHighlights||[],s=e.labelHighlights||[];return n.length&&!s.length?-1:!n.length&&s.length?1:n.length===0&&s.length===0?0:xK(i.saneSortLabel,e.saneSortLabel,t)}const O5={weight:Xa.WorkbenchContrib,when:kt.and(kt.equals(r5,eu.QuickPick),yq),metadata:{description:d(1960,"Used while in the context of the quick pick. If you change one keybinding for this command, you should change all of the other keybindings (modifier variants) of this command as well.")}};function bn(i,e={}){dc.registerCommandAndKeybindingRule({...O5,...i,secondary:EG(i.primary,i.secondary??[],e)})}const vf=Me?Ne.WinCtrl:Ne.CtrlCmd;function EG(i,e,t={}){return t.withAltMod&&e.push(Ne.Alt+i),t.withCtrlMod&&(e.push(vf+i),t.withAltMod&&e.push(Ne.Alt+vf+i)),t.withCmdMod&&Me&&(e.push(Ne.CtrlCmd+i),t.withCtrlMod&&e.push(Ne.CtrlCmd+Ne.WinCtrl+i),t.withAltMod&&(e.push(Ne.CtrlCmd+Ne.Alt+i),t.withCtrlMod&&e.push(Ne.CtrlCmd+Ne.Alt+Ne.WinCtrl+i))),e}function Gn(i,e){return t=>{const n=t.get(eg).currentQuickInput;if(n)return e&&n.quickNavigate?n.focus(e):n.focus(i)}}bn({id:"quickInput.pageNext",primary:w.PageDown,handler:Gn(tt.NextPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});bn({id:"quickInput.pagePrevious",primary:w.PageUp,handler:Gn(tt.PreviousPage)},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});bn({id:"quickInput.first",primary:vf+w.Home,handler:Gn(tt.First)},{withAltMod:!0,withCmdMod:!0});bn({id:"quickInput.last",primary:vf+w.End,handler:Gn(tt.Last)},{withAltMod:!0,withCmdMod:!0});bn({id:"quickInput.next",primary:w.DownArrow,handler:Gn(tt.Next)},{withCtrlMod:!0});bn({id:"quickInput.previous",primary:w.UpArrow,handler:Gn(tt.Previous)},{withCtrlMod:!0});const AD=d(1961,"If we're in quick access mode, this will navigate to the next item. If we are not in quick access mode, this will navigate to the next separator."),ND=d(1962,"If we're in quick access mode, this will navigate to the previous item. If we are not in quick access mode, this will navigate to the previous separator.");Me?(bn({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:Ne.CtrlCmd+w.DownArrow,handler:Gn(tt.NextSeparator,tt.Next),metadata:{description:AD}}),bn({id:"quickInput.nextSeparator",primary:Ne.CtrlCmd+Ne.Alt+w.DownArrow,secondary:[Ne.CtrlCmd+Ne.WinCtrl+w.DownArrow],handler:Gn(tt.NextSeparator)},{withCtrlMod:!0}),bn({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:Ne.CtrlCmd+w.UpArrow,handler:Gn(tt.PreviousSeparator,tt.Previous),metadata:{description:ND}}),bn({id:"quickInput.previousSeparator",primary:Ne.CtrlCmd+Ne.Alt+w.UpArrow,secondary:[Ne.CtrlCmd+Ne.WinCtrl+w.UpArrow],handler:Gn(tt.PreviousSeparator)},{withCtrlMod:!0})):(bn({id:"quickInput.nextSeparatorWithQuickAccessFallback",primary:Ne.Alt+w.DownArrow,handler:Gn(tt.NextSeparator,tt.Next),metadata:{description:AD}}),bn({id:"quickInput.nextSeparator",primary:Ne.CtrlCmd+Ne.Alt+w.DownArrow,handler:Gn(tt.NextSeparator)}),bn({id:"quickInput.previousSeparatorWithQuickAccessFallback",primary:Ne.Alt+w.UpArrow,handler:Gn(tt.PreviousSeparator,tt.Previous),metadata:{description:ND}}),bn({id:"quickInput.previousSeparator",primary:Ne.CtrlCmd+Ne.Alt+w.UpArrow,handler:Gn(tt.PreviousSeparator)}));bn({id:"quickInput.acceptInBackground",when:kt.and(O5.when,kt.or(lG.negate(),xq)),primary:w.RightArrow,weight:Xa.WorkbenchContrib+50,handler:i=>{i.get(eg).currentQuickInput?.accept(!0)}},{withAltMod:!0,withCtrlMod:!0,withCmdMod:!0});bn({id:"quickInput.toggleHover",primary:vf|w.Space,handler:i=>{i.get(eg).toggleHover()}});var bv;const Bn=_e,W_="workbench.quickInput.viewState";let _v=class extends ${static{bv=this}static{this.MAX_WIDTH=600}get currentQuickInput(){return this.controller??void 0}get container(){return this._container}constructor(e,t,n,s,r){super(),this.options=e,this.layoutService=t,this.instantiationService=n,this.storageService=r,this.enabled=!0,this.onDidAcceptEmitter=this._register(new A),this.onDidCustomEmitter=this._register(new A),this.onDidTriggerButtonEmitter=this._register(new A),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new A),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new A),this.onHide=this.onHideEmitter.event,this.backButton=Xm,this.inQuickInputContext=vq.bindTo(s),this.quickInputTypeContext=Cq.bindTo(s),this.endOfQuickInputBoxContext=Eq.bindTo(s),this.idPrefix=e.idPrefix,this._container=e.container,this.styles=e.styles,this._register(W.runAndSubscribe(W1,({window:o,disposables:a})=>this.registerKeyModsListeners(o,a),{window:$e,disposables:this._store})),this._register(s6(o=>{this.ui&&ke(this.ui.container)===o&&(this.reparentUI(this.layoutService.mainContainer),this.layout(this.layoutService.mainContainerDimension,this.layoutService.mainContainerOffset.quickPickTop))})),this.viewState=this.loadViewState()}registerKeyModsListeners(e,t){const n=s=>{this.keyMods.ctrlCmd=s.ctrlKey||s.metaKey,this.keyMods.alt=s.altKey};for(const s of[j.KEY_DOWN,j.KEY_UP,j.MOUSE_DOWN])t.add(V(e,s,n,!0))}getUI(e){if(this.ui)return e&&ke(this._container)!==ke(this.layoutService.activeContainer)&&(this.reparentUI(this.layoutService.activeContainer),this.layout(this.layoutService.activeContainerDimension,this.layoutService.activeContainerOffset.quickPickTop)),this.ui;const t=ie(this._container,Bn(".quick-input-widget.show-file-icons"));t.tabIndex=-1,t.style.display="none";const n=On(t),s=ie(t,Bn(".quick-input-titlebar")),r=this._register(new Ql(s,{hoverDelegate:this.options.hoverDelegate}));r.domNode.classList.add("quick-input-left-action-bar");const o=ie(s,Bn(".quick-input-title")),a=this._register(new Ql(s,{hoverDelegate:this.options.hoverDelegate}));a.domNode.classList.add("quick-input-right-action-bar");const l=ie(t,Bn(".quick-input-header")),c=this._register(new cb(d(1963,"Toggle all checkboxes"),!1,{...e4,size:15}));ie(l,c.domNode),this._register(c.onChange(()=>{const z=c.checked;le.setAllVisibleChecked(z)})),this._register(V(c.domNode,j.CLICK,z=>{(z.x||z.y)&&g.setFocus()}));const h=ie(l,Bn(".quick-input-description")),u=ie(l,Bn(".quick-input-and-message")),f=ie(u,Bn(".quick-input-filter")),g=this._register(new Qq(f,this.styles.inputBox,this.styles.toggle));g.setAttribute("aria-describedby",`${this.idPrefix}message`);const p=ie(f,Bn(".quick-input-visible-count"));p.setAttribute("aria-live","polite"),p.setAttribute("aria-atomic","true");const m=this._register(new pD(p,{countFormat:d(1964,"{0} Results")},this.styles.countBadge)),_=ie(f,Bn(".quick-input-count"));_.setAttribute("aria-live","polite");const v=this._register(new pD(_,{countFormat:d(1965,"{0} Selected")},this.styles.countBadge)),y=this._register(new Ql(l,{hoverDelegate:this.options.hoverDelegate}));y.domNode.classList.add("quick-input-inline-action-bar");const E=ie(l,Bn(".quick-input-action")),N=this._register(new pc(E,this.styles.button));N.label=d(1966,"OK"),this._register(N.onDidClick(z=>{this.onDidAcceptEmitter.fire()}));const I=ie(l,Bn(".quick-input-action")),B=this._register(new pc(I,{...this.styles.button,supportIcons:!0}));B.label=d(1967,"Custom"),this._register(B.onDidClick(z=>{this.onDidCustomEmitter.fire()}));const x=ie(u,Bn(`#${this.idPrefix}message.quick-input-message`)),D=this._register(new Zm(t,this.styles.progressBar));D.getContainer().classList.add("quick-input-progress");const F=ie(t,Bn(".quick-input-html-widget"));F.tabIndex=-1;const te=ie(t,Bn(".quick-input-description")),J=this.idPrefix+"list",le=this._register(this.instantiationService.createInstance(_c,t,this.options.hoverDelegate,this.options.linkOpenerDelegate,J));g.setAttribute("aria-controls",J),this._register(le.onDidChangeFocus(()=>{g.setAttribute("aria-activedescendant",le.getActiveDescendant()??"")})),this._register(le.onChangedAllVisibleChecked(z=>{c.checked=z})),this._register(le.onChangedVisibleCount(z=>{m.setCount(z)})),this._register(le.onChangedCheckedCount(z=>{v.setCount(z)})),this._register(le.onLeave(()=>{setTimeout(()=>{this.controller&&(g.setFocus(),this.controller instanceof Nl&&this.controller.canSelectMany&&le.clearFocus())},0)}));const ee=eS(t);return this._register(ee),this._register(V(t,j.FOCUS,z=>{const Z=this.getUI();if(Kt(z.relatedTarget,Z.inputContainer)){const ne=Z.inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==ne&&this.endOfQuickInputBoxContext.set(ne)}Kt(z.relatedTarget,Z.container)||(this.inQuickInputContext.set(!0),this.previousFocusElement=Ut(z.relatedTarget)?z.relatedTarget:void 0)},!0)),this._register(ee.onDidBlur(()=>{!this.getUI().ignoreFocusOut&&!this.options.ignoreFocusOut()&&this.hide(Jh.Blur),this.inQuickInputContext.set(!1),this.endOfQuickInputBoxContext.set(!1),this.previousFocusElement=void 0})),this._register(g.onKeyDown(z=>{const Z=this.getUI().inputBox.isSelectionAtEnd();this.endOfQuickInputBoxContext.get()!==Z&&this.endOfQuickInputBoxContext.set(Z),g.removeAttribute("aria-activedescendant")})),this._register(V(t,j.FOCUS,z=>{g.setFocus()})),this._register(Fs(t,j.KEY_DOWN,z=>{if(!Kt(z.target,F))switch(z.keyCode){case w.Enter:Re.stop(z,!0),this.enabled&&this.onDidAcceptEmitter.fire();break;case w.Escape:Re.stop(z,!0),this.hide(Jh.Gesture);break;case w.Tab:if(!z.altKey&&!z.ctrlKey&&!z.metaKey){const Z=[".quick-input-list .monaco-action-bar .always-visible",".quick-input-list-entry:hover .monaco-action-bar",".monaco-list-row.focused .monaco-action-bar"];if(t.classList.contains("show-checkboxes")?Z.push("input"):Z.push("input[type=text]"),this.getUI().list.displayed&&Z.push(".monaco-list"),this.getUI().message&&Z.push(".quick-input-message a"),this.getUI().widget){if(Kt(z.target,this.getUI().widget))break;Z.push(".quick-input-html-widget")}const ne=t.querySelectorAll(Z.join(", "));!z.shiftKey&&Kt(z.target,ne[ne.length-1])&&(Re.stop(z,!0),ne[0].focus()),z.shiftKey&&Kt(z.target,ne[0])&&(Re.stop(z,!0),ne[ne.length-1].focus())}break}})),this.dndController=this._register(this.instantiationService.createInstance(wv,this._container,t,[{node:s,includeChildren:!0},{node:l,includeChildren:!1}],this.viewState)),this._register(du(z=>{const Z=this.dndController?.dndViewState.read(z);Z&&(Z.top!==void 0&&Z.left!==void 0?this.viewState={...this.viewState,top:Z.top,left:Z.left}:this.viewState=void 0,this.updateLayout(),Z.done&&this.saveViewState(this.viewState))})),this.ui={container:t,styleSheet:n,leftActionBar:r,titleBar:s,title:o,description1:te,description2:h,widget:F,rightActionBar:a,inlineActionBar:y,checkAll:c,inputContainer:u,filterContainer:f,inputBox:g,visibleCountContainer:p,visibleCount:m,countContainer:_,count:v,okContainer:E,ok:N,message:x,customButtonContainer:I,customButton:B,list:le,progressBar:D,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,show:z=>this.show(z),hide:()=>this.hide(),setVisibilities:z=>this.setVisibilities(z),setEnabled:z=>this.setEnabled(z),setContextKey:z=>this.options.setContextKey(z),linkOpenerDelegate:z=>this.options.linkOpenerDelegate(z)},this.updateStyles(),this.ui}reparentUI(e){this.ui&&(this._container=e,ie(this._container,this.ui.container),this.dndController?.reparentUI(this._container))}pick(e,t={},n=mi.None){return new Promise((s,r)=>{let o=h=>{o=s,t.onKeyMods?.(a.keyMods),s(h)};if(n.isCancellationRequested){o(void 0);return}const a=this.createQuickPick({useSeparators:!0});let l;const c=[a,a.onDidAccept(()=>{if(a.canSelectMany)o(a.selectedItems.slice()),a.hide();else{const h=a.activeItems[0];h&&(o(h),a.hide())}}),a.onDidChangeActive(h=>{const u=h[0];u&&t.onDidFocus&&t.onDidFocus(u)}),a.onDidChangeSelection(h=>{if(!a.canSelectMany){const u=h[0];u&&(o(u),a.hide())}}),a.onDidTriggerItemButton(h=>t.onDidTriggerItemButton&&t.onDidTriggerItemButton({...h,removeItem:()=>{const u=a.items.indexOf(h.item);if(u!==-1){const f=a.items.slice(),g=f.splice(u,1),p=a.activeItems.filter(_=>_!==g[0]),m=a.keepScrollPosition;a.keepScrollPosition=!0,a.items=f,p&&(a.activeItems=p),a.keepScrollPosition=m}}})),a.onDidTriggerSeparatorButton(h=>t.onDidTriggerSeparatorButton?.(h)),a.onDidChangeValue(h=>{l&&!h&&(a.activeItems.length!==1||a.activeItems[0]!==l)&&(a.activeItems=[l])}),n.onCancellationRequested(()=>{a.hide()}),a.onDidHide(()=>{ai(c),o(void 0)})];a.title=t.title,t.value&&(a.value=t.value),a.canSelectMany=!!t.canPickMany,a.placeholder=t.placeHolder,a.ignoreFocusOut=!!t.ignoreFocusLost,a.matchOnDescription=!!t.matchOnDescription,a.matchOnDetail=!!t.matchOnDetail,a.matchOnLabel=t.matchOnLabel===void 0||t.matchOnLabel,a.quickNavigate=t.quickNavigate,a.hideInput=!!t.hideInput,a.contextKey=t.contextKey,a.busy=!0,Promise.all([e,t.activeItem]).then(([h,u])=>{l=u,a.busy=!1,a.items=h,a.canSelectMany&&(a.selectedItems=h.filter(f=>f.type!=="separator"&&f.picked)),l&&(a.activeItems=[l])}),a.show(),Promise.resolve(e).then(void 0,h=>{r(h),a.hide()})})}setValidationOnInput(e,t){t&&Bi(t)?(e.severity=bt.Error,e.validationMessage=t):t&&!Bi(t)?(e.severity=t.severity,e.validationMessage=t.content):(e.severity=bt.Ignore,e.validationMessage=void 0)}input(e={},t=mi.None){return new Promise(n=>{if(t.isCancellationRequested){n(void 0);return}const s=this.createInputBox(),r=e.validateInput||(()=>Promise.resolve(void 0)),o=W.debounce(s.onDidChangeValue,(h,u)=>u,100);let a=e.value||"",l=Promise.resolve(r(a));const c=[s,o(h=>{h!==a&&(l=Promise.resolve(r(h)),a=h),l.then(u=>{h===a&&this.setValidationOnInput(s,u)})}),s.onDidAccept(()=>{const h=s.value;h!==a&&(l=Promise.resolve(r(h)),a=h),l.then(u=>{!u||!Bi(u)&&u.severity!==bt.Error?(n(h),s.hide()):h===a&&this.setValidationOnInput(s,u)})}),t.onCancellationRequested(()=>{s.hide()}),s.onDidHide(()=>{ai(c),n(void 0)})];s.title=e.title,s.value=e.value||"",s.valueSelection=e.valueSelection,s.prompt=e.prompt,s.placeholder=e.placeHolder,s.password=!!e.password,s.ignoreFocusOut=!!e.ignoreFocusLost,s.show()})}createQuickPick(e={useSeparators:!1}){const t=this.getUI(!0);return new Nl(t)}createInputBox(){const e=this.getUI(!0);return new Lq(e)}setAlignment(e){this.dndController?.setAlignment(e)}createQuickWidget(){const e=this.getUI(!0);return new Dq(e)}show(e){const t=this.getUI(!0);this.onShowEmitter.fire();const n=this.controller;this.controller=e,n?.didHide(),this.setEnabled(!0),t.leftActionBar.clear(),t.title.textContent="",t.description1.textContent="",t.description2.textContent="",Nn(t.widget),t.rightActionBar.clear(),t.inlineActionBar.clear(),t.checkAll.checked=!1,t.inputBox.placeholder="",t.inputBox.password=!1,t.inputBox.showDecoration(bt.Ignore),t.visibleCount.setCount(0),t.count.setCount(0),Nn(t.message),t.progressBar.stop(),t.list.setElements([]),t.list.matchOnDescription=!1,t.list.matchOnDetail=!1,t.list.matchOnLabel=!0,t.list.sortByLabel=!0,t.ignoreFocusOut=!1,t.inputBox.toggles=void 0;const s=this.options.backKeybindingLabel();Xm.tooltip=s?d(1968,"Back ({0})",s):d(1969,"Back"),t.container.style.display="",this.updateLayout(),this.dndController?.layoutContainer(),t.inputBox.setFocus(),this.quickInputTypeContext.set(e.type)}isVisible(){return!!this.ui&&this.ui.container.style.display!=="none"}setVisibilities(e){const t=this.getUI();t.title.style.display=e.title?"":"none",t.description1.style.display=e.description&&(e.inputBox||e.checkAll)?"":"none",t.description2.style.display=e.description&&!(e.inputBox||e.checkAll)?"":"none",t.checkAll.domNode.style.display=e.checkAll?"":"none",t.inputContainer.style.display=e.inputBox?"":"none",t.filterContainer.style.display=e.inputBox?"":"none",t.visibleCountContainer.style.display=e.visibleCount?"":"none",t.countContainer.style.display=e.count?"":"none",t.okContainer.style.display=e.ok?"":"none",t.customButtonContainer.style.display=e.customButton?"":"none",t.message.style.display=e.message?"":"none",t.progressBar.getContainer().style.display=e.progressBar?"":"none",t.list.displayed=!!e.list,t.container.classList.toggle("show-checkboxes",!!e.checkBox),t.container.classList.toggle("hidden-input",!e.inputBox&&!e.description),this.updateLayout()}setEnabled(e){if(e!==this.enabled){this.enabled=e;const t=this.getUI();for(const n of t.leftActionBar.viewItems)n.action.enabled=e;for(const n of t.rightActionBar.viewItems)n.action.enabled=e;e?t.checkAll.enable():t.checkAll.disable(),t.inputBox.enabled=e,t.ok.enabled=e,t.list.enabled=e}}hide(e){const t=this.controller;if(!t)return;t.willHide(e);const n=this.ui?.container,s=n&&!gA(n);if(this.controller=null,this.onHideEmitter.fire(),n&&(n.style.display="none"),!s){let r=this.previousFocusElement;for(;r&&!r.offsetParent;)r=r.parentElement??void 0;r?.offsetParent?(r.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}t.didHide(e)}focus(){if(this.isVisible()){const e=this.getUI();e.inputBox.enabled?e.inputBox.setFocus():e.list.domFocus()}}toggle(){this.isVisible()&&this.controller instanceof Nl&&this.controller.canSelectMany&&this.getUI().list.toggleCheckbox()}toggleHover(){this.isVisible()&&this.controller instanceof Nl&&this.getUI().list.toggleHover()}navigate(e,t){this.isVisible()&&this.getUI().list.displayed&&(this.getUI().list.focus(e?tt.Next:tt.Previous),t&&this.controller instanceof Nl&&(this.controller.quickNavigate=t))}async accept(e={alt:!1,ctrlCmd:!1}){this.keyMods.alt=e.alt,this.keyMods.ctrlCmd=e.ctrlCmd,this.onDidAcceptEmitter.fire()}async back(){this.onDidTriggerButtonEmitter.fire(this.backButton)}async cancel(){this.hide()}layout(e,t){this.dimension=e,this.titleBarOffset=t,this.updateLayout()}updateLayout(){if(this.ui&&this.isVisible()){const e=this.ui.container.style,t=Math.min(this.dimension.width*.62,bv.MAX_WIDTH);e.width=t+"px",e.top=`${this.viewState?.top?Math.round(this.dimension.height*this.viewState.top):this.titleBarOffset}px`,e.left=`${Math.round(this.dimension.width*(this.viewState?.left??.5)-t/2)}px`,this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&this.dimension.height*.4)}}applyStyles(e){this.styles=e,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:e,quickInputBackground:t,quickInputForeground:n,widgetBorder:s,widgetShadow:r}=this.styles.widget;this.ui.titleBar.style.backgroundColor=e??"",this.ui.container.style.backgroundColor=t??"",this.ui.container.style.color=n??"",this.ui.container.style.border=s?`1px solid ${s}`:"",this.ui.container.style.boxShadow=r?`0 0 8px 2px ${r}`:"",this.ui.list.style(this.styles.list);const o=[];this.styles.pickerGroup.pickerGroupBorder&&o.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.pickerGroup.pickerGroupBorder}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.pickerGroup.pickerGroupForeground}; }`),this.styles.pickerGroup.pickerGroupForeground&&o.push(".quick-input-list .quick-input-list-separator-as-item { color: var(--vscode-descriptionForeground); }"),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(o.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&o.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&o.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&o.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&o.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&o.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),o.push("}"));const a=o.join(`
`);a!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=a)}}loadViewState(){try{const e=JSON.parse(this.storageService.get(W_,Oe.APPLICATION,"{}"));if(e.top!==void 0||e.left!==void 0)return e}catch{}}saveViewState(e){this.layoutService.activeContainer===this.layoutService.mainContainer&&(e!==void 0?this.storageService.store(W_,JSON.stringify(e),Oe.APPLICATION,fc.MACHINE):this.storageService.remove(W_,Oe.APPLICATION))}};_v=bv=G([L(1,Jo),L(2,xt),L(3,Mt),L(4,rl)],_v);let wv=class extends ${constructor(e,t,n,s,r,o,a){super(),this._container=e,this._quickInputContainer=t,this._quickInputDragAreas=n,this._layoutService=r,this.configurationService=a,this.dndViewState=Os(this,void 0),this._snapThreshold=20,this._snapLineHorizontalRatio=.25,this._quickInputAlignmentContext=kq.bindTo(o);const l=r4(this.configurationService)===Wo.CUSTOM;this._controlsOnLeft=l&&cp===rn.Mac,this._controlsOnRight=l&&(cp===rn.Windows||cp===rn.Linux),this._registerLayoutListener(),this.registerMouseListeners(),this.dndViewState.set({...s,done:!0},void 0)}reparentUI(e){this._container=e}layoutContainer(e=this._layoutService.activeContainerDimension){const t=this.dndViewState.get(),n=this._quickInputContainer.getBoundingClientRect();if(t?.top&&t?.left){const s=Math.round(t.left*100)/100,r=e.width,o=n.width,a=s*r-o/2;this._layout(t.top*e.height,a)}}setAlignment(e,t=!0){e==="top"?(this.dndViewState.set({top:this._getTopSnapValue()/this._container.clientHeight,left:(this._getCenterXSnapValue()+this._quickInputContainer.clientWidth/2)/this._container.clientWidth,done:t},void 0),this._quickInputAlignmentContext.set("top")):e==="center"?(this.dndViewState.set({top:this._getCenterYSnapValue()/this._container.clientHeight,left:(this._getCenterXSnapValue()+this._quickInputContainer.clientWidth/2)/this._container.clientWidth,done:t},void 0),this._quickInputAlignmentContext.set("center")):(this.dndViewState.set({top:e.top,left:e.left,done:t},void 0),this._quickInputAlignmentContext.set(void 0))}_registerLayoutListener(){this._register(W.filter(this._layoutService.onDidLayoutContainer,e=>e.container===this._container)(e=>this.layoutContainer(e.dimension)))}registerMouseListeners(){const e=this._quickInputContainer;this._register(I2(e,t=>{const n=new Ns(ke(e),t);n.detail===2&&this._quickInputDragAreas.some(({node:s,includeChildren:r})=>r?Kt(n.target,s):n.target===s)&&this.dndViewState.set({top:void 0,left:void 0,done:!0},void 0)})),this._register(aA(e,t=>{const n=ke(this._layoutService.activeContainer),s=new Ns(n,t);if(!this._quickInputDragAreas.some(({node:u,includeChildren:f})=>f?Kt(s.target,u):s.target===u))return;const r=this._quickInputContainer.getBoundingClientRect(),o=s.browserEvent.clientX-r.left,a=s.browserEvent.clientY-r.top;let l=!1;const c=a6(n,u=>{new Ns(n,u).preventDefault(),l||(l=!0),this._layout(u.clientY-a,u.clientX-o)}),h=I2(n,u=>{if(l){const f=this.dndViewState.get();this.dndViewState.set({top:f?.top,left:f?.left,done:!0},void 0)}c.dispose(),h.dispose()})}))}_layout(e,t){const n=this._getTopSnapValue(),s=this._getCenterYSnapValue(),r=this._getCenterXSnapValue();e=Math.max(0,Math.min(e,this._container.clientHeight-this._quickInputContainer.clientHeight)),e<this._layoutService.activeContainerOffset.top&&(this._controlsOnLeft?t=Math.max(t,80/y0(tr())):this._controlsOnRight&&(t=Math.min(t,this._container.clientWidth-this._quickInputContainer.clientWidth-140/y0(tr()))));const o=Math.abs(e-n)<this._snapThreshold;e=o?n:e;const a=Math.abs(e-s)<this._snapThreshold;e=a?s:e;const l=e/this._container.clientHeight;t=Math.max(0,Math.min(t,this._container.clientWidth-this._quickInputContainer.clientWidth));const c=Math.abs(t-r)<this._snapThreshold;t=c?r:t;const h=this._container.clientWidth,u=this._quickInputContainer.clientWidth,g=(t+u/2)/h;if(this.dndViewState.set({top:l,left:g,done:!1},void 0),c){if(o){this._quickInputAlignmentContext.set("top");return}else if(a){this._quickInputAlignmentContext.set("center");return}}this._quickInputAlignmentContext.set(void 0)}_getTopSnapValue(){return this._layoutService.activeContainerOffset.quickPickTop}_getCenterYSnapValue(){return Math.round(this._container.clientHeight*this._snapLineHorizontalRatio)}_getCenterXSnapValue(){return Math.round(this._container.clientWidth/2)-Math.round(this._quickInputContainer.clientWidth/2)}};wv=G([L(4,Jo),L(5,Mt),L(6,Vt)],wv);let vv=class extends $6{get backButton(){return this.controller.backButton}get controller(){return this._controller||(this._controller=this._register(this.createController())),this._controller}get hasController(){return!!this._controller}get currentQuickInput(){return this.controller.currentQuickInput}get quickAccess(){return this._quickAccess||(this._quickAccess=this._register(this.instantiationService.createInstance(rv))),this._quickAccess}constructor(e,t,n,s,r){super(n),this.instantiationService=e,this.contextKeyService=t,this.layoutService=s,this.configurationService=r,this._onShow=this._register(new A),this.onShow=this._onShow.event,this._onHide=this._register(new A),this.onHide=this._onHide.event,this.contexts=new Map}createController(e=this.layoutService,t){const n={idPrefix:"quickInput_",container:e.activeContainer,ignoreFocusOut:()=>!1,backKeybindingLabel:()=>{},setContextKey:r=>this.setContextKey(r),linkOpenerDelegate:r=>{this.instantiationService.invokeFunction(o=>{o.get(Vf).open(r,{allowCommands:!0,fromUserGesture:!0})})},returnFocus:()=>e.focus(),styles:this.computeStyles(),hoverDelegate:this._register(this.instantiationService.createInstance(lv))},s=this._register(this.instantiationService.createInstance(_v,{...n,...t}));return s.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop),this._register(e.onDidLayoutActiveContainer(r=>{ke(e.activeContainer)===ke(s.container)&&s.layout(r,e.activeContainerOffset.quickPickTop)})),this._register(e.onDidChangeActiveContainer(()=>{s.isVisible()||s.layout(e.activeContainerDimension,e.activeContainerOffset.quickPickTop)})),this._register(s.onShow(()=>{this.resetContextKeys(),this._onShow.fire()})),this._register(s.onHide(()=>{this.resetContextKeys(),this._onHide.fire()})),s}setContextKey(e){let t;e&&(t=this.contexts.get(e),t||(t=new oe(e,!1).bindTo(this.contextKeyService),this.contexts.set(e,t))),!(t&&t.get())&&(this.resetContextKeys(),t?.set(!0))}resetContextKeys(){this.contexts.forEach(e=>{e.get()&&e.reset()})}pick(e,t,n=mi.None){return this.controller.pick(e,t,n)}input(e={},t=mi.None){return this.controller.input(e,t)}createQuickPick(e={useSeparators:!1}){return this.controller.createQuickPick(e)}createInputBox(){return this.controller.createInputBox()}createQuickWidget(){return this.controller.createQuickWidget()}focus(){this.controller.focus()}toggle(){this.controller.toggle()}navigate(e,t){this.controller.navigate(e,t)}accept(e){return this.controller.accept(e)}back(){return this.controller.back()}cancel(){return this.controller.cancel()}setAlignment(e){this.controller.setAlignment(e)}toggleHover(){this.hasController&&this.controller.toggleHover()}updateStyles(){this.hasController&&this.controller.applyStyles(this.computeStyles())}computeStyles(){return{widget:{quickInputBackground:K(eE),quickInputForeground:K(v3),quickInputTitleBackground:K(y3),widgetBorder:K(HA),widgetShadow:K(Wf)},inputBox:t4,toggle:JN,countBadge:lH,button:rH,progressBar:oH,keybindingLabel:sH,list:Yf({listBackground:eE,listFocusBackground:G0,listFocusForeground:K0,listInactiveFocusForeground:K0,listInactiveSelectionIconForeground:ZA,listInactiveFocusBackground:G0,listFocusOutline:Ht,listInactiveFocusOutline:Ht}),pickerGroup:{pickerGroupBorder:K(S3),pickerGroupForeground:K(QA)}}}};vv=G([L(0,xt),L(1,Mt),L(2,no),L(3,Jo),L(4,Vt)],vv);mt(oq);let yv=class extends vv{constructor(e,t,n,s,r,o){super(t,n,s,new W0(e.getContainerDomNode(),r),o),this.host=void 0;const a=yf.get(e);if(a){const l=a.widget;this.host={_serviceBrand:void 0,get mainContainer(){return l.getDomNode()},getContainer(){return l.getDomNode()},whenContainerStylesLoaded(){},get containers(){return[l.getDomNode()]},get activeContainer(){return l.getDomNode()},get mainContainerDimension(){return e.getLayoutInfo()},get activeContainerDimension(){return e.getLayoutInfo()},get onDidLayoutMainContainer(){return e.onDidLayoutChange},get onDidLayoutActiveContainer(){return e.onDidLayoutChange},get onDidLayoutContainer(){return W.map(e.onDidLayoutChange,c=>({container:l.getDomNode(),dimension:c}))},get onDidChangeActiveContainer(){return W.None},get onDidAddContainer(){return W.None},get mainContainerOffset(){return{top:0,quickPickTop:0}},get activeContainerOffset(){return{top:0,quickPickTop:0}},focus:()=>e.focus()}}else this.host=void 0}createController(){return super.createController(this.host)}};yv=G([L(1,xt),L(2,Mt),L(3,no),L(4,vr),L(5,Vt)],yv);let Sv=class{get activeService(){const e=this.codeEditorService.getFocusedCodeEditor();if(!e)throw new Error("Quick input service needs a focused editor to work.");let t=this.mapEditorToService.get(e);if(!t){const n=t=this.instantiationService.createInstance(yv,e);this.mapEditorToService.set(e,t),y1(e.onDidDispose)(()=>{n.dispose(),this.mapEditorToService.delete(e)})}return t}get currentQuickInput(){return this.activeService.currentQuickInput}get quickAccess(){return this.activeService.quickAccess}get backButton(){return this.activeService.backButton}get onShow(){return this.activeService.onShow}get onHide(){return this.activeService.onHide}constructor(e,t){this.instantiationService=e,this.codeEditorService=t,this.mapEditorToService=new Map}pick(e,t,n=mi.None){return this.activeService.pick(e,t,n)}input(e,t){return this.activeService.input(e,t)}createQuickPick(e={useSeparators:!1}){return this.activeService.createQuickPick(e)}createInputBox(){return this.activeService.createInputBox()}createQuickWidget(){return this.activeService.createQuickWidget()}focus(){return this.activeService.focus()}toggle(){return this.activeService.toggle()}navigate(e,t){return this.activeService.navigate(e,t)}accept(){return this.activeService.accept()}back(){return this.activeService.back()}cancel(){return this.activeService.cancel()}setAlignment(e){return this.activeService.setAlignment(e)}toggleHover(){return this.activeService.toggleHover()}};Sv=G([L(0,xt),L(1,vr)],Sv);class yf{static{this.ID="editor.controller.quickInput"}static get(e){return e.getContribution(yf.ID)}constructor(e){this.editor=e,this.widget=new Ck(this.editor)}dispose(){this.widget.dispose()}}class Ck{static{this.ID="editor.contrib.quickInputWidget"}constructor(e){this.codeEditor=e,this.domNode=document.createElement("div"),this.codeEditor.addOverlayWidget(this)}getId(){return Ck.ID}getDomNode(){return this.domNode}getPosition(){return{preference:null}}dispose(){this.codeEditor.removeOverlayWidget(this)}}aq(yf.ID,yf,nv.Lazy);class xG{constructor(e,t,n,s,r){this._parsedThemeRuleBrand=void 0,this.token=e,this.index=t,this.fontStyle=n,this.foreground=s,this.background=r}}function LG(i){if(!i||!Array.isArray(i))return[];const e=[];let t=0;for(let n=0,s=i.length;n<s;n++){const r=i[n];let o=ht.NotSet;if(typeof r.fontStyle=="string"){o=ht.None;const c=r.fontStyle.split(" ");for(let h=0,u=c.length;h<u;h++)switch(c[h]){case"italic":o=o|ht.Italic;break;case"bold":o=o|ht.Bold;break;case"underline":o=o|ht.Underline;break;case"strikethrough":o=o|ht.Strikethrough;break}}let a=null;typeof r.foreground=="string"&&(a=r.foreground);let l=null;typeof r.background=="string"&&(l=r.background),e[t++]=new xG(r.token||"",n,o,a,l)}return e}function DG(i,e){i.sort((h,u)=>{const f=RG(h.token,u.token);return f!==0?f:h.index-u.index});let t=ht.None,n="000000",s="ffffff";for(;i.length>=1&&i[0].token==="";){const h=i.shift();h.fontStyle!==ht.NotSet&&(t=h.fontStyle),h.foreground!==null&&(n=h.foreground),h.background!==null&&(s=h.background)}const r=new TG;for(const h of e)r.getId(h);const o=r.getId(n),a=r.getId(s),l=new Ek(t,o,a),c=new xk(l);for(let h=0,u=i.length;h<u;h++){const f=i[h];c.insert(f.token,f.fontStyle,r.getId(f.foreground),r.getId(f.background))}return new F5(r,c)}const IG=/^#?([0-9A-Fa-f]{6})([0-9A-Fa-f]{2})?$/;class TG{constructor(){this._lastColorId=0,this._id2color=[],this._color2id=new Map}getId(e){if(e===null)return 0;const t=e.match(IG);if(!t)throw new Error("Illegal value for token color: "+e);e=t[1].toUpperCase();let n=this._color2id.get(e);return n||(n=++this._lastColorId,this._color2id.set(e,n),this._id2color[n]=P.fromHex("#"+e),n)}getColorMap(){return this._id2color.slice(0)}}class F5{static createFromRawTokenTheme(e,t){return this.createFromParsedTokenTheme(LG(e),t)}static createFromParsedTokenTheme(e,t){return DG(e,t)}constructor(e,t){this._colorMap=e,this._root=t,this._cache=new Map}getColorMap(){return this._colorMap.getColorMap()}getThemeTrieElement(){return this._root.toExternalThemeTrieElement()}_match(e){return this._root.match(e)}match(e,t){let n=this._cache.get(t);if(typeof n>"u"){const s=this._match(t),r=NG(t);n=(s.metadata|r<<Ce.TOKEN_TYPE_OFFSET)>>>0,this._cache.set(t,n)}return(n|e<<Ce.LANGUAGEID_OFFSET)>>>0}}const AG=/\b(comment|string|regex|regexp)\b/;function NG(i){const e=i.match(AG);if(!e)return Jn.Other;switch(e[1]){case"comment":return Jn.Comment;case"string":return Jn.String;case"regex":return Jn.RegEx;case"regexp":return Jn.RegEx}throw new Error("Unexpected match for standard token type!")}function RG(i,e){return i<e?-1:i>e?1:0}class Ek{constructor(e,t,n){this._themeTrieElementRuleBrand=void 0,this._fontStyle=e,this._foreground=t,this._background=n,this.metadata=(this._fontStyle<<Ce.FONT_STYLE_OFFSET|this._foreground<<Ce.FOREGROUND_OFFSET|this._background<<Ce.BACKGROUND_OFFSET)>>>0}clone(){return new Ek(this._fontStyle,this._foreground,this._background)}acceptOverwrite(e,t,n){e!==ht.NotSet&&(this._fontStyle=e),t!==Ws.None&&(this._foreground=t),n!==Ws.None&&(this._background=n),this.metadata=(this._fontStyle<<Ce.FONT_STYLE_OFFSET|this._foreground<<Ce.FOREGROUND_OFFSET|this._background<<Ce.BACKGROUND_OFFSET)>>>0}}class MG{constructor(e,t=new Map){if(this.mainRule=e,t instanceof Map)this.children=t;else{this.children=new Map;for(const n in t)this.children.set(n,t[n])}}}class xk{constructor(e){this._themeTrieElementBrand=void 0,this._mainRule=e,this._children=new Map}toExternalThemeTrieElement(){const e=new Map;return this._children.forEach((t,n)=>{e.set(n,t.toExternalThemeTrieElement())}),new MG(this._mainRule,e)}match(e){if(e==="")return this._mainRule;const t=e.indexOf(".");let n,s;t===-1?(n=e,s=""):(n=e.substring(0,t),s=e.substring(t+1));const r=this._children.get(n);return typeof r<"u"?r.match(s):this._mainRule}insert(e,t,n,s){if(e===""){this._mainRule.acceptOverwrite(t,n,s);return}const r=e.indexOf(".");let o,a;r===-1?(o=e,a=""):(o=e.substring(0,r),a=e.substring(r+1));let l=this._children.get(o);typeof l>"u"&&(l=new xk(this._mainRule.clone()),this._children.set(o,l)),l.insert(a,t,n,s)}}function OG(i){const e=[];for(let t=1,n=i.length;t<n;t++){const s=i[t];e[t]=`.mtk${t} { color: ${s}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}const FG={base:"vs",inherit:!1,rules:[{token:"",foreground:"000000",background:"fffffe"},{token:"invalid",foreground:"cd3131"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"001188"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"delimiter.xml",foreground:"0000FF"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"FF0000"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"},{token:"attribute.value.number",foreground:"098658"},{token:"attribute.value.unit",foreground:"098658"},{token:"attribute.value.html",foreground:"0000FF"},{token:"attribute.value.xml",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"string.html",foreground:"0000FF"},{token:"string.sql",foreground:"FF0000"},{token:"string.yaml",foreground:"0451A5"},{token:"keyword",foreground:"0000FF"},{token:"keyword.json",foreground:"0451A5"},{token:"keyword.flow",foreground:"AF00DB"},{token:"keyword.flow.scss",foreground:"0000FF"},{token:"operator.scss",foreground:"666666"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Jr]:"#FFFFFE",[V1]:"#000000",[PA]:"#E5EBF1",[sb]:"#D3D3D3",[rb]:"#939393",[BA]:"#ADD6FF4D"}},PG={base:"vs-dark",inherit:!1,rules:[{token:"",foreground:"D4D4D4",background:"1E1E1E"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"74B0DF"},{token:"variable.predefined",foreground:"4864AA"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"B5CEA8"},{token:"number.hex",foreground:"5BB498"},{token:"regexp",foreground:"B46695"},{token:"annotation",foreground:"cc6666"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"DCDCDC"},{token:"delimiter.html",foreground:"808080"},{token:"delimiter.xml",foreground:"808080"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"A79873"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"DD6A6F"},{token:"metatag.content.html",foreground:"9CDCFE"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key.json",foreground:"9CDCFE"},{token:"string.value.json",foreground:"CE9178"},{token:"attribute.name",foreground:"9CDCFE"},{token:"attribute.value",foreground:"CE9178"},{token:"attribute.value.number.css",foreground:"B5CEA8"},{token:"attribute.value.unit.css",foreground:"B5CEA8"},{token:"attribute.value.hex.css",foreground:"D4D4D4"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"keyword.json",foreground:"CE9178"},{token:"keyword.flow.scss",foreground:"569CD6"},{token:"operator.scss",foreground:"909090"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Jr]:"#1E1E1E",[V1]:"#D4D4D4",[PA]:"#3A3D41",[sb]:"#404040",[rb]:"#707070",[BA]:"#ADD6FF26"}},BG={base:"hc-black",inherit:!1,rules:[{token:"",foreground:"FFFFFF",background:"000000"},{token:"invalid",foreground:"f44747"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"1AEBFF"},{token:"variable.parameter",foreground:"9CDCFE"},{token:"constant",foreground:"569CD6"},{token:"comment",foreground:"608B4E"},{token:"number",foreground:"FFFFFF"},{token:"regexp",foreground:"C0C0C0"},{token:"annotation",foreground:"569CD6"},{token:"type",foreground:"3DC9B0"},{token:"delimiter",foreground:"FFFF00"},{token:"delimiter.html",foreground:"FFFF00"},{token:"tag",foreground:"569CD6"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta",foreground:"D4D4D4"},{token:"meta.tag",foreground:"CE9178"},{token:"metatag",foreground:"569CD6"},{token:"metatag.content.html",foreground:"1AEBFF"},{token:"metatag.html",foreground:"569CD6"},{token:"metatag.xml",foreground:"569CD6"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"9CDCFE"},{token:"string.key",foreground:"9CDCFE"},{token:"string.value",foreground:"CE9178"},{token:"attribute.name",foreground:"569CD6"},{token:"attribute.value",foreground:"3FF23F"},{token:"string",foreground:"CE9178"},{token:"string.sql",foreground:"FF0000"},{token:"keyword",foreground:"569CD6"},{token:"keyword.flow",foreground:"C586C0"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"909090"},{token:"predefined.sql",foreground:"FF00FF"}],colors:{[Jr]:"#000000",[V1]:"#FFFFFF",[sb]:"#FFFFFF",[rb]:"#FFFFFF"}},WG={base:"hc-light",inherit:!1,rules:[{token:"",foreground:"292929",background:"FFFFFF"},{token:"invalid",foreground:"B5200D"},{token:"emphasis",fontStyle:"italic"},{token:"strong",fontStyle:"bold"},{token:"variable",foreground:"264F70"},{token:"variable.predefined",foreground:"4864AA"},{token:"constant",foreground:"dd0000"},{token:"comment",foreground:"008000"},{token:"number",foreground:"098658"},{token:"number.hex",foreground:"3030c0"},{token:"regexp",foreground:"800000"},{token:"annotation",foreground:"808080"},{token:"type",foreground:"008080"},{token:"delimiter",foreground:"000000"},{token:"delimiter.html",foreground:"383838"},{token:"tag",foreground:"800000"},{token:"tag.id.pug",foreground:"4F76AC"},{token:"tag.class.pug",foreground:"4F76AC"},{token:"meta.scss",foreground:"800000"},{token:"metatag",foreground:"e00000"},{token:"metatag.content.html",foreground:"B5200D"},{token:"metatag.html",foreground:"808080"},{token:"metatag.xml",foreground:"808080"},{token:"metatag.php",fontStyle:"bold"},{token:"key",foreground:"863B00"},{token:"string.key.json",foreground:"A31515"},{token:"string.value.json",foreground:"0451A5"},{token:"attribute.name",foreground:"264F78"},{token:"attribute.value",foreground:"0451A5"},{token:"string",foreground:"A31515"},{token:"string.sql",foreground:"B5200D"},{token:"keyword",foreground:"0000FF"},{token:"keyword.flow",foreground:"AF00DB"},{token:"operator.sql",foreground:"778899"},{token:"operator.swift",foreground:"666666"},{token:"predefined.sql",foreground:"C700C7"}],colors:{[Jr]:"#FFFFFF",[V1]:"#292929",[sb]:"#292929",[rb]:"#292929"}},UG={IconContribution:"base.contributions.icons"};var RD;(function(i){function e(t,n){let s=t.defaults;for(;ze.isThemeIcon(s);){const r=Ic.getIcon(s.id);if(!r)return;s=r.defaults}return s}i.getDefinition=e})(RD||(RD={}));var MD;(function(i){function e(n){return{weight:n.weight,style:n.style,src:n.src.map(s=>({format:s.format,location:s.location.toString()}))}}i.toJSONObject=e;function t(n){const s=r=>Bi(r)?r:void 0;if(n&&Array.isArray(n.src)&&n.src.every(r=>Bi(r.format)&&Bi(r.location)))return{weight:s(n.weight),style:s(n.style),src:n.src.map(r=>({format:r.format,location:Y.parse(r.location)}))}}i.fromJSONObject=t})(MD||(MD={}));const HG=/^([\w_-]+)$/,ure=/^(normal|italic|(oblique[ \w\s-]+))$/,dre=/^(normal|bold|lighter|bolder|(\d{0-1000}))$/,fre=/^([\w_.%+-]+)$/,gre=/^woff|woff2|truetype|opentype|embedded-opentype|svg$/,pre=/^#[0-9a-fA-F]{0,6}$/,VG=d(2292,"The font ID must only contain letters, numbers, underscores and dashes.");class zG extends ${constructor(){super(),this._onDidChange=this._register(new A),this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:d(2293,"The id of the font to use. If not set, the font that is defined first is used."),pattern:HG.source,patternErrorMessage:VG},fontCharacter:{type:"string",description:d(2294,"The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${ze.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,s){const r=this.iconsById[e];if(r){if(n&&!r.description){r.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;const l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return r}const o={id:e,description:n,defaults:t,deprecationMessage:s};this.iconsById[e]=o;const a={$ref:"#/definitions/icons"};return s&&(a.deprecationMessage=s),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}deregisterIcon(e){delete this.iconsById[e],delete this.iconSchema.properties[e];const t=this.iconReferenceSchema.enum.indexOf(e);t!==-1&&(this.iconReferenceSchema.enum.splice(t,1),this.iconReferenceSchema.enumDescriptions.splice(t,1)),this._onDidChange.fire()}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconReferenceSchema(){return this.iconReferenceSchema}registerIconFont(e,t){const n=this.iconFontsById[e];return n||(this.iconFontsById[e]=t,this._onDidChange.fire(),t)}deregisterIconFont(e){delete this.iconFontsById[e]}getIconFont(e){return this.iconFontsById[e]}toString(){const e=(r,o)=>r.id.localeCompare(o.id),t=r=>{for(;ze.isThemeIcon(r.defaults);)r=this.iconsById[r.defaults.id];return`codicon codicon-${r?r.id:""}`},n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const s=Object.keys(this.iconsById).map(r=>this.iconsById[r]);for(const r of s.filter(o=>!!o.description).sort(e))n.push(`|<i class="${t(r)}"></i>|${r.id}|${ze.isThemeIcon(r.defaults)?r.defaults.id:r.id}|${r.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(const r of s.filter(o=>!ze.isThemeIcon(o.defaults)).sort(e))n.push(`|<i class="${t(r)}"></i>|${r.id}|`);return n.join(`
`)}}const Ic=new zG;wt.add(UG.IconContribution,Ic);function Lk(i,e,t,n){return Ic.registerIcon(i,e,t,n)}function Dk(){return Ic}function $G(){const i=$I();for(const e in i){const t="\\"+i[e].toString(16);Ic.registerIcon(e,{fontCharacter:t})}}$G();const P5="vscode://schemas/icons",B5=wt.as(Pf.JSONContribution);B5.registerSchema(P5,Ic.getIconSchema());const OD=new Bs(()=>B5.notifySchemaChanged(P5),200);Ic.onDidChange(()=>{OD.isScheduled()||OD.schedule()});const mre=Lk("widget-close",re.close,d(2295,"Icon for the close action in widgets."));Lk("goto-previous-location",re.arrowUp,d(2296,"Icon for goto previous editor location."));Lk("goto-next-location",re.arrowDown,d(2297,"Icon for goto next editor location."));const bre=ze.modify(re.sync,"spin"),_re=ze.modify(re.loading,"spin");function qG(i){const e=new X,t=e.add(new A),n=Dk();return e.add(n.onDidChange(()=>t.fire())),i&&e.add(i.onDidProductIconThemeChange(()=>t.fire())),{dispose:()=>e.dispose(),onDidChange:t.event,getCSS(){const s=i?i.getProductIconTheme():new W5,r={},o=new s_,a=new s_;for(const l of n.getIcons()){const c=s.getIcon(l);if(!c)continue;const h=c.font,u=Dn`--vscode-icon-${kg(l.id)}-font-family`,f=Dn`--vscode-icon-${kg(l.id)}-content`;h?(r[h.id]=h.definition,a.push(Dn`${u}: ${_o(h.id)};`,Dn`${f}: ${_o(c.fontCharacter)};`),o.push(Dn`.codicon-${kg(l.id)}:before { content: ${_o(c.fontCharacter)}; font-family: ${_o(h.id)}; }`)):(a.push(Dn`${f}: ${_o(c.fontCharacter)}; ${u}: 'codicon';`),o.push(Dn`.codicon-${kg(l.id)}:before { content: ${_o(c.fontCharacter)}; }`))}for(const l in r){const c=r[l],h=c.weight?Dn`font-weight: ${M2(c.weight)};`:Dn``,u=c.style?Dn`font-style: ${M2(c.style)};`:Dn``,f=new s_;for(const g of c.src)f.push(Dn`${pr(g.location)} format(${_o(g.format)})`);o.push(Dn`@font-face { src: ${f.join(", ")}; font-family: ${_o(l)};${h}${u} font-display: block; }`)}return o.push(Dn`:root { ${a.join(" ")} }`),o.join(`
`)}}}class W5{getIcon(e){const t=Dk();let n=e.defaults;for(;ze.isThemeIcon(n);){const s=t.getIcon(n.id);if(!s)return;n=s.defaults}return n}}const La="vs",Ad="vs-dark",Mh="hc-black",Oh="hc-light",U5=wt.as(IA.ColorContribution),KG=wt.as(LA.ThemingContribution);class H5{constructor(e,t){this.semanticHighlighting=!1,this.themeData=t;const n=t.base;e.length>0?(Np(e)?this.id=e:this.id=n+" "+e,this.themeName=e):(this.id=n,this.themeName=n),this.colors=null,this.defaultColors=Object.create(null),this._tokenTheme=null}get label(){return this.themeName}get base(){return this.themeData.base}notifyBaseUpdated(){this.themeData.inherit&&(this.colors=null,this._tokenTheme=null)}getColors(){if(!this.colors){const e=new Map;for(const t in this.themeData.colors)e.set(t,P.fromHex(this.themeData.colors[t]));if(this.themeData.inherit){const t=kv(this.themeData.base);for(const n in t.colors)e.has(n)||e.set(n,P.fromHex(t.colors[n]))}this.colors=e}return this.colors}getColor(e,t){const n=this.getColors().get(e);if(n)return n;if(t!==!1)return this.getDefault(e)}getDefault(e){let t=this.defaultColors[e];return t||(t=U5.resolveDefaultColor(e,this),this.defaultColors[e]=t,t)}defines(e){return this.getColors().has(e)}get type(){switch(this.base){case La:return bs.LIGHT;case Mh:return bs.HIGH_CONTRAST_DARK;case Oh:return bs.HIGH_CONTRAST_LIGHT;default:return bs.DARK}}get tokenTheme(){if(!this._tokenTheme){let e=[],t=[];if(this.themeData.inherit){const r=kv(this.themeData.base);e=r.rules,r.encodedTokensColors&&(t=r.encodedTokensColors)}const n=this.themeData.colors["editor.foreground"],s=this.themeData.colors["editor.background"];if(n||s){const r={token:""};n&&(r.foreground=n),s&&(r.background=s),e.push(r)}e=e.concat(this.themeData.rules),this.themeData.encodedTokensColors&&(t=this.themeData.encodedTokensColors),this._tokenTheme=F5.createFromRawTokenTheme(e,t)}return this._tokenTheme}getTokenStyleMetadata(e,t,n){const r=this.tokenTheme._match([e].concat(t).join(".")).metadata,o=er.getForeground(r),a=er.getFontStyle(r);return{foreground:o,italic:!!(a&ht.Italic),bold:!!(a&ht.Bold),underline:!!(a&ht.Underline),strikethrough:!!(a&ht.Strikethrough)}}get tokenColorMap(){return[]}}function Np(i){return i===La||i===Ad||i===Mh||i===Oh}function kv(i){switch(i){case La:return FG;case Ad:return PG;case Mh:return BG;case Oh:return WG}}function ep(i){const e=kv(i);return new H5(i,e)}class GG extends ${constructor(){super(),this._onColorThemeChange=this._register(new A),this.onDidColorThemeChange=this._onColorThemeChange.event,this._onFileIconThemeChange=this._register(new A),this.onDidFileIconThemeChange=this._onFileIconThemeChange.event,this._onProductIconThemeChange=this._register(new A),this.onDidProductIconThemeChange=this._onProductIconThemeChange.event,this._environment=Object.create(null),this._builtInProductIconTheme=new W5,this._autoDetectHighContrast=!0,this._knownThemes=new Map,this._knownThemes.set(La,ep(La)),this._knownThemes.set(Ad,ep(Ad)),this._knownThemes.set(Mh,ep(Mh)),this._knownThemes.set(Oh,ep(Oh));const e=this._register(qG(this));this._codiconCSS=e.getCSS(),this._themeCSS="",this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._globalStyleElement=null,this._styleElements=[],this._colorMapOverride=null,this.setTheme(La),this._onOSSchemeChanged(),this._register(e.onDidChange(()=>{this._codiconCSS=e.getCSS(),this._updateCSS()})),AT($e,"(forced-colors: active)",()=>{this._onOSSchemeChanged()})}registerEditorContainer(e){return am(e)?this._registerShadowDomContainer(e):this._registerRegularEditorContainer()}_registerRegularEditorContainer(){return this._globalStyleElement||(this._globalStyleElement=On(void 0,e=>{e.className="monaco-colors",e.textContent=this._allCSS}),this._styleElements.push(this._globalStyleElement)),$.None}_registerShadowDomContainer(e){const t=On(e,n=>{n.className="monaco-colors",n.textContent=this._allCSS});return this._styleElements.push(t),{dispose:()=>{for(let n=0;n<this._styleElements.length;n++)if(this._styleElements[n]===t){this._styleElements.splice(n,1);return}}}}defineTheme(e,t){if(!/^[a-z0-9\-]+$/i.test(e))throw new Error("Illegal theme name!");if(!Np(t.base)&&!Np(e))throw new Error("Illegal theme base!");this._knownThemes.set(e,new H5(e,t)),Np(e)&&this._knownThemes.forEach(n=>{n.base===e&&n.notifyBaseUpdated()}),this._theme.themeName===e&&this.setTheme(e)}getColorTheme(){return this._theme}setColorMapOverride(e){this._colorMapOverride=e,this._updateThemeOrColorMap()}setTheme(e){let t;this._knownThemes.has(e)?t=this._knownThemes.get(e):t=this._knownThemes.get(La),this._updateActualTheme(t)}_updateActualTheme(e){!e||this._theme===e||(this._theme=e,this._updateThemeOrColorMap())}_onOSSchemeChanged(){if(this._autoDetectHighContrast){const e=$e.matchMedia("(forced-colors: active)").matches;if(e!==V6(this._theme.type)){let t;H1(this._theme.type)?t=e?Mh:Ad:t=e?Oh:La,this._updateActualTheme(this._knownThemes.get(t))}}}setAutoDetectHighContrast(e){this._autoDetectHighContrast=e,this._onOSSchemeChanged()}_updateThemeOrColorMap(){const e=[],t={},n={addRule:o=>{t[o]||(e.push(o),t[o]=!0)}};KG.getThemingParticipants().forEach(o=>o(this._theme,n,this._environment));const s=[];for(const o of U5.getColors()){const a=this._theme.getColor(o.id,!0);a&&s.push(`${sS(o.id)}: ${a.toString()};`)}n.addRule(`.monaco-editor, .monaco-diff-editor, .monaco-component { ${s.join(`
`)} }`);const r=this._colorMapOverride||this._theme.tokenTheme.getColorMap();n.addRule(OG(r)),this._themeCSS=e.join(`
`),this._updateCSS(),nf.setColorMap(r),this._onColorThemeChange.fire(this._theme)}_updateCSS(){this._allCSS=`${this._codiconCSS}
${this._themeCSS}`,this._styleElements.forEach(e=>e.textContent=this._allCSS)}getFileIconTheme(){return{hasFileIcons:!1,hasFolderIcons:!1,hidesExplorerArrows:!1}}getProductIconTheme(){return this._builtInProductIconTheme}}const jG=be("themeService");let Cv=class extends ${constructor(e,t,n){super(),this._contextKeyService=e,this._layoutService=t,this._configurationService=n,this._accessibilitySupport=rr.Unknown,this._onDidChangeScreenReaderOptimized=new A,this._onDidChangeReducedMotion=new A,this._onDidChangeLinkUnderline=new A,this._accessibilityModeEnabledContext=PO.bindTo(this._contextKeyService);const s=()=>this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());this._register(this._configurationService.onDidChangeConfiguration(o=>{o.affectsConfiguration("editor.accessibilitySupport")&&(s(),this._onDidChangeScreenReaderOptimized.fire()),o.affectsConfiguration("workbench.reduceMotion")&&(this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._onDidChangeReducedMotion.fire())})),s(),this._register(this.onDidChangeScreenReaderOptimized(()=>s()));const r=$e.matchMedia("(prefers-reduced-motion: reduce)");this._systemMotionReduced=r.matches,this._configMotionReduced=this._configurationService.getValue("workbench.reduceMotion"),this._linkUnderlinesEnabled=this._configurationService.getValue("accessibility.underlineLinks"),this.initReducedMotionListeners(r),this.initLinkUnderlineListeners()}initReducedMotionListeners(e){this._register(V(e,"change",()=>{this._systemMotionReduced=e.matches,this._configMotionReduced==="auto"&&this._onDidChangeReducedMotion.fire()}));const t=()=>{const n=this.isMotionReduced();this._layoutService.mainContainer.classList.toggle("reduce-motion",n),this._layoutService.mainContainer.classList.toggle("enable-motion",!n)};t(),this._register(this.onDidChangeReducedMotion(()=>t()))}initLinkUnderlineListeners(){this._register(this._configurationService.onDidChangeConfiguration(t=>{if(t.affectsConfiguration("accessibility.underlineLinks")){const n=this._configurationService.getValue("accessibility.underlineLinks");this._linkUnderlinesEnabled=n,this._onDidChangeLinkUnderline.fire()}}));const e=()=>{const t=this._linkUnderlinesEnabled;this._layoutService.mainContainer.classList.toggle("underline-links",t)};e(),this._register(this.onDidChangeLinkUnderlines(()=>e()))}onDidChangeLinkUnderlines(e){return this._onDidChangeLinkUnderline.event(e)}get onDidChangeScreenReaderOptimized(){return this._onDidChangeScreenReaderOptimized.event}isScreenReaderOptimized(){const e=this._configurationService.getValue("editor.accessibilitySupport");return e==="on"||e==="auto"&&this._accessibilitySupport===rr.Enabled}get onDidChangeReducedMotion(){return this._onDidChangeReducedMotion.event}isMotionReduced(){const e=this._configMotionReduced;return e==="on"||e==="auto"&&this._systemMotionReduced}alwaysUnderlineAccessKeys(){return Promise.resolve(!1)}getAccessibilitySupport(){return this._accessibilitySupport}setAccessibilitySupport(e){this._accessibilitySupport!==e&&(this._accessibilitySupport=e,this._onDidChangeScreenReaderOptimized.fire())}alert(e){Yh(e)}status(e){Lm(e)}};Cv=G([L(0,Mt),L(1,Jo),L(2,Vt)],Cv);var th,ed;let Ev=class{constructor(e,t,n){this._commandService=e,this._keybindingService=t,this._hiddenStates=new xv(n)}createMenu(e,t,n){return new l1(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...n},this._commandService,this._keybindingService,t)}getMenuActions(e,t,n){const s=new l1(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...n},this._commandService,this._keybindingService,t),r=s.getActions(n);return s.dispose(),r}getMenuContexts(e){const t=new Fh(e,!1);return new Set([...t.structureContextKeys,...t.preconditionContextKeys,...t.toggledContextKeys])}resetHiddenStates(e){this._hiddenStates.reset(e)}};Ev=G([L(0,ea),L(1,$s),L(2,rl)],Ev);let xv=class{static{th=this}static{this._key="menu.hiddenCommands"}constructor(e){this._storageService=e,this._disposables=new X,this._onDidChange=new A,this.onDidChange=this._onDidChange.event,this._ignoreChangeEvent=!1,this._hiddenByDefaultCache=new Map;try{const t=e.get(th._key,Oe.PROFILE,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(Oe.PROFILE,th._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{const t=e.get(th._key,Oe.PROFILE,"{}");this._data=JSON.parse(t)}catch(t){console.log("FAILED to read storage after UPDATE",t)}this._onDidChange.fire()}))}dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){return this._hiddenByDefaultCache.get(`${e.id}/${t}`)??!1}setDefaultState(e,t,n){this._hiddenByDefaultCache.set(`${e.id}/${t}`,n)}isHidden(e,t){const n=this._isHiddenByDefault(e,t),s=this._data[e.id]?.includes(t)??!1;return n?!s:s}updateHidden(e,t,n){this._isHiddenByDefault(e,t)&&(n=!n);const r=this._data[e.id];if(n)r?r.indexOf(t)<0&&r.push(t):this._data[e.id]=[t];else if(r){const o=r.indexOf(t);o>=0&&LR(r,o),r.length===0&&delete this._data[e.id]}this._persist()}reset(e){if(e===void 0)this._data=Object.create(null),this._persist();else{for(const{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;const e=JSON.stringify(this._data);this._storageService.store(th._key,e,Oe.PROFILE,fc.USER)}finally{this._ignoreChangeEvent=!1}}};xv=th=G([L(0,rl)],xv);class Fh{constructor(e,t){this._id=e,this._collectContextKeysForSubmenus=t,this._menuGroups=[],this._allMenuIds=new Set,this._structureContextKeys=new Set,this._preconditionContextKeys=new Set,this._toggledContextKeys=new Set,this.refresh()}get allMenuIds(){return this._allMenuIds}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._allMenuIds.clear(),this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();const e=this._sort(Pa.getMenuItems(this._id));let t;for(const n of e){const s=n.group||"";(!t||t[0]!==s)&&(t=[s,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeysAndSubmenuIds(n)}this._allMenuIds.add(this._id)}_sort(e){return e}_collectContextKeysAndSubmenuIds(e){if(Fh._fillInKbExprKeys(e.when,this._structureContextKeys),wd(e)){if(e.command.precondition&&Fh._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){const t=e.command.toggled.condition||e.command.toggled;Fh._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&(Pa.getMenuItems(e.submenu).forEach(this._collectContextKeysAndSubmenuIds,this),this._allMenuIds.add(e.submenu))}static _fillInKbExprKeys(e,t){if(e)for(const n of e.keys())t.add(n)}}let Lv=ed=class extends Fh{constructor(e,t,n,s,r,o){super(e,n),this._hiddenStates=t,this._commandService=s,this._keybindingService=r,this._contextKeyService=o,this.refresh()}createActionGroups(e){const t=[];for(const n of this._menuGroups){const[s,r]=n;let o;for(const a of r)if(this._contextKeyService.contextMatchesRules(a.when)){const l=wd(a);l&&this._hiddenStates.setDefaultState(this._id,a.command.id,!!a.isHiddenByDefault);const c=YG(this._id,l?a.command:a,this._hiddenStates);if(l){const h=XG(this._commandService,this._keybindingService,a.command.id,a.when);(o??=[]).push(new Qh(a.command,a.alt,e,c,h,this._contextKeyService,this._commandService))}else{const h=new ed(a.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(e),u=Ui.join(...h.map(f=>f[1]));u.length>0&&(o??=[]).push(new o4(a,c,u))}}o&&o.length>0&&t.push([s,o])}return t}_sort(e){return e.sort(ed._compareMenuItems)}static _compareMenuItems(e,t){const n=e.group,s=t.group;if(n!==s){if(n){if(!s)return-1}else return 1;if(n==="navigation")return-1;if(s==="navigation")return 1;const a=n.localeCompare(s);if(a!==0)return a}const r=e.order||0,o=t.order||0;return r<o?-1:r>o?1:ed._compareTitles(wd(e)?e.command.title:e.title,wd(t)?t.command.title:t.title)}static _compareTitles(e,t){const n=typeof e=="string"?e:e.original,s=typeof t=="string"?t:t.original;return n.localeCompare(s)}};Lv=ed=G([L(3,ea),L(4,$s),L(5,Mt)],Lv);let l1=class{constructor(e,t,n,s,r,o){this._disposables=new X,this._menuInfo=new Lv(e,t,n.emitEventsForSubmenuChanges,s,r,o);const a=new Bs(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},n.eventDebounceDelay);this._disposables.add(a),this._disposables.add(Pa.onDidChangeMenu(u=>{for(const f of this._menuInfo.allMenuIds)if(u.has(f)){a.schedule();break}}));const l=this._disposables.add(new X),c=u=>{let f=!1,g=!1,p=!1;for(const m of u)if(f=f||m.isStructuralChange,g=g||m.isEnablementChange,p=p||m.isToggleChange,f&&g&&p)break;return{menu:this,isStructuralChange:f,isEnablementChange:g,isToggleChange:p}},h=()=>{l.add(o.onDidChangeContext(u=>{const f=u.affectsSome(this._menuInfo.structureContextKeys),g=u.affectsSome(this._menuInfo.preconditionContextKeys),p=u.affectsSome(this._menuInfo.toggledContextKeys);(f||g||p)&&this._onDidChange.fire({menu:this,isStructuralChange:f,isEnablementChange:g,isToggleChange:p})})),l.add(t.onDidChange(u=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))};this._onDidChange=new _y({onWillAddFirstListener:h,onDidRemoveLastListener:l.clear.bind(l),delay:n.eventDebounceDelay,merge:c}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};l1=G([L(3,ea),L(4,$s),L(5,Mt)],l1);function YG(i,e,t){const n=gH(e)?e.submenu.id:e.id,s=typeof e.title=="string"?e.title:e.title.value,r=dw({id:`hide/${i.id}/${n}`,label:d(1711,"Hide '{0}'",s),run(){t.updateHidden(i,n,!0)}}),o=dw({id:`toggle/${i.id}/${n}`,label:s,get checked(){return!t.isHidden(i,n)},run(){t.updateHidden(i,n,!!this.checked)}});return{hide:r,toggle:o,get isHidden(){return!o.checked}}}function XG(i,e,t,n=void 0,s=!0){return dw({id:`configureKeybinding/${t}`,label:d(1712,"Configure Keybinding"),enabled:s,run(){const o=!!!e.lookupKeybinding(t)&&n?n.serialize():void 0;i.executeCommand("workbench.action.openGlobalKeybindings",`@command:${t}`+(o?` +when:${o}`:""))}})}var Dv;const Uu="application/vnd.code.resources";let Iv=class extends ${static{Dv=this}constructor(e,t){super(),this.layoutService=e,this.logService=t,this.mapTextToType=new Map,this.findText="",this.resources=[],this.resourcesStateHash=void 0,(F1||z8)&&this.installWebKitWriteTextWorkaround(),this._register(W.runAndSubscribe(W1,({window:n,disposables:s})=>{s.add(V(n.document,"copy",()=>this.clearResourcesState()))},{window:$e,disposables:this._store}))}triggerPaste(){}async readImage(){try{const t=(await navigator.clipboard.read())[0],s=["image/png","image/jpeg","image/gif","image/tiff","image/bmp"].find(r=>t.types.includes(r));if(s){const o=await(await t.getType(s)).arrayBuffer();return new Uint8Array(o)}else console.error("No supported image type found in the clipboard")}catch(e){console.error("Error reading image from clipboard:",e)}return new Uint8Array(0)}installWebKitWriteTextWorkaround(){const e=()=>{const t=new Ya;this.webKitPendingClipboardWritePromise&&!this.webKitPendingClipboardWritePromise.isSettled&&this.webKitPendingClipboardWritePromise.cancel(),this.webKitPendingClipboardWritePromise=t,tr().navigator.clipboard.write([new ClipboardItem({"text/plain":t.p})]).catch(async n=>{(!(n instanceof Error)||n.name!=="NotAllowedError"||!t.isRejected)&&this.logService.error(n)})};this._register(W.runAndSubscribe(this.layoutService.onDidAddContainer,({container:t,disposables:n})=>{n.add(V(t,"click",e)),n.add(V(t,"keydown",e))},{container:this.layoutService.mainContainer,disposables:this._store}))}async writeText(e,t){if(this.clearResourcesState(),t){this.mapTextToType.set(t,e);return}if(this.webKitPendingClipboardWritePromise)return this.webKitPendingClipboardWritePromise.complete(e);try{return await tr().navigator.clipboard.writeText(e)}catch(n){console.error(n)}this.fallbackWriteText(e)}fallbackWriteText(e){const t=U1(),n=t.activeElement,s=t.body.appendChild(_e("textarea",{"aria-hidden":!0}));s.style.height="1px",s.style.width="1px",s.style.position="absolute",s.value=e,s.focus(),s.select(),t.execCommand("copy"),Ut(n)&&n.focus(),s.remove()}async readText(e){if(e)return this.mapTextToType.get(e)||"";try{return await tr().navigator.clipboard.readText()}catch(t){console.error(t)}return""}async readFindText(){return this.findText}async writeFindText(e){this.findText=e}static{this.MAX_RESOURCE_STATE_SOURCE_LENGTH=1e3}async writeResources(e){try{await tr().navigator.clipboard.write([new ClipboardItem({[`web ${Uu}`]:new Blob([JSON.stringify(e.map(t=>t.toJSON()))],{type:Uu})})])}catch{}e.length===0?this.clearResourcesState():(this.resources=e,this.resourcesStateHash=await this.computeResourcesStateHash())}async readResources(){try{const t=await tr().navigator.clipboard.read();for(const n of t)if(n.types.includes(`web ${Uu}`)){const s=await n.getType(`web ${Uu}`);return JSON.parse(await s.text()).map(o=>Y.from(o))}}catch{}const e=await this.computeResourcesStateHash();return this.resourcesStateHash!==e&&this.clearResourcesState(),this.resources}async computeResourcesStateHash(){if(this.resources.length===0)return;const e=await this.readText();return rc(e.substring(0,Dv.MAX_RESOURCE_STATE_SOURCE_LENGTH))}async hasResources(){try{const e=await tr().navigator.clipboard.read();for(const t of e)if(t.types.includes(`web ${Uu}`))return!0}catch{}return this.resources.length>0}clearInternalState(){this.clearResourcesState()}clearResourcesState(){this.resources=[],this.resourcesStateHash=void 0}};Iv=Dv=G([L(0,Jo),L(1,Zi)],Iv);const QG=be("clipboardService"),Nd="data-keybinding-context";class Ik{constructor(e,t){this._id=e,this._parent=t,this._value=Object.create(null),this._value._contextId=e}get value(){return{...this._value}}setValue(e,t){return this._value[e]!==t?(this._value[e]=t,!0):!1}removeValue(e){return e in this._value?(delete this._value[e],!0):!1}getValue(e){const t=this._value[e];return typeof t>"u"&&this._parent?this._parent.getValue(e):t}updateParent(e){this._parent=e}collectAllValues(){let e=this._parent?this._parent.collectAllValues():Object.create(null);return e={...e,...this._value},delete e._contextId,e}}class su extends Ik{static{this.INSTANCE=new su}constructor(){super(-1,null)}setValue(e,t){return!1}removeValue(e){return!1}getValue(e){}collectAllValues(){return Object.create(null)}}class c1 extends Ik{static{this._keyPrefix="config."}constructor(e,t,n){super(e,null),this._configurationService=t,this._values=ps.forConfigKeys(),this._listener=this._configurationService.onDidChangeConfiguration(s=>{if(s.source===Ds.DEFAULT){const r=Array.from(this._values,([o])=>o);this._values.clear(),n.fire(new Tv(r))}else{const r=[];for(const o of s.affectedKeys){const a=`config.${o}`,l=this._values.findSuperstr(a);l!==void 0&&(r.push(...Be.map(l,([c])=>c)),this._values.deleteSuperstr(a)),this._values.has(a)&&(r.push(a),this._values.delete(a))}n.fire(new Tv(r))}})}dispose(){this._listener.dispose()}getValue(e){if(e.indexOf(c1._keyPrefix)!==0)return super.getValue(e);if(this._values.has(e))return this._values.get(e);const t=e.substr(c1._keyPrefix.length),n=this._configurationService.getValue(t);let s;switch(typeof n){case"number":case"boolean":case"string":s=n;break;default:Array.isArray(n)?s=JSON.stringify(n):s=n}return this._values.set(e,s),s}setValue(e,t){return super.setValue(e,t)}removeValue(e){return super.removeValue(e)}collectAllValues(){const e=Object.create(null);return this._values.forEach((t,n)=>e[n]=t),{...e,...super.collectAllValues()}}}class ZG{constructor(e,t,n){this._service=e,this._key=t,this._defaultValue=n,this.reset()}set(e){this._service.setContext(this._key,e)}reset(){typeof this._defaultValue>"u"?this._service.removeContext(this._key):this._service.setContext(this._key,this._defaultValue)}get(){return this._service.getContextKeyValue(this._key)}}class FD{constructor(e){this.key=e}affectsSome(e){return e.has(this.key)}allKeysContainedIn(e){return this.affectsSome(e)}}class Tv{constructor(e){this.keys=e}affectsSome(e){for(const t of this.keys)if(e.has(t))return!0;return!1}allKeysContainedIn(e){return this.keys.every(t=>e.has(t))}}class JG{constructor(e){this.events=e}affectsSome(e){for(const t of this.events)if(t.affectsSome(e))return!0;return!1}allKeysContainedIn(e){return this.events.every(t=>t.allKeysContainedIn(e))}}function ej(i,e){return i.allKeysContainedIn(new Set(Object.keys(e)))}class V5 extends ${constructor(e){super(),this._onDidChangeContext=this._register(new Pd({merge:t=>new JG(t)})),this.onDidChangeContext=this._onDidChangeContext.event,this._isDisposed=!1,this._myContextId=e}get contextId(){return this._myContextId}createKey(e,t){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new ZG(this,e,t)}bufferChangeEvents(e){this._onDidChangeContext.pause();try{e()}finally{this._onDidChangeContext.resume()}}createScoped(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new tj(this,e)}createOverlay(e=Be.empty()){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");return new Tk(this,e)}contextMatchesRules(e){if(this._isDisposed)throw new Error("AbstractContextKeyService has been disposed");const t=this.getContextValuesContainer(this._myContextId);return e?e.evaluate(t):!0}getContextKeyValue(e){if(!this._isDisposed)return this.getContextValuesContainer(this._myContextId).getValue(e)}setContext(e,t){if(this._isDisposed)return;const n=this.getContextValuesContainer(this._myContextId);n&&n.setValue(e,t)&&this._onDidChangeContext.fire(new FD(e))}removeContext(e){this._isDisposed||this.getContextValuesContainer(this._myContextId).removeValue(e)&&this._onDidChangeContext.fire(new FD(e))}getContext(e){return this._isDisposed?su.INSTANCE:this.getContextValuesContainer(ij(e))}dispose(){super.dispose(),this._isDisposed=!0}}let Av=class extends V5{constructor(e){super(0),this._contexts=new Map,this._lastContextId=0;const t=this._register(new c1(this._myContextId,e,this._onDidChangeContext));this._contexts.set(this._myContextId,t)}getContextValuesContainer(e){return this._isDisposed?su.INSTANCE:this._contexts.get(e)||su.INSTANCE}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ContextKeyService has been disposed");const t=++this._lastContextId;return this._contexts.set(t,new Ik(t,this.getContextValuesContainer(e))),t}disposeContext(e){this._isDisposed||this._contexts.delete(e)}updateParent(e){throw new Error("Cannot update parent of root ContextKeyService")}};Av=G([L(0,Vt)],Av);class tj extends V5{constructor(e,t){if(super(e.createChildContext()),this._parentChangeListener=this._register(new vs),this._parent=e,this._updateParentChangeListener(),this._domNode=t,this._domNode.hasAttribute(Nd)){let n="";this._domNode.classList&&(n=Array.from(this._domNode.classList.values()).join(", ")),console.error(`Element already has context attribute${n?": "+n:""}`)}this._domNode.setAttribute(Nd,String(this._myContextId))}_updateParentChangeListener(){this._parentChangeListener.value=this._parent.onDidChangeContext(e=>{const n=this._parent.getContextValuesContainer(this._myContextId).value;ej(e,n)||this._onDidChangeContext.fire(e)})}dispose(){this._isDisposed||(this._parent.disposeContext(this._myContextId),this._domNode.removeAttribute(Nd),super.dispose())}getContextValuesContainer(e){return this._isDisposed?su.INSTANCE:this._parent.getContextValuesContainer(e)}createChildContext(e=this._myContextId){if(this._isDisposed)throw new Error("ScopedContextKeyService has been disposed");return this._parent.createChildContext(e)}disposeContext(e){this._isDisposed||this._parent.disposeContext(e)}updateParent(e){if(this._parent===e)return;const t=this._parent.getContextValuesContainer(this._myContextId),n=t.collectAllValues();this._parent=e,this._updateParentChangeListener();const s=this._parent.getContextValuesContainer(this._parent.contextId);t.updateParent(s);const r=t.collectAllValues(),o={...GC(n,r),...GC(r,n)},a=Object.keys(o);this._onDidChangeContext.fire(new Tv(a))}}class PD{constructor(e,t){this.parent=e,this.overlay=t}getValue(e){return this.overlay.has(e)?this.overlay.get(e):this.parent.getValue(e)}}class Tk{get contextId(){return this.parent.contextId}get onDidChangeContext(){return this.parent.onDidChangeContext}constructor(e,t){this.parent=e,this.overlay=new Map(t)}bufferChangeEvents(e){this.parent.bufferChangeEvents(e)}createKey(){throw new Error("Not supported.")}getContext(e){return new PD(this.parent.getContext(e),this.overlay)}getContextValuesContainer(e){const t=this.parent.getContextValuesContainer(e);return new PD(t,this.overlay)}contextMatchesRules(e){const t=this.getContextValuesContainer(this.contextId);return e?e.evaluate(t):!0}getContextKeyValue(e){return this.overlay.has(e)?this.overlay.get(e):this.parent.getContextKeyValue(e)}createScoped(){throw new Error("Not supported.")}createOverlay(e=Be.empty()){return new Tk(this,e)}updateParent(){throw new Error("Not supported.")}}function ij(i){for(;i;){if(i.hasAttribute(Nd)){const e=i.getAttribute(Nd);return e?parseInt(e,10):NaN}i=i.parentElement}return 0}function nj(i,e,t){i.get(Mt).createKey(String(e),sj(t))}function sj(i){return zy(i,e=>{if(typeof e=="object"&&e.$mid===za.Uri)return Y.revive(e).toString();if(e instanceof Y)return e.toString()})}Ss.registerCommand("_setContext",nj);Ss.registerCommand({id:"getContextKeyInfo",handler(){return[...oe.all()].sort((i,e)=>i.key.localeCompare(e.key))},metadata:{description:d(1721,"A command that returns information about context keys"),args:[]}});Ss.registerCommand("_generateContextKeyInfo",function(){const i=[],e=new Set;for(const t of oe.all())e.has(t.key)||(e.add(t.key),i.push(t));i.sort((t,n)=>t.key.localeCompare(n.key)),console.log(JSON.stringify(i,void 0,2))});let rj=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}};class BD{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const n=this.lookupOrInsertNode(e),s=this.lookupOrInsertNode(t);n.outgoing.set(s.key,s),s.incoming.set(n.key,n)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const n of this._nodes.values())n.outgoing.delete(t),n.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let n=this._nodes.get(t);return n||(n=new rj(t,e),this._nodes.set(t,n)),n}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,n]of this._nodes)e.push(`${t}
	(-> incoming)[${[...n.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...n.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const n=new Set([e]),s=this._findCycle(t,n);if(s)return s}}_findCycle(e,t){for(const[n,s]of e.outgoing){if(t.has(n))return[...t,n].join(" -> ");t.add(n);const r=this._findCycle(s,t);if(r)return r;t.delete(n)}}}class z5{constructor(...e){this._entries=new Map;for(const[t,n]of e)this.set(t,n)}set(e,t){const n=this._entries.get(e);return this._entries.set(e,t),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}const oj=!1;class WD extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class h1{constructor(e=new z5,t=!1,n,s=oj){this._services=e,this._strict=t,this._parent=n,this._enableTracing=s,this._isDisposed=!1,this._servicesToMaybeDispose=new Set,this._children=new Set,this._activeInstantiations=new Set,this._services.set(xt,this),this._globalGraph=s?n?._globalGraph??new BD(r=>r):void 0}dispose(){if(!this._isDisposed){this._isDisposed=!0,ai(this._children),this._children.clear();for(const e of this._servicesToMaybeDispose)lu(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,t){this._throwIfDisposed();const n=this,s=new class extends h1{dispose(){n._children.delete(s),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(s),t?.add(s),s}invokeFunction(e,...t){this._throwIfDisposed();const n=ls.traceInvocation(this._enableTracing,e);let s=!1;try{return e({get:o=>{if(s)throw ly("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(o,n);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...t)}finally{s=!0,n.stop()}}createInstance(e,...t){this._throwIfDisposed();let n,s;return e instanceof ti?(n=ls.traceCreation(this._enableTracing,e.ctor),s=this._createInstance(e.ctor,e.staticArguments.concat(t),n)):(n=ls.traceCreation(this._enableTracing,e),s=this._createInstance(e,t,n)),n.stop(),s}_createInstance(e,t=[],n){const s=or.getServiceDependencies(e).sort((a,l)=>a.index-l.index),r=[];for(const a of s){const l=this._getOrCreateServiceInstance(a.id,n);l||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),r.push(l)}const o=s.length>0?s[0].index:t.length;if(t.length!==o){console.trace(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);const a=o-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,o)}return Reflect.construct(e,t.concat(r))}_setCreatedServiceInstance(e,t){if(this._services.get(e)instanceof ti)this._services.set(e,t);else if(this._parent)this._parent._setCreatedServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const n=this._getServiceInstanceOrDescriptor(e);return n instanceof ti?this._safeCreateAndCacheServiceInstance(e,n,t.branch(e,!0)):(t.branch(e,!1),n)}_safeCreateAndCacheServiceInstance(e,t,n){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,n)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,n){const s=new BD(l=>l.id.toString());let r=0;const o=[{id:e,desc:t,_trace:n}],a=new Set;for(;o.length;){const l=o.pop();if(!a.has(String(l.id))){if(a.add(String(l.id)),s.lookupOrInsertNode(l),r++>1e3)throw new WD(s);for(const c of or.getServiceDependencies(l.desc.ctor)){const h=this._getServiceInstanceOrDescriptor(c.id);if(h||this._throwIfStrict(`[createInstance] ${e} depends on ${c.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(l.id),String(c.id)),h instanceof ti){const u={id:c.id,desc:h,_trace:l._trace.branch(c.id,!0)};s.lookup(u)||o.push(u),s.insertEdge(l,u)}}}}for(;;){const l=s.roots();if(l.length===0){if(!s.isEmpty())throw new WD(s);break}for(const{data:c}of l){if(this._getServiceInstanceOrDescriptor(c.id)instanceof ti){const u=this._createServiceInstanceWithOwner(c.id,c.desc.ctor,c.desc.staticArguments,c.desc.supportsDelayedInstantiation,c._trace);this._setCreatedServiceInstance(c.id,u)}s.removeNode(c)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,n=[],s,r){if(this._services.get(e)instanceof ti)return this._createServiceInstance(e,t,n,s,r,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,n,s,r);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,n=[],s,r,o){if(s){const a=new h1(void 0,this._strict,this,this._enableTracing);a._globalGraphImplicitDependency=String(e);const l=new Map,c=new U9(()=>{const h=a._createInstance(t,n,r);for(const[u,f]of l){const g=h[u];if(typeof g=="function")for(const p of f)p.disposable=g.apply(h,p.listener)}return l.clear(),o.add(h),h});return new Proxy(Object.create(null),{get(h,u){if(!c.isInitialized&&typeof u=="string"&&(u.startsWith("onDid")||u.startsWith("onWill"))){let p=l.get(u);return p||(p=new sn,l.set(u,p)),(_,v,y)=>{if(c.isInitialized)return c.value[u](_,v,y);{const E={listener:[_,v,y],disposable:void 0},N=p.push(E);return fe(()=>{N(),E.disposable?.dispose()})}}}if(u in h)return h[u];const f=c.value;let g=f[u];return typeof g!="function"||(g=g.bind(f),h[u]=g),g},set(h,u,f){return c.value[u]=f,!0},getPrototypeOf(h){return t.prototype}})}else{const a=this._createInstance(t,n,r);return o.add(a),a}}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}var Rl;(function(i){i[i.None=0]="None",i[i.Creation=1]="Creation",i[i.Invocation=2]="Invocation",i[i.Branch=3]="Branch"})(Rl||(Rl={}));class ls{static{this.all=new Set}static{this._None=new class extends ls{constructor(){super(Rl.None,null)}stop(){}branch(){return this}}}static traceInvocation(e,t){return e?new ls(Rl.Invocation,t.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):ls._None}static traceCreation(e,t){return e?new ls(Rl.Creation,t.name):ls._None}static{this._totals=0}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const n=new ls(Rl.Branch,e.toString());return this._dep.push([e,t,n]),n}stop(){const e=Date.now()-this._start;ls._totals+=e;let t=!1;function n(r,o){const a=[],l=new Array(r+1).join("	");for(const[c,h,u]of o._dep)if(h&&u){t=!0,a.push(`${l}CREATES -> ${c}`);const f=n(r+1,u);f&&a.push(f)}else a.push(`${l}uses -> ${c}`);return a.join(`
`)}const s=[`${this.type===Rl.Creation?"CREATE":"CALL"} ${this.name}`,`${n(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${ls._totals.toFixed(2)}ms)`];(e>2||t)&&ls.all.add(s.join(`
`))}}const aj=new Set([ge.inMemory,ge.vscodeSourceControl,ge.walkThrough,ge.walkThroughSnippet,ge.vscodeChatCodeBlock,ge.vscodeTerminal]);class lj{constructor(){this._byResource=new oi,this._byOwner=new Map}set(e,t,n){let s=this._byResource.get(e);s||(s=new Map,this._byResource.set(e,s)),s.set(t,n);let r=this._byOwner.get(t);r||(r=new oi,this._byOwner.set(t,r)),r.set(e,n)}get(e,t){return this._byResource.get(e)?.get(t)}delete(e,t){let n=!1,s=!1;const r=this._byResource.get(e);r&&(n=r.delete(t));const o=this._byOwner.get(t);if(o&&(s=o.delete(e)),n!==s)throw new Error("illegal state");return n&&s}values(e){return typeof e=="string"?this._byOwner.get(e)?.values()??Be.empty():Y.isUri(e)?this._byResource.get(e)?.values()??Be.empty():Be.map(Be.concat(...this._byOwner.values()),t=>t[1])}}class cj{constructor(e){this.errors=0,this.infos=0,this.warnings=0,this.unknowns=0,this._data=new oi,this._service=e,this._subscription=e.onMarkerChanged(this._update,this)}dispose(){this._subscription.dispose()}_update(e){for(const t of e){const n=this._data.get(t);n&&this._substract(n);const s=this._resourceStats(t);this._add(s),this._data.set(t,s)}}_resourceStats(e){const t={errors:0,warnings:0,infos:0,unknowns:0};if(aj.has(e.scheme))return t;for(const{severity:n}of this._service.read({resource:e}))n===es.Error?t.errors+=1:n===es.Warning?t.warnings+=1:n===es.Info?t.infos+=1:t.unknowns+=1;return t}_substract(e){this.errors-=e.errors,this.warnings-=e.warnings,this.infos-=e.infos,this.unknowns-=e.unknowns}_add(e){this.errors+=e.errors,this.warnings+=e.warnings,this.infos+=e.infos,this.unknowns+=e.unknowns}}class Ml{constructor(){this._onMarkerChanged=new _y({delay:0,merge:Ml._merge}),this.onMarkerChanged=this._onMarkerChanged.event,this._data=new lj,this._stats=new cj(this),this._filteredResources=new oi}dispose(){this._stats.dispose(),this._onMarkerChanged.dispose()}getStatistics(){return this._stats}remove(e,t){for(const n of t||[])this.changeOne(e,n,[])}changeOne(e,t,n){if(MR(n))this._data.delete(t,e)&&this._onMarkerChanged.fire([t]);else{const s=[];for(const r of n){const o=Ml._toMarker(e,t,r);o&&s.push(o)}this._data.set(t,e,s),this._onMarkerChanged.fire([t])}}installResourceFilter(e,t){let n=this._filteredResources.get(e);return n||(n=[],this._filteredResources.set(e,n)),n.push(t),this._onMarkerChanged.fire([e]),fe(()=>{const s=this._filteredResources.get(e);if(!s)return;const r=s.indexOf(t);r!==-1&&(s.splice(r,1),s.length===0&&this._filteredResources.delete(e),this._onMarkerChanged.fire([e]))})}static _toMarker(e,t,n){let{code:s,severity:r,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:h,endColumn:u,relatedInformation:f,tags:g}=n;if(o)return l=l>0?l:1,c=c>0?c:1,h=h>=l?h:l,u=u>0?u:c,{resource:t,owner:e,code:s,severity:r,message:o,source:a,startLineNumber:l,startColumn:c,endLineNumber:h,endColumn:u,relatedInformation:f,tags:g}}changeAll(e,t){const n=[],s=this._data.values(e);if(s)for(const r of s){const o=Be.first(r);o&&(n.push(o.resource),this._data.delete(o.resource,e))}if(Y_(t)){const r=new oi;for(const{resource:o,marker:a}of t){const l=Ml._toMarker(e,o,a);if(!l)continue;const c=r.get(o);c?c.push(l):(r.set(o,[l]),n.push(o))}for(const[o,a]of r)this._data.set(o,e,a)}n.length>0&&this._onMarkerChanged.fire(n)}_createFilteredMarker(e,t){const n=t.length===1?d(1934,'Problems are paused because: "{0}"',t[0]):d(1935,'Problems are paused because: "{0}" and {1} more',t[0],t.length-1);return{owner:"markersFilter",resource:e,severity:es.Info,message:n,startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1}}read(e=Object.create(null)){let{owner:t,resource:n,severities:s,take:r}=e;if((!r||r<0)&&(r=-1),t&&n){const o=e.ignoreResourceFilters?void 0:this._filteredResources.get(n);if(o?.length)return[this._createFilteredMarker(n,o)];const a=this._data.get(n,t);if(!a)return[];const l=[];for(const c of a){if(r>0&&l.length===r)break;const h=e.ignoreResourceFilters?void 0:this._filteredResources.get(n);h?.length?l.push(this._createFilteredMarker(n,h)):Ml._accept(c,s)&&l.push(c)}return l}else{const o=!t&&!n?this._data.values():this._data.values(n??t),a=[],l=new $R;for(const c of o)for(const h of c){if(l.has(h.resource))continue;if(r>0&&a.length===r)break;const u=e.ignoreResourceFilters?void 0:this._filteredResources.get(h.resource);u?.length?(a.push(this._createFilteredMarker(h.resource,u)),l.add(h.resource)):Ml._accept(h,s)&&a.push(h)}return a}}static _accept(e,t){return t===void 0||(t&e.severity)===e.severity}static _merge(e){const t=new oi;for(const n of e)for(const s of n)t.set(s,!0);return Array.from(t.keys())}}const hj=be("policy");let uj=class extends ${get configurationModel(){return this._configurationModel}constructor(e){super(),this.logService=e,this._onDidChangeConfiguration=this._register(new A),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configurationModel=Yt.createEmptyModel(e)}async initialize(){return this.resetConfigurationModel(),this._register(wt.as(Ps.Configuration).onDidUpdateConfiguration(({properties:e,defaultsOverrides:t})=>this.onDidUpdateConfiguration(Array.from(e),t))),this.configurationModel}reload(){return this.resetConfigurationModel(),this.configurationModel}onDidUpdateConfiguration(e,t){this.updateConfigurationModel(e,wt.as(Ps.Configuration).getConfigurationProperties()),this._onDidChangeConfiguration.fire({defaults:this.configurationModel,properties:e})}getConfigurationDefaultOverrides(){return{}}resetConfigurationModel(){this._configurationModel=Yt.createEmptyModel(this.logService);const e=wt.as(Ps.Configuration).getConfigurationProperties();this.updateConfigurationModel(Object.keys(e),e)}updateConfigurationModel(e,t){const n=this.getConfigurationDefaultOverrides();for(const s of e){const r=n[s],o=t[s];r!==void 0?this._configurationModel.setValue(s,r):o?this._configurationModel.setValue(s,da(o.default)):this._configurationModel.removeValue(s)}}};class Dre{constructor(){this.onDidChangeConfiguration=W.None,this.configurationModel=Yt.createEmptyModel(new IO)}async initialize(){return this.configurationModel}}let UD=class extends ${get configurationModel(){return this._configurationModel}constructor(e,t,n){super(),this.defaultConfiguration=e,this.policyService=t,this.logService=n,this._onDidChangeConfiguration=this._register(new A),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._configurationModel=Yt.createEmptyModel(this.logService),this.configurationRegistry=wt.as(Ps.Configuration)}async initialize(){return this.logService.trace("PolicyConfiguration#initialize"),this.update(await this.updatePolicyDefinitions(this.defaultConfiguration.configurationModel.keys),!1),this.update(await this.updatePolicyDefinitions(Object.keys(this.configurationRegistry.getExcludedConfigurationProperties())),!1),this._register(this.policyService.onDidChange(e=>this.onDidChangePolicies(e))),this._register(this.defaultConfiguration.onDidChangeConfiguration(async({properties:e})=>this.update(await this.updatePolicyDefinitions(e),!0))),this._configurationModel}async updatePolicyDefinitions(e){this.logService.trace("PolicyConfiguration#updatePolicyDefinitions",e);const t={},n=[],s=this.configurationRegistry.getConfigurationProperties(),r=this.configurationRegistry.getExcludedConfigurationProperties();for(const o of e){const a=s[o]??r[o];if(!a){n.push(o);continue}if(a.policy){if(a.type!=="string"&&a.type!=="number"&&a.type!=="array"&&a.type!=="object"&&a.type!=="boolean"){this.logService.warn(`Policy ${a.policy.name} has unsupported type ${a.type}`);continue}const{defaultValue:l,previewFeature:c}=a.policy;n.push(o),t[a.policy.name]={type:a.type==="number"?"number":a.type==="boolean"?"boolean":"string",previewFeature:c,defaultValue:l}}}return dy(t)||await this.policyService.updatePolicyDefinitions(t),n}onDidChangePolicies(e){this.logService.trace("PolicyConfiguration#onDidChangePolicies",e);const t=this.configurationRegistry.getPolicyConfigurations(),n=ru(e.map(s=>t.get(s)));this.update(n,!0)}update(e,t){this.logService.trace("PolicyConfiguration#update",e);const n=this.configurationRegistry.getConfigurationProperties(),s=this.configurationRegistry.getExcludedConfigurationProperties(),r=[],o=this._configurationModel.isEmpty();for(const a of e){const l=n[a]??s[a],c=l?.policy?.name;if(c){let h=this.policyService.getPolicyValue(c);if(Bi(h)&&l.type!=="string")try{h=this.parse(h)}catch(u){this.logService.error(`Error parsing policy value ${c}:`,Fp(u));continue}(o?h!==void 0:!Wi(this._configurationModel.getValue(a),h))&&r.push([a,h])}else this._configurationModel.getValue(a)!==void 0&&r.push([a,void 0])}if(r.length){this.logService.trace("PolicyConfiguration#changed",r);const a=this._configurationModel;this._configurationModel=Yt.createEmptyModel(this.logService);for(const l of a.keys)this._configurationModel.setValue(l,a.getValue(l));for(const[l,c]of r)c===void 0?this._configurationModel.removeValue(l):this._configurationModel.setValue(l,c);t&&this._onDidChangeConfiguration.fire(this._configurationModel)}}parse(e){let t={},n=null,s=[];const r=[],o=[];function a(c){if(Array.isArray(s))s.push(c);else if(n!==null){if(s[n]!==void 0)throw new Error(`Duplicate property found: ${n}`);s[n]=c}}if(e&&(j1(e,{onObjectBegin:()=>{const c={};a(c),r.push(s),s=c,n=null},onObjectProperty:c=>{n=c},onObjectEnd:()=>{s=r.pop()},onArrayBegin:()=>{const c=[];a(c),r.push(s),s=c,n=null},onArrayEnd:()=>{s=r.pop()},onLiteralValue:a,onError:(c,h,u)=>{o.push({error:c,offset:h,length:u})}}),t=s[0]||{}),o.length>0)throw new Error(o.map(c=>Fp(c.error)).join(`
`));return t}};UD=G([L(1,hj),L(2,Zi)],UD);const dj=be("accessibilitySignalService");class $5 extends ${constructor(e,t=[]){super(),this.logger=new LO([e,...t]),this._register(e.onDidChangeLogLevel(n=>this.setLevel(n)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}flush(){this.logger.flush()}}class fj{getParserClass(){throw new Error("getParserClass is not implemented in StandaloneTreeSitterLibraryService")}supportsLanguage(e,t){return!1}getLanguage(e,t){}getInjectionQueries(e,t){return null}getHighlightingQueries(e,t){return null}}class gj{constructor(e){this.disposed=!1,this.model=e,this._onWillDispose=new A}get onWillDispose(){return this._onWillDispose.event}resolve(){return Promise.resolve()}get textEditorModel(){return this.model}createSnapshot(){return this.model.createSnapshot()}isReadonly(){return!1}dispose(){this.disposed=!0,this._onWillDispose.fire()}isDisposed(){return this.disposed}isResolved(){return!0}getLanguageId(){return this.model.getLanguageId()}}let Nv=class{constructor(e){this.modelService=e}createModelReference(e){const t=this.modelService.getModel(e);return t?Promise.resolve(new ZR(new gj(t))):Promise.reject(new Error("Model not found"))}registerTextModelContentProvider(e,t){return{dispose:function(){}}}canHandleResource(e){return!1}};Nv=G([L(0,yr)],Nv);class Ak{static{this.NULL_PROGRESS_RUNNER={done:()=>{},total:()=>{},worked:()=>{}}}show(){return Ak.NULL_PROGRESS_RUNNER}async showWhile(e,t){await e}}class pj{withProgress(e,t,n){return t({report:()=>{}})}}class mj{constructor(){this.stateResource=Y.from({scheme:"monaco",authority:"stateResource"}),this.userRoamingDataHome=Y.from({scheme:"monaco",authority:"userRoamingDataHome"}),this.keyboardLayoutResource=Y.from({scheme:"monaco",authority:"keyboardLayoutResource"}),this.argvResource=Y.from({scheme:"monaco",authority:"argvResource"}),this.untitledWorkspacesHome=Y.from({scheme:"monaco",authority:"untitledWorkspacesHome"}),this.workspaceStorageHome=Y.from({scheme:"monaco",authority:"workspaceStorageHome"}),this.localHistoryHome=Y.from({scheme:"monaco",authority:"localHistoryHome"}),this.cacheHome=Y.from({scheme:"monaco",authority:"cacheHome"}),this.userDataSyncHome=Y.from({scheme:"monaco",authority:"userDataSyncHome"}),this.sync=void 0,this.continueOn=void 0,this.editSessionId=void 0,this.debugExtensionHost={port:null,break:!1},this.isExtensionDevelopment=!1,this.disableExtensions=!1,this.enableExtensions=void 0,this.extensionDevelopmentLocationURI=void 0,this.extensionDevelopmentKind=void 0,this.extensionTestsLocationURI=void 0,this.logsHome=Y.from({scheme:"monaco",authority:"logsHome"}),this.logLevel=void 0,this.extensionLogLevel=void 0,this.verbose=!1,this.isBuilt=!1,this.disableTelemetry=!1,this.serviceMachineIdResource=Y.from({scheme:"monaco",authority:"serviceMachineIdResource"}),this.policyFile=void 0}}class bj{constructor(){this.onWillShowDialog=W.None,this.onDidShowDialog=W.None}async confirm(e){return{confirmed:this.doConfirm(e.message,e.detail),checkboxChecked:!1}}doConfirm(e,t){let n=e;return t&&(n=n+`

`+t),$e.confirm(n)}async prompt(e){let t;if(this.doConfirm(e.message,e.detail)){const s=[...e.buttons??[]];e.cancelButton&&typeof e.cancelButton!="string"&&typeof e.cancelButton!="boolean"&&s.push(e.cancelButton),t=await s[0]?.run({checkboxChecked:!1})}return{result:t}}async info(e,t){await this.prompt({type:bt.Info,message:e,detail:t})}async warn(e,t){await this.prompt({type:bt.Warning,message:e,detail:t})}async error(e,t){await this.prompt({type:bt.Error,message:e,detail:t})}input(){return Promise.resolve({confirmed:!1})}about(){return Promise.resolve(void 0)}}class u1{constructor(){this.onDidChangeFilter=W.None}static{this.NO_OP=new ZW}info(e){return this.notify({severity:bt.Info,message:e})}warn(e){return this.notify({severity:bt.Warning,message:e})}error(e){return this.notify({severity:bt.Error,message:e})}notify(e){switch(e.severity){case bt.Error:console.error(e.message);break;case bt.Warning:console.warn(e.message);break;default:console.log(e.message);break}return u1.NO_OP}prompt(e,t,n,s){return u1.NO_OP}status(e,t){return{close:()=>{}}}setFilter(e){}getFilter(e){return hw.OFF}getFilters(){return[]}removeFilter(e){}}let Rv=class{constructor(e){this._onWillExecuteCommand=new A,this._onDidExecuteCommand=new A,this.onWillExecuteCommand=this._onWillExecuteCommand.event,this.onDidExecuteCommand=this._onDidExecuteCommand.event,this._instantiationService=e}executeCommand(e,...t){const n=Ss.getCommand(e);if(!n)return Promise.reject(new Error(`command '${e}' not found`));try{this._onWillExecuteCommand.fire({commandId:e,args:t});const s=this._instantiationService.invokeFunction.apply(this._instantiationService,[n.handler,...t]);return this._onDidExecuteCommand.fire({commandId:e,args:t}),Promise.resolve(s)}catch(s){return Promise.reject(s)}}};Rv=G([L(0,xt)],Rv);let Mv=class extends KW{constructor(e,t,n,s,r,o){super(e,t,n,s,r),this._cachedResolver=null,this._dynamicKeybindings=[],this._domNodeListeners=[];const a=g=>{const p=new X;p.add(V(g,j.KEY_DOWN,m=>{const _=new at(m);this._dispatch(_,_.target)&&(_.preventDefault(),_.stopPropagation())})),p.add(V(g,j.KEY_UP,m=>{const _=new at(m);this._singleModifierDispatch(_,_.target)&&_.preventDefault()})),this._domNodeListeners.push(new _j(g,p))},l=g=>{for(let p=0;p<this._domNodeListeners.length;p++){const m=this._domNodeListeners[p];m.domNode===g&&(this._domNodeListeners.splice(p,1),m.dispose())}},c=g=>{g.getOption(O.inDiffEditor)||a(g.getContainerDomNode())},h=g=>{g.getOption(O.inDiffEditor)||l(g.getContainerDomNode())};this._register(o.onCodeEditorAdd(c)),this._register(o.onCodeEditorRemove(h)),o.listCodeEditors().forEach(c);const u=g=>{a(g.getContainerDomNode())},f=g=>{l(g.getContainerDomNode())};this._register(o.onDiffEditorAdd(u)),this._register(o.onDiffEditorRemove(f)),o.listDiffEditors().forEach(u)}addDynamicKeybinding(e,t,n,s){return Kr(Ss.registerCommand(e,n),this.addDynamicKeybindings([{keybinding:t,command:e,when:s}]))}addDynamicKeybindings(e){const t=e.map(n=>({keybinding:E0(n.keybinding,An),command:n.command??null,commandArgs:n.commandArgs,when:n.when,weight1:1e3,weight2:0,extensionId:null,isBuiltinExtension:!1}));return this._dynamicKeybindings=this._dynamicKeybindings.concat(t),this.updateResolver(),fe(()=>{for(let n=0;n<this._dynamicKeybindings.length;n++)if(this._dynamicKeybindings[n]===t[0]){this._dynamicKeybindings.splice(n,t.length),this.updateResolver();return}})}updateResolver(){this._cachedResolver=null,this._onDidUpdateKeybindings.fire()}getUserKeybindingItems(){return this._toNormalizedKeybindingItems(this._dynamicKeybindings,!1)}_getResolver(){if(!this._cachedResolver){const e=this._toNormalizedKeybindingItems(dc.getDefaultKeybindings(),!0),t=this.getUserKeybindingItems();this._cachedResolver=new pd(e,t,n=>this._log(n))}return this._cachedResolver}_documentHasFocus(){return $e.document.hasFocus()}_toNormalizedKeybindingItems(e,t){const n=[];let s=0;for(const r of e){const o=r.when||void 0,a=r.keybinding;if(!a)n[s++]=new QE(void 0,r.command,r.commandArgs,o,t,null,!1);else{const l=this.resolveKeybinding(a);for(const c of l)n[s++]=new QE(c,r.command,r.commandArgs,o,t,null,!1)}}return n}resolveKeybinding(e){return rf.resolveKeybinding(e,An)}resolveKeyboardEvent(e){const t=new oc(e.ctrlKey,e.shiftKey,e.altKey,e.metaKey,e.keyCode);return new rf([t],An)}resolveUserBinding(e){return[]}_dumpDebugInfo(){return""}_dumpDebugInfoJSON(){return""}registerSchemaContribution(e){}enableKeybindingHoldMode(e){}};Mv=G([L(0,Mt),L(1,ea),L(2,gu),L(3,Ec),L(4,Zi),L(5,vr)],Mv);class _j extends ${constructor(e,t){super(),this.domNode=e,this._register(t)}}function HD(i){return i&&typeof i=="object"&&(!i.overrideIdentifier||typeof i.overrideIdentifier=="string")&&(!i.resource||i.resource instanceof Y)}let d1=class{constructor(e){this.logService=e,this._onDidChangeConfiguration=new A,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event;const t=new uj(e);this._configuration=new AN(t.reload(),Yt.createEmptyModel(e),Yt.createEmptyModel(e),Yt.createEmptyModel(e),Yt.createEmptyModel(e),Yt.createEmptyModel(e),new oi,Yt.createEmptyModel(e),new oi,e),t.dispose()}getValue(e,t){const n=typeof e=="string"?e:void 0,s=HD(e)?e:HD(t)?t:{};return this._configuration.getValue(n,s,void 0)}updateValues(e){const t={data:this._configuration.toData()},n=[];for(const s of e){const[r,o]=s;this.getValue(r)!==o&&(this._configuration.updateValue(r,o),n.push(r))}if(n.length>0){const s=new zW({keys:n,overrides:[]},t,this._configuration,void 0,this.logService);s.source=Ds.MEMORY,this._onDidChangeConfiguration.fire(s)}return Promise.resolve()}updateValue(e,t,n,s){return this.updateValues([[e,t]])}inspect(e,t={}){return this._configuration.inspect(e,t,void 0)}keys(){return this._configuration.keys(void 0)}reloadConfiguration(){return Promise.resolve(void 0)}getConfigurationData(){const e={contents:{},keys:[],overrides:[]};return{defaults:e,policy:e,application:e,userLocal:e,userRemote:e,workspace:e,folders:[]}}};d1=G([L(0,Zi)],d1);let Ov=class{constructor(e,t,n){this.configurationService=e,this.modelService=t,this.languageService=n,this._onDidChangeConfiguration=new A,this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this.configurationService.onDidChangeConfiguration(s=>{this._onDidChangeConfiguration.fire({affectedKeys:s.affectedKeys,affectsConfiguration:(r,o)=>s.affectsConfiguration(o)})})}getValue(e,t,n){const s=pe.isIPosition(t)?t:null,r=s?typeof n=="string"?n:void 0:typeof t=="string"?t:void 0,o=e?this.getLanguage(e,s):void 0;return typeof r>"u"?this.configurationService.getValue({resource:e,overrideIdentifier:o}):this.configurationService.getValue(r,{resource:e,overrideIdentifier:o})}inspect(e,t,n){const s=e?this.getLanguage(e,t):void 0;return this.configurationService.inspect(n,{resource:e,overrideIdentifier:s})}getLanguage(e,t){const n=this.modelService.getModel(e);return n?t?n.getLanguageIdAtPosition(t.lineNumber,t.column):n.getLanguageId():this.languageService.guessLanguageIdByFilepathOrFirstLine(e)}updateValue(e,t,n,s){return this.configurationService.updateValue(t,n,{resource:e},s)}};Ov=G([L(0,Vt),L(1,yr),L(2,xc)],Ov);let Fv=class{constructor(e){this.configurationService=e}getEOL(e,t){const n=this.configurationService.getValue("files.eol",{overrideIdentifier:t,resource:e});return n&&typeof n=="string"&&n!=="auto"?n:rs||Me?`
`:`\r
`}};Fv=G([L(0,Vt)],Fv);class wj{constructor(){this.telemetryLevel=To.NONE,this.sessionId="someValue.sessionId",this.machineId="someValue.machineId",this.sqmId="someValue.sqmId",this.devDeviceId="someValue.devDeviceId",this.firstSessionDate="someValue.firstSessionDate",this.sendErrorTelemetry=!1}setEnabled(){}setExperimentProperty(){}publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}}class Rd{static{this.SCHEME="inmemory"}constructor(){this._onDidChangeWorkspaceName=new A,this.onDidChangeWorkspaceName=this._onDidChangeWorkspaceName.event,this._onWillChangeWorkspaceFolders=new A,this.onWillChangeWorkspaceFolders=this._onWillChangeWorkspaceFolders.event,this._onDidChangeWorkspaceFolders=new A,this.onDidChangeWorkspaceFolders=this._onDidChangeWorkspaceFolders.event,this._onDidChangeWorkbenchState=new A,this.onDidChangeWorkbenchState=this._onDidChangeWorkbenchState.event;const e=Y.from({scheme:Rd.SCHEME,authority:"model",path:"/"});this.workspace={id:FN,folders:[new RN({uri:e,name:"",index:0})]}}getCompleteWorkspace(){return Promise.resolve(this.getWorkspace())}getWorkspace(){return this.workspace}getWorkbenchState(){return this.workspace?this.workspace.configuration?md.WORKSPACE:md.FOLDER:md.EMPTY}getWorkspaceFolder(e){return e&&e.scheme===Rd.SCHEME?this.workspace.folders[0]:null}isInsideWorkspace(e){return e&&e.scheme===Rd.SCHEME}isCurrentWorkspace(e){return!0}}function Fre(i,e,t){if(!e||!(i instanceof d1))return;const n=[];Object.keys(e).forEach(s=>{FW(s)&&n.push([`editor.${s}`,e[s]]),t&&PW(s)&&n.push([`diffEditor.${s}`,e[s]])}),n.length>0&&i.updateValues(n)}let Pv=class{constructor(e){this._modelService=e}hasPreviewHandler(){return!1}setPreviewHandler(){return $.None}async apply(e,t){const n=Array.isArray(e)?e:ES.convert(e),s=new Map;for(const a of n){if(!(a instanceof Yl))throw new Error("bad edit - only text edits are supported");const l=this._modelService.getModel(a.resource);if(!l)throw new Error("bad edit - model not found");if(typeof a.versionId=="number"&&l.getVersionId()!==a.versionId)throw new Error("bad state - model changed in the meantime");let c=s.get(l);c||(c=[],s.set(l,c)),c.push(jh.replaceMove(H.lift(a.textEdit.range),a.textEdit.text))}let r=0,o=0;for(const[a,l]of s)a.pushStackElement(),a.pushEditOperations([],l,()=>[]),a.pushStackElement(),o+=1,r+=l.length;return{ariaSummary:xo(uw.bulkEditServiceSummary,r,o),isApplied:r>0}}};Pv=G([L(0,yr)],Pv);class vj{constructor(){this.onDidChangeFormatters=W.None}getUriLabel(e,t){return e.scheme==="file"?e.fsPath:e.path}getUriBasenameLabel(e){return nc(e)}getWorkspaceLabel(e,t){return""}getSeparator(e,t){return"/"}registerFormatter(e){throw new Error("Not implemented")}registerCachedFormatter(e){return this.registerFormatter(e)}getHostLabel(){return""}getHostTooltip(){}}let Bv=class extends LW{constructor(e,t){super(e),this._codeEditorService=t}showContextView(e,t,n){if(!t){const s=this._codeEditorService.getFocusedCodeEditor()||this._codeEditorService.getActiveCodeEditor();s&&(t=s.getContainerDomNode())}return super.showContextView(e,t,n)}};Bv=G([L(0,Jo),L(1,vr)],Bv);class yj{constructor(){this._neverEmitter=new A,this.onDidChangeTrust=this._neverEmitter.event,this.onDidChangeTrustedFolders=this._neverEmitter.event,this.workspaceResolved=Promise.resolve(),this.workspaceTrustInitialized=Promise.resolve(),this.acceptsOutOfWorkspaceFiles=!0}isWorkspaceTrusted(){return!0}isWorkspaceTrustForced(){return!1}canSetParentFolderTrust(){return!1}async setParentFolderTrust(e){}canSetWorkspaceTrust(){return!1}async setWorkspaceTrust(e){}getUriTrustInfo(e){throw new Error("Method not supported.")}async setUrisTrust(e,t){}getTrustedUris(){return[]}async setTrustedUris(e){}addWorkspaceTrustTransitionParticipant(e){throw new Error("Method not supported.")}}class Sj extends Om{constructor(){super()}}class kj extends $5{constructor(){super(new xO)}}let Wv=class extends Cw{constructor(e,t,n,s,r,o){super(e,t,n,s,r,o),this.configure({blockMouse:!1})}};Wv=G([L(0,gu),L(1,Ec),L(2,Uf),L(3,$s),L(4,tb),L(5,Mt)],Wv);const Cj={esmModuleLocation:void 0,label:"editorWorkerService"};let Uv=class extends Hm{constructor(e,t,n,s,r){super(Cj,e,t,n,s,r)}};Uv=G([L(0,yr),L(1,G1),L(2,Zi),L(3,Xf),L(4,iS)],Uv);class Ej{async playSignal(e,t){}async playSignals(e){}getEnabledState(e,t,n){return E7.const(!1)}getDelayMs(e,t){return 0}isSoundEnabled(e){return!1}isAnnouncementEnabled(e){return!1}onSoundEnabledChanged(e){return W.None}async playSound(e,t){}playSignalLoop(e){return fe(()=>{})}}st(Zi,kj,Xe.Eager);st(Vt,d1,Xe.Eager);st(G1,Ov,Xe.Eager);st(DN,Fv,Xe.Eager);st(X1,Rd,Xe.Eager);st(DS,vj,Xe.Eager);st(gu,wj,Xe.Eager);st(SA,bj,Xe.Eager);st(fu,mj,Xe.Eager);st(Ec,u1,Xe.Eager);st(E4,Ml,Xe.Eager);st(xc,Sj,Xe.Eager);st(jG,GG,Xe.Eager);st(yr,iv,Xe.Eager);st(dz,Hw,Xe.Eager);st(Mt,Av,Xe.Eager);st(IS,pj,Xe.Eager);st(eU,Ak,Xe.Eager);st(rl,tH,Xe.Eager);st(u4,Uv,Xe.Eager);st(RW,Pv,Xe.Eager);st(sU,yj,Xe.Eager);st(xS,Nv,Xe.Eager);st(qf,Cv,Xe.Eager);st(ro,cG,Xe.Eager);st(ea,Rv,Xe.Eager);st($s,Mv,Xe.Eager);st(eg,Sv,Xe.Eager);st(Uf,Bv,Xe.Eager);st(Vf,Dw,Xe.Eager);st(QG,Iv,Xe.Eager);st(Hf,Wv,Xe.Eager);st(tb,Ev,Xe.Eager);st(dj,Ej,Xe.Eager);st(ek,fj,Xe.Eager);var VD;(function(i){const e=new z5;for(const[l,c]of KC())e.set(l,c);const t=new h1(e,!0);e.set(xt,t);function n(l){s||o({});const c=e.get(l);if(!c)throw new Error("Missing service "+l);return c instanceof ti?t.invokeFunction(h=>h.get(l)):c}i.get=n;let s=!1;const r=new A;function o(l){if(s)return t;s=!0;for(const[c,h]of KC())e.get(c)||e.set(c,h);for(const c in l)if(l.hasOwnProperty(c)){const h=be(c);e.get(h)instanceof ti&&e.set(h,l[c])}return r.fire(),t}i.initialize=o;function a(l){if(s)return l();const c=new X,h=c.add(r.event(()=>{h.dispose(),c.add(l())}));return c}i.withServices=a})(VD||(VD={}));const xj=be("downloadService"),q5=be("productService"),K5=be("requestService"),Lj=be("urlService"),Hv="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",Hre=new RegExp(Hv);var zD;(function(i){i.COMMAND="command",i.SETTINGS_SYNC="settingsSync"})(zD||(zD={}));function Dj(i,e){switch(i){case rn.Windows:return e==="x64"?en.WIN32_X64:e==="arm64"?en.WIN32_ARM64:en.UNKNOWN;case rn.Linux:return e==="x64"?en.LINUX_X64:e==="arm64"?en.LINUX_ARM64:e==="arm"?en.LINUX_ARMHF:en.UNKNOWN;case"alpine":return e==="x64"?en.ALPINE_X64:e==="arm64"?en.ALPINE_ARM64:en.UNKNOWN;case rn.Mac:return e==="x64"?en.DARWIN_X64:e==="arm64"?en.DARWIN_ARM64:en.UNKNOWN;case rn.Web:return en.WEB}}function Vre(i){return i&&typeof i=="object"&&typeof i.id=="string"&&(!i.uuid||typeof i.uuid=="string")}var $D;(function(i){i.NoneOrRelevance="NoneOrRelevance",i.LastUpdatedDate="LastUpdatedDate",i.Title="Title",i.PublisherName="PublisherName",i.InstallCount="InstallCount",i.PublishedDate="PublishedDate",i.AverageRating="AverageRating",i.WeightedRating="WeightedRating"})($D||($D={}));var qD;(function(i){i[i.Default=0]="Default",i[i.Ascending=1]="Ascending",i[i.Descending=2]="Descending"})(qD||(qD={}));var KD;(function(i){i.Category="Category",i.ExtensionId="ExtensionId",i.ExtensionName="ExtensionName",i.ExcludeWithFlags="ExcludeWithFlags",i.Featured="Featured",i.SearchText="SearchText",i.Tag="Tag",i.Target="Target"})(KD||(KD={}));var GD;(function(i){i.Install="install",i.Uninstall="uninstall"})(GD||(GD={}));var jD;(function(i){i[i.None=1]="None",i[i.Install=2]="Install",i[i.Update=3]="Update",i[i.Migrate=4]="Migrate"})(jD||(jD={}));var YD;(function(i){i.Timeout="Timeout",i.Cancelled="Cancelled",i.Failed="Failed",i.DownloadFailedWriting="DownloadFailedWriting",i.Offline="Offline"})(YD||(YD={}));var XD;(function(i){i.NotFound="NotFound",i.Unsupported="Unsupported",i.Deprecated="Deprecated",i.Malicious="Malicious",i.Incompatible="Incompatible",i.IncompatibleApi="IncompatibleApi",i.IncompatibleTargetPlatform="IncompatibleTargetPlatform",i.ReleaseVersionNotFound="ReleaseVersionNotFound",i.Invalid="Invalid",i.Download="Download",i.DownloadSignature="DownloadSignature",i.DownloadFailedWriting="DownloadFailedWriting",i.UpdateMetadata="UpdateMetadata",i.Extract="Extract",i.Scanning="Scanning",i.ScanningExtension="ScanningExtension",i.ReadRemoved="ReadRemoved",i.UnsetRemoved="UnsetRemoved",i.Delete="Delete",i.Rename="Rename",i.IntializeDefaultProfile="IntializeDefaultProfile",i.AddToProfile="AddToProfile",i.InstalledExtensionNotFound="InstalledExtensionNotFound",i.PostInstall="PostInstall",i.CorruptZip="CorruptZip",i.IncompleteZip="IncompleteZip",i.PackageNotSigned="PackageNotSigned",i.SignatureVerificationInternal="SignatureVerificationInternal",i.SignatureVerificationFailed="SignatureVerificationFailed",i.NotAllowed="NotAllowed",i.Gallery="Gallery",i.Cancelled="Cancelled",i.Unknown="Unknown",i.Internal="Internal"})(XD||(XD={}));var QD;(function(i){i.NotSigned="NotSigned",i.Success="Success",i.RequiredArgumentMissing="RequiredArgumentMissing",i.InvalidArgument="InvalidArgument",i.PackageIsUnreadable="PackageIsUnreadable",i.UnhandledException="UnhandledException",i.SignatureManifestIsMissing="SignatureManifestIsMissing",i.SignatureManifestIsUnreadable="SignatureManifestIsUnreadable",i.SignatureIsMissing="SignatureIsMissing",i.SignatureIsUnreadable="SignatureIsUnreadable",i.CertificateIsUnreadable="CertificateIsUnreadable",i.SignatureArchiveIsUnreadable="SignatureArchiveIsUnreadable",i.FileAlreadyExists="FileAlreadyExists",i.SignatureArchiveIsInvalidZip="SignatureArchiveIsInvalidZip",i.SignatureArchiveHasSameSignatureFile="SignatureArchiveHasSameSignatureFile",i.PackageIntegrityCheckFailed="PackageIntegrityCheckFailed",i.SignatureIsInvalid="SignatureIsInvalid",i.SignatureManifestIsInvalid="SignatureManifestIsInvalid",i.SignatureIntegrityCheckFailed="SignatureIntegrityCheckFailed",i.EntryIsMissing="EntryIsMissing",i.EntryIsTampered="EntryIsTampered",i.Untrusted="Untrusted",i.CertificateRevoked="CertificateRevoked",i.SignatureIsNotValid="SignatureIsNotValid",i.UnknownError="UnknownError",i.PackageIsInvalidZip="PackageIsInvalidZip",i.SignatureArchiveHasTooManyEntries="SignatureArchiveHasTooManyEntries"})(QD||(QD={}));Iy(1773,"Extensions");Iy(1774,"Preferences");const Ij="extensions.allowed";wt.as(Ps.Configuration).registerConfiguration({id:"extensions",order:30,title:d(1775,"Extensions"),type:"object",properties:{[Ij]:{type:"object",markdownDescription:d(1776,"Specify a list of extensions that are allowed to use. This helps maintain a secure and consistent development environment by restricting the use of unauthorized extensions. For more information on how to configure this setting, please visit the [Configure Allowed Extensions](https://code.visualstudio.com/docs/setup/enterprise#_configure-allowed-extensions) section."),default:"*",defaultSnippets:[{body:{},description:d(1777,"No extensions are allowed.")},{body:{"*":!0},description:d(1778,"All extensions are allowed.")}],scope:gt.APPLICATION,policy:{name:"AllowedExtensions",minimumVersion:"1.96",description:d(1779,"Specify a list of extensions that are allowed to use. This helps maintain a secure and consistent development environment by restricting the use of unauthorized extensions. More information: https://code.visualstudio.com/docs/setup/enterprise#_configure-allowed-extensions")},additionalProperties:!1,patternProperties:{"([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$":{anyOf:[{type:["boolean","string"],enum:[!0,!1,"stable"],description:d(1780,"Allow or disallow the extension."),enumDescriptions:[d(1781,"Extension is allowed."),d(1782,"Extension is not allowed."),d(1783,"Allow only stable versions of the extension.")]},{type:"array",items:{type:"string"},description:d(1784,"Allow or disallow specific versions of the extension. To specifcy a platform specific version, use the format `platform@1.2.3`, e.g. `win32-x64@1.2.3`. Supported platforms are `win32-x64`, `win32-arm64`, `linux-x64`, `linux-arm64`, `linux-armhf`, `alpine-x64`, `alpine-arm64`, `darwin-x64`, `darwin-arm64`")}]},"([a-z0-9A-Z][a-z0-9-A-Z]*)$":{type:["boolean","string"],enum:[!0,!1,"stable"],description:d(1785,"Allow or disallow all extensions from the publisher."),enumDescriptions:[d(1786,"All extensions from the publisher are allowed."),d(1787,"All extensions from the publisher are not allowed."),d(1788,"Allow only stable versions of the extensions from the publisher.")]},"\\*":{type:"boolean",enum:[!0,!1],description:d(1789,"Allow or disallow all extensions."),enumDescriptions:[d(1790,"Allow all extensions."),d(1791,"Disallow all extensions.")]}}}}});const Tj=be("canonicalUriIdentityService"),Aj=be("ITrustedDomainService"),Nj=be("jsonEditingService"),Rj=be("IFileDecorationsService"),Mj=be("editorPaneService"),Oj=be("editorService");function zre(i,e){return i.uuid&&e.uuid?i.uuid===e.uuid:i.id===e.id?!0:Hp(i.id,e.id)===0}const Fj=/^([^.]+\..+)@((prerelease)|(\d+\.\d+\.\d+(-.*)?))$/;function $re(i){const e=Fj.exec(i);return e&&e[1]?[Vv(e[1]),e[2]]:[Vv(i),void 0]}function G5(i,e){return`${i}.${e}`}function Vv(i){return i.toLowerCase()}function Pj(i,e){return Vv(G5(i??S9,e))}new is("pprice.better-merge");async function Bj(i,e){if(!rs)return!1;let t;try{t=(await i.readFile(Y.file("/etc/os-release"))).value.toString()}catch{try{t=(await i.readFile(Y.file("/usr/lib/os-release"))).value.toString()}catch(s){e.debug("Error while getting the os-release file.",Fp(s))}}return!!t&&(t.match(/^ID=([^\u001b\r\n]*)/m)||[])[1]==="alpine"}async function qre(i,e){const t=await Bj(i,e),n=Dj(t?"alpine":cp,NM);return e.info("ComputeTargetPlatform:",n),n}class Wj{constructor(){this._generators=new Map,this._cache=new WeakMap}register(e,t){this._generators.set(e,t)}readActivationEvents(e){return this._cache.has(e)||this._cache.set(e,this._readActivationEvents(e)),this._cache.get(e)}createActivationEventsMap(e){const t=Object.create(null);for(const n of e){const s=this.readActivationEvents(n);s.length>0&&(t[is.toKey(n.identifier)]=s)}return t}_readActivationEvents(e){if(typeof e.main>"u"&&typeof e.browser>"u")return[];const t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let n=0;n<t.length;n++)t[n]==="onUri"&&(t[n]=`onUri:${is.toKey(e.identifier)}`);if(!e.contributes)return t;for(const n in e.contributes){const s=this._generators.get(n);if(!s)continue;const r=e.contributes[n],o=Array.isArray(r)?r:[r];try{s(o,t)}catch(a){pt(a)}}return t}}const Rp=new Wj,Kre=Object.freeze({identifier:new is("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:Y.parse("void:location"),isBuiltin:!1,targetPlatform:en.UNDEFINED,isUserBuiltin:!1,isUnderDevelopment:!1,preRelease:!1});class Gre{constructor(e){this.dependency=e}}var ZD;(function(i){i[i.EagerAutoStart=1]="EagerAutoStart",i[i.EagerManualStart=2]="EagerManualStart",i[i.Lazy=3]="Lazy"})(ZD||(ZD={}));class jre{get versionId(){return this._versionId}get allExtensions(){return this._allExtensions}get myExtensions(){return this._myExtensions}constructor(e,t,n){this._versionId=e,this._allExtensions=t.slice(0),this._myExtensions=n.slice(0),this._myActivationEvents=null}toSnapshot(){return{versionId:this._versionId,allExtensions:this._allExtensions,myExtensions:this._myExtensions,activationEvents:Rp.createActivationEventsMap(this._allExtensions)}}set(e,t,n){if(this._versionId>e)throw new Error(`ExtensionHostExtensions: invalid versionId ${e} (current: ${this._versionId})`);const s=[],r=[],o=[],a=[],l=JD(this._allExtensions),c=JD(t),h=(m,_)=>m.extensionLocation.toString()===_.extensionLocation.toString()||m.isBuiltin===_.isBuiltin||m.isUserBuiltin===_.isUserBuiltin||m.isUnderDevelopment===_.isUnderDevelopment;for(const m of this._allExtensions){const _=c.get(m.identifier);if(!_){s.push(m.identifier),l.delete(m.identifier);continue}if(!h(m,_)){s.push(m.identifier),l.delete(m.identifier);continue}}for(const m of t){const _=l.get(m.identifier);if(!_){r.push(m);continue}if(!h(_,m)){s.push(_.identifier),l.delete(_.identifier);continue}}const u=new qu(this._myExtensions),f=new qu(n);for(const m of this._myExtensions)f.has(m)||o.push(m);for(const m of n)u.has(m)||a.push(m);const g=Rp.createActivationEventsMap(r),p={versionId:e,toRemove:s,toAdd:r,addActivationEvents:g,myToRemove:o,myToAdd:a};return this.delta(p),p}delta(e){if(this._versionId>=e.versionId)return null;const{toRemove:t,toAdd:n,myToRemove:s,myToAdd:r}=e,o=new qu(t),a=new qu(s);for(let l=0;l<this._allExtensions.length;l++)o.has(this._allExtensions[l].identifier)&&(this._allExtensions.splice(l,1),l--);for(let l=0;l<this._myExtensions.length;l++)a.has(this._myExtensions[l])&&(this._myExtensions.splice(l,1),l--);for(const l of n)this._allExtensions.push(l);for(const l of r)this._myExtensions.push(l);return this._myActivationEvents=null,e}containsExtension(e){for(const t of this._myExtensions)if(is.equals(t,e))return!0;return!1}containsActivationEvent(e){return this._myActivationEvents||(this._myActivationEvents=this._readMyActivationEvents()),this._myActivationEvents.has(e)}_readMyActivationEvents(){const e=new Set;for(const t of this._allExtensions){if(!this.containsExtension(t.identifier))continue;const n=Rp.readActivationEvents(t);for(const s of n)e.add(s)}return e}}function JD(i){const e=new C9;for(const t of i)e.set(t.identifier,t);return e}function j5(i,e){return i.enabledApiProposals?i.enabledApiProposals.includes(e):!1}function Yre(i,e){if(!j5(i,e))throw new Error(`Extension '${i.identifier.value}' CANNOT use API proposal: ${e}.
Its package.json#enabledApiProposals-property declares: ${i.enabledApiProposals?.join(", ")??"[]"} but NOT ${e}.
 The missing proposal MUST be added and you must start in extension development mode or use the following command line switch: --enable-proposed-api ${i.identifier.value}`)}class Xre{constructor(e,t,n,s){this.codeLoadingTime=e,this.activateCallTime=t,this.activateResolvedTime=n,this.activationReason=s}}class Qre{constructor(e,t){this.description=e,this.value=t}}var eI;(function(i){i[i.Normal=0]="Normal",i[i.Immediate=1]="Immediate"})(eI||(eI={}));function Zre(i){return{type:i.isBuiltin?Uh.System:Uh.User,isBuiltin:i.isBuiltin||i.isUserBuiltin,identifier:{id:Pj(i.publisher,i.name),uuid:i.uuid},manifest:i,location:i.extensionLocation,targetPlatform:i.targetPlatform,validations:[],isValid:!0,preRelease:i.preRelease,publisherDisplayName:i.publisherDisplayName}}function Jre(i,e){const t=G5(i.manifest.publisher,i.manifest.name);return{id:t,identifier:new is(t),isBuiltin:i.type===Uh.System,isUserBuiltin:i.type===Uh.User&&i.isBuiltin,isUnderDevelopment:!!e,extensionLocation:i.location,uuid:i.identifier.uuid,targetPlatform:i.targetPlatform,publisherDisplayName:i.publisherDisplayName,preRelease:i.preRelease,...i.manifest}}class eoe{constructor(){this.onDidRegisterExtensions=W.None,this.onDidChangeExtensionsStatus=W.None,this.onDidChangeExtensions=W.None,this.onWillActivateByEvent=W.None,this.onDidChangeResponsiveChange=W.None,this.onWillStop=W.None,this.extensions=[]}activateByEvent(e){return Promise.resolve(void 0)}activateById(e,t){return Promise.resolve(void 0)}activationEventIsDone(e){return!1}whenInstalledExtensionsRegistered(){return Promise.resolve(!0)}getExtension(){return Promise.resolve(void 0)}readExtensionPointContributions(e){return Promise.resolve(Object.create(null))}getExtensionsStatus(){return Object.create(null)}getInspectPorts(e,t){return Promise.resolve([])}async stopExtensionHosts(){return!0}async startExtensionHosts(){}async setRemoteEnvironment(e){}canAddExtension(){return!1}canRemoveExtension(){return!1}}const Uj=be("filesConfigurationService"),Y5=be("lifecycleService");var tI;(function(i){i[i.Default=1]="Default",i[i.Last=2]="Last"})(tI||(tI={}));var iI;(function(i){i[i.CLOSE=1]="CLOSE",i[i.QUIT=2]="QUIT",i[i.RELOAD=3]="RELOAD",i[i.LOAD=4]="LOAD"})(iI||(iI={}));var nI;(function(i){i[i.NewWindow=1]="NewWindow",i[i.ReloadedWindow=3]="ReloadedWindow",i[i.ReopenedWindow=4]="ReopenedWindow"})(nI||(nI={}));var $t;(function(i){i[i.Starting=1]="Starting",i[i.Ready=2]="Ready",i[i.Restored=3]="Restored",i[i.Eventually=4]="Eventually"})($t||($t={}));function toe(i){switch(i){case $t.Starting:return"Starting";case $t.Ready:return"Ready";case $t.Restored:return"Restored";case $t.Eventually:return"Eventually"}}const X5=be("pathService"),bb=be("remoteAgentService"),Nk=fu,Hj="vscode://schemas/vscode-product",Vj={activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiSettingsSearch:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiSettingsSearch.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts",version:2},authIssuers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authIssuers.d.ts"},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatEditing:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatEditing.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:9},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts"},chatReferenceBinaryData:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceBinaryData.d.ts"},chatReferenceDiagnostic:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceDiagnostic.d.ts"},chatStatusItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatStatusItem.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDebugCreateConfiguration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribLanguageModelToolSets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLanguageModelToolSets.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlHistoryTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts",version:4},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProvider2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider2.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts",version:2},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles2.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},idToken:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},inlineEdit:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineEdit.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelCapabilities:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelCapabilities.d.ts"},languageModelDataPart:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelDataPart.d.ts",version:3},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},nativeWindowHandle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.nativeWindowHandle.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},statusBarItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.statusBarItemTooltip.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},taskProblemMatcherStatus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskProblemMatcherStatus.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalCompletionProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalCompletionProvider.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},terminalShellEnv:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalShellEnv.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textEditorDiffInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textEditorDiffInformation.d.ts"},textSearchComplete2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchComplete2.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProvider2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider2.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},toolProgress:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.toolProgress.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},valueSelectionInQuickPick:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.valueSelectionInQuickPick.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}},f1=Object.freeze(Vj),Rk=wt.as(Pf.JSONContribution);class ioe{constructor(e,t,n){this._messageHandler=e,this._extension=t,this._extensionPointId=n}_msg(e,t){this._messageHandler({type:e,message:t,extensionId:this._extension.identifier,extensionPointId:this._extensionPointId})}error(e){this._msg(bt.Error,e)}warn(e){this._msg(bt.Warning,e)}info(e){this._msg(bt.Info,e)}}class Md{static _toSet(e){const t=new qu;for(let n=0,s=e.length;n<s;n++)t.add(e[n].description.identifier);return t}static compute(e,t){if(!e||!e.length)return new Md(t,[]);if(!t||!t.length)return new Md([],e);const n=this._toSet(e),s=this._toSet(t),r=t.filter(a=>!n.has(a.description.identifier)),o=e.filter(a=>!s.has(a.description.identifier));return new Md(r,o)}constructor(e,t){this.added=e,this.removed=t}}class zj{constructor(e,t,n){this.name=e,this.defaultExtensionKind=t,this.canHandleResolver=n,this._handler=null,this._users=null,this._delta=null}setHandler(e){if(this._handler!==null)throw new Error("Handler already set!");return this._handler=e,this._handle(),{dispose:()=>{this._handler=null}}}acceptUsers(e){this._delta=Md.compute(this._users,e),this._users=e,this._handle()}_handle(){if(!(this._handler===null||this._users===null||this._delta===null))try{this._handler(this._users,this._delta)}catch(e){pt(e)}}}const $j={type:"string",enum:["ui","workspace"],enumDescriptions:[d(12587,"UI extension kind. In a remote window, such extensions are enabled only when available on the local machine."),d(12588,"Workspace extension kind. In a remote window, such extensions are enabled only when available on the remote.")]},Q5="vscode://schemas/vscode-extensions",zv={properties:{engines:{type:"object",description:d(12589,"Engine compatibility."),properties:{vscode:{type:"string",description:d(12590,"For VS Code extensions, specifies the VS Code version that the extension is compatible with. Cannot be *. For example: ^0.10.5 indicates compatibility with a minimum VS Code version of 0.10.5."),default:"^1.22.0"}}},publisher:{description:d(12591,"The publisher of the VS Code extension."),type:"string"},displayName:{description:d(12592,"The display name for the extension used in the VS Code gallery."),type:"string"},categories:{description:d(12593,"The categories used by the VS Code gallery to categorize the extension."),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:k9},{type:"string",const:"Languages",deprecationMessage:d(12594,"Use 'Programming  Languages' instead")}]}},galleryBanner:{type:"object",description:d(12595,"Banner used in the VS Code marketplace."),properties:{color:{description:d(12596,"The banner color on the VS Code marketplace page header."),type:"string"},theme:{description:d(12597,"The color theme for the font used in the banner."),type:"string",enum:["dark","light"]}}},contributes:{description:d(12598,"All contributions of the VS Code extension represented by this package."),type:"object",properties:{},default:{}},preview:{type:"boolean",description:d(12599,"Sets the extension to be flagged as a Preview in the Marketplace.")},enableProposedApi:{type:"boolean",deprecationMessage:d(12600,"Use `enabledApiProposals` instead.")},enabledApiProposals:{markdownDescription:d(12601,"Enable API proposals to try them out. Only valid **during development**. Extensions **cannot be published** with this property. For more details visit: https://code.visualstudio.com/api/advanced-topics/using-proposed-api"),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(f1).map(i=>i),markdownEnumDescriptions:Object.values(f1).map(i=>i.proposal)}},api:{markdownDescription:d(12602,"Describe the API provided by this extension. For more details visit: https://code.visualstudio.com/api/advanced-topics/remote-extensions#handling-dependencies-with-remote-extensions"),type:"string",enum:["none"],enumDescriptions:[d(12603,"Give up entirely the ability to export any APIs. This allows other extensions that depend on this extension to run in a separate extension host process or in a remote machine.")]},activationEvents:{description:d(12604,"Activation events for the VS Code extension."),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:d(12605,"An activation event emmited when a webview is loaded of a certain viewType"),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:d(12606,"An activation event emitted whenever a file that resolves to the specified language gets opened."),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:d(12607,"An activation event emitted whenever the specified command gets invoked."),body:"onCommand:${2:commandId}"},{label:"onDebug",description:d(12608,"An activation event emitted whenever a user is about to start debugging or about to setup debug configurations."),body:"onDebug"},{label:"onDebugInitialConfigurations",description:d(12609,'An activation event emitted whenever a "launch.json" needs to be created (and all provideDebugConfigurations methods need to be called).'),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:d(12610,'An activation event emitted whenever a list of all debug configurations needs to be created (and all provideDebugConfigurations methods for the "dynamic" scope need to be called).'),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:d(12611,"An activation event emitted whenever a debug session with the specific type is about to be launched (and a corresponding resolveDebugConfiguration method needs to be called)."),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:d(12612,"An activation event emitted whenever a debug session with the specific type is about to be launched and a debug protocol tracker might be needed."),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:d(12613,"An activation event emitted whenever a folder is opened that contains at least a file matching the specified glob pattern."),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:d(12614,"An activation event emitted after the start-up finished (after all `*` activated extensions have finished activating)."),body:"onStartupFinished"},{label:"onTaskType",description:d(12615,"An activation event emitted whenever tasks of a certain type need to be listed or resolved."),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:d(12616,"An activation event emitted whenever a file or folder is accessed with the given scheme."),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:d(12617,"An activation event emitted whenever an edit session is accessed with the given scheme."),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:d(12618,"An activation event emitted whenever a search is started in the folder with the given scheme."),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:d(12619,"An activation event emitted whenever the specified view is expanded.")},{label:"onUri",body:"onUri",description:d(12620,"An activation event emitted whenever a system-wide Uri directed towards this extension is open.")},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:d(12621,"An activation event emitted whenever a external uri (such as an http or https link) is being opened.")},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:d(12622,"An activation event emitted whenever the specified custom editor becomes visible.")},{label:"onNotebook",body:"onNotebook:${1:type}",description:d(12623,"An activation event emitted whenever the specified notebook document is opened.")},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:d(12624,"An activation event emitted whenever sessions are requested from the specified authentication provider.")},{label:"onRenderer",description:d(12625,"An activation event emitted whenever a notebook output renderer is used."),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:d(12626,"An activation event emitted when a specific terminal profile is launched.")},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:d(12627,"An activation event emitted when a command matches the selector associated with this ID")},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:d(12628,"An activation event emitted when a specified walkthrough is opened.")},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:d(12629,"An activation event emitted when the issue reporter is opened.")},{label:"onChatParticipant",body:"onChatParticipant:${1:participantId}",description:d(12630,"An activation event emitted when the specified chat participant is invoked.")},{label:"onLanguageModelTool",body:"onLanguageModelTool:${1:toolId}",description:d(12631,"An activation event emitted when the specified language model tool is invoked.")},{label:"onTerminalCompletionsRequested",body:"onTerminalCompletionsRequested",description:d(12632,"An activation event emitted when terminal completions are requested.")},{label:"onMcpCollection",description:d(12633,"An activation event emitted whenver a tool from the MCP server is requested."),body:"onMcpCollection:${2:collectionId}"},{label:"*",description:d(12634,"An activation event emitted on VS Code startup. To ensure a great end user experience, please use this activation event in your extension only when no other activation events combination works in your use-case."),body:"*"}]}},badges:{type:"array",description:d(12635,"Array of badges to display in the sidebar of the Marketplace's extension page."),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:d(12636,"Badge image URL.")},href:{type:"string",description:d(12637,"Badge link.")},description:{type:"string",description:d(12638,"Badge description.")}}}},markdown:{type:"string",description:d(12639,"Controls the Markdown rendering engine used in the Marketplace. Either github (default) or standard."),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:d(12640,"Controls the Q&A link in the Marketplace. Set to marketplace to enable the default Marketplace Q & A site. Set to a string to provide the URL of a custom Q & A site. Set to false to disable Q & A altogether."),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:d(12641,"Dependencies to other extensions. The identifier of an extension is always ${publisher}.${name}. For example: vscode.csharp."),type:"array",uniqueItems:!0,items:{type:"string",pattern:Hv}},extensionPack:{description:d(12642,"A set of extensions that can be installed together. The identifier of an extension is always ${publisher}.${name}. For example: vscode.csharp."),type:"array",uniqueItems:!0,items:{type:"string",pattern:Hv}},extensionKind:{description:d(12643,"Define the kind of an extension. `ui` extensions are installed and run on the local machine while `workspace` extensions run on the remote."),type:"array",items:$j,default:["workspace"],defaultSnippets:[{body:["ui"],description:d(12644,"Define an extension which can run only on the local machine when connected to remote window.")},{body:["workspace"],description:d(12645,"Define an extension which can run only on the remote machine when connected remote window.")},{body:["ui","workspace"],description:d(12646,"Define an extension which can run on either side, with a preference towards running on the local machine.")},{body:["workspace","ui"],description:d(12647,"Define an extension which can run on either side, with a preference towards running on the remote machine.")},{body:[],description:d(12648,"Define an extension which cannot run in a remote context, neither on the local, nor on the remote machine.")}]},capabilities:{description:d(12649,"Declare the set of supported capabilities by the extension."),type:"object",properties:{virtualWorkspaces:{description:d(12650,"Declares whether the extension should be enabled in virtual workspaces. A virtual workspace is a workspace which is not backed by any on-disk resources. When false, this extension will be automatically disabled in virtual workspaces. Default is true."),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:d(12651,"Declares the level of support for virtual workspaces by the extension."),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[d(12652,"The extension will be enabled in virtual workspaces with some functionality disabled."),d(12653,"The extension will be enabled in virtual workspaces with all functionality enabled."),d(12654,"The extension will not be enabled in virtual workspaces.")]},description:{type:"string",markdownDescription:d(12655,"A description of how virtual workspaces affects the extensions behavior and why it is needed. This only applies when `supported` is not `true`.")}}},untrustedWorkspaces:{description:d(12656,"Declares how the extension should be handled in untrusted workspaces."),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:d(12657,"Declares the level of support for untrusted workspaces by the extension."),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[d(12658,"The extension will be enabled in untrusted workspaces with some functionality disabled."),d(12659,"The extension will be enabled in untrusted workspaces with all functionality enabled."),d(12660,"The extension will not be enabled in untrusted workspaces.")]},restrictedConfigurations:{description:d(12661,"A list of configuration keys contributed by the extension that should not use workspace values in untrusted workspaces."),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:d(12662,"A description of how workspace trust affects the extensions behavior and why it is needed. This only applies when `supported` is not `true`.")}}}}},sponsor:{description:d(12663,"Specify the location from where users can sponsor your extension."),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:d(12664,"URL from where users can sponsor your extension. It must be a valid URL with a HTTP or HTTPS protocol. Example value: https://github.com/sponsors/nvaccess"),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:d(12665,"Script executed before the package is published as a VS Code extension."),type:"string"},"vscode:uninstall":{description:d(12666,"Uninstall hook for VS Code extension. Script that gets executed when the extension is completely uninstalled from VS Code which is when VS Code is restarted (shutdown and start) after the extension is uninstalled. Only Node scripts are supported."),type:"string"}}},icon:{type:"string",description:d(12667,"The path to a 128x128 pixel icon.")},l10n:{type:"string",description:d(12668,"The relative path to a folder containing localization (bundle.l10n.*.json) files. Must be specified if you are using the vscode.l10n API.")},pricing:{type:"string",markdownDescription:d(12669,"The pricing information for the extension. Can be Free (default) or Trial. For more details visit: https://code.visualstudio.com/api/working-with-extensions/publishing-extension#extension-pricing-label"),enum:["Free","Trial"],default:"Free"}}};class qj{constructor(){this._extensionPoints=new Map}registerExtensionPoint(e){if(this._extensionPoints.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);const t=new zj(e.extensionPoint,e.defaultExtensionKind,e.canHandleResolver);return this._extensionPoints.set(e.extensionPoint,t),e.activationEventsGenerator&&Rp.register(e.extensionPoint,e.activationEventsGenerator),zv.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,Rk.registerSchema(Q5,zv),t}getExtensionPoints(){return Array.from(this._extensionPoints.values())}}const Z5={ExtensionsRegistry:"ExtensionsRegistry"};wt.add(Z5.ExtensionsRegistry,new qj);const Kj=wt.as(Z5.ExtensionsRegistry);Rk.registerSchema(Q5,zv);Rk.registerSchema(Hj,{properties:{extensionEnabledApiProposals:{description:d(12670,"API proposals that the respective extensions can freely use."),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(f1),markdownEnumDescriptions:Object.values(f1).map(i=>i.proposal)}}]}}}});const Gj=be("textFileService"),jj=be("IUserActivityService"),Yj=be("workingCopyFileService"),Xj=be("workingCopyService");class Qj{constructor(e){this.original=e}toJSON(){if(!this.headers){const e=Object.create(null);for(const t in this.original)t.toLowerCase()==="authorization"||t.toLowerCase()==="proxy-authorization"?e[t]="*****":e[t]=this.original[t];this.headers=e}return this.headers}}class Zj extends ${constructor(e){super(),this.logService=e,this.counter=0}async logAndRequest(e,t){const n=`#${++this.counter}: ${e.url}`;this.logService.trace(`${n} - begin`,e.type,new Qj(e.headers??{}));try{const s=await t();return this.logService.trace(`${n} - end`,e.type,s.res.statusCode,s.res.headers),s}catch(s){throw this.logService.error(`${n} - error`,e.type,Fp(s)),s}}}function J5(i){return i.res.statusCode&&i.res.statusCode>=200&&i.res.statusCode<300||i.res.statusCode===1223}function eR(i){return i.res.statusCode===204}async function Jj(i){return eR(i)?null:(await py(i.stream)).toString()}async function eY(i){if(!J5(i))throw new Error("Server returned "+i.res.statusCode);return Jj(i)}async function noe(i){if(!J5(i))throw new Error("Server returned "+i.res.statusCode);if(eR(i))return null;const t=(await py(i.stream)).toString();try{return JSON.parse(t)}catch(n){throw n.message+=`:
`+t,n}}let U_=[],sI,rI;function tY(i=!0,e=!0){if(sI===i&&rI===e)return;sI=i,rI=e;const t=wt.as(Ps.Configuration),n=U_;U_=[{id:"http",order:15,title:d(1975,"HTTP"),type:"object",scope:gt.MACHINE,properties:{"http.useLocalProxyConfiguration":{type:"boolean",default:e,markdownDescription:d(1976,"Controls whether in the remote extension host the local proxy configuration should be used. This setting only applies as a remote setting during [remote development](https://aka.ms/vscode-remote)."),restricted:!0}}},{id:"http",order:15,title:d(1975,"HTTP"),type:"object",scope:gt.APPLICATION,properties:{"http.electronFetch":{type:"boolean",default:!1,description:d(1977,"Controls whether use of Electron's fetch implementation instead of Node.js' should be enabled. All local extensions will get Electron's fetch implementation for the global fetch API."),restricted:!0}}},{id:"http",order:15,title:d(1975,"HTTP"),type:"object",scope:i?gt.APPLICATION:gt.MACHINE,properties:{"http.proxy":{type:"string",pattern:"^(https?|socks|socks4a?|socks5h?)://([^:]*(:[^@]*)?@)?([^:]+|\\[[:0-9a-fA-F]+\\])(:\\d+)?/?$|^$",markdownDescription:d(1978,"The proxy setting to use. If not set, will be inherited from the `http_proxy` and `https_proxy` environment variables. When during [remote development](https://aka.ms/vscode-remote) the {0} setting is disabled this setting can be configured in the local and the remote settings separately.","`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyStrictSSL":{type:"boolean",default:!0,markdownDescription:d(1979,"Controls whether the proxy server certificate should be verified against the list of supplied CAs. When during [remote development](https://aka.ms/vscode-remote) the {0} setting is disabled this setting can be configured in the local and the remote settings separately.","`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyKerberosServicePrincipal":{type:"string",markdownDescription:d(1980,"Overrides the principal service name for Kerberos authentication with the HTTP proxy. A default based on the proxy hostname is used when this is not set. When during [remote development](https://aka.ms/vscode-remote) the {0} setting is disabled this setting can be configured in the local and the remote settings separately.","`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.noProxy":{type:"array",items:{type:"string"},markdownDescription:d(1981,"Specifies domain names for which proxy settings should be ignored for HTTP/HTTPS requests. When during [remote development](https://aka.ms/vscode-remote) the {0} setting is disabled this setting can be configured in the local and the remote settings separately.","`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyAuthorization":{type:["null","string"],default:null,markdownDescription:d(1982,"The value to send as the `Proxy-Authorization` header for every network request. When during [remote development](https://aka.ms/vscode-remote) the {0} setting is disabled this setting can be configured in the local and the remote settings separately.","`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxySupport":{type:"string",enum:["off","on","fallback","override"],enumDescriptions:[d(1983,"Disable proxy support for extensions."),d(1984,"Enable proxy support for extensions."),d(1985,"Enable proxy support for extensions, fall back to request options, when no proxy found."),d(1986,"Enable proxy support for extensions, override request options.")],default:"override",markdownDescription:d(1987,"Use the proxy support for extensions. When during [remote development](https://aka.ms/vscode-remote) the {0} setting is disabled this setting can be configured in the local and the remote settings separately.","`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.systemCertificates":{type:"boolean",default:!0,markdownDescription:d(1988,"Controls whether CA certificates should be loaded from the OS. On Windows and macOS, a reload of the window is required after turning this off. When during [remote development](https://aka.ms/vscode-remote) the {0} setting is disabled this setting can be configured in the local and the remote settings separately.","`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.experimental.systemCertificatesV2":{type:"boolean",tags:["experimental"],default:!1,markdownDescription:d(1989,"Controls whether experimental loading of CA certificates from the OS should be enabled. This uses a more general approach than the default implementation. When during [remote development](https://aka.ms/vscode-remote) the {0} setting is disabled this setting can be configured in the local and the remote settings separately.","`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.fetchAdditionalSupport":{type:"boolean",default:!0,markdownDescription:d(1990,"Controls whether Node.js' fetch implementation should be extended with additional support. Currently proxy support ({1}) and system certificates ({2}) are added when the corresponding settings are enabled. When during [remote development](https://aka.ms/vscode-remote) the {0} setting is disabled this setting can be configured in the local and the remote settings separately.","`#http.useLocalProxyConfiguration#`","`#http.proxySupport#`","`#http.systemCertificates#`"),restricted:!0}}}],t.updateConfigurations({add:U_,remove:n})}tY();var $v;(function(i){i[i.Explorer=1]="Explorer",i[i.Scm=3]="Scm",i[i.Extensions=5]="Extensions",i[i.Window=10]="Window",i[i.Notification=15]="Notification",i[i.Dialog=20]="Dialog"})($v||($v={}));const soe=Object.freeze({total(){},worked(){},done(){}});class roe{static{this.None=Object.freeze({report(){}})}get value(){return this._value}constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}}let oI=class extends ${constructor(e,t){super(),this.deferred=new Ya,t.withProgress(e,n=>(this.reporter=n,this.lastStep&&n.report(this.lastStep),this.deferred.p)),this._register(fe(()=>this.deferred.complete()))}report(e){this.reporter?this.reporter.report(e):this.lastStep=e}};oI=G([L(1,IS)],oI);class aoe extends ${constructor(e){super(),this.progressIndicator=e,this.currentOperationId=0,this.currentOperationDisposables=this._register(new X),this.currentProgressTimeout=void 0}start(e){this.stop();const t=++this.currentOperationId,n=new _r;return this.currentProgressTimeout=setTimeout(()=>{t===this.currentOperationId&&(this.currentProgressRunner=this.progressIndicator.show(!0))},e),this.currentOperationDisposables.add(fe(()=>clearTimeout(this.currentProgressTimeout))),this.currentOperationDisposables.add(fe(()=>n.cancel())),this.currentOperationDisposables.add(fe(()=>this.currentProgressRunner?this.currentProgressRunner.done():void 0)),{id:t,token:n.token,stop:()=>this.doStop(t),isCurrent:()=>this.currentOperationId===t}}stop(){this.doStop(this.currentOperationId)}doStop(e){this.currentOperationId===e&&this.currentOperationDisposables.clear()}}function iY(i,e){const{os:t,tildify:n,relative:s}=e;if(s){const a=nY(i,s,t);if(typeof a=="string")return a}let r=i.fsPath;if(t===At.Windows&&!hi?r=r.replace(/\//g,"\\"):t!==At.Windows&&hi&&(r=r.replace(/\\/g,"/")),t!==At.Windows&&n?.userHome){const a=n.userHome.fsPath;let l;i.scheme!==n.userHome.scheme&&i.path[0]===Pe.sep&&i.path[1]!==Pe.sep?l=n.userHome.with({path:i.path}).fsPath:l=r,r=tR(l,a,t)}return(t===At.Windows?Xt:Pe).normalize(sY(r,t===At.Windows))}function nY(i,e,t){const n=t===At.Windows?Xt:Pe,s=t===At.Linux?lt:h9,r=e.getWorkspace(),o=r.folders.at(0);if(!o)return;i.scheme!==o.uri.scheme&&i.path[0]===Pe.sep&&i.path[1]!==Pe.sep&&(i=o.uri.with({path:i.path}));const a=e.getWorkspaceFolder(i);if(!a)return;let l;if(s.isEqual(a.uri,i)?l="":l=s.relativePath(a.uri,i)??"",l&&(l=n.normalize(l)),r.folders.length>1&&!e.noPrefix){const c=a.name?a.name:s.basenameOrAuthority(a.uri);l=l?`${c} • ${l}`:c}return l}function sY(i,e=hi){return aT(i,e)?i.charAt(0).toUpperCase()+i.slice(1):i}let H_=Object.create(null);function tR(i,e,t=An){if(t===At.Windows||!i||!e)return i;let n=H_.original===e?H_.normalized:void 0;n||(n=e,hi&&(n=Xp(n)),n=`${wy(n,Pe.sep)}${Pe.sep}`,H_={original:e,normalized:n});let s=i;return hi&&(s=Xp(s)),(t===At.Linux?s.startsWith(n):k1(s,n))?`~/${s.substr(n.length)}`:i}function loe(i,e){return i.replace(/^~($|\/|\\)/,`${e}$1`)}const aI="…",Hu="\\\\",Vu="~";function coe(i,e=Ms){const t=new Array(i.length);let n=!1;for(let s=0;s<i.length;s++){const r=i[s];if(r===""){t[s]=`.${e}`;continue}if(!r){t[s]=r;continue}n=!0;let o="",a=r;a.indexOf(Hu)===0?(o=a.substr(0,a.indexOf(Hu)+Hu.length),a=a.substr(a.indexOf(Hu)+Hu.length)):a.indexOf(e)===0?(o=a.substr(0,a.indexOf(e)+e.length),a=a.substr(a.indexOf(e)+e.length)):a.indexOf(Vu)===0&&(o=a.substr(0,a.indexOf(Vu)+Vu.length),a=a.substr(a.indexOf(Vu)+Vu.length));const l=a.split(e);for(let c=1;n&&c<=l.length;c++)for(let h=l.length-c;n&&h>=0;h--){n=!1;let u=l.slice(h,h+c).join(e);for(let f=0;!n&&f<i.length;f++)if(f!==s&&i[f]&&i[f].indexOf(u)>-1){const g=h+c===l.length,p=h>0&&i[f].indexOf(e)>-1?e+u:u,m=i[f].endsWith(p);n=!g||m}if(!n){let f="";(l[0].endsWith(":")||o!=="")&&(h===1&&(h=0,c++,u=l[0]+e+u),h>0&&(f=l[0]+e),f=o+f),h>0&&(f=f+aI+e),f=f+u,h+c<l.length&&(f=f+e+aI),t[s]=f}}n&&(t[s]=r)}return t}var Nr;(function(i){i[i.TEXT=0]="TEXT",i[i.VARIABLE=1]="VARIABLE",i[i.SEPARATOR=2]="SEPARATOR"})(Nr||(Nr={}));function hoe(i,e=Object.create(null)){const t=[];let n=!1,s="";for(const r of i)if(r==="$"||n&&r==="{")s&&t.push({value:s,type:Nr.TEXT}),s="",n=!0;else if(r==="}"&&n){const o=e[s];if(typeof o=="string")o.length&&t.push({value:o,type:Nr.VARIABLE});else if(o){const a=t[t.length-1];(!a||a.type!==Nr.SEPARATOR)&&t.push({value:o.label,type:Nr.SEPARATOR})}s="",n=!1}else s+=r;return s&&!n&&t.push({value:s,type:Nr.TEXT}),t.filter((r,o)=>{if(r.type===Nr.SEPARATOR){const a=t[o-1],l=t[o+1];return[a,l].every(c=>c&&(c.type===Nr.VARIABLE||c.type===Nr.TEXT)&&c.value.length>0)}return!0}).map(r=>r.value).join("")}function uoe(i,e){return Me||e?i.replace(/\(&&\w\)|&&/g,"").replace(/&/g,Me?"&":"&&"):i.replace(/&&|&/g,t=>t==="&"?"&&":"&")}function doe(i,e){const t=i.replace(/\(&&\w\)|&&/g,"");if(e)return t;if(Me)return{withMnemonic:t,withoutMnemonic:t};let n;return hi?n=i.replace(/&&|&/g,s=>s==="&"?"&&":"&"):n=i.replace(/&&/g,"_"),{withMnemonic:n,withoutMnemonic:t}}function foe(i){return i.replace(/&/g,"&&")}function goe(i){if(i.endsWith("]")){const e=i.lastIndexOf(" [",i.length-2);if(e!==-1){const t=lI(i.substring(0,e)),n=i.substring(e);return{name:t.name+n,parentPath:t.parentPath}}}return lI(i)}function lI(i){const e=i.indexOf("/")!==-1?Pe:Xt,t=e.basename(i),n=e.dirname(i);return t.length?{name:t,parentPath:n}:{name:n,parentPath:""}}const iR=fu;class rY{constructor(){this._dragOperations=new Map}removeDragOperationTransfer(e){if(e&&this._dragOperations.has(e)){const t=this._dragOperations.get(e);return this._dragOperations.delete(e),t}}addDragOperationTransfer(e,t){this._dragOperations.set(e,t)}}class poe{constructor(e){this.identifier=e}}function cI(i){return i.scheme!==ge.file&&i.scheme!==ge.vscodeRemote}function nR(i){if(i.folders.length)return i.folders.every(e=>cI(e.uri))?i.folders[0].uri:void 0;if(i.configuration&&cI(i.configuration))return i.configuration}function oY(i){return nR(i)?.scheme}function moe(i){return nR(i)!==void 0}class $i{static{this.applicationMementos=new Map}static{this.profileMementos=new Map}static{this.workspaceMementos=new Map}static{this.COMMON_PREFIX="memento/"}constructor(e,t){this.storageService=t,this.id=$i.COMMON_PREFIX+e}getMemento(e,t){switch(e){case Oe.WORKSPACE:{let n=$i.workspaceMementos.get(this.id);return n||(n=new V_(this.id,e,t,this.storageService),$i.workspaceMementos.set(this.id,n)),n.getMemento()}case Oe.PROFILE:{let n=$i.profileMementos.get(this.id);return n||(n=new V_(this.id,e,t,this.storageService),$i.profileMementos.set(this.id,n)),n.getMemento()}case Oe.APPLICATION:{let n=$i.applicationMementos.get(this.id);return n||(n=new V_(this.id,e,t,this.storageService),$i.applicationMementos.set(this.id,n)),n.getMemento()}}}onDidChangeValue(e,t){return this.storageService.onDidChangeValue(e,this.id,t)}saveMemento(){$i.workspaceMementos.get(this.id)?.save(),$i.profileMementos.get(this.id)?.save(),$i.applicationMementos.get(this.id)?.save()}reloadMemento(e){let t;switch(e){case Oe.APPLICATION:t=$i.applicationMementos.get(this.id);break;case Oe.PROFILE:t=$i.profileMementos.get(this.id);break;case Oe.WORKSPACE:t=$i.workspaceMementos.get(this.id);break}t?.reload()}static clear(e){switch(e){case Oe.WORKSPACE:$i.workspaceMementos.clear();break;case Oe.PROFILE:$i.profileMementos.clear();break;case Oe.APPLICATION:$i.applicationMementos.clear();break}}}class V_{constructor(e,t,n,s){this.id=e,this.scope=t,this.target=n,this.storageService=s,this.mementoObj=this.doLoad()}doLoad(){try{return this.storageService.getObject(this.id,this.scope,{})}catch(e){pt(`[memento]: failed to parse contents: ${e} (id: ${this.id}, scope: ${this.scope}, contents: ${this.storageService.get(this.id,this.scope)})`)}return{}}getMemento(){return this.mementoObj}reload(){for(const e of Object.getOwnPropertyNames(this.mementoObj))delete this.mementoObj[e];Object.assign(this.mementoObj,this.doLoad())}save(){dy(this.mementoObj)?this.storageService.remove(this.id,this.scope):this.storageService.store(this.id,this.mementoObj,this.scope,this.target)}}var g1;(function(i){i.Workbench="workbench.contributions.kind"})(g1||(g1={}));var Ua;(function(i){i[i.BlockStartup=1]="BlockStartup",i[i.BlockRestore=2]="BlockRestore",i[i.AfterRestored=3]="AfterRestored",i[i.Eventually=4]="Eventually"})(Ua||(Ua={}));function hI(i){const e=i;return!!e&&typeof e.editorTypeId=="string"}function aY(i){switch(i){case $t.Restored:return Ua.AfterRestored;case $t.Eventually:return Ua.Eventually}}function uI(i){switch(i){case Ua.BlockStartup:return $t.Starting;case Ua.BlockRestore:return $t.Ready;case Ua.AfterRestored:return $t.Restored;case Ua.Eventually:return $t.Eventually}}class jo extends ${constructor(){super(...arguments),this.contributionsByPhase=new Map,this.contributionsByEditor=new Map,this.contributionsById=new Map,this.instancesById=new Map,this.instanceDisposables=this._register(new X),this.timingsByPhase=new Map,this.pendingRestoredContributions=new Ya,this.whenRestored=this.pendingRestoredContributions.p}static{this.INSTANCE=new jo}static{this.BLOCK_BEFORE_RESTORE_WARN_THRESHOLD=20}static{this.BLOCK_AFTER_RESTORE_WARN_THRESHOLD=100}get timings(){return this.timingsByPhase}registerWorkbenchContribution2(e,t,n){const s={id:e,ctor:t};this.instantiationService&&this.lifecycleService&&this.logService&&this.environmentService&&this.editorPaneService&&(typeof n=="number"&&this.lifecycleService.phase>=n||typeof e=="string"&&hI(n)&&this.editorPaneService.didInstantiateEditorPane(n.editorTypeId))?this.safeCreateContribution(this.instantiationService,this.logService,this.environmentService,s,typeof n=="number"?uI(n):this.lifecycleService.phase):(typeof n=="number"&&J_(this.contributionsByPhase,uI(n),[]).push(s),typeof e=="string"&&(this.contributionsById.has(e)?console.error(`IWorkbenchContributionsRegistry#registerWorkbenchContribution(): Can't register multiple contributions with same id '${e}'`):this.contributionsById.set(e,s),hI(n)&&J_(this.contributionsByEditor,n.editorTypeId,[]).push(s)))}registerWorkbenchContribution(e,t){this.registerWorkbenchContribution2(void 0,e,aY(t))}getWorkbenchContribution(e){if(this.instancesById.has(e))return this.instancesById.get(e);const t=this.instantiationService,n=this.lifecycleService,s=this.logService,r=this.environmentService;if(!t||!n||!s||!r)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): cannot be called before registry started`);const o=this.contributionsById.get(e);if(!o)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): contribution with that identifier is unknown.`);n.phase<$t.Restored&&s.warn(`IWorkbenchContributionsRegistry#getContribution('${e}'): contribution instantiated before LifecyclePhase.Restored!`),this.safeCreateContribution(t,s,r,o,n.phase);const a=this.instancesById.get(e);if(!a)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): failed to create contribution.`);return a}start(e){const t=this.instantiationService=e.get(xt),n=this.lifecycleService=e.get(Y5),s=this.logService=e.get(Zi),r=this.environmentService=e.get(fu),o=this.editorPaneService=e.get(Mj);this._register(n.onDidShutdown(()=>{this.instanceDisposables.clear()}));for(const a of[$t.Starting,$t.Ready,$t.Restored,$t.Eventually])this.instantiateByPhase(t,n,s,r,a);for(const a of this.contributionsByEditor.keys())o.didInstantiateEditorPane(a)&&this.onEditor(a,t,n,s,r);this._register(o.onWillInstantiateEditorPane(a=>this.onEditor(a.typeId,t,n,s,r)))}onEditor(e,t,n,s,r){const o=this.contributionsByEditor.get(e);if(o){this.contributionsByEditor.delete(e);for(const a of o)this.safeCreateContribution(t,s,r,a,n.phase)}}instantiateByPhase(e,t,n,s,r){t.phase>=r?this.doInstantiateByPhase(e,n,s,r):t.when(r).then(()=>this.doInstantiateByPhase(e,n,s,r))}async doInstantiateByPhase(e,t,n,s){const r=this.contributionsByPhase.get(s);if(r)switch(this.contributionsByPhase.delete(s),s){case $t.Starting:case $t.Ready:{pa(`code/willCreateWorkbenchContributions/${s}`);for(const o of r)this.safeCreateContribution(e,t,n,o,s);pa(`code/didCreateWorkbenchContributions/${s}`);break}case $t.Restored:case $t.Eventually:{s===$t.Eventually&&await this.pendingRestoredContributions.p,this.doInstantiateWhenIdle(r,e,t,n,s);break}}}doInstantiateWhenIdle(e,t,n,s,r){pa(`code/willCreateWorkbenchContributions/${r}`);let o=0;const a=r===$t.Eventually?3e3:500,l=c=>{for(;o<e.length;){const h=e[o++];if(this.safeCreateContribution(t,n,s,h,r),c.timeRemaining()<1){Hh(l,a);break}}o===e.length&&(pa(`code/didCreateWorkbenchContributions/${r}`),r===$t.Restored&&this.pendingRestoredContributions.complete())};Hh(l,a)}safeCreateContribution(e,t,n,s,r){if(typeof s.id=="string"&&this.instancesById.has(s.id))return;const o=Date.now();try{typeof s.id=="string"&&pa(`code/willCreateWorkbenchContribution/${r}/${s.id}`);const a=e.createInstance(s.ctor);typeof s.id=="string"&&(this.instancesById.set(s.id,a),this.contributionsById.delete(s.id)),lu(a)&&this.instanceDisposables.add(a)}catch(a){t.error(`Unable to create workbench contribution '${s.id??s.ctor.name}'.`,a)}finally{typeof s.id=="string"&&pa(`code/didCreateWorkbenchContribution/${r}/${s.id}`)}if(typeof s.id=="string"||!n.isBuilt){const a=Date.now()-o;if(a>(r<$t.Restored?jo.BLOCK_BEFORE_RESTORE_WARN_THRESHOLD:jo.BLOCK_AFTER_RESTORE_WARN_THRESHOLD)&&t.warn(`Creation of workbench contribution '${s.id??s.ctor.name}' took ${a}ms.`),typeof s.id=="string"){let l=this.timingsByPhase.get(r);l||(l=[],this.timingsByPhase.set(r,l)),l.push([s.id,a])}}}}const boe=jo.INSTANCE.registerWorkbenchContribution2.bind(jo.INSTANCE);jo.INSTANCE.getWorkbenchContribution.bind(jo.INSTANCE);wt.add(g1.Workbench,jo.INSTANCE);function lY(i){return{id:sR(i),configPath:i}}function cY(i){return{id:sR(i),uri:i}}function sR(i){return rc(i.toString()).toString(16)}let rR=document.body,oR={},aR={},lR=TS;const _oe=Y.file(zH(new Date).replace(/-|:|\.\d+Z$/g,"")).with({scheme:"vscode-log"});function woe(){return rR}function voe(){return oR}function hY(){return aR}function yoe(){return lR}function uY(i){let e;return i.workspaceProvider!=null&&(e=i.workspaceProvider.workspace),e!=null&&uH(e)?lY(e.workspaceUri):e!=null&&dH(e)?cY(e.folderUri):TS}function Soe(i,e,t={}){rR=i,oR=e,aR=t,lR=uY(e)}const dY="rendererLog",fY={id:dY,name:d(12765,"Window")},koe="workbench.action.showWindowLog",cR=Y.parse("trustedDomains:/Trusted Domains"),Mk="http.linkProtectionTrustedDomains",gY="http.linkProtectionTrustedDomainsContent",Coe={id:"workbench.action.manageTrustedDomain",description:{description:Iy(11496,"Manage Trusted Domains"),args:[]},handler:async i=>{i.get(Oj).openEditor({resource:cR,languageId:"jsonc",options:{pinned:!0}})}};async function Eoe(i,e,t,n,s,r,o){const a=Y.parse(e),l=a.authority.split("."),c=l.slice(l.length-2).join("."),h="*."+c,u=[];if(u.push({type:"item",label:d(11497,"Trust {0}",e),id:"trust",toTrust:e,picked:!0}),l.length===4&&l.every(p=>Number.isInteger(+p)||Number.isInteger(+p.split(":")[0]))){if(a.authority.includes(":")){const p=a.authority.split(":")[0];u.push({type:"item",label:d(11498,"Trust {0} on all ports",p),toTrust:p+":*",id:"trust"})}}else u.push({type:"item",label:d(11499,"Trust {0} and all its subdomains",c),toTrust:h,id:"trust"});u.push({type:"item",label:d(11500,"Trust all domains (disables link protection)"),toTrust:"*",id:"trust"}),u.push({type:"item",label:d(11501,"Manage Trusted Domains"),id:"manage"});const g=await n.pick(u,{activeItem:u[0]});if(g&&g.id)switch(g.id){case"manage":return await r.openEditor({resource:cR.with({fragment:t.toString()}),languageId:"jsonc",options:{pinned:!0}}),i;case"trust":{const p=g.toTrust;if(i.indexOf(p)===-1)return s.remove(gY,Oe.APPLICATION),s.store(Mk,JSON.stringify([...i,p]),Oe.APPLICATION,fc.USER),[...i,p]}}return[]}async function xoe(i){const{defaultTrustedDomains:e,trustedDomains:t}=qv(i);return{defaultTrustedDomains:e,trustedDomains:t}}function qv(i){const e=i.get(rl),t=i.get(q5),n=i.get(iR),s=[...t.linkProtectionTrustedDomains??[],...n.options?.additionalTrustedDomains??[]];let r=[];try{const o=e.get(Mk,Oe.APPLICATION);o&&(r=JSON.parse(o))}catch{}return{defaultTrustedDomains:s,trustedDomains:r}}function z_(i){const e=typeof i=="string"?Y.parse(i):i;return e.with({path:e.path.replace(/\/+$/,""),query:null,fragment:null})}function pY(i,e){const t=z_(i);let n;if(/^[^./:]*:\/\//.test(e))n=z_(e);else{if(t.scheme!=="http"&&t.scheme!=="https")return!1;n=z_(`${t.scheme}://${e}`)}return $_(t.scheme,n.scheme)&&$_(t.authority,n.authority,!0)&&(n.path==="/"||$_(t.path,n.path))}function $_(i,e,t=!1){const n=Array.from({length:i.length+1}).map(()=>Array.from({length:e.length+1}).map(()=>{}));return vo(n,t,i,e,0,0)}function vo(i,e,t,n,s,r){if(i[s]?.[r]!==void 0)return i[s][r];const o=[];if(s===t.length)return r===n.length?!0:e&&n[r]+n[r+1]===":*"?r+2===n.length:!1;if(r===n.length)return t.slice(s)[0]==="/";if(t[s]===n[r]&&o.push(vo(i,e,t,n,s+1,r+1)),n[r]+n[r+1]==="*."&&(["/",":"].includes(t[s])||o.push(vo(i,e,t,n,s+1,r)),o.push(vo(i,e,t,n,s,r+2))),n[r]==="*"&&(s+1===t.length?o.push(vo(i,e,t,n,s+1,r+1)):o.push(vo(i,e,t,n,s+1,r)),o.push(vo(i,e,t,n,s,r+1))),e&&n[r]+n[r+1]===":*")if(t[s]===":"){let a=s+1;do a++;while(/[0-9]/.test(t[a]));o.push(vo(i,e,t,n,a,r+2))}else o.push(vo(i,e,t,n,s,r+2));return i[s][r]=o.some(a=>a===!0)}function mY(i,e){if(i=Y.parse(dI(i)),e=e.map(dI),wY(i.authority))return!0;for(let t=0;t<e.length;t++)if(e[t]==="*"||pY(i,e[t]))return!0;return!1}function dI(i){const e=["github.com"];try{const t=typeof i=="string"?Y.parse(i,!0):i;return e.includes(t.authority)?t.with({path:t.path.toLowerCase()}).toString(!0):t.toString(!0)}catch{return i.toString()}}const bY=/^localhost(:\d+)?$/i,_Y=/^127.0.0.1(:\d+)?$/;function wY(i){return bY.test(i)||_Y.test(i)}let Kv=class extends ${constructor(e,t){super(),this._instantiationService=e,this._storageService=t,this._onDidChangeTrustedDomains=this._register(new A),this.onDidChangeTrustedDomains=this._onDidChangeTrustedDomains.event;const n=()=>new l6($e,()=>{const{defaultTrustedDomains:s,trustedDomains:r}=this._instantiationService.invokeFunction(qv);return[...s,...r]});this._staticTrustedDomainsResult=n(),this._register(this._storageService.onDidChangeValue(Oe.APPLICATION,Mk,this._store)(()=>{this._staticTrustedDomainsResult?.dispose(),this._staticTrustedDomainsResult=n(),this._onDidChangeTrustedDomains.fire()}))}isValid(e){const{defaultTrustedDomains:t,trustedDomains:n}=this._instantiationService.invokeFunction(qv),s=[...t,...n];return mY(e,s)}};Kv=G([L(0,xt),L(1,rl)],Kv);var Rr;(function(i){i[i.SHORT=0]="SHORT",i[i.MEDIUM=1]="MEDIUM",i[i.LONG=2]="LONG"})(Rr||(Rr={}));function vY(i,e,t){let n,s,r,o,a;if(e){for(o=e.offset,a=o+e.length,r=o;r>0&&!p1(i,r-1);)r--;let E=a;for(;E<i.length&&!p1(i,E);)E++;s=i.substring(r,E),n=yY(s,t)}else s=i,n=0,r=0,o=0,a=i.length;const l=SY(t,i);let c=!1,h=0,u;t.insertSpaces?u=q_(" ",t.tabSize||4):u="	";const f=IN(s,!1);let g=!1;function p(){return l+q_(u,n+h)}function m(){let E=f.scan();for(c=!1;E===Q.Trivia||E===Q.LineBreakTrivia;)c=c||E===Q.LineBreakTrivia,E=f.scan();return g=E===Q.Unknown||f.getTokenError()!==gi.None,E}const _=[];function v(E,N,I){!g&&N<a&&I>o&&i.substring(N,I)!==E&&_.push({offset:N,length:I-N,content:E})}let y=m();if(y!==Q.EOF){const E=f.getTokenOffset()+r,N=q_(u,n);v(N,r,E)}for(;y!==Q.EOF;){let E=f.getTokenOffset()+f.getTokenLength()+r,N=m(),I="";for(;!c&&(N===Q.LineCommentTrivia||N===Q.BlockCommentTrivia);){const x=f.getTokenOffset()+r;v(" ",E,x),E=f.getTokenOffset()+f.getTokenLength()+r,I=N===Q.LineCommentTrivia?p():"",N=m()}if(N===Q.CloseBraceToken)y!==Q.OpenBraceToken&&(h--,I=p());else if(N===Q.CloseBracketToken)y!==Q.OpenBracketToken&&(h--,I=p());else{switch(y){case Q.OpenBracketToken:case Q.OpenBraceToken:h++,I=p();break;case Q.CommaToken:case Q.LineCommentTrivia:I=p();break;case Q.BlockCommentTrivia:c?I=p():I=" ";break;case Q.ColonToken:I=" ";break;case Q.StringLiteral:if(N===Q.ColonToken){I="";break}case Q.NullKeyword:case Q.TrueKeyword:case Q.FalseKeyword:case Q.NumericLiteral:case Q.CloseBraceToken:case Q.CloseBracketToken:N===Q.LineCommentTrivia||N===Q.BlockCommentTrivia?I=" ":N!==Q.CommaToken&&N!==Q.EOF&&(g=!0);break;case Q.Unknown:g=!0;break}c&&(N===Q.LineCommentTrivia||N===Q.BlockCommentTrivia)&&(I=p())}const B=f.getTokenOffset()+r;v(I,E,B),y=N}return _}function q_(i,e){let t="";for(let n=0;n<e;n++)t+=i;return t}function yY(i,e){let t=0,n=0;const s=e.tabSize||4;for(;t<i.length;){const r=i.charAt(t);if(r===" ")n++;else if(r==="	")n+=s;else break;t++}return Math.floor(n/s)}function SY(i,e){for(let t=0;t<e.length;t++){const n=e.charAt(t);if(n==="\r")return t+1<e.length&&e.charAt(t+1)===`
`?`\r
`:"\r";if(n===`
`)return`
`}return i&&i.eol||`
`}function p1(i,e){return`\r
`.indexOf(i.charAt(e))!==-1}function Doe(i,e,t){return hR(i,e,void 0,t)}function hR(i,e,t,n,s){const r=e.slice(),a=UW(i,[]);let l,c;for(;r.length>0&&(c=r.pop(),l=YE(a,r),l===void 0&&t!==void 0);)typeof c=="string"?t={[c]:t}:t=[t];if(l)if(l.type==="object"&&typeof c=="string"&&Array.isArray(l.children)){const h=YE(l,[c]);if(h!==void 0)if(t===void 0){if(!h.parent)throw new Error("Malformed AST");const u=l.children.indexOf(h.parent);let f,g=h.parent.offset+h.parent.length;if(u>0){const p=l.children[u-1];f=p.offset+p.length}else f=l.offset+1,l.children.length>1&&(g=l.children[1].offset);return eh(i,{offset:f,length:g-f,content:""},n)}else return eh(i,{offset:h.offset,length:h.length,content:JSON.stringify(t)},n);else{if(t===void 0)return[];const u=`${JSON.stringify(c)}: ${JSON.stringify(t)}`,f=l.children.length;let g;if(f>0){const p=l.children[f-1];g={offset:p.offset+p.length,length:0,content:","+u}}else l.children.length===0?g={offset:l.offset+1,length:0,content:u}:g={offset:l.offset+1,length:0,content:u+","};return eh(i,g,n)}}else if(l.type==="array"&&typeof c=="number"&&Array.isArray(l.children))if(t!==void 0){const h=`${JSON.stringify(t)}`;let u;if(l.children.length===0||c===0)u={offset:l.offset+1,length:0,content:l.children.length===0?h:h+","};else{const f=c===-1||c>l.children.length?l.children.length:c,g=l.children[f-1];u={offset:g.offset+g.length,length:0,content:","+h}}return eh(i,u,n)}else{const h=c,u=l.children[h];let f;if(l.children.length===1)f={offset:l.offset+1,length:l.length-2,content:""};else if(l.children.length-1===h){const g=l.children[h-1],p=g.offset+g.length,m=l.offset+l.length;f={offset:p,length:m-2-p,content:""}}else f={offset:u.offset,length:l.children[h+1].offset-u.offset,content:""};return eh(i,f,n)}else throw new Error(`Can not add ${typeof c!="number"?"index":"property"} to parent of type ${l.type}`);else return t===void 0?[]:eh(i,{offset:a?a.offset:0,length:a?a.length:0,content:JSON.stringify(t)},n)}function eh(i,e,t){let n=Gv(i,e),s=e.offset,r=e.offset+e.content.length;if(e.length===0||e.content.length===0){for(;s>0&&!p1(n,s-1);)s--;for(;r<n.length&&!p1(n,r);)r++}const o=vY(n,{offset:s,length:r-s},t);for(let l=o.length-1;l>=0;l--){const c=o[l];n=Gv(n,c),s=Math.min(s,c.offset),r=Math.max(r,c.offset+c.length),r+=c.content.length-c.length}const a=i.length-(n.length-r)-s;return[{offset:s,length:a,content:n.substring(s,r)}]}function Gv(i,e){return i.substring(0,e.offset)+e.content+i.substring(e.offset+e.length)}function Ioe(i,e){const t=e.slice(0).sort((s,r)=>{const o=s.offset-r.offset;return o===0?s.length-r.length:o});let n=i.length;for(let s=t.length-1;s>=0;s--){const r=t[s];if(r.offset+r.length<=n)i=Gv(i,r);else throw new Error("Overlapping edit");n=r.offset}return i}var m1;(function(i){i[i.ERROR_INVALID_FILE=0]="ERROR_INVALID_FILE"})(m1||(m1={}));class kY extends Error{constructor(e,t){super(e),this.code=t}}let jv=class{constructor(e,t,n,s){this.fileService=e,this.textModelResolverService=t,this.textFileService=n,this.filesConfigurationService=s,this.queue=new pT}write(e,t){return Promise.resolve(this.queue.queue(()=>this.doWriteConfiguration(e,t)))}async doWriteConfiguration(e,t){const n=await this.resolveAndValidate(e,!0);try{await this.writeToBuffer(n.object.textEditorModel,t)}finally{n.dispose()}}async writeToBuffer(e,t){let n;try{n=this.filesConfigurationService.enableAutoSaveAfterShortDelay(e.uri);let s=!1;for(const r of t){const o=this.getEdits(e,r)[0];s=!!o&&this.applyEditsToBuffer(o,e)||s}if(s)return this.textFileService.save(e.uri)}finally{n?.dispose()}}applyEditsToBuffer(e,t){const n=t.getPositionAt(e.offset),s=t.getPositionAt(e.offset+e.length),r=new H(n.lineNumber,n.column,s.lineNumber,s.column),o=t.getValueInRange(r);if(e.content!==o){const a=o?jh.replace(r,e.content):jh.insert(n,e.content);return t.pushEditOperations([new tn(n.lineNumber,n.column,n.lineNumber,n.column)],[a],()=>[]),!0}return!1}getEdits(e,t){const{tabSize:n,insertSpaces:s}=e.getOptions(),r=e.getEOL(),{path:o,value:a}=t;if(!o.length){const l=JSON.stringify(a,null,s?" ".repeat(n):"	");return[{content:l,length:l.length,offset:0}]}return hR(e.getValue(),o,a,{tabSize:n,insertSpaces:s,eol:r})}async resolveModelReference(e){return await this.fileService.exists(e)||await this.textFileService.write(e,"{}",{encoding:"utf8"}),this.textModelResolverService.createModelReference(e)}hasParseErrors(e){const t=[];return WW(e.getValue(),t,{allowTrailingComma:!0,allowEmptyContent:!0}),t.length>0}async resolveAndValidate(e,t){const n=await this.resolveModelReference(e),s=n.object.textEditorModel;return this.hasParseErrors(s)?(n.dispose(),this.reject(m1.ERROR_INVALID_FILE)):n}reject(e){const t=this.toErrorMessage(e);return Promise.reject(new kY(t,e))}toErrorMessage(e){switch(e){case m1.ERROR_INVALID_FILE:return d(12379,"Unable to write into the file. Please open the file to correct errors/warnings in the file and try again.")}}};jv=G([L(0,eb),L(1,xS),L(2,Gj),L(3,Uj)],jv);class Da{static keyOf(e){if(Array.isArray(e))return e.map(Da.keyOf).join(",");{const{color:t,letter:n}=e;return ze.isThemeIcon(n)?`${t}+${n.id}`:`${t}/${n}`}}static{this._classNamesPrefix="monaco-decoration"}constructor(e,t,n){this.themeService=e,this._refCounter=0,this.data=t;const s=rc(n).toString(36);this.itemColorClassName=`${Da._classNamesPrefix}-itemColor-${s}`,this.itemBadgeClassName=`${Da._classNamesPrefix}-itemBadge-${s}`,this.bubbleBadgeClassName=`${Da._classNamesPrefix}-bubbleBadge-${s}`,this.iconBadgeClassName=`${Da._classNamesPrefix}-iconBadge-${s}`}acquire(){this._refCounter+=1}release(){return--this._refCounter===0}appendCSSRules(e){Array.isArray(this.data)?this._appendForMany(this.data,e):this._appendForOne(this.data,e)}_appendForOne(e,t){const{color:n,letter:s}=e;ir(`.${this.itemColorClassName}`,`color: ${fl(n)};`,t),ze.isThemeIcon(s)?this._createIconCSSRule(s,n,t):s&&ir(`.${this.itemBadgeClassName}::after`,`content: "${s}"; color: ${fl(n)};`,t)}_appendForMany(e,t){const{color:n}=e.find(o=>!!o.color)??e[0];ir(`.${this.itemColorClassName}`,`color: ${fl(n)};`,t);const s=[];let r;for(const o of e)if(ze.isThemeIcon(o.letter)){r=o.letter;break}else o.letter&&s.push(o.letter);r?this._createIconCSSRule(r,n,t):(s.length&&ir(`.${this.itemBadgeClassName}::after`,`content: "${s.join(", ")}"; color: ${fl(n)};`,t),ir(`.${this.bubbleBadgeClassName}::after`,`content: ""; color: ${fl(n)}; font-family: codicon; font-size: 14px; margin-right: 14px; opacity: 0.4;`,t))}_createIconCSSRule(e,t,n){const s=ze.getModifier(e);s&&(e=ze.modify(e,void 0));const r=Dk().getIcon(e.id);if(!r)return;const o=this.themeService.getProductIconTheme().getIcon(r);o&&ir(`.${this.iconBadgeClassName}::after`,`content: '${o.fontCharacter}';
			color: ${e.color?fl(e.color.id):fl(t)};
			font-family: ${_o(o.font?.id??"codicon")};
			font-size: 16px;
			margin-right: 14px;
			font-weight: normal;
			${s==="spin"?"animation: codicon-spin 1.5s steps(30) infinite; font-style: normal !important;":""};
			`,n)}removeCSSRules(e){Wl(this.itemColorClassName,e),Wl(this.itemBadgeClassName,e),Wl(this.bubbleBadgeClassName,e),Wl(this.iconBadgeClassName,e)}}class CY{constructor(e){this._themeService=e,this._dispoables=new X,this._styleElement=On(void 0,void 0,this._dispoables),this._decorationRules=new Map}dispose(){this._dispoables.dispose()}asDecoration(e,t){e.sort((h,u)=>(u.weight||0)-(h.weight||0));const n=Da.keyOf(e);let s=this._decorationRules.get(n);s||(s=new Da(this._themeService,e,n),this._decorationRules.set(n,s),s.appendCSSRules(this._styleElement)),s.acquire();const r=s.itemColorClassName;let o=s.itemBadgeClassName;const a=s.iconBadgeClassName;let l=Mo(e.filter(h=>!CI(h.tooltip)).map(h=>h.tooltip)).join(" • ");const c=e.some(h=>h.strikethrough);return t&&(o=s.bubbleBadgeClassName,l=d(12418,"Contains emphasized items")),{labelClassName:r,badgeClassName:o,iconClassName:a,strikethrough:c,tooltip:l,dispose:()=>{s?.release()&&(this._decorationRules.delete(n),s.removeCSSRules(this._styleElement),s=void 0)}}}}class EY{constructor(e){this._data=ps.forUris(t=>!0),this._data.fill(!0,PR(e))}affectsResource(e){return this._data.hasElementOrSubtree(e)}}class tp{constructor(e,t){this.source=e,this.thenable=t}}function fl(i){return i?K(i):"inherit"}let Yv=class{constructor(e,t){this._store=new X,this._onDidChangeDecorationsDelayed=this._store.add(new _y({merge:n=>n.flat()})),this._onDidChangeDecorations=this._store.add(new A),this.onDidChangeDecorations=this._onDidChangeDecorations.event,this._provider=new sn,this._decorationStyles=new CY(t),this._data=ps.forUris(n=>e.extUri.ignorePathCasing(n)),this._store.add(this._onDidChangeDecorationsDelayed.event(n=>{this._onDidChangeDecorations.fire(new EY(n))}))}dispose(){this._store.dispose(),this._data.clear()}registerDecorationsProvider(e){const t=this._provider.unshift(e);this._onDidChangeDecorations.fire({affectsResource(){return!0}});const n=()=>{const r=[];for(const[o,a]of this._data)a.delete(e)&&r.push(o);r.length>0&&this._onDidChangeDecorationsDelayed.fire(r)},s=e.onDidChange(r=>{if(!r)n();else for(const o of r){const a=this._ensureEntry(o);this._fetchData(a,o,e)}});return fe(()=>{t(),s.dispose(),n()})}_ensureEntry(e){let t=this._data.get(e);return t||(t=new Map,this._data.set(e,t)),t}getDecoration(e,t){const n=[];let s=!1;const r=this._ensureEntry(e);for(const o of this._provider){let a=r.get(o);a===void 0&&(a=this._fetchData(r,e,o)),a&&!(a instanceof tp)&&n.push(a)}if(t){const o=this._data.findSuperstr(e);if(o)for(const a of o)for(const l of a[1].values())l&&!(l instanceof tp)&&l.bubble&&(n.push(l),s=!0)}return n.length===0?void 0:this._decorationStyles.asDecoration(n,s)}_fetchData(e,t,n){const s=e.get(n);s instanceof tp&&(s.source.cancel(),e.delete(n));const r=new _r,o=n.provideDecorations(t,r.token);if(Vd(o)){const a=new tp(r,Promise.resolve(o).then(l=>{e.get(n)===a&&this._keepItem(e,n,t,l)}).catch(l=>{!wc(l)&&e.get(n)===a&&e.delete(n)}).finally(()=>{r.dispose()}));return e.set(n,a),null}else return r.dispose(),this._keepItem(e,n,t,o)}_keepItem(e,t,n,s){const r=s||null,o=e.get(t);return e.set(t,r),(r||o)&&this._onDidChangeDecorationsDelayed.fire(n),r}};Yv=G([L(0,FS),L(1,no)],Yv);class xY{constructor(e){this.channel=e}async request(e,t){const[n,s]=await this.channel.call("request",[e],t);return{res:n,stream:vI(s)}}async resolveProxy(e){return this.channel.call("resolveProxy",[e])}async lookupAuthorization(e){return this.channel.call("lookupAuthorization",[e])}async lookupKerberosAuthorization(e){return this.channel.call("lookupKerberosAuthorization",[e])}async loadCertificates(){return this.channel.call("loadCertificates")}}const LY="Offline";class DY extends Error{constructor(){super(LY),this.name=this.message}}async function IY(i,e,t){if(e.isCancellationRequested)throw j_();const n=new AbortController,s=e.onCancellationRequested(()=>n.abort()),r=i.timeout?AbortSignal.any([n.signal,AbortSignal.timeout(i.timeout)]):n.signal;try{const o={method:i.type||"GET",headers:TY(i),body:i.data,signal:r};i.disableCache&&(o.cache="no-store");const a=await fetch(i.url||"",o);return{res:{statusCode:a.status,headers:AY(a)},stream:vI(ii.wrap(new Uint8Array(await a.arrayBuffer())))}}catch(o){throw t&&!t()?new DY:o?.name==="AbortError"?j_():o?.name==="TimeoutError"?new Error(`Fetch timeout: ${i.timeout}ms`):o}finally{s.dispose()}}function TY(i){if(i.headers||i.user||i.password||i.proxyAuthorization){const e=new Headers;e:for(const t in i.headers){switch(t.toLowerCase()){case"user-agent":case"accept-encoding":case"content-length":continue e}const n=i.headers[t];if(typeof n=="string")e.set(t,n);else if(Array.isArray(n))for(const s of n)e.append(t,s)}return(i.user||i.password)&&e.set("Authorization","Basic "+btoa(`${i.user||""}:${i.password||""}`)),i.proxyAuthorization&&e.set("Proxy-Authorization",i.proxyAuthorization),e}}function AY(i){const e=Object.create(null);return i.headers.forEach((t,n)=>{e[n]?Array.isArray(e[n])?e[n].push(t):e[n]=[e[n],t]:e[n]=t}),e}let Xv=class extends Zj{constructor(e,t,n){const s=n.createLogger("network",{name:d(12836,"Network"),group:fY}),r=new $5(s);super(r),this.remoteAgentService=e,this.configurationService=t,this._register(s),this._register(r)}async request(e,t){try{e.proxyAuthorization||(e.proxyAuthorization=this.configurationService.inspect("http.proxyAuthorization").userLocalValue);const n=await this.logAndRequest(e,()=>IY(e,t,()=>navigator.onLine)),s=this.remoteAgentService.getConnection();return s&&n.res.statusCode===405?this._makeRemoteRequest(s,e,t):n}catch(n){const s=this.remoteAgentService.getConnection();if(s)return this._makeRemoteRequest(s,e,t);throw n}}async resolveProxy(e){}async lookupAuthorization(e){}async lookupKerberosAuthorization(e){}async loadCertificates(){return[]}_makeRemoteRequest(e,t,n){return e.withChannel("request",s=>new xY(s).request(t,n))}};Xv=G([L(0,bb),L(1,Vt),L(2,F6)],Xv);Ss.registerCommand("_workbench.fetchJSON",async function(i,e,t){const n=await fetch(e,{method:t,headers:{Accept:"application/json"}});if(n.ok)return n.json();throw new Error(n.statusText)});class NY extends ${constructor(){super(...arguments),this.handlers=new Set}open(e,t){const n=[...this.handlers.values()];return P9(n.map(s=>()=>s.handleURL(e,t)),void 0,!1).then(s=>s||!1)}registerHandler(e){return this.handlers.add(e),fe(()=>this.handlers.delete(e))}}class RY{constructor(e,t){this.urlService=e,this.productService=t}async open(e,t){return t?.openExternal||!L1(e,this.productService.urlProtocol)?!1:(typeof e=="string"&&(e=Y.parse(e)),this.urlService.open(e,{trusted:!0}))}}let Qv=class extends NY{constructor(e,t,n){super(),this.provider=e.options?.urlCallbackProvider,this.provider&&this._register(this.provider.onCallback(s=>this.open(s,{trusted:!0}))),this._register(t.registerOpener(new RY(this,n)))}create(e){return this.provider?this.provider.create(e):Y.parse("unsupported://")}};Qv=G([L(0,iR),L(1,Vf),L(2,q5)],Qv);class MY{constructor(){this._providers=new Map}registerCanonicalUriProvider(e){return this._providers.set(e.scheme,e),{dispose:()=>this._providers.delete(e.scheme)}}async provideCanonicalUri(e,t,n){const s=this._providers.get(e.scheme);if(s)return s.provideCanonicalUri(e,t,n)}}let Zv=class{constructor(e,t){this.requestService=e,this.fileService=t}async download(e,t,n=mi.None){if(e.scheme===ge.file||e.scheme===ge.vscodeRemote){await this.fileService.copy(e,t);return}const s={type:"GET",url:e.toString(!0)},r=await this.requestService.request(s,n);if(r.res.statusCode===200)await this.fileService.writeFile(t,r.stream);else{const o=await eY(r);throw new Error(`Expected 200, got back ${r.res.statusCode} instead.

${o}`)}}};Zv=G([L(0,K5),L(1,eb)],Zv);var Jv;let b1=Jv=class{constructor(e,t,n,s){this.localUserHome=e,this.remoteAgentService=t,this.environmentService=n,this.contextService=s,this.resolveOS=(async()=>(await this.remoteAgentService.getEnvironment())?.os||An)(),this.resolveUserHome=(async()=>{const r=await this.remoteAgentService.getEnvironment();return this.maybeUnresolvedUserHome=r?.userHome??e})()}hasValidBasename(e,t,n){return typeof t=="string"||typeof t>"u"?this.resolveOS.then(s=>this.doHasValidBasename(e,s,t)):this.doHasValidBasename(e,t,n)}doHasValidBasename(e,t,n){return e.scheme===ge.file||e.scheme===ge.vscodeRemote?l9(n??nc(e),t===At.Windows):!0}get defaultUriScheme(){return Jv.findDefaultUriScheme(this.environmentService,this.contextService)}static findDefaultUriScheme(e,t){if(e.remoteAuthority)return ge.vscodeRemote;const n=oY(t.getWorkspace());if(n)return n;const s=t.getWorkspace().folders[0];if(s)return s.uri.scheme;const r=t.getWorkspace().configuration;return r?r.scheme:ge.file}userHome(e){return e?.preferLocal?this.localUserHome:this.resolveUserHome}get resolvedUserHome(){return this.maybeUnresolvedUserHome}get path(){return this.resolveOS.then(e=>e===At.Windows?Xt:Pe)}async fileURI(e){let t="";if(await this.resolveOS===At.Windows&&(e=e.replace(/\\/g,"/")),e[0]==="/"&&e[1]==="/"){const s=e.indexOf("/",2);s===-1?(t=e.substring(2),e="/"):(t=e.substring(2,s),e=e.substring(s)||"/")}return Y.from({scheme:ge.file,authority:t,path:e,query:"",fragment:""})}};b1=Jv=G([L(1,bb),L(2,Nk),L(3,X1)],b1);function OY(i,e){const t=e.getWorkspace(),n=t.folders.at(0);return n?n.uri:t.configuration?Py(t.configuration):Y.from({scheme:b1.findDefaultUriScheme(i,e),authority:i.remoteAuthority,path:"/"})}class FY{constructor(){this.todo=[],this.add=e=>{this.todo.push(e)}}take(e,t){this.add=n=>t.createInstance(n,e),this.todo.forEach(this.add),this.todo=[]}}const PY=new FY,BY=1e4;let ey=class extends ${constructor(e){super(),this.markInactive=this._register(new Bs(()=>{this.isActive=!1,this.changeEmitter.fire(!1)},BY)),this.changeEmitter=this._register(new A),this.active=0,this.isActive=!0,this.onDidChangeIsActive=this.changeEmitter.event,this._register(Hh(()=>PY.take(this,e)))}markActive(e){if(e?.extendOnly&&!this.isActive)return $.None;if(e?.whenHeldFor){const t=new X;return t.add(em(()=>t.add(this.markActive()),e.whenHeldFor)),t}return++this.active===1&&(this.isActive=!0,this.changeEmitter.fire(!0),this.markInactive.cancel()),fe(()=>{--this.active===0&&this.markInactive.schedule()})}};ey=G([L(0,xt)],ey);let ty=class extends ${constructor(e,t){super(),this.logService=e,this.configurationService=t,this.participants=new sn}addFileOperationParticipant(e){const t=this.participants.push(e);return fe(()=>t())}async participate(e,t,n,s){const r=this.configurationService.getValue("files.participants.timeout");if(!(typeof r!="number"||r<=0))for(const o of this.participants)try{await o.participate(e,t,n,r,s)}catch(a){this.logService.warn(a)}}dispose(){this.participants.clear(),super.dispose()}};ty=G([L(0,Zi),L(1,Vt)],ty);let iy=class extends ${get length(){return this.saveParticipants.size}constructor(e,t){super(),this.logService=e,this.progressService=t,this.saveParticipants=new sn}addSaveParticipant(e){const t=this.saveParticipants.push(e);return fe(()=>t())}async participate(e,t,n,s){const r=new _r(s);e.model?.pushStackElement(),n.report({message:d(13223,"Running Code Actions and Formatters...")});let o=!1;if(await this.progressService.withProgress({priority:cw.URGENT,location:$v.Notification,cancellable:d(13224,"Skip"),delay:e.isDirty()?5e3:3e3},async a=>{const l=Array.from(this.saveParticipants).sort((c,h)=>{const u=c.ordinal??0,f=h.ordinal??0;return u-f});for(const c of l){if(r.token.isCancellationRequested||e.isDisposed())break;try{const h=c.participate(e,t,a,r.token);await N9(h,r.token)}catch(h){wc(h)?r.token.isCancellationRequested||(r.cancel(),o=!0):this.logService.error(h)}}},()=>{r.cancel()}),e.model?.pushStackElement(),r.dispose(),o)throw new Zo}dispose(){this.saveParticipants.clear(),super.dispose()}};iy=G([L(0,Zi),L(1,IS)],iy);let ny=class extends ${constructor(e,t,n,s){super(),this.fileService=e,this.workingCopyService=t,this.uriIdentityService=s,this._onWillRunWorkingCopyFileOperation=this._register(new Ob),this.onWillRunWorkingCopyFileOperation=this._onWillRunWorkingCopyFileOperation.event,this._onDidFailWorkingCopyFileOperation=this._register(new Ob),this.onDidFailWorkingCopyFileOperation=this._onDidFailWorkingCopyFileOperation.event,this._onDidRunWorkingCopyFileOperation=this._register(new Ob),this.onDidRunWorkingCopyFileOperation=this._onDidRunWorkingCopyFileOperation.event,this.correlationIds=0,this.workingCopyProviders=[],this.fileOperationParticipants=this._register(n.createInstance(ty)),this.saveParticipants=this._register(n.createInstance(iy)),this._register(this.registerWorkingCopyProvider(r=>this.workingCopyService.workingCopies.filter(o=>this.fileService.hasProvider(r)?this.uriIdentityService.extUri.isEqualOrParent(o.resource,r):this.uriIdentityService.extUri.isEqual(o.resource,r))))}create(e,t,n){return this.doCreateFileOrFolder(e,!0,t,n)}createFolder(e,t,n){return this.doCreateFileOrFolder(e,!1,t,n)}async doCreateFileOrFolder(e,t,n,s){if(e.length===0)return[];if(t){const c=(await sr.settled(e.map(h=>this.fileService.canCreateFile(h.resource,{overwrite:h.overwrite})))).find(h=>h instanceof Error);if(c instanceof Error)throw c}const r=e.map(l=>({target:l.resource}));await this.runFileOperationParticipants(r,$n.CREATE,s,n);const o={correlationId:this.correlationIds++,operation:$n.CREATE,files:r};await this._onWillRunWorkingCopyFileOperation.fireAsync(o,mi.None);let a;try{t?a=await sr.settled(e.map(l=>this.fileService.createFile(l.resource,l.contents,{overwrite:l.overwrite}))):a=await sr.settled(e.map(l=>this.fileService.createFolder(l.resource)))}catch(l){throw await this._onDidFailWorkingCopyFileOperation.fireAsync(o,mi.None),l}return await this._onDidRunWorkingCopyFileOperation.fireAsync(o,mi.None),a}async move(e,t,n){return this.doMoveOrCopy(e,!0,t,n)}async copy(e,t,n){return this.doMoveOrCopy(e,!1,t,n)}async doMoveOrCopy(e,t,n,s){const r=[];for(const{file:{source:l,target:c},overwrite:h}of e){const u=await(t?this.fileService.canMove(l,c,h):this.fileService.canCopy(l,c,h));if(u instanceof Error)throw u}const o=e.map(l=>l.file);await this.runFileOperationParticipants(o,t?$n.MOVE:$n.COPY,s,n);const a={correlationId:this.correlationIds++,operation:t?$n.MOVE:$n.COPY,files:o};await this._onWillRunWorkingCopyFileOperation.fireAsync(a,mi.None);try{for(const{file:{source:l,target:c},overwrite:h}of e){if(!this.uriIdentityService.extUri.isEqual(l,c)){const u=t?[...this.getDirty(l),...this.getDirty(c)]:this.getDirty(c);await sr.settled(u.map(f=>f.revert({soft:!0})))}t?r.push(await this.fileService.move(l,c,h)):r.push(await this.fileService.copy(l,c,h))}}catch(l){throw await this._onDidFailWorkingCopyFileOperation.fireAsync(a,mi.None),l}return await this._onDidRunWorkingCopyFileOperation.fireAsync(a,mi.None),r}async delete(e,t,n){for(const o of e){const a=await this.fileService.canDelete(o.resource,{recursive:o.recursive,useTrash:o.useTrash});if(a instanceof Error)throw a}const s=e.map(o=>({target:o.resource}));await this.runFileOperationParticipants(s,$n.DELETE,n,t);const r={correlationId:this.correlationIds++,operation:$n.DELETE,files:s};await this._onWillRunWorkingCopyFileOperation.fireAsync(r,mi.None);for(const o of e){const a=this.getDirty(o.resource);await sr.settled(a.map(l=>l.revert({soft:!0})))}try{for(const o of e)await this.fileService.del(o.resource,{recursive:o.recursive,useTrash:o.useTrash})}catch(o){throw await this._onDidFailWorkingCopyFileOperation.fireAsync(r,mi.None),o}await this._onDidRunWorkingCopyFileOperation.fireAsync(r,mi.None)}addFileOperationParticipant(e){return this.fileOperationParticipants.addFileOperationParticipant(e)}runFileOperationParticipants(e,t,n,s){return this.fileOperationParticipants.participate(e,t,n,s)}get hasSaveParticipants(){return this.saveParticipants.length>0}addSaveParticipant(e){return this.saveParticipants.addSaveParticipant(e)}runSaveParticipants(e,t,n,s){return this.saveParticipants.participate(e,t,n,s)}registerWorkingCopyProvider(e){const t=OR(this.workingCopyProviders,e);return fe(t)}getDirty(e){const t=new Set;for(const n of this.workingCopyProviders)for(const s of n(e))s.isDirty()&&t.add(s);return Array.from(t)}};ny=G([L(0,eb),L(1,Xj),L(2,xt),L(3,FS)],ny);const WY=Kj.registerExtensionPoint({extensionPoint:"resourceLabelFormatters",jsonSchema:{description:d(12718,"Contributes resource label formatting rules."),type:"array",items:{type:"object",required:["scheme","formatting"],properties:{scheme:{type:"string",description:d(12719,'URI scheme on which to match the formatter on. For example "file". Simple glob patterns are supported.')},authority:{type:"string",description:d(12720,"URI authority on which to match the formatter on. Simple glob patterns are supported.")},formatting:{description:d(12721,"Rules for formatting uri resource labels."),type:"object",properties:{label:{type:"string",description:d(12722,"Label rules to display. For example: myLabel:/${path}. ${path}, ${scheme}, ${authority} and ${authoritySuffix} are supported as variables.")},separator:{type:"string",description:d(12723,"Separator to be used in the uri label display. '/' or '' as an example.")},stripPathStartingSeparator:{type:"boolean",description:d(12724,"Controls whether `${path}` substitutions should have starting separator characters stripped.")},tildify:{type:"boolean",description:d(12725,"Controls if the start of the uri label should be tildified when possible.")},workspaceSuffix:{type:"string",description:d(12726,"Suffix appended to the workspace label.")}}}}}}}),fI=/\//g,UY=/\$\{(scheme|authoritySuffix|authority|path|(query)\.(.+?))\}/g;function HY(i){return!!(i&&i[2]===":")}let sy=class{constructor(e){this.formattersDisposables=new Map,WY.setHandler((t,n)=>{for(const s of n.added)for(const r of s.value){const o={...r};typeof o.formatting.label!="string"&&(o.formatting.label="${authority}${path}"),typeof o.formatting.separator!="string"&&(o.formatting.separator=Ms),!j5(s.description,"contribLabelFormatterWorkspaceTooltip")&&o.formatting.workspaceTooltip&&(o.formatting.workspaceTooltip=void 0),this.formattersDisposables.set(o,e.registerFormatter(o))}for(const s of n.removed)for(const r of s.value)ai(this.formattersDisposables.get(r))})}};sy=G([L(0,DS)],sy);wt.as(g1.Workbench).registerWorkbenchContribution(sy,$t.Restored);const gI=50;let ry=class extends ${constructor(e,t,n,s,r,o){super(),this.environmentService=e,this.contextService=t,this.pathService=n,this.remoteAgentService=s,this._onDidChangeFormatters=this._register(new A({leakWarningThreshold:400})),this.onDidChangeFormatters=this._onDidChangeFormatters.event,this.os=An,this.userHome=n.defaultUriScheme===ge.file?this.pathService.userHome({preferLocal:!0}):void 0;const a=this.storedFormattersMemento=new $i("cachedResourceLabelFormatters2",r);this.storedFormatters=a.getMemento(Oe.PROFILE,fc.MACHINE),this.formatters=this.storedFormatters?.formatters?.slice()||[],this.resolveRemoteEnvironment()}async resolveRemoteEnvironment(){const e=await this.remoteAgentService.getEnvironment();this.os=e?.os??An,this.userHome=await this.pathService.userHome()}findFormatting(e){let t;for(const n of this.formatters)if(n.scheme===e.scheme){if(!n.authority&&(!t||n.priority)){t=n;continue}if(!n.authority)continue;eO(n.authority.toLowerCase(),e.authority.toLowerCase())&&(!t||!t.authority||n.authority.length>t.authority.length||n.authority.length===t.authority.length&&n.priority)&&(t=n)}return t?t.formatting:void 0}getUriLabel(e,t={}){let n=this.findFormatting(e);n&&t.separator&&(n={...n,separator:t.separator});let s=this.doGetUriLabel(e,n,t);return!n&&t.separator&&(s=s.replace(fI,t.separator)),t.appendWorkspaceSuffix&&n?.workspaceSuffix&&(s=this.appendWorkspaceSuffix(s,e)),s}doGetUriLabel(e,t,n={}){if(!t)return iY(e,{os:this.os,tildify:this.userHome?{userHome:this.userHome}:void 0,relative:n.relative?{noPrefix:n.noPrefix,getWorkspace:()=>this.contextService.getWorkspace(),getWorkspaceFolder:s=>this.contextService.getWorkspaceFolder(s)}:void 0});if(n.relative&&this.contextService){let s=this.contextService.getWorkspaceFolder(e);if(!s){const o=this.contextService.getWorkspace().folders.at(0);o&&e.scheme!==o.uri.scheme&&e.path.startsWith(Pe.sep)&&(s=this.contextService.getWorkspaceFolder(o.uri.with({path:e.path})))}if(s){const r=this.formatUri(s.uri,t,n.noPrefix);let o=this.formatUri(e,t,n.noPrefix),a=0;for(;o[a]&&o[a]===r[a];)a++;if(!o[a]||o[a]===t.separator?o=o.substring(1+a):a===r.length&&s.uri.path===Pe.sep&&(o=o.substring(a)),this.contextService.getWorkspace().folders.length>1&&!n.noPrefix){const c=s?.name??lT(s.uri);o=o?`${c} • ${o}`:c}return o}}return this.formatUri(e,t,n.noPrefix)}getUriBasenameLabel(e){const t=this.findFormatting(e),n=this.doGetUriLabel(e,t);let s;return t?.separator===Xt.sep?s=Xt:t?.separator===Pe.sep?s=Pe:s=this.os===At.Windows?Xt:Pe,s.basename(n)}getWorkspaceLabel(e,t){if(iU(e)){const n=tU(e);return Am(n)||Nm(n)?this.getWorkspaceLabel(n,t):""}return Y.isUri(e)?this.doGetSingleFolderWorkspaceLabel(e,t):Am(e)?this.doGetSingleFolderWorkspaceLabel(e.uri,t):Nm(e)?this.doGetWorkspaceLabel(e.configPath,t):""}doGetWorkspaceLabel(e,t){if(MN(e,this.environmentService))return d(12727,"Untitled (Workspace)");if(ON(e))return d(12728,"Workspace");let n=nc(e);n.endsWith(Rm)&&(n=n.substr(0,n.length-Rm.length-1));let s;switch(t?.verbose){case Rr.SHORT:s=n;break;case Rr.LONG:s=d(12729,"{0} (Workspace)",this.getUriLabel(zn(Py(e),n)));break;case Rr.MEDIUM:default:s=d(12730,"{0} (Workspace)",n);break}return t?.verbose===Rr.SHORT?s:this.appendWorkspaceSuffix(s,e)}doGetSingleFolderWorkspaceLabel(e,t){let n;switch(t?.verbose){case Rr.LONG:n=this.getUriLabel(e);break;case Rr.SHORT:case Rr.MEDIUM:default:n=nc(e)||Pe.sep;break}return t?.verbose===Rr.SHORT?n:this.appendWorkspaceSuffix(n,e)}getSeparator(e,t){return this.findFormatting(Y.from({scheme:e,authority:t}))?.separator||Pe.sep}getHostLabel(e,t){return this.findFormatting(Y.from({scheme:e,authority:t}))?.workspaceSuffix||t||""}getHostTooltip(e,t){return this.findFormatting(Y.from({scheme:e,authority:t}))?.workspaceTooltip}registerCachedFormatter(e){const t=this.storedFormatters.formatters??=[];let n=t.findIndex(s=>s.scheme===e.scheme&&s.authority===e.authority);if(n===-1&&t.length>=gI&&(n=gI-1),n===-1)t.unshift(e);else{for(let s=n;s>0;s--)t[s]=t[s-1];t[0]=e}return this.storedFormattersMemento.saveMemento(),this.registerFormatter(e)}registerFormatter(e){return this.formatters.push(e),this._onDidChangeFormatters.fire({scheme:e.scheme}),{dispose:()=>{this.formatters=this.formatters.filter(t=>t!==e),this._onDidChangeFormatters.fire({scheme:e.scheme})}}}formatUri(e,t,n){let s=t.label.replace(UY,(r,o,a,l)=>{switch(o){case"scheme":return e.scheme;case"authority":return e.authority;case"authoritySuffix":{const c=e.authority.indexOf("+");return c===-1?e.authority:e.authority.slice(c+1)}case"path":return t.stripPathStartingSeparator?e.path.slice(e.path[0]===t.separator?1:0):e.path;default:{if(a==="query"){const{query:c}=e;if(c&&c[0]==="{"&&c[c.length-1]==="}")try{return JSON.parse(c)[l]||""}catch{}}return""}}});return t.normalizeDriveLetter&&HY(s)&&(s=s.charAt(1).toUpperCase()+s.substr(2)),t.tildify&&!n&&this.userHome&&(s=tR(s,this.userHome.fsPath,this.os)),t.authorityPrefix&&e.authority&&(s=t.authorityPrefix+s),s.replace(fI,t.separator)}appendWorkspaceSuffix(e,t){const n=this.findFormatting(t),s=n&&typeof n.workspaceSuffix=="string"?n.workspaceSuffix:void 0;return s?`${e} [${s}]`:e}};ry=G([L(0,Nk),L(1,X1),L(2,X5),L(3,bb),L(4,rl),L(5,Y5)],ry);let oy=class extends Hm{constructor(e,t,n,s,r){const o=new g4(Oy.asBrowserUri("vs/editor/common/services/editorWebWorkerMain.js"),"TextEditorWorker");super(o,e,t,n,s,r)}};oy=G([L(0,yr),L(1,G1),L(2,Zi),L(3,Xf),L(4,iS)],oy);let ay=class extends b1{constructor(e,t,n){super(hY().userHome??OY(t,n),e,t,n)}};ay=G([L(0,bb),L(1,Nk),L(2,X1)],ay);function $oe(){return{[K5.toString()]:new ti(Xv,[],!0),[xj.toString()]:new ti(Zv,[],!0),[Rj.toString()]:new ti(Yv,[],!0),[Nj.toString()]:new ti(jv,[],!0),[V8.toString()]:new ti(rY,[],!0),[Lj.toString()]:new ti(Qv,[],!0),[Tj.toString()]:new ti(MY,[],!1),[jj.toString()]:new ti(ey,[],!0),[Yj.toString()]:new ti(ny,[],!1),[X5.toString()]:new ti(ay,[],!0),[Aj.toString()]:new ti(Kv,[],!0),[DS.toString()]:new ti(ry,[],!0),[u4.toString()]:new ti(oy,[],!0)}}export{Vt as $,ec as A,Be as B,_r as C,$ as D,W as E,RC as F,hi as G,Me as H,xt as I,rs as J,Ms as K,Ry as L,qM as M,My as N,$M as O,sY as P,Gp as Q,wt as R,ge as S,xi as T,Y as U,ii as V,Bi as W,gt as X,md as Y,Ds as Z,G as _,bX as a,Uy as a$,X1 as a0,Ya as a1,At as a2,Ps as a3,bb as a4,A as a5,Wi as a6,XQ as a7,j_ as a8,D9 as a9,JQ as aA,ZQ as aB,NX as aC,FX as aD,VQ as aE,lt as aF,h9 as aG,jQ as aH,zQ as aI,ai as aJ,rc as aK,IX as aL,OX as aM,RX as aN,mi as aO,Zi as aP,ua as aQ,Fe as aR,zn as aS,D1 as aT,HM as aU,$e as aV,Fp as aW,UZ as aX,Ky as aY,vs as aZ,WZ as a_,Dt as aa,vZ as ab,pa as ac,hp as ad,sr as ae,EQ as af,$Q as ag,dT as ah,qQ as ai,T9 as aj,ps as ak,lZ as al,MC as am,fr as an,QQ as ao,$n as ap,GQ as aq,MX as ar,A9 as as,JR as at,AX as au,TX as av,aZ as aw,py as ax,KQ as ay,i7 as az,bt as b,mx as b$,qa as b0,QC as b1,qf as b2,$$ as b3,vI as b4,tse as b5,JX as b6,DT as b7,G1 as b8,Xj as b9,Y5 as bA,Nk as bB,SA as bC,Cee as bD,vr as bE,Rj as bF,Rm as bG,_T as bH,$R as bI,pQ as bJ,yQ as bK,CQ as bL,eZ as bM,zs as bN,v1 as bO,U9 as bP,sZ as bQ,rZ as bR,tZ as bS,YQ as bT,es as bU,fu as bV,E4 as bW,TZ as bX,Jo as bY,lJ as bZ,n4 as b_,Gj as ba,DS as bb,Oj as bc,SZ as bd,sc as be,z$ as bf,$v as bg,wc as bh,Uj as bi,X5 as bj,IS as bk,sn as bl,cw as bm,N9 as bn,Zo as bo,Ec as bp,Yj as bq,FS as br,oi as bs,ET as bt,pt as bu,q$ as bv,dW as bw,re as bx,wte as by,DQ as bz,be as c,C9 as c$,bx as c0,fH as c1,yh as c2,uJ as c3,rJ as c4,Rie as c5,q5 as c6,Fse as c7,Pse as c8,Bse as c9,g1 as cA,Bs as cB,sd as cC,oZ as cD,iZ as cE,nZ as cF,MW as cG,_oe as cH,ti as cI,kt as cJ,E5 as cK,hR as cL,Ioe as cM,xC as cN,MQ as cO,Doe as cP,WW as cQ,wQ as cR,Xp as cS,Pe as cT,RN as cU,pe as cV,Pf as cW,Kj as cX,Ate as cY,da as cZ,qo as c_,Wse as ca,Use as cb,Hse as cc,Vse as cd,hT as ce,zse as cf,DZ as cg,$se as ch,lG as ci,W1 as cj,V as ck,j as cl,cJ as cm,eS as cn,tr as co,s4 as cp,oY as cq,ON as cr,zo as cs,wZ as ct,VD as cu,vie as cv,av as cw,Cie as cx,n5 as cy,$t as cz,dw as d,oie as d$,cW as d0,By as d1,aW as d2,ih as d3,lW as d4,Mte as d5,eg as d6,rl as d7,Uie as d8,pH as d9,boe as dA,Ua as dB,Df as dC,Ag as dD,Og as dE,Au as dF,Rg as dG,Mg as dH,Ng as dI,Tg as dJ,hl as dK,aa as dL,Dre as dM,UD as dN,Nm as dO,Am as dP,Nj as dQ,Lte as dR,Dte as dS,rie as dT,lie as dU,PJ as dV,ZY as dW,tie as dX,wi as dY,Ite as dZ,zW as d_,T as da,Iy as db,nU as dc,moe as dd,fie as de,ZE as df,Oe as dg,AN as dh,Mo as di,TN as dj,ew as dk,Yt as dl,mX as dm,xS as dn,pT as dp,H as dq,jh as dr,tn as ds,Nte as dt,uj as du,dy as dv,eie as dw,cZ as dx,Kr as dy,sU as dz,PZ as e,ud as e$,An as e0,fc as e1,ea as e2,cie as e3,die as e4,xQ as e5,MN as e6,m1 as e7,tU as e8,lY as e9,jr as eA,kl as eB,Sl as eC,WO as eD,rr as eE,NT as eF,Gd as eG,MJ as eH,TT as eI,GZ as eJ,F1 as eK,z8 as eL,Ns as eM,Bl as eN,eN as eO,Fs as eP,am as eQ,On as eR,K as eS,si as eT,TI as eU,II as eV,hs as eW,ql as eX,xI as eY,Kne as eZ,W7 as e_,hj as ea,DN as eb,yoe as ec,DC as ed,Jn as ee,k as ef,go as eg,js as eh,ya as ei,Ga as ej,zX as ek,ab as el,Fd as em,LT as en,Gne as eo,XX as ep,dz as eq,aq as er,nv as es,Hs as et,ke as eu,D2 as ev,OJ as ew,vW as ex,O as ey,QZ as ez,wee as f,Bne as f$,V6 as f0,me as f1,Ba as f2,fA as f3,XC as f4,Fi as f5,qne as f6,gz as f7,ma as f8,F7 as f9,Vh as fA,uS as fB,fa as fC,vl as fD,s0 as fE,DI as fF,at as fG,Ve as fH,tee as fI,iee as fJ,P1 as fK,ja as fL,gQ as fM,xM as fN,Bt as fO,qt as fP,_N as fQ,De as fR,mt as fS,om as fT,nS as fU,XV as fV,lne as fW,Nee as fX,iN as fY,v0 as fZ,Q_ as f_,O7 as fa,sQ as fb,qr as fc,hC as fd,ZX as fe,LI as ff,qH as fg,el as fh,bi as fi,Xf as fj,S1 as fk,Xa as fl,lse as fm,aw as fn,Ne as fo,w as fp,Lm as fq,um as fr,fse as fs,cq as ft,hq as fu,O2 as fv,jm as fw,on as fx,dc as fy,nk as fz,oe as g,une as g$,Nne as g0,sz as g1,Wne as g2,Rne as g3,rz as g4,Une as g5,Mne as g6,oz as g7,Hne as g8,One as g9,nf as gA,Ws as gB,cC as gC,y1 as gD,hQ as gE,fte as gF,gte as gG,V1 as gH,nh as gI,ad as gJ,dte as gK,BO as gL,od as gM,jC as gN,P as gO,Lne as gP,T4 as gQ,hne as gR,dne as gS,Dne as gT,qee as gU,vn as gV,see as gW,tl as gX,lA as gY,Sa as gZ,A4 as g_,az as ga,Vne as gb,Fne as gc,lz as gd,zne as ge,Pne as gf,cz as gg,_l as gh,rb as gi,sb as gj,vne as gk,pne as gl,yne as gm,mne as gn,Sne as go,bne as gp,kne as gq,_ne as gr,Cne as gs,wne as gt,t$ as gu,qm as gv,Gg as gw,Lo as gx,gne as gy,Ene as gz,X as h,K4 as h$,fne as h0,N4 as h1,vt as h2,er as h3,ht as h4,fX as h5,no as h6,Ce as h7,Wh as h8,_e as h9,H$ as hA,gc as hB,cX as hC,IR as hD,q7 as hE,Nt as hF,R1 as hG,XZ as hH,sne as hI,lr as hJ,L_ as hK,Gm as hL,V$ as hM,Kte as hN,HX as hO,z5 as hP,gD as hQ,uee as hR,iS as hS,FA as hT,Is as hU,cc as hV,$h as hW,zee as hX,Ine as hY,Of as hZ,sm as h_,U1 as ha,ib as hb,Os as hc,Q4 as hd,du as he,_n as hf,$s as hg,O1 as hh,hJ as hi,c_ as hj,JA as hk,b4 as hl,ds as hm,Bd as hn,xne as ho,c6 as hp,_I as hq,YC as hr,So as hs,Nh as ht,Cf as hu,Qf as hv,ms as hw,zY as hx,zl as hy,VY as hz,FZ as i,SN as i$,DF as i0,xF as i1,zh as i2,vJ as i3,fs as i4,ZT as i5,XT as i6,xo as i7,Qi as i8,Mf as i9,QT as iA,kJ as iB,wR as iC,pi as iD,Lk as iE,WF as iF,dj as iG,TR as iH,Se as iI,AR as iJ,gs as iK,nN as iL,Nn as iM,S as iN,ff as iO,tD as iP,Xr as iQ,gX as iR,Vr as iS,yn as iT,yV as iU,AL as iV,QG as iW,Go as iX,rX as iY,VF as iZ,$Y as i_,lc as ia,d0 as ib,VN as ic,Q1 as id,xh as ie,C7 as ig,J1 as ih,Ql as ii,QN as ij,ze as ik,RS as il,tb as im,Hf as io,gu as ip,Qh as iq,o4 as ir,JY as is,Ui as it,XG as iu,jie as iv,Vie as iw,DJ as ix,wJ as iy,Oy as iz,u9 as j,jte as j$,i_ as j0,$l as j1,oX as j2,ote as j3,G2 as j4,nte as j5,ate as j6,j2 as j7,ste as j8,Jd as j9,K_ as jA,Jz as jB,GY as jC,Yo as jD,gT as jE,la as jF,cse as jG,use as jH,PT as jI,Ss as jJ,Sf as jK,rk as jL,Uw as jM,qte as jN,EN as jO,CN as jP,kN as jQ,mW as jR,Sh as jS,bW as jT,RI as jU,jG as jV,rx as jW,Mv as jX,Pa as jY,B0 as jZ,Fre as j_,xs as ja,Gi as jb,ji as jc,TJ as jd,he as je,UO as jf,_t as jg,jZ as jh,Ii as ji,_4 as jj,Xh as jk,SJ as jl,Ea as jm,rt as jn,jl as jo,DE as jp,AB as jq,LJ as jr,eU as js,NJ as jt,AJ as ju,Te as jv,lh as jw,H0 as jx,zc as jy,Yr as jz,nc as k,BX as k$,Jr as k0,pc as k1,EJ as k2,SR as k3,fp as k4,im as k5,$b as k6,oL as k7,tL as k8,Vx as k9,eL as kA,Qx as kB,Xx as kC,xx as kD,Kx as kE,qx as kF,zx as kG,aL as kH,Tx as kI,Hx as kJ,cL as kK,lL as kL,Lx as kM,Ix as kN,Dx as kO,Mx as kP,$te as kQ,gd as kR,Wp as kS,u4 as kT,Y_ as kU,qu as kV,PR as kW,HH as kX,or as kY,GC as kZ,Sv as k_,fL as ka,dL as kb,uL as kc,hL as kd,sL as ke,rL as kf,nL as kg,iL as kh,Wx as ki,Jx as kj,Zx as kk,Yx as kl,jx as km,Gx as kn,Bx as ko,Px as kp,Fx as kq,Ox as kr,Rx as ks,Nx as kt,Ax as ku,Ex as kv,Vf as kw,Bte as kx,$x as ky,Ux as kz,d as l,Va as l$,PX as l0,TQ as l1,NC as l2,I9 as l3,za as l4,is as l5,pX as l6,SX as l7,Fy as l8,g9 as l9,nI as lA,iI as lB,toe as lC,yie as lD,AC as lE,P0 as lF,eO as lG,OZ as lH,DR as lI,mE as lJ,lu as lK,_O as lL,R as lM,sN as lN,Wl as lO,ir as lP,ie as lQ,gr as lR,cm as lS,hm as lT,n0 as lU,nE as lV,rM as lW,mD as lX,pD as lY,lH as lZ,Jl as l_,He as la,XA as lb,Ht as lc,Zr as ld,z1 as le,Rs as lf,hc as lg,Lc as lh,Zd as li,Fee as lj,wP as lk,rS as ll,Y2 as lm,HA as ln,tP as lo,ur as lp,bs as lq,st as lr,Xe as ls,vM as lt,cr as lu,As as lv,oc as lw,mp as lx,rf as ly,ph as lz,Py as m,Ug as m$,Qie as m0,WN as m1,BK as m2,tv as m3,hv as m4,lT as m5,DD as m6,ro as m7,Gse as m8,uG as m9,yi as mA,jf as mB,$A as mC,noe as mD,H2 as mE,W2 as mF,KE as mG,B2 as mH,Z4 as mI,VZ as mJ,DO as mK,F6 as mL,eoe as mM,K5 as mN,pie as mO,ZZ as mP,nie as mQ,V8 as mR,jj as mS,Tj as mT,gie as mU,Lj as mV,xj as mW,Mj as mX,Aj as mY,D$ as mZ,ek as m_,fG as ma,Yh as mb,K1 as mc,xN as md,Kt as me,ase as mf,kC as mg,ose as mh,Wte as mi,wd as mj,Ra as mk,em as ml,AE as mm,Ut as mn,pf as mo,$ee as mp,PE as mq,ite as mr,tte as ms,ete as mt,Jee as mu,UA as mv,WA as mw,Uf as mx,ak as my,nee as mz,f9 as n,iR as n$,VX as n0,Ia as n1,X0 as n2,Ute as n3,bQ as n4,lb as n5,Vte as n6,j5 as n7,CI as n8,Vd as n9,WC as nA,G_ as nB,DM as nC,d9 as nD,UQ as nE,f1 as nF,zre as nG,J_ as nH,hy as nI,eI as nJ,Hy as nK,jre as nL,uQ as nM,jD as nN,tI as nO,Jre as nP,Rp as nQ,ZD as nR,Qre as nS,ioe as nT,Xre as nU,Zre as nV,cI as nW,$i as nX,PQ as nY,Pj as nZ,rT as n_,f7 as na,WX as nb,ue as nc,q as nd,ba as ne,It as nf,_9 as ng,LE as nh,vE as ni,bE as nj,_E as nk,kE as nl,wE as nm,SE as nn,Yre as no,zy as np,Cm as nq,m0 as nr,nQ as ns,nX as nt,R9 as nu,iQ as nv,p4 as nw,loe as nx,UR as ny,wy as nz,L as o,so as o$,p0 as o0,mJ as o1,Dy as o2,KI as o3,bC as o4,tJ as o5,ia as o6,ER as o7,In as o8,AQ as o9,xZ as oA,CR as oB,yH as oC,rQ as oD,CE as oE,uZ as oF,poe as oG,k2 as oH,OS as oI,Zh as oJ,Cse as oK,yE as oL,EZ as oM,wD as oN,P3 as oO,M0 as oP,B3 as oQ,Yd as oR,fS as oS,ks as oT,p9 as oU,pE as oV,W3 as oW,U3 as oX,nw as oY,ah as oZ,K2 as o_,$X as oa,en as ob,eJ as oc,iJ as od,To as oe,WQ as of,Uh as og,zt as oh,Vre as oi,qre as oj,VM as ok,HW as ol,S9 as om,HQ as on,FQ as oo,OQ as op,G5 as oq,hZ as or,Tte as os,Ai as ot,tO as ou,XY as ov,ES as ow,RW as ox,Yl as oy,Eh as oz,Mt as p,dn as p$,dr as p0,fo as p1,jq as p2,Gq as p3,Re as p4,pu as p5,l5 as p6,il as p7,sie as p8,MR as p9,Om as pA,bie as pB,mie as pC,oM as pD,vy as pE,cy as pF,Bee as pG,bP as pH,_P as pI,Jj as pJ,xte as pK,km as pL,Br as pM,IC as pN,bH as pO,Bp as pP,_X as pQ,sX as pR,vX as pS,LZ as pT,jX as pU,xK as pV,$p as pW,E1 as pX,gse as pY,$6 as pZ,SQ as p_,aM as pa,Wd as pb,lQ as pc,Hp as pd,aQ as pe,tC as pf,tne as pg,h4 as ph,nt as pi,VJ as pj,FC as pk,Qp as pl,OA as pm,K0 as pn,ZA as po,G0 as pp,Lg as pq,bte as pr,Pd as ps,Yf as pt,pn as pu,l6 as pv,vse as pw,nr as px,uie as py,iX as pz,eb as q,fw as q$,vu as q0,hee as q1,coe as q2,NQ as q3,L1 as q4,TC as q5,k1 as q6,vQ as q7,eee as q8,yZ as q9,KX as qA,Jp as qB,aoe as qC,iC as qD,sH as qE,UJ as qF,WJ as qG,tX as qH,lte as qI,Wf as qJ,iU as qK,f5 as qL,LD as qM,Tie as qN,Oa as qO,Jy as qP,Xt as qQ,M3 as qR,OR as qS,m6 as qT,O8 as qU,_ie as qV,kD as qW,Ese as qX,qJ as qY,yU as qZ,Kf as q_,B9 as qa,aee as qb,Or as qc,lee as qd,GX as qe,LQ as qf,C5 as qg,doe as qh,kB as qi,wU as qj,soe as qk,t4 as ql,_w as qm,wp as qn,iP as qo,$o as qp,pr as qq,_6 as qr,Zm as qs,oH as qt,gA as qu,Yie as qv,mq as qw,rH as qx,qs as qy,wX as qz,xc as r,Qee as r$,hx as r0,fh as r1,uH as r2,hie as r3,_k as r4,uT as r5,pte as r6,mte as r7,KA as r8,VH as r9,GU as rA,zie as rB,kse as rC,Kd as rD,Gr as rE,k9 as rF,$re as rG,Hre as rH,Rte as rI,YZ as rJ,MZ as rK,RQ as rL,HR as rM,lX as rN,KJ as rO,tc as rP,uy as rQ,QY as rR,Ha as rS,HF as rT,gm as rU,Yi as rV,CZ as rW,gZ as rX,Zne as rY,E7 as rZ,Kee as r_,Aee as ra,Kq as rb,Sn as rc,t_ as rd,vU as re,cv as rf,Ye as rg,Xi as rh,Xn as ri,Ise as rj,Dse as rk,Nse as rl,Lse as rm,Ase as rn,xse as ro,Tse as rp,yte as rq,vte as rr,_te as rs,Ste as rt,wie as ru,Jm as rv,ID as rw,yse as rx,jd as ry,ys as rz,yr as s,IJ as s$,Ma as s0,cte as s1,EX as s2,AO as s3,TO as s4,BZ as s5,g2 as s6,N8 as s7,M8 as s8,Oee as s9,Q7 as sA,__ as sB,yL as sC,Fz as sD,Uz as sE,eD as sF,Az as sG,Et as sH,Gt as sI,jne as sJ,Cn as sK,T$ as sL,aX as sM,LF as sN,yJ as sO,qY as sP,rte as sQ,Gu as sR,MP as sS,q0 as sT,X$ as sU,QX as sV,bse as sW,Pee as sX,qP as sY,kte as sZ,rP as s_,QP as sa,RE as sb,sM as sc,pC as sd,xf as se,Hie as sf,ME as sg,pv as sh,Mee as si,$d as sj,JP as sk,Tq as sl,roe as sm,yo as sn,FJ as so,ch as sp,ZH as sq,Z_ as sr,us as ss,No as st,PF as su,m4 as sv,QH as sw,Tn as sx,Un as sy,ine as sz,fe as t,Ote as t$,Xne as t0,uh as t1,CJ as t2,Y6 as t3,Zee as t4,kL as t5,gee as t6,I$ as t7,L7 as t8,_p as t9,wI as tA,kX as tB,fP as tC,jc as tD,Wq as tE,Uq as tF,Hq as tG,qA as tH,zA as tI,R0 as tJ,JN as tK,mre as tL,Zy as tM,Xee as tN,Gee as tO,jee as tP,hse as tQ,rse as tR,Ane as tS,xJ as tT,PO as tU,WE as tV,z2 as tW,Vee as tX,bm as tY,_m as tZ,VL as t_,hA as ta,OE as tb,qse as tc,Kse as td,NE as te,Wee as tf,Uee as tg,Hee as th,IP as ti,LP as tj,DP as tk,sk as tl,rn as tm,cp as tn,RZ as to,_Z as tp,IA as tq,UG as tr,JE as ts,If as tt,dse as tu,uk as tv,QJ as tw,ZJ as tx,rA as ty,dY as tz,gy as u,uoe as u$,P9 as u0,hte as u1,ute as u2,BA as u3,xE as u4,EE as u5,Tne as u6,TE as u7,IE as u8,Dee as u9,Mk as uA,qv as uB,Eoe as uC,mY as uD,Coe as uE,hX as uF,mQ as uG,nR as uH,Rr as uI,hoe as uJ,$8 as uK,kQ as uL,voe as uM,tS as uN,bw as uO,kq as uP,_H as uQ,yw as uR,Pm as uS,g_ as uT,fJ as uU,C as uV,cA as uW,Sw as uX,Lh as uY,goe as uZ,foe as u_,Ks as ua,YH as ub,cl as uc,yd as ud,Aa as ue,xT as uf,BR as ug,vv as uh,MI as ui,X7 as uj,oQ as uk,xie as ul,qI as um,YW as un,GW as uo,LS as up,QE as uq,UI as ur,sv as us,t5 as ut,Hte as uu,zu as uv,Wb as uw,tQ as ux,gY as uy,xoe as uz,fy as v,ZS as v$,hH as v0,YU as v1,qy as v2,wm as v3,woe as v4,Ny as v5,IM as v6,TM as v7,jJ as v8,GJ as v9,$y as vA,Fl as vB,CM as vC,KY as vD,x1 as vE,Lie as vF,c9 as vG,L9 as vH,bZ as vI,$5 as vJ,KC as vK,h1 as vL,ip as vM,BQ as vN,w1 as vO,IZ as vP,_y as vQ,ly as vR,bO as vS,xe as vT,FH as vU,Bm as vV,bg as vW,PC as vX,OC as vY,YY as vZ,$D as v_,BJ as va,HJ as vb,dH as vc,Nie as vd,cee as ve,AT as vf,Cte as vg,Soe as vh,$oe as vi,zH as vj,Ob as vk,_J as vl,qX as vm,JZ as vn,nJ as vo,sJ as vp,XR as vq,RV as vr,Ib as vs,R7 as vt,jY as vu,h0 as vv,pZ as vw,cQ as vx,Gre as vy,Sie as vz,ru as w,$J as w$,Vo as w0,NZ as w1,RR as w2,Rse as w3,rY as w4,Kre as w5,AZ as w6,zZ as w7,$Z as w8,uX as w9,M2 as wA,bee as wB,_ee as wC,kg as wD,TA as wE,MD as wF,Dk as wG,gre as wH,P5 as wI,Ree as wJ,qG as wK,sS as wL,LA as wM,O0 as wN,ex as wO,ox as wP,Ad as wQ,La as wR,H1 as wS,Mh as wT,Oh as wU,hw as wV,iie as wW,ZW as wX,dX as wY,b6 as wZ,kZ as w_,qZ as wa,koe as wb,xO as wc,Zz as wd,xX as we,LX as wf,k$ as wg,jw as wh,RH as wi,OG as wj,_Q as wk,Zw as wl,PA as wm,Yee as wn,cne as wo,Q6 as wp,oh as wq,VG as wr,HG as ws,fre as wt,pre as wu,ure as wv,dre as ww,Dn as wx,s_ as wy,_o as wz,Wy as x,wA as x$,pee as x0,Fie as x1,zJ as x2,Pie as x3,UX as x4,Sse as x5,y0 as x6,Oie as x7,dJ as x8,fQ as x9,Yy as xA,q8 as xB,lw as xC,QW as xD,C0 as xE,fZ as xF,dZ as xG,Q as xH,IN as xI,UW as xJ,tz as xK,nz as xL,fY as xM,eX as xN,FR as xO,IQ as xP,cb as xQ,Qm as xR,Eie as xS,Aq as xT,Iie as xU,e4 as xV,JJ as xW,dQ as xX,n6 as xY,oee as xZ,ree as x_,r4 as xa,Wo as xb,l4 as xc,cT as xd,I6 as xe,bre as xf,_re as xg,DW as xh,Qte as xi,CX as xj,KZ as xk,aJ as xl,xR as xm,Ar as xn,bJ as xo,xB as xp,aA as xq,Mie as xr,BT as xs,Wr as xt,AM as xu,KW as xv,ld as xw,gJ as xx,pJ as xy,pd as xz,wn as y,H8 as y0,RJ as y1,Bie as y2,Aie as y3,YJ as y4,E6 as y5,XJ as y6,mee as y7,pA as y8,dee as y9,Jte as yA,BE as yB,pY as yC,YX as yD,V0 as yE,z0 as yF,$1 as yG,aS as yH,lS as yI,cS as yJ,hS as yK,VP as yL,jA as yM,DX as yN,Mse as yO,Ose as yP,LW as yQ,qR as yR,fee as ya,oJ as yb,V4 as yc,fT as yd,D7 as ye,Vl as yf,ub as yg,gk as yh,aG as yi,dG as yj,L5 as yk,AK as yl,Qse as ym,gG as yn,un as yo,db as yp,bk as yq,d5 as yr,x5 as ys,hG as yt,pG as yu,WB as yv,Tee as yw,ED as yx,eQ as yy,yX as yz,Ls as z};
